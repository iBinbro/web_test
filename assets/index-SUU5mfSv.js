const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/pages-splash-splash.CNUUU-Wh.js","assets/logo.CDUkGFg-.js","assets/splash-BfPXJXFB.css","assets/pages-login-login.bVEei1mi.js","assets/login-DiCIvpHs.css","assets/pages-tab_bar-home-home.CgLDC77U.js","assets/z-paging.CcGAQywI.js","assets/uni-app.es.BFzw-cPf.js","assets/z-paging-DIU_tsmM.css","assets/pwa.DEqUVdea.js","assets/home-qrQ9IGhJ.css","assets/pages-tab_bar-game-game-room-list-game-room-list.S47WIS0-.js","assets/game-room-list-C0rJGoEf.css","assets/pages-tab_bar-match-match.Bcnubdh4.js","assets/match-1fHK70xP.css","assets/pages-tab_bar-match-matching.CMj3r-lb.js","assets/matching-3MT3wlK0.css","assets/pages-tab_bar-conversation-conversation.B1IUOMlK.js","assets/modal-msg-more-option.DU4XmyW8.js","assets/modal-msg-more-option-CJyIf-N7.css","assets/conversation-DV6Hme82.css","assets/pages-tab_bar-mine-mine.GYKE4FbX.js","assets/mine-jaNQFx_E.css","assets/pages-tab_bar-conversation-msg-msg.K2hEDV9V.js","assets/picker.CIoOQAKU.js","assets/gift-effect.7ERhjfhJ.js","assets/gift-effect-CTwBAM6W.css","assets/msg-BXIKcw9g.css","assets/pages-third-page-third-page.FBIVfcKQ.js","assets/third-page-DhM1AziB.css","assets/pages-video-chat-video-chat.CAWcTJ2Z.js","assets/video-chat-DtYp8eIU.css","assets/pages-video-chat-video-chat-end.avrwAwUc.js","assets/video-chat-end-F9dLrCgX.css","assets/pages-anchor-detail-anchor-detail.DXMiBhvI.js","assets/anchor-detail-416TKmUq.css","assets/pages-tab_bar-mine-about-us-about-us.-c3vz0o1.js","assets/about-us-jABggo1p.css","assets/pages-tab_bar-mine-edit-profile-edit-profile.BIEbN1up.js","assets/edit-profile-ZMD_l9Ur.css","assets/pages-tab_bar-mine-bill-details-bill-details.B2NpVHn4.js","assets/bill-details-56ihwJFh.css","assets/pages-tab_bar-mine-faq-faq.I-mKrh-1.js","assets/faq-D6kBOVr8.css","assets/pages-tab_bar-mine-setting-setting.BdDw1TTt.js","assets/setting-CV3TczG9.css","assets/pages-tab_bar-mine-edit-password-edit-password.0yFzGLDj.js","assets/edit-password-Cxdybo6n.css","assets/pages-peace-and-love-peace-and-love-peace-and-love.DXnuP4KM.js","assets/peace-and-love-Dzyk3s4j.css","assets/pages-anchor-detail-album-album.Dw2qaOOJ.js","assets/album-BtSXo2AQ.css","assets/pages-third-page-third-game-page.CIsP-SCg.js","assets/third-game-page-Sk8QO8al.css"])))=>i.map(i=>d[i]);
!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const scriptRel="modulepreload",assetsURL=function(e){return"/no_pwa/"+e},seen={},__vitePreload=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),n=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));r=Promise.allSettled(t.map((e=>{if((e=assetsURL(e))in seen)return;seen[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${r}`))return;const o=document.createElement("link");return o.rel=t?"stylesheet":scriptRel,t||(o.as="script"),o.crossOrigin="",o.href=e,n&&o.setAttribute("nonce",n),document.head.appendChild(o),t?new Promise(((t,n)=>{o.addEventListener("load",t),o.addEventListener("error",(()=>n(new Error(`Unable to preload CSS for ${e}`))))})):void 0})))}function o(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then((t=>{for(const e of t||[])"rejected"===e.status&&o(e.reason);return e().catch(o)}))},uniApp_en={},__vite_glob_0_0=Object.freeze(Object.defineProperty({__proto__:null,default:uniApp_en},Symbol.toStringTag,{value:"Module"}));
/**
* @vue/shared v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
function makeMap(e,t){const n=new Set(e.split(","));return e=>n.has(e)}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,isOn=e=>111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),isModelListener=e=>e.startsWith("onUpdate:"),extend$2=Object.assign,remove$1=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},hasOwnProperty$4=Object.prototype.hasOwnProperty,hasOwn$2=(e,t)=>hasOwnProperty$4.call(e,t),isArray$3=Array.isArray,isMap=e=>"[object Map]"===toTypeString$1(e),isSet=e=>"[object Set]"===toTypeString$1(e),isRegExp$3=e=>"[object RegExp]"===toTypeString$1(e),isFunction$2=e=>"function"==typeof e,isString$3=e=>"string"==typeof e,isSymbol=e=>"symbol"==typeof e,isObject$4=e=>null!==e&&"object"==typeof e,isPromise$1=e=>(isObject$4(e)||isFunction$2(e))&&isFunction$2(e.then)&&isFunction$2(e.catch),objectToString$2=Object.prototype.toString,toTypeString$1=e=>objectToString$2.call(e),toRawType=e=>toTypeString$1(e).slice(8,-1),isPlainObject$4=e=>"[object Object]"===toTypeString$1(e),isIntegerKey=e=>isString$3(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction((e=>e.replace(camelizeRE,((e,t)=>t?t.toUpperCase():"")))),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction((e=>e.replace(hyphenateRE,"-$1").toLowerCase())),capitalize$2=cacheStringFunction((e=>e.charAt(0).toUpperCase()+e.slice(1))),toHandlerKey=cacheStringFunction((e=>e?`on${capitalize$2(e)}`:"")),hasChanged=(e,t)=>!Object.is(e,t),invokeArrayFns$1=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},def=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},looseToNumber=e=>{const t=parseFloat(e);return isNaN(t)?e:t},toNumber=e=>{const t=isString$3(e)?Number(e):NaN;return isNaN(t)?e:t};let _globalThis$1;const getGlobalThis$1=()=>_globalThis$1||(_globalThis$1="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{});function normalizeStyle$1(e){if(isArray$3(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],o=isString$3(r)?parseStringStyle(r):normalizeStyle$1(r);if(o)for(const e in o)t[e]=o[e]}return t}if(isString$3(e)||isObject$4(e))return e}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(e){const t={};return e.replace(styleCommentRE,"").split(listDelimiterRE).forEach((e=>{if(e){const n=e.split(propertyDelimiterRE);n.length>1&&(t[n[0].trim()]=n[1].trim())}})),t}function stringifyStyle(e){let t="";if(!e||isString$3(e))return t;for(const n in e){const r=e[n],o=n.startsWith("--")?n:hyphenate(n);(isString$3(r)||"number"==typeof r)&&(t+=`${o}:${r};`)}return t}function normalizeClass$1(e){let t="";if(isString$3(e))t=e;else if(isArray$3(e))for(let n=0;n<e.length;n++){const r=normalizeClass$1(e[n]);r&&(t+=r+" ")}else if(isObject$4(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(e){return!!e||""===e}const toDisplayString$1=e=>isString$3(e)?e:null==e?"":isArray$3(e)||isObject$4(e)&&(e.toString===objectToString$2||!isFunction$2(e.toString))?JSON.stringify(e,replacer,2):String(e),replacer=(e,t)=>t&&t.__v_isRef?replacer(e,t.value):isMap(t)?{[`Map(${t.size})`]:[...t.entries()].reduce(((e,[t,n],r)=>(e[stringifySymbol(t,r)+" =>"]=n,e)),{})}:isSet(t)?{[`Set(${t.size})`]:[...t.values()].map((e=>stringifySymbol(e)))}:isSymbol(t)?stringifySymbol(t):!isObject$4(t)||isArray$3(t)||isPlainObject$4(t)?t:String(t),stringifySymbol=(e,t="")=>{var n;return isSymbol(e)?`Symbol(${null!=(n=e.description)?n:t})`:e},BUILT_IN_TAG_NAMES=["ad","ad-content-page","ad-draw","audio","button","camera","canvas","checkbox","checkbox-group","cover-image","cover-view","editor","form","functional-page-navigator","icon","image","input","label","live-player","live-pusher","map","movable-area","movable-view","navigator","official-account","open-data","picker","picker-view","picker-view-column","progress","radio","radio-group","rich-text","scroll-view","slider","swiper","swiper-item","switch","text","textarea","video","view","web-view","location-picker","location-view"],BUILT_IN_TAGS=BUILT_IN_TAG_NAMES.map((e=>"uni-"+e)),UVUE_WEB_BUILT_IN_TAGS=["list-view","list-item","sticky-section","sticky-header","cloud-db-element"].map((e=>"uni-"+e)),UNI_UI_CONFLICT_TAGS=["list-item"].map((e=>"uni-"+e));function isBuiltInComponent(e){if(-1!==UNI_UI_CONFLICT_TAGS.indexOf(e))return!1;const t="uni-"+e.replace("v-uni-","");return-1!==BUILT_IN_TAGS.indexOf(t)||-1!==UVUE_WEB_BUILT_IN_TAGS.indexOf(t)}const LINEFEED="\n",NAVBAR_HEIGHT=44,ON_REACH_BOTTOM_DISTANCE=50,UNI_STORAGE_LOCALE="UNI_LOCALE",I18N_JSON_DELIMITERS=["%","%"],SCHEME_RE=/^([a-z-]+:)?\/\//i,DATA_RE=/^data:.*,.*/,WEB_INVOKE_APPSERVICE="WEB_INVOKE_APPSERVICE",ON_SHOW="onShow",ON_HIDE="onHide",ON_LAUNCH="onLaunch",ON_ERROR="onError",ON_THEME_CHANGE="onThemeChange",ON_PAGE_NOT_FOUND="onPageNotFound",ON_UNHANDLE_REJECTION="onUnhandledRejection",ON_EXIT="onExit",ON_LOAD="onLoad",ON_READY="onReady",ON_UNLOAD="onUnload",ON_INIT="onInit",ON_SAVE_EXIT_STATE="onSaveExitState",ON_RESIZE="onResize",ON_BACK_PRESS="onBackPress",ON_PAGE_SCROLL="onPageScroll",ON_TAB_ITEM_TAP="onTabItemTap",ON_REACH_BOTTOM="onReachBottom",ON_PULL_DOWN_REFRESH="onPullDownRefresh",ON_SHARE_TIMELINE="onShareTimeline",ON_SHARE_CHAT="onShareChat",ON_ADD_TO_FAVORITES="onAddToFavorites",ON_SHARE_APP_MESSAGE="onShareAppMessage",ON_NAVIGATION_BAR_BUTTON_TAP="onNavigationBarButtonTap",ON_NAVIGATION_BAR_CHANGE="onNavigationBarChange",ON_NAVIGATION_BAR_SEARCH_INPUT_CLICKED="onNavigationBarSearchInputClicked",ON_NAVIGATION_BAR_SEARCH_INPUT_CHANGED="onNavigationBarSearchInputChanged",ON_NAVIGATION_BAR_SEARCH_INPUT_CONFIRMED="onNavigationBarSearchInputConfirmed",ON_NAVIGATION_BAR_SEARCH_INPUT_FOCUS_CHANGED="onNavigationBarSearchInputFocusChanged",ON_APP_ENTER_FOREGROUND="onAppEnterForeground",ON_APP_ENTER_BACKGROUND="onAppEnterBackground",ON_WEB_INVOKE_APP_SERVICE="onWebInvokeAppService",ON_WXS_INVOKE_CALL_METHOD="onWxsInvokeCallMethod";function getLen(e=""){return(""+e).replace(/[^\x00-\xff]/g,"**").length}function hasLeadingSlash(e){return 0===e.indexOf("/")}function addLeadingSlash(e){return hasLeadingSlash(e)?e:"/"+e}function removeLeadingSlash(e){return hasLeadingSlash(e)?e.slice(1):e}const invokeArrayFns=(e,t)=>{let n;for(let r=0;r<e.length;r++)n=e[r](t);return n};function updateElementStyle(e,t){for(const n in t)e.style[n]=t[n]}function once(e,t=null){let n;return(...r)=>(e&&(n=e.apply(t,r),e=null),n)}const _completeValue=e=>e>9?e:"0"+e;function formatDateTime({date:e=new Date,mode:t="date"}){return"time"===t?_completeValue(e.getHours())+":"+_completeValue(e.getMinutes()):e.getFullYear()+"-"+_completeValue(e.getMonth()+1)+"-"+_completeValue(e.getDate())}function callOptions(e,t){e=e||{},isString$3(t)&&(t={errMsg:t}),/:ok$/.test(t.errMsg)?isFunction$2(e.success)&&e.success(t):isFunction$2(e.fail)&&e.fail(t),isFunction$2(e.complete)&&e.complete(t)}function sortObject(e){let t={};return isPlainObject$4(e)&&Object.keys(e).sort().forEach((n=>{const r=n;t[r]=e[r]})),Object.keys(t)?t:e}function getGlobalOnce(){if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;function e(){return this}return void 0!==e()?e():new Function("return this")()}let g;function getGlobal$1(){return g||(g=getGlobalOnce(),g)}function isComponentInternalInstance(e){return!!e.appContext}function resolveComponentInstance(e){return e&&(isComponentInternalInstance(e)?e.proxy:e)}function resolveOwnerVm(e){if(!e)return;let t=e.type.name;for(;t&&isBuiltInComponent(hyphenate(t));)t=(e=e.parent).type.name;return e.proxy}function isElement$1(e){return 1===e.nodeType}function resolveOwnerEl(e,t=!1){const{vnode:n}=e;if(isElement$1(n.el))return t?n.el?[n.el]:[]:n.el;const{subTree:r}=e;if(16&r.shapeFlag){const e=r.children.filter((e=>e.el&&isElement$1(e.el)));if(e.length>0)return t?e.map((e=>e.el)):e[0].el}return t?n.el?[n.el]:[]:n.el}function normalizeStyle(e){const t=getGlobal$1();if(t&&t.UTSJSONObject&&e instanceof t.UTSJSONObject){const n={};return t.UTSJSONObject.keys(e).forEach((t=>{n[t]=e[t]})),normalizeStyle$1(n)}if(e instanceof Map){const t={};return e.forEach(((e,n)=>{t[n]=e})),normalizeStyle$1(t)}if(isString$3(e))return parseStringStyle(e);if(isArray$3(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],o=isString$3(r)?parseStringStyle(r):normalizeStyle(r);if(o)for(const e in o)t[e]=o[e]}return t}return normalizeStyle$1(e)}function normalizeClass(e){let t="";const n=getGlobal$1();if(n&&n.UTSJSONObject&&e instanceof n.UTSJSONObject)n.UTSJSONObject.keys(e).forEach((n=>{e[n]&&(t+=n+" ")}));else if(e instanceof Map)e.forEach(((e,n)=>{e&&(t+=n+" ")}));else if(isArray$3(e))for(let r=0;r<e.length;r++){const n=normalizeClass(e[r]);n&&(t+=n+" ")}else t=normalizeClass$1(e);return t.trim()}function formatKey(e){return camelize(e.substring(5))}const initCustomDatasetOnce=once((()=>{const e=HTMLElement.prototype,t=e.setAttribute;e.setAttribute=function(e,n){if(e.startsWith("data-")&&this.tagName.startsWith("UNI-")){(this.__uniDataset||(this.__uniDataset={}))[formatKey(e)]=n}t.call(this,e,n)};const n=e.removeAttribute;e.removeAttribute=function(e){this.__uniDataset&&e.startsWith("data-")&&this.tagName.startsWith("UNI-")&&delete this.__uniDataset[formatKey(e)],n.call(this,e)}}));function getCustomDataset(e){return extend$2({},e.dataset,e.__uniDataset)}const unitRE=new RegExp("\"[^\"]+\"|'[^']+'|url\\([^)]+\\)|(\\d*\\.?\\d+)[r|u]px","g");function toFixed(e,t){const n=Math.pow(10,t+1),r=Math.floor(e*n);return 10*Math.round(r/10)/n}const defaultRpx2Unit={unit:"rem",unitRatio:10/320,unitPrecision:5};function createRpx2Unit(e,t,n){return r=>r.replace(unitRE,((r,o)=>{if(!o)return r;if(1===t)return`${o}${e}`;const i=toFixed(parseFloat(o)*t,n);return 0===i?"0":`${i}${e}`}))}function passive(e){return{passive:e}}function normalizeTarget(e){const{id:t,offsetTop:n,offsetLeft:r}=e;return{id:t,dataset:getCustomDataset(e),offsetTop:n,offsetLeft:r}}function addFont(e,t,n){const r=document.fonts;if(r){const o=new FontFace(e,t,n);return o.load().then((()=>{r.add&&r.add(o)}))}return new Promise((r=>{const o=document.createElement("style"),i=[];if(n){const{style:e,weight:t,stretch:r,unicodeRange:o,variant:a,featureSettings:s}=n;e&&i.push(`font-style:${e}`),t&&i.push(`font-weight:${t}`),r&&i.push(`font-stretch:${r}`),o&&i.push(`unicode-range:${o}`),a&&i.push(`font-variant:${a}`),s&&i.push(`font-feature-settings:${s}`)}o.innerText=`@font-face{font-family:"${e}";src:${t};${i.join(";")}}`,document.head.appendChild(o),r()}))}function scrollTo(e,t,n){if(isString$3(e)){const t=document.querySelector(e);if(t){const{top:n}=t.getBoundingClientRect();e=n+window.pageYOffset;const r=document.querySelector("uni-page-head");r&&(e-=r.offsetHeight)}}e<0&&(e=0);const r=document.documentElement,{clientHeight:o,scrollHeight:i}=r;if(e=Math.min(e,i-o),0===t)return void(r.scrollTop=document.body.scrollTop=e);if(window.scrollY===e)return;const a=t=>{if(t<=0)return void window.scrollTo(0,e);const n=e-window.scrollY;requestAnimationFrame((function(){window.scrollTo(0,window.scrollY+n/t*10),a(t-10)}))};a(t)}function decode$3(e){try{return decodeURIComponent(""+e)}catch(t){}return""+e}function decodedQuery(e={}){const t={};return Object.keys(e).forEach((n=>{try{t[n]=decode$3(e[n])}catch(r){t[n]=e[n]}})),t}const PLUS_RE$1=/\+/g;function parseQuery$1(e){const t={};if(""===e||"?"===e)return t;const n=("?"===e[0]?e.slice(1):e).split("&");for(let r=0;r<n.length;++r){const e=n[r].replace(PLUS_RE$1," ");let o=e.indexOf("="),i=decode$3(o<0?e:e.slice(0,o)),a=o<0?null:decode$3(e.slice(o+1));if(i in t){let e=t[i];isArray$3(e)||(e=t[i]=[e]),e.push(a)}else t[i]=a}return t}function parseUrl$2(e){const[t,n]=e.split("?",2);return{path:t,query:parseQuery$1(n||"")}}function debounce(e,t,{clearTimeout:n,setTimeout:r}){let o;const i=function(){n(o);o=r((()=>e.apply(this,arguments)),t)};return i.cancel=function(){n(o)},i}class EventChannel{constructor(e,t){this.id=e,this.listener={},this.emitCache=[],t&&Object.keys(t).forEach((e=>{this.on(e,t[e])}))}emit(e,...t){const n=this.listener[e];if(!n)return this.emitCache.push({eventName:e,args:t});n.forEach((e=>{e.fn.apply(e.fn,t)})),this.listener[e]=n.filter((e=>"once"!==e.type))}on(e,t){this._addListener(e,"on",t),this._clearCache(e)}once(e,t){this._addListener(e,"once",t),this._clearCache(e)}off(e,t){const n=this.listener[e];if(n)if(t)for(let r=0;r<n.length;)n[r].fn===t&&(n.splice(r,1),r--),r++;else delete this.listener[e]}_clearCache(e){for(let t=0;t<this.emitCache.length;t++){const n=this.emitCache[t],r=e?n.eventName===e?e:null:n.eventName;if(!r)continue;"number"!=typeof this.emit.apply(this,[r,...n.args])?(this.emitCache.splice(t,1),t--):this.emitCache.pop()}}_addListener(e,t,n){(this.listener[e]||(this.listener[e]=[])).push({fn:n,type:t})}}const PAGE_HOOKS=[ON_INIT,ON_LOAD,ON_SHOW,ON_HIDE,ON_UNLOAD,ON_BACK_PRESS,ON_PAGE_SCROLL,ON_TAB_ITEM_TAP,ON_REACH_BOTTOM,ON_PULL_DOWN_REFRESH,ON_SHARE_TIMELINE,ON_SHARE_APP_MESSAGE,ON_SHARE_CHAT,ON_ADD_TO_FAVORITES,ON_SAVE_EXIT_STATE,ON_NAVIGATION_BAR_BUTTON_TAP,ON_NAVIGATION_BAR_SEARCH_INPUT_CLICKED,ON_NAVIGATION_BAR_SEARCH_INPUT_CHANGED,ON_NAVIGATION_BAR_SEARCH_INPUT_CONFIRMED,ON_NAVIGATION_BAR_SEARCH_INPUT_FOCUS_CHANGED];function isRootImmediateHook(e){return[ON_LOAD,ON_SHOW].indexOf(e)>-1}function isRootHook(e){return PAGE_HOOKS.indexOf(e)>-1}const UniLifecycleHooks=[ON_SHOW,ON_HIDE,ON_LAUNCH,ON_ERROR,ON_THEME_CHANGE,ON_PAGE_NOT_FOUND,ON_UNHANDLE_REJECTION,ON_EXIT,ON_INIT,ON_LOAD,ON_READY,ON_UNLOAD,ON_RESIZE,ON_BACK_PRESS,ON_PAGE_SCROLL,ON_TAB_ITEM_TAP,ON_REACH_BOTTOM,ON_PULL_DOWN_REFRESH,ON_SHARE_TIMELINE,ON_ADD_TO_FAVORITES,ON_SHARE_APP_MESSAGE,ON_SHARE_CHAT,ON_SAVE_EXIT_STATE,ON_NAVIGATION_BAR_BUTTON_TAP,ON_NAVIGATION_BAR_SEARCH_INPUT_CLICKED,ON_NAVIGATION_BAR_SEARCH_INPUT_CHANGED,ON_NAVIGATION_BAR_SEARCH_INPUT_CONFIRMED,ON_NAVIGATION_BAR_SEARCH_INPUT_FOCUS_CHANGED];function isUniLifecycleHook(e,t,n=!0){return!(n&&!isFunction$2(t))&&(UniLifecycleHooks.indexOf(e)>-1||0===e.indexOf("on"))}const createVueAppHooks=[];function invokeCreateVueAppHook(e){createVueAppHooks.forEach((t=>t(e)))}const invokeCreateErrorHandler=once(((e,t)=>{if(isFunction$2(e._component.onError))return t(e)})),E$1=function(){};E$1.prototype={_id:1,on:function(e,t,n){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:n,_id:this._id}),this._id++},once:function(e,t,n){var r=this;function o(){r.off(e,o),t.apply(n,arguments)}return o._=t,this.on(e,o,n)},emit:function(e){for(var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),r=0,o=n.length;r<o;r++)n[r].fn.apply(n[r].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),r=n[e],o=[];if(r&&t){for(var i=r.length-1;i>=0;i--)if(r[i].fn===t||r[i].fn._===t||r[i]._id===t){r.splice(i,1);break}o=r}return o.length?n[e]=o:delete n[e],this}};var E$1$1=E$1;const borderStyles={black:"rgba(0,0,0,0.4)",white:"rgba(255,255,255,0.4)"};function normalizeTabBarStyles(e){return e&&e in borderStyles?borderStyles[e]:e}function normalizeTitleColor(e){return"black"===e?"#000000":"#ffffff"}function resolveStringStyleItem(e,t,n){if(isString$3(t)&&t.startsWith("@")){let r=e[t.replace("@","")]||t;switch(n){case"titleColor":r=normalizeTitleColor(r);break;case"borderStyle":r=normalizeTabBarStyles(r)}return r}return t}function normalizeStyles(e,t={},n="light"){const r=t[n],o={};return void 0!==r&&e?(Object.keys(e).forEach((i=>{const a=e[i];o[i]=isPlainObject$4(a)?normalizeStyles(a,t,n):isArray$3(a)?a.map((e=>"object"==typeof e?normalizeStyles(e,t,n):resolveStringStyleItem(r,e))):resolveStringStyleItem(r,a,i)})),o):e}
/**
* @dcloudio/uni-h5-vue v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let activeEffectScope,activeEffect;class EffectScope{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=activeEffectScope,!e&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const t=activeEffectScope;try{return activeEffectScope=this,e()}finally{activeEffectScope=t}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(e){if(this._active){let t,n;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.parent=void 0,this._active=!1}}}function effectScope(e){return new EffectScope(e)}function recordEffectScope(e,t=activeEffectScope){t&&t.active&&t.effects.push(e)}function getCurrentScope$1(){return activeEffectScope}function onScopeDispose(e){activeEffectScope&&activeEffectScope.cleanups.push(e)}class ReactiveEffect{constructor(e,t,n,r){this.fn=e,this.trigger=t,this.scheduler=n,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,recordEffectScope(this,r)}get dirty(){if(2===this._dirtyLevel||3===this._dirtyLevel){this._dirtyLevel=1,pauseTracking();for(let e=0;e<this._depsLength;e++){const t=this.deps[e];if(t.computed&&(triggerComputed(t.computed),this._dirtyLevel>=4))break}1===this._dirtyLevel&&(this._dirtyLevel=0),resetTracking()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=shouldTrack,t=activeEffect;try{return shouldTrack=!0,activeEffect=this,this._runnings++,preCleanupEffect(this),this.fn()}finally{postCleanupEffect(this),this._runnings--,activeEffect=t,shouldTrack=e}}stop(){var e;this.active&&(preCleanupEffect(this),postCleanupEffect(this),null==(e=this.onStop)||e.call(this),this.active=!1)}}function triggerComputed(e){return e.value}function preCleanupEffect(e){e._trackId++,e._depsLength=0}function postCleanupEffect(e){if(e.deps.length>e._depsLength){for(let t=e._depsLength;t<e.deps.length;t++)cleanupDepEffect(e.deps[t],e);e.deps.length=e._depsLength}}function cleanupDepEffect(e,t){const n=e.get(t);void 0!==n&&t._trackId!==n&&(e.delete(t),0===e.size&&e.cleanup())}let shouldTrack=!0,pauseScheduleStack=0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const e=trackStack.pop();shouldTrack=void 0===e||e}function pauseScheduling(){pauseScheduleStack++}function resetScheduling(){for(pauseScheduleStack--;!pauseScheduleStack&&queueEffectSchedulers.length;)queueEffectSchedulers.shift()()}function trackEffect(e,t,n){if(t.get(e)!==e._trackId){t.set(e,e._trackId);const n=e.deps[e._depsLength];n!==t?(n&&cleanupDepEffect(n,e),e.deps[e._depsLength++]=t):e._depsLength++}}const queueEffectSchedulers=[];function triggerEffects(e,t,n){pauseScheduling();for(const r of e.keys()){let n;r._dirtyLevel<t&&(null!=n?n:n=e.get(r)===r._trackId)&&(r._shouldSchedule||(r._shouldSchedule=0===r._dirtyLevel),r._dirtyLevel=t),r._shouldSchedule&&(null!=n?n:n=e.get(r)===r._trackId)&&(r.trigger(),r._runnings&&!r.allowRecurse||2===r._dirtyLevel||(r._shouldSchedule=!1,r.scheduler&&queueEffectSchedulers.push(r.scheduler)))}resetScheduling()}const createDep=(e,t)=>{const n=new Map;return n.cleanup=e,n.computed=t,n},targetMap=new WeakMap,ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");function track(e,t,n){if(shouldTrack&&activeEffect){let t=targetMap.get(e);t||targetMap.set(e,t=new Map);let r=t.get(n);r||t.set(n,r=createDep((()=>t.delete(n)))),trackEffect(activeEffect,r)}}function trigger(e,t,n,r,o,i){const a=targetMap.get(e);if(!a)return;let s=[];if("clear"===t)s=[...a.values()];else if("length"===n&&isArray$3(e)){const e=Number(r);a.forEach(((t,n)=>{("length"===n||!isSymbol(n)&&n>=e)&&s.push(t)}))}else switch(void 0!==n&&s.push(a.get(n)),t){case"add":isArray$3(e)?isIntegerKey(n)&&s.push(a.get("length")):(s.push(a.get(ITERATE_KEY)),isMap(e)&&s.push(a.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray$3(e)||(s.push(a.get(ITERATE_KEY)),isMap(e)&&s.push(a.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(e)&&s.push(a.get(ITERATE_KEY))}pauseScheduling();for(const c of s)c&&triggerEffects(c,4);resetScheduling()}function getDepFromReactive(e,t){var n;return null==(n=targetMap.get(e))?void 0:n.get(t)}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter((e=>"arguments"!==e&&"caller"!==e)).map((e=>Symbol[e])).filter(isSymbol)),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const e={};return["includes","indexOf","lastIndexOf"].forEach((t=>{e[t]=function(...e){const n=toRaw(this);for(let t=0,o=this.length;t<o;t++)track(n,"get",t+"");const r=n[t](...e);return-1===r||!1===r?n[t](...e.map(toRaw)):r}})),["push","pop","shift","unshift","splice"].forEach((t=>{e[t]=function(...e){pauseTracking(),pauseScheduling();const n=toRaw(this)[t].apply(this,e);return resetScheduling(),resetTracking(),n}})),e}function hasOwnProperty$3(e){const t=toRaw(this);return track(t,"has",e),t.hasOwnProperty(e)}class BaseReactiveHandler{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,n){const r=this._isReadonly,o=this._isShallow;if("__v_isReactive"===t)return!r;if("__v_isReadonly"===t)return r;if("__v_isShallow"===t)return o;if("__v_raw"===t)return n===(r?o?shallowReadonlyMap:readonlyMap:o?shallowReactiveMap:reactiveMap).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const i=isArray$3(e);if(!r){if(i&&hasOwn$2(arrayInstrumentations,t))return Reflect.get(arrayInstrumentations,t,n);if("hasOwnProperty"===t)return hasOwnProperty$3}const a=Reflect.get(e,t,n);return(isSymbol(t)?builtInSymbols.has(t):isNonTrackableKeys(t))?a:(r||track(e,"get",t),o?a:isRef(a)?i&&isIntegerKey(t)?a:a.value:isObject$4(a)?r?readonly(a):reactive(a):a)}}class MutableReactiveHandler extends BaseReactiveHandler{constructor(e=!1){super(!1,e)}set(e,t,n,r){let o=e[t];if(!this._isShallow){const t=isReadonly(o);if(isShallow(n)||isReadonly(n)||(o=toRaw(o),n=toRaw(n)),!isArray$3(e)&&isRef(o)&&!isRef(n))return!t&&(o.value=n,!0)}const i=isArray$3(e)&&isIntegerKey(t)?Number(t)<e.length:hasOwn$2(e,t),a=Reflect.set(e,t,n,r);return e===toRaw(r)&&(i?hasChanged(n,o)&&trigger(e,"set",t,n):trigger(e,"add",t,n)),a}deleteProperty(e,t){const n=hasOwn$2(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&n&&trigger(e,"delete",t,void 0),r}has(e,t){const n=Reflect.has(e,t);return isSymbol(t)&&builtInSymbols.has(t)||track(e,"has",t),n}ownKeys(e){return track(e,"iterate",isArray$3(e)?"length":ITERATE_KEY),Reflect.ownKeys(e)}}class ReadonlyReactiveHandler extends BaseReactiveHandler{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const mutableHandlers=new MutableReactiveHandler,readonlyHandlers=new ReadonlyReactiveHandler,shallowReactiveHandlers=new MutableReactiveHandler(!0),toShallow=e=>e,getProto=e=>Reflect.getPrototypeOf(e);function get(e,t,n=!1,r=!1){const o=toRaw(e=e.__v_raw),i=toRaw(t);n||(hasChanged(t,i)&&track(o,"get",t),track(o,"get",i));const{has:a}=getProto(o),s=r?toShallow:n?toReadonly:toReactive;return a.call(o,t)?s(e.get(t)):a.call(o,i)?s(e.get(i)):void(e!==o&&e.get(t))}function has(e,t=!1){const n=this.__v_raw,r=toRaw(n),o=toRaw(e);return t||(hasChanged(e,o)&&track(r,"has",e),track(r,"has",o)),e===o?n.has(e):n.has(e)||n.has(o)}function size(e,t=!1){return e=e.__v_raw,!t&&track(toRaw(e),"iterate",ITERATE_KEY),Reflect.get(e,"size",e)}function add$a(e){e=toRaw(e);const t=toRaw(this);return getProto(t).has.call(t,e)||(t.add(e),trigger(t,"add",e,e)),this}function set$2(e,t){t=toRaw(t);const n=toRaw(this),{has:r,get:o}=getProto(n);let i=r.call(n,e);i||(e=toRaw(e),i=r.call(n,e));const a=o.call(n,e);return n.set(e,t),i?hasChanged(t,a)&&trigger(n,"set",e,t):trigger(n,"add",e,t),this}function deleteEntry(e){const t=toRaw(this),{has:n,get:r}=getProto(t);let o=n.call(t,e);o||(e=toRaw(e),o=n.call(t,e)),r&&r.call(t,e);const i=t.delete(e);return o&&trigger(t,"delete",e,void 0),i}function clear(){const e=toRaw(this),t=0!==e.size,n=e.clear();return t&&trigger(e,"clear",void 0,void 0),n}function createForEach(e,t){return function(n,r){const o=this,i=o.__v_raw,a=toRaw(i),s=t?toShallow:e?toReadonly:toReactive;return!e&&track(a,"iterate",ITERATE_KEY),i.forEach(((e,t)=>n.call(r,s(e),s(t),o)))}}function createIterableMethod(e,t,n){return function(...r){const o=this.__v_raw,i=toRaw(o),a=isMap(i),s="entries"===e||e===Symbol.iterator&&a,c="keys"===e&&a,l=o[e](...r),u=n?toShallow:t?toReadonly:toReactive;return!t&&track(i,"iterate",c?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:e,done:t}=l.next();return t?{value:e,done:t}:{value:s?[u(e[0]),u(e[1])]:u(e),done:t}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(e){return function(...t){return"delete"!==e&&("clear"===e?void 0:this)}}function createInstrumentations(){const e={get(e){return get(this,e)},get size(){return size(this)},has:has,add:add$a,set:set$2,delete:deleteEntry,clear:clear,forEach:createForEach(!1,!1)},t={get(e){return get(this,e,!1,!0)},get size(){return size(this)},has:has,add:add$a,set:set$2,delete:deleteEntry,clear:clear,forEach:createForEach(!1,!0)},n={get(e){return get(this,e,!0)},get size(){return size(this,!0)},has(e){return has.call(this,e,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},r={get(e){return get(this,e,!0,!0)},get size(){return size(this,!0)},has(e){return has.call(this,e,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach((o=>{e[o]=createIterableMethod(o,!1,!1),n[o]=createIterableMethod(o,!0,!1),t[o]=createIterableMethod(o,!1,!0),r[o]=createIterableMethod(o,!0,!0)})),[e,n,t,r]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(e,t){const n=t?e?shallowReadonlyInstrumentations:shallowInstrumentations:e?readonlyInstrumentations:mutableInstrumentations;return(t,r,o)=>"__v_isReactive"===r?!e:"__v_isReadonly"===r?e:"__v_raw"===r?t:Reflect.get(hasOwn$2(n,r)&&r in t?n:t,r,o)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(e){return e.__v_skip||!Object.isExtensible(e)?0:targetTypeMap(toRawType(e))}function reactive(e){return isReadonly(e)?e:createReactiveObject(e,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(e){return createReactiveObject(e,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(e){return createReactiveObject(e,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(e,t,n,r,o){if(!isObject$4(e))return e;if(e.__v_raw&&(!t||!e.__v_isReactive))return e;const i=o.get(e);if(i)return i;const a=getTargetType(e);if(0===a)return e;const s=new Proxy(e,2===a?r:n);return o.set(e,s),s}function isReactive(e){return isReadonly(e)?isReactive(e.__v_raw):!(!e||!e.__v_isReactive)}function isReadonly(e){return!(!e||!e.__v_isReadonly)}function isShallow(e){return!(!e||!e.__v_isShallow)}function isProxy(e){return isReactive(e)||isReadonly(e)}function toRaw(e){const t=e&&e.__v_raw;return t?toRaw(t):e}function markRaw(e){return Object.isExtensible(e)&&def(e,"__v_skip",!0),e}const toReactive=e=>isObject$4(e)?reactive(e):e,toReadonly=e=>isObject$4(e)?readonly(e):e;class ComputedRefImpl{constructor(e,t,n,r){this.getter=e,this._setter=t,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new ReactiveEffect((()=>e(this._value)),(()=>triggerRefValue(this,2===this.effect._dirtyLevel?2:3))),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=n}get value(){const e=toRaw(this);return e._cacheable&&!e.effect.dirty||!hasChanged(e._value,e._value=e.effect.run())||triggerRefValue(e,4),trackRefValue(e),e.effect._dirtyLevel>=2&&triggerRefValue(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function computed$1(e,t,n=!1){let r,o;const i=isFunction$2(e);i?(r=e,o=NOOP):(r=e.get,o=e.set);return new ComputedRefImpl(r,o,i||!o,n)}function trackRefValue(e){var t;shouldTrack&&activeEffect&&(e=toRaw(e),trackEffect(activeEffect,null!=(t=e.dep)?t:e.dep=createDep((()=>e.dep=void 0),e instanceof ComputedRefImpl?e:void 0)))}function triggerRefValue(e,t=4,n){const r=(e=toRaw(e)).dep;r&&triggerEffects(r,t)}function isRef(e){return!(!e||!0!==e.__v_isRef)}function ref(e){return createRef(e,!1)}function shallowRef(e){return createRef(e,!0)}function createRef(e,t){return isRef(e)?e:new RefImpl(e,t)}class RefImpl{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:toRaw(e),this._value=t?e:toReactive(e)}get value(){return trackRefValue(this),this._value}set value(e){const t=this.__v_isShallow||isShallow(e)||isReadonly(e);e=t?e:toRaw(e),hasChanged(e,this._rawValue)&&(this._rawValue=e,this._value=t?e:toReactive(e),triggerRefValue(this,4))}}function unref(e){return isRef(e)?e.value:e}const shallowUnwrapHandlers={get:(e,t,n)=>unref(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const o=e[t];return isRef(o)&&!isRef(n)?(o.value=n,!0):Reflect.set(e,t,n,r)}};function proxyRefs(e){return isReactive(e)?e:new Proxy(e,shallowUnwrapHandlers)}function toRefs(e){const t=isArray$3(e)?new Array(e.length):{};for(const n in e)t[n]=propertyToRef(e,n);return t}class ObjectRefImpl{constructor(e,t,n){this._object=e,this._key=t,this._defaultValue=n,this.__v_isRef=!0}get value(){const e=this._object[this._key];return void 0===e?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return getDepFromReactive(toRaw(this._object),this._key)}}class GetterRefImpl{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function toRef(e,t,n){return isRef(e)?e:isFunction$2(e)?new GetterRefImpl(e):isObject$4(e)&&arguments.length>1?propertyToRef(e,t,n):ref(e)}function propertyToRef(e,t,n){const r=e[t];return isRef(r)?r:new ObjectRefImpl(e,t,n)}const stack=[];function warn$1(e,...t){pauseTracking();const n=stack.length?stack[stack.length-1].component:null,r=n&&n.appContext.config.warnHandler,o=getComponentTrace();if(r)t.length&&(t[0]=String(t[0])),callWithErrorHandling(r,n,11,[e+t.map((e=>{var t,n;return null!=(n=null==(t=e.toString)?void 0:t.call(e))?n:JSON.stringify(e)})).join(""),n&&n.proxy,o.map((({vnode:e})=>`at <${formatComponentName$1(n,e.type)}>`)).join("\n"),o]);else{const n=[`[Vue warn]: ${e}`,...t];o.length&&n.push("\n",...formatTrace(o)),console.warn(...n)}resetTracking()}function getComponentTrace(){let e=stack[stack.length-1];if(!e)return[];const t=[];for(;e;){const n=t[0];n&&n.vnode===e?n.recurseCount++:t.push({vnode:e,recurseCount:0});const r=e.component&&e.component.parent;e=r&&r.vnode}return t}function formatTrace(e){const t=[];return e.forEach(((e,n)=>{t.push(...0===n?[]:["\n"],...formatTraceEntry(e))})),t}function formatTraceEntry({vnode:e,recurseCount:t}){const n=t>0?`... (${t} recursive calls)`:"",r=!!e.component&&null==e.component.parent,o=` at <${formatComponentName$1(e.component,e.type,r)}`,i=">"+n;return e.props?[o,...formatProps(e.props),i]:[o+i]}function formatProps(e){const t=[],n=Object.keys(e);return n.slice(0,3).forEach((n=>{t.push(...formatProp(n,e[n]))})),n.length>3&&t.push(" ..."),t}function formatProp(e,t,n){return isString$3(t)?(t=JSON.stringify(t),n?t:[`${e}=${t}`]):"number"==typeof t||"boolean"==typeof t||null==t?n?t:[`${e}=${t}`]:isRef(t)?(t=formatProp(e,toRaw(t.value),!0),n?t:[`${e}=Ref<`,t,">"]):isFunction$2(t)?[`${e}=fn${t.name?`<${t.name}>`:""}`]:(t=toRaw(t),n?t:[`${e}=`,t])}function callWithErrorHandling(e,t,n,r){try{return r?e(...r):e()}catch(o){handleError(o,t,n)}}function callWithAsyncErrorHandling(e,t,n,r){if(isFunction$2(e)){const o=callWithErrorHandling(e,t,n,r);return o&&isPromise$1(o)&&o.catch((e=>{handleError(e,t,n)})),o}const o=[];for(let i=0;i<e.length;i++)o.push(callWithAsyncErrorHandling(e[i],t,n,r));return o}function handleError(e,t,n,r=!0){const o=t?t.vnode:null;if(t){let r=t.parent;const o=t.proxy,i=`https://vuejs.org/error-reference/#runtime-${n}`;for(;r;){const t=r.ec;if(t)for(let n=0;n<t.length;n++)if(!1===t[n](e,o,i))return;r=r.parent}const a=t.appContext.config.errorHandler;if(a)return void callWithErrorHandling(a,null,10,[e,o,i])}logError(e,n,o,r)}function logError(e,t,n,r=!0){console.error(e)}let isFlushing=!1,isFlushPending=!1;const queue$1=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(e){const t=currentFlushPromise||resolvedPromise;return e?t.then(this?e.bind(this):e):t}function findInsertionIndex$1(e){let t=flushIndex+1,n=queue$1.length;for(;t<n;){const r=t+n>>>1,o=queue$1[r],i=getId$1(o);i<e||i===e&&o.pre?t=r+1:n=r}return t}function queueJob(e){queue$1.length&&queue$1.includes(e,isFlushing&&e.allowRecurse?flushIndex+1:flushIndex)||(null==e.id?queue$1.push(e):queue$1.splice(findInsertionIndex$1(e.id),0,e),queueFlush())}function queueFlush(){isFlushing||isFlushPending||(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(e){const t=queue$1.indexOf(e);t>flushIndex&&queue$1.splice(t,1)}function queuePostFlushCb(e){isArray$3(e)?pendingPostFlushCbs.push(...e):activePostFlushCbs&&activePostFlushCbs.includes(e,e.allowRecurse?postFlushIndex+1:postFlushIndex)||pendingPostFlushCbs.push(e),queueFlush()}function flushPreFlushCbs(e,t,n=(isFlushing?flushIndex+1:0)){for(;n<queue$1.length;n++){const t=queue$1[n];if(t&&t.pre){if(e&&t.id!==e.uid)continue;queue$1.splice(n,1),n--,t()}}}function flushPostFlushCbs(e){if(pendingPostFlushCbs.length){const e=[...new Set(pendingPostFlushCbs)].sort(((e,t)=>getId$1(e)-getId$1(t)));if(pendingPostFlushCbs.length=0,activePostFlushCbs)return void activePostFlushCbs.push(...e);for(activePostFlushCbs=e,postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId$1=e=>null==e.id?1/0:e.id,comparator=(e,t)=>{const n=getId$1(e)-getId$1(t);if(0===n){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function flushJobs(e){isFlushPending=!1,isFlushing=!0,queue$1.sort(comparator);try{for(flushIndex=0;flushIndex<queue$1.length;flushIndex++){const e=queue$1[flushIndex];e&&!1!==e.active&&callWithErrorHandling(e,null,14)}}finally{flushIndex=0,queue$1.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue$1.length||pendingPostFlushCbs.length)&&flushJobs()}}function emit$2(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||EMPTY_OBJ;let o=n;const i=t.startsWith("update:"),a=i&&t.slice(7);if(a&&a in r){const e=`${"modelValue"===a?"model":a}Modifiers`,{number:t,trim:i}=r[e]||EMPTY_OBJ;i&&(o=n.map((e=>isString$3(e)?e.trim():e))),t&&(o=n.map(looseToNumber))}let s,c=r[s=toHandlerKey(t)]||r[s=toHandlerKey(camelize(t))];!c&&i&&(c=r[s=toHandlerKey(hyphenate(t))]),c&&callWithAsyncErrorHandling(c,e,6,normalizeWxsEventArgs(e,c,o));const l=r[s+"Once"];if(l){if(e.emitted){if(e.emitted[s])return}else e.emitted={};e.emitted[s]=!0,callWithAsyncErrorHandling(l,e,6,normalizeWxsEventArgs(e,l,o))}}function normalizeWxsEventArgs(e,t,n){if(1!==n.length)return n;if(isFunction$2(t)){if(t.length<2)return n}else if(!t.find((e=>e.length>=2)))return n;const r=n[0];if(r&&hasOwn$2(r,"type")&&hasOwn$2(r,"timeStamp")&&hasOwn$2(r,"target")&&hasOwn$2(r,"currentTarget")&&hasOwn$2(r,"detail")){const t=e.proxy,r=t.$gcd(t,!0);r&&n.push(r)}return n}function normalizeEmitsOptions(e,t,n=!1){const r=t.emitsCache,o=r.get(e);if(void 0!==o)return o;const i=e.emits;let a={},s=!1;if(!isFunction$2(e)){const r=e=>{const n=normalizeEmitsOptions(e,t,!0);n&&(s=!0,extend$2(a,n))};!n&&t.mixins.length&&t.mixins.forEach(r),e.extends&&r(e.extends),e.mixins&&e.mixins.forEach(r)}return i||s?(isArray$3(i)?i.forEach((e=>a[e]=null)):extend$2(a,i),isObject$4(e)&&r.set(e,a),a):(isObject$4(e)&&r.set(e,null),null)}function isEmitListener(e,t){return!(!e||!isOn(t))&&(t=t.slice(2).replace(/Once$/,""),hasOwn$2(e,t[0].toLowerCase()+t.slice(1))||hasOwn$2(e,hyphenate(t))||hasOwn$2(e,t))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(e){const t=currentRenderingInstance;return currentRenderingInstance=e,currentScopeId=e&&e.type.__scopeId||null,t}function withCtx(e,t=currentRenderingInstance,n){if(!t)return e;if(e._n)return e;const r=(...n)=>{r._d&&setBlockTracking(-1);const o=setCurrentRenderingInstance(t);let i;try{i=e(...n)}finally{setCurrentRenderingInstance(o),r._d&&setBlockTracking(1)}return i};return r._n=!0,r._c=!0,r._d=!0,r}function markAttrsAccessed(){}function renderComponentRoot(e){const{type:t,vnode:n,proxy:r,withProxy:o,props:i,propsOptions:[a],slots:s,attrs:c,emit:l,render:u,renderCache:d,data:A,setupState:p,ctx:h,inheritAttrs:f}=e;let g,m;const _=setCurrentRenderingInstance(e);try{if(4&n.shapeFlag){const e=o||r,t=e;g=normalizeVNode(u.call(t,e,d,i,p,A,h)),m=c}else{const e=t;0,g=normalizeVNode(e.length>1?e(i,{attrs:c,slots:s,emit:l}):e(i,null)),m=t.props?c:getFunctionalFallthrough(c)}}catch(v){blockStack.length=0,handleError(v,e,1),g=createVNode(Comment)}let E=g;if(m&&!1!==f){const e=Object.keys(m),{shapeFlag:t}=E;e.length&&7&t&&(a&&e.some(isModelListener)&&(m=filterModelListeners(m,a)),E=cloneVNode(E,m))}return n.dirs&&(E=cloneVNode(E),E.dirs=E.dirs?E.dirs.concat(n.dirs):n.dirs),n.transition&&(E.transition=n.transition),g=E,setCurrentRenderingInstance(_),g}const getFunctionalFallthrough=e=>{let t;for(const n in e)("class"===n||"style"===n||isOn(n))&&((t||(t={}))[n]=e[n]);return t},filterModelListeners=(e,t)=>{const n={};for(const r in e)isModelListener(r)&&r.slice(9)in t||(n[r]=e[r]);return n};function shouldUpdateComponent(e,t,n){const{props:r,children:o,component:i}=e,{props:a,children:s,patchFlag:c}=t,l=i.emitsOptions;if(t.dirs||t.transition)return!0;if(!(n&&c>=0))return!(!o&&!s||s&&s.$stable)||r!==a&&(r?!a||hasPropsChanged(r,a,l):!!a);if(1024&c)return!0;if(16&c)return r?hasPropsChanged(r,a,l):!!a;if(8&c){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const n=e[t];if(a[n]!==r[n]&&!isEmitListener(l,n))return!0}}return!1}function hasPropsChanged(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let o=0;o<r.length;o++){const i=r[o];if(t[i]!==e[i]&&!isEmitListener(n,i))return!0}return!1}function updateHOCHostEl({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r!==e)break;(e=t.vnode).el=n,t=t.parent}}const COMPONENTS="components";function resolveComponent(e,t){return resolveAsset(COMPONENTS,e,!0,t)||e}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function resolveDynamicComponent(e){return isString$3(e)?resolveAsset(COMPONENTS,e,!1)||e:e||NULL_DYNAMIC_COMPONENT}function resolveAsset(e,t,n=!0,r=!1){const o=currentRenderingInstance||currentInstance;if(o){const n=o.type;{const e=getComponentName$1(n,!1);if(e&&(e===t||e===camelize(t)||e===capitalize$2(camelize(t))))return n}const i=resolve(o[e]||n[e],t)||resolve(o.appContext[e],t);return!i&&r?n:i}}function resolve(e,t){return e&&(e[t]||e[camelize(t)]||e[capitalize$2(camelize(t))])}const isSuspense=e=>e.__isSuspense;function queueEffectWithSuspense(e,t){t&&t.pendingBranch?isArray$3(e)?t.effects.push(...e):t.effects.push(e):queuePostFlushCb(e)}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey);function watchEffect(e,t){return doWatch(e,null,t)}const INITIAL_WATCHER_VALUE={};function watch(e,t,n){return doWatch(e,t,n)}function doWatch(e,t,{immediate:n,deep:r,flush:o,once:i,onTrack:a,onTrigger:s}=EMPTY_OBJ){if(t&&i){const e=t;t=(...t)=>{e(...t),y()}}const c=currentInstance,l=e=>!0===r?e:traverse(e,!1===r?1:void 0);let u,d,A=!1,p=!1;if(isRef(e)?(u=()=>e.value,A=isShallow(e)):isReactive(e)?(u=()=>l(e),A=!0):isArray$3(e)?(p=!0,A=e.some((e=>isReactive(e)||isShallow(e))),u=()=>e.map((e=>isRef(e)?e.value:isReactive(e)?l(e):isFunction$2(e)?callWithErrorHandling(e,c,2):void 0))):u=isFunction$2(e)?t?()=>callWithErrorHandling(e,c,2):()=>(d&&d(),callWithAsyncErrorHandling(e,c,3,[f])):NOOP,t&&r){const e=u;u=()=>traverse(e())}let h,f=e=>{d=E.onStop=()=>{callWithErrorHandling(e,c,4),d=E.onStop=void 0}};if(isInSSRComponentSetup){if(f=NOOP,t?n&&callWithAsyncErrorHandling(t,c,3,[u(),p?[]:void 0,f]):u(),"sync"!==o)return NOOP;{const e=useSSRContext();h=e.__watcherHandles||(e.__watcherHandles=[])}}let g=p?new Array(e.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const m=()=>{if(E.active&&E.dirty)if(t){const e=E.run();(r||A||(p?e.some(((e,t)=>hasChanged(e,g[t]))):hasChanged(e,g)))&&(d&&d(),callWithAsyncErrorHandling(t,c,3,[e,g===INITIAL_WATCHER_VALUE?void 0:p&&g[0]===INITIAL_WATCHER_VALUE?[]:g,f]),g=e)}else E.run()};let _;m.allowRecurse=!!t,"sync"===o?_=m:"post"===o?_=()=>queuePostRenderEffect(m,c&&c.suspense):(m.pre=!0,c&&(m.id=c.uid),_=()=>queueJob(m));const E=new ReactiveEffect(u,NOOP,_),v=getCurrentScope$1(),y=()=>{E.stop(),v&&remove$1(v.effects,E)};return t?n?m():g=E.run():"post"===o?queuePostRenderEffect(E.run.bind(E),c&&c.suspense):E.run(),h&&h.push(y),y}function instanceWatch(e,t,n){const r=this.proxy,o=isString$3(e)?e.includes(".")?createPathGetter(r,e):()=>r[e]:e.bind(r,r);let i;isFunction$2(t)?i=t:(i=t.handler,n=t);const a=setCurrentInstance(this),s=doWatch(o,i.bind(r),n);return a(),s}function createPathGetter(e,t){const n=t.split(".");return()=>{let t=e;for(let e=0;e<n.length&&t;e++)t=t[n[e]];return t}}function traverse(e,t,n=0,r){if(!isObject$4(e)||e.__v_skip)return e;if(t&&t>0){if(n>=t)return e;n++}if((r=r||new Set).has(e))return e;if(r.add(e),isRef(e))traverse(e.value,t,n,r);else if(isArray$3(e))for(let o=0;o<e.length;o++)traverse(e[o],t,n,r);else if(isSet(e)||isMap(e))e.forEach((e=>{traverse(e,t,n,r)}));else if(isPlainObject$4(e))for(const o in e)traverse(e[o],t,n,r);return e}function withDirectives(e,t){if(null===currentRenderingInstance)return e;const n=getExposeProxy(currentRenderingInstance)||currentRenderingInstance.proxy,r=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[e,i,a,s=EMPTY_OBJ]=t[o];e&&(isFunction$2(e)&&(e={mounted:e,updated:e}),e.deep&&traverse(i),r.push({dir:e,instance:n,value:i,oldValue:void 0,arg:a,modifiers:s}))}return e}function invokeDirectiveHook(e,t,n,r){const o=e.dirs,i=t&&t.dirs;for(let a=0;a<o.length;a++){const s=o[a];i&&(s.oldValue=i[a].value);let c=s.dir[r];c&&(pauseTracking(),callWithAsyncErrorHandling(c,n,8,[e.el,s,e,t]),resetTracking())}}const leaveCbKey=Symbol("_leaveCb"),enterCbKey$1=Symbol("_enterCb");function useTransitionState(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted((()=>{e.isMounted=!0})),onBeforeUnmount((()=>{e.isUnmounting=!0})),e}const TransitionHookValidator=[Function,Array],BaseTransitionPropsValidators={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},BaseTransitionImpl={name:"BaseTransition",props:BaseTransitionPropsValidators,setup(e,{slots:t}){const n=getCurrentInstance(),r=useTransitionState();return()=>{const o=t.default&&getTransitionRawChildren(t.default(),!0);if(!o||!o.length)return;let i=o[0];if(o.length>1)for(const e of o)if(e.type!==Comment){i=e;break}const a=toRaw(e),{mode:s}=a;if(r.isLeaving)return emptyPlaceholder(i);const c=getKeepAliveChild(i);if(!c)return emptyPlaceholder(i);const l=resolveTransitionHooks(c,a,r,n);setTransitionHooks(c,l);const u=n.subTree,d=u&&getKeepAliveChild(u);if(d&&d.type!==Comment&&!isSameVNodeType(c,d)){const e=resolveTransitionHooks(d,a,r,n);if(setTransitionHooks(d,e),"out-in"===s)return r.isLeaving=!0,e.afterLeave=()=>{r.isLeaving=!1,!1!==n.update.active&&(n.effect.dirty=!0,n.update())},emptyPlaceholder(i);"in-out"===s&&c.type!==Comment&&(e.delayLeave=(e,t,n)=>{getLeavingNodesForType(r,d)[String(d.key)]=d,e[leaveCbKey]=()=>{t(),e[leaveCbKey]=void 0,delete l.delayedLeave},l.delayedLeave=n})}return i}}},BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(e,t){const{leavingVNodes:n}=e;let r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function resolveTransitionHooks(e,t,n,r){const{appear:o,mode:i,persisted:a=!1,onBeforeEnter:s,onEnter:c,onAfterEnter:l,onEnterCancelled:u,onBeforeLeave:d,onLeave:A,onAfterLeave:p,onLeaveCancelled:h,onBeforeAppear:f,onAppear:g,onAfterAppear:m,onAppearCancelled:_}=t,E=String(e.key),v=getLeavingNodesForType(n,e),y=(e,t)=>{e&&callWithAsyncErrorHandling(e,r,9,t)},b=(e,t)=>{const n=t[1];y(e,t),isArray$3(e)?e.every((e=>e.length<=1))&&n():e.length<=1&&n()},C={mode:i,persisted:a,beforeEnter(t){let r=s;if(!n.isMounted){if(!o)return;r=f||s}t[leaveCbKey]&&t[leaveCbKey](!0);const i=v[E];i&&isSameVNodeType(e,i)&&i.el[leaveCbKey]&&i.el[leaveCbKey](),y(r,[t])},enter(e){let t=c,r=l,i=u;if(!n.isMounted){if(!o)return;t=g||c,r=m||l,i=_||u}let a=!1;const s=e[enterCbKey$1]=t=>{a||(a=!0,y(t?i:r,[e]),C.delayedLeave&&C.delayedLeave(),e[enterCbKey$1]=void 0)};t?b(t,[e,s]):s()},leave(t,r){const o=String(e.key);if(t[enterCbKey$1]&&t[enterCbKey$1](!0),n.isUnmounting)return r();y(d,[t]);let i=!1;const a=t[leaveCbKey]=n=>{i||(i=!0,r(),y(n?h:p,[t]),t[leaveCbKey]=void 0,v[o]===e&&delete v[o])};v[o]=e,A?b(A,[t,a]):a()},clone:e=>resolveTransitionHooks(e,t,n,r)};return C}function emptyPlaceholder(e){if(isKeepAlive(e))return(e=cloneVNode(e)).children=null,e}function getKeepAliveChild(e){return isKeepAlive(e)?e.children?e.children[0]:void 0:e}function setTransitionHooks(e,t){6&e.shapeFlag&&e.component?setTransitionHooks(e.component.subTree,t):128&e.shapeFlag?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function getTransitionRawChildren(e,t=!1,n){let r=[],o=0;for(let i=0;i<e.length;i++){let a=e[i];const s=null==n?a.key:String(n)+String(null!=a.key?a.key:i);a.type===Fragment?(128&a.patchFlag&&o++,r=r.concat(getTransitionRawChildren(a.children,t,s))):(t||a.type!==Comment)&&r.push(null!=s?cloneVNode(a,{key:s}):a)}if(o>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}
/*! #__NO_SIDE_EFFECTS__ */function defineComponent(e,t){return isFunction$2(e)?(()=>extend$2({name:e.name},t,{setup:e}))():e}const isAsyncWrapper=e=>!!e.type.__asyncLoader
/*! #__NO_SIDE_EFFECTS__ */;function defineAsyncComponent(e){isFunction$2(e)&&(e={loader:e});const{loader:t,loadingComponent:n,errorComponent:r,delay:o=200,timeout:i,suspensible:a=!0,onError:s}=e;let c,l=null,u=0;const d=()=>{let e;return l||(e=l=t().catch((e=>{if(e=e instanceof Error?e:new Error(String(e)),s)return new Promise(((t,n)=>{s(e,(()=>t((u++,l=null,d()))),(()=>n(e)),u+1)}));throw e})).then((t=>e!==l&&l?l:(t&&(t.__esModule||"Module"===t[Symbol.toStringTag])&&(t=t.default),c=t,t))))};return defineComponent({name:"AsyncComponentWrapper",__asyncLoader:d,get __asyncResolved(){return c},setup(){const e=currentInstance;if(c)return()=>createInnerComp(c,e);const t=t=>{l=null,handleError(t,e,13,!r)};if(a&&e.suspense||isInSSRComponentSetup)return d().then((t=>()=>createInnerComp(t,e))).catch((e=>(t(e),()=>r?createVNode(r,{error:e}):null)));const s=ref(!1),u=ref(),A=ref(!!o);return o&&setTimeout((()=>{A.value=!1}),o),null!=i&&setTimeout((()=>{if(!s.value&&!u.value){const e=new Error(`Async component timed out after ${i}ms.`);t(e),u.value=e}}),i),d().then((()=>{s.value=!0,e.parent&&isKeepAlive(e.parent.vnode)&&(e.parent.effect.dirty=!0,queueJob(e.parent.update))})).catch((e=>{t(e),u.value=e})),()=>s.value&&c?createInnerComp(c,e):u.value&&r?createVNode(r,{error:u.value}):n&&!A.value?createVNode(n):void 0}})}function createInnerComp(e,t){const{ref:n,props:r,children:o,ce:i}=t.vnode,a=createVNode(e,r,o);return a.ref=n,a.ce=i,delete t.vnode.ce,a}const isKeepAlive=e=>e.type.__isKeepAlive;let Cache$1=class{constructor(e){this.max=e,this._cache=new Map,this._keys=new Set,this._max=parseInt(e,10)}get(e){const{_cache:t,_keys:n,_max:r}=this,o=t.get(e);if(o)n.delete(e),n.add(e);else if(n.add(e),r&&n.size>r){const e=n.values().next().value;this.pruneCacheEntry(t.get(e)),this.delete(e)}return o}set(e,t){this._cache.set(e,t)}delete(e){this._cache.delete(e),this._keys.delete(e)}forEach(e,t){this._cache.forEach(e.bind(t))}};const KeepAliveImpl={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number],matchBy:{type:String,default:"name"},cache:Object},setup(e,{slots:t}){const n=getCurrentInstance(),r=n.ctx;if(!r.renderer)return()=>{const e=t.default&&t.default();return e&&1===e.length?e[0]:e};const o=e.cache||new Cache$1(e.max);o.pruneCacheEntry=a;let i=null;function a(t){var r;!i||!isSameVNodeType(t,i)||"key"===e.matchBy&&t.key!==i.key?(resetShapeFlag(r=t),u(r,n,s,!0)):i&&resetShapeFlag(i)}const s=n.suspense,{renderer:{p:c,m:l,um:u,o:{createElement:d}}}=r,A=d("div");function p(t){o.forEach(((n,r)=>{const i=getMatchingName(n,e.matchBy);!i||t&&t(i)||(o.delete(r),a(n))}))}r.activate=(e,t,n,r,o)=>{const i=e.component;if(i.ba){const e=i.isDeactivated;i.isDeactivated=!1,invokeArrayFns$1(i.ba),i.isDeactivated=e}l(e,t,n,0,s),c(i.vnode,e,t,n,i,s,r,e.slotScopeIds,o),queuePostRenderEffect((()=>{i.isDeactivated=!1,i.a&&invokeArrayFns$1(i.a);const t=e.props&&e.props.onVnodeMounted;t&&invokeVNodeHook(t,i.parent,e)}),s)},r.deactivate=e=>{const t=e.component;t.bda&&invokeKeepAliveHooks(t.bda),l(e,A,null,1,s),queuePostRenderEffect((()=>{t.bda&&resetHookState(t.bda),t.da&&invokeArrayFns$1(t.da);const n=e.props&&e.props.onVnodeUnmounted;n&&invokeVNodeHook(n,t.parent,e),t.isDeactivated=!0}),s)},watch((()=>[e.include,e.exclude,e.matchBy]),(([e,t])=>{e&&p((t=>matches$1(e,t))),t&&p((e=>!matches$1(t,e)))}),{flush:"post",deep:!0});let h=null;const f=()=>{null!=h&&o.set(h,getInnerChild(n.subTree))};return onMounted(f),onUpdated(f),onBeforeUnmount((()=>{o.forEach(((t,r)=>{o.delete(r),a(t);const{subTree:i,suspense:s}=n,c=getInnerChild(i);if(t.type!==c.type||"key"===e.matchBy&&t.key!==c.key);else{c.component.bda&&invokeArrayFns$1(c.component.bda),resetShapeFlag(c);const e=c.component.da;e&&queuePostRenderEffect(e,s)}}))})),()=>{if(h=null,!t.default)return null;const n=t.default(),r=n[0];if(n.length>1)return i=null,n;if(!isVNode(r)||!(4&r.shapeFlag)&&!isSuspense(r.type))return i=null,r;let a=getInnerChild(r);const s=a.type,c=getMatchingName(a,e.matchBy),{include:l,exclude:u}=e;if(l&&(!c||!matches$1(l,c))||u&&c&&matches$1(u,c))return i=a,r;const d=null==a.key?s:a.key,A=o.get(d);return a.el&&(a=cloneVNode(a),isSuspense(r.type)&&(r.ssContent=a)),h=d,A&&(a.el=A.el,a.component=A.component,a.transition&&setTransitionHooks(a,a.transition),a.shapeFlag|=512),a.shapeFlag|=256,i=a,isSuspense(r.type)?r:a}}},KeepAlive=KeepAliveImpl;function matches$1(e,t){return isArray$3(e)?e.some((e=>matches$1(e,t))):isString$3(e)?e.split(",").includes(t):!!isRegExp$3(e)&&e.test(t)}function onBeforeActivate(e,t){registerKeepAliveHook(e,"ba",t)}function onActivated(e,t){registerKeepAliveHook(e,"a",t)}function onBeforeDeactivate(e,t){registerKeepAliveHook(e,"bda",t)}function onDeactivated(e,t){registerKeepAliveHook(e,"da",t)}function registerKeepAliveHook(e,t,n=currentInstance){const r=e.__wdc||(e.__wdc=()=>{let t=n;for(;t;){if(t.isDeactivated)return;t=t.parent}return e()});if(r.__called=!1,injectHook(t,r,n),n){let e=n.parent;for(;e&&e.parent;)isKeepAlive(e.parent.vnode)&&injectToKeepAliveRoot(r,t,n,e),e=e.parent}}function injectToKeepAliveRoot(e,t,n,r){const o=injectHook(t,e,r,!0);onUnmounted((()=>{remove$1(r[t],o)}),n)}function resetShapeFlag(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function getInnerChild(e){return isSuspense(e.type)?e.ssContent:e}function getMatchingName(e,t){if("name"===t){const t=e.type;return getComponentName$1(isAsyncWrapper(e)?t.__asyncResolved||{}:t)}return String(e.key)}function invokeKeepAliveHooks(e){for(let t=0;t<e.length;t++){const n=e[t];n.__called||(n(),n.__called=!0)}}function resetHookState(e){e.forEach((e=>e.__called=!1))}function injectHook(e,t,n=currentInstance,r=!1){if(n){if(isRootHook(e)&&n.$pageInstance){if(n.type.__reserved)return;if(n!==n.$pageInstance&&(n=n.$pageInstance,isRootImmediateHook(e))){const r=n.proxy;callWithAsyncErrorHandling(t.bind(r),n,e,ON_LOAD===e?[r.$page.options]:[])}}const o=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...r)=>{if(n.isUnmounted)return;pauseTracking();const o=setCurrentInstance(n),i=callWithAsyncErrorHandling(t,n,e,r);return o(),resetTracking(),i});return r?o.unshift(i):o.push(i),i}}const createHook=e=>(t,n=currentInstance)=>(!isInSSRComponentSetup||"sp"===e)&&injectHook(e,((...e)=>t(...e)),n),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(e,t=currentInstance){injectHook("ec",e,t)}function renderList(e,t,n,r){let o;const i=n;if(isArray$3(e)||isString$3(e)){o=new Array(e.length);for(let n=0,r=e.length;n<r;n++)o[n]=t(e[n],n,void 0,i)}else if("number"==typeof e){o=new Array(e);for(let n=0;n<e;n++)o[n]=t(n+1,n,void 0,i)}else if(isObject$4(e))if(e[Symbol.iterator])o=Array.from(e,((e,n)=>t(e,n,void 0,i)));else{const n=Object.keys(e);o=new Array(n.length);for(let r=0,a=n.length;r<a;r++){const a=n[r];o[r]=t(e[a],a,r,i)}}else o=[];return o}function renderSlot(e,t,n={},r,o){if(currentRenderingInstance.isCE||currentRenderingInstance.parent&&isAsyncWrapper(currentRenderingInstance.parent)&&currentRenderingInstance.parent.isCE)return"default"!==t&&(n.name=t),createVNode("slot",n,r);let i=e[t];i&&i._c&&(i._d=!1),openBlock();const a=i&&ensureValidVNode(i(n)),s=createBlock(Fragment,{key:n.key||a&&a.key||`_${t}`},a||[],a&&1===e._?64:-2);return!o&&s.scopeId&&(s.slotScopeIds=[s.scopeId+"-s"]),i&&i._c&&(i._d=!0),s}function ensureValidVNode(e){return e.some((e=>!isVNode(e)||e.type!==Comment&&!(e.type===Fragment&&!ensureValidVNode(e.children))))?e:null}const getPublicInstance=e=>{if(!e)return null;if(isStatefulComponent(e)){return getExposeProxy(e)||e.proxy}return getPublicInstance(e.parent)},createForceUpdate=e=>function(){e.effect.dirty=!0,queueJob(e.update)},publicPropertiesMap=extend$2(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>getPublicInstance(e.parent),$root:e=>getPublicInstance(e.root),$emit:e=>e.emit,$options:e=>resolveMergedOptions(e),$forceUpdate:e=>e.f||(e.f=createForceUpdate(e)),$nextTick:e=>e.n||(e.n=nextTick.bind(e.proxy)),$watch:e=>instanceWatch.bind(e)}),hasSetupBinding=(e,t)=>e!==EMPTY_OBJ&&!e.__isScriptSetup&&hasOwn$2(e,t),PublicInstanceProxyHandlers={get({_:e},t){const{ctx:n,setupState:r,data:o,props:i,accessCache:a,type:s,appContext:c}=e;let l;if("$"!==t[0]){const s=a[t];if(void 0!==s)switch(s){case 1:return r[t];case 2:return o[t];case 4:return n[t];case 3:return i[t]}else{if(hasSetupBinding(r,t))return a[t]=1,r[t];if(o!==EMPTY_OBJ&&hasOwn$2(o,t))return a[t]=2,o[t];if((l=e.propsOptions[0])&&hasOwn$2(l,t))return a[t]=3,i[t];if(n!==EMPTY_OBJ&&hasOwn$2(n,t))return a[t]=4,n[t];shouldCacheAccess&&(a[t]=0)}}const u=publicPropertiesMap[t];let d,A;return u?("$attrs"===t&&track(e,"get",t),u(e)):(d=s.__cssModules)&&(d=d[t])?d:n!==EMPTY_OBJ&&hasOwn$2(n,t)?(a[t]=4,n[t]):(A=c.config.globalProperties,hasOwn$2(A,t)?A[t]:void 0)},set({_:e},t,n){const{data:r,setupState:o,ctx:i}=e;return hasSetupBinding(o,t)?(o[t]=n,!0):r!==EMPTY_OBJ&&hasOwn$2(r,t)?(r[t]=n,!0):!hasOwn$2(e.props,t)&&(("$"!==t[0]||!(t.slice(1)in e))&&(i[t]=n,!0))},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:o,propsOptions:i}},a){let s;return!!n[a]||e!==EMPTY_OBJ&&hasOwn$2(e,a)||hasSetupBinding(t,a)||(s=i[0])&&hasOwn$2(s,a)||hasOwn$2(r,a)||hasOwn$2(publicPropertiesMap,a)||hasOwn$2(o.config.globalProperties,a)},defineProperty(e,t,n){return null!=n.get?e._.accessCache[t]=0:hasOwn$2(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function normalizePropsOrEmits(e){return isArray$3(e)?e.reduce(((e,t)=>(e[t]=null,e)),{}):e}let shouldCacheAccess=!0;function applyOptions$1(e){const t=resolveMergedOptions(e),n=e.proxy,r=e.ctx;shouldCacheAccess=!1,t.beforeCreate&&callHook$1(t.beforeCreate,e,"bc");const{data:o,computed:i,methods:a,watch:s,provide:c,inject:l,created:u,beforeMount:d,mounted:A,beforeUpdate:p,updated:h,activated:f,deactivated:g,beforeDestroy:m,beforeUnmount:_,destroyed:E,unmounted:v,render:y,renderTracked:b,renderTriggered:C,errorCaptured:S,serverPrefetch:w,expose:T,inheritAttrs:I,components:R,directives:O,filters:N}=t;if(l&&resolveInjections(l,r,null),a)for(const D in a){const e=a[D];isFunction$2(e)&&(r[D]=e.bind(n))}if(o){const t=o.call(n,n);isObject$4(t)&&(e.data=reactive(t))}if(shouldCacheAccess=!0,i)for(const D in i){const e=i[D],t=isFunction$2(e)?e.bind(n,n):isFunction$2(e.get)?e.get.bind(n,n):NOOP,o=!isFunction$2(e)&&isFunction$2(e.set)?e.set.bind(n):NOOP,a=computed({get:t,set:o});Object.defineProperty(r,D,{enumerable:!0,configurable:!0,get:()=>a.value,set:e=>a.value=e})}if(s)for(const D in s)createWatcher(s[D],r,n,D);if(c){const e=isFunction$2(c)?c.call(n):c;Reflect.ownKeys(e).forEach((t=>{provide(t,e[t])}))}function k(e,t){isArray$3(t)?t.forEach((t=>e(t.bind(n)))):t&&e(t.bind(n))}if(u&&callHook$1(u,e,"c"),k(onBeforeMount,d),k(onMounted,A),k(onBeforeUpdate,p),k(onUpdated,h),k(onActivated,f),k(onDeactivated,g),k(onErrorCaptured,S),k(onRenderTracked,b),k(onRenderTriggered,C),k(onBeforeUnmount,_),k(onUnmounted,v),k(onServerPrefetch,w),isArray$3(T))if(T.length){const t=e.exposed||(e.exposed={});T.forEach((e=>{Object.defineProperty(t,e,{get:()=>n[e],set:t=>n[e]=t})}))}else e.exposed||(e.exposed={});y&&e.render===NOOP&&(e.render=y),null!=I&&(e.inheritAttrs=I),R&&(e.components=R),O&&(e.directives=O);const P=e.appContext.config.globalProperties.$applyOptions;P&&P(t,e,n)}function resolveInjections(e,t,n=NOOP){isArray$3(e)&&(e=normalizeInject(e));for(const r in e){const n=e[r];let o;o=isObject$4(n)?"default"in n?inject(n.from||r,n.default,!0):inject(n.from||r):inject(n),isRef(o)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>o.value,set:e=>o.value=e}):t[r]=o}}function callHook$1(e,t,n){callWithAsyncErrorHandling(isArray$3(e)?e.map((e=>e.bind(t.proxy))):e.bind(t.proxy),t,n)}function createWatcher(e,t,n,r){const o=r.includes(".")?createPathGetter(n,r):()=>n[r];if(isString$3(e)){const n=t[e];isFunction$2(n)&&watch(o,n)}else if(isFunction$2(e))watch(o,e.bind(n));else if(isObject$4(e))if(isArray$3(e))e.forEach((e=>createWatcher(e,t,n,r)));else{const r=isFunction$2(e.handler)?e.handler.bind(n):t[e.handler];isFunction$2(r)&&watch(o,r,e)}}function resolveMergedOptions(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:o,optionsCache:i,config:{optionMergeStrategies:a}}=e.appContext,s=i.get(t);let c;return s?c=s:o.length||n||r?(c={},o.length&&o.forEach((e=>mergeOptions$1(c,e,a,!0))),mergeOptions$1(c,t,a)):c=t,isObject$4(t)&&i.set(t,c),c}function mergeOptions$1(e,t,n,r=!1){const{mixins:o,extends:i}=t;i&&mergeOptions$1(e,i,n,!0),o&&o.forEach((t=>mergeOptions$1(e,t,n,!0)));for(const a in t)if(r&&"expose"===a);else{const r=internalOptionMergeStrats[a]||n&&n[a];e[a]=r?r(e[a],t[a]):t[a]}return e}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray$1,created:mergeAsArray$1,beforeMount:mergeAsArray$1,mounted:mergeAsArray$1,beforeUpdate:mergeAsArray$1,updated:mergeAsArray$1,beforeDestroy:mergeAsArray$1,beforeUnmount:mergeAsArray$1,destroyed:mergeAsArray$1,unmounted:mergeAsArray$1,activated:mergeAsArray$1,deactivated:mergeAsArray$1,errorCaptured:mergeAsArray$1,serverPrefetch:mergeAsArray$1,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(e,t){return t?e?function(){return extend$2(isFunction$2(e)?e.call(this,this):e,isFunction$2(t)?t.call(this,this):t)}:t:e}function mergeInject(e,t){return mergeObjectOptions(normalizeInject(e),normalizeInject(t))}function normalizeInject(e){if(isArray$3(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function mergeAsArray$1(e,t){return e?[...new Set([].concat(e,t))]:t}function mergeObjectOptions(e,t){return e?extend$2(Object.create(null),e,t):t}function mergeEmitsOrPropsOptions(e,t){return e?isArray$3(e)&&isArray$3(t)?[...new Set([...e,...t])]:extend$2(Object.create(null),normalizePropsOrEmits(e),normalizePropsOrEmits(null!=t?t:{})):t}function mergeWatchOptions(e,t){if(!e)return t;if(!t)return e;const n=extend$2(Object.create(null),e);for(const r in t)n[r]=mergeAsArray$1(e[r],t[r]);return n}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(e,t){return function(n,r=null){isFunction$2(n)||(n=extend$2({},n)),null==r||isObject$4(r)||(r=null);const o=createAppContext(),i=new WeakSet;let a=!1;const s=o.app={_uid:uid$1++,_component:n,_props:r,_container:null,_context:o,_instance:null,version:version$5,get config(){return o.config},set config(e){},use:(e,...t)=>(i.has(e)||(e&&isFunction$2(e.install)?(i.add(e),e.install(s,...t)):isFunction$2(e)&&(i.add(e),e(s,...t))),s),mixin:e=>(o.mixins.includes(e)||o.mixins.push(e),s),component:(e,t)=>t?(o.components[e]=t,s):o.components[e],directive:(e,t)=>t?(o.directives[e]=t,s):o.directives[e],mount(i,c,l){if(!a){const u=createVNode(n,r);return u.appContext=o,!0===l?l="svg":!1===l&&(l=void 0),c&&t?t(u,i):e(u,i,l),a=!0,s._container=i,i.__vue_app__=s,s._instance=u.component,getExposeProxy(u.component)||u.component.proxy}},unmount(){a&&(e(null,s._container),delete s._container.__vue_app__)},provide:(e,t)=>(o.provides[e]=t,s),runWithContext(e){const t=currentApp;currentApp=s;try{return e()}finally{currentApp=t}}};return s}}let currentApp=null;function provide(e,t){if(currentInstance){let n=currentInstance.provides;const r=currentInstance.parent&&currentInstance.parent.provides;r===n&&(n=currentInstance.provides=Object.create(r)),n[e]=t,"app"===currentInstance.type.mpType&&currentInstance.appContext.app.provide(e,t)}else;}function inject(e,t,n=!1){const r=currentInstance||currentRenderingInstance;if(r||currentApp){const o=r?null==r.parent?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:currentApp._context.provides;if(o&&e in o)return o[e];if(arguments.length>1)return n&&isFunction$2(t)?t.call(r&&r.proxy):t}}function hasInjectionContext(){return!!(currentInstance||currentRenderingInstance||currentApp)}function initProps(e,t,n,r=!1){const o={},i={};def(i,InternalObjectKey,1),e.propsDefaults=Object.create(null),setFullProps(e,t,o,i);for(const a in e.propsOptions[0])a in o||(o[a]=void 0);n?e.props=r?o:shallowReactive(o):e.type.props?e.props=o:e.props=i,e.attrs=i}function updateProps(e,t,n,r){const{props:o,attrs:i,vnode:{patchFlag:a}}=e,s=toRaw(o),[c]=e.propsOptions;let l=!1;if(!(r||a>0)||16&a){let r;setFullProps(e,t,o,i)&&(l=!0);for(const i in s)t&&(hasOwn$2(t,i)||(r=hyphenate(i))!==i&&hasOwn$2(t,r))||(c?!n||void 0===n[i]&&void 0===n[r]||(o[i]=resolvePropValue(c,s,i,void 0,e,!0)):delete o[i]);if(i!==s)for(const e in i)t&&hasOwn$2(t,e)||(delete i[e],l=!0)}else if(8&a){const n=e.vnode.dynamicProps;for(let r=0;r<n.length;r++){let a=n[r];if(isEmitListener(e.emitsOptions,a))continue;const u=t[a];if(c)if(hasOwn$2(i,a))u!==i[a]&&(i[a]=u,l=!0);else{const t=camelize(a);o[t]=resolvePropValue(c,s,t,u,e,!1)}else u!==i[a]&&(i[a]=u,l=!0)}}l&&trigger(e,"set","$attrs")}function setFullProps(e,t,n,r){const[o,i]=e.propsOptions;let a,s=!1;if(t)for(let c in t){if(isReservedProp(c))continue;const l=t[c];let u;o&&hasOwn$2(o,u=camelize(c))?i&&i.includes(u)?(a||(a={}))[u]=l:n[u]=l:isEmitListener(e.emitsOptions,c)||c in r&&l===r[c]||(r[c]=l,s=!0)}if(i){const t=toRaw(n),r=a||EMPTY_OBJ;for(let a=0;a<i.length;a++){const s=i[a];n[s]=resolvePropValue(o,t,s,r[s],e,!hasOwn$2(r,s))}}return s}function resolvePropValue(e,t,n,r,o,i){const a=e[n];if(null!=a){const e=hasOwn$2(a,"default");if(e&&void 0===r){const e=a.default;if(a.type!==Function&&!a.skipFactory&&isFunction$2(e)){const{propsDefaults:i}=o;if(n in i)r=i[n];else{const a=setCurrentInstance(o);r=i[n]=e.call(null,t),a()}}else r=e}a[0]&&(i&&!e?r=!1:!a[1]||""!==r&&r!==hyphenate(n)||(r=!0))}return r}function normalizePropsOptions(e,t,n=!1){const r=t.propsCache,o=r.get(e);if(o)return o;const i=e.props,a={},s=[];let c=!1;if(!isFunction$2(e)){const r=e=>{c=!0;const[n,r]=normalizePropsOptions(e,t,!0);extend$2(a,n),r&&s.push(...r)};!n&&t.mixins.length&&t.mixins.forEach(r),e.extends&&r(e.extends),e.mixins&&e.mixins.forEach(r)}if(!i&&!c)return isObject$4(e)&&r.set(e,EMPTY_ARR),EMPTY_ARR;if(isArray$3(i))for(let u=0;u<i.length;u++){const e=camelize(i[u]);validatePropName(e)&&(a[e]=EMPTY_OBJ)}else if(i)for(const u in i){const e=camelize(u);if(validatePropName(e)){const t=i[u],n=a[e]=isArray$3(t)||isFunction$2(t)?{type:t}:extend$2({},t);if(n){const t=getTypeIndex(Boolean,n.type),r=getTypeIndex(String,n.type);n[0]=t>-1,n[1]=r<0||t<r,(t>-1||hasOwn$2(n,"default"))&&s.push(e)}}}const l=[a,s];return isObject$4(e)&&r.set(e,l),l}function validatePropName(e){return"$"!==e[0]&&!isReservedProp(e)}function getType(e){if(null===e)return"null";if("function"==typeof e)return e.name||"";if("object"==typeof e){return e.constructor&&e.constructor.name||""}return""}function isSameType(e,t){return getType(e)===getType(t)}function getTypeIndex(e,t){return isArray$3(t)?t.findIndex((t=>isSameType(t,e))):isFunction$2(t)&&isSameType(t,e)?0:-1}const isInternalKey=e=>"_"===e[0]||"$stable"===e,normalizeSlotValue=e=>isArray$3(e)?e.map(normalizeVNode):[normalizeVNode(e)],normalizeSlot$1=(e,t,n)=>{if(t._n)return t;const r=withCtx(((...e)=>normalizeSlotValue(t(...e))),n);return r._c=!1,r},normalizeObjectSlots=(e,t,n)=>{const r=e._ctx;for(const o in e){if(isInternalKey(o))continue;const n=e[o];if(isFunction$2(n))t[o]=normalizeSlot$1(o,n,r);else if(null!=n){const e=normalizeSlotValue(n);t[o]=()=>e}}},normalizeVNodeSlots=(e,t)=>{const n=normalizeSlotValue(t);e.slots.default=()=>n},initSlots=(e,t)=>{if(32&e.vnode.shapeFlag){const n=t._;n?(e.slots=toRaw(t),def(t,"_",n)):normalizeObjectSlots(t,e.slots={})}else e.slots={},t&&normalizeVNodeSlots(e,t);def(e.slots,InternalObjectKey,1)},updateSlots=(e,t,n)=>{const{vnode:r,slots:o}=e;let i=!0,a=EMPTY_OBJ;if(32&r.shapeFlag){const e=t._;e?n&&1===e?i=!1:(extend$2(o,t),n||1!==e||delete o._):(i=!t.$stable,normalizeObjectSlots(t,o)),a=t}else t&&(normalizeVNodeSlots(e,t),a={default:1});if(i)for(const s in o)isInternalKey(s)||null!=a[s]||delete o[s]};function setRef(e,t,n,r,o=!1){if(isArray$3(e))return void e.forEach(((e,i)=>setRef(e,t&&(isArray$3(t)?t[i]:t),n,r,o)));if(isAsyncWrapper(r)&&!o)return;const i=4&r.shapeFlag?getExposeProxy(r.component)||r.component.proxy:r.el,a=o?null:i,{i:s,r:c}=e,l=t&&t.r,u=s.refs===EMPTY_OBJ?s.refs={}:s.refs,d=s.setupState;if(null!=l&&l!==c&&(isString$3(l)?(u[l]=null,hasOwn$2(d,l)&&(d[l]=null)):isRef(l)&&(l.value=null)),isFunction$2(c))callWithErrorHandling(c,s,12,[a,u]);else{const t=isString$3(c),r=isRef(c);if(t||r){const s=()=>{if(e.f){const n=t?hasOwn$2(d,c)?d[c]:u[c]:c.value;o?isArray$3(n)&&remove$1(n,i):isArray$3(n)?n.includes(i)||n.push(i):t?(u[c]=[i],hasOwn$2(d,c)&&(d[c]=u[c])):(c.value=[i],e.k&&(u[e.k]=c.value))}else t?(u[c]=a,hasOwn$2(d,c)&&(d[c]=a)):r&&(c.value=a,e.k&&(u[e.k]=a))};a?(s.id=-1,queuePostRenderEffect(s,n)):s()}}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(e){return baseCreateRenderer(e)}function baseCreateRenderer(e,t){getGlobalThis$1().__VUE__=!0;const{insert:n,remove:r,patchProp:o,forcePatchProp:i,createElement:a,createText:s,createComment:c,setText:l,setElementText:u,parentNode:d,nextSibling:A,setScopeId:p=NOOP,insertStaticContent:h}=e,f=(e,t,n,r=null,o=null,i=null,a=void 0,s=null,c=!!t.dynamicChildren)=>{if(e===t)return;e&&!isSameVNodeType(e,t)&&(r=V(e),U(e,o,i,!0),e=null),-2===t.patchFlag&&(c=!1,t.dynamicChildren=null);const{type:l,ref:u,shapeFlag:d}=t;switch(l){case Text:g(e,t,n,r);break;case Comment:m(e,t,n,r);break;case Static:null==e&&_(t,n,r,a);break;case Fragment:T(e,t,n,r,o,i,a,s,c);break;default:1&d?E(e,t,n,r,o,i,a,s,c):6&d?I(e,t,n,r,o,i,a,s,c):(64&d||128&d)&&l.process(e,t,n,r,o,i,a,s,c,Q)}null!=u&&o&&setRef(u,e&&e.ref,i,t||e,!t)},g=(e,t,r,o)=>{if(null==e)n(t.el=s(t.children),r,o);else{const n=t.el=e.el;t.children!==e.children&&l(n,t.children)}},m=(e,t,r,o)=>{null==e?n(t.el=c(t.children||""),r,o):t.el=e.el},_=(e,t,n,r)=>{[e.el,e.anchor]=h(e.children,t,n,r,e.el,e.anchor)},E=(e,t,n,r,o,i,a,s,c)=>{"svg"===t.type?a="svg":"math"===t.type&&(a="mathml"),null==e?v(t,n,r,o,i,a,s,c):C(e,t,o,i,a,s,c)},v=(e,t,r,i,s,c,l,d)=>{let A,p;const{props:h,shapeFlag:f,transition:g,dirs:m}=e;if(A=e.el=a(e.type,c,h&&h.is,h),8&f?u(A,e.children):16&f&&b(e.children,A,null,i,s,resolveChildrenNamespace(e,c),l,d),m&&invokeDirectiveHook(e,null,i,"created"),y(A,e,e.scopeId,l,i),h){for(const t in h)"value"===t||isReservedProp(t)||o(A,t,null,h[t],c,e.children,i,s,$);"value"in h&&o(A,"value",null,h.value,c),(p=h.onVnodeBeforeMount)&&invokeVNodeHook(p,i,e)}Object.defineProperty(A,"__vueParentComponent",{value:i,enumerable:!1}),m&&invokeDirectiveHook(e,null,i,"beforeMount");const _=needTransition(s,g);_&&g.beforeEnter(A),n(A,t,r),((p=h&&h.onVnodeMounted)||_||m)&&queuePostRenderEffect((()=>{p&&invokeVNodeHook(p,i,e),_&&g.enter(A),m&&invokeDirectiveHook(e,null,i,"mounted")}),s)},y=(e,t,n,r,o)=>{if(n&&p(e,n),r)for(let i=0;i<r.length;i++)p(e,r[i]);if(o){if(t===o.subTree){const t=o.vnode;y(e,t,t.scopeId,t.slotScopeIds,o.parent)}}},b=(e,t,n,r,o,i,a,s,c=0)=>{for(let l=c;l<e.length;l++){const c=e[l]=s?cloneIfMounted(e[l]):normalizeVNode(e[l]);f(null,c,t,n,r,o,i,a,s)}},C=(e,t,n,r,a,s,c)=>{const l=t.el=e.el;let{patchFlag:d,dynamicChildren:A,dirs:p}=t;d|=16&e.patchFlag;const h=e.props||EMPTY_OBJ,f=t.props||EMPTY_OBJ;let g;if(n&&toggleRecurse(n,!1),(g=f.onVnodeBeforeUpdate)&&invokeVNodeHook(g,n,t,e),p&&invokeDirectiveHook(t,e,n,"beforeUpdate"),n&&toggleRecurse(n,!0),A?S(e.dynamicChildren,A,l,n,r,resolveChildrenNamespace(t,a),s):c||P(e,t,l,null,n,r,resolveChildrenNamespace(t,a),s,!1),d>0){if(16&d)w(l,t,h,f,n,r,a);else if(2&d&&h.class!==f.class&&o(l,"class",null,f.class,a),4&d&&o(l,"style",h.style,f.style,a),8&d){const s=t.dynamicProps;for(let t=0;t<s.length;t++){const c=s[t],u=h[c],d=f[c];(d!==u||"value"===c||i&&i(l,c))&&o(l,c,u,d,a,e.children,n,r,$)}}1&d&&e.children!==t.children&&u(l,t.children)}else c||null!=A||w(l,t,h,f,n,r,a);((g=f.onVnodeUpdated)||p)&&queuePostRenderEffect((()=>{g&&invokeVNodeHook(g,n,t,e),p&&invokeDirectiveHook(t,e,n,"updated")}),r)},S=(e,t,n,r,o,i,a)=>{for(let s=0;s<t.length;s++){const c=e[s],l=t[s],u=c.el&&(c.type===Fragment||!isSameVNodeType(c,l)||70&c.shapeFlag)?d(c.el):n;f(c,l,u,null,r,o,i,a,!0)}},w=(e,t,n,r,a,s,c)=>{if(n!==r){if(n!==EMPTY_OBJ)for(const i in n)isReservedProp(i)||i in r||o(e,i,n[i],null,c,t.children,a,s,$);for(const l in r){if(isReservedProp(l))continue;const u=r[l],d=n[l];(u!==d&&"value"!==l||i&&i(e,l))&&o(e,l,d,u,c,t.children,a,s,$)}"value"in r&&o(e,"value",n.value,r.value,c)}},T=(e,t,r,o,i,a,c,l,u)=>{const d=t.el=e?e.el:s(""),A=t.anchor=e?e.anchor:s("");let{patchFlag:p,dynamicChildren:h,slotScopeIds:f}=t;f&&(l=l?l.concat(f):f),null==e?(n(d,r,o),n(A,r,o),b(t.children||[],r,A,i,a,c,l,u)):p>0&&64&p&&h&&e.dynamicChildren?(S(e.dynamicChildren,h,r,i,a,c,l),(null!=t.key||i&&t===i.subTree)&&traverseStaticChildren(e,t,!0)):P(e,t,r,A,i,a,c,l,u)},I=(e,t,n,r,o,i,a,s,c)=>{t.slotScopeIds=s,null==e?512&t.shapeFlag?o.ctx.activate(t,n,r,a,c):R(t,n,r,o,i,a,c):O(e,t,c)},R=(e,t,n,r,o,i,a)=>{const s=e.component=createComponentInstance(e,r,o);if(isKeepAlive(e)&&(s.ctx.renderer=Q),setupComponent$1(s),s.asyncDep){if(o&&o.registerDep(s,N),!e.el){const e=s.subTree=createVNode(Comment);m(null,e,t,n)}}else N(s,e,t,n,o,i,a)},O=(e,t,n)=>{const r=t.component=e.component;if(shouldUpdateComponent(e,t,n)){if(r.asyncDep&&!r.asyncResolved)return void k(r,t,n);r.next=t,invalidateJob(r.update),r.effect.dirty=!0,r.update()}else t.el=e.el,r.vnode=t},N=(e,t,n,r,o,i,a)=>{const s=()=>{if(e.isMounted){let{next:t,bu:n,u:r,parent:c,vnode:l}=e;{const n=locateNonHydratedAsyncRoot(e);if(n)return t&&(t.el=l.el,k(e,t,a)),void n.asyncDep.then((()=>{e.isUnmounted||s()}))}let u,A=t;toggleRecurse(e,!1),t?(t.el=l.el,k(e,t,a)):t=l,n&&invokeArrayFns$1(n),(u=t.props&&t.props.onVnodeBeforeUpdate)&&invokeVNodeHook(u,c,t,l),toggleRecurse(e,!0);const p=renderComponentRoot(e),h=e.subTree;e.subTree=p,f(h,p,d(h.el),V(h),e,o,i),t.el=p.el,null===A&&updateHOCHostEl(e,p.el),r&&queuePostRenderEffect(r,o),(u=t.props&&t.props.onVnodeUpdated)&&queuePostRenderEffect((()=>invokeVNodeHook(u,c,t,l)),o)}else{let a;const{el:s,props:c}=t,{bm:l,m:u,parent:d}=e,A=isAsyncWrapper(t);toggleRecurse(e,!1),l&&invokeArrayFns$1(l),!A&&(a=c&&c.onVnodeBeforeMount)&&invokeVNodeHook(a,d,t),toggleRecurse(e,!0);{const a=e.subTree=renderComponentRoot(e);f(null,a,n,r,e,o,i),t.el=a.el}if(u&&queuePostRenderEffect(u,o),!A&&(a=c&&c.onVnodeMounted)){const e=t;queuePostRenderEffect((()=>invokeVNodeHook(a,d,e)),o)}(256&t.shapeFlag||d&&isAsyncWrapper(d.vnode)&&256&d.vnode.shapeFlag)&&(e.ba&&invokeKeepAliveHooks(e.ba),e.a&&queuePostRenderEffect(e.a,o)),e.isMounted=!0,t=n=r=null}},c=e.effect=new ReactiveEffect(s,NOOP,(()=>queueJob(l)),e.scope),l=e.update=()=>{c.dirty&&c.run()};l.id=e.uid,toggleRecurse(e,!0),l()},k=(e,t,n)=>{t.component=e;const r=e.vnode.props;e.vnode=t,e.next=null,updateProps(e,t.props,r,n),updateSlots(e,t.children,n),pauseTracking(),flushPreFlushCbs(e),resetTracking()},P=(e,t,n,r,o,i,a,s,c=!1)=>{const l=e&&e.children,d=e?e.shapeFlag:0,A=t.children,{patchFlag:p,shapeFlag:h}=t;if(p>0){if(128&p)return void L(l,A,n,r,o,i,a,s,c);if(256&p)return void D(l,A,n,r,o,i,a,s,c)}8&h?(16&d&&$(l,o,i),A!==l&&u(n,A)):16&d?16&h?L(l,A,n,r,o,i,a,s,c):$(l,o,i,!0):(8&d&&u(n,""),16&h&&b(A,n,r,o,i,a,s,c))},D=(e,t,n,r,o,i,a,s,c)=>{t=t||EMPTY_ARR;const l=(e=e||EMPTY_ARR).length,u=t.length,d=Math.min(l,u);let A;for(A=0;A<d;A++){const r=t[A]=c?cloneIfMounted(t[A]):normalizeVNode(t[A]);f(e[A],r,n,null,o,i,a,s,c)}l>u?$(e,o,i,!0,!1,d):b(t,n,r,o,i,a,s,c,d)},L=(e,t,n,r,o,i,a,s,c)=>{let l=0;const u=t.length;let d=e.length-1,A=u-1;for(;l<=d&&l<=A;){const r=e[l],u=t[l]=c?cloneIfMounted(t[l]):normalizeVNode(t[l]);if(!isSameVNodeType(r,u))break;f(r,u,n,null,o,i,a,s,c),l++}for(;l<=d&&l<=A;){const r=e[d],l=t[A]=c?cloneIfMounted(t[A]):normalizeVNode(t[A]);if(!isSameVNodeType(r,l))break;f(r,l,n,null,o,i,a,s,c),d--,A--}if(l>d){if(l<=A){const e=A+1,d=e<u?t[e].el:r;for(;l<=A;)f(null,t[l]=c?cloneIfMounted(t[l]):normalizeVNode(t[l]),n,d,o,i,a,s,c),l++}}else if(l>A)for(;l<=d;)U(e[l],o,i,!0),l++;else{const p=l,h=l,g=new Map;for(l=h;l<=A;l++){const e=t[l]=c?cloneIfMounted(t[l]):normalizeVNode(t[l]);null!=e.key&&g.set(e.key,l)}let m,_=0;const E=A-h+1;let v=!1,y=0;const b=new Array(E);for(l=0;l<E;l++)b[l]=0;for(l=p;l<=d;l++){const r=e[l];if(_>=E){U(r,o,i,!0);continue}let u;if(null!=r.key)u=g.get(r.key);else for(m=h;m<=A;m++)if(0===b[m-h]&&isSameVNodeType(r,t[m])){u=m;break}void 0===u?U(r,o,i,!0):(b[u-h]=l+1,u>=y?y=u:v=!0,f(r,t[u],n,null,o,i,a,s,c),_++)}const C=v?getSequence(b):EMPTY_ARR;for(m=C.length-1,l=E-1;l>=0;l--){const e=h+l,d=t[e],A=e+1<u?t[e+1].el:r;0===b[l]?f(null,d,n,A,o,i,a,s,c):v&&(m<0||l!==C[m]?B(d,n,A,2):m--)}}},B=(e,t,r,o,i=null)=>{const{el:a,type:s,transition:c,children:l,shapeFlag:u}=e;if(6&u)return void B(e.component.subTree,t,r,o);if(128&u)return void e.suspense.move(t,r,o);if(64&u)return void s.move(e,t,r,Q);if(s===Fragment){n(a,t,r);for(let e=0;e<l.length;e++)B(l[e],t,r,o);return void n(e.anchor,t,r)}if(s===Static)return void(({el:e,anchor:t},r,o)=>{let i;for(;e&&e!==t;)i=A(e),n(e,r,o),e=i;n(t,r,o)})(e,t,r);if(2!==o&&1&u&&c)if(0===o)c.beforeEnter(a),n(a,t,r),queuePostRenderEffect((()=>c.enter(a)),i);else{const{leave:e,delayLeave:o,afterLeave:i}=c,s=()=>n(a,t,r),l=()=>{e(a,(()=>{s(),i&&i()}))};o?o(a,s,l):l()}else n(a,t,r)},U=(e,t,n,r=!1,o=!1)=>{const{type:i,props:a,ref:s,children:c,dynamicChildren:l,shapeFlag:u,patchFlag:d,dirs:A}=e;if(null!=s&&setRef(s,null,n,e,!0),256&u)return void t.ctx.deactivate(e);const p=1&u&&A,h=!isAsyncWrapper(e);let f;if(h&&(f=a&&a.onVnodeBeforeUnmount)&&invokeVNodeHook(f,t,e),6&u)F(e.component,n,r);else{if(128&u)return void e.suspense.unmount(n,r);p&&invokeDirectiveHook(e,null,t,"beforeUnmount"),64&u?e.type.remove(e,t,n,o,Q,r):l&&(i!==Fragment||d>0&&64&d)?$(l,t,n,!1,!0):(i===Fragment&&384&d||!o&&16&u)&&$(c,t,n),r&&M(e)}(h&&(f=a&&a.onVnodeUnmounted)||p)&&queuePostRenderEffect((()=>{f&&invokeVNodeHook(f,t,e),p&&invokeDirectiveHook(e,null,t,"unmounted")}),n)},M=e=>{const{type:t,el:n,anchor:o,transition:i}=e;if(t===Fragment)return void x(n,o);if(t===Static)return void(({el:e,anchor:t})=>{let n;for(;e&&e!==t;)n=A(e),r(e),e=n;r(t)})(e);const a=()=>{r(n),i&&!i.persisted&&i.afterLeave&&i.afterLeave()};if(1&e.shapeFlag&&i&&!i.persisted){const{leave:t,delayLeave:r}=i,o=()=>t(n,a);r?r(e.el,a,o):o()}else a()},x=(e,t)=>{let n;for(;e!==t;)n=A(e),r(e),e=n;r(t)},F=(e,t,n)=>{const{bum:r,scope:o,update:i,subTree:a,um:s}=e;r&&invokeArrayFns$1(r),o.stop(),i&&(i.active=!1,U(a,e,t,n)),s&&queuePostRenderEffect(s,t),queuePostRenderEffect((()=>{e.isUnmounted=!0}),t),t&&t.pendingBranch&&!t.isUnmounted&&e.asyncDep&&!e.asyncResolved&&e.suspenseId===t.pendingId&&(t.deps--,0===t.deps&&t.resolve())},$=(e,t,n,r=!1,o=!1,i=0)=>{for(let a=i;a<e.length;a++)U(e[a],t,n,r,o)},V=e=>6&e.shapeFlag?V(e.component.subTree):128&e.shapeFlag?e.suspense.next():A(e.anchor||e.el);let H=!1;const j=(e,t,n)=>{null==e?t._vnode&&U(t._vnode,null,null,!0):f(t._vnode||null,e,t,null,null,null,n),H||(H=!0,flushPreFlushCbs(),flushPostFlushCbs(),H=!1),t._vnode=e},Q={p:f,um:U,m:B,r:M,mt:R,mc:b,pc:P,pbc:S,n:V,o:e};let G;return{render:j,hydrate:G,createApp:createAppAPI(j,G)}}function resolveChildrenNamespace({type:e,props:t},n){return"svg"===n&&"foreignObject"===e||"mathml"===n&&"annotation-xml"===e&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function toggleRecurse({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function needTransition(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function traverseStaticChildren(e,t,n=!1){const r=e.children,o=t.children;if(isArray$3(r)&&isArray$3(o))for(let i=0;i<r.length;i++){const e=r[i];let t=o[i];1&t.shapeFlag&&!t.dynamicChildren&&((t.patchFlag<=0||32===t.patchFlag)&&(t=o[i]=cloneIfMounted(o[i]),t.el=e.el),n||traverseStaticChildren(e,t)),t.type===Text&&(t.el=e.el)}}function getSequence(e){const t=e.slice(),n=[0];let r,o,i,a,s;const c=e.length;for(r=0;r<c;r++){const c=e[r];if(0!==c){if(o=n[n.length-1],e[o]<c){t[r]=o,n.push(r);continue}for(i=0,a=n.length-1;i<a;)s=i+a>>1,e[n[s]]<c?i=s+1:a=s;c<e[n[i]]&&(i>0&&(t[r]=n[i-1]),n[i]=r)}}for(i=n.length,a=n[i-1];i-- >0;)n[i]=a,a=t[a];return n}function locateNonHydratedAsyncRoot(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:locateNonHydratedAsyncRoot(t)}const isTeleport=e=>e.__isTeleport,isTeleportDisabled=e=>e&&(e.disabled||""===e.disabled),isTargetSVG=e=>"undefined"!=typeof SVGElement&&e instanceof SVGElement,isTargetMathML=e=>"function"==typeof MathMLElement&&e instanceof MathMLElement,resolveTarget=(e,t)=>{const n=e&&e.to;if(isString$3(n)){if(t){return t(n)}return null}return n},TeleportImpl={name:"Teleport",__isTeleport:!0,process(e,t,n,r,o,i,a,s,c,l){const{mc:u,pc:d,pbc:A,o:{insert:p,querySelector:h,createText:f,createComment:g}}=l,m=isTeleportDisabled(t.props);let{shapeFlag:_,children:E,dynamicChildren:v}=t;if(null==e){const e=t.el=f(""),l=t.anchor=f("");p(e,n,r),p(l,n,r);const d=t.target=resolveTarget(t.props,h),A=t.targetAnchor=f("");d&&(p(A,d),"svg"===a||isTargetSVG(d)?a="svg":("mathml"===a||isTargetMathML(d))&&(a="mathml"));const g=(e,t)=>{16&_&&u(E,e,t,o,i,a,s,c)};m?g(n,l):d&&g(d,A)}else{t.el=e.el;const r=t.anchor=e.anchor,u=t.target=e.target,p=t.targetAnchor=e.targetAnchor,f=isTeleportDisabled(e.props),g=f?n:u,_=f?r:p;if("svg"===a||isTargetSVG(u)?a="svg":("mathml"===a||isTargetMathML(u))&&(a="mathml"),v?(A(e.dynamicChildren,v,g,o,i,a,s),traverseStaticChildren(e,t,!0)):c||d(e,t,g,_,o,i,a,s,!1),m)f?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):moveTeleport(t,n,r,l,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const e=t.target=resolveTarget(t.props,h);e&&moveTeleport(t,e,null,l,0)}else f&&moveTeleport(t,u,p,l,1)}updateCssVars(t)},remove(e,t,n,r,{um:o,o:{remove:i}},a){const{shapeFlag:s,children:c,anchor:l,targetAnchor:u,target:d,props:A}=e;if(d&&i(u),a&&i(l),16&s){const e=a||!isTeleportDisabled(A);for(let r=0;r<c.length;r++){const i=c[r];o(i,t,n,e,!!i.dynamicChildren)}}},move:moveTeleport,hydrate:hydrateTeleport};function moveTeleport(e,t,n,{o:{insert:r},m:o},i=2){0===i&&r(e.targetAnchor,t,n);const{el:a,anchor:s,shapeFlag:c,children:l,props:u}=e,d=2===i;if(d&&r(a,t,n),(!d||isTeleportDisabled(u))&&16&c)for(let A=0;A<l.length;A++)o(l[A],t,n,2);d&&r(s,t,n)}function hydrateTeleport(e,t,n,r,o,i,{o:{nextSibling:a,parentNode:s,querySelector:c}},l){const u=t.target=resolveTarget(t.props,c);if(u){const c=u._lpa||u.firstChild;if(16&t.shapeFlag)if(isTeleportDisabled(t.props))t.anchor=l(a(e),t,s(e),n,r,o,i),t.targetAnchor=c;else{t.anchor=a(e);let s=c;for(;s;)if(s=a(s),s&&8===s.nodeType&&"teleport anchor"===s.data){t.targetAnchor=s,u._lpa=t.targetAnchor&&a(t.targetAnchor);break}l(c,t,u,n,r,o,i)}updateCssVars(t)}return t.anchor&&a(t.anchor)}const Teleport=TeleportImpl;function updateCssVars(e){const t=e.ctx;if(t&&t.ut){let n=e.children[0].el;for(;n&&n!==e.targetAnchor;)1===n.nodeType&&n.setAttribute("data-v-owner",t.uid),n=n.nextSibling;t.ut()}}const Fragment=Symbol.for("v-fgt"),Text=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(e=!1){blockStack.push(currentBlock=e?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(e){isBlockTreeEnabled+=e}function setupBlock(e){return e.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(e),e}function createElementBlock(e,t,n,r,o,i){return setupBlock(createBaseVNode(e,t,n,r,o,i,!0))}function createBlock(e,t,n,r,o){return setupBlock(createVNode(e,t,n,r,o,!0))}function isVNode(e){return!!e&&!0===e.__v_isVNode}function isSameVNodeType(e,t){return e.type===t.type&&e.key===t.key}const InternalObjectKey="__vInternal",normalizeKey=({key:e})=>null!=e?e:null,normalizeRef=({ref:e,ref_key:t,ref_for:n})=>("number"==typeof e&&(e=""+e),null!=e?isString$3(e)||isRef(e)||isFunction$2(e)?{i:currentRenderingInstance,r:e,k:t,f:!!n}:e:null);function createBaseVNode(e,t=null,n=null,r=0,o=null,i=(e===Fragment?0:1),a=!1,s=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&normalizeKey(t),ref:t&&normalizeRef(t),scopeId:currentScopeId,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return s?(normalizeChildren(c,n),128&i&&e.normalize(c)):n&&(c.shapeFlag|=isString$3(n)?8:16),isBlockTreeEnabled>0&&!a&&currentBlock&&(c.patchFlag>0||6&i)&&32!==c.patchFlag&&currentBlock.push(c),c}const createVNode=_createVNode;function _createVNode(e,t=null,n=null,r=0,o=null,i=!1){if(e&&e!==NULL_DYNAMIC_COMPONENT||(e=Comment),isVNode(e)){const r=cloneVNode(e,t,!0);return n&&normalizeChildren(r,n),isBlockTreeEnabled>0&&!i&&currentBlock&&(6&r.shapeFlag?currentBlock[currentBlock.indexOf(e)]=r:currentBlock.push(r)),r.patchFlag|=-2,r}if(isClassComponent(e)&&(e=e.__vccOpts),t){t=guardReactiveProps(t);let{class:e,style:n}=t;e&&!isString$3(e)&&(t.class=normalizeClass(e)),isObject$4(n)&&(isProxy(n)&&!isArray$3(n)&&(n=extend$2({},n)),t.style=normalizeStyle(n))}return createBaseVNode(e,t,n,r,o,isString$3(e)?1:isSuspense(e)?128:isTeleport(e)?64:isObject$4(e)?4:isFunction$2(e)?2:0,i,!0)}function guardReactiveProps(e){return e?isProxy(e)||InternalObjectKey in e?extend$2({},e):e:null}function cloneVNode(e,t,n=!1){const{props:r,ref:o,patchFlag:i,children:a}=e,s=t?mergeProps(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:s,key:s&&normalizeKey(s),ref:t&&t.ref?n&&o?isArray$3(o)?o.concat(normalizeRef(t)):[o,normalizeRef(t)]:normalizeRef(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Fragment?-1===i?16:16|i:i,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&cloneVNode(e.ssContent),ssFallback:e.ssFallback&&cloneVNode(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function createTextVNode(e=" ",t=0){return createVNode(Text,null,e,t)}function createCommentVNode(e="",t=!1){return t?(openBlock(),createBlock(Comment,null,e)):createVNode(Comment,null,e)}function normalizeVNode(e){return null==e||"boolean"==typeof e?createVNode(Comment):isArray$3(e)?createVNode(Fragment,null,e.slice()):"object"==typeof e?cloneIfMounted(e):createVNode(Text,null,String(e))}function cloneIfMounted(e){return null===e.el&&-1!==e.patchFlag||e.memo?e:cloneVNode(e)}function normalizeChildren(e,t){let n=0;const{shapeFlag:r}=e;if(null==t)t=null;else if(isArray$3(t))n=16;else if("object"==typeof t){if(65&r){const n=t.default;return void(n&&(n._c&&(n._d=!1),normalizeChildren(e,n()),n._c&&(n._d=!0)))}{n=32;const r=t._;r||InternalObjectKey in t?3===r&&currentRenderingInstance&&(1===currentRenderingInstance.slots._?t._=1:(t._=2,e.patchFlag|=1024)):t._ctx=currentRenderingInstance}}else isFunction$2(t)?(t={default:t,_ctx:currentRenderingInstance},n=32):(t=String(t),64&r?(n=16,t=[createTextVNode(t)]):n=8);e.children=t,e.shapeFlag|=n}function mergeProps(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const e in r)if("class"===e)t.class!==r.class&&(t.class=normalizeClass([t.class,r.class]));else if("style"===e)t.style=normalizeStyle([t.style,r.style]);else if(isOn(e)){const n=t[e],o=r[e];!o||n===o||isArray$3(n)&&n.includes(o)||(t[e]=n?[].concat(n,o):o)}else""!==e&&(t[e]=r[e])}return t}function invokeVNodeHook(e,t,n,r=null){callWithAsyncErrorHandling(e,t,7,[n,r])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(e,t,n){const r=e.type,o=(t?t.appContext:e.appContext)||emptyAppContext,i={uid:uid++,vnode:e,type:r,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(r,o),emitsOptions:normalizeEmitsOptions(r,o),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:r.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,bda:null,da:null,ba:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=emit$2.bind(null,i),i.$pageInstance=t&&t.$pageInstance,e.ce&&e.ce(i),i}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,setInSSRSetupState;{const e=getGlobalThis$1(),t=(t,n)=>{let r;return(r=e[t])||(r=e[t]=[]),r.push(n),e=>{r.length>1?r.forEach((t=>t(e))):r[0](e)}};internalSetCurrentInstance=t("__VUE_INSTANCE_SETTERS__",(e=>currentInstance=e)),setInSSRSetupState=t("__VUE_SSR_SETTERS__",(e=>isInSSRComponentSetup=e))}const setCurrentInstance=e=>{const t=currentInstance;return internalSetCurrentInstance(e),e.scope.on(),()=>{e.scope.off(),internalSetCurrentInstance(t)}},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(e){return 4&e.vnode.shapeFlag}let isInSSRComponentSetup=!1,compile$1$1;function setupComponent$1(e,t=!1){t&&setInSSRSetupState(t);const{props:n,children:r}=e.vnode,o=isStatefulComponent(e);initProps(e,n,o,t),initSlots(e,r);const i=o?setupStatefulComponent(e,t):void 0;return t&&setInSSRSetupState(!1),i}function setupStatefulComponent(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=markRaw(new Proxy(e.ctx,PublicInstanceProxyHandlers));const{setup:r}=n;if(r){const n=e.setupContext=r.length>1?createSetupContext(e):null,o=setCurrentInstance(e);pauseTracking();const i=callWithErrorHandling(r,e,0,[e.props,n]);if(resetTracking(),o(),isPromise$1(i)){if(i.then(unsetCurrentInstance,unsetCurrentInstance),t)return i.then((n=>{handleSetupResult(e,n,t)})).catch((t=>{handleError(t,e,0)}));e.asyncDep=i}else handleSetupResult(e,i,t)}else finishComponentSetup(e,t)}function handleSetupResult(e,t,n){isFunction$2(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:isObject$4(t)&&(e.setupState=proxyRefs(t)),finishComponentSetup(e,n)}function finishComponentSetup(e,t,n){const r=e.type;if(!e.render){if(!t&&compile$1$1&&!r.render){const t=r.template||resolveMergedOptions(e).template;if(t){const{isCustomElement:n,compilerOptions:o}=e.appContext.config,{delimiters:i,compilerOptions:a}=r,s=extend$2(extend$2({isCustomElement:n,delimiters:i},o),a);r.render=compile$1$1(t,s)}}e.render=r.render||NOOP}{const t=setCurrentInstance(e);pauseTracking();try{applyOptions$1(e)}finally{resetTracking(),t()}}}function getAttrsProxy(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get:(t,n)=>(track(e,"get","$attrs"),t[n])}))}function createSetupContext(e){const t=t=>{e.exposed=t||{}};return{get attrs(){return getAttrsProxy(e)},slots:e.slots,emit:e.emit,expose:t}}function getExposeProxy(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(proxyRefs(markRaw(e.exposed)),{get:(t,n)=>n in t?t[n]:n in publicPropertiesMap?publicPropertiesMap[n](e):void 0,has:(e,t)=>t in e||t in publicPropertiesMap}))}const classifyRE$1=/(?:^|[-_])(\w)/g,classify$1=e=>e.replace(classifyRE$1,(e=>e.toUpperCase())).replace(/[-_]/g,"");function getComponentName$1(e,t=!0){return isFunction$2(e)?e.displayName||e.name:e.name||t&&e.__name}function formatComponentName$1(e,t,n=!1){let r=getComponentName$1(t);if(!r&&t.__file){const e=t.__file.match(/([^/\\]+)\.\w+$/);e&&(r=e[1])}if(!r&&e&&e.parent){const n=e=>{for(const n in e)if(e[n]===t)return n};r=n(e.components||e.parent.type.components)||n(e.appContext.components)}return r?classify$1(r):n?"App":"Anonymous"}function isClassComponent(e){return isFunction$2(e)&&"__vccOpts"in e}const computed=(e,t)=>computed$1(e,t,isInSSRComponentSetup);function h$1(e,t,n){const r=arguments.length;return 2===r?isObject$4(t)&&!isArray$3(t)?isVNode(t)?createVNode(e,null,[t]):createVNode(e,t):createVNode(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):3===r&&isVNode(n)&&(n=[n]),createVNode(e,t,n))}const version$5="3.4.21",svgNS="http://www.w3.org/2000/svg",mathmlNS="http://www.w3.org/1998/Math/MathML",doc="undefined"!=typeof document?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const o="svg"===t?doc.createElementNS(svgNS,e):"mathml"===t?doc.createElementNS(mathmlNS,e):n?doc.createElement(e,{is:n}):doc.createElement(e);return"select"===e&&r&&null!=r.multiple&&o.setAttribute("multiple",r.multiple),o},createText:e=>doc.createTextNode(e),createComment:e=>doc.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>doc.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,o,i){const a=n?n.previousSibling:t.lastChild;if(o&&(o===i||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),n),o!==i&&(o=o.nextSibling););else{templateContainer.innerHTML="svg"===r?`<svg>${e}</svg>`:"mathml"===r?`<math>${e}</math>`:e;const o=templateContainer.content;if("svg"===r||"mathml"===r){const e=o.firstChild;for(;e.firstChild;)o.appendChild(e.firstChild);o.removeChild(e)}t.insertBefore(o,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},TRANSITION="transition",ANIMATION="animation",vtcKey=Symbol("_vtc"),Transition=(e,{slots:t})=>h$1(BaseTransition,resolveTransitionProps(e),t);Transition.displayName="Transition";const DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Transition.props=extend$2({},BaseTransitionPropsValidators,DOMTransitionPropsValidators);const callHook=(e,t=[])=>{isArray$3(e)?e.forEach((e=>e(...t))):e&&e(...t)},hasExplicitCallback=e=>!!e&&(isArray$3(e)?e.some((e=>e.length>1)):e.length>1);function resolveTransitionProps(e){const t={};for(const R in e)R in DOMTransitionPropsValidators||(t[R]=e[R]);if(!1===e.css)return t;const{name:n="v",type:r,duration:o,enterFromClass:i=`${n}-enter-from`,enterActiveClass:a=`${n}-enter-active`,enterToClass:s=`${n}-enter-to`,appearFromClass:c=i,appearActiveClass:l=a,appearToClass:u=s,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:A=`${n}-leave-active`,leaveToClass:p=`${n}-leave-to`}=e,h=normalizeDuration(o),f=h&&h[0],g=h&&h[1],{onBeforeEnter:m,onEnter:_,onEnterCancelled:E,onLeave:v,onLeaveCancelled:y,onBeforeAppear:b=m,onAppear:C=_,onAppearCancelled:S=E}=t,w=(e,t,n)=>{removeTransitionClass(e,t?u:s),removeTransitionClass(e,t?l:a),n&&n()},T=(e,t)=>{e._isLeaving=!1,removeTransitionClass(e,d),removeTransitionClass(e,p),removeTransitionClass(e,A),t&&t()},I=e=>(t,n)=>{const o=e?C:_,a=()=>w(t,e,n);callHook(o,[t,a]),nextFrame((()=>{removeTransitionClass(t,e?c:i),addTransitionClass(t,e?u:s),hasExplicitCallback(o)||whenTransitionEnds(t,r,f,a)}))};return extend$2(t,{onBeforeEnter(e){callHook(m,[e]),addTransitionClass(e,i),addTransitionClass(e,a)},onBeforeAppear(e){callHook(b,[e]),addTransitionClass(e,c),addTransitionClass(e,l)},onEnter:I(!1),onAppear:I(!0),onLeave(e,t){e._isLeaving=!0;const n=()=>T(e,t);addTransitionClass(e,d),forceReflow(),addTransitionClass(e,A),nextFrame((()=>{e._isLeaving&&(removeTransitionClass(e,d),addTransitionClass(e,p),hasExplicitCallback(v)||whenTransitionEnds(e,r,g,n))})),callHook(v,[e,n])},onEnterCancelled(e){w(e,!1),callHook(E,[e])},onAppearCancelled(e){w(e,!0),callHook(S,[e])},onLeaveCancelled(e){T(e),callHook(y,[e])}})}function normalizeDuration(e){if(null==e)return null;if(isObject$4(e))return[NumberOf(e.enter),NumberOf(e.leave)];{const t=NumberOf(e);return[t,t]}}function NumberOf(e){return toNumber(e)}function addTransitionClass(e,t){t.split(/\s+/).forEach((t=>t&&e.classList.add(t))),(e[vtcKey]||(e[vtcKey]=new Set)).add(t)}function removeTransitionClass(e,t){t.split(/\s+/).forEach((t=>t&&e.classList.remove(t)));const n=e[vtcKey];n&&(n.delete(t),n.size||(e[vtcKey]=void 0))}function nextFrame(e){requestAnimationFrame((()=>{requestAnimationFrame(e)}))}let endId=0;function whenTransitionEnds(e,t,n,r){const o=e._endId=++endId,i=()=>{o===e._endId&&r()};if(n)return setTimeout(i,n);const{type:a,timeout:s,propCount:c}=getTransitionInfo(e,t);if(!a)return r();const l=a+"end";let u=0;const d=()=>{e.removeEventListener(l,A),i()},A=t=>{t.target===e&&++u>=c&&d()};setTimeout((()=>{u<c&&d()}),s+1),e.addEventListener(l,A)}function getTransitionInfo(e,t){const n=window.getComputedStyle(e),r=e=>(n[e]||"").split(", "),o=r(`${TRANSITION}Delay`),i=r(`${TRANSITION}Duration`),a=getTimeout(o,i),s=r(`${ANIMATION}Delay`),c=r(`${ANIMATION}Duration`),l=getTimeout(s,c);let u=null,d=0,A=0;t===TRANSITION?a>0&&(u=TRANSITION,d=a,A=i.length):t===ANIMATION?l>0&&(u=ANIMATION,d=l,A=c.length):(d=Math.max(a,l),u=d>0?a>l?TRANSITION:ANIMATION:null,A=u?u===TRANSITION?i.length:c.length:0);return{type:u,timeout:d,propCount:A,hasTransform:u===TRANSITION&&/\b(transform|all)(,|$)/.test(r(`${TRANSITION}Property`).toString())}}function getTimeout(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map(((t,n)=>toMs(t)+toMs(e[n]))))}function toMs(e){return"auto"===e?0:1e3*Number(e.slice(0,-1).replace(",","."))}function forceReflow(){return document.body.offsetHeight}function patchClass(e,t,n){const{__wxsAddClass:r,__wxsRemoveClass:o}=e;o&&o.length&&(t=(t||"").split(/\s+/).filter((e=>-1===o.indexOf(e))).join(" "),o.length=0),r&&r.length&&(t=(t||"")+" "+r.join(" "));const i=e[vtcKey];i&&(t=(t?[t,...i]:[...i]).join(" ")),null==t?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const vShowOriginalDisplay=Symbol("_vod"),vShowHidden=Symbol("_vsh"),vShow={beforeMount(e,{value:t},{transition:n}){e[vShowOriginalDisplay]="none"===e.style.display?"":e.style.display,n&&t?n.beforeEnter(e):setDisplay(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!=!n&&(r?t?(r.beforeEnter(e),setDisplay(e,!0),r.enter(e)):r.leave(e,(()=>{setDisplay(e,!1)})):setDisplay(e,t))},beforeUnmount(e,{value:t}){setDisplay(e,t)}};function setDisplay(e,t){e.style.display=t?e[vShowOriginalDisplay]:"none",e[vShowHidden]=!t}const CSS_VAR_TEXT=Symbol(""),displayRE=/(^|;)\s*display\s*:/;function patchStyle(e,t,n){const r=e.style,o=isString$3(n);let i=!1;if(n&&!o){if(t)if(isString$3(t))for(const e of t.split(";")){const t=e.slice(0,e.indexOf(":")).trim();null==n[t]&&setStyle(r,t,"")}else for(const e in t)null==n[e]&&setStyle(r,e,"");for(const e in n)"display"===e&&(i=!0),setStyle(r,e,n[e])}else if(o){if(t!==n){const e=r[CSS_VAR_TEXT];e&&(n+=";"+e),r.cssText=n,i=displayRE.test(n)}}else t&&e.removeAttribute("style");vShowOriginalDisplay in e&&(e[vShowOriginalDisplay]=i?r.display:"",e[vShowHidden]&&(r.display="none"));const{__wxsStyle:a}=e;if(a)for(const s in a)setStyle(r,s,a[s])}const importantRE=/\s*!important$/;function setStyle(e,t,n){if(isArray$3(n))n.forEach((n=>setStyle(e,t,n)));else if(null==n&&(n=""),n=normalizeRpx(n),t.startsWith("--"))e.setProperty(t,n);else{const r=autoPrefix(e,t);importantRE.test(n)?e.setProperty(hyphenate(r),n.replace(importantRE,""),"important"):e[r]=n}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(e,t){const n=prefixCache[t];if(n)return n;let r=camelize(t);if("filter"!==r&&r in e)return prefixCache[t]=r;r=capitalize$2(r);for(let o=0;o<prefixes.length;o++){const n=prefixes[o]+r;if(n in e)return prefixCache[t]=n}return t}const{unit:unit$a,unitRatio:unitRatio,unitPrecision:unitPrecision}=defaultRpx2Unit,rpx2Unit=createRpx2Unit(unit$a,unitRatio,unitPrecision),normalizeRpx=e=>isString$3(e)?rpx2Unit(e):e,xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(e,t,n,r,o){if(r&&t.startsWith("xlink:"))null==n?e.removeAttributeNS(xlinkNS,t.slice(6,t.length)):e.setAttributeNS(xlinkNS,t,n);else{const r=isSpecialBooleanAttr(t);null==n||r&&!includeBooleanAttr(n)?e.removeAttribute(t):e.setAttribute(t,r?"":n)}}function patchDOMProp(e,t,n,r,o,i,a){if("innerHTML"===t||"textContent"===t)return r&&a(r,o,i),void(e[t]=null==n?"":n);const s=e.tagName;if("value"===t&&"PROGRESS"!==s&&!s.includes("-")){const r=null==n?"":n;return("OPTION"===s?e.getAttribute("value")||"":e.value)===r&&"_value"in e||(e.value=r),null==n&&e.removeAttribute(t),void(e._value=n)}let c=!1;if(""===n||null==n){const r=typeof e[t];"boolean"===r?n=includeBooleanAttr(n):null==n&&"string"===r?(n="",c=!0):"number"===r&&(n=0,c=!0)}try{e[t]=n}catch(l){}c&&e.removeAttribute(t)}function addEventListener$1(e,t,n,r){e.addEventListener(t,n,r)}function removeEventListener$1(e,t,n,r){e.removeEventListener(t,n,r)}const veiKey=Symbol("_vei");function patchEvent(e,t,n,r,o=null){const i=e[veiKey]||(e[veiKey]={}),a=i[t];if(r&&a)a.value=r;else{const[n,s]=parseName(t);if(r){addEventListener$1(e,n,i[t]=createInvoker(r,o),s)}else a&&(removeEventListener$1(e,n,a,s),i[t]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(e){let t;if(optionsModifierRE.test(e)){let n;for(t={};n=e.match(optionsModifierRE);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[":"===e[2]?e.slice(3):hyphenate(e.slice(2)),t]}let cachedNow=0;const p$1=Promise.resolve(),getNow=()=>cachedNow||(p$1.then((()=>cachedNow=0)),cachedNow=Date.now());function createInvoker(e,t){const n=e=>{if(e._vts){if(e._vts<=n.attached)return}else e._vts=Date.now();const r=t&&t.proxy,o=r&&r.$nne,{value:i}=n;if(o&&isArray$3(i)){const n=patchStopImmediatePropagation(e,i);for(let r=0;r<n.length;r++){const i=n[r];callWithAsyncErrorHandling(i,t,5,i.__wwe?[e]:o(e))}}else callWithAsyncErrorHandling(patchStopImmediatePropagation(e,n.value),t,5,o&&!i.__wwe?o(e,i,t):[e])};return n.value=e,n.attached=getNow(),n}function patchStopImmediatePropagation(e,t){if(isArray$3(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map((e=>{const t=t=>!t._stopped&&e&&e(t);return t.__wwe=e.__wwe,t}))}return t}function patchWxs(e,t,n,r=null){if(!n||!r)return;const o=t.replace("change:",""),{attrs:i}=r,a=i[o],s=(e.__wxsProps||(e.__wxsProps={}))[o];if(s===a)return;e.__wxsProps[o]=a;const c=r.proxy;nextTick((()=>{n(a,s,c.$gcd(c,!0),c.$gcd(c,!1))}))}const isNativeOn=e=>111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,forcePatchProp=(e,t)=>0===t.indexOf("change:")||("class"===t&&e.__wxsClassChanged?(e.__wxsClassChanged=!1,!0):!("style"!==t||!e.__wxsStyleChanged)&&(e.__wxsStyleChanged=!1,!0)),patchProp=(e,t,n,r,o,i,a,s,c)=>{if(0===t.indexOf("change:"))return patchWxs(e,t,r,a);const l="svg"===o;"class"===t?patchClass(e,r,l):"style"===t?patchStyle(e,n,r):isOn(t)?isModelListener(t)||patchEvent(e,t,n,r,a):("."===t[0]?(t=t.slice(1),1):"^"===t[0]?(t=t.slice(1),0):shouldSetAsProp(e,t,r,l))?patchDOMProp(e,t,r,i,a,s,c):("true-value"===t?e._trueValue=r:"false-value"===t&&(e._falseValue=r),patchAttr(e,t,r,l))};function shouldSetAsProp(e,t,n,r){if(r)return"innerHTML"===t||"textContent"===t||!!(t in e&&isNativeOn(t)&&isFunction$2(n));if("spellcheck"===t||"draggable"===t||"translate"===t)return!1;if("form"===t)return!1;if("list"===t&&"INPUT"===e.tagName)return!1;if("type"===t&&"TEXTAREA"===e.tagName)return!1;if("width"===t||"height"===t){const t=e.tagName;if("IMG"===t||"VIDEO"===t||"CANVAS"===t||"SOURCE"===t)return!1}return(!isNativeOn(t)||!isString$3(n))&&t in e}const systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&0!==e.button,middle:e=>"button"in e&&1!==e.button,right:e=>"button"in e&&2!==e.button,exact:(e,t)=>systemModifiers.some((n=>e[`${n}Key`]&&!t.includes(n)))},withModifiers=(e,t)=>{const n=e._withMods||(e._withMods={}),r=t.join(".");return n[r]||(n[r]=(n,...r)=>{for(let e=0;e<t.length;e++){const r=modifierGuards[t[e]];if(r&&r(n,t))return}return e(n,...r)})},rendererOptions=extend$2({patchProp:patchProp,forcePatchProp:forcePatchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const render=(...e)=>{ensureRenderer().render(...e)},createApp$1=(...e)=>{const t=ensureRenderer().createApp(...e),{mount:n}=t;return t.mount=e=>{const r=normalizeContainer(e);if(!r)return;const o=t._component;isFunction$2(o)||o.render||o.template||(o.template=r.innerHTML),r.innerHTML="";const i=n(r,!1,resolveRootNamespace(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),i},t};function resolveRootNamespace(e){return e instanceof SVGElement?"svg":"function"==typeof MathMLElement&&e instanceof MathMLElement?"mathml":void 0}function normalizeContainer(e){if(isString$3(e)){return document.querySelector(e)}return e}
/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const isBrowser="undefined"!=typeof document;function isRouteComponent(e){return"object"==typeof e||"displayName"in e||"props"in e||"__vccOpts"in e}function isESModule(e){return e.__esModule||"Module"===e[Symbol.toStringTag]||e.default&&isRouteComponent(e.default)}const assign$2=Object.assign;function applyToParams(e,t){const n={};for(const r in t){const o=t[r];n[r]=isArray$2(o)?o.map(e):e(o)}return n}const noop$3=()=>{},isArray$2=Array.isArray,HASH_RE=/#/g,AMPERSAND_RE=/&/g,SLASH_RE=/\//g,EQUAL_RE=/=/g,IM_RE=/\?/g,PLUS_RE=/\+/g,ENC_BRACKET_OPEN_RE=/%5B/g,ENC_BRACKET_CLOSE_RE=/%5D/g,ENC_CARET_RE=/%5E/g,ENC_BACKTICK_RE=/%60/g,ENC_CURLY_OPEN_RE=/%7B/g,ENC_PIPE_RE=/%7C/g,ENC_CURLY_CLOSE_RE=/%7D/g,ENC_SPACE_RE=/%20/g;function commonEncode(e){return encodeURI(""+e).replace(ENC_PIPE_RE,"|").replace(ENC_BRACKET_OPEN_RE,"[").replace(ENC_BRACKET_CLOSE_RE,"]")}function encodeHash(e){return commonEncode(e).replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryValue(e){return commonEncode(e).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryKey(e){return encodeQueryValue(e).replace(EQUAL_RE,"%3D")}function encodePath(e){return commonEncode(e).replace(HASH_RE,"%23").replace(IM_RE,"%3F")}function encodeParam(e){return null==e?"":encodePath(e).replace(SLASH_RE,"%2F")}function decode$2(e){try{return decodeURIComponent(""+e)}catch(t){}return""+e}const TRAILING_SLASH_RE=/\/$/,removeTrailingSlash=e=>e.replace(TRAILING_SLASH_RE,"");function parseURL(e,t,n="/"){let r,o={},i="",a="";const s=t.indexOf("#");let c=t.indexOf("?");return s<c&&s>=0&&(c=-1),c>-1&&(r=t.slice(0,c),i=t.slice(c+1,s>-1?s:t.length),o=e(i)),s>-1&&(r=r||t.slice(0,s),a=t.slice(s,t.length)),r=resolveRelativePath(null!=r?r:t,n),{fullPath:r+(i&&"?")+i+a,path:r,query:o,hash:decode$2(a)}}function stringifyURL(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function stripBase(e,t){return t&&e.toLowerCase().startsWith(t.toLowerCase())?e.slice(t.length)||"/":e}function isSameRouteLocation(e,t,n){const r=t.matched.length-1,o=n.matched.length-1;return r>-1&&r===o&&isSameRouteRecord(t.matched[r],n.matched[o])&&isSameRouteLocationParams(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function isSameRouteRecord(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function isSameRouteLocationParams(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!isSameRouteLocationParamsValue(e[n],t[n]))return!1;return!0}function isSameRouteLocationParamsValue(e,t){return isArray$2(e)?isEquivalentArray(e,t):isArray$2(t)?isEquivalentArray(t,e):e===t}function isEquivalentArray(e,t){return isArray$2(t)?e.length===t.length&&e.every(((e,n)=>e===t[n])):1===e.length&&e[0]===t}function resolveRelativePath(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/"),o=r[r.length-1];".."!==o&&"."!==o||r.push("");let i,a,s=n.length-1;for(i=0;i<r.length;i++)if(a=r[i],"."!==a){if(".."!==a)break;s>1&&s--}return n.slice(0,s).join("/")+"/"+r.slice(i).join("/")}const START_LOCATION_NORMALIZED={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var NavigationType,NavigationType2,NavigationDirection,NavigationDirection2;function normalizeBase(e){if(!e)if(isBrowser){const t=document.querySelector("base");e=(e=t&&t.getAttribute("href")||"/").replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return"/"!==e[0]&&"#"!==e[0]&&(e="/"+e),removeTrailingSlash(e)}NavigationType2=NavigationType||(NavigationType={}),NavigationType2.pop="pop",NavigationType2.push="push",NavigationDirection2=NavigationDirection||(NavigationDirection={}),NavigationDirection2.back="back",NavigationDirection2.forward="forward",NavigationDirection2.unknown="";const BEFORE_HASH_RE=/^[^#]+#/;function createHref(e,t){return e.replace(BEFORE_HASH_RE,"#")+t}function getElementPosition(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const computeScrollPosition=()=>({left:window.scrollX,top:window.scrollY});function scrollToPosition(e){let t;if("el"in e){const n=e.el,r="string"==typeof n&&n.startsWith("#"),o="string"==typeof n?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!o)return;t=getElementPosition(o,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(null!=t.left?t.left:window.scrollX,null!=t.top?t.top:window.scrollY)}function getScrollKey(e,t){return(history.state?history.state.position-t:-1)+e}const scrollPositions=new Map;function saveScrollPosition(e,t){scrollPositions.set(e,t)}function getSavedScrollPosition(e){const t=scrollPositions.get(e);return scrollPositions.delete(e),t}let createBaseLocation=()=>location.protocol+"//"+location.host;function createCurrentLocation(e,t){const{pathname:n,search:r,hash:o}=t,i=e.indexOf("#");if(i>-1){let t=o.includes(e.slice(i))?e.slice(i).length:1,n=o.slice(t);return"/"!==n[0]&&(n="/"+n),stripBase(n,"")}return stripBase(n,e)+r+o}function useHistoryListeners(e,t,n,r){let o=[],i=[],a=null;const s=({state:i})=>{const s=createCurrentLocation(e,location),c=n.value,l=t.value;let u=0;if(i){if(n.value=s,t.value=i,a&&a===c)return void(a=null);u=l?i.position-l.position:0}else r(s);o.forEach((e=>{e(n.value,c,{delta:u,type:NavigationType.pop,direction:u?u>0?NavigationDirection.forward:NavigationDirection.back:NavigationDirection.unknown})}))};function c(){const{history:e}=window;e.state&&e.replaceState(assign$2({},e.state,{scroll:computeScrollPosition()}),"")}return window.addEventListener("popstate",s),window.addEventListener("beforeunload",c,{passive:!0}),{pauseListeners:function(){a=n.value},listen:function(e){o.push(e);const t=()=>{const t=o.indexOf(e);t>-1&&o.splice(t,1)};return i.push(t),t},destroy:function(){for(const e of i)e();i=[],window.removeEventListener("popstate",s),window.removeEventListener("beforeunload",c)}}}function buildState(e,t,n,r=!1,o=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:o?computeScrollPosition():null}}function useHistoryStateNavigation(e){const{history:t,location:n}=window,r={value:createCurrentLocation(e,n)},o={value:t.state};function i(r,i,a){const s=e.indexOf("#"),c=s>-1?(n.host&&document.querySelector("base")?e:e.slice(s))+r:createBaseLocation()+e+r;try{t[a?"replaceState":"pushState"](i,"",c),o.value=i}catch(l){console.error(l),n[a?"replace":"assign"](c)}}return o.value||i(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0),{location:r,state:o,push:function(e,n){const a=assign$2({},o.value,t.state,{forward:e,scroll:computeScrollPosition()});i(a.current,a,!0),i(e,assign$2({},buildState(r.value,e,null),{position:a.position+1},n),!1),r.value=e},replace:function(e,n){i(e,assign$2({},t.state,buildState(o.value.back,e,o.value.forward,!0),n,{position:o.value.position}),!0),r.value=e}}}function createWebHistory(e){const t=useHistoryStateNavigation(e=normalizeBase(e)),n=useHistoryListeners(e,t.state,t.location,t.replace);const r=assign$2({location:"",base:e,go:function(e,t=!0){t||n.pauseListeners(),history.go(e)},createHref:createHref.bind(null,e)},t,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>t.state.value}),r}function createWebHashHistory(e){return(e=location.host?e||location.pathname+location.search:"").includes("#")||(e+="#"),createWebHistory(e)}function isRouteLocation(e){return"string"==typeof e||e&&"object"==typeof e}function isRouteName(e){return"string"==typeof e||"symbol"==typeof e}const NavigationFailureSymbol=Symbol("");var NavigationFailureType,NavigationFailureType2;function createRouterError(e,t){return assign$2(new Error,{type:e,[NavigationFailureSymbol]:!0},t)}function isNavigationFailure(e,t){return e instanceof Error&&NavigationFailureSymbol in e&&(null==t||!!(e.type&t))}NavigationFailureType2=NavigationFailureType||(NavigationFailureType={}),NavigationFailureType2[NavigationFailureType2.aborted=4]="aborted",NavigationFailureType2[NavigationFailureType2.cancelled=8]="cancelled",NavigationFailureType2[NavigationFailureType2.duplicated=16]="duplicated";const BASE_PARAM_PATTERN="[^/]+?",BASE_PATH_PARSER_OPTIONS={sensitive:!1,strict:!1,start:!0,end:!0},REGEX_CHARS_RE=/[.+*?^${}()[\]/\\]/g;function tokensToParser(e,t){const n=assign$2({},BASE_PATH_PARSER_OPTIONS,t),r=[];let o=n.start?"^":"";const i=[];for(const c of e){const e=c.length?[]:[90];n.strict&&!c.length&&(o+="/");for(let t=0;t<c.length;t++){const r=c[t];let a=40+(n.sensitive?.25:0);if(0===r.type)t||(o+="/"),o+=r.value.replace(REGEX_CHARS_RE,"\\$&"),a+=40;else if(1===r.type){const{value:e,repeatable:n,optional:l,regexp:u}=r;i.push({name:e,repeatable:n,optional:l});const d=u||BASE_PARAM_PATTERN;if(d!==BASE_PARAM_PATTERN){a+=10;try{new RegExp(`(${d})`)}catch(s){throw new Error(`Invalid custom RegExp for param "${e}" (${d}): `+s.message)}}let A=n?`((?:${d})(?:/(?:${d}))*)`:`(${d})`;t||(A=l&&c.length<2?`(?:/${A})`:"/"+A),l&&(A+="?"),o+=A,a+=20,l&&(a+=-8),n&&(a+=-20),".*"===d&&(a+=-50)}e.push(a)}r.push(e)}if(n.strict&&n.end){const e=r.length-1;r[e][r[e].length-1]+=.7000000000000001}n.strict||(o+="/?"),n.end?o+="$":n.strict&&!o.endsWith("/")&&(o+="(?:/|$)");const a=new RegExp(o,n.sensitive?"":"i");return{re:a,score:r,keys:i,parse:function(e){const t=e.match(a),n={};if(!t)return null;for(let r=1;r<t.length;r++){const e=t[r]||"",o=i[r-1];n[o.name]=e&&o.repeatable?e.split("/"):e}return n},stringify:function(t){let n="",r=!1;for(const o of e){r&&n.endsWith("/")||(n+="/"),r=!1;for(const e of o)if(0===e.type)n+=e.value;else if(1===e.type){const{value:i,repeatable:a,optional:s}=e,c=i in t?t[i]:"";if(isArray$2(c)&&!a)throw new Error(`Provided param "${i}" is an array but it is not repeatable (* or + modifiers)`);const l=isArray$2(c)?c.join("/"):c;if(!l){if(!s)throw new Error(`Missing required param "${i}"`);o.length<2&&(n.endsWith("/")?n=n.slice(0,-1):r=!0)}n+=l}}return n||"/"}}}function compareScoreArray(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?1===e.length&&80===e[0]?-1:1:e.length>t.length?1===t.length&&80===t[0]?1:-1:0}function comparePathParserScore(e,t){let n=0;const r=e.score,o=t.score;for(;n<r.length&&n<o.length;){const e=compareScoreArray(r[n],o[n]);if(e)return e;n++}if(1===Math.abs(o.length-r.length)){if(isLastScoreNegative(r))return 1;if(isLastScoreNegative(o))return-1}return o.length-r.length}function isLastScoreNegative(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const ROOT_TOKEN={type:0,value:""},VALID_PARAM_RE=/[a-zA-Z0-9_]/;function tokenizePath(e){if(!e)return[[]];if("/"===e)return[[ROOT_TOKEN]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(e){throw new Error(`ERR (${n})/"${l}": ${e}`)}let n=0,r=n;const o=[];let i;function a(){i&&o.push(i),i=[]}let s,c=0,l="",u="";function d(){l&&(0===n?i.push({type:0,value:l}):1===n||2===n||3===n?(i.length>1&&("*"===s||"+"===s)&&t(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:l,regexp:u,repeatable:"*"===s||"+"===s,optional:"*"===s||"?"===s})):t("Invalid state to consume buffer"),l="")}function A(){l+=s}for(;c<e.length;)if(s=e[c++],"\\"!==s||2===n)switch(n){case 0:"/"===s?(l&&d(),a()):":"===s?(d(),n=1):A();break;case 4:A(),n=r;break;case 1:"("===s?n=2:VALID_PARAM_RE.test(s)?A():(d(),n=0,"*"!==s&&"?"!==s&&"+"!==s&&c--);break;case 2:")"===s?"\\"==u[u.length-1]?u=u.slice(0,-1)+s:n=3:u+=s;break;case 3:d(),n=0,"*"!==s&&"?"!==s&&"+"!==s&&c--,u="";break;default:t("Unknown state")}else r=n,n=4;return 2===n&&t(`Unfinished custom RegExp for param "${l}"`),d(),a(),o}function createRouteRecordMatcher(e,t,n){const r=tokensToParser(tokenizePath(e.path),n),o=assign$2(r,{record:e,parent:t,children:[],alias:[]});return t&&!o.record.aliasOf==!t.record.aliasOf&&t.children.push(o),o}function createRouterMatcher(e,t){const n=[],r=new Map;function o(e,n,r){const s=!r,c=normalizeRouteRecord(e);c.aliasOf=r&&r.record;const l=mergeOptions(t,e),u=[c];if("alias"in e){const t="string"==typeof e.alias?[e.alias]:e.alias;for(const e of t)u.push(normalizeRouteRecord(assign$2({},c,{components:r?r.record.components:c.components,path:e,aliasOf:r?r.record:c})))}let d,A;for(const t of u){const{path:u}=t;if(n&&"/"!==u[0]){const e=n.record.path,r="/"===e[e.length-1]?"":"/";t.path=n.record.path+(u&&r+u)}if(d=createRouteRecordMatcher(t,n,l),r?r.alias.push(d):(A=A||d,A!==d&&A.alias.push(d),s&&e.name&&!isAliasRecord(d)&&i(e.name)),isMatchable(d)&&a(d),c.children){const e=c.children;for(let t=0;t<e.length;t++)o(e[t],d,r&&r.children[t])}r=r||d}return A?()=>{i(A)}:noop$3}function i(e){if(isRouteName(e)){const t=r.get(e);t&&(r.delete(e),n.splice(n.indexOf(t),1),t.children.forEach(i),t.alias.forEach(i))}else{const t=n.indexOf(e);t>-1&&(n.splice(t,1),e.record.name&&r.delete(e.record.name),e.children.forEach(i),e.alias.forEach(i))}}function a(e){const t=findInsertionIndex(e,n);n.splice(t,0,e),e.record.name&&!isAliasRecord(e)&&r.set(e.record.name,e)}return t=mergeOptions({strict:!1,end:!0,sensitive:!1},t),e.forEach((e=>o(e))),{addRoute:o,resolve:function(e,t){let o,i,a,s={};if("name"in e&&e.name){if(o=r.get(e.name),!o)throw createRouterError(1,{location:e});a=o.record.name,s=assign$2(paramsFromLocation(t.params,o.keys.filter((e=>!e.optional)).concat(o.parent?o.parent.keys.filter((e=>e.optional)):[]).map((e=>e.name))),e.params&&paramsFromLocation(e.params,o.keys.map((e=>e.name)))),i=o.stringify(s)}else if(null!=e.path)i=e.path,o=n.find((e=>e.re.test(i))),o&&(s=o.parse(i),a=o.record.name);else{if(o=t.name?r.get(t.name):n.find((e=>e.re.test(t.path))),!o)throw createRouterError(1,{location:e,currentLocation:t});a=o.record.name,s=assign$2({},t.params,e.params),i=o.stringify(s)}const c=[];let l=o;for(;l;)c.unshift(l.record),l=l.parent;return{name:a,path:i,params:s,matched:c,meta:mergeMetaFields(c)}},removeRoute:i,clearRoutes:function(){n.length=0,r.clear()},getRoutes:function(){return n},getRecordMatcher:function(e){return r.get(e)}}}function paramsFromLocation(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function normalizeRouteRecord(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:normalizeRecordProps(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function normalizeRecordProps(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]="object"==typeof n?n[r]:n;return t}function isAliasRecord(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function mergeMetaFields(e){return e.reduce(((e,t)=>assign$2(e,t.meta)),{})}function mergeOptions(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function findInsertionIndex(e,t){let n=0,r=t.length;for(;n!==r;){const o=n+r>>1;comparePathParserScore(e,t[o])<0?r=o:n=o+1}const o=getInsertionAncestor(e);return o&&(r=t.lastIndexOf(o,r-1)),r}function getInsertionAncestor(e){let t=e;for(;t=t.parent;)if(isMatchable(t)&&0===comparePathParserScore(e,t))return t}function isMatchable({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function parseQuery(e){const t={};if(""===e||"?"===e)return t;const n=("?"===e[0]?e.slice(1):e).split("&");for(let r=0;r<n.length;++r){const e=n[r].replace(PLUS_RE," "),o=e.indexOf("="),i=decode$2(o<0?e:e.slice(0,o)),a=o<0?null:decode$2(e.slice(o+1));if(i in t){let e=t[i];isArray$2(e)||(e=t[i]=[e]),e.push(a)}else t[i]=a}return t}function stringifyQuery$1(e){let t="";for(let n in e){const r=e[n];if(n=encodeQueryKey(n),null==r){void 0!==r&&(t+=(t.length?"&":"")+n);continue}(isArray$2(r)?r.map((e=>e&&encodeQueryValue(e))):[r&&encodeQueryValue(r)]).forEach((e=>{void 0!==e&&(t+=(t.length?"&":"")+n,null!=e&&(t+="="+e))}))}return t}function normalizeQuery(e){const t={};for(const n in e){const r=e[n];void 0!==r&&(t[n]=isArray$2(r)?r.map((e=>null==e?null:""+e)):null==r?r:""+r)}return t}const matchedRouteKey=Symbol(""),viewDepthKey=Symbol(""),routerKey=Symbol(""),routeLocationKey=Symbol(""),routerViewLocationKey=Symbol("");function useCallbacks(){let e=[];return{add:function(t){return e.push(t),()=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)}},list:()=>e.slice(),reset:function(){e=[]}}}function guardToPromiseFn(e,t,n,r,o,i=e=>e()){const a=r&&(r.enterCallbacks[o]=r.enterCallbacks[o]||[]);return()=>new Promise(((s,c)=>{const l=e=>{!1===e?c(createRouterError(4,{from:n,to:t})):e instanceof Error?c(e):isRouteLocation(e)?c(createRouterError(2,{from:t,to:e})):(a&&r.enterCallbacks[o]===a&&"function"==typeof e&&a.push(e),s())},u=i((()=>e.call(r&&r.instances[o],t,n,l)));let d=Promise.resolve(u);e.length<3&&(d=d.then(l)),d.catch((e=>c(e)))}))}function extractComponentsGuards(e,t,n,r,o=e=>e()){const i=[];for(const a of e)for(const e in a.components){let s=a.components[e];if("beforeRouteEnter"===t||a.instances[e])if(isRouteComponent(s)){const c=(s.__vccOpts||s)[t];c&&i.push(guardToPromiseFn(c,n,r,a,e,o))}else{let c=s();i.push((()=>c.then((i=>{if(!i)throw new Error(`Couldn't resolve component "${e}" at "${a.path}"`);const s=isESModule(i)?i.default:i;a.mods[e]=i,a.components[e]=s;const c=(s.__vccOpts||s)[t];return c&&guardToPromiseFn(c,n,r,a,e,o)()}))))}}return i}function useLink(e){const t=inject(routerKey),n=inject(routeLocationKey),r=computed((()=>{const n=unref(e.to);return t.resolve(n)})),o=computed((()=>{const{matched:e}=r.value,{length:t}=e,o=e[t-1],i=n.matched;if(!o||!i.length)return-1;const a=i.findIndex(isSameRouteRecord.bind(null,o));if(a>-1)return a;const s=getOriginalPath(e[t-2]);return t>1&&getOriginalPath(o)===s&&i[i.length-1].path!==s?i.findIndex(isSameRouteRecord.bind(null,e[t-2])):a})),i=computed((()=>o.value>-1&&includesParams(n.params,r.value.params))),a=computed((()=>o.value>-1&&o.value===n.matched.length-1&&isSameRouteLocationParams(n.params,r.value.params)));return{route:r,href:computed((()=>r.value.href)),isActive:i,isExactActive:a,navigate:function(n={}){if(guardEvent(n)){const n=t[unref(e.replace)?"replace":"push"](unref(e.to)).catch(noop$3);return e.viewTransition&&"undefined"!=typeof document&&"startViewTransition"in document&&document.startViewTransition((()=>n)),n}return Promise.resolve()}}}function preferSingleVNode(e){return 1===e.length?e[0]:e}const RouterLinkImpl=defineComponent({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:useLink,setup(e,{slots:t}){const n=reactive(useLink(e)),{options:r}=inject(routerKey),o=computed((()=>({[getLinkClass(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[getLinkClass(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive})));return()=>{const r=t.default&&preferSingleVNode(t.default(n));return e.custom?r:h$1("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:o.value},r)}}}),RouterLink=RouterLinkImpl;function guardEvent(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey||e.defaultPrevented||void 0!==e.button&&0!==e.button)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function includesParams(e,t){for(const n in t){const r=t[n],o=e[n];if("string"==typeof r){if(r!==o)return!1}else if(!isArray$2(o)||o.length!==r.length||r.some(((e,t)=>e!==o[t])))return!1}return!0}function getOriginalPath(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const getLinkClass=(e,t,n)=>null!=e?e:null!=t?t:n,RouterViewImpl=defineComponent({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=inject(routerViewLocationKey),o=computed((()=>e.route||r.value)),i=inject(viewDepthKey,0),a=computed((()=>{let e=unref(i);const{matched:t}=o.value;let n;for(;(n=t[e])&&!n.components;)e++;return e})),s=computed((()=>o.value.matched[a.value]));provide(viewDepthKey,computed((()=>a.value+1))),provide(matchedRouteKey,s),provide(routerViewLocationKey,o);const c=ref();return watch((()=>[c.value,s.value,e.name]),(([e,t,n],[r,o,i])=>{t&&(t.instances[n]=e,o&&o!==t&&e&&e===r&&(t.leaveGuards.size||(t.leaveGuards=o.leaveGuards),t.updateGuards.size||(t.updateGuards=o.updateGuards))),!e||!t||o&&isSameRouteRecord(t,o)&&r||(t.enterCallbacks[n]||[]).forEach((t=>t(e)))}),{flush:"post"}),()=>{const r=o.value,i=e.name,a=s.value,l=a&&a.components[i];if(!l)return normalizeSlot(n.default,{Component:l,route:r});const u=a.props[i],d=u?!0===u?r.params:"function"==typeof u?u(r):u:null,A=h$1(l,assign$2({},d,t,{onVnodeUnmounted:e=>{e.component.isUnmounted&&(a.instances[i]=null)},ref:c}));return normalizeSlot(n.default,{Component:A,route:r})||A}}});function normalizeSlot(e,t){if(!e)return null;const n=e(t);return 1===n.length?n[0]:n}const RouterView=RouterViewImpl;function createRouter(e){const t=createRouterMatcher(e.routes,e),n=e.parseQuery||parseQuery,r=e.stringifyQuery||stringifyQuery$1,o=e.history,i=useCallbacks(),a=useCallbacks(),s=useCallbacks(),c=shallowRef(START_LOCATION_NORMALIZED);let l=START_LOCATION_NORMALIZED;isBrowser&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=applyToParams.bind(null,(e=>""+e)),d=applyToParams.bind(null,encodeParam),A=applyToParams.bind(null,decode$2);function p(e,i){if(i=assign$2({},i||c.value),"string"==typeof e){const r=parseURL(n,e,i.path),a=t.resolve({path:r.path},i),s=o.createHref(r.fullPath);return assign$2(r,a,{params:A(a.params),hash:decode$2(r.hash),redirectedFrom:void 0,href:s})}let a;if(null!=e.path)a=assign$2({},e,{path:parseURL(n,e.path,i.path).path});else{const t=assign$2({},e.params);for(const e in t)null==t[e]&&delete t[e];a=assign$2({},e,{params:d(t)}),i.params=d(i.params)}const s=t.resolve(a,i),l=e.hash||"";s.params=u(A(s.params));const p=stringifyURL(r,assign$2({},e,{hash:encodeHash(l),path:s.path})),h=o.createHref(p);return assign$2({fullPath:p,hash:l,query:r===stringifyQuery$1?normalizeQuery(e.query):e.query||{}},s,{redirectedFrom:void 0,href:h})}function h(e){return"string"==typeof e?parseURL(n,e,c.value.path):assign$2({},e)}function f(e,t){if(l!==e)return createRouterError(8,{from:t,to:e})}function g(e){return _(e)}function m(e){const t=e.matched[e.matched.length-1];if(t&&t.redirect){const{redirect:n}=t;let r="function"==typeof n?n(e):n;return"string"==typeof r&&(r=r.includes("?")||r.includes("#")?r=h(r):{path:r},r.params={}),assign$2({query:e.query,hash:e.hash,params:null!=r.path?{}:e.params},r)}}function _(e,t){const n=l=p(e),o=c.value,i=e.state,a=e.force,s=!0===e.replace,u=m(n);if(u)return _(assign$2(h(u),{state:"object"==typeof u?assign$2({},i,u.state):i,force:a,replace:s}),t||n);const d=n;let A;return d.redirectedFrom=t,!a&&isSameRouteLocation(r,o,n)&&(A=createRouterError(16,{to:d,from:o}),N(o,o,!0,!1)),(A?Promise.resolve(A):y(d,o)).catch((e=>isNavigationFailure(e)?isNavigationFailure(e,2)?e:O(e):R(e,d,o))).then((e=>{if(e){if(isNavigationFailure(e,2))return _(assign$2({replace:s},h(e.to),{state:"object"==typeof e.to?assign$2({},i,e.to.state):i,force:a}),t||d)}else e=C(d,o,!0,s,i);return b(d,o,e),e}))}function E(e,t){const n=f(e,t);return n?Promise.reject(n):Promise.resolve()}function v(e){const t=D.values().next().value;return t&&"function"==typeof t.runWithContext?t.runWithContext(e):e()}function y(e,t){let n;const[r,o,s]=extractChangingRecords(e,t);n=extractComponentsGuards(r.reverse(),"beforeRouteLeave",e,t);for(const i of r)i.leaveGuards.forEach((r=>{n.push(guardToPromiseFn(r,e,t))}));const c=E.bind(null,e,t);return n.push(c),B(n).then((()=>{n=[];for(const r of i.list())n.push(guardToPromiseFn(r,e,t));return n.push(c),B(n)})).then((()=>{n=extractComponentsGuards(o,"beforeRouteUpdate",e,t);for(const r of o)r.updateGuards.forEach((r=>{n.push(guardToPromiseFn(r,e,t))}));return n.push(c),B(n)})).then((()=>{n=[];for(const r of s)if(r.beforeEnter)if(isArray$2(r.beforeEnter))for(const o of r.beforeEnter)n.push(guardToPromiseFn(o,e,t));else n.push(guardToPromiseFn(r.beforeEnter,e,t));return n.push(c),B(n)})).then((()=>(e.matched.forEach((e=>e.enterCallbacks={})),n=extractComponentsGuards(s,"beforeRouteEnter",e,t,v),n.push(c),B(n)))).then((()=>{n=[];for(const r of a.list())n.push(guardToPromiseFn(r,e,t));return n.push(c),B(n)})).catch((e=>isNavigationFailure(e,8)?e:Promise.reject(e)))}function b(e,t,n){s.list().forEach((r=>v((()=>r(e,t,n)))))}function C(e,t,n,r,i){const a=f(e,t);if(a)return a;const s=t===START_LOCATION_NORMALIZED,l=isBrowser?history.state:{};n&&(r||s?o.replace(e.fullPath,assign$2({scroll:s&&l&&l.scroll},i)):o.push(e.fullPath,i)),c.value=e,N(e,t,n,s),O()}let S;let w,T=useCallbacks(),I=useCallbacks();function R(e,t,n){O(e);const r=I.list();return r.length?r.forEach((r=>r(e,t,n))):console.error(e),Promise.reject(e)}function O(e){return w||(w=!e,S||(S=o.listen(((e,t,n)=>{if(!L.listening)return;const r=p(e),i=m(r);if(i)return void _(assign$2(i,{replace:!0,force:!0}),r).catch(noop$3);l=r;const a=c.value;isBrowser&&saveScrollPosition(getScrollKey(a.fullPath,n.delta),computeScrollPosition()),y(r,a).catch((e=>isNavigationFailure(e,12)?e:isNavigationFailure(e,2)?(_(assign$2(h(e.to),{force:!0}),r).then((e=>{isNavigationFailure(e,20)&&!n.delta&&n.type===NavigationType.pop&&o.go(-1,!1)})).catch(noop$3),Promise.reject()):(n.delta&&o.go(-n.delta,!1),R(e,r,a)))).then((e=>{(e=e||C(r,a,!1))&&(n.delta&&!isNavigationFailure(e,8)?o.go(-n.delta,!1):n.type===NavigationType.pop&&isNavigationFailure(e,20)&&o.go(-1,!1)),b(r,a,e)})).catch(noop$3)}))),T.list().forEach((([t,n])=>e?n(e):t())),T.reset()),e}function N(t,n,r,o){const{scrollBehavior:i}=e;if(!isBrowser||!i)return Promise.resolve();const a=!r&&getSavedScrollPosition(getScrollKey(t.fullPath,0))||(o||!r)&&history.state&&history.state.scroll||null;return nextTick().then((()=>i(t,n,a))).then((e=>e&&scrollToPosition(e))).catch((e=>R(e,t,n)))}const k=e=>o.go(e);let P;const D=new Set,L={currentRoute:c,listening:!0,addRoute:function(e,n){let r,o;return isRouteName(e)?(r=t.getRecordMatcher(e),o=n):o=e,t.addRoute(o,r)},removeRoute:function(e){const n=t.getRecordMatcher(e);n&&t.removeRoute(n)},clearRoutes:t.clearRoutes,hasRoute:function(e){return!!t.getRecordMatcher(e)},getRoutes:function(){return t.getRoutes().map((e=>e.record))},resolve:p,options:e,push:g,replace:function(e){return g(assign$2(h(e),{replace:!0}))},go:k,back:()=>k(-1),forward:()=>k(1),beforeEach:i.add,beforeResolve:a.add,afterEach:s.add,onError:I.add,isReady:function(){return w&&c.value!==START_LOCATION_NORMALIZED?Promise.resolve():new Promise(((e,t)=>{T.add([e,t])}))},install(e){e.component("RouterLink",RouterLink),e.component("RouterView",RouterView),e.config.globalProperties.$router=this,Object.defineProperty(e.config.globalProperties,"$route",{enumerable:!0,get:()=>unref(c)}),isBrowser&&!P&&c.value===START_LOCATION_NORMALIZED&&(P=!0,g(o.location).catch((e=>{})));const t={};for(const r in START_LOCATION_NORMALIZED)Object.defineProperty(t,r,{get:()=>c.value[r],enumerable:!0});e.provide(routerKey,this),e.provide(routeLocationKey,shallowReactive(t)),e.provide(routerViewLocationKey,c);const n=e.unmount;D.add(e),e.unmount=function(){D.delete(e),D.size<1&&(l=START_LOCATION_NORMALIZED,S&&S(),S=null,c.value=START_LOCATION_NORMALIZED,P=!1,w=!1),n()}}};function B(e){return e.reduce(((e,t)=>e.then((()=>v(t)))),Promise.resolve())}return L}function extractChangingRecords(e,t){const n=[],r=[],o=[],i=Math.max(t.matched.length,e.matched.length);for(let a=0;a<i;a++){const i=t.matched[a];i&&(e.matched.find((e=>isSameRouteRecord(e,i)))?r.push(i):n.push(i));const s=e.matched[a];s&&(t.matched.find((e=>isSameRouteRecord(e,s)))||o.push(s))}return[n,r,o]}function useRouter(){return inject(routerKey)}function useRoute(e){return inject(routeLocationKey)}const isObject$3=e=>null!==e&&"object"==typeof e,defaultDelimiters=["{","}"];class BaseFormatter{constructor(){this._caches=Object.create(null)}interpolate(e,t,n=defaultDelimiters){if(!t)return[e];let r=this._caches[e];return r||(r=parse$1(e,n),this._caches[e]=r),compile$1(r,t)}}const RE_TOKEN_LIST_VALUE=/^(?:\d)+/,RE_TOKEN_NAMED_VALUE=/^(?:\w)+/;function parse$1(e,[t,n]){const r=[];let o=0,i="";for(;o<e.length;){let a=e[o++];if(a===t){i&&r.push({type:"text",value:i}),i="";let t="";for(a=e[o++];void 0!==a&&a!==n;)t+=a,a=e[o++];const s=a===n,c=RE_TOKEN_LIST_VALUE.test(t)?"list":s&&RE_TOKEN_NAMED_VALUE.test(t)?"named":"unknown";r.push({value:t,type:c})}else i+=a}return i&&r.push({type:"text",value:i}),r}function compile$1(e,t){const n=[];let r=0;const o=Array.isArray(t)?"list":isObject$3(t)?"named":"unknown";if("unknown"===o)return n;for(;r<e.length;){const i=e[r];switch(i.type){case"text":n.push(i.value);break;case"list":n.push(t[parseInt(i.value,10)]);break;case"named":"named"===o&&n.push(t[i.value])}r++}return n}const LOCALE_ZH_HANS="zh-Hans",LOCALE_ZH_HANT="zh-Hant",LOCALE_EN="en",LOCALE_FR="fr",LOCALE_ES="es",hasOwnProperty$2=Object.prototype.hasOwnProperty,hasOwn$1=(e,t)=>hasOwnProperty$2.call(e,t),defaultFormatter=new BaseFormatter;function include(e,t){return!!t.find((t=>-1!==e.indexOf(t)))}function startsWith(e,t){return t.find((t=>0===e.indexOf(t)))}function normalizeLocale(e,t){if(!e)return;if(e=e.trim().replace(/_/g,"-"),t&&t[e])return e;if("chinese"===(e=e.toLowerCase()))return LOCALE_ZH_HANS;if(0===e.indexOf("zh"))return e.indexOf("-hans")>-1?LOCALE_ZH_HANS:e.indexOf("-hant")>-1||include(e,["-tw","-hk","-mo","-cht"])?LOCALE_ZH_HANT:LOCALE_ZH_HANS;let n=[LOCALE_EN,LOCALE_FR,LOCALE_ES];t&&Object.keys(t).length>0&&(n=Object.keys(t));const r=startsWith(e,n);return r||void 0}class I18n{constructor({locale:e,fallbackLocale:t,messages:n,watcher:r,formater:o}){this.locale=LOCALE_EN,this.fallbackLocale=LOCALE_EN,this.message={},this.messages={},this.watchers=[],t&&(this.fallbackLocale=t),this.formater=o||defaultFormatter,this.messages=n||{},this.setLocale(e||LOCALE_EN),r&&this.watchLocale(r)}setLocale(e){const t=this.locale;this.locale=normalizeLocale(e,this.messages)||this.fallbackLocale,this.messages[this.locale]||(this.messages[this.locale]={}),this.message=this.messages[this.locale],t!==this.locale&&this.watchers.forEach((e=>{e(this.locale,t)}))}getLocale(){return this.locale}watchLocale(e){const t=this.watchers.push(e)-1;return()=>{this.watchers.splice(t,1)}}add(e,t,n=!0){const r=this.messages[e];r?n?Object.assign(r,t):Object.keys(t).forEach((e=>{hasOwn$1(r,e)||(r[e]=t[e])})):this.messages[e]=t}f(e,t,n){return this.formater.interpolate(e,t,n).join("")}t(e,t,n){let r=this.message;return"string"==typeof t?(t=normalizeLocale(t,this.messages))&&(r=this.messages[t]):n=t,hasOwn$1(r,e)?this.formater.interpolate(r[e],n).join(""):(console.warn(`Cannot translate the value of keypath ${e}. Use the value of keypath as default.`),e)}}function watchAppLocale(e,t){e.$watchLocale?e.$watchLocale((e=>{t.setLocale(e)})):e.$watch((()=>e.$locale),(e=>{t.setLocale(e)}))}function getDefaultLocale(){return"undefined"!=typeof uni&&getLocale$1?getLocale$1():"undefined"!=typeof global&&global.getLocale?global.getLocale():LOCALE_EN}function initVueI18n(e,t={},n,r){if("string"!=typeof e){const n=[t,e];e=n[0],t=n[1]}"string"!=typeof e&&(e=getDefaultLocale()),"string"!=typeof n&&(n="undefined"!=typeof __uniConfig&&__uniConfig.fallbackLocale||LOCALE_EN);const o=new I18n({locale:e,fallbackLocale:n,messages:t,watcher:r});let i=(e,t)=>{if("function"!=typeof getApp$1)i=function(e,t){return o.t(e,t)};else{let e=!1;i=function(t,n){const r=getApp$1().$vm;return r&&(r.$locale,e||(e=!0,watchAppLocale(r,o))),o.t(t,n)}}return i(e,t)};return{i18n:o,f:(e,t,n)=>o.f(e,t,n),t:(e,t)=>i(e,t),add:(e,t,n=!0)=>o.add(e,t,n),watch:e=>o.watchLocale(e),getLocale:()=>o.getLocale(),setLocale:e=>o.setLocale(e)}}function isI18nStr(e,t){return e.indexOf(t[0])>-1}const isEnableLocale=once((()=>"undefined"!=typeof __uniConfig&&__uniConfig.locales&&!!Object.keys(__uniConfig.locales).length));let i18n;function getLocaleMessage(){const e=getLocale$1(),t=__uniConfig.locales;return t[e]||t[__uniConfig.fallbackLocale]||t.en||{}}function formatI18n(e){return isI18nStr(e,I18N_JSON_DELIMITERS)?useI18n().f(e,getLocaleMessage(),I18N_JSON_DELIMITERS):e}function resolveJsonObj(e,t){if(1===t.length){if(e){const n=e=>isString$3(e)&&isI18nStr(e,I18N_JSON_DELIMITERS),r=t[0];let o=[];if(isArray$3(e)&&(o=e.filter((e=>n(e[r])))).length)return o;const i=e[t[0]];if(n(i))return e}return}const n=t.shift();return resolveJsonObj(e&&e[n],t)}function defineI18nProperties(e,t){return t.map((t=>defineI18nProperty(e,t)))}function defineI18nProperty(e,t){const n=resolveJsonObj(e,t);if(!n)return!1;const r=t[t.length-1];if(isArray$3(n))n.forEach((e=>defineI18nProperty(e,[r])));else{let e=n[r];Object.defineProperty(n,r,{get:()=>formatI18n(e),set(t){e=t}})}return!0}function useI18n(){if(!i18n){let e;if(e=navigator.cookieEnabled&&window.localStorage&&localStorage[UNI_STORAGE_LOCALE]||__uniConfig.locale||navigator.language,i18n=initVueI18n(e),isEnableLocale()){const t=Object.keys(__uniConfig.locales||{});t.length&&t.forEach((e=>i18n.add(e,__uniConfig.locales[e]))),i18n.setLocale(e)}}return i18n}function normalizeMessages(e,t,n){return t.reduce(((t,r,o)=>(t[e+r]=n[o],t)),{})}const initI18nAsyncMsgsOnce=once((()=>{const e="uni.async.",t=["error"];useI18n().add(LOCALE_EN,normalizeMessages(e,t,["The connection timed out, click the screen to try again."]),!1),useI18n().add(LOCALE_ES,normalizeMessages(e,t,["Se agot el tiempo de conexin, haga clic en la pantalla para volver a intentarlo."]),!1),useI18n().add(LOCALE_FR,normalizeMessages(e,t,["La connexion a expir, cliquez sur l'cran pour ressayer."]),!1),useI18n().add(LOCALE_ZH_HANS,normalizeMessages(e,t,[""]),!1),useI18n().add(LOCALE_ZH_HANT,normalizeMessages(e,t,[""]),!1)})),initI18nShowToastMsgsOnce=once((()=>{const e="uni.showToast.",t=["unpaired"];useI18n().add(LOCALE_EN,normalizeMessages(e,t,["Please note showToast must be paired with hideToast"]),!1),useI18n().add(LOCALE_ES,normalizeMessages(e,t,["Tenga en cuenta que showToast debe estar emparejado con hideToast"]),!1),useI18n().add(LOCALE_FR,normalizeMessages(e,t,["Veuillez noter que showToast doit tre associ  hideToast"]),!1),useI18n().add(LOCALE_ZH_HANS,normalizeMessages(e,t,[" showToast  hideToast "]),!1),useI18n().add(LOCALE_ZH_HANT,normalizeMessages(e,t,[" showToast  hideToast "]),!1)})),initI18nShowLoadingMsgsOnce=once((()=>{const e="uni.showLoading.",t=["unpaired"];useI18n().add(LOCALE_EN,normalizeMessages(e,t,["Please note showLoading must be paired with hideLoading"]),!1),useI18n().add(LOCALE_ES,normalizeMessages(e,t,["Tenga en cuenta que showLoading debe estar emparejado con hideLoading"]),!1),useI18n().add(LOCALE_FR,normalizeMessages(e,t,["Veuillez noter que showLoading doit tre associ  hideLoading"]),!1),useI18n().add(LOCALE_ZH_HANS,normalizeMessages(e,t,[" showLoading  hideLoading "]),!1),useI18n().add(LOCALE_ZH_HANT,normalizeMessages(e,t,[" showLoading  hideLoading "]),!1)})),initI18nChooseFileMsgsOnce=once((()=>{const e="uni.chooseFile.",t=["notUserActivation"];useI18n().add(LOCALE_EN,normalizeMessages(e,t,["File chooser dialog can only be shown with a user activation"]),!1),useI18n().add(LOCALE_ES,normalizeMessages(e,t,["El cuadro de dilogo del selector de archivos solo se puede mostrar con la activacin del usuario"]),!1),useI18n().add(LOCALE_FR,normalizeMessages(e,t,["La bote de dialogue du slecteur de fichier ne peut tre affiche qu'avec une activation par l'utilisateur"]),!1),useI18n().add(LOCALE_ZH_HANS,normalizeMessages(e,t,[""]),!1),useI18n().add(LOCALE_ZH_HANT,normalizeMessages(e,t,[""]),!1)})),initI18nPickerMsgsOnce=once((()=>{const e="uni.picker.",t=["done","cancel"];useI18n().add(LOCALE_EN,normalizeMessages(e,t,["Done","Cancel"]),!1),useI18n().add(LOCALE_ES,normalizeMessages(e,t,["OK","Cancelar"]),!1),useI18n().add(LOCALE_FR,normalizeMessages(e,t,["OK","Annuler"]),!1),useI18n().add(LOCALE_ZH_HANS,normalizeMessages(e,t,["",""]),!1),useI18n().add(LOCALE_ZH_HANT,normalizeMessages(e,t,["",""]),!1)})),initI18nVideoMsgsOnce=once((()=>{const e="uni.video.",t=["danmu","volume"];useI18n().add(LOCALE_EN,normalizeMessages(e,t,["Danmu","Volume"]),!1),useI18n().add(LOCALE_ES,normalizeMessages(e,t,["Danmu","Volumen"]),!1),useI18n().add(LOCALE_FR,normalizeMessages(e,t,["Danmu","Le Volume"]),!1),useI18n().add(LOCALE_ZH_HANS,normalizeMessages(e,t,["",""]),!1),useI18n().add(LOCALE_ZH_HANT,normalizeMessages(e,t,["",""]),!1)}));function initNavigationBarI18n(e){if(isEnableLocale())return defineI18nProperties(e,[["titleText"],["searchInput","placeholder"],["buttons","text"]])}function initTabBarI18n(e){return isEnableLocale()&&e.list&&e.list.forEach((e=>{defineI18nProperty(e,["text"])})),e}function initBridge(e){const t=new E$1$1;return{on:(e,n)=>t.on(e,n),once:(e,n)=>t.once(e,n),off:(e,n)=>t.off(e,n),emit:(e,...n)=>t.emit(e,...n),subscribe(n,r,o=!1){t[o?"once":"on"](`${e}.${n}`,r)},unsubscribe(n,r){t.off(`${e}.${n}`,r)},subscribeHandler(n,r,o){t.emit(`${e}.${n}`,r,o)}}}const INVOKE_VIEW_API="invokeViewApi",INVOKE_SERVICE_API="invokeServiceApi";let invokeServiceMethodId=1;const invokeServiceMethod=(e,t,n)=>{const{subscribe:r,publishHandler:o}=UniViewJSBridge$1,i=n?invokeServiceMethodId++:0;n&&r(INVOKE_SERVICE_API+"."+i,n,!0),o(INVOKE_SERVICE_API,{id:i,name:e,args:t})},viewMethods=Object.create(null);function normalizeViewMethodName(e,t){return e+"."+t}function subscribeViewMethod(e,t){UniViewJSBridge$1.subscribe(normalizeViewMethodName(e,INVOKE_VIEW_API),onInvokeViewMethod)}function unsubscribeViewMethod(e){UniViewJSBridge$1.unsubscribe(normalizeViewMethodName(e,INVOKE_VIEW_API)),Object.keys(viewMethods).forEach((t=>{0===t.indexOf(e+".")&&delete viewMethods[t]}))}function registerViewMethod(e,t,n){t=normalizeViewMethodName(e,t),viewMethods[t]||(viewMethods[t]=n)}function unregisterViewMethod(e,t){t=normalizeViewMethodName(e,t),delete viewMethods[t]}function onInvokeViewMethod({id:e,name:t,args:n},r){t=normalizeViewMethodName(r,t);const o=t=>{e&&UniViewJSBridge$1.publishHandler(INVOKE_VIEW_API+"."+e,t)},i=viewMethods[t];i?i(n,o):o({})}const ViewJSBridge=extend$2(initBridge("service"),{invokeServiceMethod:invokeServiceMethod}),LONGPRESS_TIMEOUT=350,LONGPRESS_THRESHOLD=10,passiveOptions$2=passive(!0);let longPressTimer;function clearLongPressTimer(){longPressTimer&&(clearTimeout(longPressTimer),longPressTimer=null)}let startPageX=0,startPageY=0;function touchstart(e){if(clearLongPressTimer(),1!==e.touches.length)return;const{pageX:t,pageY:n}=e.touches[0];startPageX=t,startPageY=n,longPressTimer=setTimeout((function(){const t=new CustomEvent("longpress",{bubbles:!0,cancelable:!0,target:e.target,currentTarget:e.currentTarget});t.touches=e.touches,t.changedTouches=e.changedTouches,e.target.dispatchEvent(t)}),LONGPRESS_TIMEOUT)}function touchmove(e){if(!longPressTimer)return;if(1!==e.touches.length)return clearLongPressTimer();const{pageX:t,pageY:n}=e.touches[0];return Math.abs(t-startPageX)>LONGPRESS_THRESHOLD||Math.abs(n-startPageY)>LONGPRESS_THRESHOLD?clearLongPressTimer():void 0}function initLongPress(){window.addEventListener("touchstart",touchstart,passiveOptions$2),window.addEventListener("touchmove",touchmove,passiveOptions$2),window.addEventListener("touchend",clearLongPressTimer,passiveOptions$2),window.addEventListener("touchcancel",clearLongPressTimer,passiveOptions$2)}function checkValue$1(e,t){const n=Number(e);return isNaN(n)?t:n}function getWindowWidth$1(){const e=/^Apple/.test(navigator.vendor)&&"number"==typeof window.orientation,t=e&&90===Math.abs(window.orientation);var n=e?Math[t?"max":"min"](screen.width,screen.height):screen.width;return Math.min(window.innerWidth,document.documentElement.clientWidth,n)||n}function useRem(){const e=__uniConfig.globalStyle||{},t=checkValue$1(e.rpxCalcMaxDeviceWidth,960),n=checkValue$1(e.rpxCalcBaseDeviceWidth,375);function r(){let e=getWindowWidth$1();e=e<=t?e:n,document.documentElement.style.fontSize=e/23.4375+"px"}r(),document.addEventListener("DOMContentLoaded",r),window.addEventListener("load",r),window.addEventListener("resize",r)}function initView(){useRem(),initCustomDatasetOnce(),initLongPress()}function getDefaultExportFromCjs$1(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var attrs=["top","left","right","bottom"],inited$1,elementComputedStyle={},support;function getSupport(){return support="CSS"in window&&"function"==typeof CSS.supports?CSS.supports("top: env(safe-area-inset-top)")?"env":CSS.supports("top: constant(safe-area-inset-top)")?"constant":"":""}function init$2(){if(support="string"==typeof support?support:getSupport()){var e=[],t=!1;try{var n=Object.defineProperty({},"passive",{get:function(){t={passive:!0}}});window.addEventListener("test",null,n)}catch(a){}var r=document.createElement("div");o(r,{position:"absolute",left:"0",top:"0",width:"0",height:"0",zIndex:"-1",overflow:"hidden",visibility:"hidden"}),attrs.forEach((function(e){!function(e,n){var r=document.createElement("div"),a=document.createElement("div"),s=document.createElement("div"),c=document.createElement("div"),l={position:"absolute",width:"100px",height:"200px",boxSizing:"border-box",overflow:"hidden",paddingBottom:support+"(safe-area-inset-"+n+")"};o(r,l),o(a,l),o(s,{transition:"0s",animation:"none",width:"400px",height:"400px"}),o(c,{transition:"0s",animation:"none",width:"250%",height:"250%"}),r.appendChild(s),a.appendChild(c),e.appendChild(r),e.appendChild(a),i((function(){r.scrollTop=a.scrollTop=1e4;var e=r.scrollTop,o=a.scrollTop;function i(){this.scrollTop!==(this===r?e:o)&&(r.scrollTop=a.scrollTop=1e4,e=r.scrollTop,o=a.scrollTop,attrChange(n))}r.addEventListener("scroll",i,t),a.addEventListener("scroll",i,t)}));var u=getComputedStyle(r);Object.defineProperty(elementComputedStyle,n,{configurable:!0,get:function(){return parseFloat(u.paddingBottom)}})}(r,e)})),document.body.appendChild(r),i(),inited$1=!0}else attrs.forEach((function(e){elementComputedStyle[e]=0}));function o(e,t){var n=e.style;Object.keys(t).forEach((function(e){var r=t[e];n[e]=r}))}function i(t){t?e.push(t):e.forEach((function(e){e()}))}}function getAttr(e){return inited$1||init$2(),elementComputedStyle[e]}var changeAttrs=[];function attrChange(e){changeAttrs.length||setTimeout((function(){var e={};changeAttrs.forEach((function(t){e[t]=elementComputedStyle[t]})),changeAttrs.length=0,callbacks.forEach((function(t){t(e)}))}),0),changeAttrs.push(e)}var callbacks=[];function onChange(e){getSupport()&&(inited$1||init$2(),"function"==typeof e&&callbacks.push(e))}function offChange(e){var t=callbacks.indexOf(e);t>=0&&callbacks.splice(t,1)}var safeAreaInsets={get support(){return 0!=("string"==typeof support?support:getSupport()).length},get top(){return getAttr("top")},get left(){return getAttr("left")},get right(){return getAttr("right")},get bottom(){return getAttr("bottom")},onChange:onChange,offChange:offChange},out=safeAreaInsets;const safeAreaInsets$1=getDefaultExportFromCjs$1(out),onEventPrevent=withModifiers((()=>{}),["prevent"]),onEventStop=withModifiers((e=>{}),["stop"]);function getWindowOffsetCssVar(e,t){return parseInt((e.getPropertyValue(t).match(/\d+/)||["0"])[0])}function getWindowTop(){const e=getWindowOffsetCssVar(document.documentElement.style,"--window-top");return e?e+safeAreaInsets$1.top:0}function getWindowOffset(){const e=document.documentElement.style,t=getWindowTop(),n=getWindowOffsetCssVar(e,"--window-bottom"),r=getWindowOffsetCssVar(e,"--window-left"),o=getWindowOffsetCssVar(e,"--window-right"),i=getWindowOffsetCssVar(e,"--top-window-height");return{top:t,bottom:n?n+safeAreaInsets$1.bottom:0,left:r?r+safeAreaInsets$1.left:0,right:o?o+safeAreaInsets$1.right:0,topWindowHeight:i||0}}function updateCssVar(e){const t=document.documentElement.style;Object.keys(e).forEach((n=>{t.setProperty(n,e[n])}))}function updatePageCssVar(e){return updateCssVar(e)}function PolySymbol(e){return Symbol(e)}function hasRpx(e){return-1!==(e+="").indexOf("rpx")||-1!==e.indexOf("upx")}function rpx2px(e,t=!1){if(t)return rpx2pxWithReplace(e);if(isString$3(e)){const t=parseInt(e)||0;return hasRpx(e)?upx2px(t):t}return e}function rpx2pxWithReplace(e){return hasRpx(e)?e.replace(/(\d+(\.\d+)?)[ru]px/g,((e,t)=>upx2px(parseFloat(t))+"px")):e}function get$pageByPage(e){return e.$page}const ICON_PATH_SUCCESS_NO_CIRCLE="M1.952 18.080q-0.32-0.352-0.416-0.88t0.128-0.976l0.16-0.352q0.224-0.416 0.64-0.528t0.8 0.176l6.496 4.704q0.384 0.288 0.912 0.272t0.88-0.336l17.312-14.272q0.352-0.288 0.848-0.256t0.848 0.352l-0.416-0.416q0.32 0.352 0.32 0.816t-0.32 0.816l-18.656 18.912q-0.32 0.352-0.8 0.352t-0.8-0.32l-7.936-8.064z",ICON_PATH_WARN="M15.808 0.16q-4.224 0-7.872 2.176-3.552 2.112-5.632 5.728-2.144 3.744-2.144 8.128 0 4.192 2.144 7.872 2.112 3.52 5.632 5.632 3.68 2.144 7.872 2.144 4.384 0 8.128-2.144 3.616-2.080 5.728-5.632 2.176-3.648 2.176-7.872 0-4.384-2.176-8.128-2.112-3.616-5.728-5.728-3.744-2.176-8.128-2.176zM15.136 8.672h1.728q0.128 0 0.224 0.096t0.096 0.256l-0.384 10.24q0 0.064-0.048 0.112t-0.112 0.048h-1.248q-0.096 0-0.144-0.048t-0.048-0.112l-0.384-10.24q0-0.16 0.096-0.256t0.224-0.096zM16 23.328q-0.48 0-0.832-0.352t-0.352-0.848 0.352-0.848 0.832-0.352 0.832 0.352 0.352 0.848-0.352 0.848-0.832 0.352z",ICON_PATH_BACK="M21.781 7.844l-9.063 8.594 9.063 8.594q0.25 0.25 0.25 0.609t-0.25 0.578q-0.25 0.25-0.578 0.25t-0.578-0.25l-9.625-9.125q-0.156-0.125-0.203-0.297t-0.047-0.359q0-0.156 0.047-0.328t0.203-0.297l9.625-9.125q0.25-0.25 0.578-0.25t0.578 0.25q0.25 0.219 0.25 0.578t-0.25 0.578z";function createSvgIconVNode(e,t="#000",n=27){return createVNode("svg",{width:n,height:n,viewBox:"0 0 32 32"},[createVNode("path",{d:e,fill:t},null,8,["d","fill"])],8,["width","height"])}function useCurrentPageId(){{const{$pageInstance:e}=getCurrentInstance();return e&&getPageProxyId(e.proxy)}}function getPageIdByVm(e){const t=resolveComponentInstance(e);if(t.$page)return getPageProxyId(t);if(!t.$)return;{const{$pageInstance:e}=t.$;if(e)return getPageProxyId(e.proxy)}const n=t.$.root.proxy;return n&&n.$page?getPageProxyId(n):void 0}function getCurrentPage(){const e=getCurrentPages$1(),t=e.length;if(t)return e[t-1]}function getCurrentPageMeta(){var e;const t=null==(e=getCurrentPage())?void 0:e.$page;if(t)return t.meta}function getCurrentPageId(){const e=getCurrentPageMeta();return e?e.id:-1}function getCurrentPageVm(){const e=getCurrentPage();if(e)return e.$vm}const PAGE_META_KEYS=["navigationBar","pullToRefresh"];function initGlobalStyle(){return JSON.parse(JSON.stringify(__uniConfig.globalStyle||{}))}function initRouteMeta(e,t){const n=initGlobalStyle(),r=extend$2({id:t},n,e);PAGE_META_KEYS.forEach((t=>{r[t]=extend$2({},n[t],e[t])}));const{navigationBar:o}=r;return o.titleText&&o.titleImage&&(o.titleText=""),r}function initPageInternalInstance(e,t,n,r,o,i){const{id:a,route:s}=r,c=normalizeStyles(r.navigationBar,__uniConfig.themeConfig,i).titleColor;return{id:a,path:addLeadingSlash(s),route:s,fullPath:t,options:n,meta:r,openType:e,eventChannel:o,statusBarStyle:"#ffffff"===c?"light":"dark"}}function getPageProxyId(e){var t,n;return(null==(t=e.$page)?void 0:t.id)||(null==(n=e.$basePage)?void 0:n.id)}function invokeHook(e,t,n){if(isString$3(e))n=t,t=e,e=getCurrentPageVm();else if("number"==typeof e){const t=getCurrentPages$1().find((t=>get$pageByPage(t).id===e));e=t?t.$vm:getCurrentPageVm()}if(!e)return;const r=e.$[t];return r&&invokeArrayFns(r,n)}function disableScrollListener(e){e.preventDefault()}let testReachBottomTimer,lastScrollHeight=0;function createScrollListener({onPageScroll:e,onReachBottom:t,onReachBottomDistance:n}){let r=!1,o=!1,i=!0;const a=()=>{function a(){if((()=>{const{scrollHeight:e}=document.documentElement,t=window.innerHeight,r=window.scrollY,i=r>0&&e>t&&r+t+n>=e,a=Math.abs(e-lastScrollHeight)>n;return!i||o&&!a?(!i&&o&&(o=!1),!1):(lastScrollHeight=e,o=!0,!0)})())return t&&t(),i=!1,setTimeout((function(){i=!0}),350),!0}e&&e(window.pageYOffset),t&&i&&(a()||(testReachBottomTimer=setTimeout(a,300))),r=!1};return function(){clearTimeout(testReachBottomTimer),r||requestAnimationFrame(a),r=!0}}function normalizeRoute(e){if(0===e.indexOf("/")||0===e.indexOf("uni:"))return e;let t="";const n=getCurrentPages$1();return n.length&&(t=get$pageByPage(n[n.length-1]).route),getRealRoute(t,e)}function getRealRoute(e,t){if(0===t.indexOf("/"))return t;if(0===t.indexOf("./"))return getRealRoute(e,t.slice(2));const n=t.split("/"),r=n.length;let o=0;for(;o<r&&".."===n[o];o++);n.splice(0,o),t=n.join("/");const i=e.length>0?e.split("/"):[];return i.splice(i.length-o-1,o+1),addLeadingSlash(i.concat(n).join("/"))}function getRouteOptions(e,t=!1){return t?__uniRoutes.find((t=>t.path===e||t.alias===e)):__uniRoutes.find((t=>t.path===e))}function normalizeTabBarRoute(e,t,n){const r=getRouteOptions(addLeadingSlash(t));if(r){const{meta:e}=r;delete e.tabBarIndex,e.isQuit=e.isTabBar=!1}const o=getRouteOptions(addLeadingSlash(n));if(o){const{meta:t}=o;t.tabBarIndex=e,t.isQuit=t.isTabBar=!0;const r=__uniConfig.tabBar;r&&r.list&&r.list[e]&&(r.list[e].pagePath=removeLeadingSlash(n))}}class ComponentDescriptor{constructor(e){this.$bindClass=!1,this.$bindStyle=!1,this.$vm=e,this.$el=resolveOwnerEl(e.$),this.$el.getAttribute&&(this.$bindClass=!!this.$el.getAttribute("class"),this.$bindStyle=!!this.$el.getAttribute("style"))}selectComponent(e){if(!this.$el||!e)return;const t=getWxsVm(this.$el.querySelector(e));return t?createComponentDescriptor(t,!1):void 0}selectAllComponents(e){if(!this.$el||!e)return[];const t=[],n=this.$el.querySelectorAll(e);for(let r=0;r<n.length;r++){const e=getWxsVm(n[r]);e&&t.push(createComponentDescriptor(e,!1))}return t}forceUpdate(e){"class"===e?this.$bindClass?(this.$el.__wxsClassChanged=!0,this.$vm.$forceUpdate()):this.updateWxsClass():"style"===e&&(this.$bindStyle?(this.$el.__wxsStyleChanged=!0,this.$vm.$forceUpdate()):this.updateWxsStyle())}updateWxsClass(){const{__wxsAddClass:e}=this.$el;e.length&&(this.$el.className=e.join(" "))}updateWxsStyle(){const{__wxsStyle:e}=this.$el;e&&this.$el.setAttribute("style",stringifyStyle(e))}setStyle(e){return this.$el&&e?(isString$3(e)&&(e=parseStringStyle(e)),isPlainObject$4(e)&&(this.$el.__wxsStyle=e,this.forceUpdate("style")),this):this}addClass(e){if(!this.$el||!e)return this;const t=this.$el.__wxsAddClass||(this.$el.__wxsAddClass=[]);return-1===t.indexOf(e)&&(t.push(e),this.forceUpdate("class")),this}removeClass(e){if(!this.$el||!e)return this;const{__wxsAddClass:t}=this.$el;if(t){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const n=this.$el.__wxsRemoveClass||(this.$el.__wxsRemoveClass=[]);return-1===n.indexOf(e)&&(n.push(e),this.forceUpdate("class")),this}hasClass(e){return this.$el&&this.$el.classList.contains(e)}getDataset(){return this.$el&&this.$el.dataset}callMethod(e,t={}){const n=this.$vm[e];isFunction$2(n)?n(JSON.parse(JSON.stringify(t))):this.$vm.ownerId&&UniViewJSBridge$1.publishHandler(ON_WXS_INVOKE_CALL_METHOD,{nodeId:this.$el.__id,ownerId:this.$vm.ownerId,method:e,args:t})}requestAnimationFrame(e){return window.requestAnimationFrame(e)}getState(){return this.$el&&(this.$el.__wxsState||(this.$el.__wxsState={}))}triggerEvent(e,t={}){return this.$vm.$emit(e,t),this}getComputedStyle(e){if(this.$el){const t=window.getComputedStyle(this.$el);return e&&e.length?e.reduce(((e,n)=>(e[n]=t[n],e)),{}):t}return{}}setTimeout(e,t){return window.setTimeout(e,t)}clearTimeout(e){return window.clearTimeout(e)}getBoundingClientRect(){return this.$el.getBoundingClientRect()}}function createComponentDescriptor(e,t=!0){if(t&&e&&(e=resolveOwnerVm(e.$)),e&&e.$el)return e.$el.__wxsComponentDescriptor||(e.$el.__wxsComponentDescriptor=new ComponentDescriptor(e)),e.$el.__wxsComponentDescriptor}function getComponentDescriptor(e,t){return createComponentDescriptor(e,t)}function resolveOwnerComponentPublicInstance(e,t,n=!0){if(!t)return!1;if(n&&e.length<2)return!1;const r=resolveOwnerVm(t);if(!r)return!1;const o=r.$.type;return!(!o.$wxs&&!o.$renderjs)&&r}function wrapperH5WxsEvent(e,t,n,r=!0){if(t){e.__instance||(e.__instance=!0,Object.defineProperty(e,"instance",{get:()=>getComponentDescriptor(n.proxy,!1)}));const o=resolveOwnerComponentPublicInstance(t,n,r);if(o)return[e,getComponentDescriptor(o,!1)]}}function getWxsVm(e){if(e)return e.__vueParentComponent&&e.__vueParentComponent.proxy}const isKeyboardEvent=e=>!e.type.indexOf("key")&&e instanceof KeyboardEvent,isClickEvent=e=>"click"===e.type,isMouseEvent=e=>0===e.type.indexOf("mouse")||["contextmenu"].includes(e.type),isTouchEvent=e=>"undefined"!=typeof TouchEvent&&e instanceof TouchEvent||0===e.type.indexOf("touch")||["longpress"].indexOf(e.type)>=0;function $nne(e,t,n){const{currentTarget:r}=e;if(!(e instanceof Event&&r instanceof HTMLElement))return[e];const o=0!==r.tagName.indexOf("UNI-");if(o)return wrapperH5WxsEvent(e,t,n,!1)||[e];const i=createNativeEvent(e,o);if(isClickEvent(e))normalizeClickEvent(i,e);else if(isMouseEvent(e))normalizeMouseEvent(i,e);else if(isTouchEvent(e)){const t=getWindowTop();i.touches=normalizeTouchEvent(e.touches,t),i.changedTouches=normalizeTouchEvent(e.changedTouches,t)}else if(isKeyboardEvent(e)){["key","code"].forEach((t=>{Object.defineProperty(i,t,{get:()=>e[t]})}))}return wrapperH5WxsEvent(i,t,n)||[i]}function findUniTarget(e){for(;e&&0!==e.tagName.indexOf("UNI-");)e=e.parentElement;return e}function createNativeEvent(e,t=!1){const{type:n,timeStamp:r,target:o,currentTarget:i}=e;let a,s;a=normalizeTarget(t?o:findUniTarget(o)),s=normalizeTarget(i);const c={type:n,timeStamp:r,target:a,detail:{},currentTarget:s};return e._stopped&&(c._stopped=!0),e.type.startsWith("touch")&&(c.touches=e.touches,c.changedTouches=e.changedTouches),wrapperEvent(c,e),c}function wrapperEvent(e,t){extend$2(e,{preventDefault:()=>t.preventDefault(),stopPropagation:()=>t.stopPropagation()})}function normalizeClickEvent(e,t){const{x:n,y:r}=t,o=getWindowTop();e.detail={x:n,y:r-o},e.touches=e.changedTouches=[createTouchEvent(t,o)]}function normalizeMouseEvent(e,t){const n=getWindowTop();e.pageX=t.pageX,e.pageY=t.pageY-n,e.clientX=t.clientX,e.clientY=t.clientY-n,e.touches=e.changedTouches=[createTouchEvent(t,n)]}function createTouchEvent(e,t){return{force:1,identifier:0,clientX:e.clientX,clientY:e.clientY-t,pageX:e.pageX,pageY:e.pageY-t}}function normalizeTouchEvent(e,t){const n=[];for(let r=0;r<e.length;r++){const{identifier:o,pageX:i,pageY:a,clientX:s,clientY:c,force:l}=e[r];n.push({identifier:o,pageX:i,pageY:a-t,clientX:s,clientY:c-t,force:l||0})}return n}const instance=Object.defineProperty({__proto__:null,$nne:$nne,createNativeEvent:createNativeEvent},Symbol.toStringTag,{value:"Module"});function initAppConfig$1(e){const t=e.globalProperties;extend$2(t,instance),t.$gcd=getComponentDescriptor}function initViewPlugin(e){initAppConfig$1(e._context.config)}const invokeOnCallback=(e,t)=>UniServiceJSBridge$1.emit("api."+e,t);let invokeViewMethodId=1;function publishViewMethodName(e){return(e||getCurrentPageId())+"."+INVOKE_VIEW_API}const invokeViewMethod=(e,t,n,r)=>{const{subscribe:o,publishHandler:i}=UniServiceJSBridge$1,a=r?invokeViewMethodId++:0;r&&o(INVOKE_VIEW_API+"."+a,r,!0),i(publishViewMethodName(n),{id:a,name:e,args:t},n)},invokeViewMethodKeepAlive=(e,t,n,r)=>{const{subscribe:o,unsubscribe:i,publishHandler:a}=UniServiceJSBridge$1,s=invokeViewMethodId++,c=INVOKE_VIEW_API+"."+s;return o(c,n),a(publishViewMethodName(r),{id:s,name:e,args:t},r),()=>{i(c)}},ServiceJSBridge=extend$2(initBridge("view"),{invokeOnCallback:invokeOnCallback,invokeViewMethod:invokeViewMethod,invokeViewMethodKeepAlive:invokeViewMethodKeepAlive});function initOn(){const{on:e}=UniServiceJSBridge$1;e(ON_RESIZE,onResize$1),e(ON_APP_ENTER_FOREGROUND,onAppEnterForeground),e(ON_APP_ENTER_BACKGROUND,onAppEnterBackground)}function onResize$1(e){invokeHook(getCurrentPage(),ON_RESIZE,e),UniServiceJSBridge$1.invokeOnCallback("onWindowResize",e)}function onAppEnterForeground(e){const t=getCurrentPage();invokeHook(getApp$1(),ON_SHOW,e),invokeHook(t,ON_SHOW)}function onAppEnterBackground(){invokeHook(getApp$1(),ON_HIDE),invokeHook(getCurrentPage(),ON_HIDE)}const SUBSCRIBE_LIFECYCLE_HOOKS=[ON_PAGE_SCROLL,ON_REACH_BOTTOM];function initSubscribe(){SUBSCRIBE_LIFECYCLE_HOOKS.forEach((e=>UniServiceJSBridge$1.subscribe(e,createPageEvent(e))))}function createPageEvent(e){return(t,n)=>{invokeHook(parseInt(n),e,t)}}function initService(){initOn(),initSubscribe()}function initAppVm(e){e.$vm=e,e.$mpType="app";const t=ref(useI18n().getLocale());Object.defineProperty(e,"$locale",{get:()=>t.value,set(e){t.value=e}})}function initPageVm(e,t){e.route=t.route,e.$vm=e,e.$page=t,e.$mpType="page",e.$fontFamilySet=new Set,t.meta.isTabBar&&(e.$.__isTabBar=!0,e.$.__isActive=!0)}function getOpenerEventChannel(){if(this.$route){const e=this.$route.meta;return e.eventChannel||(e.eventChannel=new EventChannel(this.$page.id)),e.eventChannel}}function initAppConfig(e){e.globalProperties.getOpenerEventChannel=getOpenerEventChannel}function initServicePlugin(e){initAppConfig(e._context.config)}function createLaunchOptions(){return{path:"",query:{},scene:1001,referrerInfo:{appId:"",extraData:{}}}}function defineGlobalData(e,t){const n=e.$options||{};n.globalData=extend$2(n.globalData||{},t),Object.defineProperty(e,"globalData",{get:()=>n.globalData,set(e){n.globalData=e}})}function converPx(e){return/^-?\d+[ur]px$/i.test(e)?e.replace(/(^-?\d+)[ur]px$/i,((e,t)=>`${upx2px(parseFloat(t))}px`)):/^-?[\d\.]+$/.test(e)?`${e}px`:e||""}function converType(e){return e.replace(/[A-Z]/g,(e=>`-${e.toLowerCase()}`)).replace("webkit","-webkit")}function getStyle(e){const t=["matrix","matrix3d","scale","scale3d","rotate3d","skew","translate","translate3d"],n=["scaleX","scaleY","scaleZ","rotate","rotateX","rotateY","rotateZ","skewX","skewY","translateX","translateY","translateZ"],r=["opacity","background-color"],o=["width","height","left","right","top","bottom"],i=e.animates,a=e.option,s=a.transition,c={},l=[];return i.forEach((e=>{let i=e.type,a=[...e.args];if(t.concat(n).includes(i))i.startsWith("rotate")||i.startsWith("skew")?a=a.map((e=>parseFloat(e)+"deg")):i.startsWith("translate")&&(a=a.map(converPx)),n.indexOf(i)>=0&&(a.length=1),l.push(`${i}(${a.join(",")})`);else if(r.concat(o).includes(a[0])){i=a[0];const e=a[1];c[i]=o.includes(i)?converPx(e):e}})),c.transform=c.webkitTransform=l.join(" "),c.transition=c.webkitTransition=Object.keys(c).map((e=>`${converType(e)} ${s.duration}ms ${s.timingFunction} ${s.delay}ms`)).join(","),c.transformOrigin=c.webkitTransformOrigin=a.transformOrigin,c}function startAnimation(e){const t=e.animation;if(!t||!t.actions||!t.actions.length)return;let n=0;const r=t.actions,o=t.actions.length;function i(){const t=r[n],a=t.option.transition,s=getStyle(t);Object.keys(s).forEach((t=>{e.$el.style[t]=s[t]})),n+=1,n<o&&setTimeout(i,a.duration+a.delay)}setTimeout((()=>{i()}),0)}const animation={props:["animation"],watch:{animation:{deep:!0,handler(){startAnimation(this)}}},mounted(){startAnimation(this)}},defineBuiltInComponent=e=>{e.__reserved=!0;const{props:t,mixins:n}=e;return t&&t.animation||(n||(e.mixins=[])).push(animation),defineSystemComponent(e)},defineSystemComponent=e=>(e.__reserved=!0,e.compatConfig={MODE:3},defineComponent(e));function withWebEvent(e){return e.__wwe=!0,e}function useCustomEvent(e,t){return(n,r,o)=>{e.value&&t(n,normalizeCustomEvent(n,r,e.value,o||{}))}}function normalizeCustomEvent(e,t,n,r){let o;return o=normalizeTarget(n),{type:r.type||e,timeStamp:t.timeStamp||0,target:o,currentTarget:o,detail:r}}const hoverProps={hoverClass:{type:String,default:"none"},hoverStopPropagation:{type:Boolean,default:!1},hoverStartTime:{type:[Number,String],default:50},hoverStayTime:{type:[Number,String],default:400}};function useHover(e){const t=ref(!1);let n,r,o=!1;function i(){requestAnimationFrame((()=>{clearTimeout(r),r=setTimeout((()=>{t.value=!1}),parseInt(e.hoverStayTime))}))}function a(r){r._hoverPropagationStopped||e.hoverClass&&"none"!==e.hoverClass&&!e.disabled&&(e.hoverStopPropagation&&(r._hoverPropagationStopped=!0),o=!0,n=setTimeout((()=>{t.value=!0,o||i()}),parseInt(e.hoverStartTime)))}function s(){o=!1,t.value&&i()}function c(){s(),window.removeEventListener("mouseup",c)}return{hovering:t,binding:{onTouchstartPassive:withWebEvent((function(e){e.touches.length>1||a(e)})),onMousedown:withWebEvent((function(e){o||(a(e),window.addEventListener("mouseup",c))})),onTouchend:withWebEvent((function(){s()})),onMouseup:withWebEvent((function(){o&&c()})),onTouchcancel:withWebEvent((function(){o=!1,t.value=!1,clearTimeout(n)}))}}}function useBooleanAttr(e,t){return isString$3(t)&&(t=[t]),t.reduce(((t,n)=>(e[n]&&(t[n]=!0),t)),Object.create(null))}const uniFormKey=PolySymbol("uf"),pageMetaKey=PolySymbol("upm");function usePageMeta(){return inject(pageMetaKey)}function providePageMeta(e){const t=initPageMeta(e);return provide(pageMetaKey,t),t}function usePageRoute(){return useRoute()}function initPageMeta(e){return reactive(normalizePageMeta(JSON.parse(JSON.stringify(initRouteMeta(useRoute().meta,e)))))}function normalizePageMeta(e){{const{navigationBar:t}=e,{titleSize:n,titleColor:r,backgroundColor:o}=t;t.titleText=t.titleText||"",t.type=t.type||"default",t.titleSize=n||"16px",t.titleColor=r||"#000000",t.backgroundColor=o||"#F8F8F8",initNavigationBarI18n(t)}if(history.state){const t=history.state.__type__;"redirectTo"!==t&&"reLaunch"!==t||0!==getCurrentPages$1().length||(e.isEntry=!0,e.isQuit=!0)}return e}function getStateId(){return history.state&&history.state.__id__||1}const CHOOSE_SIZE_TYPES=["original","compressed"],CHOOSE_SOURCE_TYPES=["album","camera"],HTTP_METHODS=["GET","OPTIONS","HEAD","POST","PUT","DELETE","TRACE","CONNECT","PATCH"];function elemInArray(e,t){return e&&-1!==t.indexOf(e)?e:t[0]}function elemsInArray(e,t){return!isArray$3(e)||0===e.length||e.find((e=>-1===t.indexOf(e)))?t:e}function tryCatch(e){return function(){try{return e.apply(e,arguments)}catch(t){console.error(t)}}}let invokeCallbackId=1;const invokeCallbacks={};function addInvokeCallback(e,t,n,r=!1){return invokeCallbacks[e]={name:t,keepAlive:r,callback:n},e}function invokeCallback(e,t,n){if("number"==typeof e){const r=invokeCallbacks[e];if(r)return r.keepAlive||delete invokeCallbacks[e],r.callback(t,n)}return t}const API_SUCCESS="success",API_FAIL="fail",API_COMPLETE="complete";function getApiCallbacks(e){const t={};for(const n in e){const r=e[n];isFunction$2(r)&&(t[n]=tryCatch(r),delete e[n])}return t}function normalizeErrMsg(e,t){return e&&-1!==e.indexOf(":fail")?t+e.substring(e.indexOf(":fail")):t+":ok"}function createAsyncApiCallback(e,t={},{beforeAll:n,beforeSuccess:r}={}){isPlainObject$4(t)||(t={});const{success:o,fail:i,complete:a}=getApiCallbacks(t),s=isFunction$2(o),c=isFunction$2(i),l=isFunction$2(a),u=invokeCallbackId++;return addInvokeCallback(u,e,(u=>{(u=u||{}).errMsg=normalizeErrMsg(u.errMsg,e),isFunction$2(n)&&n(u),u.errMsg===e+":ok"?(isFunction$2(r)&&r(u,t),s&&o(u)):c&&i(u),l&&a(u)})),u}const HOOK_SUCCESS="success",HOOK_FAIL="fail",HOOK_COMPLETE="complete",globalInterceptors={},scopedInterceptors={};function wrapperHook(e,t){return function(n){return e(n,t)||n}}function queue(e,t,n){let r=!1;for(let o=0;o<e.length;o++){const i=e[o];if(r)r=Promise.resolve(wrapperHook(i,n));else{const e=i(t,n);if(isPromise$1(e)&&(r=Promise.resolve(e)),!1===e)return{then(){},catch(){}}}}return r||{then:e=>e(t),catch(){}}}function wrapperOptions(e,t={}){return[HOOK_SUCCESS,HOOK_FAIL,HOOK_COMPLETE].forEach((n=>{const r=e[n];if(!isArray$3(r))return;const o=t[n];t[n]=function(e){queue(r,e,t).then((e=>isFunction$2(o)&&o(e)||e))}})),t}function wrapperReturnValue(e,t){const n=[];isArray$3(globalInterceptors.returnValue)&&n.push(...globalInterceptors.returnValue);const r=scopedInterceptors[e];return r&&isArray$3(r.returnValue)&&n.push(...r.returnValue),n.forEach((e=>{t=e(t)||t})),t}function getApiInterceptorHooks(e){const t=Object.create(null);Object.keys(globalInterceptors).forEach((e=>{"returnValue"!==e&&(t[e]=globalInterceptors[e].slice())}));const n=scopedInterceptors[e];return n&&Object.keys(n).forEach((e=>{"returnValue"!==e&&(t[e]=(t[e]||[]).concat(n[e]))})),t}function invokeApi(e,t,n,r){const o=getApiInterceptorHooks(e);if(o&&Object.keys(o).length){if(isArray$3(o.invoke)){return queue(o.invoke,n).then((n=>t(wrapperOptions(getApiInterceptorHooks(e),n),...r)))}return t(wrapperOptions(o,n),...r)}return t(n,...r)}function hasCallback(e){return!(!isPlainObject$4(e)||![API_SUCCESS,API_FAIL,API_COMPLETE].find((t=>isFunction$2(e[t]))))}function handlePromise(e){return e}function promisify(e,t){return(n={},...r)=>hasCallback(n)?wrapperReturnValue(e,invokeApi(e,t,n,r)):wrapperReturnValue(e,handlePromise(new Promise(((o,i)=>{invokeApi(e,t,extend$2(n,{success:o,fail:i}),r)}))))}function formatApiArgs(e,t){const n=e[0];if(!t||!t.formatArgs||!isPlainObject$4(t.formatArgs)&&isPlainObject$4(n))return;const r=t.formatArgs,o=Object.keys(r);for(let i=0;i<o.length;i++){const t=o[i],a=r[t];if(isFunction$2(a)){const r=a(e[0][t],n);if(isString$3(r))return r}else hasOwn$2(n,t)||(n[t]=a)}}function invokeSuccess(e,t,n){return invokeCallback(e,extend$2(n||{},{errMsg:t+":ok"}))}function invokeFail(e,t,n,r={}){const o=t+":fail";let i="";return i=n?0===n.indexOf(o)?n:o+" "+n:o,delete r.errCode,invokeCallback(e,extend$2({errMsg:i},r))}function beforeInvokeApi(e,t,n,r){if(r&&r.beforeInvoke){const e=r.beforeInvoke(t);if(isString$3(e))return e}const o=formatApiArgs(t,r);if(o)return o}function parseErrMsg(e){return!e||isString$3(e)?e:e.stack?("undefined"!=typeof globalThis&&globalThis.harmonyChannel||console.error(e.message+"\n"+e.stack),e.message):e}function wrapperTaskApi(e,t,n,r){return o=>{const i=createAsyncApiCallback(e,o,r),a=beforeInvokeApi(e,[o],n,r);return a?invokeFail(i,e,a):t(o,{resolve:t=>invokeSuccess(i,e,t),reject:(t,n)=>invokeFail(i,e,parseErrMsg(t),n)})}}function wrapperSyncApi(e,t,n,r){return(...o)=>{const i=beforeInvokeApi(e,o,n,r);if(i)throw new Error(i);return t.apply(null,o)}}function wrapperAsyncApi(e,t,n,r){return wrapperTaskApi(e,t,n,r)}function defineTaskApi(e,t,n,r){return promisify(e,wrapperTaskApi(e,t,void 0,r))}function defineSyncApi(e,t,n,r){return wrapperSyncApi(e,t,void 0,r)}function defineAsyncApi(e,t,n,r){return promisify(e,wrapperAsyncApi(e,t,void 0,r))}const API_UPX2PX="upx2px",EPS=1e-4,BASE_DEVICE_WIDTH=750;let isIOS$1=!1,deviceWidth=0,deviceDPR=0,maxWidth=960,baseWidth=375,includeWidth=750;function checkDeviceWidth(){const{platform:e,pixelRatio:t,windowWidth:n}=getBaseSystemInfo();deviceWidth=n,deviceDPR=t,isIOS$1="ios"===e}function checkValue(e,t){const n=Number(e);return isNaN(n)?t:n}function checkMaxWidth(){const e=__uniConfig.globalStyle||{};maxWidth=checkValue(e.rpxCalcMaxDeviceWidth,960),baseWidth=checkValue(e.rpxCalcBaseDeviceWidth,375),includeWidth=checkValue(e.rpxCalcBaseDeviceWidth,750)}const upx2px=defineSyncApi(API_UPX2PX,((e,t)=>{if(0===deviceWidth&&(checkDeviceWidth(),checkMaxWidth()),0===(e=Number(e)))return 0;let n=t||deviceWidth;n=e===includeWidth||n<=maxWidth?n:baseWidth;let r=e/BASE_DEVICE_WIDTH*n;return r<0&&(r=-r),r=Math.floor(r+EPS),0===r&&(r=1!==deviceDPR&&isIOS$1?.5:1),e<0?-r:r})),API_ON="$on",API_OFF="$off";class EventBus{constructor(){this.$emitter=new E$1$1}on(e,t){return this.$emitter.on(e,t)}once(e,t){return this.$emitter.once(e,t)}off(e,t){e?this.$emitter.off(e,t):this.$emitter.e={}}emit(e,...t){this.$emitter.emit(e,...t)}}const eventBus=new EventBus,$on=defineSyncApi(API_ON,((e,t)=>(eventBus.on(e,t),()=>eventBus.off(e,t)))),$off=defineSyncApi(API_OFF,((e,t)=>{isArray$3(e)||(e=e?[e]:[]),e.forEach((e=>eventBus.off(e,t)))})),API_CREATE_INNER_AUDIO_CONTEXT="createInnerAudioContext",RATES=[.5,.8,1,1.25,1.5,2];class VideoContext{constructor(e,t){this.id=e,this.pageId=t}play(){operateVideoPlayer(this.id,this.pageId,"play")}pause(){operateVideoPlayer(this.id,this.pageId,"pause")}stop(){operateVideoPlayer(this.id,this.pageId,"stop")}seek(e){operateVideoPlayer(this.id,this.pageId,"seek",{position:e})}sendDanmu(e){operateVideoPlayer(this.id,this.pageId,"sendDanmu",e)}playbackRate(e){~RATES.indexOf(e)||(e=1),operateVideoPlayer(this.id,this.pageId,"playbackRate",{rate:e})}requestFullScreen(e={}){operateVideoPlayer(this.id,this.pageId,"requestFullScreen",e)}exitFullScreen(){operateVideoPlayer(this.id,this.pageId,"exitFullScreen")}showStatusBar(){operateVideoPlayer(this.id,this.pageId,"showStatusBar")}hideStatusBar(){operateVideoPlayer(this.id,this.pageId,"hideStatusBar")}}const operateMapCallback=(e,t)=>{const n=t.errMsg||"";new RegExp("\\:\\s*fail").test(n)?e.fail&&e.fail(t):e.success&&e.success(t),e.complete&&e.complete(t)},operateMapWrap=(e,t,n,r)=>{operateMap(e,t,n,r,(e=>{r&&operateMapCallback(r,e)}))};class MapContext{constructor(e,t){this.id=e,this.pageId=t}getCenterLocation(e){operateMapWrap(this.id,this.pageId,"getCenterLocation",e)}moveToLocation(e){operateMapWrap(this.id,this.pageId,"moveToLocation",e)}getScale(e){operateMapWrap(this.id,this.pageId,"getScale",e)}getRegion(e){operateMapWrap(this.id,this.pageId,"getRegion",e)}includePoints(e){operateMapWrap(this.id,this.pageId,"includePoints",e)}translateMarker(e){operateMapWrap(this.id,this.pageId,"translateMarker",e)}$getAppMap(){}addCustomLayer(e){operateMapWrap(this.id,this.pageId,"addCustomLayer",e)}removeCustomLayer(e){operateMapWrap(this.id,this.pageId,"removeCustomLayer",e)}addGroundOverlay(e){operateMapWrap(this.id,this.pageId,"addGroundOverlay",e)}removeGroundOverlay(e){operateMapWrap(this.id,this.pageId,"removeGroundOverlay",e)}updateGroundOverlay(e){operateMapWrap(this.id,this.pageId,"updateGroundOverlay",e)}initMarkerCluster(e){operateMapWrap(this.id,this.pageId,"initMarkerCluster",e)}addMarkers(e){operateMapWrap(this.id,this.pageId,"addMarkers",e)}removeMarkers(e){operateMapWrap(this.id,this.pageId,"removeMarkers",e)}moveAlong(e){operateMapWrap(this.id,this.pageId,"moveAlong",e)}setLocMarkerIcon(e){operateMapWrap(this.id,this.pageId,"setLocMarkerIcon",e)}openMapApp(e){operateMapWrap(this.id,this.pageId,"openMapApp",e)}on(e,t){operateMapWrap(this.id,this.pageId,"on",{name:e,callback:t})}}function operateCanvas(e,t,n,r,o){UniServiceJSBridge$1.invokeViewMethod(`canvas.${e}`,{type:n,data:r},t,(e=>{o&&o(e)}))}function measureText(e,t){const n=document.createElement("canvas").getContext("2d");return n.font=t,n.measureText(e).width||0}const predefinedColor={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32",transparent:"#00000000"};function checkColor(e){let t=null;if(null!=(t=/^#([0-9|A-F|a-f]{6})$/.exec(e=e||"#000000"))){return[parseInt(t[1].slice(0,2),16),parseInt(t[1].slice(2,4),16),parseInt(t[1].slice(4),16),255]}if(null!=(t=/^#([0-9|A-F|a-f]{3})$/.exec(e))){let e=t[1].slice(0,1),n=t[1].slice(1,2),r=t[1].slice(2,3);return e=parseInt(e+e,16),n=parseInt(n+n,16),r=parseInt(r+r,16),[e,n,r,255]}if(null!=(t=/^rgb\((.+)\)$/.exec(e)))return t[1].split(",").map((function(e){return Math.min(255,parseInt(e.trim()))})).concat(255);if(null!=(t=/^rgba\((.+)\)$/.exec(e)))return t[1].split(",").map((function(e,t){return 3===t?Math.floor(255*parseFloat(e.trim())):Math.min(255,parseInt(e.trim()))}));var n=e.toLowerCase();if(hasOwn$2(predefinedColor,n)){t=/^#([0-9|A-F|a-f]{6,8})$/.exec(predefinedColor[n]);const e=parseInt(t[1].slice(0,2),16),r=parseInt(t[1].slice(2,4),16),o=parseInt(t[1].slice(4,6),16);let i=parseInt(t[1].slice(6,8),16);return i=i>=0?i:255,[e,r,o,i]}return console.error("unsupported color:"+e),[0,0,0,255]}class CanvasGradient{constructor(e,t){this.type=e,this.data=t,this.colorStop=[]}addColorStop(e,t){this.colorStop.push([e,checkColor(t)])}}class Pattern{constructor(e,t){this.type="pattern",this.data=e,this.colorStop=t}}class TextMetrics{constructor(e){this.width=e}}class CanvasContext{constructor(e,t){this.id=e,this.pageId=t,this.actions=[],this.path=[],this.subpath=[],this.drawingState=[],this.state={lineDash:[0,0],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:[0,0,0,0],font:"10px sans-serif",fontSize:10,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif"}}setFillStyle(e){console.log("initCanvasContextProperty implemented.")}setStrokeStyle(e){console.log("initCanvasContextProperty implemented.")}setShadow(e,t,n,r){console.log("initCanvasContextProperty implemented.")}addColorStop(e,t){console.log("initCanvasContextProperty implemented.")}setLineWidth(e){console.log("initCanvasContextProperty implemented.")}setLineCap(e){console.log("initCanvasContextProperty implemented.")}setLineJoin(e){console.log("initCanvasContextProperty implemented.")}setLineDash(e,t){console.log("initCanvasContextProperty implemented.")}setMiterLimit(e){console.log("initCanvasContextProperty implemented.")}fillRect(e,t,n,r){console.log("initCanvasContextProperty implemented.")}strokeRect(e,t,n,r){console.log("initCanvasContextProperty implemented.")}clearRect(e,t,n,r){console.log("initCanvasContextProperty implemented.")}fill(){console.log("initCanvasContextProperty implemented.")}stroke(){console.log("initCanvasContextProperty implemented.")}scale(e,t){console.log("initCanvasContextProperty implemented.")}rotate(e){console.log("initCanvasContextProperty implemented.")}translate(e,t){console.log("initCanvasContextProperty implemented.")}setFontSize(e){console.log("initCanvasContextProperty implemented.")}fillText(e,t,n,r){console.log("initCanvasContextProperty implemented.")}setTextAlign(e){console.log("initCanvasContextProperty implemented.")}setTextBaseline(e){console.log("initCanvasContextProperty implemented.")}drawImage(e,t,n,r,o,i,a,s,c){console.log("initCanvasContextProperty implemented.")}setGlobalAlpha(e){console.log("initCanvasContextProperty implemented.")}strokeText(e,t,n,r){console.log("initCanvasContextProperty implemented.")}setTransform(e,t,n,r,o,i){console.log("initCanvasContextProperty implemented.")}draw(e=!1,t){var n=[...this.actions];this.actions=[],this.path=[],operateCanvas(this.id,this.pageId,"actionsChanged",{actions:n,reserve:e},t)}createLinearGradient(e,t,n,r){return new CanvasGradient("linear",[e,t,n,r])}createCircularGradient(e,t,n){return new CanvasGradient("radial",[e,t,n])}createPattern(e,t){if(void 0===t)console.error("Failed to execute 'createPattern' on 'CanvasContext': 2 arguments required, but only 1 present.");else{if(!(["repeat","repeat-x","repeat-y","no-repeat"].indexOf(t)<0))return new Pattern(e,t);console.error("Failed to execute 'createPattern' on 'CanvasContext': The provided type ('"+t+"') is not one of 'repeat', 'no-repeat', 'repeat-x', or 'repeat-y'.")}}measureText(e,t){let n=0;return n=measureText(e,this.state.font),new TextMetrics(n)}save(){this.actions.push({method:"save",data:[]}),this.drawingState.push(this.state)}restore(){this.actions.push({method:"restore",data:[]}),this.state=this.drawingState.pop()||{lineDash:[0,0],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:[0,0,0,0],font:"10px sans-serif",fontSize:10,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif"}}beginPath(){this.path=[],this.subpath=[],this.path.push({method:"beginPath",data:[]})}moveTo(e,t){this.path.push({method:"moveTo",data:[e,t]}),this.subpath=[[e,t]]}lineTo(e,t){0===this.path.length&&0===this.subpath.length?this.path.push({method:"moveTo",data:[e,t]}):this.path.push({method:"lineTo",data:[e,t]}),this.subpath.push([e,t])}quadraticCurveTo(e,t,n,r){this.path.push({method:"quadraticCurveTo",data:[e,t,n,r]}),this.subpath.push([n,r])}bezierCurveTo(e,t,n,r,o,i){this.path.push({method:"bezierCurveTo",data:[e,t,n,r,o,i]}),this.subpath.push([o,i])}arc(e,t,n,r,o,i=!1){this.path.push({method:"arc",data:[e,t,n,r,o,i]}),this.subpath.push([e,t])}rect(e,t,n,r){this.path.push({method:"rect",data:[e,t,n,r]}),this.subpath=[[e,t]]}arcTo(e,t,n,r,o){this.path.push({method:"arcTo",data:[e,t,n,r,o]}),this.subpath.push([n,r])}clip(){this.actions.push({method:"clip",data:[...this.path]})}closePath(){this.path.push({method:"closePath",data:[]}),this.subpath.length&&(this.subpath=[this.subpath.shift()])}clearActions(){this.actions=[],this.path=[],this.subpath=[]}getActions(){var e=[...this.actions];return this.clearActions(),e}set lineDashOffset(e){this.actions.push({method:"setLineDashOffset",data:[e]})}set globalCompositeOperation(e){this.actions.push({method:"setGlobalCompositeOperation",data:[e]})}set shadowBlur(e){this.actions.push({method:"setShadowBlur",data:[e]})}set shadowColor(e){this.actions.push({method:"setShadowColor",data:[e]})}set shadowOffsetX(e){this.actions.push({method:"setShadowOffsetX",data:[e]})}set shadowOffsetY(e){this.actions.push({method:"setShadowOffsetY",data:[e]})}set font(e){var t=this;this.state.font=e;var n=e.match(/^(([\w\-]+\s)*)(\d+r?px)(\/(\d+\.?\d*(r?px)?))?\s+(.*)/);if(n){var r=n[1].trim().split(/\s/),o=parseFloat(n[3]),i=n[7],a=[];r.forEach((function(e,n){["italic","oblique","normal"].indexOf(e)>-1?(a.push({method:"setFontStyle",data:[e]}),t.state.fontStyle=e):["bold","normal"].indexOf(e)>-1?(a.push({method:"setFontWeight",data:[e]}),t.state.fontWeight=e):0===n?(a.push({method:"setFontStyle",data:["normal"]}),t.state.fontStyle="normal"):1===n&&s()})),1===r.length&&s(),r=a.map((function(e){return e.data[0]})).join(" "),this.state.fontSize=o,this.state.fontFamily=i,this.actions.push({method:"setFont",data:[`${r} ${o}px ${i}`]})}else console.warn("Failed to set 'font' on 'CanvasContext': invalid format.");function s(){a.push({method:"setFontWeight",data:["normal"]}),t.state.fontWeight="normal"}}get font(){return this.state.font}set fillStyle(e){this.setFillStyle(e)}set strokeStyle(e){this.setStrokeStyle(e)}set globalAlpha(e){e=Math.floor(255*parseFloat(e)),this.actions.push({method:"setGlobalAlpha",data:[e]})}set textAlign(e){this.actions.push({method:"setTextAlign",data:[e]})}set lineCap(e){this.actions.push({method:"setLineCap",data:[e]})}set lineJoin(e){this.actions.push({method:"setLineJoin",data:[e]})}set lineWidth(e){this.actions.push({method:"setLineWidth",data:[e]})}set miterLimit(e){this.actions.push({method:"setMiterLimit",data:[e]})}set textBaseline(e){this.actions.push({method:"setTextBaseline",data:[e]})}}const innerAudioContextEventNames=["onCanplay","onPlay","onPause","onStop","onEnded","onTimeUpdate","onError","onWaiting","onSeeking","onSeeked"],innerAudioContextOffEventNames=["offCanplay","offPlay","offPause","offStop","offEnded","offTimeUpdate","offError","offWaiting","offSeeking","offSeeked"];let index$w=0,optionsCache={};function operateEditor(e,t,n,r){const o={options:r},i=r&&("success"in r||"fail"in r||"complete"in r);if(i){const e=String(index$w++);o.callbackId=e,optionsCache[e]=r}UniServiceJSBridge$1.invokeViewMethod(`editor.${e}`,{type:n,data:o},t,(({callbackId:e,data:t})=>{i&&(callOptions(optionsCache[e],t),delete optionsCache[e])}))}class EditorContext{constructor(e,t){this.id=e,this.pageId=t}format(e,t){this._exec("format",{name:e,value:t})}insertDivider(){this._exec("insertDivider")}insertImage(e){this._exec("insertImage",e)}insertText(e){this._exec("insertText",e)}setContents(e){this._exec("setContents",e)}getContents(e){this._exec("getContents",e)}clear(e){this._exec("clear",e)}removeFormat(e){this._exec("removeFormat",e)}undo(e){this._exec("undo",e)}redo(e){this._exec("redo",e)}blur(e){this._exec("blur",e)}getSelectionText(e){this._exec("getSelectionText",e)}scrollIntoView(e){this._exec("scrollIntoView",e)}_exec(e,t){operateEditor(this.id,this.pageId,e,t)}}const ContextClasss={canvas:CanvasContext,map:MapContext,video:VideoContext,editor:EditorContext};function convertContext(e){if(e&&e.contextInfo){const{id:t,type:n,page:r}=e.contextInfo,o=ContextClasss[n];e.context=new o(t,r),delete e.contextInfo}}class NodesRef{constructor(e,t,n,r){this._selectorQuery=e,this._component=t,this._selector=n,this._single=r}boundingClientRect(e){return this._selectorQuery._push(this._selector,this._component,this._single,{id:!0,dataset:!0,rect:!0,size:!0},e),this._selectorQuery}fields(e,t){return this._selectorQuery._push(this._selector,this._component,this._single,e,t),this._selectorQuery}scrollOffset(e){return this._selectorQuery._push(this._selector,this._component,this._single,{id:!0,dataset:!0,scrollOffset:!0},e),this._selectorQuery}context(e){return this._selectorQuery._push(this._selector,this._component,this._single,{context:!0},e),this._selectorQuery}node(e){return this._selectorQuery._push(this._selector,this._component,this._single,{node:!0},e),this._selectorQuery}}class SelectorQuery{constructor(e){this._component=void 0,this._page=e,this._queue=[],this._queueCb=[]}exec(e){return requestComponentInfo(this._page,this._queue,(t=>{const n=this._queueCb;t.forEach(((e,t)=>{isArray$3(e)?e.forEach(convertContext):convertContext(e);const r=n[t];isFunction$2(r)&&r.call(this,e)})),isFunction$2(e)&&e.call(this,t)})),this._nodesRef}in(e){return this._component=resolveComponentInstance(e),this}select(e){return this._nodesRef=new NodesRef(this,this._component,e,!0)}selectAll(e){return this._nodesRef=new NodesRef(this,this._component,e,!1)}selectViewport(){return this._nodesRef=new NodesRef(this,null,"",!0)}_push(e,t,n,r,o){this._queue.push({component:t,selector:e,single:n,fields:r}),this._queueCb.push(o)}}const createSelectorQuery=defineSyncApi("createSelectorQuery",(e=>((e=resolveComponentInstance(e))&&!getPageIdByVm(e)&&(e=null),new SelectorQuery(e||getCurrentPageVm())))),API_SET_LOCALE="setLocale",API_GET_LOCALE="getLocale",API_ON_LOCALE_CHANGE="onLocaleChange",getLocale$1=defineSyncApi(API_GET_LOCALE,(()=>{const e=getApp$1();return e&&e.$vm?e.$vm.$locale:useI18n().getLocale()})),setLocale=defineSyncApi(API_SET_LOCALE,(e=>{const t=getApp$1();if(!t)return!1;return t.$vm.$locale!==e&&(t.$vm.$locale=e,navigator.cookieEnabled&&window.localStorage&&(localStorage[UNI_STORAGE_LOCALE]=e),UniServiceJSBridge$1.invokeOnCallback(API_ON_LOCALE_CHANGE,{locale:e}),!0)})),appHooks={[ON_UNHANDLE_REJECTION]:[],[ON_PAGE_NOT_FOUND]:[],[ON_ERROR]:[],[ON_SHOW]:[],[ON_HIDE]:[]};function injectAppHooks(e){Object.keys(appHooks).forEach((t=>{appHooks[t].forEach((n=>{injectHook(t,n,e)}))}))}const API_GET_STORAGE_SYNC="getStorageSync",API_SET_STORAGE_SYNC="setStorageSync",API_REMOVE_STORAGE="removeStorage",API_HIDE_KEYBOARD="hideKeyboard",API_CHOOSE_IMAGE="chooseImage",ChooseImageOptions={formatArgs:{count(e,t){(!e||e<=0)&&(t.count=9)},sizeType(e,t){t.sizeType=elemsInArray(e,CHOOSE_SIZE_TYPES)},sourceType(e,t){t.sourceType=elemsInArray(e,CHOOSE_SOURCE_TYPES)},extension(e,t){if(e instanceof Array&&0===e.length)return"param extension should not be empty.";e||(t.extension=["*"])}}},ChooseImageProtocol={count:Number,sizeType:[Array,String],sourceType:Array,extension:Array},API_REQUEST="request",dataType={JSON:"json"},RESPONSE_TYPE=["text","arraybuffer"],DEFAULT_RESPONSE_TYPE="text",encode$3=encodeURIComponent;function stringifyQuery(e,t){let n=e.split("#");const r=n[1]||"";n=n[0].split("?");let o=n[1]||"";e=n[0];const i=o.split("&").filter((e=>e)),a={};i.forEach((e=>{const t=e.split("=");a[t[0]]=t[1]}));for(const s in t)if(hasOwn$2(t,s)){let e=t[s];null==e?e="":isPlainObject$4(e)&&(e=JSON.stringify(e)),a[encode$3(s)]=encode$3(e)}return o=Object.keys(a).map((e=>`${e}=${a[e]}`)).join("&"),e+(o?"?"+o:"")+(r?"#"+r:"")}const RequestProtocol={method:String,data:[Object,String,Array,ArrayBuffer],url:{type:String,required:!0},header:Object,dataType:String,responseType:String,withCredentials:Boolean},RequestOptions={formatArgs:{method(e,t){t.method=elemInArray((e||"").toUpperCase(),HTTP_METHODS)},data(e,t){t.data=e||""},url(e,t){t.method===HTTP_METHODS[0]&&isPlainObject$4(t.data)&&Object.keys(t.data).length&&(t.url=stringifyQuery(e,t.data))},header(e,t){const n=t.header=e||{};t.method!==HTTP_METHODS[0]&&(Object.keys(n).find((e=>"content-type"===e.toLowerCase()))||(n["Content-Type"]="application/json"))},dataType(e,t){t.dataType=(e||dataType.JSON).toLowerCase()},responseType(e,t){t.responseType=(e||"").toLowerCase(),-1===RESPONSE_TYPE.indexOf(t.responseType)&&(t.responseType=DEFAULT_RESPONSE_TYPE)}}};function encodeQueryString(e){if(!isString$3(e))return e;const t=e.indexOf("?");if(-1===t)return e;const n=e.slice(t+1).trim().replace(/^(\?|#|&)/,"");if(!n)return e;e=e.slice(0,t);const r=[];return n.split("&").forEach((e=>{const t=e.replace(/\+/g," ").split("="),n=t.shift(),o=t.length>0?t.join("="):"";r.push(n+"="+encodeURIComponent(o))})),r.length?e+"?"+r.join("&"):e}const ANIMATION_IN$1=["slide-in-right","slide-in-left","slide-in-top","slide-in-bottom","fade-in","zoom-out","zoom-fade-out","pop-in","none"],ANIMATION_OUT$1=["slide-out-right","slide-out-left","slide-out-top","slide-out-bottom","fade-out","zoom-in","zoom-fade-in","pop-out","none"],BaseRouteProtocol={url:{type:String,required:!0}},API_NAVIGATE_TO="navigateTo",API_REDIRECT_TO="redirectTo",API_RE_LAUNCH="reLaunch",API_SWITCH_TAB="switchTab",API_NAVIGATE_BACK="navigateBack",API_PRELOAD_PAGE="preloadPage",API_UN_PRELOAD_PAGE="unPreloadPage",NavigateToProtocol=extend$2({},BaseRouteProtocol,createAnimationProtocol(ANIMATION_IN$1)),NavigateBackProtocol=extend$2({delta:{type:Number}},createAnimationProtocol(ANIMATION_OUT$1)),RedirectToProtocol=BaseRouteProtocol,ReLaunchProtocol=BaseRouteProtocol,SwitchTabProtocol=BaseRouteProtocol,NavigateToOptions=createRouteOptions(API_NAVIGATE_TO),RedirectToOptions=createRouteOptions(API_REDIRECT_TO),ReLaunchOptions=createRouteOptions(API_RE_LAUNCH),SwitchTabOptions=createRouteOptions(API_SWITCH_TAB),NavigateBackOptions={formatArgs:{delta(e,t){e=parseInt(e+"")||1,t.delta=Math.min(getCurrentPages$1().length-1,e)}}};function createAnimationProtocol(e){return{animationType:{type:String,validator(t){if(t&&-1===e.indexOf(t))return"`"+t+"` is not supported for `animationType` (supported values are: `"+e.join("`|`")+"`)"}},animationDuration:{type:Number}}}let navigatorLock;function beforeRoute(){navigatorLock=""}function createRouteOptions(e){return{formatArgs:{url:createNormalizeUrl(e)},beforeAll:beforeRoute}}function createNormalizeUrl(e){return function(t,n){if(!t)return'Missing required args: "url"';const r=(t=normalizeRoute(t)).split("?")[0],o=getRouteOptions(r,!0);if(!o)return"page `"+t+"` is not found";if(e===API_NAVIGATE_TO||e===API_REDIRECT_TO){if(o.meta.isTabBar)return`can not ${e} a tabbar page`}else if(e===API_SWITCH_TAB&&!o.meta.isTabBar)return"can not switch to no-tabBar page";if(e!==API_SWITCH_TAB&&e!==API_PRELOAD_PAGE||!o.meta.isTabBar||"appLaunch"===n.openType||(t=r),o.meta.isEntry&&(t=t.replace(o.alias,"/")),n.url=encodeQueryString(t),e!==API_UN_PRELOAD_PAGE)if(e!==API_PRELOAD_PAGE){if(navigatorLock===t&&"appLaunch"!==n.openType)return`${navigatorLock} locked`;__uniConfig.ready&&(navigatorLock=t)}else if(o.meta.isTabBar){const e=getCurrentPages$1(),t=o.path.slice(1);if(e.find((e=>e.route===t)))return"tabBar page `"+t+"` already exists"}}}const API_HIDE_LOADING="hideLoading",API_LOAD_FONT_FACE="loadFontFace",API_SET_NAVIGATION_BAR_COLOR="setNavigationBarColor",API_SET_NAVIGATION_BAR_TITLE="setNavigationBarTitle",API_SHOW_NAVIGATION_BAR_LOADING="showNavigationBarLoading",API_HIDE_NAVIGATION_BAR_LOADING="hideNavigationBarLoading",API_PAGE_SCROLL_TO="pageScrollTo",PageScrollToProtocol={scrollTop:Number,selector:String,duration:Number},PageScrollToOptions={formatArgs:{duration:300}},API_SHOW_LOADING="showLoading",ShowLoadingProtocol={title:String,mask:Boolean},ShowLoadingOptions={formatArgs:{title:"",mask:!1}},SHOW_TOAST_ICON=["success","loading","none","error"],API_STOP_PULL_DOWN_REFRESH="stopPullDownRefresh",IndexProtocol={index:{type:Number,required:!0}},IndexOptions={beforeInvoke(){const e=getCurrentPageMeta();if(e&&!e.isTabBar)return"not TabBar page"},formatArgs:{index(e){if(!__uniConfig.tabBar.list[e])return"tabbar item not found"}}},API_SET_TAB_BAR_ITEM="setTabBarItem";IndexOptions.beforeInvoke,IndexOptions.formatArgs;const API_SET_TAB_BAR_STYLE="setTabBarStyle",GRADIENT_RE=/^(linear|radial)-gradient\(.+?\);?$/;IndexOptions.beforeInvoke;const API_HIDE_TAB_BAR="hideTabBar",API_SHOW_TAB_BAR="showTabBar",API_HIDE_TAB_BAR_RED_DOT="hideTabBarRedDot",API_SHOW_TAB_BAR_RED_DOT="showTabBarRedDot",API_REMOVE_TAB_BAR_BADGE="removeTabBarBadge",RemoveTabBarBadgeProtocol=IndexProtocol,RemoveTabBarBadgeOptions=IndexOptions,API_SET_TAB_BAR_BADGE="setTabBarBadge",SetTabBarBadgeProtocol=extend$2({text:{type:String,required:!0}},IndexProtocol),SetTabBarBadgeOptions={beforeInvoke:IndexOptions.beforeInvoke,formatArgs:extend$2({text(e,t){getLen(e)>=4&&(t.text="...")}},IndexOptions.formatArgs)};function removeNonTabBarPages(){const e=getCurrentPageVm();if(!e)return;const t=getCurrentPagesMap(),n=t.keys();for(const r of n){const e=t.get(r);e.$.__isTabBar?e.$.__isActive=!1:removePage(r)}e.$.__isTabBar&&(e.$.__isVisible=!1,invokeHook(e,ON_HIDE))}function isSamePage(e,t){return e===t.fullPath||"/"===e&&t.meta.isEntry}function getTabBarPageId(e){const t=getCurrentPagesMap().values();for(const n of t){const t=getPage$BasePage(n);if(isSamePage(e,t))return n.$.__isActive=!0,t.id}}const switchTab=defineAsyncApi(API_SWITCH_TAB,(({url:e,tabBarText:t,isAutomatedTesting:n},{resolve:r,reject:o})=>{if(entryPageState.handledBeforeEntryPageRoutes)return removeNonTabBarPages(),navigate({type:API_SWITCH_TAB,url:e,tabBarText:t,isAutomatedTesting:n},getTabBarPageId(e)).then(r).catch(o);switchTabPagesBeforeEntryPages.push({args:{type:API_SWITCH_TAB,url:e,tabBarText:t,isAutomatedTesting:n},resolve:r,reject:o})}),SwitchTabProtocol,SwitchTabOptions);function removeLastPage(){const e=getCurrentPage();if(!e)return;const t=getPage$BasePage(e);removePage(normalizeRouteKey(t.path,t.id))}const redirectTo=defineAsyncApi(API_REDIRECT_TO,(({url:e,isAutomatedTesting:t},{resolve:n,reject:r})=>{if(entryPageState.handledBeforeEntryPageRoutes)return removeLastPage(),navigate({type:API_REDIRECT_TO,url:e,isAutomatedTesting:t}).then(n).catch(r);redirectToPagesBeforeEntryPages.push({args:{type:API_REDIRECT_TO,url:e,isAutomatedTesting:t},resolve:n,reject:r})}),RedirectToProtocol,RedirectToOptions);function removeAllPages(){const e=getCurrentPagesMap().keys();for(const t of e)removePage(t)}const reLaunch=defineAsyncApi(API_RE_LAUNCH,(({url:e,isAutomatedTesting:t},{resolve:n,reject:r})=>{if(entryPageState.handledBeforeEntryPageRoutes)return removeAllPages(),navigate({type:API_RE_LAUNCH,url:e,isAutomatedTesting:t}).then(n).catch(r);reLaunchPagesBeforeEntryPages.push({args:{type:API_RE_LAUNCH,url:e,isAutomatedTesting:t},resolve:n,reject:r})}),ReLaunchProtocol,ReLaunchOptions);function navigate({type:e,url:t,tabBarText:n,events:r,isAutomatedTesting:o},i){const a=getApp$1().$router,{path:s,query:c}=parseUrl$2(t);return new Promise(((t,l)=>{const u=createPageState(e,i);a["navigateTo"===e?"push":"replace"]({path:s,query:c,state:u,force:!0}).then((i=>{if(isNavigationFailure(i))return l(i.message);if("switchTab"===e&&(a.currentRoute.value.meta.tabBarText=n),"navigateTo"===e){const e=a.currentRoute.value.meta;return e.eventChannel?r&&(Object.keys(r).forEach((t=>{e.eventChannel._addListener(t,"on",r[t])})),e.eventChannel._clearCache()):e.eventChannel=new EventChannel(u.__id__,r),t(o?{__id__:u.__id__}:{eventChannel:e.eventChannel})}return o?t({__id__:u.__id__}):t()}))}))}function handleBeforeEntryPageRoutes(){if(entryPageState.handledBeforeEntryPageRoutes)return;entryPageState.handledBeforeEntryPageRoutes=!0;const e=[...navigateToPagesBeforeEntryPages];navigateToPagesBeforeEntryPages.length=0,e.forEach((({args:e,resolve:t,reject:n})=>navigate(e).then(t).catch(n)));const t=[...switchTabPagesBeforeEntryPages];switchTabPagesBeforeEntryPages.length=0,t.forEach((({args:e,resolve:t,reject:n})=>(removeNonTabBarPages(),navigate(e,getTabBarPageId(e.url)).then(t).catch(n))));const n=[...redirectToPagesBeforeEntryPages];redirectToPagesBeforeEntryPages.length=0,n.forEach((({args:e,resolve:t,reject:n})=>(removeLastPage(),navigate(e).then(t).catch(n))));const r=[...reLaunchPagesBeforeEntryPages];reLaunchPagesBeforeEntryPages.length=0,r.forEach((({args:e,resolve:t,reject:n})=>(removeAllPages(),navigate(e).then(t).catch(n))))}let tabBar;function useTabBar(){return tabBar||(tabBar=__uniConfig.tabBar&&reactive(initTabBarI18n(__uniConfig.tabBar))),tabBar}function cssSupports(e){const t=window.CSS&&window.CSS.supports;return t&&(t(e)||t.apply(window.CSS,e.split(":")))}const cssEnv=cssSupports("top:env(a)"),cssConstant=cssSupports("top:constant(a)"),cssBackdropFilter=cssSupports("backdrop-filter:blur(10px)"),envMethod=(()=>cssEnv?"env":cssConstant?"constant":"")();function updateCurPageCssVar(e){let t=0,n=0;if("custom"!==e.navigationBar.style&&["default","float"].indexOf(e.navigationBar.type)>-1&&(t=NAVBAR_HEIGHT),e.isTabBar){const e=useTabBar();e.shown&&(n=parseInt(e.height))}updatePageCssVar({"--window-top":normalizeWindowTop(t),"--window-bottom":normalizeWindowBottom(n)})}function normalizeWindowTop(e){return envMethod?`calc(${e}px + ${envMethod}(safe-area-inset-top))`:`${e}px`}function normalizeWindowBottom(e){return envMethod?`calc(${e}px + ${envMethod}(safe-area-inset-bottom))`:`${e}px`}const SEP="$$",currentPagesMap=new Map;function getPage$BasePage(e){return e.$page}const entryPageState={handledBeforeEntryPageRoutes:!1},navigateToPagesBeforeEntryPages=[],switchTabPagesBeforeEntryPages=[],redirectToPagesBeforeEntryPages=[],reLaunchPagesBeforeEntryPages=[];function pruneCurrentPages(){currentPagesMap.forEach(((e,t)=>{e.$.isUnmounted&&currentPagesMap.delete(t)}))}function getCurrentPagesMap(){return currentPagesMap}function getCurrentPages$1(){return getCurrentBasePages()}function getCurrentBasePages(){const e=[],t=currentPagesMap.values();for(const n of t)n.$.__isTabBar?n.$.__isActive&&e.push(n):e.push(n);return e}function removeRouteCache(e){const t=pageCacheMap.get(e);t&&(pageCacheMap.delete(e),routeCache.pruneCacheEntry(t))}function removePage(e,t=!0){const n=currentPagesMap.get(e);n.$.__isUnload=!0,invokeHook(n,ON_UNLOAD),currentPagesMap.delete(e),t&&removeRouteCache(e)}let id$1=getStateId();function createPageState(e,t){return{__id__:t||++id$1,__type__:e}}function initPublicPage(e){const t=usePageMeta();let n=e.fullPath;return e.meta.isEntry&&-1===n.indexOf(e.meta.route)&&(n="/"+e.meta.route+n.replace("/","")),initPageInternalInstance("navigateTo",n,{},t)}function initPage(e){const t=initPublicPage(e.$route);initPageVm(e,t),currentPagesMap.set(normalizeRouteKey(t.path,t.id),e),1===currentPagesMap.size&&setTimeout((()=>{handleBeforeEntryPageRoutes()}),0)}function normalizeRouteKey(e,t){return e+SEP+t}function useKeepAliveRoute(){const e=useRoute();return{routeKey:computed((()=>normalizeRouteKey("/"+e.meta.route,getStateId()))),isTabBar:computed((()=>e.meta.isTabBar)),routeCache:routeCache}}const pageCacheMap=new Map,routeCache={get:e=>pageCacheMap.get(e),set(e,t){pruneRouteCache(e),pageCacheMap.set(e,t)},delete(e){pageCacheMap.get(e)&&pageCacheMap.delete(e)},forEach(e){pageCacheMap.forEach(e)}};function isTabBarVNode(e){return"tabBar"===e.props.type}function pruneRouteCache(e){const t=parseInt(e.split(SEP)[1]);t&&routeCache.forEach(((e,n)=>{const r=parseInt(n.split(SEP)[1]);if(r&&r>t){if(isTabBarVNode(e))return;routeCache.delete(n),routeCache.pruneCacheEntry(e),nextTick((()=>pruneCurrentPages()))}}))}function updateCurPageAttrs(e){{const t="nvue-dir-"+__uniConfig.nvue["flex-direction"];e.isNVue?(document.body.setAttribute("nvue",""),document.body.setAttribute(t,"")):(document.body.removeAttribute("nvue"),document.body.removeAttribute(t))}}function onPageShow(e,t){updateBodyScopeId(e),updateCurPageCssVar(t),updateCurPageAttrs(t),initPageScrollListener(e,t)}function onPageReady(e){const t=getScopeId(e);t&&updateCurPageBodyScopeId(t)}function updateCurPageBodyScopeId(e){const t=document.querySelector("uni-page-body");t&&t.setAttribute(e,"")}function getScopeId(e){return e.type.__scopeId}let curScopeId,curScrollListener;function updateBodyScopeId(e){const t=getScopeId(e),{body:n}=document;curScopeId&&n.removeAttribute(curScopeId),t&&n.setAttribute(t,""),curScopeId=t}function initPageScrollListener(e,t){if(document.removeEventListener("touchmove",disableScrollListener),curScrollListener&&document.removeEventListener("scroll",curScrollListener),t.disableScroll)return document.addEventListener("touchmove",disableScrollListener);const{onPageScroll:n,onReachBottom:r}=e,o="transparent"===t.navigationBar.type;if(!(null==n?void 0:n.length)&&!(null==r?void 0:r.length)&&!o)return;const i={},a=getPage$BasePage(e.proxy).id;(n||o)&&(i.onPageScroll=createOnPageScroll(a,n,o)),(null==r?void 0:r.length)&&(i.onReachBottomDistance=t.onReachBottomDistance||ON_REACH_BOTTOM_DISTANCE,i.onReachBottom=()=>UniViewJSBridge$1.publishHandler(ON_REACH_BOTTOM,{},a)),curScrollListener=createScrollListener(i),requestAnimationFrame((()=>document.addEventListener("scroll",curScrollListener)))}function createOnPageScroll(e,t,n){return r=>{t&&UniViewJSBridge$1.publishHandler(ON_PAGE_SCROLL,{scrollTop:r},e),n&&UniViewJSBridge$1.emit(e+"."+ON_PAGE_SCROLL,{scrollTop:r})}}function addBase(e){const{base:t}=__uniConfig.router;return 0===addLeadingSlash(e).indexOf(t)?addLeadingSlash(e):t+e}function getRealPath(e){const{base:t,assets:n}=__uniConfig.router;if("./"===t&&(0!==e.indexOf("./")||!e.includes("/static/")&&0!==e.indexOf("./"+(n||"assets")+"/")||(e=e.slice(1))),0===e.indexOf("/")){if(0!==e.indexOf("//"))return addBase(e.slice(1));e="https:"+e}if(SCHEME_RE.test(e)||DATA_RE.test(e)||0===e.indexOf("blob:"))return e;const r=getCurrentBasePages();return r.length?addBase(getRealRoute(getPage$BasePage(r[r.length-1]).route,e).slice(1)):e}const ua=navigator.userAgent,isAndroid$1=/android/i.test(ua),isIOS=/iphone|ipad|ipod/i.test(ua),isWindows=ua.match(/Windows NT ([\d|\d.\d]*)/i),isMac=/Macintosh|Mac/i.test(ua),isLinux=/Linux|X11/i.test(ua),isIPadOS=isMac&&navigator.maxTouchPoints>0;function getScreenFix(){return/^Apple/.test(navigator.vendor)&&"number"==typeof window.orientation}function isLandscape(e){return e&&90===Math.abs(window.orientation)}function getScreenWidth(e,t){return e?Math[t?"max":"min"](screen.width,screen.height):screen.width}function getScreenHeight(e,t){return e?Math[t?"min":"max"](screen.height,screen.width):screen.height}function getWindowWidth(e){return Math.min(window.innerWidth,document.documentElement.clientWidth,e)||e}function getBaseSystemInfo(){const e=getScreenFix(),t=getWindowWidth(getScreenWidth(e,isLandscape(e)));return{platform:isIOS?"ios":"other",pixelRatio:window.devicePixelRatio,windowWidth:t}}function operateVideoPlayer(e,t,n,r){UniServiceJSBridge$1.invokeViewMethod("video."+e,{videoId:e,type:n,data:r},t)}function operateMap(e,t,n,r,o){UniServiceJSBridge$1.invokeViewMethod("map."+e,{type:n,data:r},t,o)}function getRootInfo(e){const t={};if(e.id&&(t.id=""),e.dataset&&(t.dataset={}),e.rect&&(t.left=0,t.right=0,t.top=0,t.bottom=0),e.size&&(t.width=document.documentElement.clientWidth,t.height=document.documentElement.clientHeight),e.scrollOffset){const e=document.documentElement,n=document.body;t.scrollLeft=e.scrollLeft||n.scrollLeft||0,t.scrollTop=e.scrollTop||n.scrollTop||0,t.scrollHeight=e.scrollHeight||n.scrollHeight||0,t.scrollWidth=e.scrollWidth||n.scrollWidth||0}return t}function getNodeInfo(e,t){const n={},{top:r,topWindowHeight:o}=getWindowOffset();if(t.node){const t=e.tagName.split("-")[1];t&&(n.node=e.querySelector(t))}if(t.id&&(n.id=e.id),t.dataset&&(n.dataset=getCustomDataset(e)),t.rect||t.size){const i=e.getBoundingClientRect();t.rect&&(n.left=i.left,n.right=i.right,n.top=i.top-r-o,n.bottom=i.bottom-r-o),t.size&&(n.width=i.width,n.height=i.height)}if(isArray$3(t.properties)&&t.properties.forEach((e=>{e=e.replace(/-([a-z])/g,(function(e,t){return t.toUpperCase()}))})),t.scrollOffset)if("UNI-SCROLL-VIEW"===e.tagName){const t=e.children[0].children[0];n.scrollLeft=t.scrollLeft,n.scrollTop=t.scrollTop,n.scrollHeight=t.scrollHeight,n.scrollWidth=t.scrollWidth}else n.scrollLeft=0,n.scrollTop=0,n.scrollHeight=0,n.scrollWidth=0;if(isArray$3(t.computedStyle)){const r=getComputedStyle(e);t.computedStyle.forEach((e=>{n[e]=r[e]}))}return t.context&&(n.contextInfo=getContextInfo(e)),n}function findElm(e,t){return e?e.$el:t.$el}function matches(e,t){return(e.matches||e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector||function(e){const t=this.parentElement.querySelectorAll(e);let n=t.length;for(;--n>=0&&t.item(n)!==this;);return n>-1}).call(e,t)}function getNodesInfo(e,t,n,r,o){const i=findElm(t,e),a=i.parentElement;if(!a)return r?null:[];const{nodeType:s}=i,c=3===s||8===s;if(r){const e=c?a.querySelector(n):matches(i,n)?i:i.querySelector(n);return e?getNodeInfo(e,o):null}{let e=[];const t=(c?a:i).querySelectorAll(n);return t&&t.length&&[].forEach.call(t,(t=>{e.push(getNodeInfo(t,o))})),!c&&matches(i,n)&&e.unshift(getNodeInfo(i,o)),e}}function requestComponentInfo(e,t,n){const r=[];t.forEach((({component:t,selector:n,single:o,fields:i})=>{null===t?r.push(getRootInfo(i)):r.push(getNodesInfo(e,t,n,o,i))})),n(r)}const files={};function fileToUrl(e){for(const n in files)if(hasOwn$2(files,n)){if(files[n]===e)return n}var t=(window.URL||window.webkitURL).createObjectURL(e);return files[t]=e,t}const launchOptions=createLaunchOptions(),enterOptions=createLaunchOptions();function getEnterOptions(){return extend$2({},enterOptions)}function initLaunchOptions({path:e,query:t}){return extend$2(launchOptions,{path:e,query:t}),extend$2(enterOptions,launchOptions),extend$2({},launchOptions)}const ResizeSensor=defineBuiltInComponent({name:"ResizeSensor",props:{initial:{type:Boolean,default:!1}},emits:["resize"],setup(e,{emit:t}){const n=ref(null),r=useResizeSensorReset(n),o=useResizeSensorUpdate(n,t,r);return useResizeSensorLifecycle(n,e,o,r),()=>createVNode("uni-resize-sensor",{ref:n,onAnimationstartOnce:o},[createVNode("div",{onScroll:o},[createVNode("div",null,null)],40,["onScroll"]),createVNode("div",{onScroll:o},[createVNode("div",null,null)],40,["onScroll"])],40,["onAnimationstartOnce"])}});function useResizeSensorUpdate(e,t,n){const r=reactive({width:-1,height:-1});return watch((()=>extend$2({},r)),(e=>t("resize",e))),()=>{const t=e.value;t&&(r.width=t.offsetWidth,r.height=t.offsetHeight,n())}}function useResizeSensorReset(e){return()=>{const{firstElementChild:t,lastElementChild:n}=e.value;t.scrollLeft=1e5,t.scrollTop=1e5,n.scrollLeft=1e5,n.scrollTop=1e5}}function useResizeSensorLifecycle(e,t,n,r){onActivated(r),onMounted((()=>{t.initial&&nextTick(n);const o=e.value;o.offsetParent!==o.parentElement&&(o.parentElement.style.position="relative"),"AnimationEvent"in window||r()}))}let resetTimer;function iosHideKeyboard(){}const props$u={cursorSpacing:{type:[Number,String],default:0},showConfirmBar:{type:[Boolean,String],default:"auto"},adjustPosition:{type:[Boolean,String],default:!0},autoBlur:{type:[Boolean,String],default:!1}},emit$1=["keyboardheightchange"];function useKeyboard$1(e,t,n){function r(e){const t=computed((()=>0===String(navigator.vendor).indexOf("Apple")));e.addEventListener("focus",(()=>{clearTimeout(resetTimer),document.addEventListener("click",iosHideKeyboard,!1)}));e.addEventListener("blur",(()=>{t.value&&e.blur(),document.removeEventListener("click",iosHideKeyboard,!1),t.value&&document.documentElement.scrollTo(document.documentElement.scrollLeft,document.documentElement.scrollTop)}))}watch((()=>t.value),(e=>e&&r(e)))}const props$s={src:{type:String,default:""},mode:{type:String,default:"scaleToFill"},lazyLoad:{type:[Boolean,String],default:!1},draggable:{type:Boolean,default:!1}},FIX_MODES={widthFix:["offsetWidth","height",(e,t)=>e/t],heightFix:["offsetHeight","width",(e,t)=>e*t]},IMAGE_MODES={aspectFit:["center center","contain"],aspectFill:["center center","cover"],widthFix:[,"100% 100%"],heightFix:[,"100% 100%"],top:["center top"],bottom:["center bottom"],center:["center center"],left:["left center"],right:["right center"],"top left":["left top"],"top right":["right top"],"bottom left":["left bottom"],"bottom right":["right bottom"]},index$q=defineBuiltInComponent({name:"Image",props:props$s,setup(e,{emit:t}){const n=ref(null),r=useImageState(n,e),o=useCustomEvent(n,t),{fixSize:i}=useImageSize(n,e,r);return useImageLoader(r,e,n,i,o),()=>createVNode("uni-image",{ref:n},[createVNode("div",{style:r.modeStyle},null,4),FIX_MODES[e.mode]?createVNode(ResizeSensor,{onResize:i},null,8,["onResize"]):createVNode("span",null,null)],512)}});function useImageState(e,t){const n=ref(""),r=computed((()=>{let e="auto",r="";const o=IMAGE_MODES[t.mode];return o?(o[0]&&(r=o[0]),o[1]&&(e=o[1])):(r="0% 0%",e="100% 100%"),`background-image:${n.value?'url("'+n.value+'")':"none"};background-position:${r};background-size:${e};`})),o=reactive({rootEl:e,src:computed((()=>t.src?getRealPath(t.src):"")),origWidth:0,origHeight:0,origStyle:{width:"",height:""},modeStyle:r,imgSrc:n});return onMounted((()=>{const t=e.value;o.origWidth=t.clientWidth||0,o.origHeight=t.clientHeight||0})),o}function useImageLoader(e,t,n,r,o){let i,a;const s=(t=0,n=0,r="")=>{e.origWidth=t,e.origHeight=n,e.imgSrc=r},c=c=>{if(!c)return l(),void s();i=i||new Image,i.onload=e=>{const{width:u,height:d}=i;s(u,d,c),nextTick((()=>{r()})),i.draggable=t.draggable,a&&a.remove(),a=i,n.value.appendChild(i),l(),o("load",e,{width:u,height:d})},i.onerror=t=>{s(),l(),o("error",t,{errMsg:`GET ${e.src} 404 (Not Found)`})},i.src=c},l=()=>{i&&(i.onload=null,i.onerror=null,i=null)};watch((()=>e.src),(e=>c(e))),watch((()=>e.imgSrc),(e=>{!e&&a&&(a.remove(),a=null)})),onMounted((()=>c(e.src))),onBeforeUnmount((()=>l()))}const isChrome="Google Inc."===navigator.vendor;function fixNumber(e){return isChrome&&e>10&&(e=2*Math.round(e/2)),e}function useImageSize(e,t,n){const r=()=>{const{mode:r}=t,o=FIX_MODES[r];if(!o)return;const{origWidth:i,origHeight:a}=n,s=i&&a?i/a:0;if(!s)return;const c=e.value,l=c[o[0]];l&&(c.style[o[1]]=fixNumber(o[2](l,s))+"px")},o=()=>{const{style:t}=e.value,{origStyle:{width:r,height:o}}=n;t.width=r,t.height=o};return watch((()=>t.mode),((e,t)=>{FIX_MODES[t]&&o(),FIX_MODES[e]&&r()})),{fixSize:r,resetSize:o}}function throttle$1(e,t){let n,r,o=0;const i=function(...i){const a=Date.now();clearTimeout(n),r=()=>{r=null,o=a,e.apply(this,i)},a-o<t?n=setTimeout(r,t-(a-o)):r()};return i.cancel=function(){clearTimeout(n),r=null},i.flush=function(){clearTimeout(n),r&&r()},i}const passiveOptions$1=passive(!0),states=[];let userInteract=0,inited=!1;const setUserAction=e=>states.forEach((t=>t.userAction=e));function addInteractListener(e={userAction:!1}){if(!inited){["touchstart","touchmove","touchend","mousedown","mouseup"].forEach((e=>{document.addEventListener(e,(function(){!userInteract&&setUserAction(!0),userInteract++,setTimeout((()=>{! --userInteract&&setUserAction(!1)}),0)}),passiveOptions$1)})),inited=!0}states.push(e)}function removeInteractListener(e){const t=states.indexOf(e);t>=0&&states.splice(t,1)}const getInteractStatus=()=>!!userInteract;function useUserAction(){const e=reactive({userAction:!1});return onMounted((()=>{addInteractListener(e)})),onBeforeUnmount((()=>{removeInteractListener(e)})),{state:e}}function useScopedAttrs(){const e=reactive({attrs:{}});return onMounted((()=>{let t=getCurrentInstance();for(;t;){const n=t.type.__scopeId;n&&(e.attrs[n]=""),t=t.proxy&&"page"===t.proxy.$mpType?null:t.parent}})),{state:e}}function useFormField(e,t){const n=inject(uniFormKey,!1);if(!n)return;const r=getCurrentInstance(),o={submit(){const n=r.proxy;return[n[e],isString$3(t)?n[t]:t.value]},reset(){isString$3(t)?r.proxy[t]="":t.value=""}};n.addField(o),onBeforeUnmount((()=>{n.removeField(o)}))}function getSelectedTextRange(e,t){const n=document.activeElement;if(!n)return t({});const r={};["input","textarea"].includes(n.tagName.toLowerCase())&&(r.start=n.selectionStart,r.end=n.selectionEnd),t(r)}const UniViewJSBridgeSubscribe=function(){registerViewMethod(getCurrentPageId(),"getSelectedTextRange",getSelectedTextRange)};function getValueString(e,t,n){"number"===t&&isNaN(Number(e))&&(e="");return null==e?"":String(e)}const INPUT_MODES=["none","text","decimal","numeric","tel","search","email","url"],props$r=extend$2({},{name:{type:String,default:""},modelValue:{type:[String,Number]},value:{type:[String,Number]},disabled:{type:[Boolean,String],default:!1},autoFocus:{type:[Boolean,String],default:!1},focus:{type:[Boolean,String],default:!1},cursor:{type:[Number,String],default:-1},selectionStart:{type:[Number,String],default:-1},selectionEnd:{type:[Number,String],default:-1},type:{type:String,default:"text"},password:{type:[Boolean,String],default:!1},placeholder:{type:String,default:""},placeholderStyle:{type:String,default:""},placeholderClass:{type:String,default:""},maxlength:{type:[Number,String],default:140},confirmType:{type:String,default:"done"},confirmHold:{type:Boolean,default:!1},ignoreCompositionEvent:{type:Boolean,default:!0},step:{type:String,default:"0.000000000000000001"},inputmode:{type:String,default:void 0,validator:e=>!!~INPUT_MODES.indexOf(e)},cursorColor:{type:String,default:""}},props$u),emit=["input","focus","blur","update:value","update:modelValue","update:focus","compositionstart","compositionupdate","compositionend",...emit$1];function useBase(e,t,n){const r=ref(null),o=useCustomEvent(t,n),i=computed((()=>{const t=Number(e.selectionStart);return isNaN(t)?-1:t})),a=computed((()=>{const t=Number(e.selectionEnd);return isNaN(t)?-1:t})),s=computed((()=>{const t=Number(e.cursor);return isNaN(t)?-1:t})),c=computed((()=>{var t=Number(e.maxlength);return isNaN(t)?140:t}));let l="";l=getValueString(e.modelValue,e.type)||getValueString(e.value,e.type);const u=reactive({value:l,valueOrigin:l,maxlength:c,focus:e.focus,composing:!1,selectionStart:i,selectionEnd:a,cursor:s});return watch((()=>u.focus),(e=>n("update:focus",e))),watch((()=>u.maxlength),(e=>u.value=u.value.slice(0,e)),{immediate:!1}),{fieldRef:r,state:u,trigger:o}}function useValueSync(e,t,n,r){let o=null;o=debounce((n=>{t.value=getValueString(n,e.type)}),100,{setTimeout:setTimeout,clearTimeout:clearTimeout}),watch((()=>e.modelValue),o),watch((()=>e.value),o);const i=throttle$1(((e,t)=>{o.cancel(),n("update:modelValue",t.value),n("update:value",t.value),r("input",e,t)}),100);return onBeforeMount((()=>{o.cancel(),i.cancel()})),{trigger:r,triggerInput:(e,t,n)=>{o.cancel(),i(e,t),n&&i.flush()}}}function useAutoFocus(e,t){useUserAction();const n=computed((()=>e.autoFocus||e.focus));function r(){if(!n.value)return;const e=t.value;e?e.focus():setTimeout(r,100)}watch((()=>e.focus),(e=>{e?r():function(){const e=t.value;e&&e.blur()}()})),onMounted((()=>{n.value&&nextTick(r)}))}function useEvent(e,t,n,r,o,i){function a(){const n=e.value;n&&t.focus&&t.selectionStart>-1&&t.selectionEnd>-1&&"number"!==n.type&&(n.selectionStart=t.selectionStart,n.selectionEnd=t.selectionEnd)}function s(){const n=e.value;n&&t.focus&&t.selectionStart<0&&t.selectionEnd<0&&t.cursor>-1&&"number"!==n.type&&(n.selectionEnd=n.selectionStart=t.cursor)}function c(e){return"number"===e.type?null:e.selectionEnd}watch([()=>t.selectionStart,()=>t.selectionEnd],a),watch((()=>t.cursor),s),watch((()=>e.value),(function(){const l=e.value;if(!l)return;const u=function(e,r){e.stopPropagation(),isFunction$2(i)&&!1===i(e,t)||(t.value=l.value,t.composing&&n.ignoreCompositionEvent||o(e,{value:l.value,cursor:c(l)},r))};function d(e){n.ignoreCompositionEvent||r(e.type,e,{value:e.data})}l.addEventListener("change",(e=>e.stopPropagation())),l.addEventListener("focus",(function(e){t.focus=!0,r("focus",e,{value:t.value}),a(),s()})),l.addEventListener("blur",(function(e){t.composing&&(t.composing=!1,u(e,!0)),t.focus=!1,r("blur",e,{value:t.value,cursor:c(e.target)})})),l.addEventListener("input",u),l.addEventListener("compositionstart",(e=>{e.stopPropagation(),t.composing=!0,d(e)})),l.addEventListener("compositionend",(e=>{e.stopPropagation(),t.composing&&(t.composing=!1,u(e)),d(e)})),l.addEventListener("compositionupdate",d)}))}function useField(e,t,n,r){UniViewJSBridgeSubscribe();const{fieldRef:o,state:i,trigger:a}=useBase(e,t,n),{triggerInput:s}=useValueSync(e,i,n,a);useAutoFocus(e,o),useKeyboard$1(e,o);const{state:c}=useScopedAttrs();useFormField("name",i),useEvent(o,i,e,a,s,r);return{fieldRef:o,state:i,scopedAttrsState:c,fixDisabledColor:0===String(navigator.vendor).indexOf("Apple")&&CSS.supports("image-orientation:from-image"),trigger:a}}const props$q=extend$2({},props$r,{placeholderClass:{type:String,default:"input-placeholder"},textContentType:{type:String,default:""}}),resolveDigitDecimalPointDeleteContentBackward=once((()=>{{const e=navigator.userAgent;let t="";const n=e.match(/OS\s([\w_]+)\slike/);if(n)t=n[1].replace(/_/g,".");else if(/Macintosh|Mac/i.test(e)&&navigator.maxTouchPoints>0){const n=e.match(/Version\/(\S*)\b/);n&&(t=n[1])}return!!t&&parseInt(t)>=16&&parseFloat(t)<17.2}}));function resolveDigitDecimalPoint(e,t,n,r,o){if(t.value)if("."===e.data){if("."===t.value.slice(-1))return n.value=r.value=t.value=t.value.slice(0,-1),!1;if(t.value&&!t.value.includes("."))return t.value+=".",o&&(o.fn=()=>{n.value=r.value=t.value=t.value.slice(0,-1),r.removeEventListener("blur",o.fn)},r.addEventListener("blur",o.fn)),!1}else if("deleteContentBackward"===e.inputType&&resolveDigitDecimalPointDeleteContentBackward()&&"."===t.value.slice(-2,-1))return t.value=n.value=r.value=t.value.slice(0,-2),!0}function useCache(e,t){if("number"===t.value){const t=void 0===e.modelValue?e.value:e.modelValue,n=ref(null!=t?t.toLocaleString():"");return watch((()=>e.modelValue),(e=>{n.value=null!=e?e.toLocaleString():""})),watch((()=>e.value),(e=>{n.value=null!=e?e.toLocaleString():""})),n}return ref("")}const Input=defineBuiltInComponent({name:"Input",props:props$q,emits:["confirm",...emit],setup(e,{emit:t,expose:n}){const r=["text","number","idcard","digit","password","tel"],o=["off","one-time-code"],i=computed((()=>{let t="";switch(e.type){case"text":t="text","search"===e.confirmType&&(t="search");break;case"idcard":t="text";break;case"digit":t="number";break;default:t=r.includes(e.type)?e.type:"text"}return e.password?"password":t})),a=computed((()=>{const t=o.indexOf(e.textContentType),n=o.indexOf(hyphenate(e.textContentType));return o[-1!==t?t:-1!==n?n:0]}));let s=useCache(e,i),c={fn:null};const l=ref(null),{fieldRef:u,state:d,scopedAttrsState:A,fixDisabledColor:p,trigger:h}=useField(e,l,t,((t,n)=>{const r=t.target;if("number"===i.value){if(c.fn&&(r.removeEventListener("blur",c.fn),c.fn=null),r.validity&&!r.validity.valid){if((!s.value||!r.value)&&"-"===t.data||"-"===s.value[0]&&"deleteContentBackward"===t.inputType)return s.value="-",n.value="",c.fn=()=>{s.value=r.value=""},r.addEventListener("blur",c.fn),!1;const e=resolveDigitDecimalPoint(t,s,n,r,c);return"boolean"==typeof e?e:(s.value=n.value=r.value="-"===s.value?"":s.value,!1)}{const e=resolveDigitDecimalPoint(t,s,n,r,c);if("boolean"==typeof e)return e;s.value=r.value}const o=n.maxlength;if(o>0&&r.value.length>o){r.value=r.value.slice(0,o),n.value=r.value;return(void 0!==e.modelValue&&null!==e.modelValue?e.modelValue.toString():"")!==r.value}}}));watch((()=>d.value),(t=>{"number"!==e.type||"-"===s.value&&""===t||(s.value=t.toString())}));const f=["number","digit"],g=computed((()=>f.includes(e.type)?e.step:""));function m(t){if("Enter"!==t.key)return;const n=t.target;t.stopPropagation(),h("confirm",t,{value:n.value}),!e.confirmHold&&n.blur()}return n({$triggerInput:e=>{t("update:modelValue",e.value),t("update:value",e.value),d.value=e.value}}),()=>{let t=e.disabled&&p?createVNode("input",{key:"disabled-input",ref:u,value:d.value,tabindex:"-1",readonly:!!e.disabled,type:i.value,maxlength:d.maxlength,step:g.value,class:"uni-input-input",style:e.cursorColor?{caretColor:e.cursorColor}:{},onFocus:e=>e.target.blur()},null,44,["value","readonly","type","maxlength","step","onFocus"]):createVNode("input",{key:"input",ref:u,value:d.value,onInput:e=>{d.value=e.target.value.toString()},disabled:!!e.disabled,type:i.value,maxlength:d.maxlength,step:g.value,enterkeyhint:e.confirmType,pattern:"number"===e.type?"[0-9]*":void 0,class:"uni-input-input",style:e.cursorColor?{caretColor:e.cursorColor}:{},autocomplete:a.value,onKeyup:m,inputmode:e.inputmode},null,44,["value","onInput","disabled","type","maxlength","step","enterkeyhint","pattern","autocomplete","onKeyup","inputmode"]);return createVNode("uni-input",{ref:l},[createVNode("div",{class:"uni-input-wrapper"},[withDirectives(createVNode("div",mergeProps(A.attrs,{style:e.placeholderStyle,class:["uni-input-placeholder",e.placeholderClass]}),[e.placeholder],16),[[vShow,!(d.value.length||"-"===s.value||s.value.includes("."))]]),"search"===e.confirmType?createVNode("form",{action:"",onSubmit:e=>e.preventDefault(),class:"uni-input-form"},[t],40,["onSubmit"]):t])],512)}}});function entries(e){return Object.keys(e).map((t=>[t,e[t]]))}const DEFAULT_EXCLUDE_KEYS=["class","style"],LISTENER_PREFIX=/^on[A-Z]+/,useAttrs=(e={})=>{const{excludeListeners:t=!1,excludeKeys:n=[]}=e,r=getCurrentInstance(),o=shallowRef({}),i=shallowRef({}),a=shallowRef({}),s=n.concat(DEFAULT_EXCLUDE_KEYS);return r.attrs=reactive(r.attrs),watchEffect((()=>{const e=entries(r.attrs).reduce(((e,[n,r])=>(s.includes(n)?e.exclude[n]=r:LISTENER_PREFIX.test(n)?(t||(e.attrs[n]=r),e.listeners[n]=r):e.attrs[n]=r,e)),{exclude:{},attrs:{},listeners:{}});o.value=e.attrs,i.value=e.listeners,a.value=e.exclude})),{$attrs:o,$listeners:i,$excludeAttrs:a}};function flatVNode(e){const t=[];return isArray$3(e)&&e.forEach((e=>{isVNode(e)?e.type===Fragment?t.push(...flatVNode(e.children)):t.push(e):isArray$3(e)&&t.push(...flatVNode(e))})),t}const addListenerToElement=function(e,t,n,r){e.addEventListener(t,(e=>{isFunction$2(n)&&!1===n(e)&&((void 0===e.cancelable||e.cancelable)&&e.preventDefault(),e.stopPropagation())}),{passive:!1})};let __mouseMoveEventListener,__mouseUpEventListener;function useTouchtrack(e,t,n){onBeforeUnmount((()=>{document.removeEventListener("mousemove",__mouseMoveEventListener),document.removeEventListener("mouseup",__mouseUpEventListener)}));let r=0,o=0,i=0,a=0;const s=function(e,n,s,c){if(!1===t({cancelable:e.cancelable,target:e.target,currentTarget:e.currentTarget,preventDefault:e.preventDefault.bind(e),stopPropagation:e.stopPropagation.bind(e),touches:e.touches,changedTouches:e.changedTouches,detail:{state:n,x:s,y:c,dx:s-r,dy:c-o,ddx:s-i,ddy:c-a,timeStamp:e.timeStamp}}))return!1};let c,l,u=null;addListenerToElement(e,"touchstart",(function(e){if(c=!0,1===e.touches.length&&!u)return u=e,r=i=e.touches[0].pageX,o=a=e.touches[0].pageY,s(e,"start",r,o)})),addListenerToElement(e,"mousedown",(function(e){if(l=!0,!c&&!u)return u=e,r=i=e.pageX,o=a=e.pageY,s(e,"start",r,o)})),addListenerToElement(e,"touchmove",(function(e){if(1===e.touches.length&&u){const t=s(e,"move",e.touches[0].pageX,e.touches[0].pageY);return i=e.touches[0].pageX,a=e.touches[0].pageY,t}}));const d=__mouseMoveEventListener=function(e){if(!c&&l&&u){const t=s(e,"move",e.pageX,e.pageY);return i=e.pageX,a=e.pageY,t}};document.addEventListener("mousemove",d),addListenerToElement(e,"touchend",(function(e){if(0===e.touches.length&&u)return c=!1,u=null,s(e,"end",e.changedTouches[0].pageX,e.changedTouches[0].pageY)}));const A=__mouseUpEventListener=function(e){if(l=!1,!c&&u)return u=null,s(e,"end",e.pageX,e.pageY)};document.addEventListener("mouseup",A),addListenerToElement(e,"touchcancel",(function(e){if(u){c=!1;const t=u;return u=null,s(e,n?"cancel":"end",t.touches[0].pageX,t.touches[0].pageY)}}))}const pickerViewProps={value:{type:Array,default:()=>[],validator:function(e){return isArray$3(e)&&e.filter((e=>"number"==typeof e)).length===e.length}},indicatorStyle:{type:String,default:""},indicatorClass:{type:String,default:""},maskStyle:{type:String,default:""},maskClass:{type:String,default:""}};function useState$4(e){const t=reactive([...e.value]),n=reactive({value:t,height:34});return watch((()=>e.value),((e,t)=>{n.value.length=e.length,e.forEach(((e,t)=>{e!==n.value[t]&&n.value.splice(t,1,e)}))})),n}const PickerView=defineBuiltInComponent({name:"PickerView",props:pickerViewProps,emits:["change","pickstart","pickend","update:value"],setup(e,{slots:t,emit:n}){const r=ref(null),o=ref(null),i=useCustomEvent(r,n),a=useState$4(e),s=ref(null);onMounted((()=>{const e=s.value;e&&(a.height=e.$el.offsetHeight)}));let c=ref([]),l=ref([]);function u(e){let t=l.value;t=t.filter((e=>e.type!==Comment));let n=t.indexOf(e);return-1!==n?n:c.value.indexOf(e)}return provide("getPickerViewColumn",(function(e){return computed({get(){const t=u(e.vnode);return a.value[t]||0},set(t){const r=u(e.vnode);if(r<0)return;if(a.value[r]!==t){a.value[r]=t;const e=a.value.map((e=>e));n("update:value",e),i("change",{},{value:e})}}})})),provide("pickerViewProps",e),provide("pickerViewState",a),()=>{const e=t.default&&t.default();{const t=flatVNode(e);c.value=t,nextTick((()=>{l.value=t}))}return createVNode("uni-picker-view",{ref:r},[createVNode(ResizeSensor,{ref:s,onResize:({height:e})=>a.height=e},null,8,["onResize"]),createVNode("div",{ref:o,class:"uni-picker-view-wrapper"},[e],512)],512)}}});class Friction{constructor(e){this._drag=e,this._dragLog=Math.log(e),this._x=0,this._v=0,this._startTime=0}set(e,t){this._x=e,this._v=t,this._startTime=(new Date).getTime()}setVelocityByEnd(e){this._v=(e-this._x)*this._dragLog/(Math.pow(this._drag,100)-1)}x(e){void 0===e&&(e=((new Date).getTime()-this._startTime)/1e3);const t=e===this._dt&&this._powDragDt?this._powDragDt:this._powDragDt=Math.pow(this._drag,e);return this._dt=e,this._x+this._v*t/this._dragLog-this._v/this._dragLog}dx(e){void 0===e&&(e=((new Date).getTime()-this._startTime)/1e3);const t=e===this._dt&&this._powDragDt?this._powDragDt:this._powDragDt=Math.pow(this._drag,e);return this._dt=e,this._v*t}done(){return Math.abs(this.dx())<3}reconfigure(e){const t=this.x(),n=this.dx();this._drag=e,this._dragLog=Math.log(e),this.set(t,n)}configuration(){const e=this;return[{label:"Friction",read:function(){return e._drag},write:function(t){e.reconfigure(t)},min:.001,max:.1,step:.001}]}}function o(e,t,n){return e>t-n&&e<t+n}function a$1(e,t){return o(e,0,t)}class Spring{constructor(e,t,n){this._m=e,this._k=t,this._c=n,this._solution=null,this._endPosition=0,this._startTime=0}_solve(e,t){const n=this._c,r=this._m,o=this._k,i=n*n-4*r*o;if(0===i){const o=-n/(2*r),i=e,a=t/(o*e);return{x:function(e){return(i+a*e)*Math.pow(Math.E,o*e)},dx:function(e){const t=Math.pow(Math.E,o*e);return o*(i+a*e)*t+a*t}}}if(i>0){const o=(-n-Math.sqrt(i))/(2*r),a=(-n+Math.sqrt(i))/(2*r),s=(t-o*e)/(a-o),c=e-s;return{x:function(e){let t,n;return e===this._t&&(t=this._powER1T,n=this._powER2T),this._t=e,t||(t=this._powER1T=Math.pow(Math.E,o*e)),n||(n=this._powER2T=Math.pow(Math.E,a*e)),c*t+s*n},dx:function(e){let t,n;return e===this._t&&(t=this._powER1T,n=this._powER2T),this._t=e,t||(t=this._powER1T=Math.pow(Math.E,o*e)),n||(n=this._powER2T=Math.pow(Math.E,a*e)),c*o*t+s*a*n}}}const a=Math.sqrt(4*r*o-n*n)/(2*r),s=-n/2*r,c=e,l=(t-s*e)/a;return{x:function(e){return Math.pow(Math.E,s*e)*(c*Math.cos(a*e)+l*Math.sin(a*e))},dx:function(e){const t=Math.pow(Math.E,s*e),n=Math.cos(a*e),r=Math.sin(a*e);return t*(l*a*n-c*a*r)+s*t*(l*r+c*n)}}}x(e){return void 0===e&&(e=((new Date).getTime()-this._startTime)/1e3),this._solution?this._endPosition+this._solution.x(e):0}dx(e){return void 0===e&&(e=((new Date).getTime()-this._startTime)/1e3),this._solution?this._solution.dx(e):0}setEnd(e,t,n){if(n||(n=(new Date).getTime()),e!==this._endPosition||!a$1(t,.4)){t=t||0;let r=this._endPosition;this._solution&&(a$1(t,.4)&&(t=this._solution.dx((n-this._startTime)/1e3)),r=this._solution.x((n-this._startTime)/1e3),a$1(t,.4)&&(t=0),a$1(r,.4)&&(r=0),r+=this._endPosition),this._solution&&a$1(r-e,.4)&&a$1(t,.4)||(this._endPosition=e,this._solution=this._solve(r-this._endPosition,t),this._startTime=n)}}snap(e){this._startTime=(new Date).getTime(),this._endPosition=e,this._solution={x:function(){return 0},dx:function(){return 0}}}done(e){return e||(e=(new Date).getTime()),o(this.x(),this._endPosition,.4)&&a$1(this.dx(),.4)}reconfigure(e,t,n){this._m=e,this._k=t,this._c=n,this.done()||(this._solution=this._solve(this.x()-this._endPosition,this.dx()),this._startTime=(new Date).getTime())}springConstant(){return this._k}damping(){return this._c}configuration(){return[{label:"Spring Constant",read:this.springConstant.bind(this),write:function(e,t){e.reconfigure(1,t,e.damping())}.bind(this,this),min:100,max:1e3},{label:"Damping",read:this.damping.bind(this),write:function(e,t){e.reconfigure(1,e.springConstant(),t)}.bind(this,this),min:1,max:500}]}}class Scroll{constructor(e,t,n){this._extent=e,this._friction=t||new Friction(.01),this._spring=n||new Spring(1,90,20),this._startTime=0,this._springing=!1,this._springOffset=0}snap(e,t){this._springOffset=0,this._springing=!0,this._spring.snap(e),this._spring.setEnd(t)}set(e,t){this._friction.set(e,t),e>0&&t>=0?(this._springOffset=0,this._springing=!0,this._spring.snap(e),this._spring.setEnd(0)):e<-this._extent&&t<=0?(this._springOffset=0,this._springing=!0,this._spring.snap(e),this._spring.setEnd(-this._extent)):this._springing=!1,this._startTime=(new Date).getTime()}x(e){if(!this._startTime)return 0;if(e||(e=((new Date).getTime()-this._startTime)/1e3),this._springing)return this._spring.x()+this._springOffset;let t=this._friction.x(e),n=this.dx(e);return(t>0&&n>=0||t<-this._extent&&n<=0)&&(this._springing=!0,this._spring.setEnd(0,n),t<-this._extent?this._springOffset=-this._extent:this._springOffset=0,t=this._spring.x()+this._springOffset),t}dx(e){let t;return t=this._lastTime===e?this._lastDx:this._springing?this._spring.dx(e):this._friction.dx(e),this._lastTime=e,this._lastDx=t,t}done(){return this._springing?this._spring.done():this._friction.done()}setVelocityByEnd(e){this._friction.setVelocityByEnd(e)}configuration(){const e=this._friction.configuration();return e.push.apply(e,this._spring.configuration()),e}}function createAnimation$1(e,t,n){const r={id:0,cancelled:!1};return function e(t,n,r,o){if(!t||!t.cancelled){r(n);const i=n.done();i||t.cancelled||(t.id=requestAnimationFrame(e.bind(null,t,n,r,o))),i&&o&&o(n)}}(r,e,t,n),{cancel:function(e){e&&e.id&&cancelAnimationFrame(e.id),e&&(e.cancelled=!0)}.bind(null,r),model:e}}class Scroller{constructor(e,t){t=t||{},this._element=e,this._options=t,this._enableSnap=t.enableSnap||!1,this._itemSize=t.itemSize||0,this._enableX=t.enableX||!1,this._enableY=t.enableY||!1,this._shouldDispatchScrollEvent=!!t.onScroll,this._enableX?(this._extent=(t.scrollWidth||this._element.offsetWidth)-this._element.parentElement.offsetWidth,this._scrollWidth=t.scrollWidth):(this._extent=(t.scrollHeight||this._element.offsetHeight)-this._element.parentElement.offsetHeight,this._scrollHeight=t.scrollHeight),this._position=0,this._scroll=new Scroll(this._extent,t.friction,t.spring),this._onTransitionEnd=this.onTransitionEnd.bind(this),this.updatePosition()}onTouchStart(){this._startPosition=this._position,this._lastChangePos=this._startPosition,this._startPosition>0?this._startPosition/=.5:this._startPosition<-this._extent&&(this._startPosition=(this._startPosition+this._extent)/.5-this._extent),this._animation&&(this._animation.cancel(),this._scrolling=!1),this.updatePosition()}onTouchMove(e,t){let n=this._startPosition;this._enableX?n+=e:this._enableY&&(n+=t),n>0?n*=.5:n<-this._extent&&(n=.5*(n+this._extent)-this._extent),this._position=n,this.updatePosition(),this.dispatchScroll()}onTouchEnd(e,t,n){if(this._enableSnap&&this._position>-this._extent&&this._position<0){if(this._enableY&&(Math.abs(t)<this._itemSize&&Math.abs(n.y)<300||Math.abs(n.y)<150))return void this.snap();if(this._enableX&&(Math.abs(e)<this._itemSize&&Math.abs(n.x)<300||Math.abs(n.x)<150))return void this.snap()}let r;if(this._enableX?this._scroll.set(this._position,n.x):this._enableY&&this._scroll.set(this._position,n.y),this._enableSnap){const e=this._scroll._friction.x(100),t=e%this._itemSize;r=Math.abs(t)>this._itemSize/2?e-(this._itemSize-Math.abs(t)):e-t,r<=0&&r>=-this._extent&&this._scroll.setVelocityByEnd(r)}this._lastTime=Date.now(),this._lastDelay=0,this._scrolling=!0,this._lastChangePos=this._position,this._lastIdx=Math.floor(Math.abs(this._position/this._itemSize)),this._animation=createAnimation$1(this._scroll,(()=>{const e=Date.now(),t=(e-this._scroll._startTime)/1e3,n=this._scroll.x(t);this._position=n,this.updatePosition();const r=this._scroll.dx(t);this._shouldDispatchScrollEvent&&e-this._lastTime>this._lastDelay&&(this.dispatchScroll(),this._lastDelay=Math.abs(2e3/r),this._lastTime=e)}),(()=>{this._enableSnap&&(r<=0&&r>=-this._extent&&(this._position=r,this.updatePosition()),isFunction$2(this._options.onSnap)&&this._options.onSnap(Math.floor(Math.abs(this._position)/this._itemSize))),this._shouldDispatchScrollEvent&&this.dispatchScroll(),this._scrolling=!1}))}onTransitionEnd(){this._element.style.webkitTransition="",this._element.style.transition="",this._element.removeEventListener("transitionend",this._onTransitionEnd),this._snapping&&(this._snapping=!1),this.dispatchScroll()}snap(){const e=this._itemSize,t=this._position%e,n=Math.abs(t)>this._itemSize/2?this._position-(e-Math.abs(t)):this._position-t;this._position!==n&&(this._snapping=!0,this.scrollTo(-n),isFunction$2(this._options.onSnap)&&this._options.onSnap(Math.floor(Math.abs(this._position)/this._itemSize)))}scrollTo(e,t){this._animation&&(this._animation.cancel(),this._scrolling=!1),"number"==typeof e&&(this._position=-e),this._position<-this._extent?this._position=-this._extent:this._position>0&&(this._position=0);const n="transform "+(t||.2)+"s ease-out";this._element.style.webkitTransition="-webkit-"+n,this._element.style.transition=n,this.updatePosition(),this._element.addEventListener("transitionend",this._onTransitionEnd)}dispatchScroll(){if(isFunction$2(this._options.onScroll)&&Math.round(Number(this._lastPos))!==Math.round(this._position)){this._lastPos=this._position;const e={target:{scrollLeft:this._enableX?-this._position:0,scrollTop:this._enableY?-this._position:0,scrollHeight:this._scrollHeight||this._element.offsetHeight,scrollWidth:this._scrollWidth||this._element.offsetWidth,offsetHeight:this._element.parentElement.offsetHeight,offsetWidth:this._element.parentElement.offsetWidth}};this._options.onScroll(e)}}update(e,t,n){let r=0;const o=this._position;this._enableX?(r=this._element.childNodes.length?(t||this._element.offsetWidth)-this._element.parentElement.offsetWidth:0,this._scrollWidth=t):(r=this._element.childNodes.length?(t||this._element.offsetHeight)-this._element.parentElement.offsetHeight:0,this._scrollHeight=t),"number"==typeof e&&(this._position=-e),this._position<-r?this._position=-r:this._position>0&&(this._position=0),this._itemSize=n||this._itemSize,this.updatePosition(),o!==this._position&&(this.dispatchScroll(),isFunction$2(this._options.onSnap)&&this._options.onSnap(Math.floor(Math.abs(this._position)/this._itemSize))),this._extent=r,this._scroll._extent=r}updatePosition(){let e="";this._enableX?e="translateX("+this._position+"px) translateZ(0)":this._enableY&&(e="translateY("+this._position+"px) translateZ(0)"),this._element.style.webkitTransform=e,this._element.style.transform=e}isScrolling(){return this._scrolling||this._snapping}}function useScroller(e,t){const n={trackingID:-1,maxDy:0,maxDx:0},r=new Scroller(e,t);function o(e){const t=e,r=e;return"move"===t.detail.state||"end"===t.detail.state?{x:t.detail.dx,y:t.detail.dy}:{x:r.screenX-n.x,y:r.screenY-n.y}}return{scroller:r,handleTouchStart:function(e){const t=e,o=e;"start"===t.detail.state?(n.trackingID="touch",n.x=t.detail.x,n.y=t.detail.y):(n.trackingID="mouse",n.x=o.screenX,n.y=o.screenY),n.maxDx=0,n.maxDy=0,n.historyX=[0],n.historyY=[0],n.historyTime=[t.detail.timeStamp||o.timeStamp],n.listener=r,r.onTouchStart&&r.onTouchStart(),("boolean"!=typeof e.cancelable||e.cancelable)&&e.preventDefault()},handleTouchMove:function(e){const t=e,r=e;if(-1!==n.trackingID){("boolean"!=typeof e.cancelable||e.cancelable)&&e.preventDefault();const i=o(e);if(i){for(n.maxDy=Math.max(n.maxDy,Math.abs(i.y)),n.maxDx=Math.max(n.maxDx,Math.abs(i.x)),n.historyX.push(i.x),n.historyY.push(i.y),n.historyTime.push(t.detail.timeStamp||r.timeStamp);n.historyTime.length>10;)n.historyTime.shift(),n.historyX.shift(),n.historyY.shift();n.listener&&n.listener.onTouchMove&&n.listener.onTouchMove(i.x,i.y)}}},handleTouchEnd:function(e){if(-1!==n.trackingID){e.preventDefault();const t=o(e);if(t){const e=n.listener;n.trackingID=-1,n.listener=null;const r={x:0,y:0};if(n.historyTime.length>2)for(let t=n.historyTime.length-1,o=n.historyTime[t],i=n.historyX[t],a=n.historyY[t];t>0;){t--;const e=o-n.historyTime[t];if(e>30&&e<50){r.x=(i-n.historyX[t])/(e/1e3),r.y=(a-n.historyY[t])/(e/1e3);break}}n.historyTime=[],n.historyX=[],n.historyY=[],e&&e.onTouchEnd&&e.onTouchEnd(t.x,t.y,r)}}}}}function useCustomClick(e){let t=0,n=0;e.addEventListener("touchstart",(e=>{const r=e.changedTouches[0];t=r.clientX,n=r.clientY})),e.addEventListener("touchend",(e=>{const r=e.changedTouches[0];if(Math.abs(r.clientX-t)<20&&Math.abs(r.clientY-n)<20){const t={bubbles:!0,cancelable:!0,target:e.target,currentTarget:e.currentTarget},n=new CustomEvent("click",t);["screenX","screenY","clientX","clientY","pageX","pageY"].forEach((e=>{n[e]=r[e]})),e.target.dispatchEvent(n)}}))}const PickerViewColumn=defineBuiltInComponent({name:"PickerViewColumn",setup(e,{slots:t,emit:n}){const r=ref(null),o=ref(null),i=inject("getPickerViewColumn"),a=getCurrentInstance(),s=i?i(a):ref(0),c=inject("pickerViewProps"),l=inject("pickerViewState"),u=ref(34),d=ref(null);onMounted((()=>{const e=d.value;u.value=e.$el.offsetHeight}));const A=computed((()=>(l.height-u.value)/2)),{state:p}=useScopedAttrs();let h;const f=reactive({current:s.value,length:0});let g;function m(){h&&!g&&(g=!0,nextTick((()=>{g=!1;let e=Math.min(f.current,f.length-1);e=Math.max(e,0),h.update(e*u.value,void 0,u.value)})))}watch((()=>s.value),(e=>{e!==f.current&&(f.current=e,m())})),watch((()=>f.current),(e=>s.value=e)),watch([()=>u.value,()=>f.length,()=>l.height],m);let _=0;function E(e){const t=_+e.deltaY;if(Math.abs(t)>10){_=0;let e=Math.min(f.current+(t<0?-1:1),f.length-1);f.current=e=Math.max(e,0),h.scrollTo(e*u.value)}else _=t;e.preventDefault()}function v({clientY:e}){const t=r.value;if(!h.isScrolling()){const n=e-t.getBoundingClientRect().top-l.height/2,r=u.value/2;if(!(Math.abs(n)<=r)){const e=Math.ceil((Math.abs(n)-r)/u.value),t=n<0?-e:e;let o=Math.min(f.current+t,f.length-1);f.current=o=Math.max(o,0),h.scrollTo(o*u.value)}}}return onMounted((()=>{const e=r.value,t=o.value,{scroller:n,handleTouchStart:i,handleTouchMove:a,handleTouchEnd:s}=useScroller(t,{enableY:!0,enableX:!1,enableSnap:!0,itemSize:u.value,friction:new Friction(1e-4),spring:new Spring(2,90,20),onSnap:e=>{isNaN(e)||e===f.current||(f.current=e)}});h=n,useTouchtrack(e,(e=>{switch(e.detail.state){case"start":i(e);break;case"move":a(e),e.stopPropagation();break;case"end":case"cancel":s(e)}}),!0),useCustomClick(e),m()})),()=>{const e=t.default&&t.default();f.length=flatVNode(e).length;const n=`${A.value}px 0`;return createVNode("uni-picker-view-column",{ref:r},[createVNode("div",{onWheel:E,onClick:v,class:"uni-picker-view-group"},[createVNode("div",mergeProps(p.attrs,{class:["uni-picker-view-mask",c.maskClass],style:`background-size: 100% ${A.value}px;${c.maskStyle}`}),null,16),createVNode("div",mergeProps(p.attrs,{class:["uni-picker-view-indicator",c.indicatorClass],style:c.indicatorStyle}),[createVNode(ResizeSensor,{ref:d,onResize:({height:e})=>u.value=e},null,8,["onResize"])],16),createVNode("div",{ref:o,class:["uni-picker-view-content"],style:{padding:n,"--picker-view-column-indicator-height":`${u.value}px`}},[e],4)],40,["onWheel","onClick"])],512)}}}),Refresher=defineBuiltInComponent({name:"Refresher",props:{refreshState:{type:String,default:""},refresherHeight:{type:Number,default:0},refresherThreshold:{type:Number,default:45},refresherDefaultStyle:{type:String,default:"black"},refresherBackground:{type:String,default:"#fff"}},setup(e,{slots:t}){const n=ref(null),r=computed((()=>{const t={backgroundColor:e.refresherBackground};switch(e.refreshState){case"pulling":t.height=e.refresherHeight+"px";break;case"refreshing":t.height=e.refresherThreshold+"px",t.transition="height 0.3s";break;case"":case"refresherabort":case"restore":t.height="0px",t.transition="height 0.3s"}return t})),o=computed((()=>{const t=e.refresherHeight/e.refresherThreshold;return 360*(t>1?1:t)}));return()=>{const{refreshState:i,refresherDefaultStyle:a,refresherThreshold:s}=e;return createVNode("div",{ref:n,style:r.value,class:"uni-scroll-view-refresher"},["none"!==a?createVNode("div",{class:"uni-scroll-view-refresh"},[createVNode("div",{class:"uni-scroll-view-refresh-inner"},["pulling"==i?createVNode("svg",{key:"refresh__icon",style:{transform:"rotate("+o.value+"deg)"},fill:"#2BD009",class:"uni-scroll-view-refresh__icon",width:"24",height:"24",viewBox:"0 0 24 24"},[createVNode("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"},null),createVNode("path",{d:"M0 0h24v24H0z",fill:"none"},null)],4):null,"refreshing"==i?createVNode("svg",{key:"refresh__spinner",class:"uni-scroll-view-refresh__spinner",width:"24",height:"24",viewBox:"25 25 50 50"},[createVNode("circle",{cx:"50",cy:"50",r:"20",fill:"none",style:"color: #2bd009","stroke-width":"3"},null)]):null])]):null,"none"===a?createVNode("div",{class:"uni-scroll-view-refresher-container",style:{height:`${s}px`}},[t.default&&t.default()]):null],4)}}}),passiveOptions=passive(!0),props$m={direction:{type:[String],default:"vertical"},scrollX:{type:[Boolean,String],default:!1},scrollY:{type:[Boolean,String],default:!1},showScrollbar:{type:[Boolean,String],default:!0},upperThreshold:{type:[Number,String],default:50},lowerThreshold:{type:[Number,String],default:50},scrollTop:{type:[Number,String],default:0},scrollLeft:{type:[Number,String],default:0},scrollIntoView:{type:String,default:""},scrollWithAnimation:{type:[Boolean,String],default:!1},enableBackToTop:{type:[Boolean,String],default:!1},refresherEnabled:{type:[Boolean,String],default:!1},refresherThreshold:{type:Number,default:45},refresherDefaultStyle:{type:String,default:"black"},refresherBackground:{type:String,default:"#fff"},refresherTriggered:{type:[Boolean,String],default:!1}},ScrollView=defineBuiltInComponent({name:"ScrollView",compatConfig:{MODE:3},props:props$m,emits:["scroll","scrolltoupper","scrolltolower","refresherrefresh","refresherrestore","refresherpulling","refresherabort","update:refresherTriggered"],setup(e,{emit:t,slots:n,expose:r}){const o=ref(null),i=ref(null),a=ref(null),s=ref(null),c=useCustomEvent(o,t),{state:l,scrollTopNumber:u,scrollLeftNumber:d}=useScrollViewState(e),{realScrollX:A,realScrollY:p,_scrollLeftChanged:h,_scrollTopChanged:f}=useScrollViewLoader(e,l,u,d,c,o,i,s,t),g=computed((()=>{let e="";return A.value?e+="overflow-x:auto;":e+="overflow-x:hidden;",p.value?e+="overflow-y:auto;":e+="overflow-y:hidden;",e})),m=computed((()=>{let t="uni-scroll-view";return!1===e.showScrollbar&&(t+=" uni-scroll-view-scrollbar-hidden"),t}));return r({$getMain:()=>i.value}),()=>{const{refresherEnabled:t,refresherBackground:r,refresherDefaultStyle:c,refresherThreshold:u}=e,{refresherHeight:d,refreshState:A}=l;return createVNode("uni-scroll-view",{ref:o},[createVNode("div",{ref:a,class:"uni-scroll-view"},[createVNode("div",{ref:i,style:g.value,class:m.value},[t?createVNode(Refresher,{refreshState:A,refresherHeight:d,refresherThreshold:u,refresherDefaultStyle:c,refresherBackground:r},{default:()=>["none"==c?n.refresher&&n.refresher():null]},8,["refreshState","refresherHeight","refresherThreshold","refresherDefaultStyle","refresherBackground"]):null,createVNode("div",{ref:s,class:"uni-scroll-view-content"},[n.default&&n.default()],512)],6)],512)],512)}}});function useScrollViewState(e){const t=computed((()=>Number(e.scrollTop)||0)),n=computed((()=>Number(e.scrollLeft)||0));return{state:reactive({lastScrollTop:t.value,lastScrollLeft:n.value,lastScrollToUpperTime:0,lastScrollToLowerTime:0,refresherHeight:0,refreshState:""}),scrollTopNumber:t,scrollLeftNumber:n}}function useScrollViewLoader(e,t,n,r,o,i,a,s,c){let l=!1,u=0,d=!1,A=()=>{};const p=computed((()=>e.scrollX)),h=computed((()=>e.scrollY)),f=computed((()=>{let t=Number(e.upperThreshold);return isNaN(t)?50:t})),g=computed((()=>{let t=Number(e.lowerThreshold);return isNaN(t)?50:t}));function m(e,t){const n=a.value;let r=0,o="";if(e<0?e=0:"x"===t&&e>n.scrollWidth-n.offsetWidth?e=n.scrollWidth-n.offsetWidth:"y"===t&&e>n.scrollHeight-n.offsetHeight&&(e=n.scrollHeight-n.offsetHeight),"x"===t?r=n.scrollLeft-e:"y"===t&&(r=n.scrollTop-e),0===r)return;let i=s.value;i.style.transition="transform .3s ease-out",i.style.webkitTransition="-webkit-transform .3s ease-out","x"===t?o="translateX("+r+"px) translateZ(0)":"y"===t&&(o="translateY("+r+"px) translateZ(0)"),i.removeEventListener("transitionend",A),i.removeEventListener("webkitTransitionEnd",A),A=()=>function(e,t){s.value.style.transition="",s.value.style.webkitTransition="",s.value.style.transform="",s.value.style.webkitTransform="";let n=a.value;"x"===t?(n.style.overflowX=p.value?"auto":"hidden",n.scrollLeft=e):"y"===t&&(n.style.overflowY=h.value?"auto":"hidden",n.scrollTop=e);s.value.removeEventListener("transitionend",A),s.value.removeEventListener("webkitTransitionEnd",A)}(e,t),i.addEventListener("transitionend",A),i.addEventListener("webkitTransitionEnd",A),"x"===t?n.style.overflowX="hidden":"y"===t&&(n.style.overflowY="hidden"),i.style.transform=o,i.style.webkitTransform=o}function _(t){h.value&&(e.scrollWithAnimation?m(t,"y"):a.value.scrollTop=t)}function E(t){p.value&&(e.scrollWithAnimation?m(t,"x"):a.value.scrollLeft=t)}function v(t){if(t){if(!/^[_a-zA-Z][-_a-zA-Z0-9:]*$/.test(t))return void console.error(`id error: scroll-into-view=${t}`);let n=i.value.querySelector("#"+t);if(n){let t=a.value.getBoundingClientRect(),r=n.getBoundingClientRect();if(p.value){let n=r.left-t.left,o=a.value.scrollLeft+n;e.scrollWithAnimation?m(o,"x"):a.value.scrollLeft=o}if(h.value){let n=r.top-t.top,o=a.value.scrollTop+n;e.scrollWithAnimation?m(o,"y"):a.value.scrollTop=o}}}}function y(n){if(e.refresherEnabled){switch(n){case"refreshing":t.refresherHeight=e.refresherThreshold,l||(l=!0,o("refresherpulling",{},{deltaY:t.refresherHeight,dy:t.refresherHeight}),o("refresherrefresh",{},{dy:C.y-b.y}),c("update:refresherTriggered",!0));break;case"restore":case"refresherabort":l=!1,t.refresherHeight=u=0,"restore"===n&&(d=!1,o("refresherrestore",{},{dy:C.y-b.y})),"refresherabort"===n&&d&&(d=!1,o("refresherabort",{},{dy:C.y-b.y}))}t.refreshState=n}}let b={x:0,y:0},C={x:0,y:e.refresherThreshold};return onMounted((()=>{nextTick((()=>{_(n.value),E(r.value)})),v(e.scrollIntoView);let i=function(e){e.preventDefault(),e.stopPropagation(),function(e){const n=e.target;o("scroll",e,{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop,scrollHeight:n.scrollHeight,scrollWidth:n.scrollWidth,deltaX:t.lastScrollLeft-n.scrollLeft,deltaY:t.lastScrollTop-n.scrollTop}),h.value&&(n.scrollTop<=f.value&&t.lastScrollTop-n.scrollTop>0&&e.timeStamp-t.lastScrollToUpperTime>200&&(o("scrolltoupper",e,{direction:"top"}),t.lastScrollToUpperTime=e.timeStamp),n.scrollTop+n.offsetHeight+g.value>=n.scrollHeight&&t.lastScrollTop-n.scrollTop<0&&e.timeStamp-t.lastScrollToLowerTime>200&&(o("scrolltolower",e,{direction:"bottom"}),t.lastScrollToLowerTime=e.timeStamp)),p.value&&(n.scrollLeft<=f.value&&t.lastScrollLeft-n.scrollLeft>0&&e.timeStamp-t.lastScrollToUpperTime>200&&(o("scrolltoupper",e,{direction:"left"}),t.lastScrollToUpperTime=e.timeStamp),n.scrollLeft+n.offsetWidth+g.value>=n.scrollWidth&&t.lastScrollLeft-n.scrollLeft<0&&e.timeStamp-t.lastScrollToLowerTime>200&&(o("scrolltolower",e,{direction:"right"}),t.lastScrollToLowerTime=e.timeStamp)),t.lastScrollTop=n.scrollTop,t.lastScrollLeft=n.scrollLeft}(e)},s=null,c=function(n){if(null===b)return;let r=n.touches[0].pageX,i=n.touches[0].pageY,c=a.value;if(Math.abs(r-b.x)>Math.abs(i-b.y))if(p.value){if(0===c.scrollLeft&&r>b.x)return void(s=!1);if(c.scrollWidth===c.offsetWidth+c.scrollLeft&&r<b.x)return void(s=!1);s=!0}else s=!1;else if(h.value)if(0===c.scrollTop&&i>b.y)s=!1,e.refresherEnabled&&!1!==n.cancelable&&n.preventDefault();else{if(c.scrollHeight===c.offsetHeight+c.scrollTop&&i<b.y)return void(s=!1);s=!0}else s=!1;if(s&&n.stopPropagation(),0===c.scrollTop&&1===n.touches.length&&y("pulling"),e.refresherEnabled&&"pulling"===t.refreshState){const r=i-b.y;0===u&&(u=i),l?(t.refresherHeight=r+e.refresherThreshold,d=!1):(t.refresherHeight=i-u,t.refresherHeight>0&&(d=!0,o("refresherpulling",n,{deltaY:r,dy:r})))}},A=function(e){1===e.touches.length&&(b={x:e.touches[0].pageX,y:e.touches[0].pageY})},m=function(n){C={x:n.changedTouches[0].pageX,y:n.changedTouches[0].pageY},t.refresherHeight>=e.refresherThreshold?y("refreshing"):y("refresherabort"),b={x:0,y:0},C={x:0,y:e.refresherThreshold}};a.value.addEventListener("touchstart",A,passiveOptions),a.value.addEventListener("touchmove",c,passive(!1)),a.value.addEventListener("scroll",i,passive(!1)),a.value.addEventListener("touchend",m,passiveOptions),onBeforeUnmount((()=>{a.value.removeEventListener("touchstart",A),a.value.removeEventListener("touchmove",c),a.value.removeEventListener("scroll",i),a.value.removeEventListener("touchend",m)}))})),onActivated((()=>{h.value&&(a.value.scrollTop=t.lastScrollTop),p.value&&(a.value.scrollLeft=t.lastScrollLeft)})),watch(n,(e=>{_(e)})),watch(r,(e=>{E(e)})),watch((()=>e.scrollIntoView),(e=>{v(e)})),watch((()=>e.refresherTriggered),(e=>{!0===e?y("refreshing"):!1===e&&y("restore")})),{realScrollX:p,realScrollY:h,_scrollTopChanged:_,_scrollLeftChanged:E}}const props$k={indicatorDots:{type:[Boolean,String],default:!1},vertical:{type:[Boolean,String],default:!1},autoplay:{type:[Boolean,String],default:!1},circular:{type:[Boolean,String],default:!1},interval:{type:[Number,String],default:5e3},duration:{type:[Number,String],default:500},current:{type:[Number,String],default:0},indicatorColor:{type:String,default:""},indicatorActiveColor:{type:String,default:""},previousMargin:{type:String,default:""},nextMargin:{type:String,default:""},currentItemId:{type:String,default:""},skipHiddenItemLayout:{type:[Boolean,String],default:!1},displayMultipleItems:{type:[Number,String],default:1},disableTouch:{type:[Boolean,String],default:!1},navigation:{type:[Boolean,String],default:!1},navigationColor:{type:String,default:"#fff"},navigationActiveColor:{type:String,default:"rgba(53, 53, 53, 0.6)"}};function useState$3(e){return reactive({interval:computed((()=>{const t=Number(e.interval);return isNaN(t)?5e3:t})),duration:computed((()=>{const t=Number(e.duration);return isNaN(t)?500:t})),displayMultipleItems:computed((()=>{const t=Math.round(e.displayMultipleItems);return isNaN(t)?1:t})),current:Math.round(e.current)||0,currentItemId:e.currentItemId,userTracking:!1})}function useLayout(e,t,n,r,o,i){function a(){l&&(clearTimeout(l),l=null)}let s,c,l=null,u=!0,d=0,A=1,p=null,h=!1,f=0,g="";const m=computed((()=>n.value.length>t.displayMultipleItems)),_=computed((()=>e.circular&&m.value));function E(o){Math.floor(2*d)===Math.floor(2*o)&&Math.ceil(2*d)===Math.ceil(2*o)||_.value&&function(r){if(!u)for(let o=n.value,i=o.length,a=r+t.displayMultipleItems,s=0;s<i;s++){const t=o[s],n=Math.floor(r/i)*i+s,c=n+i,l=n-i,u=Math.max(r-(n+1),n-a,0),d=Math.max(r-(c+1),c-a,0),A=Math.max(r-(l+1),l-a,0),p=Math.min(u,d,A),h=[n,c,l][[u,d,A].indexOf(p)];t.updatePosition(h,e.vertical)}}(o);const a="translate("+(e.vertical?"0":100*-o*A+"%")+", "+(e.vertical?100*-o*A+"%":"0")+") translateZ(0)",c=r.value;if(c&&(c.style.webkitTransform=a,c.style.transform=a),d=o,!s){if(o%1==0)return;s=o}o-=Math.floor(s);const l=n.value;o<=-(l.length-1)?o+=l.length:o>=l.length&&(o-=l.length),o=s%1>.5||s<0?o-1:o,i("transition",{},{dx:e.vertical?0:o*c.offsetWidth,dy:e.vertical?o*c.offsetHeight:0})}function v(e){const r=n.value.length;if(!r)return-1;const o=(Math.round(e)%r+r)%r;if(_.value){if(r<=t.displayMultipleItems)return 0}else if(o>r-t.displayMultipleItems)return r-t.displayMultipleItems;return o}function y(){p=null}function b(){if(!p)return void(h=!1);const e=p,r=e.toPos,o=e.acc,a=e.endTime,l=e.source,u=a-Date.now();if(u<=0){E(r),p=null,h=!1,s=null;const e=n.value[t.current];if(e){const n=e.getItemId();i("animationfinish",{},{current:t.current,currentItemId:n,source:l})}return}E(r+o*u*u/2),c=requestAnimationFrame(b)}function C(e,r,o){y();const i=t.duration,a=n.value.length;let s=d;if(_.value)if(o<0){for(;s<e;)s+=a;for(;s-a>e;)s-=a}else if(o>0){for(;s>e;)s-=a;for(;s+a<e;)s+=a;s+a-e<e-s&&(s+=a)}else{for(;s+a<e;)s+=a;for(;s-a>e;)s-=a;s+a-e<e-s&&(s+=a)}else"click"===r&&(e=e+t.displayMultipleItems-1<a?e:0);p={toPos:e,acc:2*(s-e)/(i*i),endTime:Date.now()+i,source:r},h||(h=!0,c=requestAnimationFrame(b))}function S(){a();const e=n.value,r=function(){l=null,g="autoplay",_.value?t.current=v(t.current+1):t.current=t.current+t.displayMultipleItems<e.length?t.current+1:0,C(t.current,"autoplay",_.value?1:0),l=setTimeout(r,t.interval)};u||e.length<=t.displayMultipleItems||(l=setTimeout(r,t.interval))}function w(e){e?S():a()}return watch([()=>e.current,()=>e.currentItemId,()=>[...n.value]],(()=>{let r=-1;if(e.currentItemId)for(let t=0,o=n.value;t<o.length;t++){if(o[t].getItemId()===e.currentItemId){r=t;break}}r<0&&(r=Math.round(e.current)||0),r=r<0?0:r,t.current!==r&&(g="",t.current=r)})),watch([()=>e.vertical,()=>_.value,()=>t.displayMultipleItems,()=>[...n.value]],(function(){a(),p&&(E(p.toPos),p=null);const o=n.value;for(let t=0;t<o.length;t++)o[t].updatePosition(t,e.vertical);A=1;const i=r.value;if(1===t.displayMultipleItems&&o.length){const e=o[0].getBoundingClientRect(),t=i.getBoundingClientRect();A=e.width/t.width,A>0&&A<1||(A=1)}const s=d;d=-2;const c=t.current;c>=0?(u=!1,t.userTracking?(E(s+c-f),f=c):(E(c),e.autoplay&&S())):(u=!0,E(-t.displayMultipleItems-1))})),watch((()=>t.interval),(()=>{l&&(a(),S())})),watch((()=>t.current),((e,r)=>{!function(e,r){const o=g;g="";const a=n.value;if(!o){const t=a.length;C(e,"",_.value&&r+(t-e)%t>t/2?1:0)}const s=a[e];if(s){const e=t.currentItemId=s.getItemId();i("change",{},{current:t.current,currentItemId:e,source:o})}}(e,r),o("update:current",e)})),watch((()=>t.currentItemId),(e=>{o("update:currentItemId",e)})),watch((()=>e.autoplay&&!t.userTracking),w),w(e.autoplay&&!t.userTracking),onMounted((()=>{let o=!1,i=0,s=0;function c(e){t.userTracking=!1;const n=i/Math.abs(i);let r=0;!e&&Math.abs(i)>.2&&(r=.5*n);const o=v(d+r);e?E(f):(g="touch",t.current=o,C(o,"touch",0!==r?r:0===o&&_.value&&d>=1?1:0))}useTouchtrack(r.value,(l=>{if(!e.disableTouch&&!u){if("start"===l.detail.state)return t.userTracking=!0,o=!1,a(),f=d,i=0,s=Date.now(),void y();if("end"===l.detail.state)return c(!1);if("cancel"===l.detail.state)return c(!0);if(t.userTracking){if(!o){o=!0;const n=Math.abs(l.detail.dx),r=Math.abs(l.detail.dy);if((n>=r&&e.vertical||n<=r&&!e.vertical)&&(t.userTracking=!1),!t.userTracking)return void(e.autoplay&&S())}return function(o){const a=s;s=Date.now();const c=n.value.length-t.displayMultipleItems;function l(e){return.5-.25/(e+.5)}function u(e,t){let n=f+e;i=.6*i+.4*t,_.value||(n<0||n>c)&&(n<0?n=-l(-n):n>c&&(n=c+l(n-c)),i=0),E(n)}const d=s-a||1,A=r.value;e.vertical?u(-o.dy/A.offsetHeight,-o.ddy/d):u(-o.dx/A.offsetWidth,-o.ddx/d)}(l.detail),!1}}}))})),onUnmounted((()=>{a(),cancelAnimationFrame(c)})),{onSwiperDotClick:function(e){C(t.current=e,g="click",_.value?1:0)},circularEnabled:_,swiperEnabled:m}}const Swiper=defineBuiltInComponent({name:"Swiper",props:props$k,emits:["change","transition","animationfinish","update:current","update:currentItemId"],setup(e,{slots:t,emit:n}){const r=ref(null),o=useCustomEvent(r,n),i=ref(null),a=ref(null),s=useState$3(e),c=computed((()=>{let t={};return(e.nextMargin||e.previousMargin)&&(t=e.vertical?{left:0,right:0,top:rpx2px(e.previousMargin,!0),bottom:rpx2px(e.nextMargin,!0)}:{top:0,bottom:0,left:rpx2px(e.previousMargin,!0),right:rpx2px(e.nextMargin,!0)}),t})),l=computed((()=>{const t=Math.abs(100/s.displayMultipleItems)+"%";return{width:e.vertical?"100%":t,height:e.vertical?t:"100%"}}));let u=[];const d=[],A=ref([]);function p(){const e=[];for(let t=0;t<u.length;t++){let n=u[t];n instanceof Element||(n=n.el);const r=d.find((e=>n===e.rootRef.value));r&&e.push(markRaw(r))}A.value=e}provide("addSwiperContext",(function(e){d.push(e),p()}));provide("removeSwiperContext",(function(e){const t=d.indexOf(e);t>=0&&(d.splice(t,1),p())}));const{onSwiperDotClick:h,circularEnabled:f,swiperEnabled:g}=useLayout(e,s,A,a,n,o);let m=()=>null;return m=useSwiperNavigation(r,e,s,h,A,f,g),()=>{const n=t.default&&t.default();return u=flatVNode(n),createVNode("uni-swiper",{ref:r},[createVNode("div",{ref:i,class:"uni-swiper-wrapper"},[createVNode("div",{class:"uni-swiper-slides",style:c.value},[createVNode("div",{ref:a,class:"uni-swiper-slide-frame",style:l.value},[n],4)],4),e.indicatorDots&&createVNode("div",{class:["uni-swiper-dots",e.vertical?"uni-swiper-dots-vertical":"uni-swiper-dots-horizontal"]},[A.value.map(((t,n,r)=>createVNode("div",{onClick:()=>h(n),class:{"uni-swiper-dot":!0,"uni-swiper-dot-active":n<s.current+s.displayMultipleItems&&n>=s.current||n<s.current+s.displayMultipleItems-r.length},style:{background:n===s.current?e.indicatorActiveColor:e.indicatorColor}},null,14,["onClick"])))],2),m()],512)],512)}}}),useSwiperNavigation=(e,t,n,r,o,i,a)=>{let s=!1,c=!1,l=!1,u=ref(!1);function d(e,n){const r=e.currentTarget;r&&(r.style.backgroundColor="over"===n?t.navigationActiveColor:"")}watchEffect((()=>{s="auto"===t.navigation,u.value=!0!==t.navigation||s,_()})),watchEffect((()=>{const e=o.value.length,t=!i.value;c=0===n.current&&t,l=n.current===e-1&&t||t&&n.current+n.displayMultipleItems>=e,a.value||(c=!0,l=!0,s&&(u.value=!0))}));const A={onMouseover:e=>d(e,"over"),onMouseout:e=>d(e,"out")};function p(e,t,a){if(e.stopPropagation(),a)return;const s=o.value.length;let c=n.current;switch(t){case"prev":c--,c<0&&i.value&&(c=s-1);break;case"next":c++,c>=s&&i.value&&(c=0)}r(c)}const h=()=>createSvgIconVNode(ICON_PATH_BACK,t.navigationColor,26);let f;const g=n=>{clearTimeout(f);const{clientX:r,clientY:o}=n,{left:i,right:a,top:s,bottom:c,width:l,height:d}=e.value.getBoundingClientRect();let A=!1;if(A=t.vertical?!(o-s<d/3||c-o<d/3):!(r-i<l/3||a-r<l/3),A)return f=setTimeout((()=>{u.value=A}),300);u.value=A},m=()=>{u.value=!0};function _(){e.value&&(e.value.removeEventListener("mousemove",g),e.value.removeEventListener("mouseleave",m),s&&(e.value.addEventListener("mousemove",g),e.value.addEventListener("mouseleave",m)))}return onMounted(_),function(){const e={"uni-swiper-navigation-hide":u.value,"uni-swiper-navigation-vertical":t.vertical};return t.navigation?createVNode(Fragment,null,[createVNode("div",mergeProps({class:["uni-swiper-navigation uni-swiper-navigation-prev",extend$2({"uni-swiper-navigation-disabled":c},e)],onClick:e=>p(e,"prev",c)},A),[h()],16,["onClick"]),createVNode("div",mergeProps({class:["uni-swiper-navigation uni-swiper-navigation-next",extend$2({"uni-swiper-navigation-disabled":l},e)],onClick:e=>p(e,"next",l)},A),[h()],16,["onClick"])]):null}},props$j={itemId:{type:String,default:""}},SwiperItem=defineBuiltInComponent({name:"SwiperItem",props:props$j,setup(e,{slots:t}){const n=ref(null),r={rootRef:n,getItemId:()=>e.itemId,getBoundingClientRect:()=>n.value.getBoundingClientRect(),updatePosition(e,t){const r=t?"0":100*e+"%",o=t?100*e+"%":"0",i=n.value,a=`translate(${r},${o}) translateZ(0)`;i&&(i.style.webkitTransform=a,i.style.transform=a)}};return onMounted((()=>{const e=inject("addSwiperContext");e&&e(r)})),onUnmounted((()=>{const e=inject("removeSwiperContext");e&&e(r)})),()=>createVNode("uni-swiper-item",{ref:n,style:{position:"absolute",width:"100%",height:"100%"}},[t.default&&t.default()],512)}}),SPACE_UNICODE={ensp:"",emsp:"",nbsp:""};function normalizeText(e,{space:t,decode:n}){let r="",o=!1;for(let i of e)t&&SPACE_UNICODE[t]&&" "===i&&(i=SPACE_UNICODE[t]),o?(r+="n"===i?LINEFEED:"\\"===i?"\\":"\\"+i,o=!1):"\\"===i?o=!0:r+=i;return n?r.replace(/&nbsp;/g,SPACE_UNICODE.nbsp).replace(/&ensp;/g,SPACE_UNICODE.ensp).replace(/&emsp;/g,SPACE_UNICODE.emsp).replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&apos;/g,"'"):r}function parseText(e,t){return normalizeText(e,t).split(LINEFEED)}const index$i=defineBuiltInComponent({name:"Text",props:{selectable:{type:[Boolean,String],default:!1},space:{type:String,default:""},decode:{type:[Boolean,String],default:!1}},setup(e,{slots:t}){const n=ref(null);return()=>{const r=[];return t.default&&t.default().forEach((t=>{if(8&t.shapeFlag&&t.type!==Comment){const n=parseText(t.children,{space:e.space,decode:e.decode}),o=n.length-1;n.forEach(((e,t)=>{(0!==t||e)&&r.push(createTextVNode(e)),t!==o&&r.push(createVNode("br"))}))}else r.push(t)})),createVNode("uni-text",{ref:n,selectable:!!e.selectable||null},[createVNode("span",null,r)],8,["selectable"])}}}),index$g=defineBuiltInComponent({name:"View",props:extend$2({},hoverProps),setup(e,{slots:t}){const n=ref(null),{hovering:r,binding:o}=useHover(e);return()=>{const i=e.hoverClass;return i&&"none"!==i?createVNode("uni-view",mergeProps({class:r.value?i:"",ref:n},o),[renderSlot(t,"default")],16):createVNode("uni-view",{ref:n},[renderSlot(t,"default")],512)}}});function normalizeEvent$1(e,t){if(t||(t=e.id),t)return e.$options.name.toLowerCase()+"."+t}function addSubscribe(e,t,n){e&&registerViewMethod(getCurrentPageId(),e,(({type:e,data:n},r)=>{t(e,n,r)}))}function removeSubscribe(e,t){e&&unregisterViewMethod(getCurrentPageId(),e)}function useSubscribe(e,t,n,r){const o=getCurrentInstance().proxy;onMounted((()=>{addSubscribe(t||normalizeEvent$1(o),e),watch((()=>o.id),((t,n)=>{addSubscribe(normalizeEvent$1(o,t),e),removeSubscribe(n&&normalizeEvent$1(o,n))}))})),onBeforeUnmount((()=>{removeSubscribe(t||normalizeEvent$1(o))}))}let index$f=0;function useContextInfo(e){const t=useCurrentPageId(),n=getCurrentInstance().proxy,r=n.$options.name.toLowerCase(),o=n.id||"context"+index$f++;return onMounted((()=>{n.$el.__uniContextInfo={id:o,type:r,page:t}})),`${r}.${o}`}function getContextInfo(e){return e.__uniContextInfo}function injectLifecycleHook(e,t,n,r){isFunction$2(t)&&injectHook(e,t.bind(n),r)}function initHooks(e,t,n){const r=e.mpType||n.$mpType;if(r&&"component"!==r&&(Object.keys(e).forEach((r=>{if(isUniLifecycleHook(r,e[r],!1)){const o=e[r];isArray$3(o)?o.forEach((e=>injectLifecycleHook(r,e,n,t))):injectLifecycleHook(r,o,n,t)}})),"page"===r)){t.__isVisible=!0;try{let e=t.attrs.__pageQuery;0,invokeHook(n,ON_LOAD,e),delete t.attrs.__pageQuery;const r=n.$page;"preloadPage"!==(null==r?void 0:r.openType)&&invokeHook(n,ON_SHOW)}catch(o){console.error(o.message+LINEFEED+o.stack)}}}function applyOptions(e,t,n){initHooks(e,t,n)}function set$1(e,t,n){return e[t]=n}function $callMethod(e,...t){const n=this[e];return n?n(...t):(console.error(`method ${e} not found`),null)}function createErrorHandler(e){return function(t,n,r){if(!n)throw t;const o=e._instance;if(!o||!o.proxy)throw t;invokeHook(o.proxy,ON_ERROR,t)}}function mergeAsArray(e,t){return e?[...new Set([].concat(e,t))]:t}function initOptionMergeStrategies(e){UniLifecycleHooks.forEach((t=>{e[t]=mergeAsArray}))}function initApp$1(e){const t=e._context.config;t.errorHandler=invokeCreateErrorHandler(e,createErrorHandler),initOptionMergeStrategies(t.optionMergeStrategies);const n=t.globalProperties;n.$set=set$1,n.$applyOptions=applyOptions,n.$callMethod=$callMethod,invokeCreateVueAppHook(e)}function initRouter(e){const t=createRouter(createRouterOptions());t.beforeEach(((e,t)=>{e&&t&&e.meta.isTabBar&&t.meta.isTabBar&&saveTabBarScrollPosition(t.meta.tabBarIndex)})),e.router=t,e.use(t)}let positionStore=Object.create(null);function getTabBarScrollPosition(e){return positionStore[e]}function saveTabBarScrollPosition(e){"undefined"!=typeof window&&(positionStore[e]={left:window.pageXOffset,top:window.pageYOffset})}const scrollBehavior=(e,t,n)=>{if(n)return n;if(e&&t&&e.meta.isTabBar&&t.meta.isTabBar){const t=getTabBarScrollPosition(e.meta.tabBarIndex);if(t)return t}return{left:0,top:0}};function createRouterOptions(){return{history:initHistory(),strict:!!__uniConfig.router.strict,routes:__uniRoutes,scrollBehavior:scrollBehavior}}function removeCurrentPages(e=1){const t=getCurrentBasePages(),n=t.length-1,r=n-e;for(let o=n;o>r;o--){const e=getPage$BasePage(t[o]);removePage(normalizeRouteKey(e.path,e.id),!1)}}function initHistory(){let{routerBase:e}=__uniConfig.router;"/"===e&&(e="");const t=createWebHashHistory(e);return t.listen(((e,t,n)=>{"back"===n.direction&&removeCurrentPages(Math.abs(n.delta))})),t}const index$e={install(e){initApp$1(e),initViewPlugin(e),initServicePlugin(e),e.config.warnHandler||(e.config.warnHandler=warnHandler),initRouter(e)}};function warnHandler(e,t,n){if(t){if("PageMetaHead"===t.$.type.name)return;const e=t.$.parent;if(e&&"PageMeta"===e.type.name)return}const r=[`[Vue warn]: ${e}`];n.length&&r.push("\n",n),console.warn(...r)}const clazz={class:"uni-async-loading"},loadingVNode=createVNode("i",{class:"uni-loading"},null,-1),AsyncLoadingComponent=defineSystemComponent({name:"AsyncLoading",render:()=>(openBlock(),createBlock("div",clazz,[loadingVNode]))});function reload$1(){window.location.reload()}const AsyncErrorComponent=defineSystemComponent({name:"AsyncError",setup(){initI18nAsyncMsgsOnce();const{t:e}=useI18n();return()=>createVNode("div",{class:"uni-async-error",onClick:reload$1},[e("uni.async.error")],8,["onClick"])}});let appVm;function getApp$1(){return appVm}function initApp(e){appVm=e,Object.defineProperty(appVm.$.ctx,"$children",{get:()=>getCurrentBasePages().map((e=>e.$vm))});const t=appVm.$.appContext.app;t.component(AsyncLoadingComponent.name)||t.component(AsyncLoadingComponent.name,AsyncLoadingComponent),t.component(AsyncErrorComponent.name)||t.component(AsyncErrorComponent.name,AsyncErrorComponent),initAppVm(appVm),defineGlobalData(appVm),initService(),initView()}function wrapperComponentSetup(e,{clone:t,init:n,setup:r,before:o}){t&&(e=extend$2({},e)),o&&o(e);const i=e.setup;return e.setup=(e,t)=>{const o=getCurrentInstance();if(n(o.proxy),r(o),i)return i(e,t)},e}function setupComponent(e,t){return e&&(e.__esModule||"Module"===e[Symbol.toStringTag])?wrapperComponentSetup(e.default,t):wrapperComponentSetup(e,t)}function setupPage(e){return setupComponent(e,{clone:!0,init:initPage,setup(e){e.$pageInstance=e;const t=usePageRoute(),n=decodedQuery(t.query);e.attrs.__pageQuery=n,getPage$BasePage(e.proxy).options=n,e.proxy.options=n;const r=usePageMeta();return e.onReachBottom=reactive([]),e.onPageScroll=reactive([]),watch([e.onReachBottom,e.onPageScroll],(()=>{const t=getCurrentPage();e.proxy===t&&initPageScrollListener(e,r)}),{once:!0}),onBeforeMount((()=>{onPageShow(e,r)})),onMounted((()=>{onPageReady(e);const{onReady:n}=e;n&&invokeArrayFns$1(n),invokeOnTabItemTap(t)})),onBeforeActivate((()=>{if(!e.__isVisible){onPageShow(e,r),e.__isVisible=!0;const{onShow:n}=e;n&&invokeArrayFns$1(n),nextTick((()=>{invokeOnTabItemTap(t)}))}})),onBeforeDeactivate((()=>{if(e.__isVisible&&!e.__isUnload){e.__isVisible=!1;{const{onHide:t}=e;t&&invokeArrayFns$1(t)}}})),subscribeViewMethod(r.id),onBeforeUnmount((()=>{unsubscribeViewMethod(r.id)})),n}})}function setupApp(e){return setupComponent(e,{init:initApp,setup(e){const t=usePageRoute(),n=()=>{injectAppHooks(e);const{onLaunch:n,onShow:r,onPageNotFound:o,onError:i}=e,a=initLaunchOptions({path:t.path.slice(1)||__uniRoutes[0].meta.route,query:decodedQuery(t.query)});if(n&&invokeArrayFns$1(n,a),r&&invokeArrayFns$1(r,a),!t.matched.length){const e={notFound:!0,openType:"appLaunch",path:t.path,query:{},scene:1001};o&&invokeArrayFns$1(o,e)}i&&(e.appContext.config.errorHandler=e=>{invokeArrayFns$1(i,e)})};return useRouter().isReady().then(n),onMounted((()=>{window.addEventListener("resize",debounce(onResize,50,{setTimeout:setTimeout,clearTimeout:clearTimeout})),window.addEventListener("message",onMessage$2),document.addEventListener("visibilitychange",onVisibilityChange),onThemeChange$2()})),t.query},before(e){e.mpType="app";const{setup:t}=e,n=()=>(openBlock(),createBlock(LayoutComponent));e.setup=(e,r)=>{const o=t&&t(e,r);return isFunction$2(o)?n:o},e.render=n}})}function onResize(){const{windowWidth:e,windowHeight:t,screenWidth:n,screenHeight:r}=getSystemInfoSync(),o=90===Math.abs(Number(window.orientation))?"landscape":"portrait";UniServiceJSBridge$1.emit(ON_RESIZE,{deviceOrientation:o,size:{windowWidth:e,windowHeight:t,screenWidth:n,screenHeight:r}})}function onMessage$2(e){isPlainObject$4(e.data)&&e.data.type===WEB_INVOKE_APPSERVICE&&UniServiceJSBridge$1.emit(ON_WEB_INVOKE_APP_SERVICE,e.data.data,e.data.pageId)}function onVisibilityChange(){const{emit:e}=UniServiceJSBridge$1;"visible"===document.visibilityState?e(ON_APP_ENTER_FOREGROUND,getEnterOptions()):e(ON_APP_ENTER_BACKGROUND)}function onThemeChange$2(){let e=null;try{e=window.matchMedia("(prefers-color-scheme: dark)")}catch(t){}if(e){let t=e=>{UniServiceJSBridge$1.emit(ON_THEME_CHANGE,{theme:e.matches?"dark":"light"})};e.addEventListener?e.addEventListener("change",t):e.addListener(t)}}function invokeOnTabItemTap(e){const{tabBarText:t,tabBarIndex:n,route:r}=e.meta;t&&invokeHook("onTabItemTap",{index:n,text:t,pagePath:r})}function formatTime(e){e=e>0&&e<1/0?e:0;const t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=Math.floor(e%3600%60),o=(t<10?"0":"")+t;let i=(n<10?"0":"")+n+":"+((r<10?"0":"")+r);return"00"!==o&&(i=o+":"+i),i}function useGesture(e,t,n){const r=reactive({gestureType:"none",volumeOld:0,volumeNew:0,currentTimeOld:0,currentTimeNew:0}),o={x:0,y:0};return{state:r,onTouchstart:function(e){const t=e.targetTouches[0];o.x=t.pageX,o.y=t.pageY,r.gestureType="none",r.volumeOld=0,r.currentTimeOld=r.currentTimeNew=0},onTouchmove:function(i){function a(){i.stopPropagation(),i.preventDefault()}n.fullscreen&&a();const s=r.gestureType;if("stop"===s)return;const c=i.targetTouches[0],l=c.pageX,u=c.pageY,d=o,A=t.value;if("progress"===s?function(e){const n=t.value,o=n.duration;let i=e/600*o+r.currentTimeOld;i<0?i=0:i>o&&(i=o);r.currentTimeNew=i}(l-d.x):"volume"===s&&function(e){const n=t.value,o=r.volumeOld;let i;"number"==typeof o&&(i=o-e/200,i<0?i=0:i>1&&(i=1),n.volume=i,r.volumeNew=i)}(u-d.y),"none"===s)if(Math.abs(l-d.x)>Math.abs(u-d.y)){if(!e.enableProgressGesture)return void(r.gestureType="stop");r.gestureType="progress",r.currentTimeOld=r.currentTimeNew=A.currentTime,n.fullscreen||a()}else{if(!e.pageGesture)return void(r.gestureType="stop");r.gestureType="volume",r.volumeOld=A.volume,n.fullscreen||a()}},onTouchend:function(e){const n=t.value;"none"!==r.gestureType&&"stop"!==r.gestureType&&(e.stopPropagation(),e.preventDefault()),"progress"===r.gestureType&&r.currentTimeOld!==r.currentTimeNew&&(n.currentTime=r.currentTimeNew),r.gestureType="none"}}}function useFullscreen(e,t,n,r,o){const i=reactive({fullscreen:!1}),a=/^Apple/.test(navigator.vendor);function s(t){i.fullscreen=t,e("fullscreenchange",{},{fullScreen:t,direction:"vertical"})}function c(e){const i=o.value,c=t.value,l=n.value;let u;e?!document.fullscreenEnabled&&!document.webkitFullscreenEnabled||a&&!r.userAction?l.webkitEnterFullScreen?l.webkitEnterFullScreen():(u=!0,c.remove(),c.classList.add("uni-video-type-fullscreen"),document.body.appendChild(c)):c[document.fullscreenEnabled?"requestFullscreen":"webkitRequestFullscreen"]():document.fullscreenEnabled||document.webkitFullscreenEnabled?document.fullscreenElement?document.exitFullscreen():document.webkitFullscreenElement&&document.webkitExitFullscreen():l.webkitExitFullScreen?l.webkitExitFullScreen():(u=!0,c.remove(),c.classList.remove("uni-video-type-fullscreen"),i.appendChild(c)),u&&s(e)}function l(){c(!1)}return onBeforeUnmount(l),{state:i,onFullscreenChange:function(e,t){t&&document.fullscreenEnabled||s(!(!document.fullscreenElement&&!document.webkitFullscreenElement))},emitFullscreenChange:s,toggleFullscreen:c,requestFullScreen:function(){c(!0)},exitFullScreen:l}}function useVideo(e,t,n){const r=ref(null),o=computed((()=>getRealPath(e.src))),i=computed((()=>"true"===e.muted||!0===e.muted)),a=reactive({start:!1,src:o,playing:!1,currentTime:0,duration:0,progress:0,buffered:0,muted:i});function s(e){const t=e.target,n=t.buffered;n.length&&(a.buffered=n.end(n.length-1)/t.duration*100)}function c(){r.value.pause()}function l(e){const t=r.value;"number"!=typeof(e=Number(e))||isNaN(e)||(t.currentTime=e)}return watch((()=>o.value),(()=>{a.playing=!1,a.currentTime=0})),watch((()=>a.buffered),(e=>{n("progress",{},{buffered:e})})),watch((()=>i.value),(e=>{r.value.muted=e})),{videoRef:r,state:a,play:function(){const e=r.value;a.start=!0,e.play()},pause:c,stop:function(){l(0),c()},seek:l,playbackRate:function(e){r.value.playbackRate=e},toggle:function(){const e=r.value;a.playing?e.pause():e.play()},onDurationChange:function({target:e}){a.duration=e.duration},onLoadedMetadata:function(t){const r=Number(e.initialTime)||0,o=t.target;r>0&&(o.currentTime=r),n("loadedmetadata",t,{width:o.videoWidth,height:o.videoHeight,duration:o.duration}),s(t)},onProgress:s,onWaiting:function(e){n("waiting",e,{})},onVideoError:function(e){a.playing=!1,n("error",e,{})},onPlay:function(e){a.start=!0,a.playing=!0,n("play",e,{})},onPause:function(e){a.playing=!1,n("pause",e,{})},onEnded:function(e){a.playing=!1,n("ended",e,{})},onTimeUpdate:function(e){const t=e.target,r=a.currentTime=t.currentTime;n("timeupdate",e,{currentTime:r,duration:t.duration})}}}function useControls(e,t,n){const r=ref(null),o=ref(null),i=computed((()=>e.showCenterPlayBtn&&!t.start)),a=ref(!0),s=computed((()=>!i.value&&e.controls&&a.value)),c=reactive({touching:!1,controlsTouching:!1,centerPlayBtnShow:i,controlsShow:s,controlsVisible:a});let l;function u(){l=setTimeout((()=>{c.controlsVisible=!1}),3e3)}function d(){l&&(clearTimeout(l),l=null)}return onBeforeUnmount((()=>{l&&clearTimeout(l)})),watch((()=>c.controlsShow&&t.playing&&!c.controlsTouching),(e=>{e?u():d()})),watch([()=>t.currentTime,()=>{e.duration}],(function(){c.touching||(t.progress=t.currentTime/t.duration*100)})),onMounted((()=>{const e=passive(!1);let i,a,s,l=!0;const u=o.value;function d(e){const n=e.targetTouches[0],o=n.pageX,c=n.pageY;if(l&&Math.abs(o-i)<Math.abs(c-a))return void A(e);l=!1;const u=r.value.offsetWidth;let d=s+(o-i)/u*100;d<0?d=0:d>100&&(d=100),t.progress=d,e.preventDefault(),e.stopPropagation()}function A(r){c.controlsTouching=!1,c.touching&&(u.removeEventListener("touchmove",d,e),l||(r.preventDefault(),r.stopPropagation(),n(t.duration*t.progress/100)),c.touching=!1)}u.addEventListener("touchstart",(n=>{c.controlsTouching=!0;const r=n.targetTouches[0];i=r.pageX,a=r.pageY,s=t.progress,l=!0,c.touching=!0,u.addEventListener("touchmove",d,e)})),u.addEventListener("touchend",A),u.addEventListener("touchcancel",A)})),{state:c,progressRef:r,ballRef:o,clickProgress:function(e){const o=r.value;let i=e.target,a=e.offsetX;for(;i&&i!==o;)a+=i.offsetLeft,i=i.parentNode;const s=o.offsetWidth;let c=0;a>=0&&a<=s&&(c=a/s,n(t.duration*c))},toggleControls:function(){c.controlsVisible=!c.controlsVisible},autoHideStart:u,autoHideEnd:d}}function useDanmu(e,t){const n=ref(null),r=reactive({enable:Boolean(e.enableDanmu)});let o={time:0,index:-1};const i=isArray$3(e.danmuList)?JSON.parse(JSON.stringify(e.danmuList)):[];function a(e){const t=document.createElement("p");t.className="uni-video-danmu-item",t.innerText=e.text;let r=`bottom: ${100*Math.random()}%;color: ${e.color};`;t.setAttribute("style",r);n.value.appendChild(t),setTimeout((function(){r+="left: 0;-webkit-transform: translateX(-100%);transform: translateX(-100%);",t.setAttribute("style",r),setTimeout((function(){t.remove()}),4e3)}),17)}return i.sort((function(e,t){return(e.time||0)-(t.time||0)})),{state:r,danmuRef:n,updateDanmu:function(e){const n=e.target.currentTime,s=o,c={time:n,index:s.index};if(n>s.time)for(let o=s.index+1;o<i.length;o++){const e=i[o];if(!(n>=(e.time||0)))break;c.index=o,t.playing&&r.enable&&a(e)}else if(n<s.time)for(let t=s.index-1;t>-1;t--){if(!(n<=(i[t].time||0)))break;c.index=t-1}o=c},toggleDanmu:function(){r.enable=!r.enable},sendDanmu:function(e){i.splice(o.index+1,0,{text:String(e.text),color:e.color,time:t.currentTime||0})}}}function useContext(e,t,n,r,o,i,a,s){const c={play:e,stop:n,pause:t,seek:r,sendDanmu:o,playbackRate:i,requestFullScreen:a,exitFullScreen:s};useSubscribe(((e,t)=>{let n;switch(e){case"seek":n=t.position;break;case"sendDanmu":n=t;break;case"playbackRate":n=t.rate}e in c&&c[e](n)}),useContextInfo())}const props$g={id:{type:String,default:""},src:{type:String,default:""},duration:{type:[Number,String],default:""},controls:{type:[Boolean,String],default:!0},danmuList:{type:Array,default:()=>[]},danmuBtn:{type:[Boolean,String],default:!1},enableDanmu:{type:[Boolean,String],default:!1},autoplay:{type:[Boolean,String],default:!1},loop:{type:[Boolean,String],default:!1},muted:{type:[Boolean,String],default:!1},objectFit:{type:String,default:"contain"},poster:{type:String,default:""},direction:{type:[String,Number],default:""},showProgress:{type:Boolean,default:!0},initialTime:{type:[String,Number],default:0},showFullscreenBtn:{type:[Boolean,String],default:!0},pageGesture:{type:[Boolean,String],default:!1},enableProgressGesture:{type:[Boolean,String],default:!0},showPlayBtn:{type:[Boolean,String],default:!0},showCenterPlayBtn:{type:[Boolean,String],default:!0}},index$d=defineBuiltInComponent({name:"Video",props:props$g,emits:["fullscreenchange","progress","loadedmetadata","waiting","error","play","pause","ended","timeupdate"],setup(e,{emit:t,attrs:n,slots:r}){const o=ref(null),i=ref(null),a=useCustomEvent(o,t),{state:s}=useUserAction(),{$attrs:c}=useAttrs({excludeListeners:!0}),{t:l}=useI18n();initI18nVideoMsgsOnce();const{videoRef:u,state:d,play:A,pause:p,stop:h,seek:f,playbackRate:g,toggle:m,onDurationChange:_,onLoadedMetadata:E,onProgress:v,onWaiting:y,onVideoError:b,onPlay:C,onPause:S,onEnded:w,onTimeUpdate:T}=useVideo(e,n,a),{state:I,danmuRef:R,updateDanmu:O,toggleDanmu:N,sendDanmu:k}=useDanmu(e,d),{state:P,onFullscreenChange:D,emitFullscreenChange:L,toggleFullscreen:B,requestFullScreen:U,exitFullScreen:M}=useFullscreen(a,i,u,s,o),{state:x,onTouchstart:F,onTouchend:$,onTouchmove:V}=useGesture(e,u,P),{state:H,progressRef:j,ballRef:Q,clickProgress:G,toggleControls:K}=useControls(e,d,f);return useContext(A,p,h,f,k,g,U,M),()=>createVNode("uni-video",{ref:o,id:e.id,onClick:K},[createVNode("div",{ref:i,class:"uni-video-container",onTouchstart:F,onTouchend:$,onTouchmove:V,onFullscreenchange:withModifiers(D,["stop"]),onWebkitfullscreenchange:withModifiers((e=>D(e,!0)),["stop"])},[createVNode("video",mergeProps({ref:u,style:{"object-fit":e.objectFit},muted:!!e.muted,loop:!!e.loop,src:d.src,poster:e.poster,autoplay:!!e.autoplay},c.value,{class:"uni-video-video","webkit-playsinline":!0,playsinline:!0,onDurationchange:_,onLoadedmetadata:E,onProgress:v,onWaiting:y,onError:b,onPlay:C,onPause:S,onEnded:w,onTimeupdate:e=>{T(e),O(e)},onWebkitbeginfullscreen:()=>L(!0),onX5videoenterfullscreen:()=>L(!0),onWebkitendfullscreen:()=>L(!1),onX5videoexitfullscreen:()=>L(!1)}),null,16,["muted","loop","src","poster","autoplay","webkit-playsinline","playsinline","onDurationchange","onLoadedmetadata","onProgress","onWaiting","onError","onPlay","onPause","onEnded","onTimeupdate","onWebkitbeginfullscreen","onX5videoenterfullscreen","onWebkitendfullscreen","onX5videoexitfullscreen"]),withDirectives(createVNode("div",{class:"uni-video-bar uni-video-bar-full",onClick:withModifiers((()=>{}),["stop"])},[createVNode("div",{class:"uni-video-controls"},[withDirectives(createVNode("div",{class:{"uni-video-control-button":!0,"uni-video-control-button-play":!d.playing,"uni-video-control-button-pause":d.playing},onClick:withModifiers(m,["stop"])},null,10,["onClick"]),[[vShow,e.showPlayBtn]]),withDirectives(createVNode("div",{class:"uni-video-current-time"},[formatTime(d.currentTime)],512),[[vShow,e.showProgress]]),withDirectives(createVNode("div",{ref:j,class:"uni-video-progress-container",onClick:withModifiers(G,["stop"])},[createVNode("div",{class:"uni-video-progress"},[createVNode("div",{style:{width:d.buffered+"%"},class:"uni-video-progress-buffered"},null,4),createVNode("div",{ref:Q,style:{left:d.progress+"%"},class:"uni-video-ball"},[createVNode("div",{class:"uni-video-inner"},null)],4)])],8,["onClick"]),[[vShow,e.showProgress]]),withDirectives(createVNode("div",{class:"uni-video-duration"},[formatTime(Number(e.duration)||d.duration)],512),[[vShow,e.showProgress]])]),withDirectives(createVNode("div",{class:{"uni-video-danmu-button":!0,"uni-video-danmu-button-active":I.enable},onClick:withModifiers(N,["stop"])},[l("uni.video.danmu")],10,["onClick"]),[[vShow,e.danmuBtn]]),withDirectives(createVNode("div",{class:{"uni-video-fullscreen":!0,"uni-video-type-fullscreen":P.fullscreen},onClick:withModifiers((()=>B(!P.fullscreen)),["stop"])},null,10,["onClick"]),[[vShow,e.showFullscreenBtn]])],8,["onClick"]),[[vShow,H.controlsShow]]),withDirectives(createVNode("div",{ref:R,style:"z-index: 0;",class:"uni-video-danmu"},null,512),[[vShow,d.start&&I.enable]]),H.centerPlayBtnShow&&createVNode("div",{class:"uni-video-cover",onClick:withModifiers((()=>{}),["stop"])},[createVNode("div",{class:"uni-video-cover-play-button",onClick:withModifiers(A,["stop"])},null,8,["onClick"]),createVNode("p",{class:"uni-video-cover-duration"},[formatTime(Number(e.duration)||d.duration)])],8,["onClick"]),createVNode("div",{class:{"uni-video-toast":!0,"uni-video-toast-volume":"volume"===x.gestureType}},[createVNode("div",{class:"uni-video-toast-title"},[l("uni.video.volume")]),createVNode("svg",{class:"uni-video-toast-icon",width:"200px",height:"200px",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},[createVNode("path",{d:"M475.400704 201.19552l0 621.674496q0 14.856192-10.856448 25.71264t-25.71264 10.856448-25.71264-10.856448l-190.273536-190.273536-149.704704 0q-14.856192 0-25.71264-10.856448t-10.856448-25.71264l0-219.414528q0-14.856192 10.856448-25.71264t25.71264-10.856448l149.704704 0 190.273536-190.273536q10.856448-10.856448 25.71264-10.856448t25.71264 10.856448 10.856448 25.71264zm219.414528 310.837248q0 43.425792-24.28416 80.851968t-64.2816 53.425152q-5.71392 2.85696-14.2848 2.85696-14.856192 0-25.71264-10.570752t-10.856448-25.998336q0-11.999232 6.856704-20.284416t16.570368-14.2848 19.427328-13.142016 16.570368-20.284416 6.856704-32.569344-6.856704-32.569344-16.570368-20.284416-19.427328-13.142016-16.570368-14.2848-6.856704-20.284416q0-15.427584 10.856448-25.998336t25.71264-10.570752q8.57088 0 14.2848 2.85696 39.99744 15.427584 64.2816 53.139456t24.28416 81.137664zm146.276352 0q0 87.422976-48.56832 161.41824t-128.5632 107.707392q-7.428096 2.85696-14.2848 2.85696-15.427584 0-26.284032-10.856448t-10.856448-25.71264q0-22.284288 22.284288-33.712128 31.997952-16.570368 43.425792-25.141248 42.283008-30.855168 65.995776-77.423616t23.712768-99.136512-23.712768-99.136512-65.995776-77.423616q-11.42784-8.57088-43.425792-25.141248-22.284288-11.42784-22.284288-33.712128 0-14.856192 10.856448-25.71264t25.71264-10.856448q7.428096 0 14.856192 2.85696 79.99488 33.712128 128.5632 107.707392t48.56832 161.41824zm146.276352 0q0 131.42016-72.566784 241.41312t-193.130496 161.989632q-7.428096 2.85696-14.856192 2.85696-14.856192 0-25.71264-10.856448t-10.856448-25.71264q0-20.570112 22.284288-33.712128 3.999744-2.285568 12.85632-5.999616t12.85632-5.999616q26.284032-14.2848 46.854144-29.140992 70.281216-51.996672 109.707264-129.705984t39.426048-165.132288-39.426048-165.132288-109.707264-129.705984q-20.570112-14.856192-46.854144-29.140992-3.999744-2.285568-12.85632-5.999616t-12.85632-5.999616q-22.284288-13.142016-22.284288-33.712128 0-14.856192 10.856448-25.71264t25.71264-10.856448q7.428096 0 14.856192 2.85696 120.563712 51.996672 193.130496 161.989632t72.566784 241.41312z"},null)]),createVNode("div",{class:"uni-video-toast-value"},[createVNode("div",{style:{width:100*x.volumeNew+"%"},class:"uni-video-toast-value-content"},[createVNode("div",{class:"uni-video-toast-volume-grids"},[renderList(10,(()=>createVNode("div",{class:"uni-video-toast-volume-grids-item"},null)))])],4)])],2),createVNode("div",{class:{"uni-video-toast":!0,"uni-video-toast-progress":"progress"===x.gestureType}},[createVNode("div",{class:"uni-video-toast-title"},[formatTime(x.currentTimeNew)," / ",formatTime(d.duration)])],2),createVNode("div",{class:"uni-video-slots"},[r.default&&r.default()])],40,["onTouchstart","onTouchend","onTouchmove","onFullscreenchange","onWebkitfullscreenchange"])],8,["id","onClick"])}}),initInnerAudioContextEventOnce=once((()=>{innerAudioContextEventNames.forEach((e=>{InnerAudioContext.prototype[e]=function(t){isFunction$2(t)&&this._events[e].push(t)}})),innerAudioContextOffEventNames.forEach((e=>{InnerAudioContext.prototype[e]=function(t){var n=this._events[e.replace("off","on")],r=n.indexOf(t);r>=0&&n.splice(r,1)}}))}));class InnerAudioContext{constructor(){this._src="";var e=this._audio=new Audio;this._stoping=!1;["src","autoplay","loop","duration","currentTime","paused","volume"].forEach((t=>{Object.defineProperty(this,t,{set:"src"===t?t=>(e.src=getRealPath(t),this._src=t,t):n=>(e[t]=n,n),get:"src"===t?()=>this._src:()=>e[t]})})),this.startTime=0,Object.defineProperty(this,"obeyMuteSwitch",{set:()=>!1,get:()=>!1}),Object.defineProperty(this,"buffered",{get(){var t=e.buffered;return t.length?t.end(t.length-1):0}}),this._events={},innerAudioContextEventNames.forEach((e=>{this._events[e]=[]})),e.addEventListener("loadedmetadata",(()=>{var t=Number(this.startTime)||0;t>0&&(e.currentTime=t)}));var t=["canplay","pause","seeking","seeked","timeUpdate"];t.concat(["play","ended","error","waiting"]).forEach((n=>{e.addEventListener(n.toLowerCase(),(()=>{if(this._stoping&&t.indexOf(n)>=0)return;const e=`on${n.slice(0,1).toUpperCase()}${n.slice(1)}`;this._events[e].forEach((e=>{e()}))}),!1)})),initInnerAudioContextEventOnce()}play(){this._stoping=!1,this._audio.play()}pause(){this._audio.pause()}stop(){this._stoping=!0,this._audio.pause(),this._audio.currentTime=0,this._events.onStop.forEach((e=>{e()}))}seek(e){this._stoping=!1,"number"!=typeof(e=Number(e))||isNaN(e)||(this._audio.currentTime=e)}destroy(){this.stop()}}const createInnerAudioContext=defineSyncApi(API_CREATE_INNER_AUDIO_CONTEXT,(()=>new InnerAudioContext)),UUID_KEY="__DC_STAT_UUID",storage=navigator.cookieEnabled&&(window.localStorage||window.sessionStorage)||{};let deviceId$1;function deviceId$1$1(){if(deviceId$1=deviceId$1||storage[UUID_KEY],!deviceId$1){deviceId$1=Date.now()+""+Math.floor(1e7*Math.random());try{storage[UUID_KEY]=deviceId$1}catch(e){}}return deviceId$1}function IEVersion(){const e=navigator.userAgent,t=e.indexOf("compatible")>-1&&e.indexOf("MSIE")>-1,n=e.indexOf("Edge")>-1&&!t,r=e.indexOf("Trident")>-1&&e.indexOf("rv:11.0")>-1;if(t){new RegExp("MSIE (\\d+\\.\\d+);").test(e);const t=parseFloat(RegExp.$1);return t>6?t:6}return n?-1:r?11:-1}function getTheme(){if(!0!==__uniConfig.darkmode)return isString$3(__uniConfig.darkmode)?__uniConfig.darkmode:"light";try{return window.matchMedia("(prefers-color-scheme: light)").matches?"light":"dark"}catch(e){return"light"}}function getBrowserInfo(){let e,t="0",n="",r="phone";const o=navigator.language;if(isIOS){e="iOS";const r=ua.match(/OS\s([\w_]+)\slike/);r&&(t=r[1].replace(/_/g,"."));const o=ua.match(/\(([a-zA-Z]+);/);o&&(n=o[1])}else if(isAndroid$1){e="Android";const r=ua.match(/Android[\s/]([\w\.]+)[;\s]/);r&&(t=r[1]);const o=ua.match(/\((.+?)\)/),i=o?o[1].split(";"):ua.split(" "),a=[/\bAndroid\b/i,/\bLinux\b/i,/\bU\b/i,/^\s?[a-z][a-z]$/i,/^\s?[a-z][a-z]-[a-z][a-z]$/i,/\bwv\b/i,/\/[\d\.,]+$/,/^\s?[\d\.,]+$/,/\bBrowser\b/i,/\bMobile\b/i];for(let e=0;e<i.length;e++){const t=i[e];if(t.indexOf("Build")>0){n=t.split("Build")[0].trim();break}let r;for(let e=0;e<a.length;e++)if(a[e].test(t)){r=!0;break}if(!r){n=t.trim();break}}}else if(isIPadOS){if(n="iPad",e="iOS",r="pad",t=isFunction$2(window.BigInt)?"14.0":"13.0",14===parseInt(t)){const e=ua.match(/Version\/(\S*)\b/);e&&(t=e[1])}}else if(isWindows||isMac||isLinux){n="PC",e="PC",r="pc",t="0";let o=ua.match(/\((.+?)\)/)[1];if(isWindows){switch(e="Windows",isWindows[1]){case"5.1":t="XP";break;case"6.0":t="Vista";break;case"6.1":t="7";break;case"6.2":t="8";break;case"6.3":t="8.1";break;case"10.0":t="10"}const n=o&&o.match(/[Win|WOW]([\d]+)/);n&&(t+=` x${n[1]}`)}else if(isMac){e="macOS";const n=o&&o.match(/Mac OS X (.+)/)||"";t&&(t=n[1].replace(/_/g,"."),-1!==t.indexOf(";")&&(t=t.split(";")[0]))}else if(isLinux){e="Linux";const n=o&&o.match(/Linux (.*)/)||"";n&&(t=n[1],-1!==t.indexOf(";")&&(t=t.split(";")[0]))}}else e="Other",t="0",r="unknown";const i=`${e} ${t}`,a=e.toLocaleLowerCase();let s="",c=String(IEVersion());if("-1"!==c)s="IE";else{const e=["Version","Firefox","Chrome","Edge{0,1}"],t=["Safari","Firefox","Chrome","Edge"];for(let n=0;n<e.length;n++){const r=e[n],o=new RegExp(`(${r})/(\\S*)\\b`);o.test(ua)&&(s=t[n],c=ua.match(o)[2])}}let l="portrait";const u=void 0===window.screen.orientation?window.orientation:window.screen.orientation.angle;return l=90===Math.abs(u)?"landscape":"portrait",{deviceBrand:void 0,brand:void 0,deviceModel:n,deviceOrientation:l,model:n,system:i,platform:a,browserName:s.toLocaleLowerCase(),browserVersion:c,language:o,deviceType:r,ua:ua,osname:e,osversion:t,theme:getTheme()}}const getWindowInfo=defineSyncApi("getWindowInfo",(()=>{const e=window.devicePixelRatio,t=getScreenFix(),n=isLandscape(t),r=getScreenWidth(t,n),o=getScreenHeight(t,n),i=getWindowWidth(r);let a=window.innerHeight;const s=safeAreaInsets$1.top,c={left:safeAreaInsets$1.left,right:i-safeAreaInsets$1.right,top:safeAreaInsets$1.top,bottom:a-safeAreaInsets$1.bottom,width:i-safeAreaInsets$1.left-safeAreaInsets$1.right,height:a-safeAreaInsets$1.top-safeAreaInsets$1.bottom},{top:l,bottom:u}=getWindowOffset();return a-=l,a-=u,{windowTop:l,windowBottom:u,windowWidth:i,windowHeight:a,pixelRatio:e,screenWidth:r,screenHeight:o,statusBarHeight:s,safeArea:c,safeAreaInsets:{top:safeAreaInsets$1.top,right:safeAreaInsets$1.right,bottom:safeAreaInsets$1.bottom,left:safeAreaInsets$1.left},screenTop:o-a}}));let browserInfo,_initBrowserInfo=!0;function initBrowserInfo(){_initBrowserInfo&&(browserInfo=getBrowserInfo())}const getDeviceInfo=defineSyncApi("getDeviceInfo",(()=>{initBrowserInfo();const{deviceBrand:e,deviceModel:t,brand:n,model:r,platform:o,system:i,deviceOrientation:a,deviceType:s,osname:c,osversion:l}=browserInfo;return extend$2({brand:n,deviceBrand:e,deviceModel:t,devicePixelRatio:window.devicePixelRatio,deviceId:deviceId$1$1(),deviceOrientation:a,deviceType:s,model:r,platform:o,system:i,osName:c?c.toLocaleLowerCase():void 0,osVersion:l})})),getAppBaseInfo=defineSyncApi("getAppBaseInfo",(()=>{initBrowserInfo();const{theme:e,language:t,browserName:n,browserVersion:r}=browserInfo;return extend$2({appId:__uniConfig.appId,appName:__uniConfig.appName,appVersion:__uniConfig.appVersion,appVersionCode:__uniConfig.appVersionCode,appLanguage:getLocale$1?getLocale$1():t,enableDebug:!1,hostSDKVersion:void 0,hostPackageName:void 0,hostFontSizeSetting:void 0,hostName:n,hostVersion:r,hostTheme:e,hostLanguage:t,language:t,SDKVersion:"",theme:e,version:"",uniPlatform:"web",isUniAppX:!1,uniCompileVersion:__uniConfig.compilerVersion,uniCompilerVersion:__uniConfig.compilerVersion,uniRuntimeVersion:__uniConfig.compilerVersion},{})})),getSystemInfoSync=defineSyncApi("getSystemInfoSync",(()=>{_initBrowserInfo=!0,initBrowserInfo(),_initBrowserInfo=!1;const e=getWindowInfo(),t=getDeviceInfo(),n=getAppBaseInfo();_initBrowserInfo=!0;const{ua:r,browserName:o,browserVersion:i,osname:a,osversion:s}=browserInfo,c=extend$2(e,t,n,{ua:r,browserName:o,browserVersion:i,uniPlatform:"web",uniCompileVersion:__uniConfig.compilerVersion,uniRuntimeVersion:__uniConfig.compilerVersion,fontSizeSetting:void 0,osName:a.toLocaleLowerCase(),osVersion:s,osLanguage:void 0,osTheme:void 0});return delete c.screenTop,delete c.enableDebug,__uniConfig.darkmode||delete c.theme,sortObject(c)}));function parseValue(e){const t=["object","string","number","boolean","undefined"];try{const n=isString$3(e)?JSON.parse(e):e,r=n.type;if(t.indexOf(r)>=0){const e=Object.keys(n);if(2===e.length&&"data"in n){if(typeof n.data===r)return n.data;if("object"===r&&/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}\.\d{3}Z$/.test(n.data))return new Date(n.data)}else if(1===e.length)return""}}catch(n){}}const setStorageSync=defineSyncApi(API_SET_STORAGE_SYNC,((e,t)=>{const n=typeof t,r="string"===n?t:JSON.stringify({type:n,data:t});localStorage.setItem(e,r)}));function getStorageOrigin(e){const t=localStorage&&localStorage.getItem(e);if(!isString$3(t))throw new Error("data not found");let n=t;try{const e=parseValue(JSON.parse(t));void 0!==e&&(n=e)}catch(r){}return n}const getStorageSync=defineSyncApi(API_GET_STORAGE_SYNC,(e=>{try{return getStorageOrigin(e)}catch(t){return""}})),removeStorageSync=defineSyncApi(API_REMOVE_STORAGE,(e=>{localStorage&&localStorage.removeItem(e)})),hideKeyboard=defineAsyncApi(API_HIDE_KEYBOARD,((e,{resolve:t,reject:n})=>{const r=document.activeElement;!r||"TEXTAREA"!==r.tagName&&"INPUT"!==r.tagName||(r.blur(),t())})),MIMEType={image:{jpg:"jpeg",jpe:"jpeg",pbm:"x-portable-bitmap",pgm:"x-portable-graymap",pnm:"x-portable-anymap",ppm:"x-portable-pixmap",psd:"vnd.adobe.photoshop",pic:"x-pict",rgb:"x-rgb",svg:"svg+xml",svgz:"svg+xml",tif:"tiff",xif:"vnd.xiff",wbmp:"vnd.wap.wbmp",wdp:"vnd.ms-photo",xbm:"x-xbitmap",ico:"x-icon"},video:{"3g2":"3gpp2","3gp":"3gpp",avi:"x-msvideo",f4v:"x-f4v",flv:"x-flv",jpgm:"jpm",jpgv:"jpeg",m1v:"mpeg",m2v:"mpeg",mpe:"mpeg",mpg:"mpeg",mpg4:"mpeg",m4v:"x-m4v",mkv:"x-matroska",mov:"quicktime",qt:"quicktime",movie:"x-sgi-movie",mp4v:"mp4",ogv:"ogg",smv:"x-smv",wm:"x-ms-wm",wmv:"x-ms-wmv",wmx:"x-ms-wmx",wvx:"x-ms-wvx"}},ALL="all";function isWXEnv(){const e=window.navigator.userAgent.toLowerCase().match(/MicroMessenger/i);return!(!e||"micromessenger"!==e[0])}function _createInput({count:e,sourceType:t,type:n,extension:r}){addInteractListener();const o=document.createElement("input");return o.type="file",updateElementStyle(o,{position:"absolute",visibility:"hidden",zIndex:"-999",width:"0",height:"0",top:"0",left:"0"}),o.accept=r.map((e=>{if(n!==ALL){const t=e.replace(".","");return`${n}/${MIMEType[n][t]||t}`}return isWXEnv()?".":0===e.indexOf(".")?e:`.${e}`})).join(","),e&&e>1&&(o.multiple=!0),n!==ALL&&t instanceof Array&&1===t.length&&"camera"===t[0]&&o.setAttribute("capture","camera"),o}let imageInput=null;const chooseImage=defineAsyncApi(API_CHOOSE_IMAGE,(({count:e,sourceType:t,extension:n},{resolve:r,reject:o})=>{initI18nChooseFileMsgsOnce();const{t:i}=useI18n();imageInput&&(document.body.removeChild(imageInput),imageInput=null),imageInput=_createInput({count:e,sourceType:t,extension:n,type:"image"}),document.body.appendChild(imageInput),imageInput.addEventListener("change",(function(t){const n=t.target,o=[];if(n&&n.files){const t=n.files.length;for(let r=0;r<t;r++){const t=n.files[r];let i;Object.defineProperty(t,"path",{get:()=>(i=i||fileToUrl(t),i)}),r<e&&o.push(t)}}r({get tempFilePaths(){return o.map((({path:e})=>e))},tempFiles:o})})),imageInput.click(),getInteractStatus()||console.warn(i("uni.chooseFile.notUserActivation"))}),ChooseImageProtocol,ChooseImageOptions),KEY_MAPS={esc:["Esc","Escape"],enter:["Enter"]},KEYS=Object.keys(KEY_MAPS);function useKeyboard(){const e=ref(""),t=ref(!1),n=n=>{if(t.value)return;const r=KEYS.find((e=>-1!==KEY_MAPS[e].indexOf(n.key)));r&&(e.value=r),nextTick((()=>e.value=""))};return onMounted((()=>{document.addEventListener("keyup",n)})),onBeforeUnmount((()=>{document.removeEventListener("keyup",n)})),{key:e,disable:t}}function createRootApp(e,t,n){return t.onClose=(...e)=>(t.visible=!1,n.apply(null,e)),createApp$1(defineComponent({setup:()=>()=>(openBlock(),createBlock(e,t,null,16))}))}function ensureRoot(e){let t=document.getElementById(e);return t||(t=document.createElement("div"),t.id=e,document.body.append(t)),t}function usePopup(e,{onEsc:t,onEnter:n}){const r=ref(e.visible),{key:o,disable:i}=useKeyboard();return watch((()=>e.visible),(e=>r.value=e)),watch((()=>r.value),(e=>i.value=!e)),watchEffect((()=>{const{value:e}=o;"esc"===e?t&&t():"enter"===e&&n&&n()})),r}const request=defineTaskApi(API_REQUEST,(({url:e,data:t,header:n={},method:r,dataType:o,responseType:i,withCredentials:a,timeout:s=__uniConfig.networkTimeout.request},{resolve:c,reject:l})=>{let u=null;const d=normalizeContentType(n);if("GET"!==r)if(isString$3(t)||t instanceof ArrayBuffer)u=t;else if("json"===d)try{u=JSON.stringify(t)}catch(f){u=t.toString()}else if("urlencoded"===d){const e=[];for(const n in t)hasOwn$2(t,n)&&e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));u=e.join("&")}else u=t.toString();const A=new XMLHttpRequest,p=new RequestTask(A);A.open(r,e);for(const g in n)hasOwn$2(n,g)&&A.setRequestHeader(g,n[g]);const h=setTimeout((function(){A.onload=A.onabort=A.onerror=null,p.abort(),l("timeout",{errCode:5})}),s);return A.responseType=i,A.onload=function(){clearTimeout(h);const e=A.status;let t="text"===i?A.responseText:A.response;if("text"===i&&"json"===o)try{t=JSON.parse(t)}catch(f){}c({data:t,statusCode:e,header:parseHeaders$1(A.getAllResponseHeaders()),cookies:[]})},A.onabort=function(){clearTimeout(h),l("abort",{errCode:600003})},A.onerror=function(){clearTimeout(h),l(void 0,{errCode:5})},A.withCredentials=a,A.send(u),p}),RequestProtocol,RequestOptions);function normalizeContentType(e){const t=Object.keys(e).find((e=>"content-type"===e.toLowerCase()));if(!t)return;const n=e[t];return 0===n.indexOf("application/json")?"json":0===n.indexOf("application/x-www-form-urlencoded")?"urlencoded":"string"}class RequestTask{constructor(e){this._xhr=e}abort(){this._xhr&&(this._xhr.abort(),delete this._xhr)}onHeadersReceived(e){throw new Error("Method not implemented.")}offHeadersReceived(e){throw new Error("Method not implemented.")}}function parseHeaders$1(e){const t={};return e.split(LINEFEED).forEach((e=>{const n=e.match(/(\S+\s*):\s*(.*)/);n&&3===n.length&&(t[n[1]]=n[2])})),t}const navigateBack=defineAsyncApi(API_NAVIGATE_BACK,((e,{resolve:t,reject:n})=>{let r=!0;return!0===invokeHook(ON_BACK_PRESS,{from:e.from||"navigateBack"})&&(r=!1),r?(getApp$1().$router.go(-e.delta),t()):n(ON_BACK_PRESS)}),NavigateBackProtocol,NavigateBackOptions),navigateTo=defineAsyncApi(API_NAVIGATE_TO,(({url:e,events:t,isAutomatedTesting:n},{resolve:r,reject:o})=>{if(entryPageState.handledBeforeEntryPageRoutes)return navigate({type:API_NAVIGATE_TO,url:e,events:t,isAutomatedTesting:n}).then(r).catch(o);navigateToPagesBeforeEntryPages.push({args:{type:API_NAVIGATE_TO,url:e,events:t,isAutomatedTesting:n},resolve:r,reject:o})}),NavigateToProtocol,NavigateToOptions);function onThemeChange(e){__uniConfig.darkmode&&UniServiceJSBridge$1.on(ON_THEME_CHANGE,e)}function offThemeChange(e){UniServiceJSBridge$1.off(ON_THEME_CHANGE,e)}function parseTheme(e){let t={};return __uniConfig.darkmode&&(t=normalizeStyles(e,__uniConfig.themeConfig,getTheme())),__uniConfig.darkmode?t:e}function useTheme(e,t){const n=isReactive(e),r=n?reactive(parseTheme(e)):parseTheme(e);return __uniConfig.darkmode&&n&&watch(e,(e=>{const t=parseTheme(e);for(const n in t)r[n]=t[n]})),t&&onThemeChange(t),r}const props$5={title:{type:String,default:""},icon:{default:"success",validator:e=>-1!==SHOW_TOAST_ICON.indexOf(e)},image:{type:String,default:""},duration:{type:Number,default:1500},mask:{type:Boolean,default:!1},visible:{type:Boolean}},ToastIconClassName="uni-toast__icon",ICONCOLOR={light:"#fff",dark:"rgba(255,255,255,0.9)"},getIconColor=e=>ICONCOLOR[e],Toast=defineComponent({name:"Toast",props:props$5,setup(e){initI18nShowToastMsgsOnce(),initI18nShowLoadingMsgsOnce();const{Icon:t}=useToastIcon(e),n=usePopup(e,{});return()=>{const{mask:r,duration:o,title:i,image:a}=e;return createVNode(Transition,{name:"uni-fade"},{default:()=>[withDirectives(createVNode("uni-toast",{"data-duration":o},[r?createVNode("div",{class:"uni-mask",style:"background: transparent;",onTouchmove:onEventPrevent},null,40,["onTouchmove"]):"",a||t.value?createVNode("div",{class:"uni-toast"},[a?createVNode("img",{src:a,class:ToastIconClassName},null,10,["src"]):t.value,createVNode("p",{class:"uni-toast__content"},[i])]):createVNode("div",{class:"uni-sample-toast"},[createVNode("p",{class:"uni-simple-toast__text"},[i])])],8,["data-duration"]),[[vShow,n.value]])]})}}});function useToastIcon(e){const t=ref(getIconColor(getTheme())),n=({theme:e})=>t.value=getIconColor(e);watchEffect((()=>{e.visible?onThemeChange(n):offThemeChange(n)}));return{Icon:computed((()=>{switch(e.icon){case"success":return createVNode(createSvgIconVNode(ICON_PATH_SUCCESS_NO_CIRCLE,t.value,38),{class:ToastIconClassName});case"error":return createVNode(createSvgIconVNode(ICON_PATH_WARN,t.value,38),{class:ToastIconClassName});case"loading":return createVNode("i",{class:[ToastIconClassName,"uni-loading"]},null,2);default:return null}}))}}let showToastState,showType="",timeoutId;const scope=effectScope();function watchVisible(){scope.run((()=>{watch([()=>showToastState.visible,()=>showToastState.duration],(([e,t])=>{if(e){if(timeoutId&&clearTimeout(timeoutId),"onShowLoading"===showType)return;timeoutId=setTimeout((()=>{hidePopup("onHideToast")}),t)}else timeoutId&&clearTimeout(timeoutId)}))}))}function createToast(e){showToastState?extend$2(showToastState,e):(showToastState=reactive(extend$2(e,{visible:!1})),nextTick((()=>{watchVisible(),UniServiceJSBridge$1.on("onHidePopup",(()=>hidePopup("onHidePopup"))),createRootApp(Toast,showToastState,(()=>{})).mount(ensureRoot("u-a-t"))}))),setTimeout((()=>{showToastState.visible=!0}),10)}const showLoadingDefaultState={icon:"loading",duration:1e8,image:""},showLoading$1=defineAsyncApi(API_SHOW_LOADING,((e,{resolve:t,reject:n})=>{extend$2(e,showLoadingDefaultState),createToast(e),showType="onShowLoading",t()}),ShowLoadingProtocol,ShowLoadingOptions),hideLoading$1=defineAsyncApi(API_HIDE_LOADING,((e,{resolve:t,reject:n})=>{hidePopup("onHideLoading"),t()}));function hidePopup(e){const{t:t}=useI18n();if(!showType)return;let n="";if("onHideToast"===e&&"onShowToast"!==showType?n=t("uni.showToast.unpaired"):"onHideLoading"===e&&"onShowLoading"!==showType&&(n=t("uni.showLoading.unpaired")),n)return console.warn(n);showType="",setTimeout((()=>{showToastState.visible=!1}),10)}function usePopupStyle(e){const t=ref(0),n=ref(0),r=computed((()=>t.value>=500&&n.value>=500)),o=computed((()=>{const t={content:{transform:"",left:"",top:"",bottom:""},triangle:{left:"",top:"",bottom:"","border-width":"","border-color":""}},o=t.content,i=t.triangle,a=e.popover;function s(e){return Number(e)||0}if(r.value&&a){extend$2(i,{position:"absolute",width:"0",height:"0","margin-left":"-6px","border-style":"solid"});const e=s(a.left),t=s(a.width),r=s(a.top),c=s(a.height),l=e+t/2;o.transform="none !important";const u=Math.max(0,l-150);o.left=`${u}px`;let d=Math.max(12,l-u);d=Math.min(288,d),i.left=`${d}px`;const A=n.value/2;r+c-A>A-r?(o.top="auto",o.bottom=n.value-r+6+"px",i.bottom="-6px",i["border-width"]="6px 6px 0 6px",i["border-color"]="#fcfcfd transparent transparent transparent"):(o.top=`${r+c+6}px`,i.top="-6px",i["border-width"]="0 6px 6px 6px",i["border-color"]="transparent transparent #fcfcfd transparent")}return t}));return onMounted((()=>{const e=()=>{const{windowWidth:e,windowHeight:r,windowTop:o}=getSystemInfoSync();t.value=e,n.value=r+(o||0)};window.addEventListener("resize",e),e(),onUnmounted((()=>{window.removeEventListener("resize",e)}))})),{isDesktop:r,popupStyle:o}}const loadFontFace=defineAsyncApi(API_LOAD_FONT_FACE,(({family:e,source:t,desc:n},{resolve:r,reject:o})=>{addFont(e,t=t.startsWith('url("')||t.startsWith("url('")?`url('${getRealPath(t.substring(5,t.length-2))}')`:t.startsWith("url(")?`url('${getRealPath(t.substring(4,t.length-1))}')`:getRealPath(t),n).then((()=>{r()})).catch((e=>{o(`loadFontFace:fail ${e}`)}))}));function updateDocumentTitle(e){document.title=e,UniServiceJSBridge$1.emit(ON_NAVIGATION_BAR_CHANGE,{titleText:e})}function useDocumentTitle(e){function t(){updateDocumentTitle(e.navigationBar.titleText)}watchEffect(t),onActivated(t)}function setNavigationBar(e,t,n,r,o){if(!e)return o("page not found");const{navigationBar:i}=e;switch(t){case API_SET_NAVIGATION_BAR_COLOR:const{frontColor:e,backgroundColor:t,animation:r}=n,{duration:o,timingFunc:a}=r;e&&(i.titleColor="#000000"===e?"#000000":"#ffffff"),t&&(i.backgroundColor=t),i.duration=o+"ms",i.timingFunc=a;break;case API_SHOW_NAVIGATION_BAR_LOADING:i.loading=!0;break;case API_HIDE_NAVIGATION_BAR_LOADING:i.loading=!1;break;case API_SET_NAVIGATION_BAR_TITLE:const{title:s}=n;i.titleText=s}r()}const setNavigationBarTitle=defineAsyncApi(API_SET_NAVIGATION_BAR_TITLE,((e,{resolve:t,reject:n})=>{setNavigationBar(getCurrentPageMeta(),API_SET_NAVIGATION_BAR_TITLE,e,t,n)})),pageScrollTo=defineAsyncApi(API_PAGE_SCROLL_TO,(({scrollTop:e,selector:t,duration:n},{resolve:r})=>{scrollTo(t||e||0,n),r()}),PageScrollToProtocol,PageScrollToOptions),stopPullDownRefresh=defineAsyncApi(API_STOP_PULL_DOWN_REFRESH,((e,{resolve:t})=>{UniServiceJSBridge$1.invokeViewMethod(API_STOP_PULL_DOWN_REFRESH,{},getCurrentPageId()),t()})),setTabBarItemProps=["text","iconPath","iconfont","selectedIconPath","visible"],setTabBarStyleProps=["color","selectedColor","backgroundColor","borderStyle","borderColor","midButton"],setTabBarBadgeProps=["badge","redDot"];function setProperties(e,t,n){t.forEach((function(t){hasOwn$2(n,t)&&(e[t]=n[t])}))}function setTabBar(e,t,n,r){var o;let i=!1;const a=getCurrentBasePages();if(a.length&&getPage$BasePage(a[a.length-1]).meta.isTabBar&&(i=!0),!i)return r("not TabBar page");const{index:s}=t;if("number"==typeof s){const e=null==(o=null==__uniConfig?void 0:__uniConfig.tabBar)?void 0:o.list.length;if(!e||s>=e)return r("tabbar item not found")}const c=useTabBar();switch(e){case API_SHOW_TAB_BAR:c.shown=!0;break;case API_HIDE_TAB_BAR:c.shown=!1;break;case API_SET_TAB_BAR_ITEM:const e=c.list[s],n=e.pagePath;setProperties(e,setTabBarItemProps,t);const{pagePath:r}=t;if(r){const e=addLeadingSlash(r);e!==n&&normalizeTabBarRoute(s,n,e)}break;case API_SET_TAB_BAR_STYLE:setProperties(c,setTabBarStyleProps,t);break;case API_SHOW_TAB_BAR_RED_DOT:setProperties(c.list[s],setTabBarBadgeProps,{badge:"",redDot:!0});break;case API_SET_TAB_BAR_BADGE:setProperties(c.list[s],setTabBarBadgeProps,{badge:t.text,redDot:!0});break;case API_HIDE_TAB_BAR_RED_DOT:case API_REMOVE_TAB_BAR_BADGE:setProperties(c.list[s],setTabBarBadgeProps,{badge:"",redDot:!1})}n()}const removeTabBarBadge=defineAsyncApi(API_REMOVE_TAB_BAR_BADGE,((e,{resolve:t,reject:n})=>{setTabBar(API_REMOVE_TAB_BAR_BADGE,e,t,n)}),RemoveTabBarBadgeProtocol,RemoveTabBarBadgeOptions),setTabBarBadge=defineAsyncApi(API_SET_TAB_BAR_BADGE,((e,{resolve:t,reject:n})=>{setTabBar(API_SET_TAB_BAR_BADGE,e,t,n)}),SetTabBarBadgeProtocol,SetTabBarBadgeOptions),UNI_TABBAR_ICON_FONT="UniTabbarIconFont",TabBar=defineSystemComponent({name:"TabBar",setup(){const e=ref([]),t=useTabBar(),n=useTheme(t,(()=>{const e=parseTheme(t);n.backgroundColor=e.backgroundColor,n.borderStyle=e.borderStyle,n.color=e.color,n.selectedColor=e.selectedColor,n.blurEffect=e.blurEffect,n.midButton=e.midButton,e.list&&e.list.length&&e.list.forEach(((e,t)=>{n.list[t].iconPath=e.iconPath,n.list[t].selectedIconPath=e.selectedIconPath}))}));useVisibleList(n,e),useTabBarCssVar(n);const r=useSwitchTab(useRoute(),n,e),{style:o,borderStyle:i,placeholderStyle:a}=useTabBarStyle(n);return onMounted((()=>{n.iconfontSrc&&loadFontFace({family:UNI_TABBAR_ICON_FONT,source:`url("${n.iconfontSrc}")`})})),()=>{const t=createTabBarItemsTsx(n,r,e);return createVNode("uni-tabbar",{class:"uni-tabbar-"+n.position},[createVNode("div",{class:"uni-tabbar",style:o.value},[createVNode("div",{class:"uni-tabbar-border",style:i.value},null,4),t],4),createVNode("div",{class:"uni-placeholder",style:a.value},null,4)],2)}}});function useTabBarCssVar(e){watch((()=>e.shown),(t=>{updatePageCssVar({"--window-bottom":normalizeWindowBottom(t?parseInt(e.height):0)})}))}function useVisibleList(e,t){ref(extend$2({type:"midButton"},e.midButton)),watchEffect((function(){let n=[];n=e.list.filter((e=>!1!==e.visible)),t.value=n}))}function useSwitchTab(e,t,n){return watchEffect((()=>{const r=e.meta;if(r.isTabBar){const e=r.route,o=n.value.findIndex((t=>t.pagePath===e));t.selectedIndex=o}})),(t,n)=>()=>{const{pagePath:r,text:o}=t;let i=addLeadingSlash(r);i===__uniRoutes[0].alias&&(i="/"),e.path!==i?switchTab({from:"tabBar",url:i,tabBarText:o}):invokeHook("onTabItemTap",{index:n,text:o,pagePath:r})}}const DEFAULT_BG_COLOR="#f7f7fa",BLUR_EFFECT_COLOR_DARK="rgb(0, 0, 0, 0.8)",BLUR_EFFECT_COLOR_LIGHT="rgb(250, 250, 250, 0.8)",BLUR_EFFECT_COLORS={dark:BLUR_EFFECT_COLOR_DARK,light:BLUR_EFFECT_COLOR_LIGHT,extralight:BLUR_EFFECT_COLOR_LIGHT},BORDER_COLORS={white:"rgba(255, 255, 255, 0.33)",black:"rgba(0, 0, 0, 0.33)"};function useTabBarStyle(e){return{style:computed((()=>{let t=e.backgroundColor;const n=e.blurEffect;return t||cssBackdropFilter&&n&&"none"!==n&&(t=BLUR_EFFECT_COLORS[n]),{backgroundColor:t||DEFAULT_BG_COLOR,backdropFilter:"none"!==n?"blur(10px)":n}})),borderStyle:computed((()=>{const{borderStyle:t,borderColor:n}=e;return n&&isString$3(n)?{backgroundColor:n}:{backgroundColor:BORDER_COLORS[t]||BORDER_COLORS.black}})),placeholderStyle:computed((()=>({height:e.height})))}}function createTabBarItemsTsx(e,t,n){const{selectedIndex:r,selectedColor:o,color:i}=e;return n.value.map(((n,a)=>{const s=r===a;return createTabBarItemTsx(s?o:i,s&&n.selectedIconPath||n.iconPath||"",n.iconfont?s&&n.iconfont.selectedText||n.iconfont.text:void 0,n.iconfont?s&&n.iconfont.selectedColor||n.iconfont.color:void 0,n,e,a,t)}))}function createTabBarItemTsx(e,t,n,r,o,i,a,s){return createVNode("div",{key:a,class:"uni-tabbar__item",onClick:s(o,a)},[createTabBarItemBdTsx(e,t||"",n,r,o,i)],8,["onClick"])}function createTabBarItemBdTsx(e,t,n,r,o,i){const{height:a}=i;return createVNode("div",{class:"uni-tabbar__bd",style:{height:a}},[n?createTabBarItemIconfontTsx(n,r||BLUR_EFFECT_COLOR_DARK,o,i):t&&createTabBarItemIconTsx(t,o,i),o.text&&createTabBarItemTextTsx(e,o,i),o.redDot&&createTabBarItemRedDotTsx(o.badge)],4)}function createTabBarItemIconTsx(e,t,n){const{type:r,text:o}=t,{iconWidth:i}=n;return createVNode("div",{class:"uni-tabbar__icon"+(o?" uni-tabbar__icon__diff":""),style:{width:i,height:i}},["midButton"!==r&&createVNode("img",{src:getRealPath(e)},null,8,["src"])],6)}function createTabBarItemIconfontTsx(e,t,n,r){var o;const{type:i,text:a}=n,{iconWidth:s}=r,c="uni-tabbar__icon"+(a?" uni-tabbar__icon__diff":""),l={width:s,height:s},u={fontSize:(null==(o=n.iconfont)?void 0:o.fontSize)||s,color:t};return createVNode("div",{class:c,style:l},["midButton"!==i&&createVNode("div",{class:"uni-tabbar__iconfont",style:u},[e],4)],6)}function createTabBarItemTextTsx(e,t,n){const{iconPath:r,text:o}=t,{fontSize:i,spacing:a}=n;return createVNode("div",{class:"uni-tabbar__label",style:{color:e,fontSize:i,lineHeight:r?"normal":1.8,marginTop:r?a:"inherit"}},[o],4)}function createTabBarItemRedDotTsx(e){return createVNode("div",{class:"uni-tabbar__reddot"+(e?" uni-tabbar__badge":"")},[e],2)}const DEFAULT_CSS_VAR_VALUE="0px",LayoutComponent=defineSystemComponent({name:"Layout",setup(e,{emit:t}){const n=ref(null);initCssVar();const r=useKeepAliveRoute(),{layoutState:o,windowState:i}=useState();useMaxWidth(o,n);const a=useShowTabBar(),s=useAppClass(a);return()=>{const e=createLayoutTsx(r),t=createTabBarTsx(a);return createVNode("uni-app",{ref:n,class:s.value},[e,t],2)}}});function useAppClass(e){const t=ref(!1);return computed((()=>({"uni-app--showtabbar":e&&e.value,"uni-app--maxwidth":t.value})))}function initCssVar(){updateCssVar({"--status-bar-height":DEFAULT_CSS_VAR_VALUE,"--top-window-height":DEFAULT_CSS_VAR_VALUE,"--window-left":DEFAULT_CSS_VAR_VALUE,"--window-right":DEFAULT_CSS_VAR_VALUE,"--window-margin":DEFAULT_CSS_VAR_VALUE,"--tab-bar-height":DEFAULT_CSS_VAR_VALUE})}function useMaxWidth(e,t){const n=usePageRoute();function r(){const r=document.body.clientWidth,o=getCurrentBasePages();let i={};if(o.length>0){i=getPage$BasePage(o[o.length-1]).meta}else{const e=getRouteOptions(n.path,!0);e&&(i=e.meta)}const a=parseInt(String((hasOwn$2(i,"maxWidth")?i.maxWidth:__uniConfig.globalStyle.maxWidth)||Number.MAX_SAFE_INTEGER));let s=!1;s=r>a,s&&a?(e.marginWidth=(r-a)/2,nextTick((()=>{const e=t.value;e&&e.setAttribute("style","max-width:"+a+"px;margin:0 auto;")}))):(e.marginWidth=0,nextTick((()=>{const e=t.value;e&&e.removeAttribute("style")})))}watch([()=>n.path],r),onMounted((()=>{r(),window.addEventListener("resize",r)}))}function useState(){usePageRoute();{const e=reactive({marginWidth:0,leftWindowWidth:0,rightWindowWidth:0});return watch((()=>e.marginWidth),(e=>updateCssVar({"--window-margin":e+"px"}))),watch((()=>e.leftWindowWidth+e.marginWidth),(e=>{updateCssVar({"--window-left":e+"px"})})),watch((()=>e.rightWindowWidth+e.marginWidth),(e=>{updateCssVar({"--window-right":e+"px"})})),{layoutState:e,windowState:computed((()=>({})))}}}function createLayoutTsx(e,t,n,r,o,i){return createRouterViewVNode(e)}function useShowTabBar(e){const t=usePageRoute(),n=useTabBar(),r=computed((()=>t.meta.isTabBar&&n.shown));return updateCssVar({"--tab-bar-height":n.height}),r}function createTabBarTsx(e){return withDirectives(createVNode(TabBar,null,null,512),[[vShow,e.value]])}function createRouterViewVNode({routeKey:e,isTabBar:t,routeCache:n}){return createVNode(RouterView,null,{default:withCtx((({Component:r})=>[(openBlock(),createBlock(KeepAlive,{matchBy:"key",cache:n},[(openBlock(),createBlock(resolveDynamicComponent(r),{type:t.value?"tabBar":"",key:e.value}))],1032,["cache"]))])),_:1})}function _isSlot(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!isVNode(e)}function getDefaultStartValue(e){if(e.mode===mode.TIME)return"00:00";if(e.mode===mode.DATE){const t=(new Date).getFullYear()-150;switch(e.fields){case fields.YEAR:return t.toString();case fields.MONTH:return t+"-01";default:return t+"-01-01"}}return""}function getDefaultEndValue(e){if(e.mode===mode.TIME)return"23:59";if(e.mode===mode.DATE){const t=(new Date).getFullYear()+150;switch(e.fields){case fields.YEAR:return t.toString();case fields.MONTH:return t+"-12";default:return t+"-12-31"}}return""}function getDateValueArray(e,t,n,r){const o=e.mode===mode.DATE?"-":":",i=e.mode===mode.DATE?t.dateArray:t.timeArray;let a;if(e.mode===mode.TIME)a=2;else switch(e.fields){case fields.YEAR:a=1;break;case fields.MONTH:a=2;break;default:a=3}const s=String(n).split(o);let c=[];for(let l=0;l<a;l++){const e=s[l];c.push(i[l].indexOf(e))}return c.indexOf(-1)>=0&&(c=r?getDateValueArray(e,t,r):c.map((()=>0))),c}const mode={SELECTOR:"selector",MULTISELECTOR:"multiSelector",TIME:"time",DATE:"date"},fields={YEAR:"year",MONTH:"month",DAY:"day"},selectorType={PICKER:"picker",SELECT:"select"},props={name:{type:String,default:""},range:{type:Array,default:()=>[]},rangeKey:{type:String,default:""},value:{type:[Number,String,Array],default:0},mode:{type:String,default:mode.SELECTOR,validator:e=>Object.values(mode).includes(e)},fields:{type:String,default:""},start:{type:String,default:e=>getDefaultStartValue(e)},end:{type:String,default:e=>getDefaultEndValue(e)},disabled:{type:[Boolean,String],default:!1},selectorType:{type:String,default:""}},index$7=defineBuiltInComponent({name:"Picker",compatConfig:{MODE:3},props:props,emits:["change","cancel","columnchange"],setup(e,{emit:t,slots:n}){initI18nPickerMsgsOnce();const{t:r}=useI18n(),o=ref(null),i=ref(null),a=ref(null),s=ref(null),c=ref(!1),{state:l,rangeArray:u}=usePickerState(e),d=useCustomEvent(o,t),{system:A,selectorTypeComputed:p,_show:h,_l10nColumn:f,_l10nItem:g,_input:m,_fixInputPosition:_,_pickerViewChange:E,_cancel:v,_change:y,_resetFormData:b,_getFormData:C,_createTime:S,_createDate:w,_setValueSync:T}=usePickerMethods(e,l,d,o,i,a,s);usePickerWatch(l,v,y),usePickerForm(b,C),S(),w(),T();const I=usePopupStyle(l);return watchEffect((()=>{l.isDesktop=I.isDesktop.value,l.popupStyle=I.popupStyle.value})),onBeforeUnmount((()=>{i.value&&i.value.remove()})),onMounted((()=>{c.value=!0})),()=>{let t;const{visible:d,contentVisible:b,valueArray:C,popupStyle:S,valueSync:w}=l,{rangeKey:T,mode:I,start:R,end:O}=e,N=useBooleanAttr(e,"disabled");return createVNode("uni-picker",mergeProps({ref:o},N,{onClick:withWebEvent(h)}),[c.value?createVNode("div",{ref:i,class:["uni-picker-container",`uni-${I}-${p.value}`],onWheel:onEventPrevent,onTouchmove:onEventPrevent},[createVNode(Transition,{name:"uni-fade"},{default:()=>[withDirectives(createVNode("div",{class:"uni-mask uni-picker-mask",onClick:withWebEvent(v),onMousemove:_},null,40,["onClick","onMousemove"]),[[vShow,d]])]}),A.value?null:createVNode("div",{class:[{"uni-picker-toggle":d},"uni-picker-custom"],style:S.content},[createVNode("div",{class:"uni-picker-header",onClick:onEventStop},[createVNode("div",{class:"uni-picker-action uni-picker-action-cancel",onClick:withWebEvent(v)},[r("uni.picker.cancel")],8,["onClick"]),createVNode("div",{class:"uni-picker-action uni-picker-action-confirm",onClick:y},[r("uni.picker.done")],8,["onClick"])],8,["onClick"]),b?createVNode(PickerView,{value:f(C),class:"uni-picker-content",onChange:E},_isSlot(t=renderList(f(u.value),((e,t)=>{let n;return createVNode(PickerViewColumn,{key:t},_isSlot(n=renderList(e,((e,n)=>createVNode("div",{key:n,class:"uni-picker-item"},["object"==typeof e?e[T]||"":g(e,t)]))))?n:{default:()=>[n],_:1})})))?t:{default:()=>[t],_:1},8,["value","onChange"]):null,createVNode("div",{ref:a,class:"uni-picker-select",onWheel:onEventStop,onTouchmove:onEventStop},[renderList(u.value[0],((e,t)=>createVNode("div",{key:t,class:["uni-picker-item",{selected:C[0]===t}],onClick:()=>{C[0]=t,y()}},["object"==typeof e?e[T]||"":e],10,["onClick"])))],40,["onWheel","onTouchmove"]),createVNode("div",{style:S.triangle},null,4)],6)],40,["onWheel","onTouchmove"]):null,createVNode("div",null,[n.default&&n.default()]),A.value?createVNode("div",{class:"uni-picker-system",onMousemove:withWebEvent(_)},[createVNode("input",{class:["uni-picker-system_input",A.value],ref:s,value:w,type:I,tabindex:"-1",min:R,max:O,onChange:e=>{m(e),onEventStop(e)}},null,42,["value","type","min","max","onChange"])],40,["onMousemove"]):null],16,["onClick"])}}});function usePickerState(e){const t=reactive({valueSync:void 0,visible:!1,contentVisible:!1,popover:null,valueChangeSource:"",timeArray:[],dateArray:[],valueArray:[],oldValueArray:[],isDesktop:!1,popupStyle:{content:{},triangle:{}}}),n=computed((()=>{let n=e.range;switch(e.mode){case mode.SELECTOR:return[n];case mode.MULTISELECTOR:return n;case mode.TIME:return t.timeArray;case mode.DATE:{const n=t.dateArray;switch(e.fields){case fields.YEAR:return[n[0]];case fields.MONTH:return[n[0],n[1]];default:return[n[0],n[1],n[2]]}}}return[]}));return{state:t,rangeArray:n}}const getiPadFlag=()=>0===String(navigator.vendor).indexOf("Apple")&&navigator.maxTouchPoints>0;function useIsiPad(){const e=ref(!1);return e.value=getiPadFlag(),e}const getSystem=()=>{if(/win|mac/i.test(navigator.platform)){if("Google Inc."===navigator.vendor)return"chrome";if(/Firefox/.test(navigator.userAgent))return"firefox"}return""};function useSystem(){const e=ref("");return e.value=getSystem(),e}let __contentVisibleDelay;function usePickerMethods(e,t,n,r,o,i,a){const s=useIsiPad(),c=useSystem(),l=computed((()=>{const t=e.selectorType;return Object.values(selectorType).includes(t)?t:s.value?selectorType.PICKER:selectorType.SELECT})),u=computed((()=>e.mode===mode.DATE&&!Object.values(fields).includes(e.fields)&&t.isDesktop?c.value:"")),d=computed((()=>getDateValueArray(e,t,e.start,getDefaultStartValue(e)))),A=computed((()=>getDateValueArray(e,t,e.end,getDefaultEndValue(e))));function p(e){return 60*e[0]+e[1]}function h(e){return 31*e[0]*12+31*(e[1]||0)+(e[2]||0)}function f(e,t){for(let n=0;n<e.length&&n<t.length;n++)e[n]=t[n]}function g(){let n=e.value;switch(e.mode){case mode.MULTISELECTOR:{isArray$3(n)||(n=t.valueArray),isArray$3(t.valueSync)||(t.valueSync=[]);const r=t.valueSync.length=Math.max(n.length,e.range.length);for(let o=0;o<r;o++){const r=Number(n[o]),i=Number(t.valueSync[o]),a=isNaN(r)?isNaN(i)?0:i:r,s=e.range[o]?e.range[o].length-1:0;t.valueSync.splice(o,1,a<0||a>s?0:a)}}break;case mode.TIME:case mode.DATE:t.valueSync=String(n);break;default:{const e=Number(n);t.valueSync=e<0?0:e;break}}}function m(){_(),t.valueChangeSource="click";const r=function(){let n=t.valueArray;switch(e.mode){case mode.SELECTOR:return n[0];case mode.MULTISELECTOR:return n.map((e=>e));case mode.TIME:return t.valueArray.map(((e,n)=>t.timeArray[n][e])).join(":");case mode.DATE:return t.valueArray.map(((e,n)=>t.dateArray[n][e])).join("-")}}();t.valueSync=isArray$3(r)?r.map((e=>e)):r,n("change",{},{value:r})}function _(){t.visible=!1,setTimeout((()=>{let e=o.value;e.remove(),r.value.prepend(e),e.style.display="none"}),260)}function E(t,n){const{getLocale:r}=useI18n();if(e.mode===mode.DATE){const o=r();if(!o.startsWith("zh"))switch(e.fields){case fields.YEAR:return t;case fields.MONTH:return[t[1],t[0]];default:switch(o){case"es":case"fr":return[t[2],t[1],t[0]];default:return n?[t[2],t[0],t[1]]:[t[1],t[2],t[0]]}}}return t}return watch((()=>t.visible),(n=>{n?(clearTimeout(__contentVisibleDelay),t.contentVisible=n,e.mode===mode.SELECTOR&&l.value===selectorType.SELECT&&(i.value.scrollTop=34*t.valueArray[0])):__contentVisibleDelay=setTimeout((()=>{t.contentVisible=n}),300)})),watch([()=>e.mode,()=>e.value,()=>e.range],g,{deep:!0}),watch((()=>t.valueSync),(function(){let n,r=t.valueSync;switch(e.mode){case mode.MULTISELECTOR:n=[...r];break;case mode.TIME:n=getDateValueArray(e,t,r,formatDateTime({mode:mode.TIME}));break;case mode.DATE:n=getDateValueArray(e,t,r,formatDateTime({mode:mode.DATE}));break;default:n=[r]}t.oldValueArray=[...n],t.valueArray=[...n]}),{deep:!0}),watch((()=>t.valueArray),(r=>{if(e.mode===mode.TIME||e.mode===mode.DATE){const n=e.mode===mode.TIME?p:h,r=t.valueArray,o=d.value,i=A.value;if(e.mode===mode.DATE){const e=t.dateArray,n=e[2].length,o=Number(e[2][r[2]])||1,i=new Date(`${e[0][r[0]]}/${e[1][r[1]]}/${o}`).getDate();i<o&&(r[2]-=i+n-o)}n(r)<n(o)?f(r,o):n(r)>n(i)&&f(r,i)}r.forEach(((r,o)=>{r!==t.oldValueArray[o]&&(t.oldValueArray[o]=r,e.mode===mode.MULTISELECTOR&&n("columnchange",{},{column:o,value:r}))}))})),{selectorTypeComputed:l,system:u,_show:function(n){if(e.disabled)return;t.valueChangeSource="";let r=o.value,i=n.currentTarget;r.remove(),(document.querySelector("uni-app")||document.body).appendChild(r),r.style.display="block";const a=i.getBoundingClientRect();t.popover={top:a.top,left:a.left,width:a.width,height:a.height},setTimeout((()=>{t.visible=!0}),20)},_cancel:function(e){if("firefox"===u.value&&e){const{top:n,left:r,width:o,height:i}=t.popover,{pageX:a,pageY:s}=e;if(a>r&&a<r+o&&s>n&&s<n+i)return}_(),n("cancel",{},{})},_change:m,_l10nColumn:E,_l10nItem:function(t,n){const{getLocale:r}=useI18n();if(e.mode===mode.DATE){const o=r();if(o.startsWith("zh")){return t+["","",""][n]}if(e.fields!==fields.YEAR&&n===(e.fields===fields.MONTH||"es"!==o&&"fr"!==o?0:1)){let e;switch(o){case"es":e=["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"];break;case"fr":e=["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"];break;default:e=["January","February","March","April","May","June","July","August","September","October","November","December"]}return e[Number(t)-1]}}return t},_input:function(e){const n=e.target;t.valueSync=n.value,nextTick((()=>{m()}))},_resetFormData:function(){switch(e.mode){case mode.SELECTOR:t.valueSync=0;break;case mode.MULTISELECTOR:t.valueSync=e.value.map((e=>0));break;case mode.DATE:case mode.TIME:t.valueSync=""}},_getFormData:function(){return{value:t.valueSync,key:e.name}},_createTime:function(){let e=[],n=[];for(let t=0;t<24;t++)e.push((t<10?"0":"")+t);for(let t=0;t<60;t++)n.push((t<10?"0":"")+t);t.timeArray.push(e,n)},_createDate:function(){let n=[];const r=function(){let t=(new Date).getFullYear(),n=t-150,r=t+150;if(e.start){const t=new Date(e.start).getFullYear();!isNaN(t)&&t<n&&(n=t)}if(e.end){const t=new Date(e.end).getFullYear();!isNaN(t)&&t>r&&(r=t)}return{start:n,end:r}}();for(let e=r.start,t=r.end;e<=t;e++)n.push(String(e));let o=[];for(let e=1;e<=12;e++)o.push((e<10?"0":"")+e);let i=[];for(let e=1;e<=31;e++)i.push((e<10?"0":"")+e);t.dateArray.push(n,o,i)},_setValueSync:g,_fixInputPosition:function(e){if("chrome"===u.value){const t=r.value.getBoundingClientRect(),n=32;a.value.style.left=e.clientX-t.left-1.5*n+"px",a.value.style.top=e.clientY-t.top-.5*n+"px"}},_pickerViewChange:function(e){t.valueArray=E(e.detail.value,!0)}}}function usePickerWatch(e,t,n){const{key:r,disable:o}=useKeyboard();watchEffect((()=>{o.value=!e.visible})),watch(r,(e=>{"esc"===e?t():"enter"===e&&n()}))}function usePickerForm(e,t){const n=inject(uniFormKey,!1);if(n){const r={reset:e,submit:()=>{const e=["",null],{key:n,value:r}=t();return""!==n&&(e[0]=n,e[1]=r),e}};n.addField(r),onBeforeUnmount((()=>{n.removeField(r)}))}}const UniViewJSBridge$1=extend$2(ViewJSBridge,{publishHandler(e,t,n){UniServiceJSBridge$1.subscribeHandler(e,t,n)}}),UniServiceJSBridge$1=extend$2(ServiceJSBridge,{publishHandler(e,t,n){UniViewJSBridge$1.subscribeHandler(e,t,n)}}),PageHead=defineSystemComponent({name:"PageHead",setup(){const e=ref(null),t=usePageMeta(),n=useTheme(t.navigationBar,(()=>{const e=parseTheme(t.navigationBar);n.backgroundColor=e.backgroundColor,n.titleColor=e.titleColor})),{clazz:r,style:o}=usePageHead(n);return()=>{const i=createBackButtonTsx(n,t.isQuit),a=n.type||"default",s="transparent"!==a&&"float"!==a&&createVNode("div",{class:{"uni-placeholder":!0,"uni-placeholder-titlePenetrate":n.titlePenetrate}},null,2);return createVNode("uni-page-head",{"uni-page-head-type":a},[createVNode("div",{ref:e,class:r.value,style:o.value},[createVNode("div",{class:"uni-page-head-hd"},[i]),createPageHeadBdTsx(n),createVNode("div",{class:"uni-page-head-ft"},[])],6),s],8,["uni-page-head-type"])}}});function createBackButtonTsx(e,t){if(!t)return createVNode("div",{class:"uni-page-head-btn",onClick:onPageHeadBackButton},[createSvgIconVNode(ICON_PATH_BACK,"transparent"===e.type?"#fff":e.titleColor,26)],8,["onClick"])}function createPageHeadBdTsx(e,t){return createPageHeadTitleTextTsx(e)}function createPageHeadTitleTextTsx({type:e,loading:t,titleSize:n,titleText:r,titleImage:o}){return createVNode("div",{class:"uni-page-head-bd"},[createVNode("div",{style:{fontSize:n,opacity:"transparent"===e?0:1},class:"uni-page-head__title"},[t?createVNode("i",{class:"uni-loading"},null):o?createVNode("img",{src:o,class:"uni-page-head__title_image"},null,8,["src"]):r],4)])}function onPageHeadBackButton(){1===getCurrentPages$1().length?reLaunch({url:"/"}):navigateBack({from:"backbutton",success(){}})}function usePageHead(e){return{clazz:computed((()=>{const{type:t,titlePenetrate:n,shadowColorType:r}=e,o={"uni-page-head":!0,"uni-page-head-transparent":"transparent"===t,"uni-page-head-titlePenetrate":"YES"===n,"uni-page-head-shadow":!!r};return r&&(o[`uni-page-head-shadow-${r}`]=!0),o})),style:computed((()=>({backgroundColor:e.backgroundColor,color:e.titleColor,transitionDuration:e.duration,transitionTimingFunction:e.timingFunc})))}}const PageBody=defineSystemComponent({name:"PageBody",setup(e,t){const n=!1,r=ref(null);return watch((()=>n.enablePullDownRefresh),(()=>{r.value=null}),{immediate:!0}),()=>createVNode(Fragment,null,[!1,createVNode("uni-page-wrapper",r.value,[createVNode("uni-page-body",null,[renderSlot(t.slots,"default")])],16)])}}),index=defineSystemComponent({name:"Page",setup(e,t){const n=providePageMeta(getStateId()),r=n.navigationBar,o={};return useDocumentTitle(n),()=>createVNode("uni-page",{"data-page":n.route,style:o},"custom"!==r.style?[createVNode(PageHead),createPageBodyVNode(t),null]:[createPageBodyVNode(t),null])}});function createPageBodyVNode(e){return openBlock(),createBlock(PageBody,{key:0},{default:withCtx((()=>[renderSlot(e.slots,"page")])),_:3})}const appId="__UNI__4067C91",appName="Emma",appVersion="1.0.1",appVersionCode=1001,debug=!1,nvue={"flex-direction":"column"},networkTimeout={request:6e4,connectSocket:6e4,uploadFile:6e4,downloadFile:6e4},router={mode:"hash",base:"/no_pwa/",assets:"assets",routerBase:"/no_pwa/"},async={loading:"AsyncLoading",error:"AsyncError",delay:200,timeout:6e4,suspensible:!0},qqMapKey=void 0,bMapKey=void 0,googleMapKey=void 0,aMapKey=void 0,aMapSecurityJsCode=void 0,aMapServiceHost=void 0,sdkConfigs={},locale="",fallbackLocale="en",darkmode=!1,themeConfig={};window.uni={},window.wx={},window.rpx2px=upx2px;const locales=Object.assign({"./locale/uni-app.en.json":__vite_glob_0_0}),extend$1=Object.assign;window.__uniConfig=extend$1({easycom:{autoscan:!0,custom:{"^(?!z-paging-refresh|z-paging-load-more)z-paging(.*)":"z-paging/components/z-paging$1/z-paging$1.vue"}},globalStyle:{backgroundColor:"#F7F7F7FF",navigationBar:{backgroundColor:"#F7F7F7FF",titleText:" Emma: 1v1 Video Chat",type:"default",titleColor:"#000000"},isNVue:!1},uniIdRouter:{},tabBar:{position:"bottom",color:"#ffffff",selectedColor:"#ffffff",borderStyle:"black",blurEffect:"none",fontSize:"10px",iconWidth:"43px",spacing:"3px",height:"64px",list:[{pagePath:"pages/tab_bar/home/home",iconPath:"/static/tab_bar/home.svg",selectedIconPath:"/static/tab_bar/home_s.svg"},{pagePath:"pages/tab_bar/game/game-room-list/game-room-list",iconPath:"/static/tab_bar/game.svg",selectedIconPath:"/static/tab_bar/game_s.svg"},{pagePath:"pages/tab_bar/match/match",iconPath:"/static/tab_bar/match.svg",selectedIconPath:"/static/tab_bar/match_s.svg"},{pagePath:"pages/tab_bar/conversation/conversation",iconPath:"/static/tab_bar/conversation.svg",selectedIconPath:"/static/tab_bar/conversation_s.svg"},{pagePath:"pages/tab_bar/mine/mine",iconPath:"/static/tab_bar/mine.svg",selectedIconPath:"/static/tab_bar/mine_s.svg"}],backgroundColor:"#3B3243FF",selectedIndex:0,shown:!0},compilerVersion:"4.36"},{appId:appId,appName:appName,appVersion:appVersion,appVersionCode:appVersionCode,async:async,debug:debug,networkTimeout:networkTimeout,sdkConfigs:sdkConfigs,qqMapKey:qqMapKey,bMapKey:bMapKey,googleMapKey:googleMapKey,aMapKey:aMapKey,aMapSecurityJsCode:aMapSecurityJsCode,aMapServiceHost:aMapServiceHost,nvue:nvue,locale:locale,fallbackLocale:fallbackLocale,locales:Object.keys(locales).reduce(((e,t)=>{const n=t.replace(/\.\/locale\/(uni-app.)?(.*).json/,"$2");return extend$1(e[n]||(e[n]={}),locales[t].default),e}),{}),router:router,darkmode:darkmode,themeConfig:themeConfig}),window.__uniLayout=window.__uniLayout||{};const AsyncComponentOptions={delay:async.delay,timeout:async.timeout,suspensible:async.suspensible};async.loading&&(AsyncComponentOptions.loadingComponent={name:"SystemAsyncLoading",render:()=>createVNode(resolveComponent(async.loading))}),async.error&&(AsyncComponentOptions.errorComponent={name:"SystemAsyncError",render:()=>createVNode(resolveComponent(async.error))});const PagesSplashSplashLoader=()=>__vitePreload((()=>import("./pages-splash-splash.CNUUU-Wh.js")),__vite__mapDeps([0,1,2])).then((e=>setupPage(e.default||e))),PagesSplashSplash=defineAsyncComponent(extend$1({loader:PagesSplashSplashLoader},AsyncComponentOptions)),PagesLoginLoginLoader=()=>__vitePreload((()=>import("./pages-login-login.bVEei1mi.js")),__vite__mapDeps([3,4])).then((e=>setupPage(e.default||e))),PagesLoginLogin=defineAsyncComponent(extend$1({loader:PagesLoginLoginLoader},AsyncComponentOptions)),PagesTabBarHomeHomeLoader=()=>__vitePreload((()=>import("./pages-tab_bar-home-home.CgLDC77U.js")),__vite__mapDeps([5,6,7,8,9,10])).then((e=>setupPage(e.default||e))),PagesTabBarHomeHome=defineAsyncComponent(extend$1({loader:PagesTabBarHomeHomeLoader},AsyncComponentOptions)),PagesTabBarGameGameRoomListGameRoomListLoader=()=>__vitePreload((()=>import("./pages-tab_bar-game-game-room-list-game-room-list.S47WIS0-.js")),__vite__mapDeps([11,6,7,8,12])).then((e=>setupPage(e.default||e))),PagesTabBarGameGameRoomListGameRoomList=defineAsyncComponent(extend$1({loader:PagesTabBarGameGameRoomListGameRoomListLoader},AsyncComponentOptions)),PagesTabBarMatchMatchLoader=()=>__vitePreload((()=>import("./pages-tab_bar-match-match.Bcnubdh4.js")),__vite__mapDeps([13,9,7,14])).then((e=>setupPage(e.default||e))),PagesTabBarMatchMatch=defineAsyncComponent(extend$1({loader:PagesTabBarMatchMatchLoader},AsyncComponentOptions)),PagesTabBarMatchMatchingLoader=()=>__vitePreload((()=>import("./pages-tab_bar-match-matching.CMj3r-lb.js")),__vite__mapDeps([15,7,16])).then((e=>setupPage(e.default||e))),PagesTabBarMatchMatching=defineAsyncComponent(extend$1({loader:PagesTabBarMatchMatchingLoader},AsyncComponentOptions)),PagesTabBarConversationConversationLoader=()=>__vitePreload((()=>import("./pages-tab_bar-conversation-conversation.B1IUOMlK.js")),__vite__mapDeps([17,6,7,8,1,18,19,20])).then((e=>setupPage(e.default||e))),PagesTabBarConversationConversation=defineAsyncComponent(extend$1({loader:PagesTabBarConversationConversationLoader},AsyncComponentOptions)),PagesTabBarMineMineLoader=()=>__vitePreload((()=>import("./pages-tab_bar-mine-mine.GYKE4FbX.js")),__vite__mapDeps([21,6,7,8,9,22])).then((e=>setupPage(e.default||e))),PagesTabBarMineMine=defineAsyncComponent(extend$1({loader:PagesTabBarMineMineLoader},AsyncComponentOptions)),PagesTestTestLoader=()=>__vitePreload((()=>import("./pages-test-test.BE8g8vAH.js")),[]).then((e=>setupPage(e.default||e))),PagesTestTest=defineAsyncComponent(extend$1({loader:PagesTestTestLoader},AsyncComponentOptions)),PagesTabBarConversationMsgMsgLoader=()=>__vitePreload((()=>import("./pages-tab_bar-conversation-msg-msg.K2hEDV9V.js")),__vite__mapDeps([23,6,7,8,24,18,19,25,26,27])).then((e=>setupPage(e.default||e))),PagesTabBarConversationMsgMsg=defineAsyncComponent(extend$1({loader:PagesTabBarConversationMsgMsgLoader},AsyncComponentOptions)),PagesThirdPageThirdPageLoader=()=>__vitePreload((()=>import("./pages-third-page-third-page.FBIVfcKQ.js")),__vite__mapDeps([28,7,29])).then((e=>setupPage(e.default||e))),PagesThirdPageThirdPage=defineAsyncComponent(extend$1({loader:PagesThirdPageThirdPageLoader},AsyncComponentOptions)),PagesVideoChatVideoChatLoader=()=>__vitePreload((()=>import("./pages-video-chat-video-chat.CAWcTJ2Z.js")),__vite__mapDeps([30,6,7,8,24,25,26,31])).then((e=>setupPage(e.default||e))),PagesVideoChatVideoChat=defineAsyncComponent(extend$1({loader:PagesVideoChatVideoChatLoader},AsyncComponentOptions)),PagesVideoChatVideoChatEndLoader=()=>__vitePreload((()=>import("./pages-video-chat-video-chat-end.avrwAwUc.js")),__vite__mapDeps([32,33])).then((e=>setupPage(e.default||e))),PagesVideoChatVideoChatEnd=defineAsyncComponent(extend$1({loader:PagesVideoChatVideoChatEndLoader},AsyncComponentOptions)),PagesAnchorDetailAnchorDetailLoader=()=>__vitePreload((()=>import("./pages-anchor-detail-anchor-detail.DXMiBhvI.js")),__vite__mapDeps([34,7,25,26,35])).then((e=>setupPage(e.default||e))),PagesAnchorDetailAnchorDetail=defineAsyncComponent(extend$1({loader:PagesAnchorDetailAnchorDetailLoader},AsyncComponentOptions)),PagesTabBarMineAboutUsAboutUsLoader=()=>__vitePreload((()=>import("./pages-tab_bar-mine-about-us-about-us.-c3vz0o1.js")),__vite__mapDeps([36,37])).then((e=>setupPage(e.default||e))),PagesTabBarMineAboutUsAboutUs=defineAsyncComponent(extend$1({loader:PagesTabBarMineAboutUsAboutUsLoader},AsyncComponentOptions)),PagesTabBarMineEditProfileEditProfileLoader=()=>__vitePreload((()=>import("./pages-tab_bar-mine-edit-profile-edit-profile.BIEbN1up.js")),__vite__mapDeps([38,39])).then((e=>setupPage(e.default||e))),PagesTabBarMineEditProfileEditProfile=defineAsyncComponent(extend$1({loader:PagesTabBarMineEditProfileEditProfileLoader},AsyncComponentOptions)),PagesTabBarMineBillDetailsBillDetailsLoader=()=>__vitePreload((()=>import("./pages-tab_bar-mine-bill-details-bill-details.B2NpVHn4.js")),__vite__mapDeps([40,6,7,8,41])).then((e=>setupPage(e.default||e))),PagesTabBarMineBillDetailsBillDetails=defineAsyncComponent(extend$1({loader:PagesTabBarMineBillDetailsBillDetailsLoader},AsyncComponentOptions)),PagesTabBarMineFaqFaqLoader=()=>__vitePreload((()=>import("./pages-tab_bar-mine-faq-faq.I-mKrh-1.js")),__vite__mapDeps([42,43])).then((e=>setupPage(e.default||e))),PagesTabBarMineFaqFaq=defineAsyncComponent(extend$1({loader:PagesTabBarMineFaqFaqLoader},AsyncComponentOptions)),PagesTabBarMineSettingSettingLoader=()=>__vitePreload((()=>import("./pages-tab_bar-mine-setting-setting.BdDw1TTt.js")),__vite__mapDeps([44,45])).then((e=>setupPage(e.default||e))),PagesTabBarMineSettingSetting=defineAsyncComponent(extend$1({loader:PagesTabBarMineSettingSettingLoader},AsyncComponentOptions)),PagesTabBarMineEditPasswordEditPasswordLoader=()=>__vitePreload((()=>import("./pages-tab_bar-mine-edit-password-edit-password.0yFzGLDj.js")),__vite__mapDeps([46,47])).then((e=>setupPage(e.default||e))),PagesTabBarMineEditPasswordEditPassword=defineAsyncComponent(extend$1({loader:PagesTabBarMineEditPasswordEditPasswordLoader},AsyncComponentOptions)),PagesPeaceAndLovePeaceAndLovePeaceAndLoveLoader=()=>__vitePreload((()=>import("./pages-peace-and-love-peace-and-love-peace-and-love.DXnuP4KM.js")),__vite__mapDeps([48,49])).then((e=>setupPage(e.default||e))),PagesPeaceAndLovePeaceAndLovePeaceAndLove=defineAsyncComponent(extend$1({loader:PagesPeaceAndLovePeaceAndLovePeaceAndLoveLoader},AsyncComponentOptions)),PagesAnchorDetailAlbumAlbumLoader=()=>__vitePreload((()=>import("./pages-anchor-detail-album-album.Dw2qaOOJ.js")),__vite__mapDeps([50,7,51])).then((e=>setupPage(e.default||e))),PagesAnchorDetailAlbumAlbum=defineAsyncComponent(extend$1({loader:PagesAnchorDetailAlbumAlbumLoader},AsyncComponentOptions)),PagesThirdPageThirdGamePageLoader=()=>__vitePreload((()=>import("./pages-third-page-third-game-page.CIsP-SCg.js")),__vite__mapDeps([52,7,53])).then((e=>setupPage(e.default||e))),PagesThirdPageThirdGamePage=defineAsyncComponent(extend$1({loader:PagesThirdPageThirdGamePageLoader},AsyncComponentOptions));function renderPage(e,t){return openBlock(),createBlock(index,null,{page:withCtx((()=>[createVNode(e,extend$1({},t,{ref:"page"}),null,512)])),_:1})}window.__uniRoutes=[{path:"/",alias:"/pages/splash/splash",component:{setup(){const e=getApp$1(),t=e&&e.$route&&e.$route.query||{};return()=>renderPage(PagesSplashSplash,t)}},loader:PagesSplashSplashLoader,meta:{isQuit:!0,isEntry:!0,navigationBar:{style:"custom",type:"default"},isNVue:!1}},{path:"/pages/login/login",component:{setup(){const e=getApp$1(),t=e&&e.$route&&e.$route.query||{};return()=>renderPage(PagesLoginLogin,t)}},loader:PagesLoginLoginLoader,meta:{navigationBar:{style:"custom",type:"default"},isNVue:!1}},{path:"/pages/tab_bar/home/home",component:{setup(){const e=getApp$1(),t=e&&e.$route&&e.$route.query||{};return()=>renderPage(PagesTabBarHomeHome,t)}},loader:PagesTabBarHomeHomeLoader,meta:{isQuit:!0,isTabBar:!0,tabBarIndex:0,navigationBar:{style:"custom",type:"default"},isNVue:!1}},{path:"/pages/tab_bar/game/game-room-list/game-room-list",component:{setup(){const e=getApp$1(),t=e&&e.$route&&e.$route.query||{};return()=>renderPage(PagesTabBarGameGameRoomListGameRoomList,t)}},loader:PagesTabBarGameGameRoomListGameRoomListLoader,meta:{isQuit:!0,isTabBar:!0,tabBarIndex:1,navigationBar:{style:"custom",type:"default"},isNVue:!1}},{path:"/pages/tab_bar/match/match",component:{setup(){const e=getApp$1(),t=e&&e.$route&&e.$route.query||{};return()=>renderPage(PagesTabBarMatchMatch,t)}},loader:PagesTabBarMatchMatchLoader,meta:{isQuit:!0,isTabBar:!0,tabBarIndex:2,navigationBar:{style:"custom",type:"default"},isNVue:!1}},{path:"/pages/tab_bar/match/matching",component:{setup(){const e=getApp$1(),t=e&&e.$route&&e.$route.query||{};return()=>renderPage(PagesTabBarMatchMatching,t)}},loader:PagesTabBarMatchMatchingLoader,meta:{navigationBar:{style:"custom",type:"default"},isNVue:!1}},{path:"/pages/tab_bar/conversation/conversation",component:{setup(){const e=getApp$1(),t=e&&e.$route&&e.$route.query||{};return()=>renderPage(PagesTabBarConversationConversation,t)}},loader:PagesTabBarConversationConversationLoader,meta:{isQuit:!0,isTabBar:!0,tabBarIndex:3,navigationBar:{style:"custom",type:"default"},isNVue:!1}},{path:"/pages/tab_bar/mine/mine",component:{setup(){const e=getApp$1(),t=e&&e.$route&&e.$route.query||{};return()=>renderPage(PagesTabBarMineMine,t)}},loader:PagesTabBarMineMineLoader,meta:{isQuit:!0,isTabBar:!0,tabBarIndex:4,navigationBar:{style:"custom",type:"default"},isNVue:!1}},{path:"/pages/test/test",component:{setup(){const e=getApp$1(),t=e&&e.$route&&e.$route.query||{};return()=>renderPage(PagesTestTest,t)}},loader:PagesTestTestLoader,meta:{navigationBar:{titleText:"",type:"default"},isNVue:!1}},{path:"/pages/tab_bar/conversation/msg/msg",component:{setup(){const e=getApp$1(),t=e&&e.$route&&e.$route.query||{};return()=>renderPage(PagesTabBarConversationMsgMsg,t)}},loader:PagesTabBarConversationMsgMsgLoader,meta:{navigationBar:{style:"custom",type:"default"},isNVue:!1}},{path:"/pages/third-page/third-page",component:{setup(){const e=getApp$1(),t=e&&e.$route&&e.$route.query||{};return()=>renderPage(PagesThirdPageThirdPage,t)}},loader:PagesThirdPageThirdPageLoader,meta:{navigationBar:{style:"custom",type:"default"},isNVue:!1}},{path:"/pages/video-chat/video-chat",component:{setup(){const e=getApp$1(),t=e&&e.$route&&e.$route.query||{};return()=>renderPage(PagesVideoChatVideoChat,t)}},loader:PagesVideoChatVideoChatLoader,meta:{navigationBar:{style:"custom",type:"default"},isNVue:!1}},{path:"/pages/video-chat/video-chat-end",component:{setup(){const e=getApp$1(),t=e&&e.$route&&e.$route.query||{};return()=>renderPage(PagesVideoChatVideoChatEnd,t)}},loader:PagesVideoChatVideoChatEndLoader,meta:{navigationBar:{style:"custom",type:"default"},isNVue:!1}},{path:"/pages/anchor-detail/anchor-detail",component:{setup(){const e=getApp$1(),t=e&&e.$route&&e.$route.query||{};return()=>renderPage(PagesAnchorDetailAnchorDetail,t)}},loader:PagesAnchorDetailAnchorDetailLoader,meta:{navigationBar:{style:"custom",type:"default"},isNVue:!1}},{path:"/pages/tab_bar/mine/about-us/about-us",component:{setup(){const e=getApp$1(),t=e&&e.$route&&e.$route.query||{};return()=>renderPage(PagesTabBarMineAboutUsAboutUs,t)}},loader:PagesTabBarMineAboutUsAboutUsLoader,meta:{navigationBar:{style:"custom",type:"default"},isNVue:!1}},{path:"/pages/tab_bar/mine/edit-profile/edit-profile",component:{setup(){const e=getApp$1(),t=e&&e.$route&&e.$route.query||{};return()=>renderPage(PagesTabBarMineEditProfileEditProfile,t)}},loader:PagesTabBarMineEditProfileEditProfileLoader,meta:{navigationBar:{style:"custom",type:"default"},isNVue:!1}},{path:"/pages/tab_bar/mine/bill-details/bill-details",component:{setup(){const e=getApp$1(),t=e&&e.$route&&e.$route.query||{};return()=>renderPage(PagesTabBarMineBillDetailsBillDetails,t)}},loader:PagesTabBarMineBillDetailsBillDetailsLoader,meta:{navigationBar:{style:"custom",type:"default"},isNVue:!1}},{path:"/pages/tab_bar/mine/faq/faq",component:{setup(){const e=getApp$1(),t=e&&e.$route&&e.$route.query||{};return()=>renderPage(PagesTabBarMineFaqFaq,t)}},loader:PagesTabBarMineFaqFaqLoader,meta:{navigationBar:{style:"custom",type:"default"},isNVue:!1}},{path:"/pages/tab_bar/mine/setting/setting",component:{setup(){const e=getApp$1(),t=e&&e.$route&&e.$route.query||{};return()=>renderPage(PagesTabBarMineSettingSetting,t)}},loader:PagesTabBarMineSettingSettingLoader,meta:{navigationBar:{style:"custom",type:"default"},isNVue:!1}},{path:"/pages/tab_bar/mine/edit-password/edit-password",component:{setup(){const e=getApp$1(),t=e&&e.$route&&e.$route.query||{};return()=>renderPage(PagesTabBarMineEditPasswordEditPassword,t)}},loader:PagesTabBarMineEditPasswordEditPasswordLoader,meta:{navigationBar:{style:"custom",type:"default"},isNVue:!1}},{path:"/pages/peace-and-love/peace-and-love/peace-and-love",component:{setup(){const e=getApp$1(),t=e&&e.$route&&e.$route.query||{};return()=>renderPage(PagesPeaceAndLovePeaceAndLovePeaceAndLove,t)}},loader:PagesPeaceAndLovePeaceAndLovePeaceAndLoveLoader,meta:{navigationBar:{style:"custom",type:"default"},isNVue:!1}},{path:"/pages/anchor-detail/album/album",component:{setup(){const e=getApp$1(),t=e&&e.$route&&e.$route.query||{};return()=>renderPage(PagesAnchorDetailAlbumAlbum,t)}},loader:PagesAnchorDetailAlbumAlbumLoader,meta:{navigationBar:{style:"custom",type:"default"},isNVue:!1}},{path:"/pages/third-page/third-game-page",component:{setup(){const e=getApp$1(),t=e&&e.$route&&e.$route.query||{};return()=>renderPage(PagesThirdPageThirdGamePage,t)}},loader:PagesThirdPageThirdGamePageLoader,meta:{navigationBar:{style:"custom",type:"default"},isNVue:!1}}].map((e=>(e.meta.route=(e.alias||e.path).slice(1),e)));const lanKey={language:"language",confirm:"confirm",cancel:"cancel",deny:"deny",save:"save",operateFail:"operateFail",operateSuccess:"operateSuccess",randomMatch:"randomMatch",free:"free",unit:"unit",game:"game",pwa_tip:"pwa_tip",add:"add",pwa_iphone_tip:"pwa_iphone_tip",pwa_iphone_tip_2:"pwa_iphone_tip_2",pwa_iphone_tip_3:"pwa_iphone_tip_3",pwa_iphone_tip_4:"pwa_iphone_tip_4",billDetails:"billDetails",consume:"consume",income:"income",all:"all",month1:"month1",month2:"month2",month3:"month3",month4:"month4",month5:"month5",month6:"month6",month7:"month7",month8:"month8",month9:"month9",month10:"month10",month11:"month11",month12:"month12",aboutUs:"aboutUs",intro1:"intro1",intro2:"intro2",goApp:"goApp",googlePlay:"googlePlay",officialDownload:"officialDownload",downloadTaskTip:"downloadTaskTip",customerService:"customerService",onlineService:"onlineService",myPackage:"myPackage",useRule:"useRule",appuse:"appuse",send:"send",videoCard:"videoCard",videoCardDes:"videoCardDes",chatCard:"chatCard",chatCardDes:"chatCardDes",matchCard:"matchCard",matchCardDes:"matchCardDes",diamond:"diamond",recharge:"recharge",diamondShop:"diamondShop",rechargeSuccess:"rechargeSuccess",advicePwaAndApp:"advicePwaAndApp",accountSetting:"accountSetting",systemSetting:"systemSetting",deleteAccount:"deleteAccount",deleteAccountTip:"deleteAccountTip",logOut:"logOut",notification:"notification",firstRegisterTip:"firstRegisterTip",downloadAppRewardTip:"downloadAppRewardTip",downloadAppRewardTip2:"downloadAppRewardTip2",downloadAppToChatTip:"downloadAppToChatTip",downloadAppToChatTip2:"downloadAppToChatTip2",dailyRewards:"dailyRewards",claimed:"Claimed",hi:"hi",notLoginYet:"notLoginYet",quickLogin:"quickLogin",accountLogin:"accountLogin",googleLogin:"googleLogin",appleLogin:"appleLogin",loginAgree:"loginAgree",service:"service",and:"and",privacy:"privacy",loginAgreeTail:"loginAgreeTail",avatar:"avatar",nickName:"nickName",userId:"userId",birthDay:"birthDay",enterNickName:"enterNickName",notDisturb:"notDisturb",setPassword:"setPassword",changePassword:"changePassword",account:"account",password:"password",enterAccount:"enterAccount",enterPassword:"enterPassword",enterOriginalPassword:"enterOriginalPassword",enterNewPassword:"enterNewPassword",reEnterNewPassword:"reEnterNewPassword",reEnterPasswordDifferent:"reEnterPasswordDifferent",setSamePassword:"setSamePassword",pleaseEnter:"pleaseEnter",callHistory:"callHistory",message:"message",officialMessage:"officialMessage",notConnected:"notConnected",clearRecords:"clearRecords",allRead:"allRead",noChatTip:"noChatTip",noChatTip2:"noChatTip2",unlockChatTip:"unlockChatTip",unlockChatByCard:"unlockChatByCard",unlockChatByDiamond:"unlockChatByDiamond",toOpen:"toOpen",continueVideoCall:"continueVideoCall",continueMatch:"continueMatch",matchAgain:"matchAgain",startMatch:"startMatch",connecting:"connecting",videoCall:"videoCall",videoCalling:"videoCalling",videoCallWarning:"videoCallWarning",videoCallMutedTip:"videoCallMutedTip",videoCallMutedUnlock:"videoCallMutedUnlock",videoCardUsedTip:"videoCardUsedTip",videoCallCostTip:"videoCallCostTip",videoCallHangUpBusy:"videoCallHangUpBusy",videoCallConnectFail:"videoCallConnectFail",mediaDiveceDisable:"mediaDiveceDisable",mediaDiveceUnknown:"mediaDiveceUnknown",notSupportGuide:"notSupportGuide",mediaDiveceUnavailable:"mediaDiveceUnavailable",online:"online",offline:"offline",busy:"busy",off:"off",album:"album",matchFail:"matchFail",matching:"matching",videoConsumption:"videoConsumption",giftConsumption:"giftConsumption",allGift:"allGift",sendGfit:"sendGfit",callDuration:"callDuration",recommendedHosts:"recommendedHosts",saveAccount:"saveAccount",saveAccountTip:"saveAccountTip",confirmLogout:"confirmLogout",confirmNoCommit:"confirmNoCommit",confirmHangUp:"confirmHangUp",currentMatchTip:"currentMatchTip",refreshPullDown:"refreshPullDown",refreshing:"refreshing",refreshLoadMore:"refreshLoadMore",refreshLoading:"refreshLoading",refreshLoadFail:"refreshLoadFail",refreshNoMore:"refreshNoMore",forbidRegion:"forbidRegion",sensiveContent:"sensiveContent",ageForbid:"ageForbid",netError:"netError",serverError:"serverError"};!function(){try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode('@charset "UTF-8";.v-dialog,.v-dialog-lite{position:fixed;z-index:1050;outline:0}.v-dialog-lite{left:0;right:0}.v-dialog{position:fixed}.v-dialog.v-dialog--content-center{display:flex;justify-content:center;align-items:center}.v-dialog.v-dialog--screen-center{left:50%;top:50%;transform:translate(-50%,-50%)}.v-dialog.v-dialog--horizontal-center{left:50%;transform:translate(-50%)}.v-dialog.v-dialog--embedded{position:absolute}.v-dialog .v-dialog-content{outline:0;position:relative;background-color:#fff;box-shadow:0 3rem 5rem #00000080;border-radius:1rem;border:0;overflow:hidden;display:flex;flex-direction:column;transition:all .2s ease-out}.v-dialog .v-dialog-header{display:flex;align-items:center;flex-shrink:0;height:42px}.v-dialog .v-dialog-header h3{margin:0;font-size:18px;padding:0 15px;font-weight:500;flex-grow:1;color:#666;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.v-dialog .v-dialog-body{position:relative;width:100%;padding:0;overflow:auto;box-sizing:border-box;flex-grow:1}.v-dialog-overlay{position:fixed;top:0;right:0;bottom:0;left:0;z-index:1040;background-color:#00000080}.v-dialog-overlay.v-dialog-overlay--blur{-webkit-backdrop-filter:blur(3px);backdrop-filter:blur(3px)}.v-dialog-overlay.v-dialog-overlay--embedded{position:absolute}.v-dialog-icon{display:inline-flex;width:1em;height:1em}@keyframes soft-candy-show{0%{transform:scale(.7)}45%{transform:scale(1.05)}80%{transform:scale(.95)}to{transform:scale(1)}}.v-dialog--candy-enter-active{animation:soft-candy-show .3s ease-out}.v-dialog--candy-leave-active{transform:scale(.5);transition:transform .2s linear,opacity .2s linear;opacity:0}.v-dialog--smooth-enter-active,.v-dialog--smooth-leave-active{transition:transform .25s ease-in-out,opacity .15s ease-in-out!important}.v-dialog--smooth-enter-from,.v-dialog--smooth-leave-to{transform:scale(.5);opacity:0}.v-dialog--fade-enter-active,.v-dialog--fade-leave-active{will-change:opacity;transition:opacity .3s cubic-bezier(.4,0,.2,1)}.v-dialog--fade-enter-from,.v-dialog--fade-leave-to{opacity:0}.v-dialog--fade-lite-enter-active,.v-dialog--fade-lite-leave-active{transition:opacity .3s ease-in-out}.v-dialog--fade-lite-enter-from,.v-dialog--fade-lite-leave-to{opacity:0}@keyframes animated-buzz-out{10%{transform:translate(3px) rotate(2deg)}20%{transform:translate(-3px) rotate(-2deg)}30%{transform:translate(3px) rotate(2deg)}40%{transform:translate(-3px) rotate(-2deg)}50%{transform:translate(2px) rotate(1deg)}60%{transform:translate(-2px) rotate(-1deg)}70%{transform:translate(2px) rotate(1deg)}80%{transform:translate(-2px) rotate(-1deg)}90%{transform:translate(1px) rotate(0)}to{transform:translate(-1px) rotate(0)}}.v-dialog--buzz-out{animation-name:animated-buzz-out;animation-duration:.75s;animation-timing-function:linear;animation-iteration-count:1}.v-dialog-modal{left:0;right:0;top:0;bottom:0}.v-dialog-modal.v-dialog-modal--maximize{padding-right:0!important}.v-dialog-modal.v-dialog-modal--maximize .v-dialog-content{width:100vw!important;height:100vh!important;border-radius:0}.v-dialog-modal.v-dialog-modal--maximize .v-dialog-header{background-color:#eee}.v-dialog-modal .v-dialog-content{border-radius:.5rem;transition:width .2s ease-in-out,height .2s ease-in-out;min-width:400px;min-height:200px}.v-dialog-modal .v-dialog-content .v-dialog-header button{width:60px;height:100%;transition:all .3s ease-out;text-shadow:none;outline:none!important;margin:0;opacity:.3;font-size:18px!important;border:0;background-color:transparent;display:inline-flex;justify-content:center;align-items:center;flex-shrink:0}.v-dialog-modal .v-dialog-content .v-dialog-header button:hover{opacity:1}.v-dialog-modal .v-dialog-content .v-dialog-header button.v-dialog-btn__close{font-weight:400}.v-dialog-modal .v-dialog-content .v-dialog-header button.v-dialog-btn__close:hover{background-color:#e81123;color:#fff}.v-dialog-modal .v-dialog-content .v-dialog-header button.v-dialog-btn__maximize:hover{background-color:#e0e0e0}.v-dialog-modal .v-dialog-content .v-dialog-body{padding:0!important}.v-dialog-mask{left:0;right:0;top:0;bottom:0}.v-dialog-mask .v-dialog-content.mask--pill{border-radius:50rem}.v-dialog-mask .v-dialog-content.mask--no-icon .v-dialog-mask__content{margin-left:2rem!important}.v-dialog-mask .v-dialog-content.mask--no-panel{box-shadow:none!important;background-color:transparent}.v-dialog-mask .v-dialog-body{overflow:hidden!important;display:flex;align-items:center;min-width:300px;max-width:400px;color:#333}.v-dialog-mask .v-dialog-body .v-dialog-mask__content,.v-dialog-mask .v-dialog-body .v-dialog-mask__icon{display:flex;align-items:center}.v-dialog-mask .v-dialog-body .v-dialog-mask__content{margin:0 1.5rem 0 1rem;font-size:1rem;line-height:1.3;overflow-y:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;text-overflow:ellipsis}.v-dialog-mask .v-dialog-body .v-dialog-mask__icon{padding-left:17px;flex-shrink:0}.v-dialog-mask .v-dialog-body .v-dialog-icon-loading{font-size:2rem}.v-dialog-mask-parent--relative{position:relative!important}.v-dialog-drawer.v-dialog-drawer--top{top:0;left:0}.v-dialog-drawer.v-dialog-drawer--bottom{bottom:0;left:0}.v-dialog-drawer.v-dialog-drawer--left{top:0;left:0}.v-dialog-drawer.v-dialog-drawer--right{top:0;right:0}.v-dialog-drawer .v-dialog-content{border-radius:0;min-width:400px;min-height:200px}.v-dialog-drawer .v-dialog-content .v-dialog-header button{width:60px;height:100%;transition:all .3s ease-out;text-shadow:none;outline:none!important;margin:0;opacity:.3;font-size:18px!important;border:0;background-color:transparent;display:inline-flex;justify-content:center;align-items:center}.v-dialog-drawer .v-dialog-content .v-dialog-header button:hover{opacity:1}.v-dialog-drawer .v-dialog-content .v-dialog-header button.v-dialog-btn__close{font-weight:400}.v-dialog-drawer .v-dialog-content .v-dialog-header button.v-dialog-btn__close:hover{background-color:#e81123;color:#fff}.v-dialog-drawer .v-dialog-content .v-dialog-body{padding:0!important}.v-dialog-drawer-slide-in-top-enter-active,.v-dialog-drawer-slide-in-top-leave-active{transition:transform .25s ease-in-out,opacity .25s linear}.v-dialog-drawer-slide-in-top-enter-from,.v-dialog-drawer-slide-in-top-leave-to{transform:translateY(-100%);opacity:0}.v-dialog-drawer-slide-in-bottom-enter-active,.v-dialog-drawer-slide-in-bottom-leave-active{transition:transform .25s ease-in-out,opacity .25s linear}.v-dialog-drawer-slide-in-bottom-enter-from,.v-dialog-drawer-slide-in-bottom-leave-to{transform:translateY(100%);opacity:0}.v-dialog-drawer-slide-in-left-enter-active,.v-dialog-drawer-slide-in-left-leave-active{transition:transform .25s ease-in-out,opacity .25s linear}.v-dialog-drawer-slide-in-left-enter-from,.v-dialog-drawer-slide-in-left-leave-to{transform:translate(-100%);opacity:0}.v-dialog-drawer-slide-in-right-enter-active,.v-dialog-drawer-slide-in-right-leave-active{transition:transform .25s ease-in-out,opacity .25s linear}.v-dialog-drawer-slide-in-right-enter-from,.v-dialog-drawer-slide-in-right-leave-to{transform:translate(100%);opacity:0}.v-dialog-alert{left:0;right:0;top:0;bottom:0}.v-dialog-alert.no-icon .v-dialog-alert__content{padding-left:15px}.v-dialog-alert.no-header .v-dialog-alert__content{padding-top:2rem}.v-dialog-alert .v-dialog-content{overflow:hidden;display:flex;flex-direction:column;background-color:#fff}.v-dialog-alert .v-dialog-footer{flex-shrink:0;overflow:hidden}.v-dialog-alert .v-dialog-footer .v-dialog-alert__buttons{display:flex;justify-content:flex-end;padding:0 1rem 1rem 0}.v-dialog-alert .v-dialog-footer .v-dialog-alert__buttons button{outline:none!important;padding:8px 15px;min-width:90px;border-radius:.7rem;font-size:14px;transition:all .2s ease-in-out;-webkit-user-select:none;-moz-user-select:none;user-select:none}.v-dialog-alert .v-dialog-footer .v-dialog-alert__buttons button:active{box-shadow:0 10px 20px #0003,0 6px 6px #0000003b}.v-dialog-alert .v-dialog-footer .v-dialog-alert__buttons .v-dialog-btn__ok{border:1px solid #516270;background-color:#516270;color:#fff}.v-dialog-alert .v-dialog-footer .v-dialog-alert__buttons .v-dialog-btn__cancel{border:1px solid #F0F0F0;background-color:#f0f0f0;margin-left:1rem}.v-dialog-alert .v-dialog-alert__content{overflow-y:auto;min-height:100px;flex-grow:1;display:flex;padding:1rem}.v-dialog-alert .v-dialog-alert__content .v-dialog-alert__icon{display:flex;padding:0 2rem 0 1rem;font-size:3rem;color:#333;filter:drop-shadow(4px 5px 5px rgba(0,0,0,.6))}.v-dialog-alert .v-dialog-alert__content .v-dialog-alert__message{flex-grow:1;font-size:14px;line-height:1.5;padding-top:5px}.v-dialog-alert .alert-warning .v-dialog-alert__icon{color:#ff9800;filter:drop-shadow(4px 5px 5px rgba(255,152,0,.8))}.v-dialog-alert .alert-error .v-dialog-alert__icon{color:#f44336;filter:drop-shadow(4px 5px 5px rgba(244,67,54,.8))}.v-dialog-alert .alert-success .v-dialog-alert__icon{color:#198754;filter:drop-shadow(4px 5px 5px rgba(25,135,84,.8))}.v-dialog-alert .alert-confirm .v-dialog-alert__icon{color:#3f51b5;filter:drop-shadow(4px 5px 5px rgba(63,81,181,.9))}.v-dialog__shadow--error{box-shadow:0 1rem 5rem #ff000080!important}.v-dialog__shadow--warning{box-shadow:0 1rem 5rem #ffa50080!important}.v-dialog__shadow--success{box-shadow:0 1rem 5rem #00ff0080!important}.v-dialog-message{background-color:transparent;overflow:unset;transition:all .3s;display:flex;justify-content:center;left:50%;right:unset;transform:translate(-50%)}.v-dialog-message .v-dialog-body{border-radius:1rem;box-shadow:0 2.5rem 8rem #000000e6;overflow:hidden;display:flex;align-items:center;background-color:#0006;-webkit-backdrop-filter:saturate(180%) blur(12px);backdrop-filter:saturate(180%) blur(12px);min-height:52px;max-width:500px}.v-dialog-message .v-dialog-body.v-dialog-message--pill{border-radius:2rem}.v-dialog-message .v-dialog-body.v-dialog-message--no-icon .v-dialog-message__body{padding:.5rem 2rem}.v-dialog-message .v-dialog-body.message-warning .v-dialog-message__prepend{color:#ff9800;filter:drop-shadow(4px 5px 5px rgba(255,152,0,.95))}.v-dialog-message .v-dialog-body.message-error .v-dialog-message__prepend{color:#f44336;filter:drop-shadow(4px 5px 5px rgba(244,67,54,.95))}.v-dialog-message .v-dialog-body.message-success .v-dialog-message__prepend{color:#198754;filter:drop-shadow(4px 5px 5px rgba(25,135,84,.95))}.v-dialog-message__prepend,.v-dialog-message__append{width:40px;flex-shrink:0;display:flex;align-items:center;font-size:1.3rem}.v-dialog-message__prepend{justify-content:flex-end;filter:drop-shadow(4px 5px 5px rgba(0,0,0,.95))}.v-dialog-message__append{justify-content:flex-start}.v-dialog-message__body{display:flex;align-items:center;font-size:14px;line-height:1.3;flex-grow:1;padding:.5rem 1rem;overflow:hidden;height:100%}.v-dialog-message__close{cursor:pointer}.v-dialog-toast{background-color:transparent;box-sizing:border-box;transition:all .3s}.v-dialog-toast .v-dialog-body{position:relative;display:flex;padding:1rem;box-shadow:0 5px 40px #0006;border-radius:.7rem;border-width:2px;border-style:solid;border-color:#ccc;color:#333;background-color:#fff;width:300px}.v-dialog-toast .v-dialog-body.toast-warning{border-color:#333;background-color:#f5cf87}.v-dialog-toast .v-dialog-body.toast-error{background-color:#ff5252;border-color:#bf2a2a;color:#fff}.v-dialog-toast .v-dialog-body.toast-error .v-dialog-toast__append{color:#ccc}.v-dialog-toast .v-dialog-body.toast-error .v-dialog-toast__append:hover{color:#fff}.v-dialog-toast .v-dialog-body.toast-success{background-color:#2cbe4e;border-color:#0a8427;color:#1b5e20}.v-dialog-toast .v-dialog-body.toast-success .v-dialog-toast__append{color:#666}.v-dialog-toast .v-dialog-body.toast-success .v-dialog-toast__append:hover{color:#000}.v-dialog-toast--left{left:16px;right:unset}.v-dialog-toast--right{left:unset;right:16px}.v-dialog-toast__prepend,.v-dialog-toast__append{display:flex;justify-content:center;flex-shrink:0}.v-dialog-toast__prepend{font-size:1.3rem}.v-dialog-toast__body{flex-grow:1;padding:0 10px;font-size:14px;overflow:hidden;min-height:60px}.v-dialog-toast__body h3{margin:0 0 3px;font-size:16px;font-weight:600}.v-dialog-toast__body div{font-size:14px;line-height:1.4;margin:0}.v-dialog-toast__append{color:#999;font-size:1rem;outline:none;transition:all .3s}.v-dialog-toast__append:hover{color:#000}.v-dialog-toast__close{cursor:pointer}')),document.head.appendChild(e)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}}();const h=Symbol("props"),nt="v-dialogs-",ot=5100,at=50,lt="100vw",st="100vh",it=450,ct=210,Be=32,rt=15,ut=16,Ie=700,Oe=400,R="info",M="warning",B="error",I="success",Y="confirm",dt=400,ft=300,G="top",fe="bottom",gt="left",J="right",Le="top-left",ne="top-right",$e="bottom-left",mt="bottom-right",Pe="close",re="render-dialog",ue="v-dialog-message-adjust-position",Te=[G,fe,gt,J],ht=[M,B,I],ge=[M,B,I],[vo,_o,me,yo,bo,he]=["modal","alert","toast","drawer","mask","message"],Q=ref(0),K=ref([]),pt$1=new Event(ue);function vt(){return Q.value++,nt+Q.value}function z$1(e,t={},n){var r;const{index:o,key:i}=We(n);let a=createVNode(e,mergeProps(t,{dialogKey:i,dialogIndex:o,onClose:(e,t)=>{e&&e(t),l()}}));const s=(null==(r=getCurrentInstance())?void 0:r.appContext)??null;a.appContext=s;let c=document.createElement("div");render(a,c);const l=()=>{render(null,c),c=null,a=null,_t(i)};return()=>{a.component.exposed.close()}}function We(e){const t=vt();return K.value.push({key:t,index:Q.value,singletonKey:"",...e}),{key:t,index:Q.value}}function _t(e){K.value.length&&(K.value=K.value.filter((t=>t.key!==e)))}const[yt,ee,bt,Ct,Dt]=["cn","en","pt","jp","tr"],se={[yt]:{titleInfo:"",titleWarning:"",titleError:"",titleSuccess:"",titleConfirm:"",btnOk:"",btnCancel:"",maskText:""},[ee]:{titleInfo:"Information",titleWarning:"Warning",titleError:"Error",titleSuccess:"Success",titleConfirm:"Confirmation",btnOk:"OK",btnCancel:"Cancel",maskText:"Loading"},[bt]:{titleInfo:"Aviso",titleWarning:"Alerta",titleError:"Erro",titleSuccess:"Sucesso",titleConfirm:"Confirmao",btnOk:"OK",btnCancel:"Cancelar",maskText:"Carregando"},[Ct]:{titleInfo:"",titleWarning:"",titleError:"",titleSuccess:"",titleConfirm:"",btnOk:"",btnCancel:"",maskText:""},[Dt]:{titleInfo:"Bilgi",titleWarning:"Uyar",titleError:"Hata",titleSuccess:"Baarl",titleConfirm:"Onay",btnOk:"Evet",btnCancel:"ptal",maskText:"Ykleniyor"}},kt={dialogKey:{type:String,default:""},dialogIndex:{type:Number,required:!0},singletonKey:{type:String,default:""},customClass:{type:String,default:""},backdrop:{type:Boolean,default:!0},backdropClose:{type:Boolean,default:!1},header:{type:Boolean,default:!0},title:{type:String,default:""},message:{type:[String,Object],default:""},width:{type:Number,default:0},height:{type:Number,default:0},shake:{type:Boolean,default:!1},language:{type:String,default:ee},callback:{type:Function,default:void 0}},wt=[Pe,re],Tt={backdrop:!0},Et={backdrop:!0,backdropClose:!1},At={backdrop:!0,backdropClose:!1,shake:!1},St={shake:!1};function F$1(e){return{...kt,...e}}function V$1(e=[]){return[...wt,...e]}function Ne(e,t){switch(e){case M:return t.titleWarning;case B:return t.titleError;case I:return t.titleSuccess;case Y:return t.titleConfirm;default:return t.titleInfo}}function U$1(e,t,n){if("object"==typeof t&&"object"==typeof n||"function"==typeof t&&"function"==typeof n)return void console.warn("Invalid parameters for v-dialogs");const r=Array.from(arguments),o=r.find((e=>"object"==typeof e&&!isVNode(e)&&!Ee(e)))||{};return o.message=r.find((e=>"string"==typeof e||isVNode(e)||Ee(e)))||"",o.callback=r.find((e=>"function"==typeof e)),o}function Ee(e){return"object"==typeof e&&!!(Object.hasOwn(e,"render")||Object.hasOwn(e,"template")||Object.hasOwn(e,"setup"))}function xt(e){return"object"==typeof e&&!!(Object.hasOwn(e,"tagName")||Object.hasOwn(e,"tagName")&&e.outerHTML)}function Mt(e){return((window.innerHeight||document.documentElement.clientHeight)-e)/2}function Bt(e){const t=ot+at*e;return{dialogZIndex:t,backdropZIndex:t-10}}function pe(e=ee){const t=String(e).toLowerCase();return t in se?se[t]:se[ee]}function It(){return document.body.scrollHeight>window.innerHeight}function Ot(){if(!It()||"hidden"===document.body.style.overflowY)return;const e=document.documentElement.clientWidth,t=window.innerWidth-e;document.body.style.paddingRight=`${t}px`,document.body.style.overflowY="hidden"}function Lt(){document.body.style.removeProperty("overflow-y"),document.body.style.removeProperty("padding-right")}function q(e,t="px"){return"number"==typeof e?`${e}${t}`:e}function ve(e,t,n,r){const o={};return e.forEach((e=>{const[i,...a]=e,s=t+i.toUpperCase()+a.join("");o[s]=function(){const t={...U$1(...arguments),messageType:e},o=r&&r(t);return z$1(n,t,o)}})),o}function $t(e){const{component:t,params:n,closeDialogWithCallback:r}=inject(h);return{getComponentContent:function(){if(e.default)return e.default();if(!t)return;return h$1("function"==typeof t?t():t,mergeProps(n,{onClose:e=>r(e)}))}}}function Pt(e,t){e.duration&&setTimeout(t,e.duration)}function Wt(e,t=200){let n;function r(){clearTimeout(n),n=setTimeout(e,t)}onMounted((()=>{addEventListener("resize",r,!1)})),onUnmounted((()=>{removeEventListener("resize",r,!1)}))}function Nt(e){return{bindPositionAdjust:()=>addEventListener(ue,e,!1),unbindPositionAdjust:()=>removeEventListener(ue,e,!1),triggerPositionAdjust:()=>dispatchEvent(pt$1)}}function ze(e,t,n){const r={closing:()=>{e("update:visible",!1)}};return{closeDialogWithCallback:function(e){t(e,r)},closeDialogWithoutCallback:function(){n(r)}}}function je(e,t){const{bindPositionAdjust:n,unbindPositionAdjust:r,triggerPositionAdjust:o}=Nt(e);return n(),{closeGroupDialogWithCallback:function(e){r(),t(e,{afterClose:o})}}}function He(e,{attrs:t,slots:n}){const r=ref(!1),{index:o,key:i}=We(),a={dialogKey:i,dialogIndex:o,onRenderDialog:e=>{r.value=e}};return()=>{if(t.visible||r.value)return h$1(e,mergeProps(t,a),(()=>n.default()))}}function Re(e,t){const n=t.offset||Be;return{getVerticalPosition:function(){const r=K.value.filter((n=>n.type===e&&n.placement===t.placement&&n.index<t.dialogIndex));if(!r.length)return n;let o=0;return r.forEach((e=>{const t=document.getElementById(e.key);o+=t.offsetHeight+rt})),n+o}}}function Z$1(e,t){const n=ref(!1),r=ref(!1),o=ref(0),i=ref(0),a=ref(),s=ref(),c=ref(!1),l=ref(!0),u=ref(!0),d=ref(),{dialogZIndex:A,backdropZIndex:p}=Bt(e.dialogIndex),h=computed((()=>{const e={};return typeof o.value<"u"&&(e.width=q(o.value)),typeof i.value<"u"&&(e.height=q(i.value)),typeof a.value<"u"&&(e.top=q(a.value)),typeof s.value<"u"&&(e.bottom=q(s.value)),e}));function f(e,r,o){var i;c.value&&(n.value=!1,null==(i=null==o?void 0:o.closing)||i.call(o),d.value=()=>{var n;t(Pe,e,r),null==(n=null==o?void 0:o.afterClose)||n.call(o),t(re,!1),l.value&&Lt()})}return{show:n,shaking:r,transitionEnterComplete:c,shouldControlOverflow:l,shouldHandleResize:u,dialogStyles:h,dialogZIndex:A,backdropZIndex:p,openDialog:function(){n.value=!0,t(re,!0),l.value&&Ot()},destroy:d,closeDialog:f,closeWithCallback:function(t,n){f(e.callback,t,n)},closeWithoutCallback:function(e){f(void 0,void 0,e)},setPosition:function(e,t){a.value=function(e){return typeof e<"u"?e:Mt(i.value)}(e),typeof t<"u"&&(s.value=t)},setDialogSize:function(e,t){o.value=e,i.value=t},setupAutomaticClose:function(t){onMounted((()=>{Pt(e,t)}))},setupPositionAdjustBehavior:function(e){u.value&&Wt(e),onBeforeMount((()=>{e()}))},onTransitionAfterEnter:function(){c.value=!0},onTransitionAfterLeave:function(){d.value&&d.value()}}}const oe=defineComponent({name:"DialogContainer",props:{containerClass:{type:[String,Array,Object],default:""},backdropClass:{type:[String,Array,Object],default:""},transitionName:{type:String,default:""},appendTo:{type:[String,Object],default:"body"}},setup(e,{slots:t}){const{show:n,shaking:r,backdrop:o,backdropClose:i,shake:a,dialogZIndex:s,backdropZIndex:c,onTransitionAfterEnter:l,onTransitionAfterLeave:u,backdropCloseDialog:d}=inject(h);const A=e=>{e.target===e.currentTarget&&function(){if(o){if(i)return d&&d();a&&(r.value||(r.value=!0,setTimeout((()=>{r.value=!1}),750)))}}()};function p(){if(!o)return;const t=["v-dialog-overlay",e.backdropClass,{"v-dialog-overlay--embedded":"body"!==e.appendTo}];return createVNode(Teleport,{to:e.appendTo},{default:()=>[createVNode(Transition,{name:"v-dialog--fade",appear:!0},{default:()=>n.value&&createVNode("div",{class:t,style:{"z-index":c},onClick:A},null)})]})}function f(){const r=[e.containerClass,{"v-dialog--embedded":"body"!==e.appendTo}],o={"z-index":s};return createVNode(Teleport,{to:e.appendTo},{default:()=>[createVNode("div",{class:["v-dialog",r],style:o,onClick:A},[createVNode(Transition,{name:e.transitionName,onAfterEnter:l,onAfterLeave:u,appear:!0},{default:()=>n.value&&t.default&&t.default()})])]})}return()=>[p(),f()]}}),ae={name:"DialogContentBox",props:{className:{type:[String,Array,Object],default:""}},setup(e,{slots:t}){const{shaking:n,customClass:r,dialogStyles:o}=inject(h),i=computed((()=>["v-dialog-content",e.className,r,{"v-dialog--buzz-out":n.value}])),a=computed((()=>({...o.value})));return()=>createVNode("div",{class:i.value,style:a.value},[t.default&&t.default()])}},O=(e,t)=>{const n=e.__vccOpts||e;for(const[r,o]of t)n[r]=o;return n},zt={},jt={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"v-dialog-icon bi-x-lg",viewBox:"0 0 16 16"},Ht=createBaseVNode("path",{d:"M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z"},null,-1),Rt=[Ht];function Gt(e,t){return openBlock(),createElementBlock("svg",jt,Rt)}const le=O(zt,[["render",Gt]]),Ft={},Vt={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"v-dialog-icon bi-square",viewBox:"0 0 16 16"},Zt=createBaseVNode("path",{d:"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"},null,-1),Kt=[Zt];function Yt(e,t){return openBlock(),createElementBlock("svg",Vt,Kt)}const Ut=O(Ft,[["render",Yt]]),qt={},Xt={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"v-dialog-icon bi-arrows-angle-contract",viewBox:"0 0 16 16"},Jt=createBaseVNode("path",{"fill-rule":"evenodd",d:"M.172 15.828a.5.5 0 0 0 .707 0l4.096-4.096V14.5a.5.5 0 1 0 1 0v-3.975a.5.5 0 0 0-.5-.5H1.5a.5.5 0 0 0 0 1h2.768L.172 15.121a.5.5 0 0 0 0 .707zM15.828.172a.5.5 0 0 0-.707 0l-4.096 4.096V1.5a.5.5 0 1 0-1 0v3.975a.5.5 0 0 0 .5.5H14.5a.5.5 0 0 0 0-1h-2.768L15.828.879a.5.5 0 0 0 0-.707z"},null,-1),Qt=[Jt];function en$1(e,t){return openBlock(),createElementBlock("svg",Xt,Qt)}const tn=O(qt,[["render",en$1]]),nn={setup(){const{maxButton:e,maximize:t,title:n,closeButton:r,switchMaximize:o,closeDialogWithoutCallback:i}=inject(h);return()=>createVNode("div",{class:"v-dialog-header"},[createVNode("h3",null,[n]),e&&createVNode("button",{type:"button",class:"v-dialog-btn__maximize",onClick:o},[t.value?createVNode(tn,null,null):createVNode(Ut,null,null)]),r&&createVNode("button",{type:"button",class:"v-dialog-btn__close",onClick:i},[createVNode(le,null,null)])])}},te={name:"DialogComponentBody",setup(e,{slots:t}){const{getComponentContent:n}=$t(t);return()=>createVNode("div",{class:"v-dialog-body"},[n()])}};function on(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!isVNode(e)}const Ge=defineComponent({name:"DialogModal",props:F$1({component:[Function,Object],shake:{type:Boolean,default:!0},title:{type:String,default:"Dialog"},width:{type:Number,default:Ie},height:{type:Number,default:Oe},params:Object,fullscreen:{type:Boolean,default:!1},maxButton:{type:Boolean,default:!0},closeButton:{type:Boolean,default:!0},visible:{type:Boolean,default:!1}}),emits:V$1(["update:visible"]),setup(e,{emit:t,slots:n,expose:r}){const{maximize:o,closeDialogWithoutCallback:i,...a}=an(e,t);provide(h,{...e,...a,...Et,closeDialogWithoutCallback:i,maximize:o});const s=computed((()=>["v-dialog-modal","v-dialog--content-center",{"v-dialog-modal--maximize":o.value}]));return r({close:i}),()=>{let t;return createVNode(oe,{"container-class":s.value,"transition-name":"v-dialog--smooth"},{default:()=>[createVNode(ae,null,{default:()=>[e.header&&createVNode(nn,null,null),n.default?createVNode(te,null,on(t=n.default())?t:{default:()=>[t]}):createVNode(te,null,null)]})]})}}});function an(e,t){const{setDialogSize:n,openDialog:r,closeWithCallback:o,closeWithoutCallback:i,...a}=Z$1(e,t),s=ref(!1),{closeDialogWithCallback:c,closeDialogWithoutCallback:l}=ze(t,o,i);function u(){s.value=!s.value}function d(){r(),e.fullscreen&&u()}return watch((()=>e.visible),(e=>{e||l()})),n(e.width||Ie,e.height||Oe),onMounted((()=>{d()})),{...a,maximize:s,openModal:d,switchMaximize:u,closeDialogWithCallback:c,closeDialogWithoutCallback:l,backdropCloseDialog:l}}function ln(e,t={}){const n={...t,component:markRaw(e)};return z$1(Ge,n)}const sn={},cn={width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",class:"v-dialog-icon v-dialog-icon-loading"},rn=createBaseVNode("path",{d:"M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z",opacity:".25"},null,-1),un=createBaseVNode("path",{d:"M12,4a8,8,0,0,1,7.89,6.7A1.53,1.53,0,0,0,21.38,12h0a1.5,1.5,0,0,0,1.48-1.75,11,11,0,0,0-21.72,0A1.5,1.5,0,0,0,2.62,12h0a1.53,1.53,0,0,0,1.49-1.3A8,8,0,0,1,12,4Z"},[createBaseVNode("animateTransform",{attributeName:"transform",type:"rotate",dur:"0.75s",values:"0 12 12;360 12 12",repeatCount:"indefinite"})],-1),dn=[rn,un];function fn(e,t){return openBlock(),createElementBlock("svg",cn,dn)}const gn=O(sn,[["render",fn]]),mn={name:"DialogMaskBody",setup(e,{slots:t}){const{icon:n}=inject(h);return()=>createVNode("div",{class:"v-dialog-body"},[n&&createVNode("div",{class:"v-dialog-mask__icon"},[createVNode(gn,null,null)]),createVNode("div",{class:"v-dialog-mask__content"},[t.default&&t.default()])])}},hn=defineComponent({name:"DialogMask",props:F$1({appendTo:{type:String,default:"body"},pill:{type:Boolean,default:!0},icon:{type:Boolean,default:!0},panel:{type:Boolean,default:!0}}),emits:V$1(),setup(e,{emit:t,expose:n}){const{messageText:r,closeMaskWithCallback:o,...i}=pn(e,t);provide(h,{...e,...i,...At});const a=["v-dialog-mask","v-dialog--content-center"],s=[{"mask--pill":e.pill,"mask--no-icon":!e.icon,"mask--no-panel":!e.panel}];return n({close:o}),()=>createVNode(oe,{"container-class":a,"backdrop-class":{"v-dialog-overlay--blur":!e.panel},"transition-name":"v-dialog--smooth","append-to":e.appendTo},{default:()=>[createVNode(ae,{"class-name":s},{default:()=>[createVNode(mn,null,{default:()=>r.value})]})]})}});function pn(e,t){const{shouldControlOverflow:n,shouldHandleResize:r,setDialogSize:o,openDialog:i,closeWithCallback:a,...s}=Z$1(e,t),{addParentRelative:c,removeParentRelative:l}=vn(e.appendTo),u=pe(e.language),d=computed((()=>e.message||u.maskText));return"body"!==e.appendTo&&(r.value=!1,n.value=!1),c(),o(void 0,60),onMounted((()=>{i()})),{...s,messageText:d,closeMaskWithCallback:function(){a(void 0,{afterClose:()=>l})}}}function vn(e){const t=function(){if("string"==typeof e)return document.querySelector(e);if(xt(e))return e}();return{addParentRelative:function(){"body"!==e&&t.classList.add("v-dialog-mask-parent--relative")},removeParentRelative:function(){"body"!==e&&t.classList.remove("v-dialog-mask-parent--relative")}}}function _n(){return z$1(hn,U$1(...arguments))}const yn={setup(){const{title:e,closeButton:t,closeDialogWithoutCallback:n}=inject(h);return()=>createVNode("div",{class:"v-dialog-header"},[createVNode("h3",null,[e]),t&&createVNode("button",{type:"button",class:"v-dialog-btn__close",onClick:n},[createVNode(le,null,null)])])}};function bn(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!isVNode(e)}const Fe=defineComponent({name:"DialogDrawer",props:F$1({component:[Function,Object],title:{type:String,default:"Dialog"},width:{type:Number,default:void 0},height:{type:Number,default:void 0},backdropClose:{type:Boolean,default:!0},params:Object,closeButton:{type:Boolean,default:!0},placement:{type:String,default:J},visible:{type:Boolean,default:!1}}),emits:V$1(["update:visible"]),setup(e,{emit:t,slots:n,expose:r}){const{getPositionClass:o,getTransitionName:i,closeDialogWithoutCallback:a,...s}=Cn(e,t);provide(h,{...e,...s,...St,closeDialogWithoutCallback:a});const c=computed((()=>["v-dialog-drawer",o()]));return r({close:a}),()=>{let t;return createVNode(oe,{"container-class":c.value,"transition-name":i()},{default:()=>[createVNode(ae,null,{default:()=>[e.header&&createVNode(yn,null,null),n.default?createVNode(te,null,bn(t=n.default())?t:{default:()=>[t]}):createVNode(te,null,null)]})]})}}});function Cn(e,t){const{setDialogSize:n,openDialog:r,closeWithCallback:o,closeWithoutCallback:i,...a}=Z$1(e,t),{placement:s}=e,{width:c,height:l}=Dn(e),{closeDialogWithCallback:u,closeDialogWithoutCallback:d}=ze(t,o,i);return watch((()=>e.visible),(e=>{e||d()})),n(c,l),onMounted((()=>{r()})),{...a,getPositionClass:function(){return"v-dialog-drawer--"+(Te.includes(s)?s:J)},getTransitionName:function(){return"v-dialog-drawer-slide-in-"+(Te.includes(s)?s:J)},closeDialogWithCallback:u,closeDialogWithoutCallback:d,backdropCloseDialog:d}}function Dn(e){const{width:t,height:n,placement:r}=e;return r===G||r===fe?{width:lt,height:n||ft}:{width:t||dt,height:st}}function kn(e,t={}){const n={...t,component:markRaw(e)};return z$1(Fe,n)}const wn={name:"DialogAlertHeader",setup(){const{title:e,lang:t,messageType:n}=inject(h),r=e||Ne(n,t);return()=>createVNode("div",{class:"v-dialog-header"},[createVNode("h3",null,[r])])}},Tn={},En={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"v-dialog-icon bi-info-circle",viewBox:"0 0 16 16"},An=createBaseVNode("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"},null,-1),Sn=createBaseVNode("path",{d:"m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"},null,-1),xn=[An,Sn];function Mn(e,t){return openBlock(),createElementBlock("svg",En,xn)}const _e=O(Tn,[["render",Mn]]),Bn={},In={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"v-dialog-icon bi-exclamation-triangle",viewBox:"0 0 16 16"},On=createBaseVNode("path",{d:"M7.938 2.016A.13.13 0 0 1 8.002 2a.13.13 0 0 1 .063.016.146.146 0 0 1 .054.057l6.857 11.667c.036.06.035.124.002.183a.163.163 0 0 1-.054.06.116.116 0 0 1-.066.017H1.146a.115.115 0 0 1-.066-.017.163.163 0 0 1-.054-.06.176.176 0 0 1 .002-.183L7.884 2.073a.147.147 0 0 1 .054-.057zm1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566z"},null,-1),Ln=createBaseVNode("path",{d:"M7.002 12a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 5.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995z"},null,-1),$n=[On,Ln];function Pn(e,t){return openBlock(),createElementBlock("svg",In,$n)}const ye=O(Bn,[["render",Pn]]),Wn={},Nn={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"v-dialog-icon bi-x-circle",viewBox:"0 0 16 16"},zn=createBaseVNode("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"},null,-1),jn=createBaseVNode("path",{d:"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"},null,-1),Hn=[zn,jn];function Rn(e,t){return openBlock(),createElementBlock("svg",Nn,Hn)}const be=O(Wn,[["render",Rn]]),Gn={},Fn={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"v-dialog-icon bi-check-circle",viewBox:"0 0 16 16"},Vn=createBaseVNode("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"},null,-1),Zn=createBaseVNode("path",{d:"M10.97 4.97a.235.235 0 0 0-.02.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-1.071-1.05z"},null,-1),Kn=[Vn,Zn];function Yn(e,t){return openBlock(),createElementBlock("svg",Fn,Kn)}const Ce=O(Gn,[["render",Yn]]),Un={},qn={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"v-dialog-icon bi-question-circle",viewBox:"0 0 16 16"},Xn=createBaseVNode("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"},null,-1),Jn=createBaseVNode("path",{d:"M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286zm1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94z"},null,-1),Qn=[Xn,Jn];function eo(e,t){return openBlock(),createElementBlock("svg",qn,Qn)}const to=O(Un,[["render",eo]]),no={name:"DialogAlertBody",setup(){const{icon:e,message:t,messageType:n,getAlertTypeClass:r}=inject(h),o=["v-dialog-body",r(n)];function i(e){switch(e){case R:return createVNode(_e,null,null);case M:return createVNode(ye,null,null);case B:return createVNode(be,null,null);case I:return createVNode(Ce,null,null);case Y:return createVNode(to,null,null);default:return}}return e||o.push("no-icon"),()=>createVNode("div",{class:o},[createVNode("div",{class:"v-dialog-alert__content"},[e&&createVNode("div",{class:"v-dialog-alert__icon"},[i(n)]),createVNode("div",{class:"v-dialog-alert__message"},[t])])])}},oo={name:"DialogAlertFooter",setup(){const e=ref(),{lang:t,cancelAlert:n,isConfirmType:r,closeWithCallback:o}=inject(h);return onMounted((()=>{e.value&&e.value.focus()})),()=>createVNode("div",{class:"v-dialog-footer"},[createVNode("div",{class:"v-dialog-alert__buttons"},[createVNode("button",{type:"button",class:"v-dialog-btn__ok",ref:e,onClick:o},[t.btnOk]),r()&&createVNode("button",{type:"button",class:"v-dialog-btn__cancel",onClick:n},[t.btnCancel])])])}},Ve=defineComponent({name:"DialogAlert",props:F$1({messageType:{type:String,default:R},colorfulShadow:{type:Boolean,default:!1},icon:{type:Boolean,default:!0},cancelCallback:{type:Function,default:void 0}}),emits:V$1(),setup(e,{emit:t,expose:n}){const{getShadowClass:r,closeWithCallback:o,...i}=ao(e,t);return provide(h,{...e,...i,...Tt,closeWithCallback:o}),n({close:o}),()=>createVNode(oe,{"container-class":["v-dialog--content-center","v-dialog-alert",{"no-header":!e.header}],"transition-name":"v-dialog--candy"},{default:()=>[createVNode(ae,{"class-name":[r()]},{default:()=>[e.header&&createVNode(wn,null,null),createVNode(no,null,null),createVNode(oo,null,null)]})]})}});function ao(e,t){const{messageType:n,colorfulShadow:r}=e,{setDialogSize:o,openDialog:i,closeDialog:a,closeWithCallback:s,...c}=Z$1(e,t),l=pe(e.language);o(it,ct);return onMounted((()=>{i()})),{...c,lang:l,cancelAlert:function(){a(e.cancelCallback)},isConfirmType:()=>Y===n,getAlertTypeClass:function(){return[M,B,I,Y].includes(n)?`alert-${n}`:""},closeWithCallback:s,backdropCloseDialog:s,getShadowClass:function(){return r&&ht.includes(n)?`v-dialog__shadow--${null==n?void 0:n.toLowerCase()}`:""}}}ve([...ge,Y],"DialogAlert",Ve);const so={name:"DialogMessageBody",setup(){const{icon:e,pill:t,message:n,messageType:r,closeButton:o,closeGroupDialogWithCallback:i}=inject(h),a=["v-dialog-body",t&&"v-dialog-message--pill",e||"v-dialog-message--no-icon",co(r)];function s(e){switch(e){case R:return createVNode(_e,null,null);case M:return createVNode(ye,null,null);case B:return createVNode(be,null,null);case I:return createVNode(Ce,null,null);default:return}}return()=>createVNode("div",{class:a},[e&&createVNode("div",{class:"v-dialog-message__prepend"},[s(r)]),createVNode("div",{class:"v-dialog-message__body"},[n]),o&&createVNode("div",{class:"v-dialog-message__append",onClick:i},[createVNode(le,{class:"v-dialog-message__close"},null)])])}},Ze={name:"DialogLiteContainer",props:{id:{type:[String,Number],default:""},containerClass:{type:[String,Array,Object],default:""},transitionName:{type:String,default:""}},setup(e,{slots:t}){const{show:n,dialogStyles:r,dialogZIndex:o,customClass:i,onTransitionAfterEnter:a,onTransitionAfterLeave:s}=inject(h),c=["v-dialog-lite",e.containerClass,i];return()=>createVNode(Teleport,{to:"body"},{default:()=>[createVNode("div",{id:e.id,class:c,style:{...r.value,"z-index":o}},[createVNode(Transition,{name:e.transitionName,onAfterEnter:a,onAfterLeave:s,appear:!0},{default:()=>n.value&&t.default&&t.default()})])]})}},Ke=defineComponent({name:"DialogMessage",props:F$1({messageType:{type:String,default:R},icon:{type:Boolean,default:!0},closeButton:{type:Boolean,default:!1},duration:{type:Number,default:3e3},offset:{type:[String,Number],default:Be},placement:{type:String,default:G},pill:{type:Boolean,default:!0}}),emits:V$1(),setup(e,{emit:t,expose:n}){const{handleBodyRounded:r,closeGroupDialogWithCallback:o,...i}=io(e,t),a=ref();return provide(h,{...e,...i,closeGroupDialogWithCallback:o}),r(a),n({close:o}),()=>createVNode(Ze,{"container-class":["v-dialog-message"],"transition-name":"v-dialog--fade-lite",id:e.dialogKey},{default:()=>[createVNode(so,{ref:a},null)]})}});function io(e,t){const{setPosition:n,setDialogSize:r,openDialog:o,closeWithCallback:i,shouldHandleResize:a,shouldControlOverflow:s,setupAutomaticClose:c,setupPositionAdjustBehavior:l,...u}=Z$1(e,t),{closeGroupDialogWithCallback:d}=je(p,i),{getVerticalPosition:A}=Re(he,e);function p(){n(function(){if(e.placement!==fe)return A()}(),function(){if(e.placement!==G)return A()}())}return a.value=!1,s.value=!1,r(),l(p),c(d),onMounted((()=>{o()})),{...u,handleBodyRounded:function(t){e.pill&&onMounted((()=>{nextTick((()=>{var e,n,r,o,i;(null==(n=null==(e=t.value)?void 0:e.$el)?void 0:n.offsetHeight)>60&&(null==(i=null==(o=null==(r=t.value)?void 0:r.$el)?void 0:o.classList)||i.remove("v-dialog-message--pill"))}))}))},closeGroupDialogWithCallback:d}}function co(e){return[M,B,I].includes(e)?`message-${e}`:""}function ro(){const e=U$1(...arguments),t={type:he,placement:e.placement||G};return z$1(Ke,e,t)}ve(ge,"DialogMessage",Ke,(e=>({type:he,placement:e.placement||G})));const uo={name:"DialogMessageBody",setup(){const{icon:e,message:t,messageType:n,header:r,title:o,lang:i,closeButton:a,closeGroupDialogWithCallback:s}=inject(h),c=["v-dialog-body",go(n)],l=o||Ne(n,i);function u(e){switch(e){case R:return createVNode(_e,null,null);case M:return createVNode(ye,null,null);case B:return createVNode(be,null,null);case I:return createVNode(Ce,null,null);default:return}}return()=>createVNode("div",{class:c},[e&&createVNode("div",{class:"v-dialog-toast__prepend"},[u(n)]),createVNode("div",{class:"v-dialog-toast__body"},[r&&createVNode("h3",null,[l]),createVNode("div",null,[t])]),a&&createVNode("div",{class:"v-dialog-toast__append",onClick:s},[createVNode(le,{class:"v-dialog-toast__close"},null)])])}},Ye=defineComponent({name:"DialogToast",props:F$1({messageType:{type:String,default:R},icon:{type:Boolean,default:!0},closeButton:{type:Boolean,default:!0},duration:{type:Number,default:3e3},offset:{type:[String,Number],default:ut},placement:{type:String,default:ne}}),emits:V$1(),setup(e,{emit:t,expose:n}){const{closeGroupDialogWithCallback:r,...o}=fo(e,t),i=ref();provide(h,{...e,...o,closeGroupDialogWithCallback:r});const a=["v-dialog-toast",mo(e.placement)];return n({close:r}),()=>createVNode(Ze,{"container-class":a,"transition-name":"v-dialog--fade-lite",id:e.dialogKey},{default:()=>[createVNode(uo,{ref:i},null)]})}});function fo(e,t){const{setPosition:n,setDialogSize:r,openDialog:o,closeWithCallback:i,shouldHandleResize:a,shouldControlOverflow:s,setupAutomaticClose:c,setupPositionAdjustBehavior:l,...u}=Z$1(e,t),{closeGroupDialogWithCallback:d}=je(p,i),{getVerticalPosition:A}=Re(me,e);function p(){n(function(){if(e.placement!==$e&&e.placement!==mt)return A()}(),function(){if(e.placement!==Le&&e.placement!==ne)return A()}())}return a.value=!1,s.value=!1,r(),l(p),c(d),onMounted((()=>{o()})),{...u,lang:pe(e.language),handleBodyRounded:function(t){e.pill&&onMounted((()=>{nextTick((()=>{var e,n,r,o,i;(null==(n=null==(e=t.value)?void 0:e.$el)?void 0:n.offsetHeight)>60&&(null==(i=null==(o=null==(r=t.value)?void 0:r.$el)?void 0:o.classList)||i.remove("v-dialog-message--pill"))}))}))},closeGroupDialogWithCallback:d}}function go(e){return[M,B,I].includes(e)?`toast-${e}`:""}function mo(e){const t="v-dialog-toast--";return e===Le||e===$e?t+"left":t+"right"}ve(ge,"DialogToast",Ye,(e=>({type:me,placement:e.placement||ne})));const Lo=defineComponent({name:"DialogModalBox",setup:(e,t)=>He(Ge,t)}),$o=defineComponent({name:"DialogDrawerBox",setup:(e,t)=>He(Fe,t)});console.log(" modal-notification.js"),Object.hasOwn||(console.log("hasOwn "),Object.hasOwn=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)});let appHideDialogs=[],appShow=!0,showShouldTryPermission=!1;function appShowShouldTryPermission(){return showShouldTryPermission}function setNoShowShouldTryPermission(){showShouldTryPermission=!1}function setYesShowShouldTryPermission(){showShouldTryPermission=!0}function changeAppShow(e){appShow=e}function hideValidDialogs(){setTimeout((()=>{for(const e of appHideDialogs)console.log("dialog"),e();appHideDialogs=[]}),2500)}function showNotificationError$1({content:e="",durationSecond:t=2.5,callback:n=()=>{}}){const r=ro(e,n,{icon:!0,messageType:"error",closeButton:!1,duration:1e3*t,customClass:"modal-notification"});0==appShow&&(console.log("app dialog"),appHideDialogs.push(r))}function showNotification({content:e="",durationSecond:t=1,callback:n=()=>{}}){const r=ro(e,n,{icon:!1,closeButton:!1,duration:1e3*t,customClass:"modal-notification"});0==appShow&&(console.log("app dialog"),appHideDialogs.push(r))}var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var n=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})})),n}var cryptoJs={exports:{}};function commonjsRequire(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var core={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(__viteBrowserExternal$1);var hasRequiredCore;function requireCore(){return hasRequiredCore||(hasRequiredCore=1,core.exports=(e=e||function(e,t){var n;if("undefined"!=typeof window&&window.crypto&&(n=window.crypto),"undefined"!=typeof self&&self.crypto&&(n=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(n=globalThis.crypto),!n&&"undefined"!=typeof window&&window.msCrypto&&(n=window.msCrypto),!n&&void 0!==commonjsGlobal&&commonjsGlobal.crypto&&(n=commonjsGlobal.crypto),!n&&"function"==typeof commonjsRequire)try{n=require$$0}catch(f){}var r=function(){if(n){if("function"==typeof n.getRandomValues)try{return n.getRandomValues(new Uint32Array(1))[0]}catch(f){}if("function"==typeof n.randomBytes)try{return n.randomBytes(4).readInt32LE()}catch(f){}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),i={},a=i.lib={},s=a.Base=function(){return{extend:function(e){var t=o(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),c=a.WordArray=s.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,o=e.sigBytes;if(this.clamp(),r%4)for(var i=0;i<o;i++){var a=n[i>>>2]>>>24-i%4*8&255;t[r+i>>>2]|=a<<24-(r+i)%4*8}else for(var s=0;s<o;s+=4)t[r+s>>>2]=n[s>>>2];return this.sigBytes+=o,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=s.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(r());return new c.init(t,e)}}),l=i.enc={},u=l.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var i=t[o>>>2]>>>24-o%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new c.init(n,t/2)}},d=l.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var i=t[o>>>2]>>>24-o%4*8&255;r.push(String.fromCharCode(i))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new c.init(n,t)}},A=l.Utf8={stringify:function(e){try{return decodeURIComponent(escape(d.stringify(e)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(e){return d.parse(unescape(encodeURIComponent(e)))}},p=a.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=A.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,r=this._data,o=r.words,i=r.sigBytes,a=this.blockSize,s=i/(4*a),l=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*a,u=e.min(4*l,i);if(l){for(var d=0;d<l;d+=a)this._doProcessBlock(o,d);n=o.splice(0,l),r.sigBytes-=u}return new c.init(n,u)},clone:function(){var e=s.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});a.Hasher=p.extend({cfg:s.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new h.HMAC.init(e,n).finalize(t)}}});var h=i.algo={};return i}(Math),e)),core.exports;var e}var x64Core={exports:{}},hasRequiredX64Core;function requireX64Core(){return hasRequiredX64Core||(hasRequiredX64Core=1,x64Core.exports=(a=requireCore(),n=(t=a).lib,r=n.Base,o=n.WordArray,(i=t.x64={}).Word=r.extend({init:function(e,t){this.high=e,this.low=t}}),i.WordArray=r.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=n!=e?n:8*t.length},toX32:function(){for(var e=this.words,t=e.length,n=[],r=0;r<t;r++){var i=e[r];n.push(i.high),n.push(i.low)}return o.create(n,this.sigBytes)},clone:function(){for(var e=r.clone.call(this),t=e.words=this.words.slice(0),n=t.length,o=0;o<n;o++)t[o]=t[o].clone();return e}}),a)),x64Core.exports;var e,t,n,r,o,i,a}var libTypedarrays={exports:{}},hasRequiredLibTypedarrays;function requireLibTypedarrays(){return hasRequiredLibTypedarrays||(hasRequiredLibTypedarrays=1,libTypedarrays.exports=(e=requireCore(),function(){if("function"==typeof ArrayBuffer){var t=e.lib.WordArray,n=t.init,r=t.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var t=e.byteLength,r=[],o=0;o<t;o++)r[o>>>2]|=e[o]<<24-o%4*8;n.call(this,r,t)}else n.apply(this,arguments)};r.prototype=t}}(),e.lib.WordArray)),libTypedarrays.exports;var e}var encUtf16={exports:{}},hasRequiredEncUtf16;function requireEncUtf16(){return hasRequiredEncUtf16||(hasRequiredEncUtf16=1,encUtf16.exports=(e=requireCore(),function(){var t=e,n=t.lib.WordArray,r=t.enc;function o(e){return e<<8&4278255360|e>>>8&16711935}r.Utf16=r.Utf16BE={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o+=2){var i=t[o>>>2]>>>16-o%4*8&65535;r.push(String.fromCharCode(i))}return r.join("")},parse:function(e){for(var t=e.length,r=[],o=0;o<t;o++)r[o>>>1]|=e.charCodeAt(o)<<16-o%2*16;return n.create(r,2*t)}},r.Utf16LE={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i+=2){var a=o(t[i>>>2]>>>16-i%4*8&65535);r.push(String.fromCharCode(a))}return r.join("")},parse:function(e){for(var t=e.length,r=[],i=0;i<t;i++)r[i>>>1]|=o(e.charCodeAt(i)<<16-i%2*16);return n.create(r,2*t)}}}(),e.enc.Utf16)),encUtf16.exports;var e}var encBase64={exports:{}},hasRequiredEncBase64;function requireEncBase64(){return hasRequiredEncBase64||(hasRequiredEncBase64=1,encBase64.exports=(e=requireCore(),function(){var t=e,n=t.lib.WordArray;function r(e,t,r){for(var o=[],i=0,a=0;a<t;a++)if(a%4){var s=r[e.charCodeAt(a-1)]<<a%4*2|r[e.charCodeAt(a)]>>>6-a%4*2;o[i>>>2]|=s<<24-i%4*8,i++}return n.create(o,i)}t.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var o=[],i=0;i<n;i+=3)for(var a=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,s=0;s<4&&i+.75*s<n;s++)o.push(r.charAt(a>>>6*(3-s)&63));var c=r.charAt(64);if(c)for(;o.length%4;)o.push(c);return o.join("")},parse:function(e){var t=e.length,n=this._map,o=this._reverseMap;if(!o){o=this._reverseMap=[];for(var i=0;i<n.length;i++)o[n.charCodeAt(i)]=i}var a=n.charAt(64);if(a){var s=e.indexOf(a);-1!==s&&(t=s)}return r(e,t,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),e.enc.Base64)),encBase64.exports;var e}var encBase64url={exports:{}},hasRequiredEncBase64url;function requireEncBase64url(){return hasRequiredEncBase64url||(hasRequiredEncBase64url=1,encBase64url.exports=(e=requireCore(),function(){var t=e,n=t.lib.WordArray;function r(e,t,r){for(var o=[],i=0,a=0;a<t;a++)if(a%4){var s=r[e.charCodeAt(a-1)]<<a%4*2|r[e.charCodeAt(a)]>>>6-a%4*2;o[i>>>2]|=s<<24-i%4*8,i++}return n.create(o,i)}t.enc.Base64url={stringify:function(e,t){void 0===t&&(t=!0);var n=e.words,r=e.sigBytes,o=t?this._safe_map:this._map;e.clamp();for(var i=[],a=0;a<r;a+=3)for(var s=(n[a>>>2]>>>24-a%4*8&255)<<16|(n[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|n[a+2>>>2]>>>24-(a+2)%4*8&255,c=0;c<4&&a+.75*c<r;c++)i.push(o.charAt(s>>>6*(3-c)&63));var l=o.charAt(64);if(l)for(;i.length%4;)i.push(l);return i.join("")},parse:function(e,t){void 0===t&&(t=!0);var n=e.length,o=t?this._safe_map:this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var a=0;a<o.length;a++)i[o.charCodeAt(a)]=a}var s=o.charAt(64);if(s){var c=e.indexOf(s);-1!==c&&(n=c)}return r(e,n,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"}}(),e.enc.Base64url)),encBase64url.exports;var e}var md5={exports:{}},hasRequiredMd5;function requireMd5(){return hasRequiredMd5||(hasRequiredMd5=1,md5.exports=(e=requireCore(),function(t){var n=e,r=n.lib,o=r.WordArray,i=r.Hasher,a=n.algo,s=[];!function(){for(var e=0;e<64;e++)s[e]=4294967296*t.abs(t.sin(e+1))|0}();var c=a.MD5=i.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=t+n,o=e[r];e[r]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}var i=this._hash.words,a=e[t+0],c=e[t+1],p=e[t+2],h=e[t+3],f=e[t+4],g=e[t+5],m=e[t+6],_=e[t+7],E=e[t+8],v=e[t+9],y=e[t+10],b=e[t+11],C=e[t+12],S=e[t+13],w=e[t+14],T=e[t+15],I=i[0],R=i[1],O=i[2],N=i[3];I=l(I,R,O,N,a,7,s[0]),N=l(N,I,R,O,c,12,s[1]),O=l(O,N,I,R,p,17,s[2]),R=l(R,O,N,I,h,22,s[3]),I=l(I,R,O,N,f,7,s[4]),N=l(N,I,R,O,g,12,s[5]),O=l(O,N,I,R,m,17,s[6]),R=l(R,O,N,I,_,22,s[7]),I=l(I,R,O,N,E,7,s[8]),N=l(N,I,R,O,v,12,s[9]),O=l(O,N,I,R,y,17,s[10]),R=l(R,O,N,I,b,22,s[11]),I=l(I,R,O,N,C,7,s[12]),N=l(N,I,R,O,S,12,s[13]),O=l(O,N,I,R,w,17,s[14]),I=u(I,R=l(R,O,N,I,T,22,s[15]),O,N,c,5,s[16]),N=u(N,I,R,O,m,9,s[17]),O=u(O,N,I,R,b,14,s[18]),R=u(R,O,N,I,a,20,s[19]),I=u(I,R,O,N,g,5,s[20]),N=u(N,I,R,O,y,9,s[21]),O=u(O,N,I,R,T,14,s[22]),R=u(R,O,N,I,f,20,s[23]),I=u(I,R,O,N,v,5,s[24]),N=u(N,I,R,O,w,9,s[25]),O=u(O,N,I,R,h,14,s[26]),R=u(R,O,N,I,E,20,s[27]),I=u(I,R,O,N,S,5,s[28]),N=u(N,I,R,O,p,9,s[29]),O=u(O,N,I,R,_,14,s[30]),I=d(I,R=u(R,O,N,I,C,20,s[31]),O,N,g,4,s[32]),N=d(N,I,R,O,E,11,s[33]),O=d(O,N,I,R,b,16,s[34]),R=d(R,O,N,I,w,23,s[35]),I=d(I,R,O,N,c,4,s[36]),N=d(N,I,R,O,f,11,s[37]),O=d(O,N,I,R,_,16,s[38]),R=d(R,O,N,I,y,23,s[39]),I=d(I,R,O,N,S,4,s[40]),N=d(N,I,R,O,a,11,s[41]),O=d(O,N,I,R,h,16,s[42]),R=d(R,O,N,I,m,23,s[43]),I=d(I,R,O,N,v,4,s[44]),N=d(N,I,R,O,C,11,s[45]),O=d(O,N,I,R,T,16,s[46]),I=A(I,R=d(R,O,N,I,p,23,s[47]),O,N,a,6,s[48]),N=A(N,I,R,O,_,10,s[49]),O=A(O,N,I,R,w,15,s[50]),R=A(R,O,N,I,g,21,s[51]),I=A(I,R,O,N,C,6,s[52]),N=A(N,I,R,O,h,10,s[53]),O=A(O,N,I,R,y,15,s[54]),R=A(R,O,N,I,c,21,s[55]),I=A(I,R,O,N,E,6,s[56]),N=A(N,I,R,O,T,10,s[57]),O=A(O,N,I,R,m,15,s[58]),R=A(R,O,N,I,S,21,s[59]),I=A(I,R,O,N,f,6,s[60]),N=A(N,I,R,O,b,10,s[61]),O=A(O,N,I,R,p,15,s[62]),R=A(R,O,N,I,v,21,s[63]),i[0]=i[0]+I|0,i[1]=i[1]+R|0,i[2]=i[2]+O|0,i[3]=i[3]+N|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,o=8*e.sigBytes;n[o>>>5]|=128<<24-o%32;var i=t.floor(r/4294967296),a=r;n[15+(o+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),n[14+(o+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),e.sigBytes=4*(n.length+1),this._process();for(var s=this._hash,c=s.words,l=0;l<4;l++){var u=c[l];c[l]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return s},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});function l(e,t,n,r,o,i,a){var s=e+(t&n|~t&r)+o+a;return(s<<i|s>>>32-i)+t}function u(e,t,n,r,o,i,a){var s=e+(t&r|n&~r)+o+a;return(s<<i|s>>>32-i)+t}function d(e,t,n,r,o,i,a){var s=e+(t^n^r)+o+a;return(s<<i|s>>>32-i)+t}function A(e,t,n,r,o,i,a){var s=e+(n^(t|~r))+o+a;return(s<<i|s>>>32-i)+t}n.MD5=i._createHelper(c),n.HmacMD5=i._createHmacHelper(c)}(Math),e.MD5)),md5.exports;var e}var sha1={exports:{}},hasRequiredSha1;function requireSha1(){return hasRequiredSha1||(hasRequiredSha1=1,sha1.exports=(s=requireCore(),t=(e=s).lib,n=t.WordArray,r=t.Hasher,o=e.algo,i=[],a=o.SHA1=r.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],o=n[1],a=n[2],s=n[3],c=n[4],l=0;l<80;l++){if(l<16)i[l]=0|e[t+l];else{var u=i[l-3]^i[l-8]^i[l-14]^i[l-16];i[l]=u<<1|u>>>31}var d=(r<<5|r>>>27)+c+i[l];d+=l<20?1518500249+(o&a|~o&s):l<40?1859775393+(o^a^s):l<60?(o&a|o&s|a&s)-1894007588:(o^a^s)-899497514,c=s,s=a,a=o<<30|o>>>2,o=r,r=d}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+a|0,n[3]=n[3]+s|0,n[4]=n[4]+c|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(r+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}}),e.SHA1=r._createHelper(a),e.HmacSHA1=r._createHmacHelper(a),s.SHA1)),sha1.exports;var e,t,n,r,o,i,a,s}var sha256={exports:{}},hasRequiredSha256;function requireSha256(){return hasRequiredSha256||(hasRequiredSha256=1,sha256.exports=(e=requireCore(),function(t){var n=e,r=n.lib,o=r.WordArray,i=r.Hasher,a=n.algo,s=[],c=[];!function(){function e(e){for(var n=t.sqrt(e),r=2;r<=n;r++)if(!(e%r))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var r=2,o=0;o<64;)e(r)&&(o<8&&(s[o]=n(t.pow(r,.5))),c[o]=n(t.pow(r,1/3)),o++),r++}();var l=[],u=a.SHA256=i.extend({_doReset:function(){this._hash=new o.init(s.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],o=n[1],i=n[2],a=n[3],s=n[4],u=n[5],d=n[6],A=n[7],p=0;p<64;p++){if(p<16)l[p]=0|e[t+p];else{var h=l[p-15],f=(h<<25|h>>>7)^(h<<14|h>>>18)^h>>>3,g=l[p-2],m=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;l[p]=f+l[p-7]+m+l[p-16]}var _=r&o^r&i^o&i,E=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),v=A+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&u^~s&d)+c[p]+l[p];A=d,d=u,u=s,s=a+v|0,a=i,i=o,o=r,r=v+(E+_)|0}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+i|0,n[3]=n[3]+a|0,n[4]=n[4]+s|0,n[5]=n[5]+u|0,n[6]=n[6]+d|0,n[7]=n[7]+A|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,o=8*e.sigBytes;return n[o>>>5]|=128<<24-o%32,n[14+(o+64>>>9<<4)]=t.floor(r/4294967296),n[15+(o+64>>>9<<4)]=r,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});n.SHA256=i._createHelper(u),n.HmacSHA256=i._createHmacHelper(u)}(Math),e.SHA256)),sha256.exports;var e}var sha224={exports:{}},hasRequiredSha224;function requireSha224(){return hasRequiredSha224||(hasRequiredSha224=1,sha224.exports=(i=requireCore(),requireSha256(),t=(e=i).lib.WordArray,n=e.algo,r=n.SHA256,o=n.SHA224=r.extend({_doReset:function(){this._hash=new t.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=r._doFinalize.call(this);return e.sigBytes-=4,e}}),e.SHA224=r._createHelper(o),e.HmacSHA224=r._createHmacHelper(o),i.SHA224)),sha224.exports;var e,t,n,r,o,i}var sha512={exports:{}},hasRequiredSha512;function requireSha512(){return hasRequiredSha512||(hasRequiredSha512=1,sha512.exports=(e=requireCore(),requireX64Core(),function(){var t=e,n=t.lib.Hasher,r=t.x64,o=r.Word,i=r.WordArray,a=t.algo;function s(){return o.create.apply(o,arguments)}var c=[s(1116352408,3609767458),s(1899447441,602891725),s(3049323471,3964484399),s(3921009573,2173295548),s(961987163,4081628472),s(1508970993,3053834265),s(2453635748,2937671579),s(2870763221,3664609560),s(3624381080,2734883394),s(310598401,1164996542),s(607225278,1323610764),s(1426881987,3590304994),s(1925078388,4068182383),s(2162078206,991336113),s(2614888103,633803317),s(3248222580,3479774868),s(3835390401,2666613458),s(4022224774,944711139),s(264347078,2341262773),s(604807628,2007800933),s(770255983,1495990901),s(1249150122,1856431235),s(1555081692,3175218132),s(1996064986,2198950837),s(2554220882,3999719339),s(2821834349,766784016),s(2952996808,2566594879),s(3210313671,3203337956),s(3336571891,1034457026),s(3584528711,2466948901),s(113926993,3758326383),s(338241895,168717936),s(666307205,1188179964),s(773529912,1546045734),s(1294757372,1522805485),s(1396182291,2643833823),s(1695183700,2343527390),s(1986661051,1014477480),s(2177026350,1206759142),s(2456956037,344077627),s(2730485921,1290863460),s(2820302411,3158454273),s(3259730800,3505952657),s(3345764771,106217008),s(3516065817,3606008344),s(3600352804,1432725776),s(4094571909,1467031594),s(275423344,851169720),s(430227734,3100823752),s(506948616,1363258195),s(659060556,3750685593),s(883997877,3785050280),s(958139571,3318307427),s(1322822218,3812723403),s(1537002063,2003034995),s(1747873779,3602036899),s(1955562222,1575990012),s(2024104815,1125592928),s(2227730452,2716904306),s(2361852424,442776044),s(2428436474,593698344),s(2756734187,3733110249),s(3204031479,2999351573),s(3329325298,3815920427),s(3391569614,3928383900),s(3515267271,566280711),s(3940187606,3454069534),s(4118630271,4000239992),s(116418474,1914138554),s(174292421,2731055270),s(289380356,3203993006),s(460393269,320620315),s(685471733,587496836),s(852142971,1086792851),s(1017036298,365543100),s(1126000580,2618297676),s(1288033470,3409855158),s(1501505948,4234509866),s(1607167915,987167468),s(1816402316,1246189591)],l=[];!function(){for(var e=0;e<80;e++)l[e]=s()}();var u=a.SHA512=n.extend({_doReset:function(){this._hash=new i.init([new o.init(1779033703,4089235720),new o.init(3144134277,2227873595),new o.init(1013904242,4271175723),new o.init(2773480762,1595750129),new o.init(1359893119,2917565137),new o.init(2600822924,725511199),new o.init(528734635,4215389547),new o.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],o=n[1],i=n[2],a=n[3],s=n[4],u=n[5],d=n[6],A=n[7],p=r.high,h=r.low,f=o.high,g=o.low,m=i.high,_=i.low,E=a.high,v=a.low,y=s.high,b=s.low,C=u.high,S=u.low,w=d.high,T=d.low,I=A.high,R=A.low,O=p,N=h,k=f,P=g,D=m,L=_,B=E,U=v,M=y,x=b,F=C,$=S,V=w,H=T,j=I,Q=R,G=0;G<80;G++){var K,W,q=l[G];if(G<16)W=q.high=0|e[t+2*G],K=q.low=0|e[t+2*G+1];else{var z=l[G-15],Y=z.high,J=z.low,X=(Y>>>1|J<<31)^(Y>>>8|J<<24)^Y>>>7,Z=(J>>>1|Y<<31)^(J>>>8|Y<<24)^(J>>>7|Y<<25),ee=l[G-2],te=ee.high,ne=ee.low,re=(te>>>19|ne<<13)^(te<<3|ne>>>29)^te>>>6,oe=(ne>>>19|te<<13)^(ne<<3|te>>>29)^(ne>>>6|te<<26),ie=l[G-7],ae=ie.high,se=ie.low,ce=l[G-16],le=ce.high,ue=ce.low;W=(W=(W=X+ae+((K=Z+se)>>>0<Z>>>0?1:0))+re+((K+=oe)>>>0<oe>>>0?1:0))+le+((K+=ue)>>>0<ue>>>0?1:0),q.high=W,q.low=K}var de,Ae=M&F^~M&V,pe=x&$^~x&H,he=O&k^O&D^k&D,fe=N&P^N&L^P&L,ge=(O>>>28|N<<4)^(O<<30|N>>>2)^(O<<25|N>>>7),me=(N>>>28|O<<4)^(N<<30|O>>>2)^(N<<25|O>>>7),_e=(M>>>14|x<<18)^(M>>>18|x<<14)^(M<<23|x>>>9),Ee=(x>>>14|M<<18)^(x>>>18|M<<14)^(x<<23|M>>>9),ve=c[G],ye=ve.high,be=ve.low,Ce=j+_e+((de=Q+Ee)>>>0<Q>>>0?1:0),Se=me+fe;j=V,Q=H,V=F,H=$,F=M,$=x,M=B+(Ce=(Ce=(Ce=Ce+Ae+((de+=pe)>>>0<pe>>>0?1:0))+ye+((de+=be)>>>0<be>>>0?1:0))+W+((de+=K)>>>0<K>>>0?1:0))+((x=U+de|0)>>>0<U>>>0?1:0)|0,B=D,U=L,D=k,L=P,k=O,P=N,O=Ce+(ge+he+(Se>>>0<me>>>0?1:0))+((N=de+Se|0)>>>0<de>>>0?1:0)|0}h=r.low=h+N,r.high=p+O+(h>>>0<N>>>0?1:0),g=o.low=g+P,o.high=f+k+(g>>>0<P>>>0?1:0),_=i.low=_+L,i.high=m+D+(_>>>0<L>>>0?1:0),v=a.low=v+U,a.high=E+B+(v>>>0<U>>>0?1:0),b=s.low=b+x,s.high=y+M+(b>>>0<x>>>0?1:0),S=u.low=S+$,u.high=C+F+(S>>>0<$>>>0?1:0),T=d.low=T+H,d.high=w+V+(T>>>0<H>>>0?1:0),R=A.low=R+Q,A.high=I+j+(R>>>0<Q>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[30+(r+128>>>10<<5)]=Math.floor(n/4294967296),t[31+(r+128>>>10<<5)]=n,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});t.SHA512=n._createHelper(u),t.HmacSHA512=n._createHmacHelper(u)}(),e.SHA512)),sha512.exports;var e}var sha384={exports:{}},hasRequiredSha384;function requireSha384(){return hasRequiredSha384||(hasRequiredSha384=1,sha384.exports=(s=requireCore(),requireX64Core(),requireSha512(),t=(e=s).x64,n=t.Word,r=t.WordArray,o=e.algo,i=o.SHA512,a=o.SHA384=i.extend({_doReset:function(){this._hash=new r.init([new n.init(3418070365,3238371032),new n.init(1654270250,914150663),new n.init(2438529370,812702999),new n.init(355462360,4144912697),new n.init(1731405415,4290775857),new n.init(2394180231,1750603025),new n.init(3675008525,1694076839),new n.init(1203062813,3204075428)])},_doFinalize:function(){var e=i._doFinalize.call(this);return e.sigBytes-=16,e}}),e.SHA384=i._createHelper(a),e.HmacSHA384=i._createHmacHelper(a),s.SHA384)),sha384.exports;var e,t,n,r,o,i,a,s}var sha3={exports:{}},hasRequiredSha3;function requireSha3(){return hasRequiredSha3||(hasRequiredSha3=1,sha3.exports=(e=requireCore(),requireX64Core(),function(t){var n=e,r=n.lib,o=r.WordArray,i=r.Hasher,a=n.x64.Word,s=n.algo,c=[],l=[],u=[];!function(){for(var e=1,t=0,n=0;n<24;n++){c[e+5*t]=(n+1)*(n+2)/2%64;var r=(2*e+3*t)%5;e=t%5,t=r}for(e=0;e<5;e++)for(t=0;t<5;t++)l[e+5*t]=t+(2*e+3*t)%5*5;for(var o=1,i=0;i<24;i++){for(var s=0,d=0,A=0;A<7;A++){if(1&o){var p=(1<<A)-1;p<32?d^=1<<p:s^=1<<p-32}128&o?o=o<<1^113:o<<=1}u[i]=a.create(s,d)}}();var d=[];!function(){for(var e=0;e<25;e++)d[e]=a.create()}();var A=s.SHA3=i.extend({cfg:i.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new a.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var n=this._state,r=this.blockSize/2,o=0;o<r;o++){var i=e[t+2*o],a=e[t+2*o+1];i=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),(R=n[o]).high^=a,R.low^=i}for(var s=0;s<24;s++){for(var A=0;A<5;A++){for(var p=0,h=0,f=0;f<5;f++)p^=(R=n[A+5*f]).high,h^=R.low;var g=d[A];g.high=p,g.low=h}for(A=0;A<5;A++){var m=d[(A+4)%5],_=d[(A+1)%5],E=_.high,v=_.low;for(p=m.high^(E<<1|v>>>31),h=m.low^(v<<1|E>>>31),f=0;f<5;f++)(R=n[A+5*f]).high^=p,R.low^=h}for(var y=1;y<25;y++){var b=(R=n[y]).high,C=R.low,S=c[y];S<32?(p=b<<S|C>>>32-S,h=C<<S|b>>>32-S):(p=C<<S-32|b>>>64-S,h=b<<S-32|C>>>64-S);var w=d[l[y]];w.high=p,w.low=h}var T=d[0],I=n[0];for(T.high=I.high,T.low=I.low,A=0;A<5;A++)for(f=0;f<5;f++){var R=n[y=A+5*f],O=d[y],N=d[(A+1)%5+5*f],k=d[(A+2)%5+5*f];R.high=O.high^~N.high&k.high,R.low=O.low^~N.low&k.low}R=n[0];var P=u[s];R.high^=P.high,R.low^=P.low}},_doFinalize:function(){var e=this._data,n=e.words;this._nDataBytes;var r=8*e.sigBytes,i=32*this.blockSize;n[r>>>5]|=1<<24-r%32,n[(t.ceil((r+1)/i)*i>>>5)-1]|=128,e.sigBytes=4*n.length,this._process();for(var a=this._state,s=this.cfg.outputLength/8,c=s/8,l=[],u=0;u<c;u++){var d=a[u],A=d.high,p=d.low;A=16711935&(A<<8|A>>>24)|4278255360&(A<<24|A>>>8),p=16711935&(p<<8|p>>>24)|4278255360&(p<<24|p>>>8),l.push(p),l.push(A)}return new o.init(l,s)},clone:function(){for(var e=i.clone.call(this),t=e._state=this._state.slice(0),n=0;n<25;n++)t[n]=t[n].clone();return e}});n.SHA3=i._createHelper(A),n.HmacSHA3=i._createHmacHelper(A)}(Math),e.SHA3)),sha3.exports;var e}var ripemd160={exports:{}},hasRequiredRipemd160;function requireRipemd160(){return hasRequiredRipemd160||(hasRequiredRipemd160=1,ripemd160.exports=(e=requireCore(),
/** @preserve
      			(c) 2012 by Cdric Mesnil. All rights reserved.
      
      			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:
      
      			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
      			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
      
      			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
      			*/
function(){var t=e,n=t.lib,r=n.WordArray,o=n.Hasher,i=t.algo,a=r.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),s=r.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),c=r.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),l=r.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),u=r.create([0,1518500249,1859775393,2400959708,2840853838]),d=r.create([1352829926,1548603684,1836072691,2053994217,0]),A=i.RIPEMD160=o.extend({_doReset:function(){this._hash=r.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=t+n,o=e[r];e[r]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}var i,A,E,v,y,b,C,S,w,T,I,R=this._hash.words,O=u.words,N=d.words,k=a.words,P=s.words,D=c.words,L=l.words;for(b=i=R[0],C=A=R[1],S=E=R[2],w=v=R[3],T=y=R[4],n=0;n<80;n+=1)I=i+e[t+k[n]]|0,I+=n<16?p(A,E,v)+O[0]:n<32?h(A,E,v)+O[1]:n<48?f(A,E,v)+O[2]:n<64?g(A,E,v)+O[3]:m(A,E,v)+O[4],I=(I=_(I|=0,D[n]))+y|0,i=y,y=v,v=_(E,10),E=A,A=I,I=b+e[t+P[n]]|0,I+=n<16?m(C,S,w)+N[0]:n<32?g(C,S,w)+N[1]:n<48?f(C,S,w)+N[2]:n<64?h(C,S,w)+N[3]:p(C,S,w)+N[4],I=(I=_(I|=0,L[n]))+T|0,b=T,T=w,w=_(S,10),S=C,C=I;I=R[1]+E+w|0,R[1]=R[2]+v+T|0,R[2]=R[3]+y+b|0,R[3]=R[4]+i+C|0,R[4]=R[0]+A+S|0,R[0]=I},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(t.length+1),this._process();for(var o=this._hash,i=o.words,a=0;a<5;a++){var s=i[a];i[a]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}return o},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});function p(e,t,n){return e^t^n}function h(e,t,n){return e&t|~e&n}function f(e,t,n){return(e|~t)^n}function g(e,t,n){return e&n|t&~n}function m(e,t,n){return e^(t|~n)}function _(e,t){return e<<t|e>>>32-t}t.RIPEMD160=o._createHelper(A),t.HmacRIPEMD160=o._createHmacHelper(A)}(),e.RIPEMD160)),ripemd160.exports;var e}var hmac={exports:{}},hasRequiredHmac;function requireHmac(){return hasRequiredHmac||(hasRequiredHmac=1,hmac.exports=(e=requireCore(),n=(t=e).lib.Base,r=t.enc.Utf8,void(t.algo.HMAC=n.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=r.parse(t));var n=e.blockSize,o=4*n;t.sigBytes>o&&(t=e.finalize(t)),t.clamp();for(var i=this._oKey=t.clone(),a=this._iKey=t.clone(),s=i.words,c=a.words,l=0;l<n;l++)s[l]^=1549556828,c[l]^=909522486;i.sigBytes=a.sigBytes=o,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})))),hmac.exports;var e,t,n,r}var pbkdf2={exports:{}},hasRequiredPbkdf2;function requirePbkdf2(){return hasRequiredPbkdf2||(hasRequiredPbkdf2=1,pbkdf2.exports=(c=requireCore(),requireSha256(),requireHmac(),t=(e=c).lib,n=t.Base,r=t.WordArray,o=e.algo,i=o.SHA256,a=o.HMAC,s=o.PBKDF2=n.extend({cfg:n.extend({keySize:4,hasher:i,iterations:25e4}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,o=a.create(n.hasher,e),i=r.create(),s=r.create([1]),c=i.words,l=s.words,u=n.keySize,d=n.iterations;c.length<u;){var A=o.update(t).finalize(s);o.reset();for(var p=A.words,h=p.length,f=A,g=1;g<d;g++){f=o.finalize(f),o.reset();for(var m=f.words,_=0;_<h;_++)p[_]^=m[_]}i.concat(A),l[0]++}return i.sigBytes=4*u,i}}),e.PBKDF2=function(e,t,n){return s.create(n).compute(e,t)},c.PBKDF2)),pbkdf2.exports;var e,t,n,r,o,i,a,s,c}var evpkdf={exports:{}},hasRequiredEvpkdf;function requireEvpkdf(){return hasRequiredEvpkdf||(hasRequiredEvpkdf=1,evpkdf.exports=(s=requireCore(),requireSha1(),requireHmac(),t=(e=s).lib,n=t.Base,r=t.WordArray,o=e.algo,i=o.MD5,a=o.EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:i,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n,o=this.cfg,i=o.hasher.create(),a=r.create(),s=a.words,c=o.keySize,l=o.iterations;s.length<c;){n&&i.update(n),n=i.update(e).finalize(t),i.reset();for(var u=1;u<l;u++)n=i.finalize(n),i.reset();a.concat(n)}return a.sigBytes=4*c,a}}),e.EvpKDF=function(e,t,n){return a.create(n).compute(e,t)},s.EvpKDF)),evpkdf.exports;var e,t,n,r,o,i,a,s}var cipherCore={exports:{}},hasRequiredCipherCore;function requireCipherCore(){return hasRequiredCipherCore||(hasRequiredCipherCore=1,cipherCore.exports=(e=requireCore(),requireEvpkdf(),void(e.lib.Cipher||function(t){var n=e,r=n.lib,o=r.Base,i=r.WordArray,a=r.BufferedBlockAlgorithm,s=n.enc;s.Utf8;var c=s.Base64,l=n.algo.EvpKDF,u=r.Cipher=a.extend({cfg:o.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){a.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?E:m}return function(t){return{encrypt:function(n,r,o){return e(r).encrypt(t,n,r,o)},decrypt:function(n,r,o){return e(r).decrypt(t,n,r,o)}}}}()});r.StreamCipher=u.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var d=n.mode={},A=r.BlockCipherMode=o.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),p=d.CBC=function(){var e=A.extend();function n(e,n,r){var o,i=this._iv;i?(o=i,this._iv=t):o=this._prevBlock;for(var a=0;a<r;a++)e[n+a]^=o[a]}return e.Encryptor=e.extend({processBlock:function(e,t){var r=this._cipher,o=r.blockSize;n.call(this,e,t,o),r.encryptBlock(e,t),this._prevBlock=e.slice(t,t+o)}}),e.Decryptor=e.extend({processBlock:function(e,t){var r=this._cipher,o=r.blockSize,i=e.slice(t,t+o);r.decryptBlock(e,t),n.call(this,e,t,o),this._prevBlock=i}}),e}(),h=(n.pad={}).Pkcs7={pad:function(e,t){for(var n=4*t,r=n-e.sigBytes%n,o=r<<24|r<<16|r<<8|r,a=[],s=0;s<r;s+=4)a.push(o);var c=i.create(a,r);e.concat(c)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}};r.BlockCipher=u.extend({cfg:u.cfg.extend({mode:p,padding:h}),reset:function(){var e;u.reset.call(this);var t=this.cfg,n=t.iv,r=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=r.createEncryptor:(e=r.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,n&&n.words):(this._mode=e.call(r,this,n&&n.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4});var f=r.CipherParams=o.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),g=(n.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,n=e.salt;return(n?i.create([1398893684,1701076831]).concat(n).concat(t):t).toString(c)},parse:function(e){var t,n=c.parse(e),r=n.words;return 1398893684==r[0]&&1701076831==r[1]&&(t=i.create(r.slice(2,4)),r.splice(0,4),n.sigBytes-=16),f.create({ciphertext:n,salt:t})}},m=r.SerializableCipher=o.extend({cfg:o.extend({format:g}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var o=e.createEncryptor(n,r),i=o.finalize(t),a=o.cfg;return f.create({ciphertext:i,key:n,iv:a.iv,algorithm:e,mode:a.mode,padding:a.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),_=(n.kdf={}).OpenSSL={execute:function(e,t,n,r,o){if(r||(r=i.random(8)),o)a=l.create({keySize:t+n,hasher:o}).compute(e,r);else var a=l.create({keySize:t+n}).compute(e,r);var s=i.create(a.words.slice(t),4*n);return a.sigBytes=4*t,f.create({key:a,iv:s,salt:r})}},E=r.PasswordBasedCipher=m.extend({cfg:m.cfg.extend({kdf:_}),encrypt:function(e,t,n,r){var o=(r=this.cfg.extend(r)).kdf.execute(n,e.keySize,e.ivSize,r.salt,r.hasher);r.iv=o.iv;var i=m.encrypt.call(this,e,t,o.key,r);return i.mixIn(o),i},decrypt:function(e,t,n,r){r=this.cfg.extend(r),t=this._parse(t,r.format);var o=r.kdf.execute(n,e.keySize,e.ivSize,t.salt,r.hasher);return r.iv=o.iv,m.decrypt.call(this,e,t,o.key,r)}})}()))),cipherCore.exports;var e}var modeCfb={exports:{}},hasRequiredModeCfb;function requireModeCfb(){return hasRequiredModeCfb||(hasRequiredModeCfb=1,modeCfb.exports=(e=requireCore(),requireCipherCore(),e.mode.CFB=function(){var t=e.lib.BlockCipherMode.extend();function n(e,t,n,r){var o,i=this._iv;i?(o=i.slice(0),this._iv=void 0):o=this._prevBlock,r.encryptBlock(o,0);for(var a=0;a<n;a++)e[t+a]^=o[a]}return t.Encryptor=t.extend({processBlock:function(e,t){var r=this._cipher,o=r.blockSize;n.call(this,e,t,o,r),this._prevBlock=e.slice(t,t+o)}}),t.Decryptor=t.extend({processBlock:function(e,t){var r=this._cipher,o=r.blockSize,i=e.slice(t,t+o);n.call(this,e,t,o,r),this._prevBlock=i}}),t}(),e.mode.CFB)),modeCfb.exports;var e}var modeCtr={exports:{}},hasRequiredModeCtr;function requireModeCtr(){return hasRequiredModeCtr||(hasRequiredModeCtr=1,modeCtr.exports=(n=requireCore(),requireCipherCore(),n.mode.CTR=(e=n.lib.BlockCipherMode.extend(),t=e.Encryptor=e.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,o=this._iv,i=this._counter;o&&(i=this._counter=o.slice(0),this._iv=void 0);var a=i.slice(0);n.encryptBlock(a,0),i[r-1]=i[r-1]+1|0;for(var s=0;s<r;s++)e[t+s]^=a[s]}}),e.Decryptor=t,e),n.mode.CTR)),modeCtr.exports;var e,t,n}var modeCtrGladman={exports:{}},hasRequiredModeCtrGladman;function requireModeCtrGladman(){return hasRequiredModeCtrGladman||(hasRequiredModeCtrGladman=1,modeCtrGladman.exports=(e=requireCore(),requireCipherCore(),
/** @preserve
       * Counter block mode compatible with  Dr Brian Gladman fileenc.c
       * derived from CryptoJS.mode.CTR
       * Jan Hruby jhruby.web@gmail.com
       */
e.mode.CTRGladman=function(){var t=e.lib.BlockCipherMode.extend();function n(e){if(255&~(e>>24))e+=1<<24;else{var t=e>>16&255,n=e>>8&255,r=255&e;255===t?(t=0,255===n?(n=0,255===r?r=0:++r):++n):++t,e=0,e+=t<<16,e+=n<<8,e+=r}return e}function r(e){return 0===(e[0]=n(e[0]))&&(e[1]=n(e[1])),e}var o=t.Encryptor=t.extend({processBlock:function(e,t){var n=this._cipher,o=n.blockSize,i=this._iv,a=this._counter;i&&(a=this._counter=i.slice(0),this._iv=void 0),r(a);var s=a.slice(0);n.encryptBlock(s,0);for(var c=0;c<o;c++)e[t+c]^=s[c]}});return t.Decryptor=o,t}(),e.mode.CTRGladman)),modeCtrGladman.exports;var e}var modeOfb={exports:{}},hasRequiredModeOfb;function requireModeOfb(){return hasRequiredModeOfb||(hasRequiredModeOfb=1,modeOfb.exports=(n=requireCore(),requireCipherCore(),n.mode.OFB=(e=n.lib.BlockCipherMode.extend(),t=e.Encryptor=e.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,o=this._iv,i=this._keystream;o&&(i=this._keystream=o.slice(0),this._iv=void 0),n.encryptBlock(i,0);for(var a=0;a<r;a++)e[t+a]^=i[a]}}),e.Decryptor=t,e),n.mode.OFB)),modeOfb.exports;var e,t,n}var modeEcb={exports:{}},hasRequiredModeEcb;function requireModeEcb(){return hasRequiredModeEcb||(hasRequiredModeEcb=1,modeEcb.exports=(t=requireCore(),requireCipherCore(),t.mode.ECB=((e=t.lib.BlockCipherMode.extend()).Encryptor=e.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),e.Decryptor=e.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),e),t.mode.ECB)),modeEcb.exports;var e,t}var padAnsix923={exports:{}},hasRequiredPadAnsix923;function requirePadAnsix923(){return hasRequiredPadAnsix923||(hasRequiredPadAnsix923=1,padAnsix923.exports=(e=requireCore(),requireCipherCore(),e.pad.AnsiX923={pad:function(e,t){var n=e.sigBytes,r=4*t,o=r-n%r,i=n+o-1;e.clamp(),e.words[i>>>2]|=o<<24-i%4*8,e.sigBytes+=o},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Ansix923)),padAnsix923.exports;var e}var padIso10126={exports:{}},hasRequiredPadIso10126;function requirePadIso10126(){return hasRequiredPadIso10126||(hasRequiredPadIso10126=1,padIso10126.exports=(e=requireCore(),requireCipherCore(),e.pad.Iso10126={pad:function(t,n){var r=4*n,o=r-t.sigBytes%r;t.concat(e.lib.WordArray.random(o-1)).concat(e.lib.WordArray.create([o<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Iso10126)),padIso10126.exports;var e}var padIso97971={exports:{}},hasRequiredPadIso97971;function requirePadIso97971(){return hasRequiredPadIso97971||(hasRequiredPadIso97971=1,padIso97971.exports=(e=requireCore(),requireCipherCore(),e.pad.Iso97971={pad:function(t,n){t.concat(e.lib.WordArray.create([2147483648],1)),e.pad.ZeroPadding.pad(t,n)},unpad:function(t){e.pad.ZeroPadding.unpad(t),t.sigBytes--}},e.pad.Iso97971)),padIso97971.exports;var e}var padZeropadding={exports:{}},hasRequiredPadZeropadding;function requirePadZeropadding(){return hasRequiredPadZeropadding||(hasRequiredPadZeropadding=1,padZeropadding.exports=(e=requireCore(),requireCipherCore(),e.pad.ZeroPadding={pad:function(e,t){var n=4*t;e.clamp(),e.sigBytes+=n-(e.sigBytes%n||n)},unpad:function(e){var t=e.words,n=e.sigBytes-1;for(n=e.sigBytes-1;n>=0;n--)if(t[n>>>2]>>>24-n%4*8&255){e.sigBytes=n+1;break}}},e.pad.ZeroPadding)),padZeropadding.exports;var e}var padNopadding={exports:{}},hasRequiredPadNopadding;function requirePadNopadding(){return hasRequiredPadNopadding||(hasRequiredPadNopadding=1,padNopadding.exports=(e=requireCore(),requireCipherCore(),e.pad.NoPadding={pad:function(){},unpad:function(){}},e.pad.NoPadding)),padNopadding.exports;var e}var formatHex={exports:{}},hasRequiredFormatHex;function requireFormatHex(){return hasRequiredFormatHex||(hasRequiredFormatHex=1,formatHex.exports=(r=requireCore(),requireCipherCore(),t=(e=r).lib.CipherParams,n=e.enc.Hex,e.format.Hex={stringify:function(e){return e.ciphertext.toString(n)},parse:function(e){var r=n.parse(e);return t.create({ciphertext:r})}},r.format.Hex)),formatHex.exports;var e,t,n,r}var aes={exports:{}},hasRequiredAes;function requireAes(){return hasRequiredAes||(hasRequiredAes=1,aes.exports=(e=requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore(),function(){var t=e,n=t.lib.BlockCipher,r=t.algo,o=[],i=[],a=[],s=[],c=[],l=[],u=[],d=[],A=[],p=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var n=0,r=0;for(t=0;t<256;t++){var h=r^r<<1^r<<2^r<<3^r<<4;h=h>>>8^255&h^99,o[n]=h,i[h]=n;var f=e[n],g=e[f],m=e[g],_=257*e[h]^16843008*h;a[n]=_<<24|_>>>8,s[n]=_<<16|_>>>16,c[n]=_<<8|_>>>24,l[n]=_,_=16843009*m^65537*g^257*f^16843008*n,u[h]=_<<24|_>>>8,d[h]=_<<16|_>>>16,A[h]=_<<8|_>>>24,p[h]=_,n?(n=f^e[e[e[m^f]]],r^=e[e[r]]):n=r=1}}();var h=[0,1,2,4,8,16,32,64,128,27,54],f=r.AES=n.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4,r=4*((this._nRounds=n+6)+1),i=this._keySchedule=[],a=0;a<r;a++)a<n?i[a]=t[a]:(l=i[a-1],a%n?n>6&&a%n==4&&(l=o[l>>>24]<<24|o[l>>>16&255]<<16|o[l>>>8&255]<<8|o[255&l]):(l=o[(l=l<<8|l>>>24)>>>24]<<24|o[l>>>16&255]<<16|o[l>>>8&255]<<8|o[255&l],l^=h[a/n|0]<<24),i[a]=i[a-n]^l);for(var s=this._invKeySchedule=[],c=0;c<r;c++){if(a=r-c,c%4)var l=i[a];else l=i[a-4];s[c]=c<4||a<=4?l:u[o[l>>>24]]^d[o[l>>>16&255]]^A[o[l>>>8&255]]^p[o[255&l]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,a,s,c,l,o)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,u,d,A,p,i),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,o,i,a,s){for(var c=this._nRounds,l=e[t]^n[0],u=e[t+1]^n[1],d=e[t+2]^n[2],A=e[t+3]^n[3],p=4,h=1;h<c;h++){var f=r[l>>>24]^o[u>>>16&255]^i[d>>>8&255]^a[255&A]^n[p++],g=r[u>>>24]^o[d>>>16&255]^i[A>>>8&255]^a[255&l]^n[p++],m=r[d>>>24]^o[A>>>16&255]^i[l>>>8&255]^a[255&u]^n[p++],_=r[A>>>24]^o[l>>>16&255]^i[u>>>8&255]^a[255&d]^n[p++];l=f,u=g,d=m,A=_}f=(s[l>>>24]<<24|s[u>>>16&255]<<16|s[d>>>8&255]<<8|s[255&A])^n[p++],g=(s[u>>>24]<<24|s[d>>>16&255]<<16|s[A>>>8&255]<<8|s[255&l])^n[p++],m=(s[d>>>24]<<24|s[A>>>16&255]<<16|s[l>>>8&255]<<8|s[255&u])^n[p++],_=(s[A>>>24]<<24|s[l>>>16&255]<<16|s[u>>>8&255]<<8|s[255&d])^n[p++],e[t]=f,e[t+1]=g,e[t+2]=m,e[t+3]=_},keySize:8});t.AES=n._createHelper(f)}(),e.AES)),aes.exports;var e}var tripledes={exports:{}},hasRequiredTripledes;function requireTripledes(){return hasRequiredTripledes||(hasRequiredTripledes=1,tripledes.exports=(e=requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore(),function(){var t=e,n=t.lib,r=n.WordArray,o=n.BlockCipher,i=t.algo,a=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],s=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],l=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],u=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],d=i.DES=o.extend({_doReset:function(){for(var e=this._key.words,t=[],n=0;n<56;n++){var r=a[n]-1;t[n]=e[r>>>5]>>>31-r%32&1}for(var o=this._subKeys=[],i=0;i<16;i++){var l=o[i]=[],u=c[i];for(n=0;n<24;n++)l[n/6|0]|=t[(s[n]-1+u)%28]<<31-n%6,l[4+(n/6|0)]|=t[28+(s[n+24]-1+u)%28]<<31-n%6;for(l[0]=l[0]<<1|l[0]>>>31,n=1;n<7;n++)l[n]=l[n]>>>4*(n-1)+3;l[7]=l[7]<<5|l[7]>>>27}var d=this._invSubKeys=[];for(n=0;n<16;n++)d[n]=o[15-n]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,n){this._lBlock=e[t],this._rBlock=e[t+1],A.call(this,4,252645135),A.call(this,16,65535),p.call(this,2,858993459),p.call(this,8,16711935),A.call(this,1,1431655765);for(var r=0;r<16;r++){for(var o=n[r],i=this._lBlock,a=this._rBlock,s=0,c=0;c<8;c++)s|=l[c][((a^o[c])&u[c])>>>0];this._lBlock=a,this._rBlock=i^s}var d=this._lBlock;this._lBlock=this._rBlock,this._rBlock=d,A.call(this,1,1431655765),p.call(this,8,16711935),p.call(this,2,858993459),A.call(this,16,65535),A.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function A(e,t){var n=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=n,this._lBlock^=n<<e}function p(e,t){var n=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=n,this._rBlock^=n<<e}t.DES=o._createHelper(d);var h=i.TripleDES=o.extend({_doReset:function(){var e=this._key.words;if(2!==e.length&&4!==e.length&&e.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var t=e.slice(0,2),n=e.length<4?e.slice(0,2):e.slice(2,4),o=e.length<6?e.slice(0,2):e.slice(4,6);this._des1=d.createEncryptor(r.create(t)),this._des2=d.createEncryptor(r.create(n)),this._des3=d.createEncryptor(r.create(o))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});t.TripleDES=o._createHelper(h)}(),e.TripleDES)),tripledes.exports;var e}var rc4={exports:{}},hasRequiredRc4;function requireRc4(){return hasRequiredRc4||(hasRequiredRc4=1,rc4.exports=(e=requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore(),function(){var t=e,n=t.lib.StreamCipher,r=t.algo,o=r.RC4=n.extend({_doReset:function(){for(var e=this._key,t=e.words,n=e.sigBytes,r=this._S=[],o=0;o<256;o++)r[o]=o;o=0;for(var i=0;o<256;o++){var a=o%n,s=t[a>>>2]>>>24-a%4*8&255;i=(i+r[o]+s)%256;var c=r[o];r[o]=r[i],r[i]=c}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=i.call(this)},keySize:8,ivSize:0});function i(){for(var e=this._S,t=this._i,n=this._j,r=0,o=0;o<4;o++){n=(n+e[t=(t+1)%256])%256;var i=e[t];e[t]=e[n],e[n]=i,r|=e[(e[t]+e[n])%256]<<24-8*o}return this._i=t,this._j=n,r}t.RC4=n._createHelper(o);var a=r.RC4Drop=o.extend({cfg:o.cfg.extend({drop:192}),_doReset:function(){o._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)i.call(this)}});t.RC4Drop=n._createHelper(a)}(),e.RC4)),rc4.exports;var e}var rabbit={exports:{}},hasRequiredRabbit;function requireRabbit(){return hasRequiredRabbit||(hasRequiredRabbit=1,rabbit.exports=(e=requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore(),function(){var t=e,n=t.lib.StreamCipher,r=t.algo,o=[],i=[],a=[],s=r.Rabbit=n.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,n=0;n<4;n++)e[n]=16711935&(e[n]<<8|e[n]>>>24)|4278255360&(e[n]<<24|e[n]>>>8);var r=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],o=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];for(this._b=0,n=0;n<4;n++)c.call(this);for(n=0;n<8;n++)o[n]^=r[n+4&7];if(t){var i=t.words,a=i[0],s=i[1],l=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),u=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),d=l>>>16|4294901760&u,A=u<<16|65535&l;for(o[0]^=l,o[1]^=d,o[2]^=u,o[3]^=A,o[4]^=l,o[5]^=d,o[6]^=u,o[7]^=A,n=0;n<4;n++)c.call(this)}},_doProcessBlock:function(e,t){var n=this._X;c.call(this),o[0]=n[0]^n[5]>>>16^n[3]<<16,o[1]=n[2]^n[7]>>>16^n[5]<<16,o[2]=n[4]^n[1]>>>16^n[7]<<16,o[3]=n[6]^n[3]>>>16^n[1]<<16;for(var r=0;r<4;r++)o[r]=16711935&(o[r]<<8|o[r]>>>24)|4278255360&(o[r]<<24|o[r]>>>8),e[t+r]^=o[r]},blockSize:4,ivSize:2});function c(){for(var e=this._X,t=this._C,n=0;n<8;n++)i[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<i[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<i[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<i[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<i[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<i[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<i[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<i[6]>>>0?1:0)|0,this._b=t[7]>>>0<i[7]>>>0?1:0,n=0;n<8;n++){var r=e[n]+t[n],o=65535&r,s=r>>>16,c=((o*o>>>17)+o*s>>>15)+s*s,l=((4294901760&r)*r|0)+((65535&r)*r|0);a[n]=c^l}e[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,e[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,e[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,e[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,e[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,e[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,e[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,e[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}t.Rabbit=n._createHelper(s)}(),e.Rabbit)),rabbit.exports;var e}var rabbitLegacy={exports:{}},hasRequiredRabbitLegacy;function requireRabbitLegacy(){return hasRequiredRabbitLegacy||(hasRequiredRabbitLegacy=1,rabbitLegacy.exports=(e=requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore(),function(){var t=e,n=t.lib.StreamCipher,r=t.algo,o=[],i=[],a=[],s=r.RabbitLegacy=n.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],r=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var o=0;o<4;o++)c.call(this);for(o=0;o<8;o++)r[o]^=n[o+4&7];if(t){var i=t.words,a=i[0],s=i[1],l=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),u=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),d=l>>>16|4294901760&u,A=u<<16|65535&l;for(r[0]^=l,r[1]^=d,r[2]^=u,r[3]^=A,r[4]^=l,r[5]^=d,r[6]^=u,r[7]^=A,o=0;o<4;o++)c.call(this)}},_doProcessBlock:function(e,t){var n=this._X;c.call(this),o[0]=n[0]^n[5]>>>16^n[3]<<16,o[1]=n[2]^n[7]>>>16^n[5]<<16,o[2]=n[4]^n[1]>>>16^n[7]<<16,o[3]=n[6]^n[3]>>>16^n[1]<<16;for(var r=0;r<4;r++)o[r]=16711935&(o[r]<<8|o[r]>>>24)|4278255360&(o[r]<<24|o[r]>>>8),e[t+r]^=o[r]},blockSize:4,ivSize:2});function c(){for(var e=this._X,t=this._C,n=0;n<8;n++)i[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<i[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<i[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<i[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<i[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<i[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<i[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<i[6]>>>0?1:0)|0,this._b=t[7]>>>0<i[7]>>>0?1:0,n=0;n<8;n++){var r=e[n]+t[n],o=65535&r,s=r>>>16,c=((o*o>>>17)+o*s>>>15)+s*s,l=((4294901760&r)*r|0)+((65535&r)*r|0);a[n]=c^l}e[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,e[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,e[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,e[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,e[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,e[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,e[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,e[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}t.RabbitLegacy=n._createHelper(s)}(),e.RabbitLegacy)),rabbitLegacy.exports;var e}var blowfish={exports:{}},hasRequiredBlowfish,CryptoJS2;function requireBlowfish(){return hasRequiredBlowfish||(hasRequiredBlowfish=1,blowfish.exports=(e=requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore(),function(){var t=e,n=t.lib.BlockCipher,r=t.algo;const o=16,i=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],a=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var s={pbox:[],sbox:[]};function c(e,t){let n=t>>24&255,r=t>>16&255,o=t>>8&255,i=255&t,a=e.sbox[0][n]+e.sbox[1][r];return a^=e.sbox[2][o],a+=e.sbox[3][i],a}function l(e,t,n){let r,i=t,a=n;for(let s=0;s<o;++s)i^=e.pbox[s],a=c(e,i)^a,r=i,i=a,a=r;return r=i,i=a,a=r,a^=e.pbox[o],i^=e.pbox[o+1],{left:i,right:a}}function u(e,t,n){let r,i=t,a=n;for(let s=o+1;s>1;--s)i^=e.pbox[s],a=c(e,i)^a,r=i,i=a,a=r;return r=i,i=a,a=r,a^=e.pbox[1],i^=e.pbox[0],{left:i,right:a}}function d(e,t,n){for(let o=0;o<4;o++){e.sbox[o]=[];for(let t=0;t<256;t++)e.sbox[o][t]=a[o][t]}let r=0;for(let a=0;a<o+2;a++)e.pbox[a]=i[a]^t[r],r++,r>=n&&(r=0);let s=0,c=0,u=0;for(let i=0;i<o+2;i+=2)u=l(e,s,c),s=u.left,c=u.right,e.pbox[i]=s,e.pbox[i+1]=c;for(let o=0;o<4;o++)for(let t=0;t<256;t+=2)u=l(e,s,c),s=u.left,c=u.right,e.sbox[o][t]=s,e.sbox[o][t+1]=c;return!0}var A=r.Blowfish=n.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4;d(s,t,n)}},encryptBlock:function(e,t){var n=l(s,e[t],e[t+1]);e[t]=n.left,e[t+1]=n.right},decryptBlock:function(e,t){var n=u(s,e[t],e[t+1]);e[t]=n.left,e[t+1]=n.right},blockSize:2,keySize:4,ivSize:2});t.Blowfish=n._createHelper(A)}(),e.Blowfish)),blowfish.exports;var e}cryptoJs.exports=(CryptoJS2=requireCore(),requireX64Core(),requireLibTypedarrays(),requireEncUtf16(),requireEncBase64(),requireEncBase64url(),requireMd5(),requireSha1(),requireSha256(),requireSha224(),requireSha512(),requireSha384(),requireSha3(),requireRipemd160(),requireHmac(),requirePbkdf2(),requireEvpkdf(),requireCipherCore(),requireModeCfb(),requireModeCtr(),requireModeCtrGladman(),requireModeOfb(),requireModeEcb(),requirePadAnsix923(),requirePadIso10126(),requirePadIso97971(),requirePadZeropadding(),requirePadNopadding(),requireFormatHex(),requireAes(),requireTripledes(),requireRc4(),requireRabbit(),requireRabbitLegacy(),requireBlowfish(),CryptoJS2);var cryptoJsExports=cryptoJs.exports;const CryptoJS=getDefaultExportFromCjs(cryptoJsExports);console.log(" const.js");const showDebug=ref(!1),domain="https://testapi.selalive.com",adjustAppToken="5tepzdaw2nb4",adjustTrackOrderEventToken="kvuydx",adjustEnvironment="sandbox",adjustSaveKey="adjustSaveKey",adjustLogoLevel="verbose",sentryEnvironment="development",sentryDsn="https://441e170787cada075eeb3ba1b1150c4f@o1293784.ingest.us.sentry.io/4508413317742592",firebaseTestConfig={apiKey:"AIzaSyAeecfNuGEmyzrWlwEKyoIFqX5DqHaTfWc",authDomain:"emma-web-test.firebaseapp.com",projectId:"emma-web-test",storageBucket:"emma-web-test.firebasestorage.app",messagingSenderId:"341626749506",appId:"1:341626749506:web:6492ee46fd2c8e667023db",measurementId:"G-6SBRZX1J2Y",vapidKey:"BJ0afilb-Qkte_YpqlBL9m3Jl9_vIpGeoOEAo48eZj3r94cu46lHiP4bl02YtTTlbE-kENMotrsDu9ijjRdBiSA"},firebaseConfig=firebaseTestConfig,brcPath={callRechargeBtn:"web_callDiamondItemRecharge",callGiftRecharge:"web_callGiftRecharge",aivRechargeBtn:"web_aivDiamondItemRecharge",aivGiftRecharge:"web_aivGiftRecharge",aivOpenVoice:"web_aivOpenVoice",chatMsgGift:"web_chatMsgGift",sendMsg:"web_chatMsgNoMoney",callNoMoney:"web_createCallNoMoney",aibCallNoMoney:"web_aib_createCallNoMoney",anchorDetailGift:"web_anchorDetailGift",rechargeCenter:"web_rechargeCenter",gameRecharge:"web_gameRecharge",callEnd:"web_callEndRecharge",homeRemain:"web_homeRecharge",homeFloat:"web_homeFloatRecharge",matchFloat:"web_matchFloatRecharge",matchHomeRemain:"web_matchHomeRecharge",matchNoMoney:"web_matchNoMoney"};function lockKey(e){return e}function lock(e){return e}function unlock(e){return e}function storeSave({key:e,value:t,success:n=()=>{},fail:r=()=>{}}){try{setStorageSync(lockKey(e),lock(t)),console.log(`${e}${JSON.stringify(t)}`),n()}catch(o){console.error(`${e}${o}`),r()}}function storeRead(e){try{const t=unlock(getStorageSync(lockKey(e)));return t&&console.log(`${e}${JSON.stringify(t)}`),t}catch(t){console.error(`${e}${t}`),storeClear(e)}return null}function storeClear(e){try{removeStorageSync(lockKey(e)),console.log(`${e}`)}catch(t){console.error(`${e}${t}`)}}var define_process_env_default={};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const stringToByteArray$1=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let o=e.charCodeAt(r);o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=63&o|128):55296==(64512&o)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(o=65536+((1023&o)<<10)+(1023&e.charCodeAt(++r)),t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=63&o|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=63&o|128)}return t},byteArrayToString=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const o=e[n++];if(o<128)t[r++]=String.fromCharCode(o);else if(o>191&&o<224){const i=e[n++];t[r++]=String.fromCharCode((31&o)<<6|63&i)}else if(o>239&&o<365){const i=((7&o)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&o)<<12|(63&i)<<6|63&a)}}return t.join("")},base64$2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<e.length;o+=3){const t=e[o],i=o+1<e.length,a=i?e[o+1]:0,s=o+2<e.length,c=s?e[o+2]:0,l=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|c>>6,A=63&c;s||(A=64,i||(d=64)),r.push(n[l],n[u],n[d],n[A])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(stringToByteArray$1(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):byteArrayToString(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<e.length;){const t=n[e.charAt(o++)],i=o<e.length?n[e.charAt(o)]:0;++o;const a=o<e.length?n[e.charAt(o)]:64;++o;const s=o<e.length?n[e.charAt(o)]:64;if(++o,null==t||null==i||null==a||null==s)throw new DecodeBase64StringError;const c=t<<2|i>>4;if(r.push(c),64!==a){const e=i<<4&240|a>>2;if(r.push(e),64!==s){const e=a<<6&192|s;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class DecodeBase64StringError extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const base64Encode=function(e){const t=stringToByteArray$1(e);return base64$2.encodeByteArray(t,!0)},base64urlEncodeWithoutPadding=function(e){return base64Encode(e).replace(/\./g,"")},base64Decode=function(e){try{return base64$2.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function getGlobal(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const getDefaultsFromGlobal=()=>getGlobal().__FIREBASE_DEFAULTS__,getDefaultsFromEnvVariable=()=>{if("undefined"==typeof process||void 0===define_process_env_default)return;const e=define_process_env_default.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0},getDefaultsFromCookie=()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&base64Decode(e[1]);return t&&JSON.parse(t)},getDefaults=()=>{try{return getDefaultsFromGlobal()||getDefaultsFromEnvVariable()||getDefaultsFromCookie()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},getDefaultEmulatorHost=e=>{var t,n;return null===(n=null===(t=getDefaults())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},getDefaultAppConfig=()=>{var e;return null===(e=getDefaults())||void 0===e?void 0:e.config},getExperimentalSetting=e=>{var t;return null===(t=getDefaults())||void 0===t?void 0:t[`_${e}`]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Deferred{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getUA(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function isMobileCordova(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(getUA())}function isCloudflareWorker(){return"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent}function isBrowserExtension(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function isReactNative(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function isIE(){const e=getUA();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function isIndexedDBAvailable(){try{return"object"==typeof indexedDB}catch(e){return!1}}function validateIndexedDBOpenable(){return new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var e;t((null===(e=o.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}))}function areCookiesEnabled(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERROR_NAME="FirebaseError";class FirebaseError extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=ERROR_NAME,Object.setPrototypeOf(this,FirebaseError.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ErrorFactory.prototype.create)}}class ErrorFactory{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,o=this.errors[e],i=o?replaceTemplate(o,n):"Error",a=`${this.serviceName}: ${i} (${r}).`;return new FirebaseError(r,a,n)}}function replaceTemplate(e,t){return e.replace(PATTERN,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}const PATTERN=/\{\$([^}]+)}/g;function isEmpty(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function deepEqual(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const o of n){if(!r.includes(o))return!1;const n=e[o],i=t[o];if(isObject$2(n)&&isObject$2(i)){if(!deepEqual(n,i))return!1}else if(n!==i)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function isObject$2(e){return null!==e&&"object"==typeof e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function querystring(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function createSubscribe(e,t){const n=new ObserverProxy(e,t);return n.subscribe.bind(n)}class ObserverProxy{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=implementsAnyMethods(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=noop$2),void 0===r.error&&(r.error=noop$2),void 0===r.complete&&(r.complete=noop$2);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),o}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!=typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function implementsAnyMethods(e,t){if("object"!=typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"==typeof e[n])return!0;return!1}function noop$2(){}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getModularInstance(e){return e&&e._delegate?e._delegate:e}class Component{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME$1="[DEFAULT]";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Provider{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Deferred;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(r)return null;throw o}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(isComponentEager(e))try{this.getOrInitializeService({instanceIdentifier:DEFAULT_ENTRY_NAME$1})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(e=DEFAULT_ENTRY_NAME$1){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e=DEFAULT_ENTRY_NAME$1){return this.instances.has(e)}getOptions(e=DEFAULT_ENTRY_NAME$1){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[o,i]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(o)&&i.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),o=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;o.add(e),this.onInitCallbacks.set(r,o);const i=this.instances.get(r);return i&&e(i,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const o of n)try{o(e,t)}catch(r){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:normalizeIdentifierForFactory(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(r){}return n||null}normalizeInstanceIdentifier(e=DEFAULT_ENTRY_NAME$1){return this.component?this.component.multipleInstances?e:DEFAULT_ENTRY_NAME$1:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function normalizeIdentifierForFactory(e){return e===DEFAULT_ENTRY_NAME$1?void 0:e}function isComponentEager(e){return"EAGER"===e.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ComponentContainer{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Provider(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LogLevel,LogLevel2;LogLevel2=LogLevel||(LogLevel={}),LogLevel2[LogLevel2.DEBUG=0]="DEBUG",LogLevel2[LogLevel2.VERBOSE=1]="VERBOSE",LogLevel2[LogLevel2.INFO=2]="INFO",LogLevel2[LogLevel2.WARN=3]="WARN",LogLevel2[LogLevel2.ERROR=4]="ERROR",LogLevel2[LogLevel2.SILENT=5]="SILENT";const levelStringToEnum={debug:LogLevel.DEBUG,verbose:LogLevel.VERBOSE,info:LogLevel.INFO,warn:LogLevel.WARN,error:LogLevel.ERROR,silent:LogLevel.SILENT},defaultLogLevel=LogLevel.INFO,ConsoleMethod={[LogLevel.DEBUG]:"log",[LogLevel.VERBOSE]:"log",[LogLevel.INFO]:"info",[LogLevel.WARN]:"warn",[LogLevel.ERROR]:"error"},defaultLogHandler=(e,t,...n)=>{if(t<e.logLevel)return;const r=(new Date).toISOString(),o=ConsoleMethod[t];if(!o)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[o](`[${r}]  ${e.name}:`,...n)};let Logger$1=class{constructor(e){this.name=e,this._logLevel=defaultLogLevel,this._logHandler=defaultLogHandler,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in LogLevel))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?levelStringToEnum[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.DEBUG,...e),this._logHandler(this,LogLevel.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.VERBOSE,...e),this._logHandler(this,LogLevel.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.INFO,...e),this._logHandler(this,LogLevel.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.WARN,...e),this._logHandler(this,LogLevel.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.ERROR,...e),this._logHandler(this,LogLevel.ERROR,...e)}};const instanceOfAny=(e,t)=>t.some((t=>e instanceof t));let idbProxyableTypes,cursorAdvanceMethods;function getIdbProxyableTypes(){return idbProxyableTypes||(idbProxyableTypes=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function getCursorAdvanceMethods(){return cursorAdvanceMethods||(cursorAdvanceMethods=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cursorRequestMap=new WeakMap,transactionDoneMap=new WeakMap,transactionStoreNamesMap=new WeakMap,transformCache=new WeakMap,reverseTransformCache=new WeakMap;function promisifyRequest(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",o),e.removeEventListener("error",i)},o=()=>{t(wrap$1(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",o),e.addEventListener("error",i)}));return t.then((t=>{t instanceof IDBCursor&&cursorRequestMap.set(t,e)})).catch((()=>{})),reverseTransformCache.set(t,e),t}function cacheDonePromiseForTransaction(e){if(transactionDoneMap.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",i),e.removeEventListener("abort",i)},o=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",o),e.addEventListener("error",i),e.addEventListener("abort",i)}));transactionDoneMap.set(e,t)}let idbProxyTraps={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return transactionDoneMap.get(e);if("objectStoreNames"===t)return e.objectStoreNames||transactionStoreNamesMap.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return wrap$1(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function replaceTraps(e){idbProxyTraps=e(idbProxyTraps)}function wrapFunction(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?getCursorAdvanceMethods().includes(e)?function(...t){return e.apply(unwrap(this),t),wrap$1(cursorRequestMap.get(this))}:function(...t){return wrap$1(e.apply(unwrap(this),t))}:function(t,...n){const r=e.call(unwrap(this),t,...n);return transactionStoreNamesMap.set(r,t.sort?t.sort():[t]),wrap$1(r)}}function transformCachableValue(e){return"function"==typeof e?wrapFunction(e):(e instanceof IDBTransaction&&cacheDonePromiseForTransaction(e),instanceOfAny(e,getIdbProxyableTypes())?new Proxy(e,idbProxyTraps):e)}function wrap$1(e){if(e instanceof IDBRequest)return promisifyRequest(e);if(transformCache.has(e))return transformCache.get(e);const t=transformCachableValue(e);return t!==e&&(transformCache.set(e,t),reverseTransformCache.set(t,e)),t}const unwrap=e=>reverseTransformCache.get(e);function openDB(e,t,{blocked:n,upgrade:r,blocking:o,terminated:i}={}){const a=indexedDB.open(e,t),s=wrap$1(a);return r&&a.addEventListener("upgradeneeded",(e=>{r(wrap$1(a.result),e.oldVersion,e.newVersion,wrap$1(a.transaction),e)})),n&&a.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),s.then((e=>{i&&e.addEventListener("close",(()=>i())),o&&e.addEventListener("versionchange",(e=>o(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),s}function deleteDB(e,{blocked:t}={}){const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",(e=>t(e.oldVersion,e))),wrap$1(n).then((()=>{}))}const readMethods=["get","getKey","getAll","getAllKeys","count"],writeMethods=["put","add","delete","clear"],cachedMethods=new Map;function getMethod(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(cachedMethods.get(t))return cachedMethods.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,o=writeMethods.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!o&&!readMethods.includes(n))return;const i=async function(e,...t){const i=this.transaction(e,o?"readwrite":"readonly");let a=i.store;return r&&(a=a.index(t.shift())),(await Promise.all([a[n](...t),o&&i.done]))[0]};return cachedMethods.set(t,i),i}replaceTraps((e=>({...e,get:(t,n,r)=>getMethod(t,n)||e.get(t,n,r),has:(t,n)=>!!getMethod(t,n)||e.has(t,n)})));
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class PlatformLoggerServiceImpl{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(isVersionServiceProvider(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}function isVersionServiceProvider(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}const name$q="@firebase/app",version$1$1="0.10.13",logger$1=new Logger$1("@firebase/app"),name$p="@firebase/app-compat",name$o="@firebase/analytics-compat",name$n="@firebase/analytics",name$m="@firebase/app-check-compat",name$l="@firebase/app-check",name$k="@firebase/auth",name$j="@firebase/auth-compat",name$i="@firebase/database",name$h="@firebase/data-connect",name$g="@firebase/database-compat",name$f="@firebase/functions",name$e="@firebase/functions-compat",name$d="@firebase/installations",name$c="@firebase/installations-compat",name$b="@firebase/messaging",name$a="@firebase/messaging-compat",name$9="@firebase/performance",name$8="@firebase/performance-compat",name$7="@firebase/remote-config",name$6="@firebase/remote-config-compat",name$5="@firebase/storage",name$4="@firebase/storage-compat",name$3$1="@firebase/firestore",name$2$1="@firebase/vertexai-preview",name$1$1="@firebase/firestore-compat",name$r="firebase",version$4="10.14.1",DEFAULT_ENTRY_NAME="[DEFAULT]",PLATFORM_LOG_STRING={[name$q]:"fire-core",[name$p]:"fire-core-compat",[name$n]:"fire-analytics",[name$o]:"fire-analytics-compat",[name$l]:"fire-app-check",[name$m]:"fire-app-check-compat",[name$k]:"fire-auth",[name$j]:"fire-auth-compat",[name$i]:"fire-rtdb",[name$h]:"fire-data-connect",[name$g]:"fire-rtdb-compat",[name$f]:"fire-fn",[name$e]:"fire-fn-compat",[name$d]:"fire-iid",[name$c]:"fire-iid-compat",[name$b]:"fire-fcm",[name$a]:"fire-fcm-compat",[name$9]:"fire-perf",[name$8]:"fire-perf-compat",[name$7]:"fire-rc",[name$6]:"fire-rc-compat",[name$5]:"fire-gcs",[name$4]:"fire-gcs-compat",[name$3$1]:"fire-fst",[name$1$1]:"fire-fst-compat",[name$2$1]:"fire-vertex","fire-js":"fire-js",[name$r]:"fire-js-all"},_apps=new Map,_serverApps=new Map,_components=new Map;function _addComponent(e,t){try{e.container.addComponent(t)}catch(n){logger$1.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function _registerComponent(e){const t=e.name;if(_components.has(t))return logger$1.debug(`There were multiple attempts to register component ${t}.`),!1;_components.set(t,e);for(const n of _apps.values())_addComponent(n,e);for(const n of _serverApps.values())_addComponent(n,e);return!0}function _getProvider(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function _isFirebaseServerApp(e){return void 0!==e.settings}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERRORS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ERROR_FACTORY$2=new ErrorFactory("app","Firebase",ERRORS);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class FirebaseAppImpl{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Component("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ERROR_FACTORY$2.create("app-deleted",{appName:this._name})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SDK_VERSION$1=version$4;function initializeApp(e,t={}){let n=e;if("object"!=typeof t){t={name:t}}const r=Object.assign({name:DEFAULT_ENTRY_NAME,automaticDataCollectionEnabled:!1},t),o=r.name;if("string"!=typeof o||!o)throw ERROR_FACTORY$2.create("bad-app-name",{appName:String(o)});if(n||(n=getDefaultAppConfig()),!n)throw ERROR_FACTORY$2.create("no-options");const i=_apps.get(o);if(i){if(deepEqual(n,i.options)&&deepEqual(r,i.config))return i;throw ERROR_FACTORY$2.create("duplicate-app",{appName:o})}const a=new ComponentContainer(o);for(const c of _components.values())a.addComponent(c);const s=new FirebaseAppImpl(n,r,a);return _apps.set(o,s),s}function getApp(e=DEFAULT_ENTRY_NAME){const t=_apps.get(e);if(!t&&e===DEFAULT_ENTRY_NAME&&getDefaultAppConfig())return initializeApp();if(!t)throw ERROR_FACTORY$2.create("no-app",{appName:e});return t}function registerVersion(e,t,n){var r;let o=null!==(r=PLATFORM_LOG_STRING[e])&&void 0!==r?r:e;n&&(o+=`-${n}`);const i=o.match(/\s|\//),a=t.match(/\s|\//);if(i||a){const e=[`Unable to register library "${o}" with version "${t}":`];return i&&e.push(`library name "${o}" contains illegal characters (whitespace or "/")`),i&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void logger$1.warn(e.join(" "))}_registerComponent(new Component(`${o}-version`,(()=>({library:o,version:t})),"VERSION"))}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME$1="firebase-heartbeat-database",DB_VERSION$1=1,STORE_NAME="firebase-heartbeat-store";let dbPromise$2=null;function getDbPromise$2(){return dbPromise$2||(dbPromise$2=openDB(DB_NAME$1,DB_VERSION$1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(STORE_NAME)}catch(n){console.warn(n)}}}).catch((e=>{throw ERROR_FACTORY$2.create("idb-open",{originalErrorMessage:e.message})}))),dbPromise$2}async function readHeartbeatsFromIndexedDB(e){try{const t=(await getDbPromise$2()).transaction(STORE_NAME),n=await t.objectStore(STORE_NAME).get(computeKey(e));return await t.done,n}catch(t){if(t instanceof FirebaseError)logger$1.warn(t.message);else{const e=ERROR_FACTORY$2.create("idb-get",{originalErrorMessage:null==t?void 0:t.message});logger$1.warn(e.message)}}}async function writeHeartbeatsToIndexedDB(e,t){try{const n=(await getDbPromise$2()).transaction(STORE_NAME,"readwrite"),r=n.objectStore(STORE_NAME);await r.put(t,computeKey(e)),await n.done}catch(n){if(n instanceof FirebaseError)logger$1.warn(n.message);else{const e=ERROR_FACTORY$2.create("idb-set",{originalErrorMessage:null==n?void 0:n.message});logger$1.warn(e.message)}}}function computeKey(e){return`${e.name}!${e.options.appId}`}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MAX_HEADER_BYTES=1024,STORED_HEARTBEAT_RETENTION_MAX_MILLIS=2592e6;class HeartbeatServiceImpl{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new HeartbeatStorageImpl(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=getUTCDateString();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=STORED_HEARTBEAT_RETENTION_MAX_MILLIS})),this._storage.overwrite(this._heartbeatsCache)}catch(n){logger$1.warn(n)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=getUTCDateString(),{heartbeatsToSend:n,unsentEntries:r}=extractHeartbeatsForHeader(this._heartbeatsCache.heartbeats),o=base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return logger$1.warn(t),""}}}function getUTCDateString(){return(new Date).toISOString().substring(0,10)}function extractHeartbeatsForHeader(e,t=MAX_HEADER_BYTES){const n=[];let r=e.slice();for(const o of e){const e=n.find((e=>e.agent===o.agent));if(e){if(e.dates.push(o.date),countBytes(n)>t){e.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),countBytes(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class HeartbeatStorageImpl{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!isIndexedDBAvailable()&&validateIndexedDBOpenable().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await readHeartbeatsFromIndexedDB(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function countBytes(e){return base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:e})).length}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function registerCoreComponents(e){_registerComponent(new Component("platform-logger",(e=>new PlatformLoggerServiceImpl(e)),"PRIVATE")),_registerComponent(new Component("heartbeat",(e=>new HeartbeatServiceImpl(e)),"PRIVATE")),registerVersion(name$q,version$1$1,e),registerVersion(name$q,version$1$1,"esm2017"),registerVersion("fire-js","")}function __rest(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function _prodErrorMap(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}registerCoreComponents(""),"function"==typeof SuppressedError&&SuppressedError;const prodErrorMap=_prodErrorMap,_DEFAULT_AUTH_ERROR_FACTORY=new ErrorFactory("auth","Firebase",_prodErrorMap()),logClient=new Logger$1("@firebase/auth");function _logWarn(e,...t){logClient.logLevel<=LogLevel.WARN&&logClient.warn(`Auth (${SDK_VERSION$1}): ${e}`,...t)}function _logError(e,...t){logClient.logLevel<=LogLevel.ERROR&&logClient.error(`Auth (${SDK_VERSION$1}): ${e}`,...t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _fail(e,...t){throw createErrorInternal(e,...t)}function _createError(e,...t){return createErrorInternal(e,...t)}function _errorWithCustomMessage(e,t,n){const r=Object.assign(Object.assign({},prodErrorMap()),{[t]:n});return new ErrorFactory("auth","Firebase",r).create(t,{appName:e.name})}function _serverAppCurrentUserOperationNotSupportedError(e){return _errorWithCustomMessage(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _assertInstanceOf(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&_fail(e,"argument-error"),_errorWithCustomMessage(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function createErrorInternal(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return _DEFAULT_AUTH_ERROR_FACTORY.create(e,...t)}function _assert(e,t,...n){if(!e)throw createErrorInternal(t,...n)}function debugFail(e){const t="INTERNAL ASSERTION FAILED: "+e;throw _logError(t),new Error(t)}function debugAssert(e,t){e||debugFail(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getCurrentUrl(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function _isHttpOrHttps(){return"http:"===_getCurrentScheme()||"https:"===_getCurrentScheme()}function _getCurrentScheme(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _isOnline(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(_isHttpOrHttps()||isBrowserExtension()||"connection"in navigator))||navigator.onLine}function _getUserLanguage(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Delay{constructor(e,t){this.shortDelay=e,this.longDelay=t,debugAssert(t>e,"Short delay should be less than long delay!"),this.isMobile=isMobileCordova()||isReactNative()}get(){return _isOnline()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _emulatorUrl(e,t){debugAssert(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FetchProvider{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:"undefined"!=typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!=typeof fetch?fetch:void debugFail("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:"undefined"!=typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!=typeof Headers?Headers:void debugFail("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:"undefined"!=typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!=typeof Response?Response:void debugFail("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SERVER_ERROR_MAP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},DEFAULT_API_TIMEOUT_MS=new Delay(3e4,6e4);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _addTidIfNecessary(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function _performApiRequest(e,t,n,r,o={}){return _performFetchWithErrorHandling(e,o,(async()=>{let o={},i={};r&&("GET"===t?i=r:o={body:JSON.stringify(r)});const a=querystring(Object.assign({key:e.config.apiKey},i)).slice(1),s=await e._getAdditionalHeaders();s["Content-Type"]="application/json",e.languageCode&&(s["X-Firebase-Locale"]=e.languageCode);const c=Object.assign({method:t,headers:s},o);return isCloudflareWorker()||(c.referrerPolicy="no-referrer"),FetchProvider.fetch()(_getFinalTarget(e,e.config.apiHost,n,a),c)}))}async function _performFetchWithErrorHandling(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},SERVER_ERROR_MAP),t);try{const t=new NetworkTimeout(e),o=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const i=await o.json();if("needConfirmation"in i)throw _makeTaggedError(e,"account-exists-with-different-credential",i);if(o.ok&&!("errorMessage"in i))return i;{const t=o.ok?i.errorMessage:i.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw _makeTaggedError(e,"credential-already-in-use",i);if("EMAIL_EXISTS"===n)throw _makeTaggedError(e,"email-already-in-use",i);if("USER_DISABLED"===n)throw _makeTaggedError(e,"user-disabled",i);const s=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw _errorWithCustomMessage(e,s,a);_fail(e,s)}}catch(o){if(o instanceof FirebaseError)throw o;_fail(e,"network-request-failed",{message:String(o)})}}async function _performSignInRequest(e,t,n,r,o={}){const i=await _performApiRequest(e,t,n,r,o);return"mfaPendingCredential"in i&&_fail(e,"multi-factor-auth-required",{_serverResponse:i}),i}function _getFinalTarget(e,t,n,r){const o=`${t}${n}?${r}`;return e.config.emulator?_emulatorUrl(e.config,o):`${e.config.apiScheme}://${o}`}class NetworkTimeout{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(_createError(this.auth,"network-request-failed"))),DEFAULT_API_TIMEOUT_MS.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function _makeTaggedError(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const o=_createError(e,t,r);return o.customData._tokenResponse=n,o}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function deleteAccount$a(e,t){return _performApiRequest(e,"POST","/v1/accounts:delete",t)}async function getAccountInfo(e,t){return _performApiRequest(e,"POST","/v1/accounts:lookup",t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function utcTimestampToDateString(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}async function getIdTokenResult(e,t=!1){const n=getModularInstance(e),r=await n.getIdToken(t),o=_parseToken(r);_assert(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const i="object"==typeof o.firebase?o.firebase:void 0,a=null==i?void 0:i.sign_in_provider;return{claims:o,token:r,authTime:utcTimestampToDateString(secondsStringToMilliseconds(o.auth_time)),issuedAtTime:utcTimestampToDateString(secondsStringToMilliseconds(o.iat)),expirationTime:utcTimestampToDateString(secondsStringToMilliseconds(o.exp)),signInProvider:a||null,signInSecondFactor:(null==i?void 0:i.sign_in_second_factor)||null}}function secondsStringToMilliseconds(e){return 1e3*Number(e)}function _parseToken(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return _logError("JWT malformed, contained fewer than 3 sections"),null;try{const e=base64Decode(n);return e?JSON.parse(e):(_logError("Failed to decode base64 JWT payload"),null)}catch(o){return _logError("Caught error parsing JWT payload as JSON",null==o?void 0:o.toString()),null}}function _tokenExpiresIn(e){const t=_parseToken(e);return _assert(t,"internal-error"),_assert(void 0!==t.exp,"internal-error"),_assert(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _logoutIfInvalidated(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof FirebaseError&&isUserInvalidated(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function isUserInvalidated({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ProactiveRefresh{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null==e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UserMetadata{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=utcTimestampToDateString(this.lastLoginAt),this.creationTime=utcTimestampToDateString(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _reloadWithoutSaving(e){var t;const n=e.auth,r=await e.getIdToken(),o=await _logoutIfInvalidated(e,getAccountInfo(n,{idToken:r}));_assert(null==o?void 0:o.users.length,n,"internal-error");const i=o.users[0];e._notifyReloadListener(i);const a=(null===(t=i.providerUserInfo)||void 0===t?void 0:t.length)?extractProviderData(i.providerUserInfo):[],s=mergeProviderData(e.providerData,a),c=e.isAnonymous,l=!(e.email&&i.passwordHash||(null==s?void 0:s.length)),u=!!c&&l,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new UserMetadata(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(e,d)}async function reload(e){const t=getModularInstance(e);await _reloadWithoutSaving(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function mergeProviderData(e,t){return[...e.filter((e=>!t.some((t=>t.providerId===e.providerId)))),...t]}function extractProviderData(e){return e.map((e=>{var{providerId:t}=e,n=__rest(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function requestStsToken(e,t){const n=await _performFetchWithErrorHandling(e,{},(async()=>{const n=querystring({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:o}=e.config,i=_getFinalTarget(e,r,"/v1/token",`key=${o}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",FetchProvider.fetch()(i,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function revokeToken(e,t){return _performApiRequest(e,"POST","/v2/accounts:revokeToken",_addTidIfNecessary(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class StsTokenManager{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_assert(e.idToken,"internal-error"),_assert(void 0!==e.idToken,"internal-error"),_assert(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):_tokenExpiresIn(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){_assert(0!==e.length,"internal-error");const t=_tokenExpiresIn(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return t||!this.accessToken||this.isExpired?(_assert(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:o}=await requestStsToken(e,t);this.updateTokensAndExpiration(n,r,Number(o))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:o}=t,i=new StsTokenManager;return n&&(_assert("string"==typeof n,"internal-error",{appName:e}),i.refreshToken=n),r&&(_assert("string"==typeof r,"internal-error",{appName:e}),i.accessToken=r),o&&(_assert("number"==typeof o,"internal-error",{appName:e}),i.expirationTime=o),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new StsTokenManager,this.toJSON())}_performRefresh(){return debugFail("not implemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function assertStringOrUndefined(e,t){_assert("string"==typeof e||void 0===e,"internal-error",{appName:t})}class UserImpl{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,o=__rest(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ProactiveRefresh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new UserMetadata(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await _logoutIfInvalidated(this,this.stsTokenManager.getToken(this.auth,e));return _assert(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return getIdTokenResult(this,e)}reload(){return reload(this)}_assign(e){this!==e&&(_assert(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new UserImpl(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){_assert(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await _reloadWithoutSaving(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_isFirebaseServerApp(this.auth.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this.auth));const e=await this.getIdToken();return await _logoutIfInvalidated(this,deleteAccount$a(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,o,i,a,s,c,l;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,A=null!==(o=t.phoneNumber)&&void 0!==o?o:void 0,p=null!==(i=t.photoURL)&&void 0!==i?i:void 0,h=null!==(a=t.tenantId)&&void 0!==a?a:void 0,f=null!==(s=t._redirectEventId)&&void 0!==s?s:void 0,g=null!==(c=t.createdAt)&&void 0!==c?c:void 0,m=null!==(l=t.lastLoginAt)&&void 0!==l?l:void 0,{uid:_,emailVerified:E,isAnonymous:v,providerData:y,stsTokenManager:b}=t;_assert(_&&b,e,"internal-error");const C=StsTokenManager.fromJSON(this.name,b);_assert("string"==typeof _,e,"internal-error"),assertStringOrUndefined(u,e.name),assertStringOrUndefined(d,e.name),_assert("boolean"==typeof E,e,"internal-error"),_assert("boolean"==typeof v,e,"internal-error"),assertStringOrUndefined(A,e.name),assertStringOrUndefined(p,e.name),assertStringOrUndefined(h,e.name),assertStringOrUndefined(f,e.name),assertStringOrUndefined(g,e.name),assertStringOrUndefined(m,e.name);const S=new UserImpl({uid:_,auth:e,email:d,emailVerified:E,displayName:u,isAnonymous:v,photoURL:p,phoneNumber:A,tenantId:h,stsTokenManager:C,createdAt:g,lastLoginAt:m});return y&&Array.isArray(y)&&(S.providerData=y.map((e=>Object.assign({},e)))),f&&(S._redirectEventId=f),S}static async _fromIdTokenResponse(e,t,n=!1){const r=new StsTokenManager;r.updateFromServerResponse(t);const o=new UserImpl({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await _reloadWithoutSaving(o),o}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];_assert(void 0!==r.localId,"internal-error");const o=void 0!==r.providerUserInfo?extractProviderData(r.providerUserInfo):[],i=!(r.email&&r.passwordHash||(null==o?void 0:o.length)),a=new StsTokenManager;a.updateFromIdToken(n);const s=new UserImpl({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:i}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new UserMetadata(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash||(null==o?void 0:o.length))};return Object.assign(s,c),s}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const instanceCache=new Map;function _getInstance(e){debugAssert(e instanceof Function,"Expected a class definition");let t=instanceCache.get(e);return t?(debugAssert(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,instanceCache.set(e,t),t)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class InMemoryPersistence{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}InMemoryPersistence.type="NONE";const inMemoryPersistence=InMemoryPersistence;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _persistenceKeyName(e,t,n){return`firebase:${e}:${t}:${n}`}class PersistenceUserManager{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:o}=this.auth;this.fullUserKey=_persistenceKeyName(this.userKey,r.apiKey,o),this.fullPersistenceKey=_persistenceKeyName("persistence",r.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?UserImpl._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new PersistenceUserManager(_getInstance(inMemoryPersistence),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let o=r[0]||_getInstance(inMemoryPersistence);const i=_persistenceKeyName(n,e.config.apiKey,e.name);let a=null;for(const l of t)try{const t=await l._get(i);if(t){const n=UserImpl._fromJSON(e,t);l!==o&&(a=n),o=l;break}}catch(c){}const s=r.filter((e=>e._shouldAllowMigration));return o._shouldAllowMigration&&s.length?(o=s[0],a&&await o._set(i,a.toJSON()),await Promise.all(t.map((async e=>{if(e!==o)try{await e._remove(i)}catch(c){}}))),new PersistenceUserManager(o,e,n)):new PersistenceUserManager(o,e,n)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getBrowserName(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(_isIEMobile(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(_isFirefox(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(_isBlackBerry(t))return"Blackberry";if(_isWebOS(t))return"Webos";if(_isSafari(t))return"Safari";if((t.includes("chrome/")||_isChromeIOS(t))&&!t.includes("edge/"))return"Chrome";if(_isAndroid(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function _isFirefox(e=getUA()){return/firefox\//i.test(e)}function _isSafari(e=getUA()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function _isChromeIOS(e=getUA()){return/crios\//i.test(e)}function _isIEMobile(e=getUA()){return/iemobile/i.test(e)}function _isAndroid(e=getUA()){return/android/i.test(e)}function _isBlackBerry(e=getUA()){return/blackberry/i.test(e)}function _isWebOS(e=getUA()){return/webos/i.test(e)}function _isIOS(e=getUA()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function _isIOSStandalone(e=getUA()){var t;return _isIOS(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}function _isIE10(){return isIE()&&10===document.documentMode}function _isMobileBrowser(e=getUA()){return _isIOS(e)||_isAndroid(e)||_isWebOS(e)||_isBlackBerry(e)||/windows phone/i.test(e)||_isIEMobile(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getClientVersion(e,t=[]){let n;switch(e){case"Browser":n=_getBrowserName(getUA());break;case"Worker":n=`${_getBrowserName(getUA())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${SDK_VERSION$1}/${r}`}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthMiddlewareQueue{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(o){r(o)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==n?void 0:n.message})}}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _getPasswordPolicy(e,t={}){return _performApiRequest(e,"GET","/v2/passwordPolicy",_addTidIfNecessary(e,t))}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MINIMUM_MIN_PASSWORD_LENGTH=6;class PasswordPolicyImpl{constructor(e){var t,n,r,o;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=i.minPasswordLength)&&void 0!==t?t:MINIMUM_MIN_PASSWORD_LENGTH,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),void 0!==i.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),void 0!==i.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),void 0!==i.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),void 0!==i.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(o=e.forceUpgradeOnSignin)&&void 0!==o&&o,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,o,i,a;const s={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,s),this.validatePasswordCharacterOptions(e,s),s.isValid&&(s.isValid=null===(t=s.meetsMinPasswordLength)||void 0===t||t),s.isValid&&(s.isValid=null===(n=s.meetsMaxPasswordLength)||void 0===n||n),s.isValid&&(s.isValid=null===(r=s.containsLowercaseLetter)||void 0===r||r),s.isValid&&(s.isValid=null===(o=s.containsUppercaseLetter)||void 0===o||o),s.isValid&&(s.isValid=null===(i=s.containsNumericCharacter)||void 0===i||i),s.isValid&&(s.isValid=null===(a=s.containsNonAlphanumericCharacter)||void 0===a||a),s}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthImpl{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Subscription(this),this.idTokenSubscription=new Subscription(this),this.beforeStateQueue=new AuthMiddlewareQueue(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_DEFAULT_AUTH_ERROR_FACTORY,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=_getInstance(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await PersistenceUserManager.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(o){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void(await this.currentUser.getIdToken())):void(await this._updateCurrentUser(e,!0)):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await getAccountInfo(this,{idToken:e}),n=await UserImpl._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(_isFirebaseServerApp(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,i=null==r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==i||!(null==a?void 0:a.user)||(r=a.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(i){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(i)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return _assert(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await _reloadWithoutSaving(e)}catch(t){if("auth/network-request-failed"!==(null==t?void 0:t.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_getUserLanguage()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_isFirebaseServerApp(this.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this));const t=e?getModularInstance(e):null;return t&&_assert(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&_assert(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return _isFirebaseServerApp(this.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _isFirebaseServerApp(this.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(_getInstance(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _getPasswordPolicy(this),t=new PasswordPolicyImpl(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ErrorFactory("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await revokeToken(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&_getInstance(e)||this._popupRedirectResolver;_assert(t,this,"argument-error"),this.redirectPersistenceManager=await PersistenceUserManager.create(this,[_getInstance(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const o="function"==typeof t?t:t.next.bind(t);let i=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(_assert(a,this,"internal-error"),a.then((()=>{i||o(this.currentUser)})),"function"==typeof t){const o=e.addObserver(t,n,r);return()=>{i=!0,o()}}{const n=e.addObserver(t);return()=>{i=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _assert(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_getClientVersion(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null==t?void 0:t.error)&&_logWarn(`Error while retrieving App Check token: ${t.error}`),null==t?void 0:t.token}}function _castAuth(e){return getModularInstance(e)}class Subscription{constructor(e){this.auth=e,this.observer=null,this.addObserver=createSubscribe((e=>this.observer=e))}get next(){return _assert(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let externalJSProvider={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _setExternalJSProvider(e){externalJSProvider=e}function _loadJS(e){return externalJSProvider.loadJS(e)}function _gapiScriptUrl(){return externalJSProvider.gapiScript}function _generateCallbackName(e){return`__${e}${Math.floor(1e6*Math.random())}`}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function initializeAuth(e,t){const n=_getProvider(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(deepEqual(n.getOptions(),null!=t?t:{}))return e;_fail(e,"already-initialized")}return n.initialize({options:t})}function _initializeAuthInstance(e,t){const n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(_getInstance);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}function connectAuthEmulator(e,t,n){const r=_castAuth(e);_assert(r._canInitEmulator,r,"emulator-config-failed"),_assert(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const o=extractProtocol(t),{host:i,port:a}=extractHostAndPort(t),s=null===a?"":`:${a}`;r.config.emulator={url:`${o}//${i}${s}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:i,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:!1})}),emitEmulatorWarning()}function extractProtocol(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function extractHostAndPort(e){const t=extractProtocol(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const e=o[1];return{host:e,port:parsePort(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:parsePort(t)}}}function parsePort(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function emitEmulatorWarning(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthCredential{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return debugFail("not implemented")}_getIdTokenResponse(e){return debugFail("not implemented")}_linkToIdToken(e,t){return debugFail("not implemented")}_getReauthenticationResolver(e){return debugFail("not implemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithIdp(e,t){return _performSignInRequest(e,"POST","/v1/accounts:signInWithIdp",_addTidIfNecessary(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IDP_REQUEST_URI$1="http://localhost";class OAuthCredential extends AuthCredential{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new OAuthCredential(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):_fail("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,o=__rest(t,["providerId","signInMethod"]);if(!n||!r)return null;const i=new OAuthCredential(n,r);return i.idToken=o.idToken||void 0,i.accessToken=o.accessToken||void 0,i.secret=o.secret,i.nonce=o.nonce,i.pendingToken=o.pendingToken||null,i}_getIdTokenResponse(e){return signInWithIdp(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,signInWithIdp(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,signInWithIdp(e,t)}buildRequest(){const e={requestUri:IDP_REQUEST_URI$1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=querystring(t)}return e}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FederatedAuthProvider{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BaseOAuthProvider extends FederatedAuthProvider{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FacebookAuthProvider extends BaseOAuthProvider{constructor(){super("facebook.com")}static credential(e){return OAuthCredential._fromParams({providerId:FacebookAuthProvider.PROVIDER_ID,signInMethod:FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return FacebookAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return FacebookAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return FacebookAuthProvider.credential(e.oauthAccessToken)}catch(t){return null}}}FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD="facebook.com",FacebookAuthProvider.PROVIDER_ID="facebook.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class GoogleAuthProvider extends BaseOAuthProvider{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return OAuthCredential._fromParams({providerId:GoogleAuthProvider.PROVIDER_ID,signInMethod:GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return GoogleAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return GoogleAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return GoogleAuthProvider.credential(t,n)}catch(r){return null}}}GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD="google.com",GoogleAuthProvider.PROVIDER_ID="google.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class GithubAuthProvider extends BaseOAuthProvider{constructor(){super("github.com")}static credential(e){return OAuthCredential._fromParams({providerId:GithubAuthProvider.PROVIDER_ID,signInMethod:GithubAuthProvider.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return GithubAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return GithubAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return GithubAuthProvider.credential(e.oauthAccessToken)}catch(t){return null}}}GithubAuthProvider.GITHUB_SIGN_IN_METHOD="github.com",GithubAuthProvider.PROVIDER_ID="github.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class TwitterAuthProvider extends BaseOAuthProvider{constructor(){super("twitter.com")}static credential(e,t){return OAuthCredential._fromParams({providerId:TwitterAuthProvider.PROVIDER_ID,signInMethod:TwitterAuthProvider.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return TwitterAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return TwitterAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return TwitterAuthProvider.credential(t,n)}catch(r){return null}}}TwitterAuthProvider.TWITTER_SIGN_IN_METHOD="twitter.com",TwitterAuthProvider.PROVIDER_ID="twitter.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class UserCredentialImpl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const o=await UserImpl._fromIdTokenResponse(e,n,r),i=providerIdForResponse(n);return new UserCredentialImpl({user:o,providerId:i,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=providerIdForResponse(n);return new UserCredentialImpl({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function providerIdForResponse(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MultiFactorError extends FirebaseError{constructor(e,t,n,r){var o;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,MultiFactorError.prototype),this.customData={appName:e.name,tenantId:null!==(o=e.tenantId)&&void 0!==o?o:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new MultiFactorError(e,t,n,r)}}function _processCredentialSavingMfaContextIfNecessary(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw MultiFactorError._fromErrorAndOperation(e,n,t,r);throw n}))}async function _link$1(e,t,n=!1){const r=await _logoutIfInvalidated(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return UserCredentialImpl._forOperation(e,"link",r)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _reauthenticate(e,t,n=!1){const{auth:r}=e;if(_isFirebaseServerApp(r.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(r));const o="reauthenticate";try{const i=await _logoutIfInvalidated(e,_processCredentialSavingMfaContextIfNecessary(r,o,t,e),n);_assert(i.idToken,r,"internal-error");const a=_parseToken(i.idToken);_assert(a,r,"internal-error");const{sub:s}=a;return _assert(e.uid===s,r,"user-mismatch"),UserCredentialImpl._forOperation(e,o,i)}catch(i){throw"auth/user-not-found"===(null==i?void 0:i.code)&&_fail(r,"user-mismatch"),i}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _signInWithCredential(e,t,n=!1){if(_isFirebaseServerApp(e.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(e));const r="signIn",o=await _processCredentialSavingMfaContextIfNecessary(e,r,t),i=await UserCredentialImpl._fromIdTokenResponse(e,r,o);return n||await e._updateCurrentUser(i.user),i}function onIdTokenChanged(e,t,n,r){return getModularInstance(e).onIdTokenChanged(t,n,r)}function beforeAuthStateChanged(e,t,n){return getModularInstance(e).beforeAuthStateChanged(t,n)}const STORAGE_AVAILABLE_KEY="__sak";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BrowserPersistenceClass{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(STORAGE_AVAILABLE_KEY,"1"),this.storage.removeItem(STORAGE_AVAILABLE_KEY),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _POLLING_INTERVAL_MS$1=1e3,IE10_LOCAL_STORAGE_SYNC_DELAY=10;class BrowserLocalPersistence extends BrowserPersistenceClass{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_isMobileBrowser(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},o=this.storage.getItem(n);_isIE10()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,IE10_LOCAL_STORAGE_SYNC_DELAY):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),_POLLING_INTERVAL_MS$1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}BrowserLocalPersistence.type="LOCAL";const browserLocalPersistence=BrowserLocalPersistence;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BrowserSessionPersistence extends BrowserPersistenceClass{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}BrowserSessionPersistence.type="SESSION";const browserSessionPersistence=BrowserSessionPersistence;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _allSettled(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Receiver{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Receiver(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:o}=t.data,i=this.handlersMap[r];if(!(null==i?void 0:i.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(i).map((async e=>e(t.origin,o))),s=await _allSettled(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:s})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function _generateEventId(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Receiver.receivers=[];class Sender{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,i;return new Promise(((a,s)=>{const c=_generateEventId("",20);r.port1.start();const l=setTimeout((()=>{s(new Error("unsupported_event"))}),n);i={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),o=setTimeout((()=>{s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(o),a(t.data.response);break;default:clearTimeout(l),clearTimeout(o),s(new Error("invalid_response"))}}},this.handlers.add(i),r.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])})).finally((()=>{i&&this.removeMessageHandler(i)}))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _window(){return window}function _setWindowLocation(e){_window().location.href=e}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _isWorker(){return void 0!==_window().WorkerGlobalScope&&"function"==typeof _window().importScripts}async function _getActiveServiceWorker(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}function _getServiceWorkerController(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}function _getWorkerGlobalScope(){return _isWorker()?self:null}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME="firebaseLocalStorageDb",DB_VERSION=1,DB_OBJECTSTORE_NAME="firebaseLocalStorage",DB_DATA_KEYPATH="fbase_key";class DBPromise{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function getObjectStore(e,t){return e.transaction([DB_OBJECTSTORE_NAME],t?"readwrite":"readonly").objectStore(DB_OBJECTSTORE_NAME)}function _deleteDatabase(){const e=indexedDB.deleteDatabase(DB_NAME);return new DBPromise(e).toPromise()}function _openDatabase(){const e=indexedDB.open(DB_NAME,DB_VERSION);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(DB_OBJECTSTORE_NAME,{keyPath:DB_DATA_KEYPATH})}catch(r){n(r)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(DB_OBJECTSTORE_NAME)?t(n):(n.close(),await _deleteDatabase(),t(await _openDatabase()))}))}))}async function _putObject(e,t,n){const r=getObjectStore(e,!0).put({[DB_DATA_KEYPATH]:t,value:n});return new DBPromise(r).toPromise()}async function getObject(e,t){const n=getObjectStore(e,!1).get(t),r=await new DBPromise(n).toPromise();return void 0===r?null:r.value}function _deleteObject(e,t){const n=getObjectStore(e,!0).delete(t);return new DBPromise(n).toPromise()}const _POLLING_INTERVAL_MS=800,_TRANSACTION_RETRY_COUNT=3;class IndexedDBLocalPersistence{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await _openDatabase()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>_TRANSACTION_RETRY_COUNT)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _isWorker()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Receiver._getInstance(_getWorkerGlobalScope()),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await _getActiveServiceWorker(),!this.activeServiceWorker)return;this.sender=new Sender(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&_getServiceWorkerController()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _openDatabase();return await _putObject(e,STORAGE_AVAILABLE_KEY,"1"),await _deleteObject(e,STORAGE_AVAILABLE_KEY),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>_putObject(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>getObject(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>_deleteObject(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=getObjectStore(e,!1).getAll();return new DBPromise(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:o}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),_POLLING_INTERVAL_MS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}IndexedDBLocalPersistence.type="LOCAL";const indexedDBLocalPersistence=IndexedDBLocalPersistence;
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function _withDefaultResolver(e,t){return t?_getInstance(t):(_assert(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Delay(3e4,6e4);class IdpCredential extends AuthCredential{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return signInWithIdp(e,this._buildIdpRequest())}_linkToIdToken(e,t){return signInWithIdp(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return signInWithIdp(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function _signIn(e){return _signInWithCredential(e.auth,new IdpCredential(e),e.bypassAuthState)}function _reauth(e){const{auth:t,user:n}=e;return _assert(n,t,"internal-error"),_reauthenticate(n,new IdpCredential(e),e.bypassAuthState)}async function _link(e){const{auth:t,user:n}=e;return _assert(n,t,"internal-error"),_link$1(n,new IdpCredential(e),e.bypassAuthState)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AbstractPopupRedirectOperation{constructor(e,t,n,r,o=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:o,error:i,type:a}=e;if(i)return void this.reject(i);const s={auth:this.auth,requestUri:t,sessionId:n,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(s))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _signIn;case"linkViaPopup":case"linkViaRedirect":return _link;case"reauthViaPopup":case"reauthViaRedirect":return _reauth;default:_fail(this.auth,"internal-error")}}resolve(e){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _POLL_WINDOW_CLOSE_TIMEOUT=new Delay(2e3,1e4);async function signInWithPopup(e,t,n){if(_isFirebaseServerApp(e.app))return Promise.reject(_createError(e,"operation-not-supported-in-this-environment"));const r=_castAuth(e);_assertInstanceOf(e,t,FederatedAuthProvider);const o=_withDefaultResolver(r,n);return new PopupOperation(r,"signInViaPopup",t,o).executeNotNull()}class PopupOperation extends AbstractPopupRedirectOperation{constructor(e,t,n,r,o){super(e,t,r,o),this.provider=n,this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction&&PopupOperation.currentPopupAction.cancel(),PopupOperation.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return _assert(e,this.auth,"internal-error"),e}async onExecution(){debugAssert(1===this.filter.length,"Popup operations only handle one event");const e=_generateEventId();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(_createError(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(_createError(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(_createError(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,_POLL_WINDOW_CLOSE_TIMEOUT.get())};e()}}PopupOperation.currentPopupAction=null;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const PENDING_REDIRECT_KEY="pendingRedirect",redirectOutcomeMap=new Map;class RedirectAction extends AbstractPopupRedirectOperation{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=redirectOutcomeMap.get(this.auth._key());if(!e){try{const t=await _getAndClearPendingRedirectStatus(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}redirectOutcomeMap.set(this.auth._key(),e)}return this.bypassAuthState||redirectOutcomeMap.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function _getAndClearPendingRedirectStatus(e,t){const n=pendingRedirectKey(t),r=resolverPersistence(e);if(!(await r._isAvailable()))return!1;const o="true"===await r._get(n);return await r._remove(n),o}function _overrideRedirectResult(e,t){redirectOutcomeMap.set(e._key(),t)}function resolverPersistence(e){return _getInstance(e._redirectPersistence)}function pendingRedirectKey(e){return _persistenceKeyName(PENDING_REDIRECT_KEY,e.config.apiKey,e.name)}async function _getRedirectResult(e,t,n=!1){if(_isFirebaseServerApp(e.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(e));const r=_castAuth(e),o=_withDefaultResolver(r,t),i=new RedirectAction(r,o,n),a=await i.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EVENT_DUPLICATION_CACHE_DURATION_MS=6e5;class AuthEventManager{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!isRedirectEvent(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!isNullRedirectEvent(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(_createError(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=EVENT_DUPLICATION_CACHE_DURATION_MS&&this.cachedEventUids.clear(),this.cachedEventUids.has(eventUid(e))}saveEventToCache(e){this.cachedEventUids.add(eventUid(e)),this.lastProcessedEventTime=Date.now()}}function eventUid(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function isNullRedirectEvent({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}function isRedirectEvent(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return isNullRedirectEvent(e);default:return!1}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _getProjectConfig(e,t={}){return _performApiRequest(e,"GET","/v1/projects",t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP_ADDRESS_REGEX=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HTTP_REGEX=/^https?/;async function _validateOrigin(e){if(e.config.emulator)return;const{authorizedDomains:t}=await _getProjectConfig(e);for(const r of t)try{if(matchDomain(r))return}catch(n){}_fail(e,"unauthorized-domain")}function matchDomain(e){const t=_getCurrentUrl(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return""===o.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&o.hostname===r}if(!HTTP_REGEX.test(n))return!1;if(IP_ADDRESS_REGEX.test(e))return r===e;const o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NETWORK_TIMEOUT=new Delay(3e4,6e4);function resetUnloadedGapiModules(){const e=_window().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function loadGapi(e){return new Promise(((t,n)=>{var r,o,i;function a(){resetUnloadedGapiModules(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{resetUnloadedGapiModules(),n(_createError(e,"network-request-failed"))},timeout:NETWORK_TIMEOUT.get()})}if(null===(o=null===(r=_window().gapi)||void 0===r?void 0:r.iframes)||void 0===o?void 0:o.Iframe)t(gapi.iframes.getContext());else{if(!(null===(i=_window().gapi)||void 0===i?void 0:i.load)){const t=_generateCallbackName("iframefcb");return _window()[t]=()=>{gapi.load?a():n(_createError(e,"network-request-failed"))},_loadJS(`${_gapiScriptUrl()}?onload=${t}`).catch((e=>n(e)))}a()}})).catch((e=>{throw cachedGApiLoader=null,e}))}let cachedGApiLoader=null;function _loadGapi(e){return cachedGApiLoader=cachedGApiLoader||loadGapi(e),cachedGApiLoader}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PING_TIMEOUT=new Delay(5e3,15e3),IFRAME_PATH="__/auth/iframe",EMULATED_IFRAME_PATH="emulator/auth/iframe",IFRAME_ATTRIBUTES={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EID_FROM_APIHOST=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function getIframeUrl(e){const t=e.config;_assert(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?_emulatorUrl(t,EMULATED_IFRAME_PATH):`https://${e.config.authDomain}/${IFRAME_PATH}`,r={apiKey:t.apiKey,appName:e.name,v:SDK_VERSION$1},o=EID_FROM_APIHOST.get(e.config.apiHost);o&&(r.eid=o);const i=e._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${querystring(r).slice(1)}`}async function _openIframe(e){const t=await _loadGapi(e),n=_window().gapi;return _assert(n,e,"internal-error"),t.open({where:document.body,url:getIframeUrl(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:IFRAME_ATTRIBUTES,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const o=_createError(e,"network-request-failed"),i=_window().setTimeout((()=>{r(o)}),PING_TIMEOUT.get());function a(){_window().clearTimeout(i),n(t)}t.ping(a).then(a,(()=>{r(o)}))}))))}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BASE_POPUP_OPTIONS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},DEFAULT_WIDTH=500,DEFAULT_HEIGHT=600,TARGET_BLANK="_blank",FIREFOX_EMPTY_URL="http://localhost";class AuthPopup{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function _open(e,t,n,r=DEFAULT_WIDTH,o=DEFAULT_HEIGHT){const i=Math.max((window.screen.availHeight-o)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let s="";const c=Object.assign(Object.assign({},BASE_POPUP_OPTIONS),{width:r.toString(),height:o.toString(),top:i,left:a}),l=getUA().toLowerCase();n&&(s=_isChromeIOS(l)?TARGET_BLANK:n),_isFirefox(l)&&(t=t||FIREFOX_EMPTY_URL,c.scrollbars="yes");const u=Object.entries(c).reduce(((e,[t,n])=>`${e}${t}=${n},`),"");if(_isIOSStandalone(l)&&"_self"!==s)return openAsNewWindowIOS(t||"",s),new AuthPopup(null);const d=window.open(t||"",s,u);_assert(d,e,"popup-blocked");try{d.focus()}catch(A){}return new AuthPopup(d)}function openAsNewWindowIOS(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WIDGET_PATH="__/auth/handler",EMULATOR_WIDGET_PATH="emulator/auth/handler",FIREBASE_APP_CHECK_FRAGMENT_ID=encodeURIComponent("fac");async function _getRedirectUrl(e,t,n,r,o,i){_assert(e.config.authDomain,e,"auth-domain-config-required"),_assert(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:SDK_VERSION$1,eventId:o};if(t instanceof FederatedAuthProvider){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",isEmpty(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries({}))a[e]=t}if(t instanceof BaseOAuthProvider){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const s=a;for(const u of Object.keys(s))void 0===s[u]&&delete s[u];const c=await e._getAppCheckToken(),l=c?`#${FIREBASE_APP_CHECK_FRAGMENT_ID}=${encodeURIComponent(c)}`:"";return`${getHandlerBase(e)}?${querystring(s).slice(1)}${l}`}function getHandlerBase({config:e}){return e.emulator?_emulatorUrl(e,EMULATOR_WIDGET_PATH):`https://${e.authDomain}/${WIDGET_PATH}`}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WEB_STORAGE_SUPPORT_KEY="webStorageSupport";class BrowserPopupRedirectResolver{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=browserSessionPersistence,this._completeRedirectFn=_getRedirectResult,this._overrideRedirectResult=_overrideRedirectResult}async _openPopup(e,t,n,r){var o;debugAssert(null===(o=this.eventManagers[e._key()])||void 0===o?void 0:o.manager,"_initialize() not called before _openPopup()");return _open(e,await _getRedirectUrl(e,t,n,_getCurrentUrl(),r),_generateEventId())}async _openRedirect(e,t,n,r){await this._originValidation(e);return _setWindowLocation(await _getRedirectUrl(e,t,n,_getCurrentUrl(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(debugAssert(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await _openIframe(e),n=new AuthEventManager(e);return t.register("authEvent",(t=>{_assert(null==t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(WEB_STORAGE_SUPPORT_KEY,{type:WEB_STORAGE_SUPPORT_KEY},(n=>{var r;const o=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r[WEB_STORAGE_SUPPORT_KEY];void 0!==o&&t(!!o),_fail(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=_validateOrigin(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return _isMobileBrowser()||_isSafari()||_isIOS()}}const browserPopupRedirectResolver=BrowserPopupRedirectResolver;var name$3="@firebase/auth",version$3="1.7.9";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class AuthInterop{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){_assert(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getVersionForPlatform(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function registerAuth(e){_registerComponent(new Component("auth",((t,{options:n})=>{const r=t.getProvider("app").getImmediate(),o=t.getProvider("heartbeat"),i=t.getProvider("app-check-internal"),{apiKey:a,authDomain:s}=r.options;_assert(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:a,authDomain:s,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_getClientVersion(e)},l=new AuthImpl(r,o,i,c);return _initializeAuthInstance(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),_registerComponent(new Component("auth-internal",(e=>{const t=_castAuth(e.getProvider("auth").getImmediate());return new AuthInterop(t)}),"PRIVATE").setInstantiationMode("EXPLICIT")),registerVersion(name$3,version$3,getVersionForPlatform(e)),registerVersion(name$3,version$3,"esm2017")}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ID_TOKEN_MAX_AGE=300,authIdTokenMaxAge=getExperimentalSetting("authIdTokenMaxAge")||DEFAULT_ID_TOKEN_MAX_AGE;let lastPostedIdToken=null;const mintCookieFactory=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&((new Date).getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>authIdTokenMaxAge)return;const o=null==n?void 0:n.token;lastPostedIdToken!==o&&(lastPostedIdToken=o,await fetch(e,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function getAuth(e=getApp()){const t=_getProvider(e,"auth");if(t.isInitialized())return t.getImmediate();const n=initializeAuth(e,{popupRedirectResolver:browserPopupRedirectResolver,persistence:[indexedDBLocalPersistence,browserLocalPersistence,browserSessionPersistence]}),r=getExperimentalSetting("authTokenSyncURL");if(r&&"boolean"==typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=mintCookieFactory(e.toString());beforeAuthStateChanged(n,t,(()=>t(n.currentUser))),onIdTokenChanged(n,(e=>t(e)))}}const o=getDefaultEmulatorHost("auth");return o&&connectAuthEmulator(n,`http://${o}`),n}function getScriptParentElement(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}_setExternalJSProvider({loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=_createError("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",getScriptParentElement().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),registerAuth("Browser");const DEBUG_BUILD$4="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,SDK_VERSION="8.42.0",GLOBAL_OBJ=globalThis;function getGlobalSingleton(e,t,n){const r=GLOBAL_OBJ,o=r.__SENTRY__=r.__SENTRY__||{},i=o[SDK_VERSION]=o[SDK_VERSION]||{};return i[e]||(i[e]=t())}const DEBUG_BUILD$3="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,PREFIX="Sentry Logger ",CONSOLE_LEVELS=["debug","info","warn","error","log","assert","trace"],originalConsoleMethods={};function consoleSandbox(e){if(!("console"in GLOBAL_OBJ))return e();const t=GLOBAL_OBJ.console,n={},r=Object.keys(originalConsoleMethods);r.forEach((e=>{const r=originalConsoleMethods[e];n[e]=t[e],t[e]=r}));try{return e()}finally{r.forEach((e=>{t[e]=n[e]}))}}function makeLogger(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return DEBUG_BUILD$3?CONSOLE_LEVELS.forEach((n=>{t[n]=(...t)=>{e&&consoleSandbox((()=>{GLOBAL_OBJ.console[n](`${PREFIX}[${n}]:`,...t)}))}})):CONSOLE_LEVELS.forEach((e=>{t[e]=()=>{}})),t}const logger=getGlobalSingleton("logger",makeLogger),STACKTRACE_FRAME_LIMIT=50,UNKNOWN_FUNCTION="?",WEBPACK_ERROR_REGEXP=/\(error: (.*)\)/,STRIP_FRAME_REGEXP=/captureMessage|captureException/;function createStackParser(...e){const t=e.sort(((e,t)=>e[0]-t[0])).map((e=>e[1]));return(e,n=0,r=0)=>{const o=[],i=e.split("\n");for(let a=n;a<i.length;a++){const e=i[a];if(e.length>1024)continue;const n=WEBPACK_ERROR_REGEXP.test(e)?e.replace(WEBPACK_ERROR_REGEXP,"$1"):e;if(!n.match(/\S*Error: /)){for(const e of t){const t=e(n);if(t){o.push(t);break}}if(o.length>=STACKTRACE_FRAME_LIMIT+r)break}}return stripSentryFramesAndReverse(o.slice(r))}}function stackParserFromStackParserOptions(e){return Array.isArray(e)?createStackParser(...e):e}function stripSentryFramesAndReverse(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test(getLastStackFrame(t).function||"")&&t.pop(),t.reverse(),STRIP_FRAME_REGEXP.test(getLastStackFrame(t).function||"")&&(t.pop(),STRIP_FRAME_REGEXP.test(getLastStackFrame(t).function||"")&&t.pop()),t.slice(0,STACKTRACE_FRAME_LIMIT).map((e=>({...e,filename:e.filename||getLastStackFrame(t).filename,function:e.function||UNKNOWN_FUNCTION})))}function getLastStackFrame(e){return e[e.length-1]||{}}const defaultFunctionName="<anonymous>";function getFunctionName(e){try{return e&&"function"==typeof e&&e.name||defaultFunctionName}catch(t){return defaultFunctionName}}function getFramesFromEvent(e){const t=e.exception;if(t){const e=[];try{return t.values.forEach((t=>{t.stacktrace.frames&&e.push(...t.stacktrace.frames)})),e}catch(n){return}}}const handlers={},instrumented={};function addHandler(e,t){handlers[e]=handlers[e]||[],handlers[e].push(t)}function maybeInstrument(e,t){if(!instrumented[e]){instrumented[e]=!0;try{t()}catch(n){DEBUG_BUILD$3&&logger.error(`Error while instrumenting ${e}`,n)}}}function triggerHandlers(e,t){const n=e&&handlers[e];if(n)for(const o of n)try{o(t)}catch(r){DEBUG_BUILD$3&&logger.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${getFunctionName(o)}\nError:`,r)}}let _oldOnErrorHandler=null;function addGlobalErrorInstrumentationHandler(e){const t="error";addHandler(t,e),maybeInstrument(t,instrumentError)}function instrumentError(){_oldOnErrorHandler=GLOBAL_OBJ.onerror,GLOBAL_OBJ.onerror=function(e,t,n,r,o){return triggerHandlers("error",{column:r,error:o,line:n,msg:e,url:t}),!(!_oldOnErrorHandler||_oldOnErrorHandler.__SENTRY_LOADER__)&&_oldOnErrorHandler.apply(this,arguments)},GLOBAL_OBJ.onerror.__SENTRY_INSTRUMENTED__=!0}let _oldOnUnhandledRejectionHandler=null;function addGlobalUnhandledRejectionInstrumentationHandler(e){const t="unhandledrejection";addHandler(t,e),maybeInstrument(t,instrumentUnhandledRejection)}function instrumentUnhandledRejection(){_oldOnUnhandledRejectionHandler=GLOBAL_OBJ.onunhandledrejection,GLOBAL_OBJ.onunhandledrejection=function(e){return triggerHandlers("unhandledrejection",e),!(_oldOnUnhandledRejectionHandler&&!_oldOnUnhandledRejectionHandler.__SENTRY_LOADER__)||_oldOnUnhandledRejectionHandler.apply(this,arguments)},GLOBAL_OBJ.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}function getMainCarrier(){return getSentryCarrier(GLOBAL_OBJ),GLOBAL_OBJ}function getSentryCarrier(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||SDK_VERSION,t[SDK_VERSION]=t[SDK_VERSION]||{}}const objectToString$1=Object.prototype.toString;function isError(e){switch(objectToString$1.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return isInstanceOf(e,Error)}}function isBuiltin(e,t){return objectToString$1.call(e)===`[object ${t}]`}function isErrorEvent$1(e){return isBuiltin(e,"ErrorEvent")}function isDOMError(e){return isBuiltin(e,"DOMError")}function isDOMException(e){return isBuiltin(e,"DOMException")}function isString$2(e){return isBuiltin(e,"String")}function isParameterizedString(e){return"object"==typeof e&&null!==e&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function isPrimitive(e){return null===e||isParameterizedString(e)||"object"!=typeof e&&"function"!=typeof e}function isPlainObject$3(e){return isBuiltin(e,"Object")}function isEvent(e){return"undefined"!=typeof Event&&isInstanceOf(e,Event)}function isElement(e){return"undefined"!=typeof Element&&isInstanceOf(e,Element)}function isRegExp$2(e){return isBuiltin(e,"RegExp")}function isThenable$1(e){return Boolean(e&&e.then&&"function"==typeof e.then)}function isSyntheticEvent(e){return isPlainObject$3(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function isInstanceOf(e,t){try{return e instanceof t}catch(n){return!1}}function isVueViewModel(e){return!("object"!=typeof e||null===e||!e.__isVue&&!e._isVue)}const WINDOW$4=GLOBAL_OBJ,DEFAULT_MAX_STRING_LENGTH=80;function htmlTreeAsString(e,t={}){if(!e)return"<unknown>";try{let n=e;const r=5,o=[];let i=0,a=0;const s=" > ",c=s.length;let l;const u=Array.isArray(t)?t:t.keyAttrs,d=!Array.isArray(t)&&t.maxStringLength||DEFAULT_MAX_STRING_LENGTH;for(;n&&i++<r&&(l=_htmlElementAsString(n,u),!("html"===l||i>1&&a+o.length*c+l.length>=d));)o.push(l),a+=l.length,n=n.parentNode;return o.reverse().join(s)}catch(n){return"<unknown>"}}function _htmlElementAsString(e,t){const n=e,r=[];if(!n||!n.tagName)return"";if(WINDOW$4.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());const o=t&&t.length?t.filter((e=>n.getAttribute(e))).map((e=>[e,n.getAttribute(e)])):null;if(o&&o.length)o.forEach((e=>{r.push(`[${e[0]}="${e[1]}"]`)}));else{n.id&&r.push(`#${n.id}`);const e=n.className;if(e&&isString$2(e)){const t=e.split(/\s+/);for(const e of t)r.push(`.${e}`)}}const i=["aria-label","type","name","title","alt"];for(const a of i){const e=n.getAttribute(a);e&&r.push(`[${a}="${e}"]`)}return r.join("")}function getLocationHref(){try{return WINDOW$4.document.location.href}catch(e){return""}}function getComponentName(e){if(!WINDOW$4.HTMLElement)return null;let t=e;for(let n=0;n<5;n++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}function truncate(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}function safeJoin(e,t){if(!Array.isArray(e))return"";const n=[];for(let o=0;o<e.length;o++){const t=e[o];try{isVueViewModel(t)?n.push("[VueViewModel]"):n.push(String(t))}catch(r){n.push("[value cannot be serialized]")}}return n.join(t)}function isMatchingPattern(e,t,n=!1){return!!isString$2(e)&&(isRegExp$2(t)?t.test(e):!!isString$2(t)&&(n?e===t:e.includes(t)))}function stringMatchesSomePattern(e,t=[],n=!1){return t.some((t=>isMatchingPattern(e,t,n)))}function fill(e,t,n){if(!(t in e))return;const r=e[t],o=n(r);"function"==typeof o&&markFunctionWrapped(o,r);try{e[t]=o}catch(i){DEBUG_BUILD$3&&logger.log(`Failed to replace method "${t}" in object`,e)}}function addNonEnumerableProperty(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch(r){DEBUG_BUILD$3&&logger.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function markFunctionWrapped(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,addNonEnumerableProperty(e,"__sentry_original__",t)}catch(n){}}function getOriginalFunction(e){return e.__sentry_original__}function convertToPlainObject(e){if(isError(e))return{message:e.message,name:e.name,stack:e.stack,...getOwnProperties(e)};if(isEvent(e)){const t={type:e.type,target:serializeEventTarget(e.target),currentTarget:serializeEventTarget(e.currentTarget),...getOwnProperties(e)};return"undefined"!=typeof CustomEvent&&isInstanceOf(e,CustomEvent)&&(t.detail=e.detail),t}return e}function serializeEventTarget(e){try{return isElement(e)?htmlTreeAsString(e):Object.prototype.toString.call(e)}catch(t){return"<unknown>"}}function getOwnProperties(e){if("object"==typeof e&&null!==e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}return{}}function extractExceptionKeysForMessage(e,t=40){const n=Object.keys(convertToPlainObject(e));n.sort();const r=n[0];if(!r)return"[object has no keys]";if(r.length>=t)return truncate(r,t);for(let o=n.length;o>0;o--){const e=n.slice(0,o).join(", ");if(!(e.length>t))return o===n.length?e:truncate(e,t)}return""}function dropUndefinedKeys(e){return _dropUndefinedKeys(e,new Map)}function _dropUndefinedKeys(e,t){if(isPojo(e)){const n=t.get(e);if(void 0!==n)return n;const r={};t.set(e,r);for(const o of Object.getOwnPropertyNames(e))void 0!==e[o]&&(r[o]=_dropUndefinedKeys(e[o],t));return r}if(Array.isArray(e)){const n=t.get(e);if(void 0!==n)return n;const r=[];return t.set(e,r),e.forEach((e=>{r.push(_dropUndefinedKeys(e,t))})),r}return e}function isPojo(e){if(!isPlainObject$3(e))return!1;try{const t=Object.getPrototypeOf(e).constructor.name;return!t||"Object"===t}catch(t){return!0}}const ONE_SECOND_IN_MS=1e3;function dateTimestampInSeconds(){return Date.now()/ONE_SECOND_IN_MS}function createUnixTimestampInSecondsFunc(){const{performance:e}=GLOBAL_OBJ;if(!e||!e.now)return dateTimestampInSeconds;const t=Date.now()-e.now(),n=null==e.timeOrigin?t:e.timeOrigin;return()=>(n+e.now())/ONE_SECOND_IN_MS}const timestampInSeconds=createUnixTimestampInSecondsFunc();function uuid4(){const e=GLOBAL_OBJ,t=e.crypto||e.msCrypto;let n=()=>16*Math.random();try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(n=()=>{const e=new Uint8Array(1);return t.getRandomValues(e),e[0]})}catch(r){}return"10000000100040008000100000000000".replace(/[018]/g,(e=>(e^(15&n())>>e/4).toString(16)))}function getFirstException(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function getEventDescription(e){const{message:t,event_id:n}=e;if(t)return t;const r=getFirstException(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function addExceptionTypeValue(e,t,n){const r=e.exception=e.exception||{},o=r.values=r.values||[],i=o[0]=o[0]||{};i.value||(i.value=t||""),i.type||(i.type="Error")}function addExceptionMechanism(e,t){const n=getFirstException(e);if(!n)return;const r=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...r,...t},t&&"data"in t){const e={...r&&r.data,...t.data};n.mechanism.data=e}}function checkOrSetAlreadyCaught(e){if(isAlreadyCaptured(e))return!0;try{addNonEnumerableProperty(e,"__sentry_captured__",!0)}catch(t){}return!1}function isAlreadyCaptured(e){try{return e.__sentry_captured__}catch(t){}}var States;function resolvedSyncPromise(e){return new SyncPromise((t=>{t(e)}))}function rejectedSyncPromise(e){return new SyncPromise(((t,n)=>{n(e)}))}(()=>{const{performance:e}=GLOBAL_OBJ;if(!e||!e.now)return;const t=36e5,n=e.now(),r=Date.now(),o=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,i=o<t,a=e.timing&&e.timing.navigationStart,s="number"==typeof a?Math.abs(a+n-r):t;(i||s<t)&&(o<=s&&e.timeOrigin)})(),function(e){e[e.PENDING=0]="PENDING";e[e.RESOLVED=1]="RESOLVED";e[e.REJECTED=2]="REJECTED"}(States||(States={}));class SyncPromise{constructor(e){SyncPromise.prototype.__init.call(this),SyncPromise.prototype.__init2.call(this),SyncPromise.prototype.__init3.call(this),SyncPromise.prototype.__init4.call(this),this._state=States.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(t){this._reject(t)}}then(e,t){return new SyncPromise(((n,r)=>{this._handlers.push([!1,t=>{if(e)try{n(e(t))}catch(o){r(o)}else n(t)},e=>{if(t)try{n(t(e))}catch(o){r(o)}else r(e)}]),this._executeHandlers()}))}catch(e){return this.then((e=>e),e)}finally(e){return new SyncPromise(((t,n)=>{let r,o;return this.then((t=>{o=!1,r=t,e&&e()}),(t=>{o=!0,r=t,e&&e()})).then((()=>{o?n(r):t(r)}))}))}__init(){this._resolve=e=>{this._setResult(States.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(States.REJECTED,e)}}__init3(){this._setResult=(e,t)=>{this._state===States.PENDING&&(isThenable$1(t)?t.then(this._resolve,this._reject):(this._state=e,this._value=t,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===States.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach((e=>{e[0]||(this._state===States.RESOLVED&&e[1](this._value),this._state===States.REJECTED&&e[2](this._value),e[0]=!0)}))}}}function makeSession(e){const t=timestampInSeconds(),n={sid:uuid4(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>sessionToJSON(n)};return e&&updateSession(n,e),n}function updateSession(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||timestampInSeconds(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:uuid4()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}function closeSession(e,t){let n={};"ok"===e.status&&(n={status:"exited"}),updateSession(e,n)}function sessionToJSON(e){return dropUndefinedKeys({sid:`${e.sid}`,init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"==typeof e.did||"string"==typeof e.did?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}function generateTraceId(){return uuid4()}function generateSpanId(){return uuid4().substring(16)}function merge$1(e,t,n=2){if(!t||"object"!=typeof t||n<=0)return t;if(e&&t&&0===Object.keys(t).length)return e;const r={...e};for(const o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=merge$1(r[o],t[o],n-1));return r}const SCOPE_SPAN_FIELD="_sentrySpan";function _setSpanForScope(e,t){t?addNonEnumerableProperty(e,SCOPE_SPAN_FIELD,t):delete e[SCOPE_SPAN_FIELD]}function _getSpanForScope(e){return e[SCOPE_SPAN_FIELD]}const DEFAULT_MAX_BREADCRUMBS=100;class ScopeClass{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:generateTraceId(),spanId:generateSpanId()}}clone(){const e=new ScopeClass;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,_setSpanForScope(e,_getSpanForScope(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&updateSession(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const t="function"==typeof e?e(this):e,[n,r]=t instanceof Scope?[t.getScopeData(),t.getRequestSession()]:isPlainObject$3(t)?[e,e.requestSession]:[],{tags:o,extra:i,user:a,contexts:s,level:c,fingerprint:l=[],propagationContext:u}=n||{};return this._tags={...this._tags,...o},this._extra={...this._extra,...i},this._contexts={...this._contexts,...s},a&&Object.keys(a).length&&(this._user=a),c&&(this._level=c),l.length&&(this._fingerprint=l),u&&(this._propagationContext=u),r&&(this._requestSession=r),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._session=void 0,_setSpanForScope(this,void 0),this._attachments=[],this.setPropagationContext({traceId:generateTraceId()}),this._notifyScopeListeners(),this}addBreadcrumb(e,t){const n="number"==typeof t?t:DEFAULT_MAX_BREADCRUMBS;if(n<=0)return this;const r={timestamp:dateTimestampInSeconds(),...e},o=this._breadcrumbs;return o.push(r),this._breadcrumbs=o.length>n?o.slice(-n):o,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:_getSpanForScope(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=merge$1(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext={spanId:generateSpanId(),...e},this}getPropagationContext(){return this._propagationContext}captureException(e,t){const n=t&&t.event_id?t.event_id:uuid4();if(!this._client)return logger.warn("No client configured on scope - will not capture exception!"),n;const r=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:r,...t,event_id:n},this),n}captureMessage(e,t,n){const r=n&&n.event_id?n.event_id:uuid4();if(!this._client)return logger.warn("No client configured on scope - will not capture message!"),r;const o=new Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:o,...n,event_id:r},this),r}captureEvent(e,t){const n=t&&t.event_id?t.event_id:uuid4();return this._client?(this._client.captureEvent(e,{...t,event_id:n},this),n):(logger.warn("No client configured on scope - will not capture event!"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((e=>{e(this)})),this._notifyingListeners=!1)}}const Scope=ScopeClass;function getDefaultCurrentScope(){return getGlobalSingleton("defaultCurrentScope",(()=>new Scope))}function getDefaultIsolationScope(){return getGlobalSingleton("defaultIsolationScope",(()=>new Scope))}class AsyncContextStack{constructor(e,t){let n,r;n=e||new Scope,r=t||new Scope,this._stack=[{scope:n}],this._isolationScope=r}withScope(e){const t=this._pushScope();let n;try{n=e(t)}catch(r){throw this._popScope(),r}return isThenable$1(n)?n.then((e=>(this._popScope(),e)),(e=>{throw this._popScope(),e})):(this._popScope(),n)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return!(this._stack.length<=1)&&!!this._stack.pop()}}function getAsyncContextStack(){const e=getSentryCarrier(getMainCarrier());return e.stack=e.stack||new AsyncContextStack(getDefaultCurrentScope(),getDefaultIsolationScope())}function withScope$1(e){return getAsyncContextStack().withScope(e)}function withSetScope(e,t){const n=getAsyncContextStack();return n.withScope((()=>(n.getStackTop().scope=e,t(e))))}function withIsolationScope(e){return getAsyncContextStack().withScope((()=>e(getAsyncContextStack().getIsolationScope())))}function getStackAsyncContextStrategy(){return{withIsolationScope:withIsolationScope,withScope:withScope$1,withSetScope:withSetScope,withSetIsolationScope:(e,t)=>withIsolationScope(t),getCurrentScope:()=>getAsyncContextStack().getScope(),getIsolationScope:()=>getAsyncContextStack().getIsolationScope()}}function getAsyncContextStrategy(e){const t=getSentryCarrier(e);return t.acs?t.acs:getStackAsyncContextStrategy()}function getCurrentScope(){return getAsyncContextStrategy(getMainCarrier()).getCurrentScope()}function getIsolationScope(){return getAsyncContextStrategy(getMainCarrier()).getIsolationScope()}function getGlobalScope(){return getGlobalSingleton("globalScope",(()=>new Scope))}function withScope(...e){const t=getAsyncContextStrategy(getMainCarrier());if(2===e.length){const[n,r]=e;return n?t.withSetScope(n,r):t.withScope(r)}return t.withScope(e[0])}function getClient(){return getCurrentScope().getClient()}function getTraceContextFromScope(e){const t=e.getPropagationContext(),{traceId:n,spanId:r,parentSpanId:o}=t;return dropUndefinedKeys({trace_id:n,span_id:r,parent_span_id:o})}const METRICS_SPAN_FIELD="_sentryMetrics";function getMetricSummaryJsonForSpan(e){const t=e[METRICS_SPAN_FIELD];if(!t)return;const n={};for(const[,[r,o]]of t){(n[r]||(n[r]=[])).push(dropUndefinedKeys(o))}return n}const SEMANTIC_ATTRIBUTE_SENTRY_SOURCE="sentry.source",SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE="sentry.sample_rate",SEMANTIC_ATTRIBUTE_SENTRY_OP="sentry.op",SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN="sentry.origin",SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT="sentry.measurement_unit",SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE="sentry.measurement_value",SEMANTIC_ATTRIBUTE_PROFILE_ID="sentry.profile_id",SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME="sentry.exclusive_time",SPAN_STATUS_UNSET=0,SPAN_STATUS_OK=1,SENTRY_BAGGAGE_KEY_PREFIX="sentry-",SENTRY_BAGGAGE_KEY_PREFIX_REGEX=/^sentry-/;function baggageHeaderToDynamicSamplingContext(e){const t=parseBaggageHeader(e);if(!t)return;const n=Object.entries(t).reduce(((e,[t,n])=>{if(t.match(SENTRY_BAGGAGE_KEY_PREFIX_REGEX)){e[t.slice(SENTRY_BAGGAGE_KEY_PREFIX.length)]=n}return e}),{});return Object.keys(n).length>0?n:void 0}function parseBaggageHeader(e){if(e&&(isString$2(e)||Array.isArray(e)))return Array.isArray(e)?e.reduce(((e,t)=>{const n=baggageHeaderToObject(t);return Object.entries(n).forEach((([t,n])=>{e[t]=n})),e}),{}):baggageHeaderToObject(e)}function baggageHeaderToObject(e){return e.split(",").map((e=>e.split("=").map((e=>decodeURIComponent(e.trim()))))).reduce(((e,[t,n])=>(t&&n&&(e[t]=n),e)),{})}const TRACE_FLAG_NONE=0,TRACE_FLAG_SAMPLED=1;let hasShownSpanDropWarning=!1;function spanToTransactionTraceContext(e){const{spanId:t,traceId:n}=e.spanContext(),{data:r,op:o,parent_span_id:i,status:a,origin:s}=spanToJSON(e);return dropUndefinedKeys({parent_span_id:i,span_id:t,trace_id:n,data:r,op:o,status:a,origin:s})}function spanToTraceContext(e){const{spanId:t,traceId:n}=e.spanContext(),{parent_span_id:r}=spanToJSON(e);return dropUndefinedKeys({parent_span_id:r,span_id:t,trace_id:n})}function spanTimeInputToSeconds(e){return"number"==typeof e?ensureTimestampInSeconds(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?ensureTimestampInSeconds(e.getTime()):timestampInSeconds()}function ensureTimestampInSeconds(e){return e>9999999999?e/1e3:e}function spanToJSON(e){if(spanIsSentrySpan(e))return e.getSpanJSON();try{const{spanId:t,traceId:n}=e.spanContext();if(spanIsOpenTelemetrySdkTraceBaseSpan(e)){const{attributes:r,startTime:o,name:i,endTime:a,parentSpanId:s,status:c}=e;return dropUndefinedKeys({span_id:t,trace_id:n,data:r,description:i,parent_span_id:s,start_timestamp:spanTimeInputToSeconds(o),timestamp:spanTimeInputToSeconds(a)||void 0,status:getStatusMessage(c),op:r[SEMANTIC_ATTRIBUTE_SENTRY_OP],origin:r[SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN],_metrics_summary:getMetricSummaryJsonForSpan(e)})}return{span_id:t,trace_id:n}}catch(t){return{}}}function spanIsOpenTelemetrySdkTraceBaseSpan(e){const t=e;return!!(t.attributes&&t.startTime&&t.name&&t.endTime&&t.status)}function spanIsSentrySpan(e){return"function"==typeof e.getSpanJSON}function spanIsSampled(e){const{traceFlags:t}=e.spanContext();return t===TRACE_FLAG_SAMPLED}function getStatusMessage(e){if(e&&e.code!==SPAN_STATUS_UNSET)return e.code===SPAN_STATUS_OK?"ok":e.message||"unknown_error"}const CHILD_SPANS_FIELD="_sentryChildSpans",ROOT_SPAN_FIELD="_sentryRootSpan";function addChildSpanToSpan(e,t){const n=e[ROOT_SPAN_FIELD]||e;addNonEnumerableProperty(t,ROOT_SPAN_FIELD,n),e[CHILD_SPANS_FIELD]?e[CHILD_SPANS_FIELD].add(t):addNonEnumerableProperty(e,CHILD_SPANS_FIELD,new Set([t]))}function getSpanDescendants(e){const t=new Set;return function e(n){if(!t.has(n)&&spanIsSampled(n)){t.add(n);const r=n[CHILD_SPANS_FIELD]?Array.from(n[CHILD_SPANS_FIELD]):[];for(const t of r)e(t)}}(e),Array.from(t)}function getRootSpan(e){return e[ROOT_SPAN_FIELD]||e}function getActiveSpan(){const e=getAsyncContextStrategy(getMainCarrier());return e.getActiveSpan?e.getActiveSpan():_getSpanForScope(getCurrentScope())}function showSpanDropWarning(){hasShownSpanDropWarning||(consoleSandbox((()=>{console.warn("[Sentry] Deprecation warning: Returning null from `beforeSendSpan` will be disallowed from SDK version 9.0.0 onwards. The callback will only support mutating spans. To drop certain spans, configure the respective integrations directly.")})),hasShownSpanDropWarning=!0)}const SCOPE_ON_START_SPAN_FIELD="_sentryScope",ISOLATION_SCOPE_ON_START_SPAN_FIELD="_sentryIsolationScope";function setCapturedScopesOnSpan(e,t,n){e&&(addNonEnumerableProperty(e,ISOLATION_SCOPE_ON_START_SPAN_FIELD,n),addNonEnumerableProperty(e,SCOPE_ON_START_SPAN_FIELD,t))}function getCapturedScopesOnSpan(e){return{scope:e[SCOPE_ON_START_SPAN_FIELD],isolationScope:e[ISOLATION_SCOPE_ON_START_SPAN_FIELD]}}function hasTracingEnabled(e){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;const t=getClient(),n=e||t&&t.getOptions();return!!n&&(n.enableTracing||"tracesSampleRate"in n||"tracesSampler"in n)}class SentryNonRecordingSpan{constructor(e={}){this._traceId=e.traceId||uuid4(),this._spanId=e.spanId||uuid4().substring(16)}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:TRACE_FLAG_NONE}}end(e){}setAttribute(e,t){return this}setAttributes(e){return this}setStatus(e){return this}updateName(e){return this}isRecording(){return!1}addEvent(e,t,n){return this}addLink(e){return this}addLinks(e){return this}recordException(e,t){}}const DEFAULT_ENVIRONMENT="production",FROZEN_DSC_FIELD="_frozenDsc";function freezeDscOnSpan(e,t){addNonEnumerableProperty(e,FROZEN_DSC_FIELD,t)}function getDynamicSamplingContextFromClient(e,t){const n=t.getOptions(),{publicKey:r}=t.getDsn()||{},o=dropUndefinedKeys({environment:n.environment||DEFAULT_ENVIRONMENT,release:n.release,public_key:r,trace_id:e});return t.emit("createDsc",o),o}function getDynamicSamplingContextFromScope(e,t){const n=t.getPropagationContext();return n.dsc||getDynamicSamplingContextFromClient(n.traceId,e)}function getDynamicSamplingContextFromSpan(e){const t=getClient();if(!t)return{};const n=getRootSpan(e),r=n[FROZEN_DSC_FIELD];if(r)return r;const o=n.spanContext().traceState,i=o&&o.get("sentry.dsc"),a=i&&baggageHeaderToDynamicSamplingContext(i);if(a)return a;const s=getDynamicSamplingContextFromClient(e.spanContext().traceId,t),c=spanToJSON(n),l=c.data||{},u=l[SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE];null!=u&&(s.sample_rate=`${u}`);const d=l[SEMANTIC_ATTRIBUTE_SENTRY_SOURCE],A=c.description;return"url"!==d&&A&&(s.transaction=A),hasTracingEnabled()&&(s.sampled=String(spanIsSampled(n))),t.emit("createDsc",s,n),s}function logSpanStart(e){if(!DEBUG_BUILD$4)return;const{description:t="< unknown name >",op:n="< unknown op >",parent_span_id:r}=spanToJSON(e),{spanId:o}=e.spanContext(),i=spanIsSampled(e),a=getRootSpan(e),s=a===e,c=`[Tracing] Starting ${i?"sampled":"unsampled"} ${s?"root ":""}span`,l=[`op: ${n}`,`name: ${t}`,`ID: ${o}`];if(r&&l.push(`parent ID: ${r}`),!s){const{op:e,description:t}=spanToJSON(a);l.push(`root ID: ${a.spanContext().spanId}`),e&&l.push(`root op: ${e}`),t&&l.push(`root description: ${t}`)}logger.log(`${c}\n  ${l.join("\n  ")}`)}function logSpanEnd(e){if(!DEBUG_BUILD$4)return;const{description:t="< unknown name >",op:n="< unknown op >"}=spanToJSON(e),{spanId:r}=e.spanContext(),o=`[Tracing] Finishing "${n}" ${getRootSpan(e)===e?"root ":""}span "${t}" with ID ${r}`;logger.log(o)}function parseSampleRate(e){if("boolean"==typeof e)return Number(e);const t="string"==typeof e?parseFloat(e):e;if(!("number"!=typeof t||isNaN(t)||t<0||t>1))return t;DEBUG_BUILD$4&&logger.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`)}function sampleSpan(e,t){if(!hasTracingEnabled(e))return[!1];let n;n="function"==typeof e.tracesSampler?e.tracesSampler(t):void 0!==t.parentSampled?t.parentSampled:void 0!==e.tracesSampleRate?e.tracesSampleRate:1;const r=parseSampleRate(n);if(void 0===r)return DEBUG_BUILD$4&&logger.warn("[Tracing] Discarding transaction because of invalid sample rate."),[!1];if(!r)return DEBUG_BUILD$4&&logger.log("[Tracing] Discarding transaction because "+("function"==typeof e.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),[!1,r];return Math.random()<r?[!0,r]:(DEBUG_BUILD$4&&logger.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(n)})`),[!1,r])}const DSN_REGEX=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function isValidProtocol(e){return"http"===e||"https"===e}function dsnToString(e,t=!1){const{host:n,path:r,pass:o,port:i,projectId:a,protocol:s,publicKey:c}=e;return`${s}://${c}${t&&o?`:${o}`:""}@${n}${i?`:${i}`:""}/${r?`${r}/`:r}${a}`}function dsnFromString(e){const t=DSN_REGEX.exec(e);if(!t)return void consoleSandbox((()=>{console.error(`Invalid Sentry Dsn: ${e}`)}));const[n,r,o="",i="",a="",s=""]=t.slice(1);let c="",l=s;const u=l.split("/");if(u.length>1&&(c=u.slice(0,-1).join("/"),l=u.pop()),l){const e=l.match(/^\d+/);e&&(l=e[0])}return dsnFromComponents({host:i,pass:o,path:c,projectId:l,port:a,protocol:n,publicKey:r})}function dsnFromComponents(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function validateDsn(e){if(!DEBUG_BUILD$3)return!0;const{port:t,projectId:n,protocol:r}=e;return!["protocol","publicKey","host","projectId"].find((t=>!e[t]&&(logger.error(`Invalid Sentry Dsn: ${t} missing`),!0)))&&(n.match(/^\d+$/)?isValidProtocol(r)?!t||!isNaN(parseInt(t,10))||(logger.error(`Invalid Sentry Dsn: Invalid port ${t}`),!1):(logger.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(logger.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1))}function makeDsn(e){const t="string"==typeof e?dsnFromString(e):dsnFromComponents(e);if(t&&validateDsn(t))return t}function memoBuilder(){const e="function"==typeof WeakSet,t=e?new WeakSet:[];return[function(n){if(e)return!!t.has(n)||(t.add(n),!1);for(let e=0;e<t.length;e++){if(t[e]===n)return!0}return t.push(n),!1},function(n){if(e)t.delete(n);else for(let e=0;e<t.length;e++)if(t[e]===n){t.splice(e,1);break}}]}function normalize(e,t=100,n=1/0){try{return visit("",e,t,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function normalizeToSize(e,t=3,n=102400){const r=normalize(e,t);return jsonSize(r)>n?normalizeToSize(e,t-1,n):r}function visit(e,t,n=1/0,r=1/0,o=memoBuilder()){const[i,a]=o;if(null==t||["boolean","string"].includes(typeof t)||"number"==typeof t&&Number.isFinite(t))return t;const s=stringifyValue(e,t);if(!s.startsWith("[object "))return s;if(t.__sentry_skip_normalization__)return t;const c="number"==typeof t.__sentry_override_normalization_depth__?t.__sentry_override_normalization_depth__:n;if(0===c)return s.replace("object ","");if(i(t))return"[Circular ~]";const l=t;if(l&&"function"==typeof l.toJSON)try{return visit("",l.toJSON(),c-1,r,o)}catch(p){}const u=Array.isArray(t)?[]:{};let d=0;const A=convertToPlainObject(t);for(const h in A){if(!Object.prototype.hasOwnProperty.call(A,h))continue;if(d>=r){u[h]="[MaxProperties ~]";break}const e=A[h];u[h]=visit(h,e,c-1,r,o),d++}return a(t),u}function stringifyValue(e,t){try{if("domain"===e&&t&&"object"==typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if("undefined"!=typeof global&&t===global)return"[Global]";if("undefined"!=typeof window&&t===window)return"[Window]";if("undefined"!=typeof document&&t===document)return"[Document]";if(isVueViewModel(t))return"[VueViewModel]";if(isSyntheticEvent(t))return"[SyntheticEvent]";if("number"==typeof t&&!Number.isFinite(t))return`[${t}]`;if("function"==typeof t)return`[Function: ${getFunctionName(t)}]`;if("symbol"==typeof t)return`[${String(t)}]`;if("bigint"==typeof t)return`[BigInt: ${String(t)}]`;const n=getConstructorName(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function getConstructorName(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}function utf8Length(e){return~-encodeURI(e).split(/%..|./).length}function jsonSize(e){return utf8Length(JSON.stringify(e))}function createEnvelope(e,t=[]){return[e,t]}function addItemToEnvelope(e,t){const[n,r]=e;return[n,[...r,t]]}function forEachEnvelopeItem(e,t){const n=e[1];for(const r of n){if(t(r,r[0].type))return!0}return!1}function encodeUTF8(e){return GLOBAL_OBJ.__SENTRY__&&GLOBAL_OBJ.__SENTRY__.encodePolyfill?GLOBAL_OBJ.__SENTRY__.encodePolyfill(e):(new TextEncoder).encode(e)}function serializeEnvelope(e){const[t,n]=e;let r=JSON.stringify(t);function o(e){"string"==typeof r?r="string"==typeof e?r+e:[encodeUTF8(r),e]:r.push("string"==typeof e?encodeUTF8(e):e)}for(const a of n){const[e,t]=a;if(o(`\n${JSON.stringify(e)}\n`),"string"==typeof t||t instanceof Uint8Array)o(t);else{let e;try{e=JSON.stringify(t)}catch(i){e=JSON.stringify(normalize(t))}o(e)}}return"string"==typeof r?r:concatBuffers(r)}function concatBuffers(e){const t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);let r=0;for(const o of e)n.set(o,r),r+=o.length;return n}function createSpanEnvelopeItem(e){return[{type:"span"},e]}function createAttachmentEnvelopeItem(e){const t="string"==typeof e.data?encodeUTF8(e.data):e.data;return[dropUndefinedKeys({type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),t]}const ITEM_TYPE_TO_DATA_CATEGORY_MAP={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function envelopeItemTypeToDataCategory(e){return ITEM_TYPE_TO_DATA_CATEGORY_MAP[e]}function getSdkMetadataForEnvelopeHeader(e){if(!e||!e.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function createEventEnvelopeHeaders(e,t,n,r){const o=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:dsnToString(r)},...o&&{trace:dropUndefinedKeys({...o})}}}function enhanceEventWithSdkInfo(e,t){return t?(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]],e):e}function createSessionEnvelope(e,t,n,r){const o=getSdkMetadataForEnvelopeHeader(n);return createEnvelope({sent_at:(new Date).toISOString(),...o&&{sdk:o},...!!r&&t&&{dsn:dsnToString(t)}},["aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()]])}function createEventEnvelope(e,t,n,r){const o=getSdkMetadataForEnvelopeHeader(n),i=e.type&&"replay_event"!==e.type?e.type:"event";enhanceEventWithSdkInfo(e,n&&n.sdk);const a=createEventEnvelopeHeaders(e,o,r,t);delete e.sdkProcessingMetadata;return createEnvelope(a,[[{type:i},e]])}function createSpanEnvelope(e,t){const n=getDynamicSamplingContextFromSpan(e[0]),r=t&&t.getDsn(),o=t&&t.getOptions().tunnel,i={sent_at:(new Date).toISOString(),...(a=n,!!a.trace_id&&!!a.public_key&&{trace:n}),...!!o&&r&&{dsn:dsnToString(r)}};var a;const s=t&&t.getOptions().beforeSendSpan,c=s?e=>{const t=s(spanToJSON(e));return t||showSpanDropWarning(),t}:e=>spanToJSON(e),l=[];for(const u of e){const e=c(u);e&&l.push(createSpanEnvelopeItem(e))}return createEnvelope(i,l)}function timedEventsToMeasurements(e){if(!e||0===e.length)return;const t={};return e.forEach((e=>{const n=e.attributes||{},r=n[SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT],o=n[SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE];"string"==typeof r&&"number"==typeof o&&(t[e.name]={value:o,unit:r})})),t}const MAX_SPAN_COUNT=1e3;class SentrySpan{constructor(e={}){this._traceId=e.traceId||uuid4(),this._spanId=e.spanId||uuid4().substring(16),this._startTime=e.startTimestamp||timestampInSeconds(),this._attributes={},this.setAttributes({[SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"manual",[SEMANTIC_ATTRIBUTE_SENTRY_OP]:e.op,...e.attributes}),this._name=e.name,e.parentSpanId&&(this._parentSpanId=e.parentSpanId),"sampled"in e&&(this._sampled=e.sampled),e.endTimestamp&&(this._endTime=e.endTimestamp),this._events=[],this._isStandaloneSpan=e.isStandalone,this._endTime&&this._onSpanEnded()}addLink(e){return this}addLinks(e){return this}recordException(e,t){}spanContext(){const{_spanId:e,_traceId:t,_sampled:n}=this;return{spanId:e,traceId:t,traceFlags:n?TRACE_FLAG_SAMPLED:TRACE_FLAG_NONE}}setAttribute(e,t){return void 0===t?delete this._attributes[e]:this._attributes[e]=t,this}setAttributes(e){return Object.keys(e).forEach((t=>this.setAttribute(t,e[t]))),this}updateStartTime(e){this._startTime=spanTimeInputToSeconds(e)}setStatus(e){return this._status=e,this}updateName(e){return this._name=e,this.setAttribute(SEMANTIC_ATTRIBUTE_SENTRY_SOURCE,"custom"),this}end(e){this._endTime||(this._endTime=spanTimeInputToSeconds(e),logSpanEnd(this),this._onSpanEnded())}getSpanJSON(){return dropUndefinedKeys({data:this._attributes,description:this._name,op:this._attributes[SEMANTIC_ATTRIBUTE_SENTRY_OP],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:getStatusMessage(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN],_metrics_summary:getMetricSummaryJsonForSpan(this),profile_id:this._attributes[SEMANTIC_ATTRIBUTE_PROFILE_ID],exclusive_time:this._attributes[SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME],measurements:timedEventsToMeasurements(this._events),is_segment:this._isStandaloneSpan&&getRootSpan(this)===this||void 0,segment_id:this._isStandaloneSpan?getRootSpan(this).spanContext().spanId:void 0})}isRecording(){return!this._endTime&&!!this._sampled}addEvent(e,t,n){DEBUG_BUILD$4&&logger.log("[Tracing] Adding an event to span:",e);const r=isSpanTimeInput(t)?t:n||timestampInSeconds(),o=isSpanTimeInput(t)?{}:t||{},i={name:e,time:spanTimeInputToSeconds(r),attributes:o};return this._events.push(i),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const e=getClient();e&&e.emit("spanEnd",this);if(!(this._isStandaloneSpan||this===getRootSpan(this)))return;if(this._isStandaloneSpan)return void(this._sampled?sendSpanEnvelope(createSpanEnvelope([this],e)):(DEBUG_BUILD$4&&logger.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),e&&e.recordDroppedEvent("sample_rate","span")));const t=this._convertSpanToTransaction();if(t){(getCapturedScopesOnSpan(this).scope||getCurrentScope()).captureEvent(t)}}_convertSpanToTransaction(){if(!isFullFinishedSpan(spanToJSON(this)))return;this._name||(DEBUG_BUILD$4&&logger.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:e,isolationScope:t}=getCapturedScopesOnSpan(this),n=(e||getCurrentScope()).getClient()||getClient();if(!0!==this._sampled)return DEBUG_BUILD$4&&logger.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),void(n&&n.recordDroppedEvent("sample_rate","transaction"));const r=getSpanDescendants(this).filter((e=>e!==this&&!isStandaloneSpan(e))).map((e=>spanToJSON(e))).filter(isFullFinishedSpan),o=this._attributes[SEMANTIC_ATTRIBUTE_SENTRY_SOURCE],i={contexts:{trace:spanToTransactionTraceContext(this)},spans:r.length>MAX_SPAN_COUNT?r.sort(((e,t)=>e.start_timestamp-t.start_timestamp)).slice(0,MAX_SPAN_COUNT):r,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:e,capturedSpanIsolationScope:t,...dropUndefinedKeys({dynamicSamplingContext:getDynamicSamplingContextFromSpan(this)})},_metrics_summary:getMetricSummaryJsonForSpan(this),...o&&{transaction_info:{source:o}}},a=timedEventsToMeasurements(this._events);return a&&Object.keys(a).length&&(DEBUG_BUILD$4&&logger.log("[Measurements] Adding measurements to transaction event",JSON.stringify(a,void 0,2)),i.measurements=a),i}}function isSpanTimeInput(e){return e&&"number"==typeof e||e instanceof Date||Array.isArray(e)}function isFullFinishedSpan(e){return!!(e.start_timestamp&&e.timestamp&&e.span_id&&e.trace_id)}function isStandaloneSpan(e){return e instanceof SentrySpan&&e.isStandaloneSpan()}function sendSpanEnvelope(e){const t=getClient();if(!t)return;const n=e[1];n&&0!==n.length?t.sendEnvelope(e):t.recordDroppedEvent("before_send","span")}const SUPPRESS_TRACING_KEY="__SENTRY_SUPPRESS_TRACING__";function startInactiveSpan(e){const t=getAcs();if(t.startInactiveSpan)return t.startInactiveSpan(e);const n=parseSentrySpanArguments(e),{forceTransaction:r,parentSpan:o}=e;return(e.scope?t=>withScope(e.scope,t):void 0!==o?e=>withActiveSpan(o,e):e=>e())((()=>{const t=getCurrentScope(),o=getParentSpan(t);return e.onlyIfParent&&!o?new SentryNonRecordingSpan:createChildOrRootSpan({parentSpan:o,spanArguments:n,forceTransaction:r,scope:t})}))}function withActiveSpan(e,t){const n=getAcs();return n.withActiveSpan?n.withActiveSpan(e,t):withScope((n=>(_setSpanForScope(n,e||void 0),t(n))))}function createChildOrRootSpan({parentSpan:e,spanArguments:t,forceTransaction:n,scope:r}){if(!hasTracingEnabled())return new SentryNonRecordingSpan;const o=getIsolationScope();let i;if(e&&!n)i=_startChildSpan(e,r,t),addChildSpanToSpan(e,i);else if(e){const n=getDynamicSamplingContextFromSpan(e),{traceId:o,spanId:a}=e.spanContext(),s=spanIsSampled(e);i=_startRootSpan({traceId:o,parentSpanId:a,...t},r,s),freezeDscOnSpan(i,n)}else{const{traceId:e,dsc:n,parentSpanId:a,sampled:s}={...o.getPropagationContext(),...r.getPropagationContext()};i=_startRootSpan({traceId:e,parentSpanId:a,...t},r,s),n&&freezeDscOnSpan(i,n)}return logSpanStart(i),setCapturedScopesOnSpan(i,r,o),i}function parseSentrySpanArguments(e){const t={isStandalone:(e.experimental||{}).standalone,...e};if(e.startTime){const n={...t};return n.startTimestamp=spanTimeInputToSeconds(e.startTime),delete n.startTime,n}return t}function getAcs(){return getAsyncContextStrategy(getMainCarrier())}function _startRootSpan(e,t,n){const r=getClient(),o=r&&r.getOptions()||{},{name:i="",attributes:a}=e,[s,c]=t.getScopeData().sdkProcessingMetadata[SUPPRESS_TRACING_KEY]?[!1]:sampleSpan(o,{name:i,parentSampled:n,attributes:a,transactionContext:{name:i,parentSampled:n}}),l=new SentrySpan({...e,attributes:{[SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]:"custom",...e.attributes},sampled:s});return void 0!==c&&l.setAttribute(SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE,c),r&&r.emit("spanStart",l),l}function _startChildSpan(e,t,n){const{spanId:r,traceId:o}=e.spanContext(),i=!t.getScopeData().sdkProcessingMetadata[SUPPRESS_TRACING_KEY]&&spanIsSampled(e),a=i?new SentrySpan({...n,parentSpanId:r,traceId:o,sampled:i}):new SentryNonRecordingSpan({traceId:o});addChildSpanToSpan(e,a);const s=getClient();return s&&(s.emit("spanStart",a),n.endTimestamp&&s.emit("spanEnd",a)),a}function getParentSpan(e){const t=_getSpanForScope(e);if(!t)return;const n=getClient();return(n?n.getOptions():{}).parentSpanIsAlwaysRootSpan?getRootSpan(t):t}function notifyEventProcessors(e,t,n,r=0){return new SyncPromise(((o,i)=>{const a=e[r];if(null===t||"function"!=typeof a)o(t);else{const s=a({...t},n);DEBUG_BUILD$4&&a.id&&null===s&&logger.log(`Event processor "${a.id}" dropped event`),isThenable$1(s)?s.then((t=>notifyEventProcessors(e,t,n,r+1).then(o))).then(null,i):notifyEventProcessors(e,s,n,r+1).then(o).then(null,i)}}))}let parsedStackResults,lastKeysCount,cachedFilenameDebugIds;function getFilenameToDebugIdMap(e){const t=GLOBAL_OBJ._sentryDebugIds;if(!t)return{};const n=Object.keys(t);return cachedFilenameDebugIds&&n.length===lastKeysCount||(lastKeysCount=n.length,cachedFilenameDebugIds=n.reduce(((n,r)=>{parsedStackResults||(parsedStackResults={});const o=parsedStackResults[r];if(o)n[o[0]]=o[1];else{const o=e(r);for(let e=o.length-1;e>=0;e--){const i=o[e],a=i&&i.filename,s=t[r];if(a&&s){n[a]=s,parsedStackResults[r]=[a,s];break}}}return n}),{})),cachedFilenameDebugIds}function applyScopeDataToEvent(e,t){const{fingerprint:n,span:r,breadcrumbs:o,sdkProcessingMetadata:i}=t;applyDataToEvent(e,t),r&&applySpanToEvent(e,r),applyFingerprintToEvent(e,n),applyBreadcrumbsToEvent(e,o),applySdkMetadataToEvent(e,i)}function mergeScopeData(e,t){const{extra:n,tags:r,user:o,contexts:i,level:a,sdkProcessingMetadata:s,breadcrumbs:c,fingerprint:l,eventProcessors:u,attachments:d,propagationContext:A,transactionName:p,span:h}=t;mergeAndOverwriteScopeData(e,"extra",n),mergeAndOverwriteScopeData(e,"tags",r),mergeAndOverwriteScopeData(e,"user",o),mergeAndOverwriteScopeData(e,"contexts",i),e.sdkProcessingMetadata=merge$1(e.sdkProcessingMetadata,s,2),a&&(e.level=a),p&&(e.transactionName=p),h&&(e.span=h),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),l.length&&(e.fingerprint=[...e.fingerprint,...l]),u.length&&(e.eventProcessors=[...e.eventProcessors,...u]),d.length&&(e.attachments=[...e.attachments,...d]),e.propagationContext={...e.propagationContext,...A}}function mergeAndOverwriteScopeData(e,t,n){e[t]=merge$1(e[t],n,1)}function applyDataToEvent(e,t){const{extra:n,tags:r,user:o,contexts:i,level:a,transactionName:s}=t,c=dropUndefinedKeys(n);c&&Object.keys(c).length&&(e.extra={...c,...e.extra});const l=dropUndefinedKeys(r);l&&Object.keys(l).length&&(e.tags={...l,...e.tags});const u=dropUndefinedKeys(o);u&&Object.keys(u).length&&(e.user={...u,...e.user});const d=dropUndefinedKeys(i);d&&Object.keys(d).length&&(e.contexts={...d,...e.contexts}),a&&(e.level=a),s&&"transaction"!==e.type&&(e.transaction=s)}function applyBreadcrumbsToEvent(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}function applySdkMetadataToEvent(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}function applySpanToEvent(e,t){e.contexts={trace:spanToTraceContext(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:getDynamicSamplingContextFromSpan(t),...e.sdkProcessingMetadata};const n=spanToJSON(getRootSpan(t)).description;n&&!e.transaction&&"transaction"===e.type&&(e.transaction=n)}function applyFingerprintToEvent(e,t){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}function prepareEvent(e,t,n,r,o,i){const{normalizeDepth:a=3,normalizeMaxBreadth:s=1e3}=e,c={...t,event_id:t.event_id||n.event_id||uuid4(),timestamp:t.timestamp||dateTimestampInSeconds()},l=n.integrations||e.integrations.map((e=>e.name));applyClientOptions(c,e),applyIntegrationsMetadata(c,l),o&&o.emit("applyFrameMetadata",t),void 0===t.type&&applyDebugIds(c,e.stackParser);const u=getFinalScope(r,n.captureContext);n.mechanism&&addExceptionMechanism(c,n.mechanism);const d=o?o.getEventProcessors():[],A=getGlobalScope().getScopeData();if(i){mergeScopeData(A,i.getScopeData())}if(u){mergeScopeData(A,u.getScopeData())}const p=[...n.attachments||[],...A.attachments];p.length&&(n.attachments=p),applyScopeDataToEvent(c,A);return notifyEventProcessors([...d,...A.eventProcessors],c,n).then((e=>(e&&applyDebugMeta(e),"number"==typeof a&&a>0?normalizeEvent(e,a,s):e)))}function applyClientOptions(e,t){const{environment:n,release:r,dist:o,maxValueLength:i=250}=t;e.environment=e.environment||n||DEFAULT_ENVIRONMENT,!e.release&&r&&(e.release=r),!e.dist&&o&&(e.dist=o),e.message&&(e.message=truncate(e.message,i));const a=e.exception&&e.exception.values&&e.exception.values[0];a&&a.value&&(a.value=truncate(a.value,i));const s=e.request;s&&s.url&&(s.url=truncate(s.url,i))}function applyDebugIds(e,t){const n=getFilenameToDebugIdMap(t);try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{n&&e.filename&&(e.debug_id=n[e.filename])}))}))}catch(r){}}function applyDebugMeta(e){const t={};try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.debug_id&&(e.abs_path?t[e.abs_path]=e.debug_id:e.filename&&(t[e.filename]=e.debug_id),delete e.debug_id)}))}))}catch(r){}if(0===Object.keys(t).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.entries(t).forEach((([e,t])=>{n.push({type:"sourcemap",code_file:e,debug_id:t})}))}function applyIntegrationsMetadata(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}function normalizeEvent(e,t,n){if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((e=>({...e,...e.data&&{data:normalize(e.data,t,n)}})))},...e.user&&{user:normalize(e.user,t,n)},...e.contexts&&{contexts:normalize(e.contexts,t,n)},...e.extra&&{extra:normalize(e.extra,t,n)}};return e.contexts&&e.contexts.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=normalize(e.contexts.trace.data,t,n))),e.spans&&(r.spans=e.spans.map((e=>({...e,...e.data&&{data:normalize(e.data,t,n)}})))),r}function getFinalScope(e,t){if(!t)return e;const n=e?e.clone():new Scope;return n.update(t),n}function parseEventHintOrCaptureContext(e){if(e)return hintIsScopeOrFunction(e)||hintIsScopeContext(e)?{captureContext:e}:e}function hintIsScopeOrFunction(e){return e instanceof Scope||"function"==typeof e}const captureContextKeys=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function hintIsScopeContext(e){return Object.keys(e).some((e=>captureContextKeys.includes(e)))}function captureException(e,t){return getCurrentScope().captureException(e,parseEventHintOrCaptureContext(t))}function captureEvent(e,t){return getCurrentScope().captureEvent(e,t)}function startSession(e){const t=getClient(),n=getIsolationScope(),r=getCurrentScope(),{release:o,environment:i=DEFAULT_ENVIRONMENT}=t&&t.getOptions()||{},{userAgent:a}=GLOBAL_OBJ.navigator||{},s=makeSession({release:o,environment:i,user:r.getUser()||n.getUser(),...a&&{userAgent:a},...e}),c=n.getSession();return c&&"ok"===c.status&&updateSession(c,{status:"exited"}),endSession(),n.setSession(s),r.setSession(s),s}function endSession(){const e=getIsolationScope(),t=getCurrentScope(),n=t.getSession()||e.getSession();n&&closeSession(n),_sendSessionUpdate(),e.setSession(),t.setSession()}function _sendSessionUpdate(){const e=getIsolationScope(),t=getCurrentScope(),n=getClient(),r=t.getSession()||e.getSession();r&&n&&n.captureSession(r)}function captureSession(e=!1){e?endSession():_sendSessionUpdate()}const SENTRY_API_VERSION="7";function getBaseApiEndpoint(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function _getIngestEndpoint(e){return`${getBaseApiEndpoint(e)}${e.projectId}/envelope/`}function _encodedAuth(e,t){const n={sentry_version:SENTRY_API_VERSION};return e.publicKey&&(n.sentry_key=e.publicKey),t&&(n.sentry_client=`${t.name}/${t.version}`),new URLSearchParams(n).toString()}function getEnvelopeEndpointWithUrlEncodedAuth(e,t,n){return t||`${_getIngestEndpoint(e)}?${_encodedAuth(e,n)}`}const installedIntegrations=[];function filterDuplicates(e){const t={};return e.forEach((e=>{const{name:n}=e,r=t[n];r&&!r.isDefaultInstance&&e.isDefaultInstance||(t[n]=e)})),Object.values(t)}function getIntegrationsToSetup(e){const t=e.defaultIntegrations||[],n=e.integrations;let r;if(t.forEach((e=>{e.isDefaultInstance=!0})),Array.isArray(n))r=[...t,...n];else if("function"==typeof n){const e=n(t);r=Array.isArray(e)?e:[e]}else r=t;const o=filterDuplicates(r),i=o.findIndex((e=>"Debug"===e.name));if(i>-1){const[e]=o.splice(i,1);o.push(e)}return o}function setupIntegrations(e,t){const n={};return t.forEach((t=>{t&&setupIntegration(e,t,n)})),n}function afterSetupIntegrations(e,t){for(const n of t)n&&n.afterAllSetup&&n.afterAllSetup(e)}function setupIntegration(e,t,n){if(n[t.name])DEBUG_BUILD$4&&logger.log(`Integration skipped because it was already installed: ${t.name}`);else{if(n[t.name]=t,-1===installedIntegrations.indexOf(t.name)&&"function"==typeof t.setupOnce&&(t.setupOnce(),installedIntegrations.push(t.name)),t.setup&&"function"==typeof t.setup&&t.setup(e),"function"==typeof t.preprocessEvent){const n=t.preprocessEvent.bind(t);e.on("preprocessEvent",((t,r)=>n(t,r,e)))}if("function"==typeof t.processEvent){const n=t.processEvent.bind(t),r=Object.assign(((t,r)=>n(t,r,e)),{id:t.name});e.addEventProcessor(r)}DEBUG_BUILD$4&&logger.log(`Integration installed: ${t.name}`)}}function defineIntegration(e){return e}function createClientReportEnvelope(e,t,n){return createEnvelope(t?{dsn:t}:{},[[{type:"client_report"},{timestamp:dateTimestampInSeconds(),discarded_events:e}]])}class SentryError extends Error{constructor(e,t="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=t}}const ALREADY_SEEN_ERROR="Not capturing exception because it's already been captured.";class BaseClient{constructor(e){if(this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=makeDsn(e.dsn):DEBUG_BUILD$4&&logger.warn("No DSN provided, client will not send events."),this._dsn){const t=getEnvelopeEndpointWithUrlEncodedAuth(this._dsn,e.tunnel,e._metadata?e._metadata.sdk:void 0);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}const t=["enableTracing","tracesSampleRate","tracesSampler"].find((t=>t in e&&null==e[t]));t&&consoleSandbox((()=>{console.warn(`[Sentry] Deprecation warning: \`${t}\` is set to undefined, which leads to tracing being enabled. In v9, a value of \`undefined\` will result in tracing being disabled.`)}))}captureException(e,t,n){const r=uuid4();if(checkOrSetAlreadyCaught(e))return DEBUG_BUILD$4&&logger.log(ALREADY_SEEN_ERROR),r;const o={event_id:r,...t};return this._process(this.eventFromException(e,o).then((e=>this._captureEvent(e,o,n)))),o.event_id}captureMessage(e,t,n,r){const o={event_id:uuid4(),...n},i=isParameterizedString(e)?e:String(e),a=isPrimitive(e)?this.eventFromMessage(i,t,o):this.eventFromException(e,o);return this._process(a.then((e=>this._captureEvent(e,o,r)))),o.event_id}captureEvent(e,t,n){const r=uuid4();if(t&&t.originalException&&checkOrSetAlreadyCaught(t.originalException))return DEBUG_BUILD$4&&logger.log(ALREADY_SEEN_ERROR),r;const o={event_id:r,...t},i=(e.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(e,o,i||n)),o.event_id}captureSession(e){"string"!=typeof e.release?DEBUG_BUILD$4&&logger.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),updateSession(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const t=this._transport;return t?(this.emit("flush"),this._isClientDoneProcessing(e).then((n=>t.flush(e).then((e=>n&&e))))):resolvedSyncPromise(!0)}close(e){return this.flush(e).then((e=>(this.getOptions().enabled=!1,this.emit("close"),e)))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}init(){(this._isEnabled()||this._options.integrations.some((({name:e})=>e.startsWith("Spotlight"))))&&this._setupIntegrations()}getIntegrationByName(e){return this._integrations[e]}addIntegration(e){const t=this._integrations[e.name];setupIntegration(this,e,this._integrations),t||afterSetupIntegrations(this,[e])}sendEvent(e,t={}){this.emit("beforeSendEvent",e,t);let n=createEventEnvelope(e,this._dsn,this._options._metadata,this._options.tunnel);for(const o of t.attachments||[])n=addItemToEnvelope(n,createAttachmentEnvelopeItem(o));const r=this.sendEnvelope(n);r&&r.then((t=>this.emit("afterSendEvent",e,t)),null)}sendSession(e){const t=createSessionEnvelope(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(t)}recordDroppedEvent(e,t,n){if(this._options.sendClientReports){const r="number"==typeof n?n:1,o=`${e}:${t}`;DEBUG_BUILD$4&&logger.log(`Recording outcome: "${o}"${r>1?` (${r} times)`:""}`),this._outcomes[o]=(this._outcomes[o]||0)+r}}on(e,t){const n=this._hooks[e]=this._hooks[e]||[];return n.push(t),()=>{const e=n.indexOf(t);e>-1&&n.splice(e,1)}}emit(e,...t){const n=this._hooks[e];n&&n.forEach((e=>e(...t)))}sendEnvelope(e){return this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport?this._transport.send(e).then(null,(e=>(DEBUG_BUILD$4&&logger.error("Error while sending envelope:",e),e))):(DEBUG_BUILD$4&&logger.error("Transport disabled"),resolvedSyncPromise({}))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=setupIntegrations(this,e),afterSetupIntegrations(this,e)}_updateSessionFromEvent(e,t){let n=!1,r=!1;const o=t.exception&&t.exception.values;if(o){r=!0;for(const e of o){const t=e.mechanism;if(t&&!1===t.handled){n=!0;break}}}const i="ok"===e.status;(i&&0===e.errors||i&&n)&&(updateSession(e,{...n&&{status:"crashed"},errors:e.errors||Number(r||n)}),this.captureSession(e))}_isClientDoneProcessing(e){return new SyncPromise((t=>{let n=0;const r=setInterval((()=>{0==this._numProcessing?(clearInterval(r),t(!0)):(n+=1,e&&n>=e&&(clearInterval(r),t(!1)))}),1)}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(e,t,n=getCurrentScope(),r=getIsolationScope()){const o=this.getOptions(),i=Object.keys(this._integrations);return!t.integrations&&i.length>0&&(t.integrations=i),this.emit("preprocessEvent",e,t),e.type||r.setLastEventId(e.event_id||t.event_id),prepareEvent(o,e,t,n,this,r).then((e=>{if(null===e)return e;e.contexts={trace:getTraceContextFromScope(n),...e.contexts};const t=getDynamicSamplingContextFromScope(this,n);return e.sdkProcessingMetadata={dynamicSamplingContext:t,...e.sdkProcessingMetadata},e}))}_captureEvent(e,t={},n){return this._processEvent(e,t,n).then((e=>e.event_id),(e=>{if(DEBUG_BUILD$4){const t=e;"log"===t.logLevel?logger.log(t.message):logger.warn(t)}}))}_processEvent(e,t,n){const r=this.getOptions(),{sampleRate:o}=r,i=isTransactionEvent(e),a=isErrorEvent(e),s=e.type||"error",c=`before send for type \`${s}\``,l=void 0===o?void 0:parseSampleRate(o);if(a&&"number"==typeof l&&Math.random()>l)return this.recordDroppedEvent("sample_rate","error",e),rejectedSyncPromise(new SentryError(`Discarding event because it's not included in the random sample (sampling rate = ${o})`,"log"));const u="replay_event"===s?"replay":s,d=(e.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(e,t,n,d).then((n=>{if(null===n)throw this.recordDroppedEvent("event_processor",u,e),new SentryError("An event processor returned `null`, will not send event.","log");if(t.data&&!0===t.data.__sentry__)return n;return _validateBeforeSendResult(processBeforeSend(this,r,n,t),c)})).then((r=>{if(null===r){if(this.recordDroppedEvent("before_send",u,e),i){const t=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",t)}throw new SentryError(`${c} returned \`null\`, will not send event.`,"log")}const o=n&&n.getSession();if(!i&&o&&this._updateSessionFromEvent(o,r),i){const e=(r.sdkProcessingMetadata&&r.sdkProcessingMetadata.spanCountBeforeProcessing||0)-(r.spans?r.spans.length:0);e>0&&this.recordDroppedEvent("before_send","span",e)}const a=r.transaction_info;if(i&&a&&r.transaction!==e.transaction){const e="custom";r.transaction_info={...a,source:e}}return this.sendEvent(r,t),r})).then(null,(e=>{if(e instanceof SentryError)throw e;throw this.captureException(e,{data:{__sentry__:!0},originalException:e}),new SentryError(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${e}`)}))}_process(e){this._numProcessing++,e.then((e=>(this._numProcessing--,e)),(e=>(this._numProcessing--,e)))}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.entries(e).map((([e,t])=>{const[n,r]=e.split(":");return{reason:n,category:r,quantity:t}}))}_flushOutcomes(){DEBUG_BUILD$4&&logger.log("Flushing outcomes...");const e=this._clearOutcomes();if(0===e.length)return void(DEBUG_BUILD$4&&logger.log("No outcomes to send"));if(!this._dsn)return void(DEBUG_BUILD$4&&logger.log("No dsn provided, will not send outcomes"));DEBUG_BUILD$4&&logger.log("Sending outcomes:",e);const t=createClientReportEnvelope(e,this._options.tunnel&&dsnToString(this._dsn));this.sendEnvelope(t)}}function _validateBeforeSendResult(e,t){const n=`${t} must return \`null\` or a valid event.`;if(isThenable$1(e))return e.then((e=>{if(!isPlainObject$3(e)&&null!==e)throw new SentryError(n);return e}),(e=>{throw new SentryError(`${t} rejected with ${e}`)}));if(!isPlainObject$3(e)&&null!==e)throw new SentryError(n);return e}function processBeforeSend(e,t,n,r){const{beforeSend:o,beforeSendTransaction:i,beforeSendSpan:a}=t;if(isErrorEvent(n)&&o)return o(n,r);if(isTransactionEvent(n)){if(n.spans&&a){const t=[];for(const r of n.spans){const n=a(r);n?t.push(n):(showSpanDropWarning(),e.recordDroppedEvent("before_send","span"))}n.spans=t}if(i){if(n.spans){const e=n.spans.length;n.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:e}}return i(n,r)}}return n}function isErrorEvent(e){return void 0===e.type}function isTransactionEvent(e){return"transaction"===e.type}function initAndBind(e,t){!0===t.debug&&(DEBUG_BUILD$4?logger.enable():consoleSandbox((()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})));getCurrentScope().update(t.initialScope);const n=new e(t);return setCurrentClient(n),n.init(),n}function setCurrentClient(e){getCurrentScope().setClient(e)}function makePromiseBuffer(e){const t=[];function n(e){return t.splice(t.indexOf(e),1)[0]||Promise.resolve(void 0)}return{$:t,add:function(r){if(!(void 0===e||t.length<e))return rejectedSyncPromise(new SentryError("Not adding Promise because buffer limit was reached."));const o=r();return-1===t.indexOf(o)&&t.push(o),o.then((()=>n(o))).then(null,(()=>n(o).then(null,(()=>{})))),o},drain:function(e){return new SyncPromise(((n,r)=>{let o=t.length;if(!o)return n(!0);const i=setTimeout((()=>{e&&e>0&&n(!1)}),e);t.forEach((e=>{resolvedSyncPromise(e).then((()=>{--o||(clearTimeout(i),n(!0))}),r)}))}))}}}const DEFAULT_RETRY_AFTER=6e4;function parseRetryAfterHeader(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return 1e3*n;const r=Date.parse(`${e}`);return isNaN(r)?DEFAULT_RETRY_AFTER:r-t}function disabledUntil(e,t){return e[t]||e.all||0}function isRateLimited(e,t,n=Date.now()){return disabledUntil(e,t)>n}function updateRateLimits(e,{statusCode:t,headers:n},r=Date.now()){const o={...e},i=n&&n["x-sentry-rate-limits"],a=n&&n["retry-after"];if(i)for(const s of i.trim().split(",")){const[e,t,,,n]=s.split(":",5),i=parseInt(e,10),a=1e3*(isNaN(i)?60:i);if(t)for(const s of t.split(";"))"metric_bucket"===s&&n&&!n.split(";").includes("custom")||(o[s]=r+a);else o.all=r+a}else a?o.all=r+parseRetryAfterHeader(a,r):429===t&&(o.all=r+6e4);return o}const DEFAULT_TRANSPORT_BUFFER_SIZE=64;function createTransport(e,t,n=makePromiseBuffer(e.bufferSize||DEFAULT_TRANSPORT_BUFFER_SIZE)){let r={};return{send:function(o){const i=[];if(forEachEnvelopeItem(o,((t,n)=>{const o=envelopeItemTypeToDataCategory(n);if(isRateLimited(r,o)){const r=getEventForEnvelopeItem(t,n);e.recordDroppedEvent("ratelimit_backoff",o,r)}else i.push(t)})),0===i.length)return resolvedSyncPromise({});const a=createEnvelope(o[0],i),s=t=>{forEachEnvelopeItem(a,((n,r)=>{const o=getEventForEnvelopeItem(n,r);e.recordDroppedEvent(t,envelopeItemTypeToDataCategory(r),o)}))};return n.add((()=>t({body:serializeEnvelope(a)}).then((e=>(void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&DEBUG_BUILD$4&&logger.warn(`Sentry responded with status code ${e.statusCode} to sent event.`),r=updateRateLimits(r,e),e)),(e=>{throw s("network_error"),e})))).then((e=>e),(e=>{if(e instanceof SentryError)return DEBUG_BUILD$4&&logger.error("Skipped sending event because buffer is full."),s("queue_overflow"),resolvedSyncPromise({});throw e}))},flush:e=>n.drain(e)}}function getEventForEnvelopeItem(e,t){if("event"===t||"transaction"===t)return Array.isArray(e)?e[1]:void 0}function applySdkMetadata(e,t,n=[t],r="npm"){const o=e._metadata||{};o.sdk||(o.sdk={name:`sentry.javascript.${t}`,packages:n.map((e=>({name:`${r}:@sentry/${e}`,version:SDK_VERSION}))),version:SDK_VERSION}),e._metadata=o}const DEFAULT_BREADCRUMBS=100;function addBreadcrumb(e,t){const n=getClient(),r=getIsolationScope();if(!n)return;const{beforeBreadcrumb:o=null,maxBreadcrumbs:i=DEFAULT_BREADCRUMBS}=n.getOptions();if(i<=0)return;const a={timestamp:dateTimestampInSeconds(),...e},s=o?consoleSandbox((()=>o(a,t))):a;null!==s&&(n.emit&&n.emit("beforeAddBreadcrumb",s,t),r.addBreadcrumb(s,i))}let originalFunctionToString;const INTEGRATION_NAME$7="FunctionToString",SETUP_CLIENTS=new WeakMap,_functionToStringIntegration=()=>({name:INTEGRATION_NAME$7,setupOnce(){originalFunctionToString=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=getOriginalFunction(this),n=SETUP_CLIENTS.has(getClient())&&void 0!==t?t:this;return originalFunctionToString.apply(n,e)}}catch(e){}},setup(e){SETUP_CLIENTS.set(e,!0)}}),functionToStringIntegration=defineIntegration(_functionToStringIntegration),DEFAULT_IGNORE_ERRORS=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,"undefined is not an object (evaluating 'a.L')",'can\'t redefine non-configurable property "solana"',"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler"],INTEGRATION_NAME$6="InboundFilters",_inboundFiltersIntegration=(e={})=>({name:INTEGRATION_NAME$6,processEvent(t,n,r){const o=r.getOptions();return _shouldDropEvent$1(t,_mergeOptions(e,o))?null:t}}),inboundFiltersIntegration=defineIntegration(_inboundFiltersIntegration);function _mergeOptions(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:DEFAULT_IGNORE_ERRORS],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]],ignoreInternal:void 0===e.ignoreInternal||e.ignoreInternal}}function _shouldDropEvent$1(e,t){return t.ignoreInternal&&_isSentryError(e)?(DEBUG_BUILD$4&&logger.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${getEventDescription(e)}`),!0):_isIgnoredError(e,t.ignoreErrors)?(DEBUG_BUILD$4&&logger.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${getEventDescription(e)}`),!0):_isUselessError(e)?(DEBUG_BUILD$4&&logger.warn(`Event dropped due to not having an error message, error type or stacktrace.\nEvent: ${getEventDescription(e)}`),!0):_isIgnoredTransaction(e,t.ignoreTransactions)?(DEBUG_BUILD$4&&logger.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${getEventDescription(e)}`),!0):_isDeniedUrl(e,t.denyUrls)?(DEBUG_BUILD$4&&logger.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${getEventDescription(e)}.\nUrl: ${_getEventFilterUrl(e)}`),!0):!_isAllowedUrl(e,t.allowUrls)&&(DEBUG_BUILD$4&&logger.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${getEventDescription(e)}.\nUrl: ${_getEventFilterUrl(e)}`),!0)}function _isIgnoredError(e,t){return!(e.type||!t||!t.length)&&_getPossibleEventMessages(e).some((e=>stringMatchesSomePattern(e,t)))}function _isIgnoredTransaction(e,t){if("transaction"!==e.type||!t||!t.length)return!1;const n=e.transaction;return!!n&&stringMatchesSomePattern(n,t)}function _isDeniedUrl(e,t){if(!t||!t.length)return!1;const n=_getEventFilterUrl(e);return!!n&&stringMatchesSomePattern(n,t)}function _isAllowedUrl(e,t){if(!t||!t.length)return!0;const n=_getEventFilterUrl(e);return!n||stringMatchesSomePattern(n,t)}function _getPossibleEventMessages(e){const t=[];let n;e.message&&t.push(e.message);try{n=e.exception.values[e.exception.values.length-1]}catch(r){}return n&&n.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`)),t}function _isSentryError(e){try{return"SentryError"===e.exception.values[0].type}catch(t){}return!1}function _getLastValidUrl(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&"<anonymous>"!==n.filename&&"[native code]"!==n.filename)return n.filename||null}return null}function _getEventFilterUrl(e){try{let n;try{n=e.exception.values[0].stacktrace.frames}catch(t){}return n?_getLastValidUrl(n):null}catch(n){return DEBUG_BUILD$4&&logger.error(`Cannot extract url for event ${getEventDescription(e)}`),null}}function _isUselessError(e){return!e.type&&(!(!e.exception||!e.exception.values||0===e.exception.values.length)&&(!e.message&&!e.exception.values.some((e=>e.stacktrace||e.type&&"Error"!==e.type||e.value))))}function applyAggregateErrorsToEvent(e,t,n=250,r,o,i,a){if(!(i.exception&&i.exception.values&&a&&isInstanceOf(a.originalException,Error)))return;const s=i.exception.values.length>0?i.exception.values[i.exception.values.length-1]:void 0;s&&(i.exception.values=truncateAggregateExceptions(aggregateExceptionsFromError(e,t,o,a.originalException,r,i.exception.values,s,0),n))}function aggregateExceptionsFromError(e,t,n,r,o,i,a,s){if(i.length>=n+1)return i;let c=[...i];if(isInstanceOf(r[o],Error)){applyExceptionGroupFieldsForParentException(a,s);const i=e(t,r[o]),l=c.length;applyExceptionGroupFieldsForChildException(i,o,l,s),c=aggregateExceptionsFromError(e,t,n,r[o],o,[i,...c],i,l)}return Array.isArray(r.errors)&&r.errors.forEach(((r,i)=>{if(isInstanceOf(r,Error)){applyExceptionGroupFieldsForParentException(a,s);const l=e(t,r),u=c.length;applyExceptionGroupFieldsForChildException(l,`errors[${i}]`,u,s),c=aggregateExceptionsFromError(e,t,n,r,o,[l,...c],l,u)}})),c}function applyExceptionGroupFieldsForParentException(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,..."AggregateError"===e.type&&{is_exception_group:!0},exception_id:t}}function applyExceptionGroupFieldsForChildException(e,t,n,r){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}function truncateAggregateExceptions(e,t){return e.map((e=>(e.value&&(e.value=truncate(e.value,t)),e)))}function parseUrl$1(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}function addConsoleInstrumentationHandler(e){const t="console";addHandler(t,e),maybeInstrument(t,instrumentConsole)}function instrumentConsole(){"console"in GLOBAL_OBJ&&CONSOLE_LEVELS.forEach((function(e){e in GLOBAL_OBJ.console&&fill(GLOBAL_OBJ.console,e,(function(t){return originalConsoleMethods[e]=t,function(...t){triggerHandlers("console",{args:t,level:e});const n=originalConsoleMethods[e];n&&n.apply(GLOBAL_OBJ.console,t)}}))}))}function severityLevelFromString(e){return"warn"===e?"warning":["fatal","error","warning","log","info","debug"].includes(e)?e:"log"}const INTEGRATION_NAME$5="Dedupe",_dedupeIntegration=()=>{let e;return{name:INTEGRATION_NAME$5,processEvent(t){if(t.type)return t;try{if(_shouldDropEvent(t,e))return DEBUG_BUILD$4&&logger.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(n){}return e=t}}},dedupeIntegration=defineIntegration(_dedupeIntegration);function _shouldDropEvent(e,t){return!!t&&(!!_isSameMessageEvent(e,t)||!!_isSameExceptionEvent(e,t))}function _isSameMessageEvent(e,t){const n=e.message,r=t.message;return!(!n&&!r)&&(!(n&&!r||!n&&r)&&(n===r&&(!!_isSameFingerprint(e,t)&&!!_isSameStacktrace(e,t))))}function _isSameExceptionEvent(e,t){const n=_getExceptionFromEvent(t),r=_getExceptionFromEvent(e);return!(!n||!r)&&(n.type===r.type&&n.value===r.value&&(!!_isSameFingerprint(e,t)&&!!_isSameStacktrace(e,t)))}function _isSameStacktrace(e,t){let n=getFramesFromEvent(e),r=getFramesFromEvent(t);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(r.length!==n.length)return!1;for(let o=0;o<r.length;o++){const e=r[o],t=n[o];if(e.filename!==t.filename||e.lineno!==t.lineno||e.colno!==t.colno||e.function!==t.function)return!1}return!0}function _isSameFingerprint(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return!(n.join("")!==r.join(""))}catch(o){return!1}}function _getExceptionFromEvent(e){return e.exception&&e.exception.values&&e.exception.values[0]}function getBreadcrumbLogLevelFromHttpStatusCode(e){return void 0===e?void 0:e>=400&&e<500?"warning":e>=500?"error":void 0}const WINDOW$3=GLOBAL_OBJ;function supportsFetch(){if(!("fetch"in WINDOW$3))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}function isNativeFunction(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function supportsNativeFetch(){if("string"==typeof EdgeRuntime)return!0;if(!supportsFetch())return!1;if(isNativeFunction(WINDOW$3.fetch))return!0;let e=!1;const t=WINDOW$3.document;if(t&&"function"==typeof t.createElement)try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=isNativeFunction(n.contentWindow.fetch)),t.head.removeChild(n)}catch(n){DEBUG_BUILD$3&&logger.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return e}function addFetchInstrumentationHandler(e,t){const n="fetch";addHandler(n,e),maybeInstrument(n,(()=>instrumentFetch(void 0,t)))}function instrumentFetch(e,t=!1){t&&!supportsNativeFetch()||fill(GLOBAL_OBJ,"fetch",(function(e){return function(...t){const{method:n,url:r}=parseFetchArgs(t),o={args:t,fetchData:{method:n,url:r},startTimestamp:1e3*timestampInSeconds()};triggerHandlers("fetch",{...o});const i=(new Error).stack;return e.apply(GLOBAL_OBJ,t).then((async e=>(triggerHandlers("fetch",{...o,endTimestamp:1e3*timestampInSeconds(),response:e}),e)),(e=>{throw triggerHandlers("fetch",{...o,endTimestamp:1e3*timestampInSeconds(),error:e}),isError(e)&&void 0===e.stack&&(e.stack=i,addNonEnumerableProperty(e,"framesToPop",1)),e}))}}))}function hasProp(e,t){return!!e&&"object"==typeof e&&!!e[t]}function getUrlFromResource(e){return"string"==typeof e?e:e?hasProp(e,"url")?e.url:e.toString?e.toString():"":""}function parseFetchArgs(e){if(0===e.length)return{method:"GET",url:""};if(2===e.length){const[t,n]=e;return{url:getUrlFromResource(t),method:hasProp(n,"method")?String(n.method).toUpperCase():"GET"}}const t=e[0];return{url:getUrlFromResource(t),method:hasProp(t,"method")?String(t.method).toUpperCase():"GET"}}function getSDKSource(){return"npm"}const WINDOW$2=GLOBAL_OBJ;function supportsHistory(){const e=WINDOW$2.chrome,t=e&&e.app&&e.app.runtime,n="history"in WINDOW$2&&!!WINDOW$2.history.pushState&&!!WINDOW$2.history.replaceState;return!t&&n}const WINDOW$1=GLOBAL_OBJ;let ignoreOnError=0;function shouldIgnoreOnError(){return ignoreOnError>0}function ignoreNextOnError(){ignoreOnError++,setTimeout((()=>{ignoreOnError--}))}function wrap(e,t={}){if("function"!=typeof e)return e;try{const t=e.__sentry_wrapped__;if(t)return"function"==typeof t?t:e;if(getOriginalFunction(e))return e}catch(r){return e}const n=function(...n){try{const r=n.map((e=>wrap(e,t)));return e.apply(this,r)}catch(r){throw ignoreNextOnError(),withScope((e=>{e.addEventProcessor((e=>(t.mechanism&&(addExceptionTypeValue(e,void 0),addExceptionMechanism(e,t.mechanism)),e.extra={...e.extra,arguments:n},e))),captureException(r)})),r}};try{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])}catch(r){}markFunctionWrapped(n,e),addNonEnumerableProperty(e,"__sentry_wrapped__",n);try{Object.getOwnPropertyDescriptor(n,"name").configurable&&Object.defineProperty(n,"name",{get:()=>e.name})}catch(o){}return n}const DEBUG_BUILD$2="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function exceptionFromError(e,t){const n=parseStackFrames(e,t),r={type:extractType(t),value:extractMessage(t)};return n.length&&(r.stacktrace={frames:n}),void 0===r.type&&""===r.value&&(r.value="Unrecoverable error caught"),r}function eventFromPlainObject(e,t,n,r){const o=getClient(),i=o&&o.getOptions().normalizeDepth,a=getErrorPropertyFromObject(t),s={__serialized__:normalizeToSize(t,i)};if(a)return{exception:{values:[exceptionFromError(e,a)]},extra:s};const c={exception:{values:[{type:isEvent(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:getNonErrorObjectExceptionValue(t,{isUnhandledRejection:r})}]},extra:s};if(n){const t=parseStackFrames(e,n);t.length&&(c.exception.values[0].stacktrace={frames:t})}return c}function eventFromError(e,t){return{exception:{values:[exceptionFromError(e,t)]}}}function parseStackFrames(e,t){const n=t.stacktrace||t.stack||"",r=getSkipFirstStackStringLines(t),o=getPopFirstTopFrames(t);try{return e(n,r,o)}catch(i){}return[]}const reactMinifiedRegexp=/Minified React error #\d+;/i;function getSkipFirstStackStringLines(e){return e&&reactMinifiedRegexp.test(e.message)?1:0}function getPopFirstTopFrames(e){return"number"==typeof e.framesToPop?e.framesToPop:0}function isWebAssemblyException(e){return"undefined"!=typeof WebAssembly&&void 0!==WebAssembly.Exception&&e instanceof WebAssembly.Exception}function extractType(e){const t=e&&e.name;if(!t&&isWebAssemblyException(e)){return e.message&&Array.isArray(e.message)&&2==e.message.length?e.message[0]:"WebAssembly.Exception"}return t}function extractMessage(e){const t=e&&e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:isWebAssemblyException(e)&&Array.isArray(e.message)&&2==e.message.length?e.message[1]:t:"No error message"}function eventFromException(e,t,n,r){const o=eventFromUnknownInput(e,t,n&&n.syntheticException||void 0,r);return addExceptionMechanism(o),o.level="error",n&&n.event_id&&(o.event_id=n.event_id),resolvedSyncPromise(o)}function eventFromMessage(e,t,n="info",r,o){const i=eventFromString(e,t,r&&r.syntheticException||void 0,o);return i.level=n,r&&r.event_id&&(i.event_id=r.event_id),resolvedSyncPromise(i)}function eventFromUnknownInput(e,t,n,r,o){let i;if(isErrorEvent$1(t)&&t.error){return eventFromError(e,t.error)}if(isDOMError(t)||isDOMException(t)){const o=t;if("stack"in t)i=eventFromError(e,t);else{const t=o.name||(isDOMError(o)?"DOMError":"DOMException"),a=o.message?`${t}: ${o.message}`:t;i=eventFromString(e,a,n,r),addExceptionTypeValue(i,a)}return"code"in o&&(i.tags={...i.tags,"DOMException.code":`${o.code}`}),i}if(isError(t))return eventFromError(e,t);if(isPlainObject$3(t)||isEvent(t)){return i=eventFromPlainObject(e,t,n,o),addExceptionMechanism(i,{synthetic:!0}),i}return i=eventFromString(e,t,n,r),addExceptionTypeValue(i,`${t}`),addExceptionMechanism(i,{synthetic:!0}),i}function eventFromString(e,t,n,r){const o={};if(r&&n){const r=parseStackFrames(e,n);r.length&&(o.exception={values:[{value:t,stacktrace:{frames:r}}]})}if(isParameterizedString(t)){const{__sentry_template_string__:e,__sentry_template_values__:n}=t;return o.logentry={message:e,params:n},o}return o.message=t,o}function getNonErrorObjectExceptionValue(e,{isUnhandledRejection:t}){const n=extractExceptionKeysForMessage(e),r=t?"promise rejection":"exception";if(isErrorEvent$1(e))return`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``;if(isEvent(e)){return`Event \`${getObjectClassName(e)}\` (type=${e.type}) captured as ${r}`}return`Object captured as ${r} with keys: ${n}`}function getObjectClassName(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(t){}}function getErrorPropertyFromObject(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];if(n instanceof Error)return n}}function createUserFeedbackEnvelope(e,{metadata:t,tunnel:n,dsn:r}){return createEnvelope({event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&t.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!r&&{dsn:dsnToString(r)}},[createUserFeedbackEnvelopeItem(e)])}function createUserFeedbackEnvelopeItem(e){return[{type:"user_report"},e]}class BrowserClient extends BaseClient{constructor(e){const t={parentSpanIsAlwaysRootSpan:!0,...e};applySdkMetadata(t,"browser",["browser"],WINDOW$1.SENTRY_SDK_SOURCE||getSDKSource()),super(t),t.sendClientReports&&WINDOW$1.document&&WINDOW$1.document.addEventListener("visibilitychange",(()=>{"hidden"===WINDOW$1.document.visibilityState&&this._flushOutcomes()}))}eventFromException(e,t){return eventFromException(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",n){return eventFromMessage(this._options.stackParser,e,t,n,this._options.attachStacktrace)}captureUserFeedback(e){if(!this._isEnabled())return void(DEBUG_BUILD$2&&logger.warn("SDK not enabled, will not capture user feedback."));const t=createUserFeedbackEnvelope(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this.sendEnvelope(t)}_prepareEvent(e,t,n){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,n)}}const DEBUG_BUILD$1="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,WINDOW=GLOBAL_OBJ,DEBOUNCE_DURATION=1e3;let debounceTimerID,lastCapturedEventType,lastCapturedEventTargetId,lastHref;function addClickKeypressInstrumentationHandler(e){addHandler("dom",e),maybeInstrument("dom",instrumentDOM)}function instrumentDOM(){if(!WINDOW.document)return;const e=triggerHandlers.bind(null,"dom"),t=makeDOMEventHandler(e,!0);WINDOW.document.addEventListener("click",t,!1),WINDOW.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach((t=>{const n=WINDOW[t],r=n&&n.prototype;r&&r.hasOwnProperty&&r.hasOwnProperty("addEventListener")&&(fill(r,"addEventListener",(function(t){return function(n,r,o){if("click"===n||"keypress"==n)try{const r=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},i=r[n]=r[n]||{refCount:0};if(!i.handler){const r=makeDOMEventHandler(e);i.handler=r,t.call(this,n,r,o)}i.refCount++}catch(i){}return t.call(this,n,r,o)}})),fill(r,"removeEventListener",(function(e){return function(t,n,r){if("click"===t||"keypress"==t)try{const n=this.__sentry_instrumentation_handlers__||{},o=n[t];o&&(o.refCount--,o.refCount<=0&&(e.call(this,t,o.handler,r),o.handler=void 0,delete n[t]),0===Object.keys(n).length&&delete this.__sentry_instrumentation_handlers__)}catch(o){}return e.call(this,t,n,r)}})))}))}function isSimilarToLastCapturedEvent(e){if(e.type!==lastCapturedEventType)return!1;try{if(!e.target||e.target._sentryId!==lastCapturedEventTargetId)return!1}catch(t){}return!0}function shouldSkipDOMEvent(e,t){return"keypress"===e&&(!t||!t.tagName||"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&!t.isContentEditable)}function makeDOMEventHandler(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const r=getEventTarget(n);if(shouldSkipDOMEvent(n.type,r))return;addNonEnumerableProperty(n,"_sentryCaptured",!0),r&&!r._sentryId&&addNonEnumerableProperty(r,"_sentryId",uuid4());const o="keypress"===n.type?"input":n.type;if(!isSimilarToLastCapturedEvent(n)){e({event:n,name:o,global:t}),lastCapturedEventType=n.type,lastCapturedEventTargetId=r?r._sentryId:void 0}clearTimeout(debounceTimerID),debounceTimerID=WINDOW.setTimeout((()=>{lastCapturedEventTargetId=void 0,lastCapturedEventType=void 0}),DEBOUNCE_DURATION)}}function getEventTarget(e){try{return e.target}catch(t){return null}}function addHistoryInstrumentationHandler(e){const t="history";addHandler(t,e),maybeInstrument(t,instrumentHistory)}function instrumentHistory(){if(!supportsHistory())return;const e=WINDOW.onpopstate;function t(e){return function(...t){const n=t.length>2?t[2]:void 0;if(n){const e=lastHref,t=String(n);lastHref=t;triggerHandlers("history",{from:e,to:t})}return e.apply(this,t)}}WINDOW.onpopstate=function(...t){const n=WINDOW.location.href,r=lastHref;lastHref=n;if(triggerHandlers("history",{from:r,to:n}),e)try{return e.apply(this,t)}catch(o){}},fill(WINDOW.history,"pushState",t),fill(WINDOW.history,"replaceState",t)}const cachedImplementations={};function getNativeImplementation(e){const t=cachedImplementations[e];if(t)return t;let n=WINDOW[e];if(isNativeFunction(n))return cachedImplementations[e]=n.bind(WINDOW);const r=WINDOW.document;if(r&&"function"==typeof r.createElement)try{const t=r.createElement("iframe");t.hidden=!0,r.head.appendChild(t);const o=t.contentWindow;o&&o[e]&&(n=o[e]),r.head.removeChild(t)}catch(o){DEBUG_BUILD$1&&logger.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,o)}return n?cachedImplementations[e]=n.bind(WINDOW):n}function clearCachedImplementation(e){cachedImplementations[e]=void 0}const SENTRY_XHR_DATA_KEY="__sentry_xhr_v3__";function addXhrInstrumentationHandler(e){addHandler("xhr",e),maybeInstrument("xhr",instrumentXHR)}function instrumentXHR(){if(!WINDOW.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(e,t,n){const r=1e3*timestampInSeconds(),o=isString$2(n[0])?n[0].toUpperCase():void 0,i=parseUrl(n[1]);if(!o||!i)return e.apply(t,n);t[SENTRY_XHR_DATA_KEY]={method:o,url:i,request_headers:{}},"POST"===o&&i.match(/sentry_key/)&&(t.__sentry_own_request__=!0);const a=()=>{const e=t[SENTRY_XHR_DATA_KEY];if(e&&4===t.readyState){try{e.status_code=t.status}catch(n){}triggerHandlers("xhr",{endTimestamp:1e3*timestampInSeconds(),startTimestamp:r,xhr:t})}};return"onreadystatechange"in t&&"function"==typeof t.onreadystatechange?t.onreadystatechange=new Proxy(t.onreadystatechange,{apply:(e,t,n)=>(a(),e.apply(t,n))}):t.addEventListener("readystatechange",a),t.setRequestHeader=new Proxy(t.setRequestHeader,{apply(e,t,n){const[r,o]=n,i=t[SENTRY_XHR_DATA_KEY];return i&&isString$2(r)&&isString$2(o)&&(i.request_headers[r.toLowerCase()]=o),e.apply(t,n)}}),e.apply(t,n)}}),e.send=new Proxy(e.send,{apply(e,t,n){const r=t[SENTRY_XHR_DATA_KEY];if(!r)return e.apply(t,n);void 0!==n[0]&&(r.body=n[0]);return triggerHandlers("xhr",{startTimestamp:1e3*timestampInSeconds(),xhr:t}),e.apply(t,n)}})}function parseUrl(e){if(isString$2(e))return e;try{return e.toString()}catch(t){}}function makeFetchTransport(e,t=getNativeImplementation("fetch")){let n=0,r=0;return createTransport(e,(function(o){const i=o.body.length;n+=i,r++;const a={body:o.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};if(!t)return clearCachedImplementation("fetch"),rejectedSyncPromise("No fetch implementation available");try{return t(e.url,a).then((e=>(n-=i,r--,{statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}})))}catch(s){return clearCachedImplementation("fetch"),n-=i,r--,rejectedSyncPromise(s)}}))}const CHROME_PRIORITY=30,GECKO_PRIORITY=50;function createFrame(e,t,n,r){const o={filename:e,function:"<anonymous>"===t?UNKNOWN_FUNCTION:t,in_app:!0};return void 0!==n&&(o.lineno=n),void 0!==r&&(o.colno=r),o}const chromeRegexNoFnName=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,chromeRegex=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,chromeEvalRegex=/\((\S*)(?::(\d+))(?::(\d+))\)/,chromeStackParserFn=e=>{const t=chromeRegexNoFnName.exec(e);if(t){const[,e,n,r]=t;return createFrame(e,UNKNOWN_FUNCTION,+n,+r)}const n=chromeRegex.exec(e);if(n){if(n[2]&&0===n[2].indexOf("eval")){const e=chromeEvalRegex.exec(n[2]);e&&(n[2]=e[1],n[3]=e[2],n[4]=e[3])}const[e,t]=extractSafariExtensionDetails(n[1]||UNKNOWN_FUNCTION,n[2]);return createFrame(t,e,n[3]?+n[3]:void 0,n[4]?+n[4]:void 0)}},chromeStackLineParser=[CHROME_PRIORITY,chromeStackParserFn],geckoREgex=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,geckoEvalRegex=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,gecko=e=>{const t=geckoREgex.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const e=geckoEvalRegex.exec(t[3]);e&&(t[1]=t[1]||"eval",t[3]=e[1],t[4]=e[2],t[5]="")}let e=t[3],n=t[1]||UNKNOWN_FUNCTION;return[n,e]=extractSafariExtensionDetails(n,e),createFrame(e,n,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}},geckoStackLineParser=[GECKO_PRIORITY,gecko],defaultStackLineParsers=[chromeStackLineParser,geckoStackLineParser],defaultStackParser=createStackParser(...defaultStackLineParsers),extractSafariExtensionDetails=(e,t)=>{const n=-1!==e.indexOf("safari-extension"),r=-1!==e.indexOf("safari-web-extension");return n||r?[-1!==e.indexOf("@")?e.split("@")[0]:UNKNOWN_FUNCTION,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]},MAX_ALLOWED_STRING_LENGTH=1024,INTEGRATION_NAME$4="Breadcrumbs",_breadcrumbsIntegration=(e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:INTEGRATION_NAME$4,setup(e){t.console&&addConsoleInstrumentationHandler(_getConsoleBreadcrumbHandler(e)),t.dom&&addClickKeypressInstrumentationHandler(_getDomBreadcrumbHandler(e,t.dom)),t.xhr&&addXhrInstrumentationHandler(_getXhrBreadcrumbHandler(e)),t.fetch&&addFetchInstrumentationHandler(_getFetchBreadcrumbHandler(e)),t.history&&addHistoryInstrumentationHandler(_getHistoryBreadcrumbHandler(e)),t.sentry&&e.on("beforeSendEvent",_getSentryBreadcrumbHandler(e))}}},breadcrumbsIntegration=defineIntegration(_breadcrumbsIntegration);function _getSentryBreadcrumbHandler(e){return function(t){getClient()===e&&addBreadcrumb({category:"sentry."+("transaction"===t.type?"transaction":"event"),event_id:t.event_id,level:t.level,message:getEventDescription(t)},{event:t})}}function _getDomBreadcrumbHandler(e,t){return function(n){if(getClient()!==e)return;let r,o,i="object"==typeof t?t.serializeAttribute:void 0,a="object"==typeof t&&"number"==typeof t.maxStringLength?t.maxStringLength:void 0;a&&a>MAX_ALLOWED_STRING_LENGTH&&(DEBUG_BUILD$2&&logger.warn(`\`dom.maxStringLength\` cannot exceed ${MAX_ALLOWED_STRING_LENGTH}, but a value of ${a} was configured. Sentry will use ${MAX_ALLOWED_STRING_LENGTH} instead.`),a=MAX_ALLOWED_STRING_LENGTH),"string"==typeof i&&(i=[i]);try{const e=n.event,t=_isEvent(e)?e.target:e;r=htmlTreeAsString(t,{keyAttrs:i,maxStringLength:a}),o=getComponentName(t)}catch(c){r="<unknown>"}if(0===r.length)return;const s={category:`ui.${n.name}`,message:r};o&&(s.data={"ui.component_name":o}),addBreadcrumb(s,{event:n.event,name:n.name,global:n.global})}}function _getConsoleBreadcrumbHandler(e){return function(t){if(getClient()!==e)return;const n={category:"console",data:{arguments:t.args,logger:"console"},level:severityLevelFromString(t.level),message:safeJoin(t.args," ")};if("assert"===t.level){if(!1!==t.args[0])return;n.message=`Assertion failed: ${safeJoin(t.args.slice(1)," ")||"console.assert"}`,n.data.arguments=t.args.slice(1)}addBreadcrumb(n,{input:t.args,level:t.level})}}function _getXhrBreadcrumbHandler(e){return function(t){if(getClient()!==e)return;const{startTimestamp:n,endTimestamp:r}=t,o=t.xhr[SENTRY_XHR_DATA_KEY];if(!n||!r||!o)return;const{method:i,url:a,status_code:s,body:c}=o,l={method:i,url:a,status_code:s},u={xhr:t.xhr,input:c,startTimestamp:n,endTimestamp:r};addBreadcrumb({category:"xhr",data:l,type:"http",level:getBreadcrumbLogLevelFromHttpStatusCode(s)},u)}}function _getFetchBreadcrumbHandler(e){return function(t){if(getClient()!==e)return;const{startTimestamp:n,endTimestamp:r}=t;if(r&&(!t.fetchData.url.match(/sentry_key/)||"POST"!==t.fetchData.method))if(t.error){addBreadcrumb({category:"fetch",data:t.fetchData,level:"error",type:"http"},{data:t.error,input:t.args,startTimestamp:n,endTimestamp:r})}else{const e=t.response,o={...t.fetchData,status_code:e&&e.status},i={input:t.args,response:e,startTimestamp:n,endTimestamp:r};addBreadcrumb({category:"fetch",data:o,type:"http",level:getBreadcrumbLogLevelFromHttpStatusCode(o.status_code)},i)}}}function _getHistoryBreadcrumbHandler(e){return function(t){if(getClient()!==e)return;let n=t.from,r=t.to;const o=parseUrl$1(WINDOW$1.location.href);let i=n?parseUrl$1(n):void 0;const a=parseUrl$1(r);i&&i.path||(i=o),o.protocol===a.protocol&&o.host===a.host&&(r=a.relative),o.protocol===i.protocol&&o.host===i.host&&(n=i.relative),addBreadcrumb({category:"navigation",data:{from:n,to:r}})}}function _isEvent(e){return!!e&&!!e.target}const DEFAULT_EVENT_TARGET=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],INTEGRATION_NAME$3="BrowserApiErrors",_browserApiErrorsIntegration=(e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:INTEGRATION_NAME$3,setupOnce(){t.setTimeout&&fill(WINDOW$1,"setTimeout",_wrapTimeFunction),t.setInterval&&fill(WINDOW$1,"setInterval",_wrapTimeFunction),t.requestAnimationFrame&&fill(WINDOW$1,"requestAnimationFrame",_wrapRAF),t.XMLHttpRequest&&"XMLHttpRequest"in WINDOW$1&&fill(XMLHttpRequest.prototype,"send",_wrapXHR);const e=t.eventTarget;if(e){(Array.isArray(e)?e:DEFAULT_EVENT_TARGET).forEach(_wrapEventTarget)}}}},browserApiErrorsIntegration=defineIntegration(_browserApiErrorsIntegration);function _wrapTimeFunction(e){return function(...t){const n=t[0];return t[0]=wrap(n,{mechanism:{data:{function:getFunctionName(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function _wrapRAF(e){return function(t){return e.apply(this,[wrap(t,{mechanism:{data:{function:"requestAnimationFrame",handler:getFunctionName(e)},handled:!1,type:"instrument"}})])}}function _wrapXHR(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach((e=>{e in n&&"function"==typeof n[e]&&fill(n,e,(function(t){const n={mechanism:{data:{function:e,handler:getFunctionName(t)},handled:!1,type:"instrument"}},r=getOriginalFunction(t);return r&&(n.mechanism.data.handler=getFunctionName(r)),wrap(t,n)}))})),e.apply(this,t)}}function _wrapEventTarget(e){const t=WINDOW$1[e],n=t&&t.prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(fill(n,"addEventListener",(function(t){return function(n,r,o){try{isEventListenerObject(r)&&(r.handleEvent=wrap(r.handleEvent,{mechanism:{data:{function:"handleEvent",handler:getFunctionName(r),target:e},handled:!1,type:"instrument"}}))}catch(i){}return t.apply(this,[n,wrap(r,{mechanism:{data:{function:"addEventListener",handler:getFunctionName(r),target:e},handled:!1,type:"instrument"}}),o])}})),fill(n,"removeEventListener",(function(e){return function(t,n,r){try{const o=n.__sentry_wrapped__;o&&e.call(this,t,o,r)}catch(o){}return e.call(this,t,n,r)}})))}function isEventListenerObject(e){return"function"==typeof e.handleEvent}const INTEGRATION_NAME$2="GlobalHandlers",_globalHandlersIntegration=(e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:INTEGRATION_NAME$2,setupOnce(){Error.stackTraceLimit=50},setup(e){t.onerror&&(_installGlobalOnErrorHandler(e),globalHandlerLog("onerror")),t.onunhandledrejection&&(_installGlobalOnUnhandledRejectionHandler(e),globalHandlerLog("onunhandledrejection"))}}},globalHandlersIntegration=defineIntegration(_globalHandlersIntegration);function _installGlobalOnErrorHandler(e){addGlobalErrorInstrumentationHandler((t=>{const{stackParser:n,attachStacktrace:r}=getOptions();if(getClient()!==e||shouldIgnoreOnError())return;const{msg:o,url:i,line:a,column:s,error:c}=t,l=_enhanceEventWithInitialFrame(eventFromUnknownInput(n,c||o,void 0,r,!1),i,a,s);l.level="error",captureEvent(l,{originalException:c,mechanism:{handled:!1,type:"onerror"}})}))}function _installGlobalOnUnhandledRejectionHandler(e){addGlobalUnhandledRejectionInstrumentationHandler((t=>{const{stackParser:n,attachStacktrace:r}=getOptions();if(getClient()!==e||shouldIgnoreOnError())return;const o=_getUnhandledRejectionError(t),i=isPrimitive(o)?_eventFromRejectionWithPrimitive(o):eventFromUnknownInput(n,o,void 0,r,!0);i.level="error",captureEvent(i,{originalException:o,mechanism:{handled:!1,type:"onunhandledrejection"}})}))}function _getUnhandledRejectionError(e){if(isPrimitive(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch(t){}return e}function _eventFromRejectionWithPrimitive(e){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(e)}`}]}}}function _enhanceEventWithInitialFrame(e,t,n,r){const o=e.exception=e.exception||{},i=o.values=o.values||[],a=i[0]=i[0]||{},s=a.stacktrace=a.stacktrace||{},c=s.frames=s.frames||[],l=isNaN(parseInt(r,10))?void 0:r,u=isNaN(parseInt(n,10))?void 0:n,d=isString$2(t)&&t.length>0?t:getLocationHref();return 0===c.length&&c.push({colno:l,filename:d,function:UNKNOWN_FUNCTION,in_app:!0,lineno:u}),e}function globalHandlerLog(e){DEBUG_BUILD$2&&logger.log(`Global Handler attached: ${e}`)}function getOptions(){const e=getClient();return e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const httpContextIntegration=defineIntegration((()=>({name:"HttpContext",preprocessEvent(e){if(!WINDOW$1.navigator&&!WINDOW$1.location&&!WINDOW$1.document)return;const t=e.request&&e.request.url||WINDOW$1.location&&WINDOW$1.location.href,{referrer:n}=WINDOW$1.document||{},{userAgent:r}=WINDOW$1.navigator||{},o={...e.request&&e.request.headers,...n&&{Referer:n},...r&&{"User-Agent":r}},i={...e.request,...t&&{url:t},headers:o};e.request=i}}))),DEFAULT_KEY="cause",DEFAULT_LIMIT=5,INTEGRATION_NAME$1="LinkedErrors",_linkedErrorsIntegration=(e={})=>{const t=e.limit||DEFAULT_LIMIT,n=e.key||DEFAULT_KEY;return{name:INTEGRATION_NAME$1,preprocessEvent(e,r,o){const i=o.getOptions();applyAggregateErrorsToEvent(exceptionFromError,i.stackParser,i.maxValueLength,n,t,e,r)}}},linkedErrorsIntegration=defineIntegration(_linkedErrorsIntegration);function getDefaultIntegrations(e){return[inboundFiltersIntegration(),functionToStringIntegration(),browserApiErrorsIntegration(),breadcrumbsIntegration(),globalHandlersIntegration(),linkedErrorsIntegration(),dedupeIntegration(),httpContextIntegration()]}function applyDefaultOptions(e={}){const t={defaultIntegrations:getDefaultIntegrations(),release:"string"==typeof __SENTRY_RELEASE__?__SENTRY_RELEASE__:WINDOW$1.SENTRY_RELEASE&&WINDOW$1.SENTRY_RELEASE.id?WINDOW$1.SENTRY_RELEASE.id:void 0,autoSessionTracking:!0,sendClientReports:!0};return null==e.defaultIntegrations&&delete e.defaultIntegrations,{...t,...e}}function shouldShowBrowserExtensionError(){const e=void 0!==WINDOW$1.window&&WINDOW$1;if(!e)return!1;const t=e[e.chrome?"chrome":"browser"],n=t&&t.runtime&&t.runtime.id,r=WINDOW$1.location&&WINDOW$1.location.href||"",o=!!n&&WINDOW$1===WINDOW$1.top&&["chrome-extension:","moz-extension:","ms-browser-extension:","safari-web-extension:"].some((e=>r.startsWith(`${e}//`))),i=void 0!==e.nw;return!!n&&!o&&!i}function init$1(e={}){const t=applyDefaultOptions(e);if(!t.skipBrowserExtensionCheck&&shouldShowBrowserExtensionError())return void consoleSandbox((()=>{console.error("[Sentry] You cannot run Sentry this way in a browser extension, check: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")}));DEBUG_BUILD$2&&(supportsFetch()||logger.warn("No Fetch API detected. The Sentry SDK requires a Fetch API compatible environment to send events. Please add a Fetch API polyfill."));const n={...t,stackParser:stackParserFromStackParserOptions(t.stackParser||defaultStackParser),integrations:getIntegrationsToSetup(t),transport:t.transport||makeFetchTransport},r=initAndBind(BrowserClient,n);return t.autoSessionTracking&&startSessionTracking(),r}function startSessionTracking(){void 0!==WINDOW$1.document?(startSession({ignoreDuration:!0}),captureSession(),addHistoryInstrumentationHandler((({from:e,to:t})=>{void 0!==e&&e!==t&&(startSession({ignoreDuration:!0}),captureSession())}))):DEBUG_BUILD$2&&logger.warn("Session tracking in non-browser environment with @sentry/browser is not supported.")}const DEFAULT_HOOKS=["activate","mount","update"],DEBUG_BUILD="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,classifyRE=/(?:^|[-_])(\w)/g,classify=e=>e.replace(classifyRE,(e=>e.toUpperCase())).replace(/[-_]/g,""),ROOT_COMPONENT_NAME="<Root>",ANONYMOUS_COMPONENT_NAME="<Anonymous>",repeat=(e,t)=>e.repeat(t),formatComponentName=(e,t)=>{if(!e)return ANONYMOUS_COMPONENT_NAME;if(e.$root===e)return ROOT_COMPONENT_NAME;if(!e.$options)return ANONYMOUS_COMPONENT_NAME;const n=e.$options;let r=n.name||n._componentTag||n.__name;const o=n.__file;if(!r&&o){const e=o.match(/([^/\\]+)\.vue$/);e&&(r=e[1])}return(r?`<${classify(r)}>`:ANONYMOUS_COMPONENT_NAME)+(o&&!1!==t?` at ${o}`:"")},generateComponentTrace=e=>{if(e&&(e._isVue||e.__isVue)&&e.$parent){const t=[];let n=0;for(;e;){if(t.length>0){const r=t[t.length-1];if(r.constructor===e.constructor){n++,e=e.$parent;continue}n>0&&(t[t.length-1]=[r,n],n=0)}t.push(e),e=e.$parent}return`\n\nfound in\n\n${t.map(((e,t)=>`${(0===t?"---\x3e ":repeat(" ",5+2*t))+(Array.isArray(e)?`${formatComponentName(e[0])}... (${e[1]} recursive calls)`:formatComponentName(e))}`)).join("\n")}`}return`\n\n(found in ${formatComponentName(e)})`},attachErrorHandler=(e,t)=>{const{errorHandler:n,warnHandler:r,silent:o}=e.config;e.config.errorHandler=(i,a,s)=>{const c=formatComponentName(a,!1),l=a?generateComponentTrace(a):"",u={componentName:c,lifecycleHook:s,trace:l};if(t.attachProps&&a&&(a.$options&&a.$options.propsData?u.propsData=a.$options.propsData:a.$props&&(u.propsData=a.$props)),setTimeout((()=>{captureException(i,{captureContext:{contexts:{vue:u}},mechanism:{handled:!1}})})),"function"==typeof n&&e.config.errorHandler&&n.call(e,i,a,s),t.logErrors){const e="undefined"!=typeof console,t=`Error in ${s}: "${i&&i.toString()}"`;r?r.call(null,t,a,l):e&&!o&&consoleSandbox((()=>{console.error(`[Vue warn]: ${t}${l}`)}))}}},VUE_OP="ui.vue",HOOKS={activate:["activated","deactivated"],create:["beforeCreate","created"],unmount:["beforeUnmount","unmounted"],destroy:["beforeDestroy","destroyed"],mount:["beforeMount","mounted"],update:["beforeUpdate","updated"]};function finishRootSpan(e,t,n){e.$_sentryRootSpanTimer&&clearTimeout(e.$_sentryRootSpanTimer),e.$_sentryRootSpanTimer=setTimeout((()=>{e.$root&&e.$root.$_sentryRootSpan&&(e.$root.$_sentryRootSpan.end(t),e.$root.$_sentryRootSpan=void 0)}),n)}function findTrackComponent(e,t){function n(e){return e.replace(/^<([^\s]*)>(?: at [^\s]*)?$/,"$1")}return e.some((e=>n(t)===n(e)))}const createTracingMixins=e=>{const t=(e.hooks||[]).concat(DEFAULT_HOOKS).filter(((e,t,n)=>n.indexOf(e)===t)),n={};for(const r of t){const t=HOOKS[r];if(t)for(const o of t)n[o]=function(){const n=this.$root===this;n&&(this.$_sentryRootSpan=this.$_sentryRootSpan||startInactiveSpan({name:"Application Render",op:`${VUE_OP}.render`,attributes:{[SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.ui.vue"},onlyIfParent:!0}));const i=formatComponentName(this,!1),a=Array.isArray(e.trackComponents)?findTrackComponent(e.trackComponents,i):e.trackComponents;if(n||a)if(this.$_sentrySpans=this.$_sentrySpans||{},o==t[0]){if(this.$root&&this.$root.$_sentryRootSpan||getActiveSpan()){const e=this.$_sentrySpans[r];e&&e.end(),this.$_sentrySpans[r]=startInactiveSpan({name:`Vue ${i}`,op:`${VUE_OP}.${r}`,attributes:{[SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.ui.vue"},onlyIfParent:!0})}}else{const t=this.$_sentrySpans[r];if(!t)return;t.end(),finishRootSpan(this,timestampInSeconds(),e.timeout)}};else DEBUG_BUILD&&logger.warn(`Unknown hook: ${r}`)}return n},globalWithVue=GLOBAL_OBJ,DEFAULT_CONFIG={Vue:globalWithVue.Vue,attachProps:!0,logErrors:!0,attachErrorHandler:!0,hooks:DEFAULT_HOOKS,timeout:2e3,trackComponents:!1},INTEGRATION_NAME="Vue",vueIntegration=defineIntegration(((e={})=>({name:INTEGRATION_NAME,setup(t){const n={...DEFAULT_CONFIG,...t.getOptions(),...e};if(n.Vue||n.app)if(n.app){(Array.isArray(n.app)?n.app:[n.app]).forEach((e=>vueInit(e,n)))}else n.Vue&&vueInit(n.Vue,n);else consoleSandbox((()=>{console.warn("[@sentry/vue]: Misconfigured SDK. Vue specific errors will not be captured. Update your `Sentry.init` call with an appropriate config option: `app` (Application Instance - Vue 3) or `Vue` (Vue Constructor - Vue 2).")}))}}))),vueInit=(e,t)=>{if(DEBUG_BUILD){const t=e;!0===(t._instance&&t._instance.isMounted)&&consoleSandbox((()=>{console.warn("[@sentry/vue]: Misconfigured SDK. Vue app is already mounted. Make sure to call `app.mount()` after `Sentry.init()`.")}))}t.attachErrorHandler&&attachErrorHandler(e,t),hasTracingEnabled(t)&&e.mixin(createTracingMixins({...t,...t.tracingOptions}))};function init(e={}){return init$1({_metadata:{sdk:{name:"sentry.javascript.vue",packages:[{name:"npm:@sentry/vue",version:SDK_VERSION}],version:SDK_VERSION}},defaultIntegrations:[...getDefaultIntegrations(),vueIntegration()],...e})}function initSentry(e){console.log(" sentry"),init({app:e,dsn:sentryDsn,integrations:[]})}function sentryCaptureEvent({msg:e,needUid:t=!0,transaction:n=null,extra:r=null}){const o={environment:sentryEnvironment,message:e,level:"info"};1==t&&localAuthAvailable()&&(o.user={id:getLoginUserId()}),null!=n&&(o.transaction=n),null!=r&&(o.extra=r),captureEvent(o),console.log(`sentry ${JSON.stringify(o)}`)}function appTrackCamMic(e){sentryCaptureEvent({msg:`cam&mic ${e}`})}function appTrackPushToken(e){sentryCaptureEvent({msg:`pushToken ${e}`,needUid:!1})}function appTrackOrder(e){sentryCaptureEvent({msg:"OrderPaySuccess",needUid:!1,transaction:e})}function appTrackSupportRtc(e){sentryCaptureEvent({msg:e?"RtcSupportYes":"RtcSupportNo",needUid:!1})}console.log(" sentry-app.js");let appTrackSupportPwaCount=0;function appTrackSupportPwa(){0==appTrackSupportPwaCount&&(sentryCaptureEvent({msg:"PwaSupportYes",needUid:!1}),appTrackSupportPwaCount=1)}function appTrackPwaInstallClick(){sentryCaptureEvent({msg:"click_pwaInstall",needUid:!1})}function appTrackPwaAcceptInstall(e){sentryCaptureEvent({msg:e?"click_pwaInstallYes":"click_pwaInstallNo",needUid:!1})}function appTrackMatchClick(){sentryCaptureEvent({msg:"click_match",needUid:!1})}function appTrackFloatRechargeClick(){sentryCaptureEvent({msg:"click_floatRecharge",needUid:!1})}function appTrackGoAppStoreClick(){sentryCaptureEvent({msg:"click_goAppStore",needUid:!1})}function appTrackPeaceAndLove(e){sentryCaptureEvent({msg:"peaceAndLove_area",needUid:!1})}function appTrackAppReady(){sentryCaptureEvent({msg:"App_Ready",needUid:!1})}function appTrackNoThirdPay(){sentryCaptureEvent({msg:"no_thirdPay",needUid:!0})}let appTrackRtmLoginFailCount=2;function appTrackRtmLoginFail(e){0!=appTrackRtmLoginFailCount&&(sentryCaptureEvent({msg:`RtmLoginFail ${e}`,needUid:!0}),appTrackRtmLoginFailCount--)}let appTrackRtmInitFailCount=2;function appTrackRtmInitFail(e){0!=appTrackRtmInitFailCount&&(sentryCaptureEvent({msg:`RtmInitFail ${e}`,needUid:!0}),appTrackRtmInitFailCount--)}let rtmSendInviteSuccessCount=0,rtmSendInviteFailCount=2;function appTrackRtmSendInvite(e){e&&0==rtmSendInviteSuccessCount?(sentryCaptureEvent({msg:"RtmSendInviteSuccess",needUid:!0}),rtmSendInviteSuccessCount=1):e||0==rtmSendInviteFailCount||(sentryCaptureEvent({msg:"RtmSendInviteFail",needUid:!0}),rtmSendInviteFailCount--)}function appTrackThirdLogin(e){sentryCaptureEvent({msg:`ThirdLoginFail ${e}`,needUid:!1})}function googleAuth({success:e=()=>{},fail:t=()=>{}}){const n=getAuth();n.useDeviceLanguage();signInWithPopup(n,new GoogleAuthProvider).then((n=>{console.log("");try{const t=n.user.providerData[0];e(t)}catch(r){t(lanKey.operateFail.tr)}})).catch((e=>{console.error(`${e}`),t(e.message),appTrackThirdLogin(`Google ${null==e?void 0:e.message}`)}))}console.log(" firebase-auth.js"),console.log(" system-device.js");const isFlutterWebApp="undefined"!=typeof flutterWebApp,systemInfo=getSystemInfoSync(),gAppName=systemInfo.appName,gVersion=systemInfo.appVersion,versionCode=systemInfo.appVersionCode,deviceModel=systemInfo.deviceModel,systemVersion=systemInfo.osVersion,systemLanguage=systemInfo.language;setLocale(systemLanguage);const platform$2=systemInfo.platform.toLowerCase();systemInfo.browserName;const inAppName="sela";function getDeviceId(){let e=storeRead("localDeviceId");return isFlutterWebApp?(console.log(`flutterWebApp id ${e}`),e):(""==e||null==e||null==e?(e=`${gAppName.toLowerCase()}-web-${systemInfo.deviceId}`,storeSave({key:"localDeviceId",value:e})):console.log("localDeviceId"),e)}let deviceId=isFlutterWebApp?"":getDeviceId();function channel(){return console.log(`${JSON.stringify(systemInfo)}`),console.log(`${platform$2}`),"100"}function isiPhoneAndNotPwa(){const e=deviceModel.toLowerCase().includes("iphone");return e&&window.navigator.standalone?(console.log("  pwa"),!1):e}function isAndroid(){return platform$2.includes("android")}const userAgent=`${inAppName.toLowerCase()},${gVersion},${deviceModel.replaceAll(","," ")},${systemVersion},${inAppName.toLowerCase()}${channel()},${versionCode}`;let header=null;function netHeader(e){return null!=header&&null!=header||(header={},header["user-language"]=systemLanguage,header["s-ua"]=userAgent,header["s-platform"]="web",header["device-id"]=deviceId),""==deviceId&&(deviceId=getDeviceId(),header["device-id"]=deviceId),console.log(` id ${deviceId}`),header.Authorization=e?"":getLoginAuth(),header}function checkCamAndMicPermission({needLogin:e=!1,success:t=()=>{},fail:n=()=>{}}){e&&!localAuthAvailable()?showLoginModal():(void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(e){var t=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return t?new Promise((function(n,r){t.call(navigator,e,n,r)})):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then((function(e){e.getTracks().forEach((e=>e.stop())),t(),appTrackCamMic("success"),storeSave({key:"devicePermission",value:!0})})).catch((function(e){n(),appTrackCamMic(null==e?void 0:e.name),storeSave({key:"devicePermission",value:!1})})))}const getRandomInt=(e,t)=>(e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e),getRandomChars=e=>{const t="abcdefhjkmnprstuvwxyz2345678".split("");return t.sort((()=>Math.random()-.5)),t.slice(0,e).join("")};console.log(" app-config.js");let _agoraAppId=null;const storeAgoraAppId="storeAgoraAppId";let _appConfig=null;const storeAppConfig="storeAppConfig";function cacheAppConfig({forceRefresh:e=!1,success:t=()=>{},fail:n=()=>{}}){getAppConfig(),1!=e&&null!=_appConfig&&null!=_appConfig&&""!=_appConfig?(t(_appConfig),console.log("config ")):(console.log("config/ "),netConfig({success:e=>{console.log("config"),null!=e.agoraAppId&&null!=e.agoraAppId&&""!=e.agoraAppId&&saveAgoraAppId(e.agoraAppId),saveAppConfig(e),t(_appConfig)}}))}function saveAppConfig(e){_appConfig=e,storeSave({key:storeAppConfig,value:e})}function getAppConfig(){return null!=_appConfig&&null!=_appConfig||(_appConfig=storeRead(storeAppConfig)),_appConfig}function saveAgoraAppId(e){_agoraAppId=e,storeSave({key:storeAgoraAppId,value:e})}function getAgoraAppId(){return(null==_agoraAppId||null==_agoraAppId||_agoraAppId.length<=0)&&(_agoraAppId=storeRead(storeAgoraAppId)),_agoraAppId}let _sensitiveWords=null;const storeSensitiveWords="storeSensitiveWords";function filterWords(e){if(e.length<=2)return"**";if(3===e.length)return e.substring(0,1)+"**";{const t=Math.floor(e.length/2);return e.substring(0,t-1)+"**"+e.substring(t+1)}}const checkSensitiveWords=({str:e="",receiveId:t="",channelId:n="",matchCallBack:r=()=>{}})=>{let o=!1,i="";const a=null!=_sensitiveWords?_sensitiveWords:[];for(const c of a)if(e.toLowerCase().includes(c.words.toLowerCase())){2===c.type?(console.log(`  ${c.words}`),e=(e=e.replaceAll(c.words,filterWords(c.words))).replaceAll(c.words.toLowerCase(),filterWords(c.words.toLowerCase()))):1===c.type&&(console.log(`  ${c.words}`),o=!0,i=c.words);break}const s=new RegExp("\\d{4,}").test(e);o||s?(console.log("   "),r(null),netUploadSensitiveRecord({receiveId:t,channelId:n,words:e,wordsSub:i})):(console.log(" "),r(e))};function cacheSensitiveWords({forceRefresh:e=!1,success:t=()=>{},fail:n=()=>{}}){getSensitive(),1!=e&&null!=_sensitiveWords&&null!=_sensitiveWords&&""!=_sensitiveWords?(t(_sensitiveWords),console.log(" ")):(console.log("/ "),localAuthAvailable()&&netSensitiveWords({success:e=>{console.log(""),saveSensitive(e),t(_sensitiveWords)}}))}function saveSensitive(e){_sensitiveWords=e,storeSave({key:storeSensitiveWords,value:_sensitiveWords})}function getSensitive(){return null!=_sensitiveWords&&null!=_sensitiveWords||(_sensitiveWords=storeRead(storeSensitiveWords)),_sensitiveWords}function guestLogin(){if(!localAuthAvailable()){console.log("");const e=storeRead("accountLoginCache");if(null!=e.password&&null!=e.password&&""!=e.password)console.log(" /"),netAccountLogin({username:e.username,password:e.password,success:()=>{showGuestPwdTipModal({username:e.username,pwd:e.password})},fail:()=>{console.log(" "),storeClear("accountLoginCache")}});else{console.log(" ");const e=getRandomChars(6);netGuestLogin({password:e,success:t=>{showGuestPwdTipModal({username:null==t?void 0:t.username,pwd:e,alwaysDownload:!0})}})}}}let mask=null;function showLoading(){mask=_n(`${lanKey.refreshLoading.tr}`),console.log("loading")}function showLoadingContent(e){mask=_n(e),console.log("loading")}function hideLoading(){mask&&(console.log("loading"),setTimeout((()=>{mask(),mask=null}),500))}let igAlert="!";const binDownload=(e,t,n)=>{igAlert="";var r=document.createElement("a");r.href=e,r.download=t,r.click(),setTimeout((()=>{igAlert="!"}),3e3)};function linkJump(e){var t,n;e.startsWith("/hostList")?switchTab({url:"/pages/tab_bar/home/home"}):e.startsWith("/message")?switchTab({url:"/pages/tab_bar/conversation/conversation"}):e.startsWith("/myInfo")?navigateTo({url:"/pages/tab_bar/mine/edit-profile/edit-profile"}):e.startsWith("/rechargeCenter")?showRechargeModal({}):e.startsWith("/aiHelp")?navigateTo({url:`/pages/third-page/third-page?url=${null==(t=getAppConfig())?void 0:t.aiHelpUrl}&title=`}):e.startsWith("/customerService")?navigateTo({url:`/pages/third-page/third-page?url=${null==(n=getAppConfig())?void 0:n.aiHelpUrl}&title=`}):e.startsWith("/setting")?navigateTo({url:"/pages/tab_bar/mine/setting/setting"}):e.startsWith("/match")?localAuthAvailable()?navigateTo({url:"/pages/tab_bar/match/match"}):showLoginModal():e.startsWith("http")?window.open(e,"web","popup"):(console.log(" app"),showAppDownloadChatModal({type:1}))}const openGooglePlay=()=>{appTrackGoAppStoreClick(),isAndroid()?window.open("https://app.adjust.com/1hkj04w3","googlePlay","popup"):showNotificationError$1({content:"The app is currently only available on Android phones"})},openPrivacy=()=>{window.open("https://sites.google.com/view/emmaprivacy","privacy","popup")},openService=()=>{window.open("https://sites.google.com/view/emmatermsofservice","service","popup")},_export_sfc=(e,t)=>{const n=e.__vccOpts||e;for(const[r,o]of t)n[r]=o;return n},_sfc_main$f={__name:"modal-login",props:["type"],emits:["close"],setup(e,{emit:t}){const n=ref(null);cacheAppConfig({success:e=>{n.value=null==e?void 0:e.registerReward}});const r=ref(!1),o=e=>{if(console.log(""),0==e){console.log("");const e=storeRead("accountLoginCache");if(null!=e.password&&null!=e.password&&""!=e.password)console.log(" /"),netAccountLogin({username:e.username,password:e.password,success:l,fail:()=>{console.log(" "),storeClear("accountLoginCache")}});else{console.log(" ");const e=getRandomChars(6);netGuestLogin({password:e,success:t=>{l(),showGuestPwdTipModal({username:null==t?void 0:t.username,pwd:e})}})}}else 1==e?googleAuth({success:e=>{netGoogleLogin({id:e.uid,nickname:e.displayName,cover:e.photoURL,token:e.accessToken,email:e.email,success:l})},fail:e=>{showNotificationError$1({content:e})}}):c()};function i(e,t){t.stopPropagation(),0==e?openPrivacy():openService()}const a=e,s=t,c=()=>{1!=(null==a?void 0:a.type)&&(console.log(""),s("close")),showAccountLoginModal({})},l=()=>{1==(null==a?void 0:a.type)?(console.log(""),switchTab({url:"/pages/tab_bar/home/home"})):(console.log(""),s("close"))};return(e,t)=>{const a=index$g,s=index$i,u=ScrollView;return openBlock(),createBlock(a,{class:"loginBack modal-gradient"},{default:withCtx((()=>[createVNode(a,{class:"home_logo_logo_text"}),createVNode(s,{class:"first-reward-tip"},{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(lanKey).firstRegisterTip.tr),1)])),_:1}),createVNode(u,{"show-scrollbar":"false",class:"reward-scroll","scroll-x":"true"},{default:withCtx((()=>[createVNode(a,{class:"reward-scroll-item"},{default:withCtx((()=>[createVNode(a,{class:"reward-scroll-item-top"},{default:withCtx((()=>[createVNode(a,{class:"reward-icon props-match-big"}),createVNode(s,null,{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(lanKey).matchCard.tr),1)])),_:1})])),_:1}),createVNode(s,{class:"count"},{default:withCtx((()=>{var e;return[createTextVNode("x"+toDisplayString$1(null==(e=n.value)?void 0:e.matchCardNum),1)]})),_:1})])),_:1}),createVNode(a,{class:"reward-scroll-item"},{default:withCtx((()=>[createVNode(a,{class:"reward-scroll-item-top"},{default:withCtx((()=>[createVNode(a,{class:"reward-icon props-video-big"}),createVNode(s,null,{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(lanKey).videoCard.tr),1)])),_:1})])),_:1}),createVNode(s,{class:"count"},{default:withCtx((()=>{var e;return[createTextVNode("x"+toDisplayString$1(null==(e=n.value)?void 0:e.callCardNum),1)]})),_:1})])),_:1}),createVNode(a,{class:"reward-scroll-item"},{default:withCtx((()=>[createVNode(a,{class:"reward-scroll-item-top"},{default:withCtx((()=>[createVNode(a,{class:"reward-icon props-chat-big"}),createVNode(s,null,{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(lanKey).chatCard.tr),1)])),_:1})])),_:1}),createVNode(s,{class:"count"},{default:withCtx((()=>{var e;return[createTextVNode("x"+toDisplayString$1(null==(e=n.value)?void 0:e.chatCardNum),1)]})),_:1})])),_:1}),createVNode(a,{class:"reward-scroll-item"},{default:withCtx((()=>[createVNode(a,{class:"reward-scroll-item-top"},{default:withCtx((()=>[createVNode(a,{class:"reward-icon props-diamond"}),createVNode(s,null,{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(lanKey).diamond.tr),1)])),_:1})])),_:1}),createVNode(s,{class:"count"},{default:withCtx((()=>{var e;return[createTextVNode("x"+toDisplayString$1(null==(e=n.value)?void 0:e.diamonds.toBin),1)]})),_:1})])),_:1})])),_:1}),createVNode(a,{class:"loginBtnArea"},{default:withCtx((()=>[createVNode(a,{class:"loginBtn quickLogin",onClick:t[0]||(t[0]=e=>o(0))},{default:withCtx((()=>[createVNode(a,{class:"loginIcon quickIcon"}),createVNode(s,null,{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(lanKey).quickLogin.tr),1)])),_:1})])),_:1}),createVNode(a,{class:"loginBtn",onClick:t[1]||(t[1]=e=>o(1))},{default:withCtx((()=>[createVNode(a,{class:"loginIcon googleIcon"}),createVNode(s,null,{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(lanKey).googleLogin.tr),1)])),_:1})])),_:1}),createVNode(a,{class:"loginBtn",style:{"background-color":"#8D5DFFFF",color:"white"},onClick:c},{default:withCtx((()=>[createVNode(a,{class:"loginIcon accountIcon"}),createVNode(s,null,{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(lanKey).accountLogin.tr),1)])),_:1})])),_:1})])),_:1}),createVNode(a,{class:"agreeArea",onClick:t[4]||(t[4]=e=>r.value=!r.value)},{default:withCtx((()=>[createVNode(s,{class:"agree-privacy"},{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(lanKey).loginAgree.tr)+" ",1),createVNode(s,{onClick:t[2]||(t[2]=e=>i(1,e))},{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(lanKey).service.tr),1)])),_:1}),createTextVNode(" "+toDisplayString$1(unref(lanKey).and.tr)+" ",1),createVNode(s,{onClick:t[3]||(t[3]=e=>i(0,e))},{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(lanKey).privacy.tr),1)])),_:1}),createTextVNode(" "+toDisplayString$1(unref(lanKey).loginAgreeTail.tr),1)])),_:1})])),_:1}),createVNode(a,{class:"bottom-safe-inset"}),createVNode(a,{class:"close-out",onClick:l},{default:withCtx((()=>[createVNode(a,{class:"close"})])),_:1})])),_:1})}}},ModalLoginVue=_export_sfc(_sfc_main$f,[["__scopeId","data-v-6850a309"]]),_sfc_main$e={__name:"modal-login-account",props:["resetPwd"],emits:["close"],setup(e,{emit:t}){const n=e,r=ref(!1),o=ref(""),i=ref(""),a=()=>o.value.length<=0?(console.log(""),void showNotificationError({content:""})):i.value.length<=0?(console.log(""),void showNotificationError({content:""})):(console.log(` ${o.value} ${i.value}`),void netAccountLogin({username:o.value,password:i.value,success:l}));function s(e,t){t.stopPropagation(),0==e?openPrivacy():openService()}if(n.resetPwd){console.log(" ");const e=storeRead("accountLoginCache");null!=e.username&&null!=e.username&&""!=e.username&&(o.value=e.username,i.value=""),setTimeout((()=>{null!=e.username&&null!=e.username&&""!=e.username&&(o.value=e.username,i.value="")}),500)}else setTimeout((()=>{if(""==i.value){console.log(" ");const e=storeRead("accountLoginCache");null!=e.password&&null!=e.password&&""!=e.password&&(console.log(" /"),o.value=e.username,i.value=e.password)}}),500);const c=t,l=()=>c("close");return(e,t)=>{const n=index$i,c=Input,u=index$g;return openBlock(),createBlock(u,{class:"loginBack"},{default:withCtx((()=>[createVNode(u,{class:"input-area"},{default:withCtx((()=>[createVNode(n,null,{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(lanKey).account.tr),1)])),_:1}),createVNode(u,{class:"input-content"},{default:withCtx((()=>[createVNode(c,{type:"text",name:"username",autocomplete:"username",placeholder:`${unref(lanKey).enterAccount.tr}`,modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=e=>o.value=e)},null,8,["placeholder","modelValue"])])),_:1}),createVNode(n,null,{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(lanKey).password.tr),1)])),_:1}),createVNode(u,{class:"input-content"},{default:withCtx((()=>[createVNode(c,{type:"password",name:"password",autocomplete:"current-password",placeholder:`${unref(lanKey).enterPassword.tr}`,modelValue:i.value,"onUpdate:modelValue":t[1]||(t[1]=e=>i.value=e)},null,8,["placeholder","modelValue"])])),_:1})])),_:1}),createVNode(u,{class:"loginBtnArea"},{default:withCtx((()=>[createVNode(u,{class:"loginBtn",style:{"background-color":"#8D5DFFFF",color:"white"},onClick:a},{default:withCtx((()=>[createVNode(n,null,{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(lanKey).accountLogin.tr),1)])),_:1})])),_:1})])),_:1}),createVNode(u,{class:"agreeArea",onClick:t[4]||(t[4]=e=>r.value=!r.value)},{default:withCtx((()=>[createVNode(n,{class:"agree-privacy"},{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(lanKey).loginAgree.tr)+" ",1),createVNode(n,{onClick:t[2]||(t[2]=e=>s(1,e))},{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(lanKey).service.tr),1)])),_:1}),createTextVNode(" "+toDisplayString$1(unref(lanKey).and.tr)+" ",1),createVNode(n,{onClick:t[3]||(t[3]=e=>s(0,e))},{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(lanKey).privacy.tr),1)])),_:1}),createTextVNode(" "+toDisplayString$1(unref(lanKey).loginAgreeTail.tr),1)])),_:1})])),_:1}),createVNode(u,{class:"close-out",onClick:l},{default:withCtx((()=>[createVNode(u,{class:"close"})])),_:1})])),_:1})}}},ModalAccountLoginVue=_export_sfc(_sfc_main$e,[["__scopeId","data-v-665a7259"]]);var f$1=defineComponent({name:"vue3-danmaku",components:{},props:{danmus:{type:Array,required:!0,default:()=>[]},channels:{type:Number,default:0},autoplay:{type:Boolean,default:!0},loop:{type:Boolean,default:!1},useSlot:{type:Boolean,default:!1},debounce:{type:Number,default:100},speeds:{type:Number,default:200},randomChannel:{type:Boolean,default:!1},fontSize:{type:Number,default:18},top:{type:Number,default:4},right:{type:Number,default:0},isSuspend:{type:Boolean,default:!1},extraStyle:{type:String,default:""}},emits:["list-end","play-end","dm-over","dm-out","update:danmus"],setup(e,{emit:t,slots:n}){let r=ref(document.createElement("div")),o=ref(document.createElement("div"));const i=ref(0),a=ref(0);let s=0;const c=ref(0),l=ref(0),u=ref(0),d=ref(!1),A=ref(!1),p=ref({}),h=function(e,t,n="modelValue"){return computed({get:()=>e[n],set:e=>{t(`update:${n}`,e)}})}(e,t,"danmus"),f=reactive({channels:computed((()=>e.channels||c.value)),autoplay:computed((()=>e.autoplay)),loop:computed((()=>e.loop)),useSlot:computed((()=>e.useSlot)),debounce:computed((()=>e.debounce)),randomChannel:computed((()=>e.randomChannel))}),g=reactive({height:computed((()=>l.value)),fontSize:computed((()=>e.fontSize)),speeds:computed((()=>e.speeds)),top:computed((()=>e.top)),right:computed((()=>e.right))});function m(){_(),e.isSuspend&&function(){let e=[];o.value.addEventListener("mouseover",(n=>{let r=n.target;r.className.includes("dm")||(r=r.closest(".dm")||r),r.className.includes("dm")&&(e.includes(r)||(t("dm-over",{el:r}),r.classList.add("pause"),e.push(r)))})),o.value.addEventListener("mouseout",(n=>{let r=n.target;r.className.includes("dm")||(r=r.closest(".dm")||r),r.className.includes("dm")&&(t("dm-out",{el:r}),r.classList.remove("pause"),e.forEach((e=>{e.classList.remove("pause")})),e=[])}))}(),f.autoplay&&E()}function _(){if(i.value=r.value.offsetWidth,a.value=r.value.offsetHeight,0===i.value||0===a.value)throw new Error("")}function E(){A.value=!1,s||(s=window.setInterval((()=>function(){if(!A.value&&h.value.length)if(u.value>h.value.length-1){const e=o.value.children.length;f.loop&&(e<u.value&&(t("list-end"),u.value=0),v())}else v()}()),f.debounce))}function v(r){const s=f.loop?u.value%h.value.length:u.value,d=r||h.value[s];let A=document.createElement("div");var m,_;f.useSlot?A=(m=d,_=s,createApp$1({render:()=>h$1("div",{},[n.dm&&n.dm({danmu:m,index:_})])}).mount(document.createElement("div"))).$el:(A.innerHTML=d,A.setAttribute("style",e.extraStyle),A.style.fontSize=`${g.fontSize}px`,A.style.lineHeight=`${g.fontSize}px`),A.classList.add("dm"),o.value.appendChild(A),A.style.opacity="0",nextTick((()=>{g.height||(l.value=A.offsetHeight),f.channels||(c.value=Math.floor(a.value/(g.height+g.top)));let e=function(e){let t=[...Array(f.channels).keys()];f.randomChannel&&(t=t.sort((()=>.5-Math.random())));for(let n of t){const t=p.value[n];if(!t||!t.length)return p.value[n]=[e],e.addEventListener("animationend",(()=>p.value[n].splice(0,1))),n%f.channels;for(let r=0;r<t.length;r++){const o=y(t[r])-10;if(o<=.88*(e.offsetWidth-t[r].offsetWidth)||o<=0)break;if(r===t.length-1)return p.value[n].push(e),e.addEventListener("animationend",(()=>p.value[n].splice(0,1))),n%f.channels}}return-1}(A);if(e>=0){const n=A.offsetWidth,r=g.height;A.classList.add("move"),A.dataset.index=`${s}`,A.dataset.channel=e.toString(),A.style.opacity="1",A.style.top=e*(r+g.top)+"px",A.style.width=n+g.right+"px",A.style.setProperty("--dm-scroll-width",`-${i.value+n}px`),A.style.left=`${i.value}px`,A.style.animationDuration=i.value/g.speeds+"s",A.addEventListener("animationend",(()=>{Number(A.dataset.index)!==h.value.length-1||f.loop||t("play-end",A.dataset.index),o.value&&o.value.removeChild(A)})),u.value++}else o.value.removeChild(A)}))}function y(e){const t=e.offsetWidth||parseInt(e.style.width),n=e.getBoundingClientRect().right||o.value.getBoundingClientRect().right+t;return o.value.getBoundingClientRect().right-n}function b(){clearInterval(s),s=0,u.value=0}return onMounted((()=>{m()})),onBeforeUnmount((()=>{b()})),{container:r,dmContainer:o,hidden:d,paused:A,danmuList:h,getPlayState:function(){return!A.value},resize:function(){_();const e=o.value.getElementsByClassName("dm");for(let t=0;t<e.length;t++){const n=e[t];n.style.setProperty("--dm-scroll-width",`-${i.value+n.offsetWidth}px`),n.style.left=`${i.value}px`,n.style.animationDuration=i.value/g.speeds+"s"}},play:E,pause:function(){A.value=!0},stop:function(){p.value={},o.value.innerHTML="",A.value=!0,d.value=!1,b()},show:function(){d.value=!1},hide:function(){d.value=!0},reset:function(){l.value=0,m()},add:function(e){if(u.value===h.value.length)return h.value.push(e),h.value.length-1;{const t=u.value%h.value.length;return h.value.splice(t,0,e),t+1}},push:function(e){return h.value.push(e),h.value.length-1},insert:v}}});const p={ref:"container",class:"vue-danmaku"};!function(e,t){void 0===t&&(t={});var n=t.insertAt;if("undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".vue-danmaku {\n  position: relative;\n  overflow: hidden;\n}\n.vue-danmaku .danmus {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  opacity: 0;\n  -webkit-transition: all 0.3s;\n  transition: all 0.3s;\n}\n.vue-danmaku .danmus.show {\n  opacity: 1;\n}\n.vue-danmaku .danmus.paused .dm.move {\n  animation-play-state: paused;\n}\n.vue-danmaku .danmus .dm {\n  position: absolute;\n  font-size: 20px;\n  color: #ddd;\n  white-space: pre;\n  transform: translateX(0);\n  transform-style: preserve-3d;\n}\n.vue-danmaku .danmus .dm.move {\n  will-change: transform;\n  animation-name: moveLeft;\n  animation-timing-function: linear;\n  animation-play-state: running;\n}\n.vue-danmaku .danmus .dm.pause {\n  animation-play-state: paused;\n  z-index: 100;\n}\n@keyframes moveLeft {\n  from {\n    transform: translateX(0);\n  }\n  to {\n    transform: translateX(var(--dm-scroll-width));\n  }\n}\n@-webkit-keyframes moveLeft {\n  from {\n    -webkit-transform: translateX(0);\n  }\n  to {\n    -webkit-transform: translateX(var(--dm-scroll-width));\n  }\n}"),f$1.render=function(e,t,n,r,o,i){return openBlock(),createElementBlock("div",p,[createBaseVNode("div",{ref:"dmContainer",class:normalizeClass(["danmus",{show:!e.hidden},{paused:e.paused}])},null,2),renderSlot(e.$slots,"default")],512)},f$1.__file="src/lib/Danmaku.vue";var isVue2=!1;
/*!
 * pinia v2.2.6
 * (c) 2024 Eduardo San Martin Morote
 * @license MIT
 */let activePinia;const setActivePinia=e=>activePinia=e,piniaSymbol=Symbol();function isPlainObject$2(e){return e&&"object"==typeof e&&"[object Object]"===Object.prototype.toString.call(e)&&"function"!=typeof e.toJSON}var MutationType,MutationType2;function createPinia(){const e=effectScope(!0),t=e.run((()=>ref({})));let n=[],r=[];const o=markRaw({install(e){setActivePinia(o),o._a=e,e.provide(piniaSymbol,o),e.config.globalProperties.$pinia=o,r.forEach((e=>n.push(e))),r=[]},use(e){return this._a||isVue2?n.push(e):r.push(e),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return o}MutationType2=MutationType||(MutationType={}),MutationType2.direct="direct",MutationType2.patchObject="patch object",MutationType2.patchFunction="patch function";const noop$1=()=>{};function addSubscription(e,t,n,r=noop$1){e.push(t);const o=()=>{const n=e.indexOf(t);n>-1&&(e.splice(n,1),r())};return!n&&getCurrentScope$1()&&onScopeDispose(o),o}function triggerSubscriptions(e,...t){e.slice().forEach((e=>{e(...t)}))}const fallbackRunWithContext=e=>e(),ACTION_MARKER=Symbol(),ACTION_NAME=Symbol();function mergeReactiveObjects(e,t){e instanceof Map&&t instanceof Map?t.forEach(((t,n)=>e.set(n,t))):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n],o=e[n];isPlainObject$2(o)&&isPlainObject$2(r)&&e.hasOwnProperty(n)&&!isRef(r)&&!isReactive(r)?e[n]=mergeReactiveObjects(o,r):e[n]=r}return e}const skipHydrateSymbol=Symbol();function shouldHydrate(e){return!isPlainObject$2(e)||!e.hasOwnProperty(skipHydrateSymbol)}const{assign:assign$1}=Object;function isComputed(e){return!(!isRef(e)||!e.effect)}function createOptionsStore(e,t,n,r){const{state:o,actions:i,getters:a}=t,s=n.state.value[e];let c;return c=createSetupStore(e,(function(){s||(n.state.value[e]=o?o():{});const t=toRefs(n.state.value[e]);return assign$1(t,i,Object.keys(a||{}).reduce(((t,r)=>(t[r]=markRaw(computed((()=>{setActivePinia(n);const t=n._s.get(e);return a[r].call(t,t)}))),t)),{}))}),t,n,r,!0),c}function createSetupStore(e,t,n={},r,o,i){let a;const s=assign$1({actions:{}},n),c={deep:!0};let l,u,d,A=[],p=[];const h=r.state.value[e];let f;function g(t){let n;l=u=!1,"function"==typeof t?(t(r.state.value[e]),n={type:MutationType.patchFunction,storeId:e,events:d}):(mergeReactiveObjects(r.state.value[e],t),n={type:MutationType.patchObject,payload:t,storeId:e,events:d});const o=f=Symbol();nextTick().then((()=>{f===o&&(l=!0)})),u=!0,triggerSubscriptions(A,n,r.state.value[e])}i||h||(r.state.value[e]={}),ref({});const m=i?function(){const{state:e}=n,t=e?e():{};this.$patch((e=>{assign$1(e,t)}))}:noop$1;const _=(t,n="")=>{if(ACTION_MARKER in t)return t[ACTION_NAME]=n,t;const o=function(){setActivePinia(r);const n=Array.from(arguments),i=[],a=[];let s;triggerSubscriptions(p,{args:n,name:o[ACTION_NAME],store:E,after:function(e){i.push(e)},onError:function(e){a.push(e)}});try{s=t.apply(this&&this.$id===e?this:E,n)}catch(c){throw triggerSubscriptions(a,c),c}return s instanceof Promise?s.then((e=>(triggerSubscriptions(i,e),e))).catch((e=>(triggerSubscriptions(a,e),Promise.reject(e)))):(triggerSubscriptions(i,s),s)};return o[ACTION_MARKER]=!0,o[ACTION_NAME]=n,o},E=reactive({_p:r,$id:e,$onAction:addSubscription.bind(null,p),$patch:g,$reset:m,$subscribe(t,n={}){const o=addSubscription(A,t,n.detached,(()=>i())),i=a.run((()=>watch((()=>r.state.value[e]),(r=>{("sync"===n.flush?u:l)&&t({storeId:e,type:MutationType.direct,events:d},r)}),assign$1({},c,n))));return o},$dispose:function(){a.stop(),A=[],p=[],r._s.delete(e)}});r._s.set(e,E);const v=(r._a&&r._a.runWithContext||fallbackRunWithContext)((()=>r._e.run((()=>(a=effectScope()).run((()=>t({action:_})))))));for(const y in v){const t=v[y];if(isRef(t)&&!isComputed(t)||isReactive(t))i||(h&&shouldHydrate(t)&&(isRef(t)?t.value=h[y]:mergeReactiveObjects(t,h[y])),r.state.value[e][y]=t);else if("function"==typeof t){const e=_(t,y);v[y]=e,s.actions[y]=t}}return assign$1(E,v),assign$1(toRaw(E),v),Object.defineProperty(E,"$state",{get:()=>r.state.value[e],set:e=>{g((t=>{assign$1(t,e)}))}}),r._p.forEach((e=>{assign$1(E,a.run((()=>e({store:E,app:r._a,pinia:r,options:s}))))})),h&&i&&n.hydrate&&n.hydrate(E.$state,h),l=!0,u=!0,E}
/*! #__NO_SIDE_EFFECTS__ */function defineStore(e,t,n){let r,o;const i="function"==typeof t;function a(e,n){const a=hasInjectionContext();(e=e||(a?inject(piniaSymbol,null):null))&&setActivePinia(e),(e=activePinia)._s.has(r)||(i?createSetupStore(r,t,o,e):createOptionsStore(r,o,e));return e._s.get(r)}return r=e,o=i?n:t,a.$id=r,a}function storeToRefs(e){{const t=toRaw(e),n={};for(const r in t){const o=t[r];(isRef(o)||isReactive(o))&&(n[r]=toRef(e,r))}return n}}var localforage$1={exports:{}};
/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/localforage$1.exports=function e(t,n,r){function o(a,s){if(!n[a]){if(!t[a]){var c="function"==typeof commonjsRequire&&commonjsRequire;if(!s&&c)return c(a,!0);if(i)return i(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[a]={exports:{}};t[a][0].call(u.exports,(function(e){var n=t[a][1][e];return o(n||e)}),u,u.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof commonjsRequire&&commonjsRequire,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){(function(e){var n,r,o=e.MutationObserver||e.WebKitMutationObserver;if(o){var i=0,a=new o(u),s=e.document.createTextNode("");a.observe(s,{characterData:!0}),n=function(){s.data=i=++i%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)};else{var c=new e.MessageChannel;c.port1.onmessage=u,n=function(){c.port2.postMessage(0)}}var l=[];function u(){var e,t;r=!0;for(var n=l.length;n;){for(t=l,l=[],e=-1;++e<n;)t[e]();n=l.length}r=!1}function d(e){1!==l.push(e)||r||n()}t.exports=d}).call(this,void 0!==commonjsGlobal?commonjsGlobal:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){var r=e(1);function o(){}var i={},a=["REJECTED"],s=["FULFILLED"],c=["PENDING"];function l(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,e!==o&&p(this,e)}function u(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function d(e,t,n){r((function(){var r;try{r=t(n)}catch(o){return i.reject(e,o)}r===e?i.reject(e,new TypeError("Cannot resolve promise with itself")):i.resolve(e,r)}))}function A(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function p(e,t){var n=!1;function r(t){n||(n=!0,i.reject(e,t))}function o(t){n||(n=!0,i.resolve(e,t))}function a(){t(o,r)}var s=h(a);"error"===s.status&&r(s.value)}function h(e,t){var n={};try{n.value=e(t),n.status="success"}catch(r){n.status="error",n.value=r}return n}function f(e){return e instanceof this?e:i.resolve(new this(o),e)}function g(e){var t=new this(o);return i.reject(t,e)}function m(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var a=new Array(n),s=0,c=-1,l=new this(o);++c<n;)u(e[c],c);return l;function u(e,o){function c(e){a[o]=e,++s!==n||r||(r=!0,i.resolve(l,a))}t.resolve(e).then(c,(function(e){r||(r=!0,i.reject(l,e))}))}}function _(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var a=-1,s=new this(o);++a<n;)c(e[a]);return s;function c(e){t.resolve(e).then((function(e){r||(r=!0,i.resolve(s,e))}),(function(e){r||(r=!0,i.reject(s,e))}))}}t.exports=l,l.prototype.catch=function(e){return this.then(null,e)},l.prototype.then=function(e,t){if("function"!=typeof e&&this.state===s||"function"!=typeof t&&this.state===a)return this;var n=new this.constructor(o);return this.state!==c?d(n,this.state===s?e:t,this.outcome):this.queue.push(new u(n,e,t)),n},u.prototype.callFulfilled=function(e){i.resolve(this.promise,e)},u.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},u.prototype.callRejected=function(e){i.reject(this.promise,e)},u.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},i.resolve=function(e,t){var n=h(A,t);if("error"===n.status)return i.reject(e,n.value);var r=n.value;if(r)p(e,r);else{e.state=s,e.outcome=t;for(var o=-1,a=e.queue.length;++o<a;)e.queue[o].callFulfilled(t)}return e},i.reject=function(e,t){e.state=a,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},l.resolve=f,l.reject=g,l.all=m,l.race=_},{1:1}],3:[function(e,t,n){(function(t){"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==commonjsGlobal?commonjsGlobal:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,n){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}var a=i();function s(){try{if(!a||!a.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(n){return!1}}function c(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(o){if("TypeError"!==o.name)throw o;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)n.append(e[r]);return n.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var l=Promise;function u(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function d(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}function A(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function p(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var h="local-forage-detect-blob-support",f=void 0,g={},m=Object.prototype.toString,_="readonly",E="readwrite";function v(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),o=0;o<t;o++)r[o]=e.charCodeAt(o);return n}function y(e){return new l((function(t){var n=e.transaction(h,E),r=c([""]);n.objectStore(h).put(r,"key"),n.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},n.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))}function b(e){return"boolean"==typeof f?l.resolve(f):y(e).then((function(e){return f=e}))}function C(e){var t=g[e.name],n={};n.promise=new l((function(e,t){n.resolve=e,n.reject=t})),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then((function(){return n.promise})):t.dbReady=n.promise}function S(e){var t=g[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function w(e,t){var n=g[e.name].deferredOperations.pop();if(n)return n.reject(t),n.promise}function T(e,t){return new l((function(n,r){if(g[e.name]=g[e.name]||U(),e.db){if(!t)return n(e.db);C(e),e.db.close()}var o=[e.name];t&&o.push(e.version);var i=a.open.apply(a,o);t&&(i.onupgradeneeded=function(t){var n=i.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore(h)}catch(r){if("ConstraintError"!==r.name)throw r;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),i.onerror=function(e){e.preventDefault(),r(i.error)},i.onsuccess=function(){var t=i.result;t.onversionchange=function(e){e.target.close()},n(t),S(e)}}))}function I(e){return T(e,!1)}function R(e){return T(e,!0)}function O(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,o=e.version>e.db.version;if(r&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),o||n){if(n){var i=e.db.version+1;i>e.version&&(e.version=i)}return!0}return!1}function N(e){return new l((function(t,n){var r=new FileReader;r.onerror=n,r.onloadend=function(n){var r=btoa(n.target.result||"");t({__local_forage_encoded_blob:!0,data:r,type:e.type})},r.readAsBinaryString(e)}))}function k(e){return c([v(atob(e.data))],{type:e.type})}function P(e){return e&&e.__local_forage_encoded_blob}function D(e){var t=this,n=t._initReady().then((function(){var e=g[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return d(n,e,e),n}function L(e){C(e);for(var t=g[e.name],n=t.forages,r=0;r<n.length;r++){var o=n[r];o._dbInfo.db&&(o._dbInfo.db.close(),o._dbInfo.db=null)}return e.db=null,I(e).then((function(t){return e.db=t,O(e)?R(e):t})).then((function(r){e.db=t.db=r;for(var o=0;o<n.length;o++)n[o]._dbInfo.db=r})).catch((function(t){throw w(e,t),t}))}function B(e,t,n,r){void 0===r&&(r=1);try{var o=e.db.transaction(e.storeName,t);n(null,o)}catch(i){if(r>0&&(!e.db||"InvalidStateError"===i.name||"NotFoundError"===i.name))return l.resolve().then((function(){if(!e.db||"NotFoundError"===i.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),R(e)})).then((function(){return L(e).then((function(){B(e,t,n,r-1)}))})).catch(n);n(i)}}function U(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function M(e){var t=this,n={db:null};if(e)for(var r in e)n[r]=e[r];var o=g[n.name];o||(o=U(),g[n.name]=o),o.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=D);var i=[];function a(){return l.resolve()}for(var s=0;s<o.forages.length;s++){var c=o.forages[s];c!==t&&i.push(c._initReady().catch(a))}var u=o.forages.slice(0);return l.all(i).then((function(){return n.db=o.db,I(n)})).then((function(e){return n.db=e,O(n,t._defaultConfig.version)?R(n):e})).then((function(e){n.db=o.db=e,t._dbInfo=n;for(var r=0;r<u.length;r++){var i=u[r];i!==t&&(i._dbInfo.db=n.db,i._dbInfo.version=n.version)}}))}function x(e,t){var n=this;e=A(e);var r=new l((function(t,r){n.ready().then((function(){B(n._dbInfo,_,(function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName).get(e);a.onsuccess=function(){var e=a.result;void 0===e&&(e=null),P(e)&&(e=k(e)),t(e)},a.onerror=function(){r(a.error)}}catch(s){r(s)}}))})).catch(r)}));return u(r,t),r}function F(e,t){var n=this,r=new l((function(t,r){n.ready().then((function(){B(n._dbInfo,_,(function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName).openCursor(),s=1;a.onsuccess=function(){var n=a.result;if(n){var r=n.value;P(r)&&(r=k(r));var o=e(r,n.key,s++);void 0!==o?t(o):n.continue()}else t()},a.onerror=function(){r(a.error)}}catch(c){r(c)}}))})).catch(r)}));return u(r,t),r}function $(e,t,n){var r=this;e=A(e);var o=new l((function(n,o){var i;r.ready().then((function(){return i=r._dbInfo,"[object Blob]"===m.call(t)?b(i.db).then((function(e){return e?t:N(t)})):t})).then((function(t){B(r._dbInfo,E,(function(i,a){if(i)return o(i);try{var s=a.objectStore(r._dbInfo.storeName);null===t&&(t=void 0);var c=s.put(t,e);a.oncomplete=function(){void 0===t&&(t=null),n(t)},a.onabort=a.onerror=function(){var e=c.error?c.error:c.transaction.error;o(e)}}catch(l){o(l)}}))})).catch(o)}));return u(o,n),o}function V(e,t){var n=this;e=A(e);var r=new l((function(t,r){n.ready().then((function(){B(n._dbInfo,E,(function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName).delete(e);i.oncomplete=function(){t()},i.onerror=function(){r(a.error)},i.onabort=function(){var e=a.error?a.error:a.transaction.error;r(e)}}catch(s){r(s)}}))})).catch(r)}));return u(r,t),r}function H(e){var t=this,n=new l((function(e,n){t.ready().then((function(){B(t._dbInfo,E,(function(r,o){if(r)return n(r);try{var i=o.objectStore(t._dbInfo.storeName).clear();o.oncomplete=function(){e()},o.onabort=o.onerror=function(){var e=i.error?i.error:i.transaction.error;n(e)}}catch(a){n(a)}}))})).catch(n)}));return u(n,e),n}function j(e){var t=this,n=new l((function(e,n){t.ready().then((function(){B(t._dbInfo,_,(function(r,o){if(r)return n(r);try{var i=o.objectStore(t._dbInfo.storeName).count();i.onsuccess=function(){e(i.result)},i.onerror=function(){n(i.error)}}catch(a){n(a)}}))})).catch(n)}));return u(n,e),n}function Q(e,t){var n=this,r=new l((function(t,r){e<0?t(null):n.ready().then((function(){B(n._dbInfo,_,(function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName),s=!1,c=a.openKeyCursor();c.onsuccess=function(){var n=c.result;n?0===e||s?t(n.key):(s=!0,n.advance(e)):t(null)},c.onerror=function(){r(c.error)}}catch(l){r(l)}}))})).catch(r)}));return u(r,t),r}function G(e){var t=this,n=new l((function(e,n){t.ready().then((function(){B(t._dbInfo,_,(function(r,o){if(r)return n(r);try{var i=o.objectStore(t._dbInfo.storeName).openKeyCursor(),a=[];i.onsuccess=function(){var t=i.result;t?(a.push(t.key),t.continue()):e(a)},i.onerror=function(){n(i.error)}}catch(s){n(s)}}))})).catch(n)}));return u(n,e),n}function K(e,t){t=p.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,o=this;if(e.name){var i=e.name===n.name&&o._dbInfo.db?l.resolve(o._dbInfo.db):I(e).then((function(t){var n=g[e.name],r=n.forages;n.db=t;for(var o=0;o<r.length;o++)r[o]._dbInfo.db=t;return t}));r=e.storeName?i.then((function(t){if(t.objectStoreNames.contains(e.storeName)){var n=t.version+1;C(e);var r=g[e.name],o=r.forages;t.close();for(var i=0;i<o.length;i++){var s=o[i];s._dbInfo.db=null,s._dbInfo.version=n}return new l((function(t,r){var o=a.open(e.name,n);o.onerror=function(e){o.result.close(),r(e)},o.onupgradeneeded=function(){o.result.deleteObjectStore(e.storeName)},o.onsuccess=function(){var e=o.result;e.close(),t(e)}})).then((function(e){r.db=e;for(var t=0;t<o.length;t++){var n=o[t];n._dbInfo.db=e,S(n._dbInfo)}})).catch((function(t){throw(w(e,t)||l.resolve()).catch((function(){})),t}))}})):i.then((function(t){C(e);var n=g[e.name],r=n.forages;t.close();for(var o=0;o<r.length;o++)r[o]._dbInfo.db=null;return new l((function(t,n){var r=a.deleteDatabase(e.name);r.onerror=function(){var e=r.result;e&&e.close(),n(r.error)},r.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},r.onsuccess=function(){var e=r.result;e&&e.close(),t(e)}})).then((function(e){n.db=e;for(var t=0;t<r.length;t++)S(r[t]._dbInfo)})).catch((function(t){throw(w(e,t)||l.resolve()).catch((function(){})),t}))}))}else r=l.reject("Invalid arguments");return u(r,t),r}var W={_driver:"asyncStorage",_initStorage:M,_support:s(),iterate:F,getItem:x,setItem:$,removeItem:V,clear:H,length:j,key:Q,keys:G,dropInstance:K};function q(){return"function"==typeof openDatabase}var z="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Y="~~local_forage_type~",J=/^~~local_forage_type~([^~]+)~/,X="__lfsc__:",Z=X.length,ee="arbf",te="blob",ne="si08",re="ui08",oe="uic8",ie="si16",ae="si32",se="ur16",ce="ui32",le="fl32",ue="fl64",de=Z+ee.length,Ae=Object.prototype.toString;function pe(e){var t,n,r,o,i,a=.75*e.length,s=e.length,c=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var l=new ArrayBuffer(a),u=new Uint8Array(l);for(t=0;t<s;t+=4)n=z.indexOf(e[t]),r=z.indexOf(e[t+1]),o=z.indexOf(e[t+2]),i=z.indexOf(e[t+3]),u[c++]=n<<2|r>>4,u[c++]=(15&r)<<4|o>>2,u[c++]=(3&o)<<6|63&i;return l}function he(e){var t,n=new Uint8Array(e),r="";for(t=0;t<n.length;t+=3)r+=z[n[t]>>2],r+=z[(3&n[t])<<4|n[t+1]>>4],r+=z[(15&n[t+1])<<2|n[t+2]>>6],r+=z[63&n[t+2]];return n.length%3==2?r=r.substring(0,r.length-1)+"=":n.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}function fe(e,t){var n="";if(e&&(n=Ae.call(e)),e&&("[object ArrayBuffer]"===n||e.buffer&&"[object ArrayBuffer]"===Ae.call(e.buffer))){var r,o=X;e instanceof ArrayBuffer?(r=e,o+=ee):(r=e.buffer,"[object Int8Array]"===n?o+=ne:"[object Uint8Array]"===n?o+=re:"[object Uint8ClampedArray]"===n?o+=oe:"[object Int16Array]"===n?o+=ie:"[object Uint16Array]"===n?o+=se:"[object Int32Array]"===n?o+=ae:"[object Uint32Array]"===n?o+=ce:"[object Float32Array]"===n?o+=le:"[object Float64Array]"===n?o+=ue:t(new Error("Failed to get type for BinaryArray"))),t(o+he(r))}else if("[object Blob]"===n){var i=new FileReader;i.onload=function(){var n=Y+e.type+"~"+he(this.result);t(X+te+n)},i.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(a){console.error("Couldn't convert value into a JSON string: ",e),t(null,a)}}function ge(e){if(e.substring(0,Z)!==X)return JSON.parse(e);var t,n=e.substring(de),r=e.substring(Z,de);if(r===te&&J.test(n)){var o=n.match(J);t=o[1],n=n.substring(o[0].length)}var i=pe(n);switch(r){case ee:return i;case te:return c([i],{type:t});case ne:return new Int8Array(i);case re:return new Uint8Array(i);case oe:return new Uint8ClampedArray(i);case ie:return new Int16Array(i);case se:return new Uint16Array(i);case ae:return new Int32Array(i);case ce:return new Uint32Array(i);case le:return new Float32Array(i);case ue:return new Float64Array(i);default:throw new Error("Unkown type: "+r)}}var me={serialize:fe,deserialize:ge,stringToBuffer:pe,bufferToString:he};function _e(e,t,n,r){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function Ee(e){var t=this,n={db:null};if(e)for(var r in e)n[r]="string"!=typeof e[r]?e[r].toString():e[r];var o=new l((function(e,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(o){return r(o)}n.db.transaction((function(o){_e(o,n,(function(){t._dbInfo=n,e()}),(function(e,t){r(t)}))}),r)}));return n.serializer=me,o}function ve(e,t,n,r,o,i){e.executeSql(n,r,o,(function(e,a){a.code===a.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,s){s.rows.length?i(e,a):_e(e,t,(function(){e.executeSql(n,r,o,i)}),i)}),i):i(e,a)}),i)}function ye(e,t){var n=this;e=A(e);var r=new l((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){ve(n,o,"SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=o.serializer.deserialize(r)),t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return u(r,t),r}function be(e,t){var n=this,r=new l((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){ve(n,o,"SELECT * FROM "+o.storeName,[],(function(n,r){for(var i=r.rows,a=i.length,s=0;s<a;s++){var c=i.item(s),l=c.value;if(l&&(l=o.serializer.deserialize(l)),void 0!==(l=e(l,c.key,s+1)))return void t(l)}t()}),(function(e,t){r(t)}))}))})).catch(r)}));return u(r,t),r}function Ce(e,t,n,r){var o=this;e=A(e);var i=new l((function(i,a){o.ready().then((function(){void 0===t&&(t=null);var s=t,c=o._dbInfo;c.serializer.serialize(t,(function(t,l){l?a(l):c.db.transaction((function(n){ve(n,c,"INSERT OR REPLACE INTO "+c.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){i(s)}),(function(e,t){a(t)}))}),(function(t){if(t.code===t.QUOTA_ERR){if(r>0)return void i(Ce.apply(o,[e,s,n,r-1]));a(t)}}))}))})).catch(a)}));return u(i,n),i}function Se(e,t,n){return Ce.apply(this,[e,t,n,1])}function we(e,t){var n=this;e=A(e);var r=new l((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){ve(n,o,"DELETE FROM "+o.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){r(t)}))}))})).catch(r)}));return u(r,t),r}function Te(e){var t=this,n=new l((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){ve(t,r,"DELETE FROM "+r.storeName,[],(function(){e()}),(function(e,t){n(t)}))}))})).catch(n)}));return u(n,e),n}function Ie(e){var t=this,n=new l((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){ve(t,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],(function(t,n){var r=n.rows.item(0).c;e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return u(n,e),n}function Re(e,t){var n=this,r=new l((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){ve(n,o,"SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,n){var r=n.rows.length?n.rows.item(0).key:null;t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return u(r,t),r}function Oe(e){var t=this,n=new l((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){ve(t,r,"SELECT key FROM "+r.storeName,[],(function(t,n){for(var r=[],o=0;o<n.rows.length;o++)r.push(n.rows.item(o).key);e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return u(n,e),n}function Ne(e){return new l((function(t,n){e.transaction((function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(n,r){for(var o=[],i=0;i<r.rows.length;i++)o.push(r.rows.item(i).name);t({db:e,storeNames:o})}),(function(e,t){n(t)}))}),(function(e){n(e)}))}))}function ke(e,t){t=p.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,o=this;return u(r=e.name?new l((function(t){var r;r=e.name===n.name?o._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:r,storeNames:[e.storeName]}):t(Ne(r))})).then((function(e){return new l((function(t,n){e.db.transaction((function(r){function o(e){return new l((function(t,n){r.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){n(t)}))}))}for(var i=[],a=0,s=e.storeNames.length;a<s;a++)i.push(o(e.storeNames[a]));l.all(i).then((function(){t()})).catch((function(e){n(e)}))}),(function(e){n(e)}))}))})):l.reject("Invalid arguments"),t),r}var Pe={_driver:"webSQLStorage",_initStorage:Ee,_support:q(),iterate:be,getItem:ye,setItem:Se,removeItem:we,clear:Te,length:Ie,key:Re,keys:Oe,dropInstance:ke};function De(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}function Le(e,t){var n=e.name+"/";return e.storeName!==t.storeName&&(n+=e.storeName+"/"),n}function Be(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(t){return!0}}function Ue(){return!Be()||localStorage.length>0}function Me(e){var t=this,n={};if(e)for(var r in e)n[r]=e[r];return n.keyPrefix=Le(e,t._defaultConfig),Ue()?(t._dbInfo=n,n.serializer=me,l.resolve()):l.reject()}function xe(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(e)&&localStorage.removeItem(r)}}));return u(n,e),n}function Fe(e,t){var n=this;e=A(e);var r=n.ready().then((function(){var t=n._dbInfo,r=localStorage.getItem(t.keyPrefix+e);return r&&(r=t.serializer.deserialize(r)),r}));return u(r,t),r}function $e(e,t){var n=this,r=n.ready().then((function(){for(var t=n._dbInfo,r=t.keyPrefix,o=r.length,i=localStorage.length,a=1,s=0;s<i;s++){var c=localStorage.key(s);if(0===c.indexOf(r)){var l=localStorage.getItem(c);if(l&&(l=t.serializer.deserialize(l)),void 0!==(l=e(l,c.substring(o),a++)))return l}}}));return u(r,t),r}function Ve(e,t){var n=this,r=n.ready().then((function(){var t,r=n._dbInfo;try{t=localStorage.key(e)}catch(o){t=null}return t&&(t=t.substring(r.keyPrefix.length)),t}));return u(r,t),r}function He(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo,n=localStorage.length,r=[],o=0;o<n;o++){var i=localStorage.key(o);0===i.indexOf(e.keyPrefix)&&r.push(i.substring(e.keyPrefix.length))}return r}));return u(n,e),n}function je(e){var t=this.keys().then((function(e){return e.length}));return u(t,e),t}function Qe(e,t){var n=this;e=A(e);var r=n.ready().then((function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)}));return u(r,t),r}function Ge(e,t,n){var r=this;e=A(e);var o=r.ready().then((function(){void 0===t&&(t=null);var n=t;return new l((function(o,i){var a=r._dbInfo;a.serializer.serialize(t,(function(t,r){if(r)i(r);else try{localStorage.setItem(a.keyPrefix+e,t),o(n)}catch(s){"QuotaExceededError"!==s.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==s.name||i(s),i(s)}}))}))}));return u(o,n),o}function Ke(e,t){if(t=p.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var n=this.config();e.name=e.name||n.name,e.storeName=e.storeName||n.storeName}var r,o=this;return u(r=e.name?new l((function(t){e.storeName?t(Le(e,o._defaultConfig)):t(e.name+"/")})).then((function(e){for(var t=localStorage.length-1;t>=0;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}})):l.reject("Invalid arguments"),t),r}var We={_driver:"localStorageWrapper",_initStorage:Me,_support:De(),iterate:$e,getItem:Fe,setItem:Ge,removeItem:Qe,clear:xe,length:je,key:Ve,keys:He,dropInstance:Ke},qe=function(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)},ze=function(e,t){for(var n=e.length,r=0;r<n;){if(qe(e[r],t))return!0;r++}return!1},Ye=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Je={},Xe={},Ze={INDEXEDDB:W,WEBSQL:Pe,LOCALSTORAGE:We},et=[Ze.INDEXEDDB._driver,Ze.WEBSQL._driver,Ze.LOCALSTORAGE._driver],tt=["dropInstance"],nt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(tt),rt={description:"",driver:et.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function ot(e,t){e[t]=function(){var n=arguments;return e.ready().then((function(){return e[t].apply(e,n)}))}}function it(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(Ye(t[n])?arguments[0][n]=t[n].slice():arguments[0][n]=t[n])}return arguments[0]}var at=function(){function e(t){for(var n in o(this,e),Ze)if(Ze.hasOwnProperty(n)){var r=Ze[n],i=r._driver;this[n]=i,Je[i]||this.defineDriver(r)}this._defaultConfig=it({},rt),this._config=it({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":r(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,n){var r=new l((function(t,n){try{var r=e._driver,o=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void n(o);for(var i=nt.concat("_initStorage"),a=0,s=i.length;a<s;a++){var c=i[a];if((!ze(tt,c)||e[c])&&"function"!=typeof e[c])return void n(o)}var d=function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),n=l.reject(t);return u(n,arguments[arguments.length-1]),n}},n=0,r=tt.length;n<r;n++){var o=tt[n];e[o]||(e[o]=t(o))}};d();var A=function(n){Je[r]&&console.info("Redefining LocalForage driver: "+r),Je[r]=e,Xe[r]=n,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(A,n):A(!!e._support):A(!0)}catch(p){n(p)}}));return d(r,t,n),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,n){var r=Je[e]?l.resolve(Je[e]):l.reject(new Error("Driver not found."));return d(r,t,n),r},e.prototype.getSerializer=function(e){var t=l.resolve(me);return d(t,e),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return d(n,e,e),n},e.prototype.setDriver=function(e,t,n){var r=this;Ye(e)||(e=[e]);var o=this._getSupportedDrivers(e);function i(){r._config.driver=r.driver()}function a(e){return r._extend(e),i(),r._ready=r._initStorage(r._config),r._ready}function s(e){return function(){var t=0;function n(){for(;t<e.length;){var o=e[t];return t++,r._dbInfo=null,r._ready=null,r.getDriver(o).then(a).catch(n)}i();var s=new Error("No available storage method found.");return r._driverSet=l.reject(s),r._driverSet}return n()}}var c=null!==this._driverSet?this._driverSet.catch((function(){return l.resolve()})):l.resolve();return this._driverSet=c.then((function(){var e=o[0];return r._dbInfo=null,r._ready=null,r.getDriver(e).then((function(e){r._driver=e._driver,i(),r._wrapLibraryMethodsWithReady(),r._initDriver=s(o)}))})).catch((function(){i();var e=new Error("No available storage method found.");return r._driverSet=l.reject(e),r._driverSet})),d(this._driverSet,t,n),this._driverSet},e.prototype.supports=function(e){return!!Xe[e]},e.prototype._extend=function(e){it(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var o=e[n];this.supports(o)&&t.push(o)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=nt.length;e<t;e++)ot(this,nt[e])},e.prototype.createInstance=function(t){return new e(t)},e}(),st=new at;t.exports=st},{3:3}]},{},[4])(4);var localforageExports=localforage$1.exports;const localforage=getDefaultExportFromCjs(localforageExports);let _messageStore=null;function initLocalForage(){console.log(""),_messageStore=localforage.createInstance({name:`${gAppName}-message`})}function storageSaveMsg(e,t,n=()=>{}){console.log(""),_messageStore.getItem(e).then((r=>{var o,i,a;let s=0;const c=getCurrentPages$1();if(c.length>0){const t=c[c.length-1];if("/pages/tab_bar/conversation/msg/msg"==(null==(o=null==t?void 0:t.$page)?void 0:o.path)){const n=null==(a=null==(i=null==t?void 0:t.$page)?void 0:i.options)?void 0:a.anchorId;if(null!=n){const t=e.split("_");2==t.length&&t[1]==n&&(console.log(" "),s=1)}}}null==r||null==r?(console.log(" "),t.read=s,_messageStore.setItem(e,[t]).then((e=>{console.log(""),n.call(),useAppDataStore().loadAllConversations({})}))):(console.log(""),t.read=s,r.push(t),console.log(""),_messageStore.setItem(e,r).then((e=>{console.log(""),n.call(),useAppDataStore().loadAllConversations({})})))}),(e=>{console.log(` ${e}`)}))}function storageUpdateMsg({conversationId:e,newMsg:t,success:n=()=>{}}){_messageStore.getItem(e).then((r=>{if(null==r||null==r)console.log(`   ${e}`);else{console.log(`   ${e} `);for(const o of r)if(console.log("  "),o.mid==t.mid){console.log("   "),o.sendFail=t.sendFail,o.timestamp=t.timestamp,_messageStore.setItem(e,r).then((t=>{console.log(`   ${e}`),n.call(),useAppDataStore().loadAllConversations({})}));break}}}),(e=>{console.log(` ${e}`)}))}function storageDeleteConversation(e,t=()=>{}){_messageStore.removeItem(e).then((n=>{console.log(` ${e}`),t.call()}))}function storageReadConversation(e,t=()=>{}){_messageStore.getItem(e).then((n=>{if(null==n||null==n)console.log(` ${e}`);else{console.log(` ${e} `);for(const e of n)e.read=1;_messageStore.setItem(e,n).then((n=>{console.log(` ${e}`),t.call()}))}}),(e=>{console.log(` ${e}`)}))}function storageReadAllConversation(e=()=>{}){_messageStore.iterate(((e,t,n)=>{for(const r of e)r.read=1;_messageStore.setItem(t,e).then((e=>{console.log(` ${t}`)}))})).then((function(){console.log(""),e()})).catch((function(e){console.log(` ${e}`)}))}function storageClearAll(e=()=>{}){_messageStore.clear().then((()=>{console.log(""),e()}),(e=>{console.log(` ${e}`)}))}function storageLoadAllConversations({success:e=()=>{},fail:t=()=>{}}){let n=[];_messageStore.iterate(((e,t,r)=>{var o;const i=t.split("_");if(2==i.length&&i[0]==getLoginUserId()){const t={};t.anchorId=i[i.length-1],t.latestTime=null==(o=e[e.length-1])?void 0:o.timestamp,t.datas=e,n.push(t),n=n.sort(((e,t)=>t.latestTime-e.latestTime))}})).then((function(){console.log(""),e(n)})).catch((function(e){console.log(` ${e}`),t()}))}var adjustLatest={exports:{}},factory;self,factory=()=>(()=>{var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}function o(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}e.d(t,{default:()=>sr});var c=1e3,l=36e5,u=24*l,d=function(e){return e.REASON_GENERAL="general",e.REASON_GDPR="gdpr",e}({}),A={TRANSACTION_ERROR:"XHR transaction failed due to an error",SERVER_MALFORMED_RESPONSE:"Response from server is malformed",SERVER_INTERNAL_ERROR:"Internal error occurred on the server",SERVER_CANNOT_PROCESS:"Server was not able to process the request, probably due to error coming from the client",NO_CONNECTION:"No internet connectivity",SKIP:"Skipping slower attempt",MISSING_URL:"Url is not provided"},p=function(e){return e.NO_STORAGE="noStorage",e.INDEXED_DB="indexedDB",e.LOCAL_STORAGE="localStorage",e}({}),h={default:"adjust.com",india:"adjust.net.in",china:"adjust.world",world:"adjust.world",EU:"eu.adjust.com",TR:"tr.adjust.com",US:"us.adjust.com"},f="https://",g="activity:web_uuid",m="activity:attribution";function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function E(e,t){if(e){if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||E(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e){return!Object.keys(e).length&&e.constructor===Object}function b(e){return"object"===n(e)&&null!==e&&!(e instanceof Array)}function C(e){try{return b(JSON.parse(e))}catch(t){return!1}}function S(e,t,n){function r(e){return Array.isArray(t)?t.every((function(t){return e[t]===n[t]})):e[t]===n}for(var o=0;o<e.length;o+=1)if(r(e[o]))return o;return-1}function w(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((function(e,t){return a(a({},e),{},o({},t.key,t.value))}),{})}function T(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter((function(t){return-1!==e.indexOf(t)}))}function I(e,t){return new RegExp("\\/".concat(t,"(\\/.*|\\?.*){0,1}$")).test(e)}function R(e,t){var n=v(t,2),r=n[0],i=n[1];return a(a({},e),{},o({},r,i))}function O(e){return Object.keys(e).map((function(t){return[t,e[t]]}))}function N(e){return Object.keys(e).map((function(t){return e[t]}))}function k(e){return b(e)?!y(e):!!e||0===e}function P(){try{var e=(new Date).toString(),t=window.localStorage;t.setItem(e,e);var n=t.getItem(e)===e;return t.removeItem(e),!(!n||!t)}catch(r){return!1}}const D={namespace:"adjust-sdk",version:"5.7.1",env:"production"};var L="error",B="warning",U="info",M="verbose",x=o(o(o(o(o({},"none",-1),L,0),B,1),U,2),M,3),F={log:"  ",info:" ",warn:" ",error:""},$={development:M,production:L,test:M},V=j(),H="";function j(){return $[D.env]}function Q(e,t){var n;if(!(x[V]<x[t])){for(var r=(new Date).toISOString(),o=F[e],i=["[".concat(D.namespace,"]"),r,"".concat(e.toUpperCase(),":").concat(o)],a=H?document.querySelector(H):null,s=arguments.length,c=new Array(s>2?s-2:0),l=2;l<s;l++)c[l-2]=arguments[l];(n=console)[e].apply(n,i.concat(c)),a&&(a.textContent+="".concat(i.join(" ")," ").concat(c.map((function(e){return b(e)?JSON.stringify(e):e})).join(" "),"\n"),a.scrollTop=a.scrollHeight)}}function G(e,t){return function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];Q.apply(void 0,[e,t].concat(r))}}const K={setLogLevel:function(e,t){e&&-1===Object.keys(x).indexOf(e)?Q("error","error","You must set one of the available log levels: verbose, info, warning, error or none"):(V=e||j(),H=t||H,Q("info",e,"Log level set to ".concat(V)))},log:G("log",M),info:G("info",U),warn:G("warn",B),error:G("error",L)};var W=null,q=null,z=["appToken","environment"],Y=[].concat(z,["defaultTracker","externalDeviceId"]),J=["customUrl","dataResidency","urlStrategy","eventDeduplicationListLimit","namespace"];function X(e){var t=z.filter((function(t){return!e[t]}));return!!t.length&&(K.error("You must define ".concat(function(e){if(!e.length)return"";if(1===e.length)return"".concat(e[0]);var t=e.length-1,n=e.slice(0,t).join(", ");return"".concat(n," and ").concat(e[t])}(t))),!0)}const Z={sessionWindow:18e5,sessionTimerWindow:6e4,requestValidityWindow:28*u,set:function(e){X(e)||(W=Y.filter((function(t){return!!e[t]})).map((function(t){return[t,e[t]]})).reduce((function(e,t){return R(e,t)}),{}),q=J.filter((function(t){return!!e[t]})).map((function(t){return[t,e[t]]})).reduce(R,{}))},getBaseParams:function(){return W?a({},W):{}},getCustomConfig:function(){return q?a({},q):{}},isInitialised:function(){return z.reduce((function(e,t){return e&&!!W&&!!W[t]}),!0)},hasMissing:X,destroy:function(){W=null,q=null}};var ee=function(e){return e.Queue="queue",e.ActivityState="activityState",e.GlobalParams="globalParams",e.EventDeduplication="eventDeduplication",e}(ee||{}),te=function(e){return e.Queue="q",e.ActivityState="as",e.GlobalParams="gp",e.EventDeduplication="ed",e}(te||{}),ne=function(e){return e.Preferences="p",e}(ne||{}),re={fields:{thirdPartySharingDisabled:{key:"td",keys:{reason:{key:"r",values:o({},d.REASON_GENERAL,1)},pending:{key:"p",values:{false:0,true:1}}}},sdkDisabled:{key:"sd",keys:{reason:{key:"r",values:o(o({},d.REASON_GENERAL,1),d.REASON_GDPR,2)},pending:{key:"p",values:{false:0,true:1}}}}}};function oe(e){return!!e&&Object.prototype.hasOwnProperty.call(e,"values")}function ie(e){return!!e&&Object.prototype.hasOwnProperty.call(e,"keys")}function ae(e){return!!e&&Object.prototype.hasOwnProperty.call(e,"composite")}function se(e){return!!e&&"string"!=typeof e}const ce={queue:{name:te.Queue,scheme:{keyPath:"timestamp",autoIncrement:!1,fields:{url:{key:"u",values:{"/session":1,"/event":2,"/gdpr_forget_device":3,"/sdk_click":4,"/disable_third_party_sharing":5}},method:{key:"m",values:{GET:1,POST:2,PUT:3,DELETE:4}},timestamp:"t",createdAt:"ca",params:{key:"p",keys:{timeSpent:"ts",sessionLength:"sl",sessionCount:"sc",eventCount:"ec",lastInterval:"li",eventToken:"et",revenue:"re",currency:"cu",callbackParams:"cp",partnerParams:"pp"}}}}},activityState:{name:te.ActivityState,scheme:{keyPath:"uuid",autoIncrement:!1,fields:{uuid:{key:"u",values:{unknown:"-"}},timeSpent:"ts",sessionLength:"sl",sessionCount:"sc",eventCount:"ec",lastActive:"la",lastInterval:"li",installed:{key:"in",values:{false:0,true:1}},attribution:{key:"at",keys:{adid:"a",tracker_token:"tt",tracker_name:"tn",network:"nt",campaign:"cm",adgroup:"ag",creative:"cr",click_label:"cl",state:{key:"st",values:{installed:1,reattributed:2}}}}}}},globalParams:{name:te.GlobalParams,scheme:{keyPath:"keyType",autoIncrement:!1,index:"type",fields:{keyType:{key:"kt",composite:["key","type"]},key:"k",value:"v",type:{key:"t",values:{callback:1,partner:2}}}}},eventDeduplication:{name:te.EventDeduplication,scheme:{keyPath:"internalId",autoIncrement:!0,fields:{internalId:"ii",id:"i"}}},preferences:{name:ne.Preferences,scheme:re,permanent:!0}};function le(e){try{return JSON.parse(e)}catch(t){return e}}function ue(e,t,n){var r,o=oe(n)?{values:(r=n.values,O(r).map((function(e){var t=v(e,2),n=t[0];return[t[1],le(n)]})).reduce(R,{}))}:{},i=ie(n)?{keys:de(e,n.keys)}:{},s=ae(n)?{composite:n.composite.map((function(t){return Ae(e,t)}))}:{};return a(a(a({key:t},o),i),s)}function de(e,t){return O(t).map((function(t){var n=v(t,2),r=n[0],o=n[1];return se(o)?[o.key,ue(e,r,o)]:[o,r]})).reduce(R,{})}function Ae(e,t){if(t){var n=ce[e].scheme.fields[t];return se(n)?n.key:n||t}}var pe=O(ce).map((function(e){var t=v(e,2),n=t[0],r=t[1];return[n,{keyPath:r.scheme.keyPath,autoIncrement:r.scheme.autoIncrement,index:r.scheme.index,fields:r.scheme.fields}]})).reduce(R,{}),he=O(pe).map((function(e){var t=v(e,2),n=t[0],r=t[1];return[n,{keyPath:Ae(n,r.keyPath),autoIncrement:r.autoIncrement,index:Ae(n,r.index),fields:de(n,r.fields)}]})).reduce(R,{}),fe=O(ce).reduce((function(e,t){var n=v(t,2)[1];return e.concat(n.scheme.fields)}),[]).map((function(e){return N(e).filter(oe).map((function(e){return O(e.values)})).reduce((function(e,t){return e.concat(t)}),[])})).reduce((function(e,t){return e.concat(t)}),[]).reduce(R,{}),ge=O(ce).map((function(e){var t=v(e,2),n=t[0],r=t[1];return[n,{name:r.name,permanent:r.permanent}]})).reduce(R,{});const me={left:pe,right:he,values:fe,storeNames:{left:ge,right:(_e=ge,O(_e).map((function(e){var t=v(e,2),n=t[0],r=t[1],o={name:n,permanent:r.permanent};return[r.name,o]})).reduce(R,{}))}};var _e,Ee=function(e){return e.LowerBound="lowerBound",e.UpperBound="upperBound",e}(Ee||{});function ve(e){return b(e)}var ye=function(e){return e.right="right",e.left="left",e}(ye||{});function be(e,t){return e&&void 0!==e[t]?e[t]:t}function Ce(e,t,n,r){if(n){var i=r||me[t][Ie(e,ye.right)].fields;return O(n).map((function(n){var r=v(n,2),o=r[0],a=r[1];return function(e,t,n,r,o){if(!o)return[n,r];var i=se(o)?o.key:o;return ve(r)?[i,Ce(e,t,r,ie(o)?o.keys:null)]:[i,be(oe(o)?o.values:null,r)]}(e,t,o,a,i[o])})).reduce((function(e,t){var n=v(t,2),r=n[0],i=n[1];return a(a({},e),{},o({},r,i))}),{})}}function Se(e,t){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:[]).map((function(n){return Ce(e,t,n)}))}function we(e,t,n){var r=me[t][Ie(e,ye.right)],o=r.fields[r.keyPath],i=n instanceof Array?n.slice():[n],a=(ae(o)?o.composite:[r.keyPath]).map((function(e,t){var n=r.fields[e];return be(oe(n)?n.values:null,i[t])}));return 1===a.length?a[0]:a}function Te(e){return me.values[e]||e}function Ie(e,t){return(me.storeNames[t][e]||{}).name||e}function Re(e,t){return{name:t.name,message:t.message.replace('"'.concat(e,'"'),Ie(e,ye.right))}}function Oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ne(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,r(o.key),o)}}function ke(e,t,n){return t&&Ne(e.prototype,t),n&&Ne(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Pe(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e+"",r=1;r<=t;r+=1)e<Math.pow(10,r)&&(n="0".concat(n));return n}function De(e){var t=e?new Date(e):new Date,n=function(e){var t=Pe(e.getDate()),n=Pe(e.getMonth()+1);return[e.getFullYear(),n,t].join("-")}(t),r=function(e){var t=Pe(e.getHours(),1),n=Pe(e.getMinutes()),r=Pe(e.getSeconds()),o=Pe(e.getMilliseconds(),2);return[t,n,r].join(":")+"."+o}(t),o=function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+Pe(Math.floor(Math.abs(t)/60))+Pe(Math.abs(t)%60)}(t);return"".concat(n,"T").concat(r,"Z").concat(o)}function Le(e,t){return isNaN(e)||isNaN(t)?0:Math.abs(t-e)}var Be={},Ue=[];function Me(e,t){var n="id"+Math.random().toString(36).substring(2,16),r={id:n,cb:t};return Be[e]||(Be[e]=[]),Be[e].push(r),n}function xe(e,t){Be[e]&&Be[e].forEach((function(n){"function"==typeof n.cb&&Ue.push(setTimeout((function(){return n.cb(e,t)})))}))}var Fe={},$e=!1,Ve=!1;function He(){Fe=$e?a({},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}):{}}function je(){var e;$e&&(Fe.lastInterval=(e=Fe.lastActive)?Math.round(Le(e,Date.now())/c):-1,Fe.lastActive=Date.now())}function Qe(e){Fe=a(a({},Fe),e)}function Ge(){Ve=!0}function Ke(){var e=Fe.lastActive;return Math.round(Le(e,Date.now())/c)}function We(){return(Fe.timeSpent||0)+(Ve?Ke():0)}function qe(){var e=Le(Fe.lastActive,Date.now())<Z.sessionWindow,t=Ve||!Ve&&e;return(Fe.sessionLength||0)+(t?Ke():0)}function ze(){$e&&(Qe({timeSpent:We(),sessionLength:qe()}),je())}const Ye={get current(){return $e?a({},Fe):{}},set current(e){He(e)},init:function(e){$e=!0,He(e)},isStarted:function(){return $e},toForeground:Ge,toBackground:function(){Ve=!1},initParams:function(){ze(),Ge()},getParams:function(e){if(!$e)return null;var t=Fe.lastInterval>=0?Fe.lastInterval:0,n={timeSpent:Fe.timeSpent||0,sessionLength:Fe.sessionLength||0,sessionCount:Fe.sessionCount||1,lastInterval:t||0};return e&&I(e,"event")&&(n.eventCount=Fe.eventCount),n},updateParams:function(e,t){if($e){var n={};n.timeSpent=We(),n.sessionLength=qe(),I(e,"session")&&(n.sessionCount=(Fe.sessionCount||0)+1),I(e,"event")&&(n.eventCount=(Fe.eventCount||0)+1),Qe(n),t||je()}},updateInstalled:function(){$e&&(Fe.installed||Qe({installed:!0}))},updateSessionOffset:ze,updateSessionLength:function(){$e&&(Qe({sessionLength:qe()}),je())},resetSessionOffset:function(){$e&&Qe({timeSpent:0,sessionLength:0})},updateLastActive:je,destroy:function(){Fe={},$e=!1,Ve=!1},getAttribution:function(){return $e?Fe.attribution?Fe.attribution:(K.log("No attribution data yet"),null):null},getWebUUID:function(){return $e?Fe.uuid:null},waitForAttribution:function(){return Fe.attribution?Promise.resolve(Fe.attribution):new Promise((function(e){return Me(m,(function(t,n){return e(n)}))}))},waitForWebUUID:function(){return Fe.uuid?Promise.resolve(Fe.uuid):new Promise((function(e){return Me(g,(function(t,n){return e(n)}))}))}};var Je=function(){return ke((function e(){Oe(this,e),o(this,"items",{})}),[{key:"getItem",value:function(e){return Object.prototype.hasOwnProperty.call(this.items,e)?this.items[e]:null}},{key:"removeItem",value:function(e){delete this.items[e]}},{key:"setItem",value:function(e,t){this.items[e]=t}}])}(),Xe=function(){return ke((function e(){var t=this;Oe(this,e),o(this,"defaultName",D.namespace),o(this,"storageName",this.defaultName),o(this,"storeNames",me.storeNames.left),this.storesMap={},P()?this.storage=window.localStorage:this.storage=new Je;var n=this.read.bind(this),r=this.write.bind(this);N(this.storeNames).forEach((function(e){var o=e.name;Object.defineProperty(t.storesMap,o,{get:function(){return n(o)},set:function(e){r(o,e)}})})),Object.freeze(this.storesMap)}),[{key:"read",value:function(e){var t=this.storage.getItem("".concat(this.storageName,".").concat(e)),n=t?JSON.parse(t):null;return e===ne.Preferences&&n?Ce(ne.Preferences,ye.right,n):n}},{key:"write",value:function(e,t){t?this.storage.setItem("".concat(this.storageName,".").concat(e),JSON.stringify(t instanceof Array?t:Ce(ne.Preferences,ye.left,t))):this.storage.removeItem("".concat(this.storageName,".").concat(e))}},{key:"clear",value:function(){this.deleteData()}},{key:"deleteData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];N(this.storeNames).forEach((function(n){!t&&n.permanent||e.storage.removeItem("".concat(e.storageName,".").concat(n.name))}))}},{key:"setCustomName",value:function(e){var t=this;if(e&&e.length){var n="".concat(D.namespace,"-").concat(e);N(this.storeNames).forEach((function(e){var r=e.name,o=t.storage.getItem("".concat(t.storageName,".").concat(r));o&&t.storage.setItem("".concat(n,".").concat(r),o)})),this.deleteData(!0),this.storageName=n}}},{key:"stores",get:function(){return this.storesMap}}])}();const Ze=new Xe;var et=ce.preferences.name,tt=null;function nt(){return tt||rt(),tt?a({},tt):null}function rt(){tt=Ze.stores[et]}function ot(){var e=nt();return e&&e.sdkDisabled||null}function it(e){var t=e?a({},e):null;Ze.stores[et]=a(a({},nt()),{},{sdkDisabled:t}),rt()}function at(){var e=Ze.stores[et]||{},t=(tt||{}).sdkDisabled||null;e.sdkDisabled&&!t&&xe("sdk:shutdown"),rt()}function st(){Ze.stores[et]||(Ze.stores[et]=a({},tt))}tt=nt();var ct=function(e){return e.add="add",e.put="put",e.get="get",e.list="list",e.clear="clear",e.delete="delete",e}(ct||{}),lt=function(e){return e.readonly="readonly",e.readwrite="readwrite",e}(lt||{}),ut=function(){function e(){Oe(this,e),o(this,"dbDefaultName",D.namespace),o(this,"dbName",this.dbDefaultName),o(this,"dbVersion",1),o(this,"indexedDbConnection",null),o(this,"notSupportedError",{name:"IDBNotSupported",message:"IndexedDB is not supported"}),o(this,"databaseOpenError",{name:"CannotOpenDatabaseError",message:"Cannot open a database"}),o(this,"noConnectionError",{name:"NoDatabaseConnection",message:"Cannot open a transaction"});var t=e.getIndexedDB();if(!t)throw this.notSupportedError;this.idbFactory=t}return ke(e,[{key:"setCustomName",value:function(e){return e&&e.length>0?(this.dbName="".concat(D.namespace,"-").concat(e),this.migrateDb(this.dbDefaultName,this.dbName)):Promise.resolve()}},{key:"openDatabase",value:function(t,n,r){var o=this;return e.isSupported().then((function(e){return e?new Promise((function(e,i){var a=o.idbFactory.open(t,r);n&&(a.onupgradeneeded=function(e){return n(e,i)}),a.onsuccess=function(t){var n=t.target.result;n?e(n):i(o.databaseOpenError)},a.onerror=i})):Promise.reject(o.notSupportedError)}))}},{key:"databaseExists",value:function(e){var t=this;return new Promise((function(n){var r=!0;t.openDatabase(e,(function(){r=!1})).then((function(n){if(n.close(),!r)return t.deleteDatabaseByName(e)})).then((function(){return n(r)}))}))}},{key:"cloneData",value:function(e,t){var n=this;return N(me.storeNames.left).map((function(e){return e.name})).filter((function(e){return"p"!==e})).map((function(r){return function(){return o=r,i=n.indexedDbConnection,n.indexedDbConnection=e,n.getAll(o).then((function(e){if(n.indexedDbConnection=t,!(e.length<1))return n.addBulk(o,e,!0)})).then((function(){n.indexedDbConnection=i}));var o,i}})).reduce((function(e,t){return e.then(t)}),Promise.resolve())}},{key:"migrateDb",value:function(e,t){var n=this;return this.databaseExists(e).then((function(r){return r?Promise.all([n.openDatabase(e,n.handleUpgradeNeeded,n.dbVersion),n.openDatabase(t,n.handleUpgradeNeeded,n.dbVersion)]).then((function(t){var r=v(t,2),o=r[0],i=r[1];return n.cloneData(o,i).then((function(){return n.indexedDbConnection=i,o.close(),n.deleteDatabaseByName(e)}))})).then((function(){return K.info("Database migration finished")})):n.openDatabase(t,n.handleUpgradeNeeded,n.dbVersion).then((function(e){n.indexedDbConnection=e}))}))}},{key:"handleUpgradeNeeded",value:function(e,t){var n=e.target.result;e.target.transaction.onerror=t,e.target.transaction.onabort=t;var r=me.storeNames.left,o=Ye.current||{},i=o&&!y(o);O(r).filter((function(e){return!v(e,2)[1].permanent})).forEach((function(e){var t=v(e,2),r=t[0],a=t[1].name,s=me.right[r],c=n.createObjectStore(a,{keyPath:s.keyPath,autoIncrement:s.autoIncrement||!1});if(s.index&&c.createIndex("".concat(s.index,"Index"),s.index),a===te.ActivityState&&i)return c.add(Ce(r,ye.left,o)),void K.info("Activity state has been recovered");var l=Ze.stores[a];l&&(l.forEach((function(e){return c.add(e)})),K.info("Migration from localStorage done for ".concat(r," store")))})),st(),Ze.clear()}},{key:"open",value:function(){var e=this;return this.indexedDbConnection?Promise.resolve({success:!0}):this.openDatabase(this.dbName,this.handleUpgradeNeeded,this.dbVersion).then((function(t){return e.indexedDbConnection=t,e.indexedDbConnection.onclose=function(){return e.destroy},{success:!0}}))}},{key:"getTransactionStore",value:function(e,t,n){var r,o=e.storeName,i=e.mode,a=n.transaction([o],i),s=a.objectStore(o),c=me.right[Ie(o,ye.right)];return c.index&&(r=s.index("".concat(c.index,"Index"))),a.onerror=t,a.onabort=t,{transaction:a,store:s,index:r,options:c}}},{key:"overrideError",value:function(e,t){var n=t.target.error;return e({name:n.name,message:n.message})}},{key:"getCompositeKeys",value:function(e){var t=e.fields[e.keyPath];return ae(t)?t.composite:null}},{key:"targetIsObject",value:function(e){return b(e)}},{key:"prepareTarget",value:function(e,t,n){if(n===ct.clear||!t)return null;var r=this.getCompositeKeys(e);return-1!==[ct.add,ct.put].indexOf(n)?this.targetIsObject(t)?r?a(o({},e.keyPath,r.map((function(e){return t[e]})).join("")),t):t:null:t instanceof Array?t.join(""):t}},{key:"prepareResult",value:function(e,t){var n=this.getCompositeKeys(e);return n&&this.targetIsObject(t)?n.map((function(e){return t[e]})):null}},{key:"initRequest",value:function(e){var t=this,n=e.storeName,r=e.target,o=void 0===r?null:r,i=e.action,a=e.mode,s=void 0===a?lt.readonly:a;return this.open().then((function(){return new Promise((function(e,r){if(t.indexedDbConnection){var a=t.getTransactionStore({storeName:n,mode:s},r,t.indexedDbConnection),c=a.store,l=a.options,u=c[i](t.prepareTarget(l,o,i)),d=t.prepareResult(l,o);u.onsuccess=function(){i!==ct.get||u.result?e(d||u.result||o):r({name:"NotRecordFoundError",message:'Requested record not found in "'.concat(n,'" store')})},u.onerror=function(e){return t.overrideError(r,e)}}else r(t.noConnectionError)}))}))}},{key:"initBulkRequest",value:function(e){var t=this,n=e.storeName,r=e.target,o=e.action,i=e.mode,a=void 0===i?lt.readwrite:i;return!r||r&&!r.length?Promise.reject({name:"NoTargetDefined",message:"No array provided to perform ".concat(o,' bulk operation into "').concat(n,'" store')}):this.open().then((function(){return new Promise((function(e,i){if(t.indexedDbConnection){var s=t.getTransactionStore({storeName:n,mode:a},i,t.indexedDbConnection),c=s.transaction,l=s.store,u=s.options,d=new Array,A=r[0];c.oncomplete=function(){return e(d)},function e(n){n.onerror=function(e){return t.overrideError(i,e)},n.onsuccess=function(){d.push(t.prepareResult(u,A)||n.result),A=r[d.length],d.length<r.length&&e(l[o](t.prepareTarget(u,A,o)))}}(l[o](t.prepareTarget(u,A,o)))}else i(t.noConnectionError)}))}))}},{key:"openCursor",value:function(e){var t=this,n=e.storeName,r=e.action,o=e.range,i=void 0===o?null:o,a=e.firstOnly,s=void 0!==a&&a,c=e.mode,l=void 0===c?lt.readonly:c;return this.open().then((function(){return new Promise((function(e,o){if(t.indexedDbConnection){var a=t.getTransactionStore({storeName:n,mode:l},o,t.indexedDbConnection),c=a.transaction,u=a.store,d=a.index,A=a.options,p=(d||u).openCursor(i),h=new Array;c.oncomplete=function(){return e(h)},p.onsuccess=function(e){var n=e.target.result;n&&(r===ct.delete?(n.delete(),h.push(t.prepareResult(A,n.value)||n.value[A.keyPath])):h.push(n.value),s||n.continue())},p.onerror=function(e){return t.overrideError(o,e)}}else o(t.noConnectionError)}))}))}},{key:"deleteDatabaseByName",value:function(e){var t=this;return new Promise((function(n,r){var o=t.idbFactory.deleteDatabase(e);o.onerror=function(e){return t.overrideError(r,e)},o.onsuccess=function(){return n()},o.onblocked=function(e){return r(e.target)}}))}},{key:"getAll",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.openCursor({storeName:e,action:ct.list,firstOnly:t})}},{key:"getFirst",value:function(e){return this.getAll(e,!0).then((function(e){return e.length?e[0]:void 0}))}},{key:"getItem",value:function(e,t){return this.initRequest({storeName:e,target:t,action:ct.get})}},{key:"filterBy",value:function(e,t){var n=IDBKeyRange.only(t);return this.openCursor({storeName:e,action:ct.list,range:n})}},{key:"addItem",value:function(e,t){return this.initRequest({storeName:e,target:t,action:ct.add,mode:lt.readwrite})}},{key:"addBulk",value:function(e,t,n){return this.initBulkRequest({storeName:e,target:t,action:n?ct.put:ct.add,mode:lt.readwrite})}},{key:"updateItem",value:function(e,t){return this.initRequest({storeName:e,target:t,action:ct.put,mode:lt.readwrite})}},{key:"deleteItem",value:function(e,t){return this.initRequest({storeName:e,target:t,action:ct.delete,mode:lt.readwrite})}},{key:"deleteBulk",value:function(e,t,n){var r=n?IDBKeyRange[n](t):IDBKeyRange.only(t);return this.openCursor({storeName:e,action:ct.delete,range:r,mode:lt.readwrite})}},{key:"trimItems",value:function(e,t){var n=this,r=me.right[Ie(e,ye.right)];return this.getAll(e).then((function(e){return e.length?e[t-1]:null})).then((function(t){return t?n.deleteBulk(e,t[r.keyPath],Ee.UpperBound):[]}))}},{key:"count",value:function(e){var t=this;return this.open().then((function(){return new Promise((function(n,r){if(t.indexedDbConnection){var o=t.getTransactionStore({storeName:e,mode:lt.readonly},r,t.indexedDbConnection).store.count();o.onsuccess=function(){return n(o.result)},o.onerror=function(e){return t.overrideError(r,e)}}else r(t.noConnectionError)}))}))}},{key:"clear",value:function(e){return this.initRequest({storeName:e,action:ct.clear,mode:lt.readwrite})}},{key:"destroy",value:function(){this.indexedDbConnection&&this.indexedDbConnection.close(),this.indexedDbConnection=null}},{key:"deleteDatabase",value:function(){return this.destroy(),this.deleteDatabaseByName(this.dbName)}}],[{key:"tryOpen",value:function(t){return new Promise((function(n){try{var r=t.open(e.dbValidationName);r.onsuccess=function(){r.result.close(),t.deleteDatabase(e.dbValidationName),n(!0)},r.onerror=function(){return n(!1)}}catch(o){n(!1)}}))}},{key:"isSupported",value:function(){if(e.isSupportedPromise)return e.isSupportedPromise;var t="IndexedDB is not supported in this browser";return e.isSupportedPromise=new Promise((function(n){var r=e.getIndexedDB(),o=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);!r||o?(K.warn(t),n(!1)):n(e.tryOpen(r).then((function(e){return e||K.warn(t),e})))})),e.isSupportedPromise}},{key:"getIndexedDB",value:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB}}])}();function dt(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||E(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}o(ut,"dbValidationName","validate-db-openable"),o(ut,"isSupportedPromise",null);var At=function(){function e(){Oe(this,e)}return ke(e,[{key:"open",value:function(){return e.isSupported().then((function(e){if(!e)return{status:"error",error:{name:"LSNotSupported",message:"LocalStorage is not supported"}};var t=me.storeNames.left,n=Ye.current||{},r=n&&!y(n);return O(t).filter((function(e){return!v(e,2)[1].permanent})).forEach((function(e){var t=v(e,2),o=t[0],i=t[1].name;i!==te.ActivityState||Ze.stores[i]?Ze.stores[i]||(Ze.stores[i]=[]):Ze.stores[i]=r?[Ce(o,ye.left,n)]:[]})),st(),{status:"success"}}))}},{key:"getCompositeKeys",value:function(e){var t=e.fields[e.keyPath];return ae(t)?t.composite:null}},{key:"getKeys",value:function(e){var t=Ie(e,ye.right),n=me.right[t];return this.getCompositeKeys(n)||[n.keyPath]}},{key:"nextIndex",value:function(e){return"number"==typeof e?e+1:void 0}},{key:"initRequest",value:function(e,t){var n=this,r=e.storeName,o=e.id,i=e.item,s=me.right[Ie(r,ye.right)];return this.open().then((function(e){return"error"===e.status?Promise.reject(e.error):new Promise((function(e,c){var l,u=Ze.stores[r],d=n.getKeys(r),A=(u[u.length-1]||{})[s.keyPath]||0;if(o){var p=Array.isArray(o)?o.slice():[o];l=d.map((function(e,t){return[e,p[t]]})).reduce(R,{})}else l=a({},i);var h=l?S(u,d,l):0;return t(e,c,{keys:d,items:u,index:h,options:s,lastId:A})}))}))}},{key:"sort",value:function(e,t,n){var r=dt(e),o=t.slice().reverse();return r.sort((function(e,t){return o.reduce((function(r,o){return r||function(e,t,r){var o=n?n===e[r]:e[r]<t[r],i=n?n>e[r]:e[r]>t[r];return o?-1:i?1:0}(e,t,o)}),0)}))}},{key:"prepareTarget",value:function(e,t,n){var r=this.getCompositeKeys(e);return r?a(o({},e.keyPath,r.map((function(e){return t[e]})).join("")),t):e.autoIncrement&&n?a(o({},e.keyPath,n),t):a({},t)}},{key:"prepareResult",value:function(e,t){var n=this.getCompositeKeys(e);return n?n.map((function(e){return t[e]})).filter((function(e){return!ve(e)})):t[e.keyPath]}},{key:"getAll",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.open().then((function(r){return"error"===r.status?Promise.reject(r.error):new Promise((function(r,o){var i=Ze.stores[e];i instanceof Array?r(n?[i[0]]:t.sort(i,t.getKeys(e))):o({name:"NotFoundError",message:"No objectStore named ".concat(e," in this database")})}))}))}},{key:"getFirst",value:function(e){return this.getAll(e,!0).then((function(e){return e.length?e[0]:void 0}))}},{key:"getItem",value:function(e,t){var n=this;return this.initRequest({storeName:e,id:t},(function(t,r,o){var i=o.items,a=o.index,s=o.options;-1===a?r({name:"NotRecordFoundError",message:'Requested record not found in "'.concat(e,'" store')}):t(n.prepareTarget(s,i[a]))}))}},{key:"filterBy",value:function(e,t){return this.getAll(e).then((function(n){return n.filter((function(n){var r=me.right[Ie(e,ye.right)];return(r.index&&n[r.index])===t}))}))}},{key:"addItem",value:function(e,t){var n=this;return this.initRequest({storeName:e,item:t},(function(r,o,i){var a=i.items,s=i.index,c=i.options,l=i.lastId;-1!==s?o({name:"ConstraintError",message:'Constraint was not satisfied, trying to add existing item into "'.concat(e,'" store')}):(a.push(n.prepareTarget(c,t,n.nextIndex(l))),Ze.stores[e]=a,r(n.prepareResult(c,t)))}))}},{key:"addBulk",value:function(e,t,n){var r=this;return this.initRequest({storeName:e},(function(o,i,a){var s=a.keys,c=a.items,l=a.options,u=a.lastId;if(!t||t&&!t.length)i({name:"NoTargetDefined",message:'No array provided to perform add bulk operation into "'.concat(e,'" store')});else{var d=u,A=t.map((function(e){return r.prepareTarget(l,e,d=r.nextIndex(d))})),p=A.filter((function(e){return-1!==S(c,s,e)})).map((function(e){return e[l.keyPath]})),h=n?c.filter((function(e){return-1===p.indexOf(e[l.keyPath])})):dt(c);p.length&&!n?i({name:"ConstraintError",message:'Constraint was not satisfied, trying to add existing items into "'.concat(e,'" store')}):(Ze.stores[e]=r.sort([].concat(dt(h),dt(A)),s),o(t.map((function(e){return r.prepareResult(l,e)}))))}}))}},{key:"updateItem",value:function(e,t){var n=this;return this.initRequest({storeName:e,item:t},(function(r,o,i){var a=i.items,s=i.index,c=i.options,l=i.lastId,u=-1===s?n.nextIndex(l):void 0,d=n.prepareTarget(c,t,u);-1===s?a.push(d):a.splice(s,1,d),Ze.stores[e]=a,r(n.prepareResult(c,t))}))}},{key:"deleteItem",value:function(e,t){return this.initRequest({storeName:e,id:t},(function(n,r,o){var i=o.items,a=o.index;-1!==a&&(i.splice(a,1),Ze.stores[e]=i),n(t)}))}},{key:"findMax",value:function(e,t,n){if(!e.length)return-1;for(var r={index:-1,value:"string"==typeof n?"":0},o=0;o<e.length;o+=1){if(!(e[o][t]<=n))return r.index;e[o][t]>=r.value&&(r={value:e[o][t],index:o})}return r.index}},{key:"deleteBulk",value:function(e,t,n){var r=this;return this.getAll(e).then((function(o){var i=r.getKeys(e),a=me.right[Ie(e,ye.right)].index||i[0],s=n?null:t,c=r.sort(o,i,s),l=r.findMax(c,a,t);if(-1===l)return[];var u=n===Ee.LowerBound?l:0,d=n&&n!==Ee.UpperBound?c.length:l+1,A=c.splice(u,d).map((function(e){return 1===i.length?e[a]:i.map((function(t){return e[t]}))}));return Ze.stores[e]=c,A}))}},{key:"trimItems",value:function(e,t){var n=this,r=Ie(e,ye.right),o=me.right[r];return this.getAll(e).then((function(e){return e.length?e[t-1]:null})).then((function(t){return t?n.deleteBulk(e,t[o.keyPath],Ee.UpperBound):[]}))}},{key:"count",value:function(e){return this.open().then((function(t){if("error"===t.status)return Promise.reject(t.error);var n=Ze.stores[e];return Promise.resolve(n instanceof Array?n.length:1)}))}},{key:"clear",value:function(e){return this.open().then((function(t){return"error"===t.status?Promise.reject(t.error):new Promise((function(t){Ze.stores[e]=[],t()}))}))}},{key:"destroy",value:function(){}},{key:"deleteDatabase",value:function(){}}],[{key:"isSupported",value:function(){return e.isSupportedPromise||(e.isSupportedPromise=new Promise((function(e){var t=P();t||K.warn("LocalStorage is not supported in this browser"),e(t)}))),e.isSupportedPromise}}])}();o(At,"isSupportedPromise",null);var pt,ht,ft=((pt=ft||{})[pt.noStorage=p.NO_STORAGE]="noStorage",pt[pt.indexedDB=p.INDEXED_DB]="indexedDB",pt[pt.localStorage=p.LOCAL_STORAGE]="localStorage",pt),gt=null;function mt(e){var t=null;return null!==gt?gt:gt=Promise.all([ut.isSupported(),At.isSupported()]).then((function(n){var r=v(n,2),o=r[0],i=r[1];if(Ze.setCustomName(e),o){ht=ft.indexedDB;var a=new ut;return a.setCustomName(e).then((function(){return t=a}))}return i?(ht=ft.localStorage,t=new At,Promise.resolve(t)):(K.error("There is no storage available, app will run with minimum set of features"),ht=ft.noStorage,t=null,Promise.resolve(t))})).then((function(){return{type:ht,storage:t}}))}const _t=a({init:mt,getType:function(){return ht}},(Et=O({getAll:function(e,t,n){return e.getAll(t,n).then((function(e){return Se(t,ye.right,e)}))},getFirst:function(e,t){return e.getFirst(t).then((function(e){return Ce(t,ye.right,e)}))},getItem:function(e,t,n){return e.getItem(t,we(t,ye.left,n)).then((function(e){return Ce(t,ye.right,e)})).catch((function(e){return Promise.reject(Re(t,e))}))},filterBy:function(e,t,n){return e.filterBy(t,Te(n)).then((function(e){return Se(t,ye.right,e)}))},addItem:function(e,t,n){var r=Ce(t,ye.left,n);return e.addItem(t,r).then((function(e){return we(t,ye.right,e)})).catch((function(e){return Promise.reject(Re(t,e))}))},addBulk:function(e,t,n,r){var o=Se(t,ye.left,n);return e.addBulk(t,o,r).then((function(e){return e.map((function(e){return we(t,ye.right,e)}))})).catch((function(e){return Promise.reject(Re(t,e))}))},updateItem:function(e,t,n){var r=Ce(t,ye.left,n);return e.updateItem(t,r).then((function(e){return we(t,ye.right,e)}))},deleteItem:function(e,t,n){return e.deleteItem(t,we(t,ye.left,n)).then((function(e){return we(t,ye.right,e)}))},deleteBulk:function(e,t,n,r){return e.deleteBulk(t,Te(n),r).then((function(e){return e.map((function(e){return we(t,ye.right,e)}))}))},trimItems:function(e,t,n){return e.trimItems(t,n)},count:function(e,t){return e.count(t)},clear:function(e,t){return e.clear(t)},destroy:function(e){return e.destroy()},deleteDatabase:function(e){return e.deleteDatabase()}}).map((function(e){var t=v(e,2),n=t[0],r=t[1];return[n,function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return mt().then((function(t){var o=t.storage;if(o)return r.call.apply(r,[null,o,Ie(e,ye.left)].concat(n))}))}]})),Et.reduce(R,{})));var Et;function vt(){return _t.getAll("queue").then((function(e){return{queueSize:e.length}})).then((function(e){return a(a(a(a(a(a(a(a({},{createdAt:De()}),{sentAt:De()}),{webUuid:Ye.current.uuid}),(n=navigator,r=void 0!==n.doNotTrack,o=void 0!==window.doNotTrack,i=void 0!==n.msDoNotTrack,s=r?n.doNotTrack:o?window.doNotTrack:i?n.msDoNotTrack:null,0===parseInt(s,10)||"no"===s?{trackingEnabled:!0}:1===parseInt(s,10)||"yes"===s?{trackingEnabled:!1}:null)),{platform:"web"}),function(){var e=navigator,t=v((e.language||e.userLanguage||"en").split("-"),2),n=t[0],r=t[1];return{language:n,country:r?""+r.toLowerCase():void 0}}()),(t=navigator.userAgent||navigator.vendor,{machineType:"Win32"!==navigator.platform||-1===t.indexOf("WOW64")&&-1===t.indexOf("Win64")?navigator.platform:"Win64"})),e);var t,n,r,o,i,s}))}function yt(e,t){return{status:"error",action:arguments.length>2&&void 0!==arguments[2]&&arguments[2]?"CONTINUE":"RETRY",response:C(e.responseText)?JSON.parse(e.responseText):e.responseText,message:A[t],code:t}}function bt(e,t){var n=e.slice(0,e.length-t.length-1).split("").reduce((function(e){return e.concat(" ")}),"");return"".concat(t).concat(n,":")}function Ct(e,t){var n="REQUEST PARAMETERS:",r=function(e){return e.replace(/([A-Z])/g,(function(e){return"_".concat(e.toLowerCase())}))},o=O(a(a(a({},Z.getBaseParams()),t),e)).map((function(e){var t=v(e,2),n=t[0],o=t[1];return[r(n),o]}));return K.log(n),o.filter((function(e){return k(v(e,2)[1])})).map((function(e){var t=v(e,2),r=t[0],o=t[1];return K.log(bt(n,r),o),function(e){var t=v(e,2),n=t[0],r=t[1],o=encodeURIComponent(n),i=r;return"string"==typeof r&&(i=encodeURIComponent(r)),b(r)&&(i=encodeURIComponent(JSON.stringify(r)||"")),[o,i].join("granular_third_party_sharing_options"===n||"partner_sharing_settings"===n?encodeURIComponent("="):"=")}([r,o])})).join("&")}function St(e,t,n){var r=n.xhr,o=n.url;if(4===r.readyState){var i=r.status>=200&&r.status<300,a=C(r.responseText);if(0!==r.status)return a?t(i?function(e,t){var n=JSON.parse(e.responseText),r={status:"success",adid:n.adid,timestamp:n.timestamp,ask_in:n.ask_in,retry_in:n.retry_in,continue_in:n.continue_in,tracking_state:n.tracking_state,attribution:void 0,message:void 0};return I(t,"attribution")&&(r.attribution=n.attribution,r.message=n.message),O(r).filter((function(e){return!!v(e,2)[1]})).reduce(R,{})}(r,o):yt(r,"SERVER_CANNOT_PROCESS",!0)):e(yt(r,i?"SERVER_MALFORMED_RESPONSE":"SERVER_INTERNAL_ERROR"));e(yt(r,"NO_CONNECTION"))}}function wt(e,t){var n=e.endpoint,r=e.url,o=e.method,i=void 0===o?"GET":o,a=e.params,s=function(e,t){var n=e.endpoint,r=e.url,o=e.method,i=Ct(e.params,t);return{fullUrl:n+r+("GET"===o?"?".concat(i):""),encodedParams:i}}({endpoint:n,url:r,method:i,params:void 0===a?{}:a},t),c=s.fullUrl,l=s.encodedParams;return new Promise((function(e,t){var n=new XMLHttpRequest;n.open(i,c,!0),function(e,t){var n="REQUEST HEADERS:",r=[["Client-SDK","js".concat(D.version)],["Content-Type","POST"===t?"application/x-www-form-urlencoded":"application/json"]];K.log(n),r.forEach((function(t){var r=v(t,2),o=r[0],i=r[1];e.setRequestHeader(o,i),K.log(bt(n,o),i)}))}(n,i),n.onreadystatechange=function(){return St(t,e,{xhr:n,url:r})},n.onerror=function(){return t(yt(n,"TRANSACTION_ERROR"))},n.send("GET"===i?void 0:l)}))}function Tt(e,t){return"success"===e.status?function(e,t){var n=I(t,"gdpr_forget_device"),r=I(t,"attribution"),o=I(t,"session"),i="opted_out"===e.tracking_state;return!n&&i?(xe("sdk:gdpr-forget-me"),e):(r||n||i||!e.ask_in||xe("attribution:check",e),o&&xe("session:finished",e),e)}(e,t):e}var It={long:{delay:12e4,maxDelay:u,minRange:.5,maxRange:1},short:{delay:200,maxDelay:l,minRange:.5,maxRange:1},test:{delay:100,maxDelay:300}};function Rt(e,t){var n,r,o=It[t=t||"long"],i=o.delay*Math.pow(2,e-1);return i=Math.min(i,o.maxDelay),o.minRange&&o.maxRange&&(i*=(n=o.minRange,r=o.maxRange,Math.random()*(r-n)+n)),Math.round(i)}var Ot=navigator.onLine;function Nt(){Ot=!0}function kt(){Ot=!1}function Pt(e,t,n){e.addEventListener&&e.addEventListener(t,n,!1)}function Dt(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}function Lt(e){return{domains:[e.default,e.world],useSubdomains:!0,isDataResidency:!1}}var Bt=function(e){return e.Default="default",e.India="india",e.China="china",e}(Bt||{});function Ut(e,t){K.warn("Both ".concat(e," and ").concat(t," are set in config, ").concat(t," will be ignored"))}function Mt(e){return function(e){var t=Z.getCustomConfig(),n=t.customUrl,r=t.urlStrategy,o=t.dataResidency;if(n)return K.warn("customUrl is deprecated, use urlStrategy instead"),(o||r)&&Ut("customUrl",o?"dataResidency":"urlStrategy"),{domains:[n],useSubdomains:!1,isDataResidency:!1};if(o&&r&&Ut("dataResidency","urlStrategy"),o)return K.warn("dataResidency is deprecated, use urlStrategy instead"),{domains:[e[o]],useSubdomains:!0,isDataResidency:!0};if("string"==typeof r){if(K.warn("urlStrategy string literals ('china' and 'india') are deprected, use UrlStartegyConfig instead"),r===Bt.India)return{domains:[e.india,e.default],useSubdomains:!0,isDataResidency:!1};if(r===Bt.China)return{domains:[e.china,e.default],useSubdomains:!0,isDataResidency:!1}}return r?null:Lt(e)}(e)||function(e){var t=Z.getCustomConfig().urlStrategy;if(t&&"object"===n(t)){var r=t;return!r.domains||!Array.isArray(r.domains)||r.domains.length<1?(K.warn("Invalid urlStartegy: `domains` should be a non-empty array"),Lt(e)):{domains:r.domains,useSubdomains:!!r.useSubdomains,isDataResidency:!!r.isDataResidency}}return Lt(e)}(e)}function xt(e){var t,n=Mt(e),r=[],o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=E(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}(n.domains);try{for(o.s();!(t=o.n()).done;){var i=t.value,a=n.useSubdomains?{app:"".concat("https://app.").concat(i),gdpr:"".concat("https://gdpr.").concat(i)}:{app:"".concat(f).concat(i),gdpr:"".concat(f).concat(i)};r.push(a)}}catch(s){o.e(s)}finally{o.f()}return r}var Ft=150,$t=2147483647,Vt=6e4;const Ht=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.url,o=n.method,i=void 0===o?"GET":o,s=n.params,c=void 0===s?{}:s,l=n.continueCb,u=n.strategy,d=n.wait,p={url:r,method:i,params:c,continueCb:l},f=r,g=i,m=a({},c),_=l,E=u,b=function(){e.reset(),t=e.next()},C=null,S={request:0,connection:0},w=I(d),T=null;function I(e){return(e=e||Ft)>$t?$t:e}function N(n){var r,o,i=n.wait,s=n.retrying;return e||(e=function(){var e=xt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:h),t=0;return{next:function(){return t<e.length?{value:e[t++],done:!1}:{value:void 0,done:!0}},reset:function(){t=0}}}(),t=e.next()),w=i?I(i):w,function(e){if(!T)return!1;if(C){var t=w-(Date.now()-T);if(e&&t<e)return!0;M()}return!1}(i)?Promise.resolve({status:"error",action:"CONTINUE",response:"",message:A.SKIP,code:"SKIP"}):f?(K.log("".concat(s?"Re-trying":"Trying"," request ").concat(f," in ").concat(w,"ms")),T=Date.now(),P({endpoint:(r=t.value,o=f,r["/gdpr_forget_device"===o?"gdpr":"app"]),url:f,method:g,params:a({attempts:1},m)})):(K.error("You must define url for the request to be sent"),Promise.reject({status:"error",action:"CONTINUE",response:"",message:A.MISSING_URL,code:"MISSING_URL"}))}function P(n){return U(),Ot?function(n){return new Promise((function(r,o){C=setTimeout((function(){T=null;var i=O(n.params).filter((function(e){return k(v(e,2)[1])})).reduce(R,{});return function(e){return vt().then((function(t){return wt(e,t)})).then((function(t){return Tt(t,e.url)}))}({endpoint:n.endpoint,url:n.url,method:n.method,params:a(a({},i),{},{attempts:(S.request?S.request+1:1)+S.connection})}).then((function(e){return function(e,t){e&&e.retry_in?t(B(e.retry_in)):(b(),"function"==typeof _?_(e,L,B):L(),t(e))}(e,r)})).catch((function(n){return function(n,r,o){if(n&&"RETRY"===n.action)if("NO_CONNECTION"===n.code){var i=e.next();i.done?(b(),r(B(Vt))):(t=i,r(B(Ft)))}else r(B());else L(!0),o(n||{})}(n,r,o)}))}),w)}))}(n):(S.connection+=1,K.log("No internet connectivity, trying request ".concat(n.url," in ").concat(Vt,"ms")),new Promise((function(e){C=setTimeout((function(){e(P(n))}),Vt)})))}function D(){f=p.url,g=p.method,m=a({},p.params),_=p.continueCb}function L(e){K.log("Request ".concat(f||"unknown"," ").concat(e?"failed":"has been finished")),S.request=0,S.connection=0,w=Ft,D(),M()}function B(e){return S.request+=1,M(),N({wait:e||Rt(S.request,E),retrying:!0})}function U(){C&&clearTimeout(C),C=null}function M(){var e=!!T;U(),T=null,e&&(w=Ft,S.request=0,S.connection=0,K.log("Previous ".concat(f||"unknown"," request attempt canceled")),D())}return{send:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.url,n=e.method,r=e.params,o=void 0===r?{}:r,i=e.continueCb,s=e.wait;return function(e){var t=e.url,n=e.method,r=e.params,o=e.continueCb;t&&(f=t),n&&(g=n),y(r)||(m=a({},r)),m=a({createdAt:De()},m),"function"==typeof o&&(_=o)}({url:t,method:n,params:o,continueCb:i}),N({wait:s})},isRunning:function(){return!!C},clear:M}};var jt=function(e){return e===d.REASON_GDPR?"GDPR disable":"disable"},Qt=function(e){return{start:{inProgress:"Adjust SDK ".concat(jt(e)," process has already started"),done:"Adjust SDK ".concat(jt(e)," process is now started")},finish:{inProgress:"Adjust SDK ".concat(jt(e)," process has already finished"),done:"Adjust SDK ".concat(jt(e)," process is now finished")}}};function Gt(e,t){var n=e.reason,r=e.pending,o=ot()||{},i=o.reason,a=o.pending,s="start"===t&&a?"start":"finish";return"start"===t&&i||"finish"===t&&i&&!a?(K.log(Qt(i)[s].inProgress),!1):(K.log(Qt(n)[s].done),it({reason:n||d.REASON_GENERAL,pending:r}),!0)}function Kt(e){return Gt({reason:e,pending:arguments.length>1&&void 0!==arguments[1]&&arguments[1]},"start")}function Wt(){var e=ot()||{},t=e.reason,n=e.pending;return t===d.REASON_GENERAL||t===d.REASON_GDPR&&!n?"off":t===d.REASON_GDPR&&n?"paused":"on"}var qt=ee.ActivityState,zt=!1;function Yt(e){return e?"unknown"===e.uuid?(Kt(d.REASON_GDPR),Ye.destroy(),{exists:!0,stored:null}):(Ye.init(e),{exists:!0,stored:e}):{exists:!1}}function Jt(){return"off"!==Wt()&&Ye.isStarted()}function Xt(){if(!Jt())return Promise.resolve(null);var e=a(a({},Ye.current),{},{lastActive:Date.now()});return _t.updateItem(qt,e).then((function(){return Ye.current=e}))}var Zt=Ht({strategy:"long",continueCb:function(e,t){var n=e&&e.continue_in||null;return nn.pause=n?{timestamp:Date.now(),wait:n}:null,_t.getFirst(tn).then((function(e){return e?_t.deleteItem(tn,e.timestamp):null})).then((function(){return t(),nn.running=!1,sn({wait:n})}))}}),en=!1,tn="queue",nn={running:!1,timestamp:null,pause:null};function rn(){var e=Date.now();return nn.timestamp&&e<=nn.timestamp&&(e=nn.timestamp+1),nn.timestamp=e,e}function on(e){var t=e.url,n=e.method,r=e.params,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o.auto,s=o.timestamp;Ye.updateParams(t,i);var c=O(r||{}).filter((function(e){return k(v(e,2)[1])})).reduce(R,{}),l={timestamp:rn(),url:t,method:n,params:a(a({},Ye.getParams(t)),c)};return s&&(l.createdAt=s),_t.addItem(tn,l).then((function(){return function(e){return I(e,"session")&&Ye.resetSessionOffset(),Ye.updateLastActive(),Xt()}(t)})).then((function(){return nn.running?{}:sn()}))}function an(){var e=nn.pause||{},t=e.timestamp,n=e.wait,r=Date.now()-(t||0);return r<n?n-r:null}function sn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.cleanUp,n=e.wait;if(nn.running)return Promise.resolve({});nn.running=!0;var r=Promise.resolve({});return t&&(r=r.then(ln)),r.then((function(){return _t.getFirst(tn)})).then((function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.timestamp,n=e.createdAt,r=e.url,o=e.method,i=e.params,s=arguments.length>1?arguments[1]:void 0,c=Ye.current||{},l="/session"===r&&!c.installed;return en&&!l||!r&&!o&&!i?(nn.running=!1,Promise.resolve({})):Zt.send({url:r,method:o,params:a(a({},i),{},{createdAt:De(n||t)}),wait:s||an()})}(e,n)}))}function cn(e){if(void 0!==e)if(e!==en){var t=en;en=e,!e&&t&&sn(),K.info("The app is now in ".concat(e?"offline":"online"," mode"))}else K.error("The app is already in ".concat(e?"offline":"online"," mode"));else K.error("State not provided, true or false has to be defined")}function ln(){var e=Date.now()-Z.requestValidityWindow;return _t.deleteBulk(tn,e,"upperBound")}var un="globalParams",dn="No type provided",An="Global parameter type not provided, `callback` or `partner` types are available";function pn(e){return(e||[]).map((function(e){return{key:e.key,value:e.value}}))}function hn(){return Promise.all([_t.filterBy(un,"callback"),_t.filterBy(un,"partner")]).then((function(e){var t=v(e,2),n=t[0],r=t[1];return{callbackParams:pn(n),partnerParams:pn(r)}}))}function fn(e,t){if(void 0===t)return K.error(An),Promise.reject({message:dn});var n=w(e),r=Object.keys(n).map((function(e){return{key:e,value:n[e],type:t}}));return Promise.all([_t.filterBy(un,t),_t.addBulk(un,r,!0)]).then((function(e){var n=v(e,2),o=n[0],i=n[1],a=T(o.map((function(e){return e.key})),i.map((function(e){return e[0]})));return K.log("Following ".concat(t," parameters have been saved: ").concat(r.map((function(e){return"".concat(e.key,":").concat(e.value)})).join(", "))),a.length&&K.log("Keys: ".concat(a.join(", ")," already existed so their values have been updated")),i}))}function gn(e,t){return void 0===t?(K.error(An),Promise.reject({message:dn})):_t.deleteItem(un,[e,t]).then((function(n){return K.log("".concat(e," ").concat(t," parameter has been deleted")),n}))}function mn(e){return void 0===e?(K.error(An),Promise.reject({message:dn})):_t.deleteBulk(un,e).then((function(t){return K.log("All ".concat(e," parameters have been deleted")),t}))}var _n,En,vn,yn=!1,bn=document;function Cn(){return vn=function(){var e=document;if(void 0!==e.hidden)return{hidden:"hidden",visibilityChange:"visibilitychange"};for(var t=O({mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange",oHidden:"ovisibilitychange",webkitHidden:"webkitvisibilitychange"}),n=0;n<t.length;n+=1){var r=v(t[n],2),o=r[0],i=r[1];if(void 0!==e[o])return{hidden:o,visibilityChange:i}}return null}(),yn?Promise.reject({interrupted:!0,message:"Session watch already initiated"}):(yn=!0,Me("session:finished",Rn),vn&&Pt(bn,vn.visibilityChange,Tn),vn&&bn[vn.hidden]?(K.log("Session request attempt canceled because the tab is still hidden"),Promise.resolve({})):(Ye.initParams(),Nn()))}function Sn(){return On(),Ye.updateSessionOffset(),Ye.toBackground(),Xt()}function wn(){return _t.getFirst(qt).then((function(e){var t=Ye.current,n=t.lastActive||0;if(Jt()&&n<e.lastActive){var r=!t.installed&&e.installed,o=(t.sessionCount||0)<(e.sessionCount||0);(r||o)&&xe("sdk:installed"),Ye.current=e,at()}return e})).then((function(){Ye.updateSessionLength(),Ye.toForeground()})).then(Nn)}function Tn(){clearTimeout(En);var e=vn&&bn[vn.hidden]?Sn:wn;En=setTimeout(e,0)}function In(){vn&&!bn[vn.hidden]&&(at(),yn||"on"!==Wt()||(Dt(bn,vn.visibilityChange,In),sr.__internal__.restartAfterAsyncEnable()))}function Rn(e,t){if(!t||"error"!==t.status)return Ye.updateInstalled(),xe("sdk:installed"),Xt();K.error("Session was not successful, error was returned from the server:",t.response)}function On(){clearInterval(_n)}function Nn(){On(),_n=setInterval((function(){return Ye.updateSessionOffset(),Xt()}),Z.sessionTimerWindow);var e=Ye.current,t=e.lastInterval,n=e.sessionCount>0;return!n||n&&t*c>=Z.sessionWindow?hn().then((function(e){var t,n,r;on({url:"/session",method:"POST",params:(t=e,n=t.callbackParams,r=t.partnerParams,{callbackParams:n.length?w(n):null,partnerParams:r.length?w(r):null})},{auto:!0})})):(xe("attribution:check"),Xt())}var kn=Ht({url:"/attribution",strategy:"short",continueCb:function(e,t,n){return!e||e&&"error"===e.status?(t(),Promise.resolve({state:"unknown"})):e.ask_in?n(e.ask_in):(t(),function(e){if(y(e)||!function(e){var t=e.adid,n=void 0===t?"":t,r=e.attribution,o=void 0===r?{}:r;return!!n&&!!T(Pn,Object.keys(o)).length}(e)||function(e){var t=e.adid,n=e.attribution,r=Ye.current.attribution||{},o=n&&Pn.some((function(e){return r[e]!==n[e]}));return!o&&t===r.adid}(e))return Promise.resolve({state:"same"});var t=O(e.attribution).filter((function(e){var t=v(e,1)[0];return-1!==Pn.indexOf(t)})).reduce(R,{adid:e.adid});return Ye.current=a(a({},Ye.current),{},{attribution:t}),Xt().then((function(){return xe("attribution:change",t),xe(m,t),K.info("Attribution has been updated"),{state:"changed"}}))}(e))}}),Pn=["tracker_token","tracker_name","network","campaign","adgroup","creative","click_label","state"],Dn=Ht({url:"/gdpr_forget_device",method:"POST",strategy:"short"}),Ln={running:"Adjust SDK is running pending GDPR Forget Me request",pending:"Adjust SDK will run GDPR Forget Me request after initialisation",paused:"Adjust SDK is already prepared to send GDPR Forget Me request",off:"Adjust SDK is already disabled"};function Bn(e){var t=Wt();return e||"on"===t?Z.isInitialised()?(Dn.send({params:a({},Ye.getParams())}).then((function(){xe("sdk:gdpr-forget-me")})),!0):(K.log(Ln.pending),!0):(K.log(Ln[t]),!1)}function Un(){return Gt({reason:d.REASON_GDPR,pending:!1},"finish")}var Mn=[];function xn(e,t){Mn.push({method:e,description:t,timestamp:Date.now()})}var Fn="eventDeduplication";function $n(e,t){var n,r,o=t.callbackParams,i=t.partnerParams,s={},c=a({eventToken:e.eventToken,deduplicationId:e.deduplicationId},(n=e.revenue,r=e.currency,isNaN(n)||(n=parseFloat(n))<0||!r?{}:{revenue:n.toFixed(5),currency:r})),l=a(a({},w(o)),w(e.callbackParams)),u=a(a({},w(i)),w(e.partnerParams));return y(l)||(s.callbackParams=l),y(u)||(s.partnerParams=u),a(a({},c),s)}function Vn(e){return e?_t.getAll(Fn).then((function(e){return e.map((function(e){return e.id}))})).then((function(t){return-1===t.indexOf(e)?function(e){var t=Z.getCustomConfig().eventDeduplicationListLimit,n=t>0?t:10;return _t.count(Fn).then((function(e){var t=Promise.resolve();if(e>=n){var r=e-n+1;K.log("Event deduplication list limit has been reached. Oldest ids are about to be removed (".concat(r," of them)")),t=_t.trimItems(Fn,r)}return t})).then((function(){return K.info("New event deduplication id is added to the list: ".concat(e)),_t.addItem(Fn,{id:e})}))}(e):Promise.reject({message:"Event won't be tracked, since it was previously tracked with the same deduplication id ".concat(e)})})):Promise.resolve()}function Hn(e){return{clickTime:De(),source:"web_referrer",referrer:decodeURIComponent(e)}}function jn(e,t){var n;(n=e||window.location.search.substring(1).split("&").map((function(e){return e.split("=")})).reduce(R,{}).adjust_referrer)&&on({url:"/sdk_click",method:"POST",params:Hn(n)},{timestamp:t})}var Qn=["logLevel","logOutput"],Gn=null,Kn=!1,Wn=!1,qn=!1;function zn(e){ir("third-party sharing",(function(){return Ye.waitForWebUUID().then((function(){return function(e){e&&void 0!==e.isEnabled?on({url:"/third_party_sharing",method:"POST",params:{sharing:e.isEnabled?"enable":"disable",granularThirdPartySharingOptions:e.granularOptions,partnerSharingSettings:e.partnerSharingSettings}}):K.error("Can not track third-party sharing without parameters")}(e)}))}),{schedule:!1,optionalInit:!0})}function Yn(){var e;"paused"===Wt()&&(Un(),Promise.all([(e={uuid:"unknown"},Ye.current=e,_t.clear(qt).then((function(){return _t.addItem(qt,e)}))),_t.clear(un),_t.clear(tn)]).then(er))}function Jn(){return Kn||Z.isInitialised()}function Xn(){Kn=!1,Wn=!1,Mn=[],Zt.clear(),nn.running=!1,nn.timestamp=null,nn.pause=null,yn=!1,Ye.toBackground(),On(),vn&&(clearTimeout(En),Dt(bn,vn.visibilityChange,Tn),Pt(bn,vn.visibilityChange,In)),kn.clear()}function Zn(e){e&&K.log("Adjust SDK has been shutdown due to asynchronous disable"),Xn(),Ue.forEach(clearTimeout),Ue=[],Be={},Ye.destroy(),Dt(window,"online",Nt),Dt(window,"offline",kt),_t.destroy(),Z.destroy()}function er(){qn=!1,Zn(),Dn.clear(),Gn=null,K.log("Adjust SDK instance has been destroyed")}function tr(e){K.log("Adjust SDK is starting with web_uuid set to ".concat(e.uuid));var t=Ye.current.installed;"paused"===Wt()&&(K.log(Ln.running),Bn(!0));var n=Wt(),r=function(e){return"Adjust SDK start has been interrupted ".concat(e)};return"off"===n?(Zn(),Promise.reject({interrupted:!0,message:r("due to complete async disable")})):"paused"===n?(Xn(),Promise.reject({interrupted:!0,message:r("due to partial async disable")})):Wn?Promise.reject({interrupted:!0,message:r("due to multiple synchronous start attempt")}):(sn({cleanUp:!0}),Cn().then((function(){Kn=!1,Wn=!0,t&&nr()})))}function nr(){var e;qn=!0,Mn.forEach((function(e){"function"==typeof e.method&&(K.log("Delayed ".concat(e.description," task is running now")),e.method(e.timestamp))})),Mn=[],e="sdk:installed",O(Be).some((function(t){var n=v(t,2)[1];return n.some((function(t,r){t.id===e&&n.splice(r,1)}))}))}function rr(e){if(e.interrupted)K.log(e.message);else if(Zn(),K.error("Adjust SDK start has been canceled due to an error",e),e.stack)throw e}function or(e){"off"!==Wt()?(Z.set(e),Pt(window,"online",Nt),Pt(window,"offline",kt),Me("sdk:installed",nr),Me("sdk:shutdown",(function(){return Zn(!0)})),Me("sdk:gdpr-forget-me",Yn),Me("attribution:check",(function(e,t){return n=t,r=Ye.current,(o=(n||{}).ask_in)||!r.attribution&&r.installed?(kn.send({params:a({initiatedBy:n?"backend":"sdk"},Ye.getParams()),wait:o}),Ye.updateSessionOffset(),Xt()):Promise.resolve(r);var n,r,o})),"function"==typeof e.attributionCallback&&Me("attribution:change",e.attributionCallback),(zt?Promise.reject({interrupted:!0,message:"Adjust SDK start already in progress"}):(zt=!0,_t.getFirst(qt).then(Yt).then((function(e){if(e.exists)return zt=!1,e.stored;var t,n=y(Ye.current)?{uuid:(t=Date.now(),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?n:11&n).toString(16)})))}:Ye.current;return _t.addItem(qt,n).then((function(){return Ye.init(n),at(),zt=!1,n}))})).then((function(e){return xe(g,e?e.uuid:"gdpr_forgotten"),e})))).then(tr).then(jn).catch(rr)):K.log("Adjust SDK is disabled, can not start the sdk")}function ir(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.schedule,o=n.waitForInitFinished,i=n.optionalInit;if(_t.getType()!==p.NO_STORAGE)if("on"===Wt())if(i||Jn()||!o){if("function"==typeof t){if(!r||qn&&Wn||!i&&!Jn())return t();xn(t,e),K.log("Running ".concat(e," is delayed until Adjust SDK is up"))}}else K.error("Adjust SDK can not ".concat(e,", sdk instance is not initialized"));else K.log("Adjust SDK is disabled, can not ".concat(e));else K.log("Adjust SDK can not ".concat(e,", no storage available"))}var ar={initSdk:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.logLevel,n=e.logOutput,r=s(e,Qn);K.setLogLevel(t,n),Jn()?K.error("You already initiated your instance"):Z.hasMissing(r)||(Kn=!0,_t.init(r.namespace).then((function(e){e.type!==p.NO_STORAGE?(K.info("Available storage is ".concat(e.type)),Gn=a({},r),or(r)):K.error("Adjust SDK can not start, there is no storage available")})))},getAttribution:function(){return ir("get attribution",(function(){return Ye.getAttribution()}))},getWebUUID:function(){return ir("get web_uuid",(function(){return Ye.getWebUUID()}))},waitForAttribution:function(){return ir("get attribution",(function(){return Ye.waitForAttribution()}),{schedule:!1})},waitForWebUUID:function(){return ir("get web_uuid",(function(){return Ye.waitForWebUUID()}),{schedule:!1})},setReferrer:function(e){e&&"string"==typeof e?ir("setting reftag",(function(t){return jn(e,t)}),{schedule:!0,waitForInitFinished:!0,optionalInit:!0}):K.error("You must provide a string referrer")},trackEvent:function(e){return function(e){if(_t.getType()===p.NO_STORAGE){var t="Adjust SDK can not track event, no storage available";return K.log(t),Promise.reject(t)}if("on"!==Wt()){var n="Adjust SDK is disabled, can not track event";return K.log(n),Promise.reject(n)}if(!Jn()){var r="Adjust SDK can not track event, sdk instance is not initialized";return K.error(r),Promise.reject(r)}return new Promise((function(t){var n=function(n){return t(function(e,t){if(!e||e&&(y(e)||!e.eventToken)){var n="You must provide event token in order to track event";return K.error(n),Promise.reject(n)}return Vn(e.deduplicationId).then(hn).then((function(n){return on({url:"/event",method:"POST",params:$n(e,n)},{timestamp:t})})).catch((function(e){return e&&e.message&&K.error(e.message),Promise.reject(e)}))}(e,n))};!qn||!Wn&&Jn()?(xn(n,"track event"),K.log("Running track event is delayed until Adjust SDK is up")):n()}))}(e)},addGlobalCallbackParameters:function(e){ir("add global callback parameters",(function(){return fn(e,"callback")}))},addGlobalPartnerParameters:function(e){ir("add global partner parameters",(function(){return fn(e,"partner")}))},removeGlobalCallbackParameter:function(e){ir("remove global callback parameter",(function(){return gn(e,"callback")}))},removeGlobalPartnerParameter:function(e){ir("remove global partner parameter",(function(){return gn(e,"partner")}))},clearGlobalCallbackParameters:function(){ir("remove all global callback parameters",(function(){return mn("callback")}))},clearGlobalPartnerParameters:function(){ir("remove all global partner parameters",(function(){return mn("partner")}))},switchToOfflineMode:function(){ir("set offline mode",(function(){return cn(!0)}))},switchBackToOnlineMode:function(){ir("set online mode",(function(){return cn(!1)}))},stop:function(){Kt()&&Z.isInitialised()&&Zn()},restart:function(){var e;((e=(ot()||{}).reason)===d.REASON_GDPR?(K.log("Adjust SDK is disabled due to GDPR-Forget-Me request and it can not be re-enabled"),0):e?(K.log("Adjust SDK has been enabled"),it(null),1):(K.log("Adjust SDK is already enabled"),0))&&Gn&&or(Gn)},gdprForgetMe:function(){var e=Bn();e&&(e=Kt(d.REASON_GDPR,!0))&&Z.isInitialised()&&Xn()},disableThirdPartySharing:function(){zn({isEnabled:!1})},trackThirdPartySharing:zn,ThirdPartySharing:function(){return ke((function e(t){Oe(this,e),o(this,"_granularOptions",{}),o(this,"_partnerSharingSettings",{}),"boolean"!=typeof t&&K.warn("isEnabled should be boolean, converting ".concat(t," results ").concat(!!t)),this._isEnabled=!!t}),[{key:"isEnabled",get:function(){return this._isEnabled}},{key:"granularOptions",get:function(){return this._granularOptions}},{key:"partnerSharingSettings",get:function(){return this._partnerSharingSettings}},{key:"addGranularOption",value:function(e,t,n){if(e&&t&&void 0!==n){var r=o({},t,n);this.granularOptions[e]?this.granularOptions[e]=a(a({},this.granularOptions[e]),r):this.granularOptions[e]=r}else K.error("Cannot add granular option, partnerName, key and value are mandatory")}},{key:"addPartnerSharingSetting",value:function(e,t,n){if(e&&t&&void 0!==n){var r=o({},t,n);this.partnerSharingSettings[e]?this.partnerSharingSettings[e]=a(a({},this.partnerSharingSettings[e]),r):this.partnerSharingSettings[e]=r}else K.error("Cannot add partner sharing setting, partnerName, key and value are mandatory")}}])}(),initSmartBanner:function(){K.error("function `initSmartBanner` is deprecated")},showSmartBanner:function(){K.error("function `showSmartBanner` is deprecated")},hideSmartBanner:function(){K.error("function `hideSmartBanner` is deprecated")},__testonly__:{destroy:er,clearDatabase:function(){return _t.deleteDatabase()}},__internal__:{restartAfterAsyncEnable:function(){K.log("Adjust SDK has been restarted due to asynchronous enable"),Gn&&or(Gn)}}};const sr=ar;return t=t.default})(),adjustLatest.exports=factory();var adjustLatestExports=adjustLatest.exports;const Adjust=getDefaultExportFromCjs(adjustLatestExports);function initAdjust(){console.log("Adjust Adjust"),isFlutterWebApp?toFlutterWebAppAdjust():Adjust.initSdk({appToken:adjustAppToken,environment:adjustEnvironment,logLevel:adjustLogoLevel,attributionCallback:function(e,t){console.log(`Adjust   network=${null==t?void 0:t.network}\n adid=${null==t?void 0:t.adid}`),""!=(null==t?void 0:t.network)&&null!=(null==t?void 0:t.network)&&null!=(null==t?void 0:t.network)&&(storeSave({key:adjustSaveKey,value:t}),localAuthAvailable()&&(console.log("Adjust  "),netUploadAttribution({adid:null==t?void 0:t.adid,trackerToken:null==t?void 0:t.trackerToken,trackerName:null==t?void 0:t.trackerName,network:null==t?void 0:t.network,campaign:null==t?void 0:t.campaign,adgroup:null==t?void 0:t.adgroup,creative:null==t?void 0:t.creative,clickLabel:null==t?void 0:t.clickLabel,state:null==t?void 0:t.state})))}})}function getAttribution(){const e=storeRead(adjustSaveKey);if(""!=(null==e?void 0:e.network)&&null!=(null==e?void 0:e.network)&&null!=(null==e?void 0:e.network))return console.log(`Adjust   network=${null==e?void 0:e.network}\n adid=${null==e?void 0:e.adid}`),e;if(isFlutterWebApp)return console.log("Adjust  flutterWebApp"),toFlutterWebAppAdjust(),null;{const e=Adjust.getAttribution();return console.log(`Adjust  adjust network=${null==e?void 0:e.network}\n adid=${null==e?void 0:e.adid}`),storeSave({key:adjustSaveKey,value:e}),e}}function adjustUploadAttribution(){if(localAuthAvailable()){console.log("Adjust  ");const e=getAttribution();null==e||null==e||""==e?console.log("Adjust  "):netUploadAttribution({adid:null==e?void 0:e.adid,trackerToken:null==e?void 0:e.trackerToken,trackerName:null==e?void 0:e.trackerName,network:null==e?void 0:e.network,campaign:null==e?void 0:e.campaign,adgroup:null==e?void 0:e.adgroup,creative:null==e?void 0:e.creative,clickLabel:null==e?void 0:e.clickLabel,state:null==e?void 0:e.state})}}function adjustTrackOrder(e){var t;const n=null==e?void 0:e.currencyFee,r=null==e?void 0:e.currencyCode,o=null==e?void 0:e.orderNo,i=n/100*parseFloat((null==(t=getAppConfig())?void 0:t.webPayScale)??1);Adjust.trackEvent({eventToken:adjustTrackOrderEventToken,revenue:i,currency:r,deduplicationId:o}).then((e=>{"success"==(null==e?void 0:e.status)?(console.log(`Adjust  ${o}`),storageDeleteOrder(o),appTrackOrder(o)):console.log(`Adjust  ${null==e?void 0:e.response.message}`)})).catch((e=>{console.log(`Adjust  ${e}`),storageDeleteOrder(o)}))}console.log(" adjust-init.js");let _orderStore=null;function initOrderLocalForage(){console.log(""),_orderStore=localforage.createInstance({name:`${gAppName}-order`})}function storageSaveOrder(e){_orderStore.setItem(e.orderNo,e).then((e=>{console.log("")}))}function storageDeleteOrder(e){_orderStore.removeItem(e).then((t=>{console.log(` ${e}`)}))}function storageLoadAllOrderUpload(){_orderStore.iterate(((e,t,n)=>{console.log("adjust"),adjustTrackOrder(e)})).then((function(){console.log("")})).catch((function(e){console.log(` ${e}`)}))}console.log(" pinia-init.js");const useAppDataStore=defineStore("appDataStore",(()=>{const e=shallowRef(localAuthAvailable()),t=ref(""),n=ref("");const r=ref("--"),o=ref(null),i=ref(!1),a=ref(!1),s=ref(!1),c=shallowRef([]);function l({success:e=()=>{},fail:t=()=>{}}){localAuthAvailable()?storageLoadAllConversations({success:t=>{const n=t.findIndex((e=>9999==e.anchorId));if(-1!==n){const[e]=t.splice(n,1);t.unshift(e)}c.value=t,e(),console.log("pinia  "),u()},fail:t}):(c.value=[],u())}function u(){console.log("");let e=0;for(const t of c.value)for(const n of t.datas)if(1!=(null==n?void 0:n.read)){e++;break}e<=0?removeTabBarBadge({index:3,fail:e=>{console.log(` ${e}`)}}):(console.log(""),setTabBarBadge({index:3,text:e.toString(),fail:e=>{console.log(` ${e}`)}}))}const d=()=>{console.log(" pinia  "),useAppDataStore().userBalance="--",useAppDataStore().userDetail=null,useAppDataStore().userHaveMatchCard=!1,useAppDataStore().userHaveCallCard=!1,useAppDataStore().userHaveChatCard=!1,useAppDataStore().conversations=[],u()};let A=0;return{appLogin:e,changeLoginStatus:function(t){e.value==t?console.log("UI "):(console.log("UI "),0==t?d():(console.log(" pinia "),l({})),e.value=t,useAppDataStore().loginStatusHadChangedNotification())},loginStatusHadChangedNotification:function(){console.log(" ")},balanceChangedNotification:function(){console.log("")},orderCompleteNotification:function(){console.log("")},userBalance:r,userDetail:o,userHaveMatchCard:i,userHaveCallCard:a,userHaveChatCard:s,conversations:c,loadAllConversations:l,deleteConversation:function(e){storageDeleteConversation(e,(()=>{l({})}))},readConversation:function(e){storageReadConversation(e,(()=>{l({})}))},readAllConversation:function(){storageReadAllConversation((()=>{l({})}))},updateConversationBadge:u,addConversation:function(e,t){var n,r;if(58==(null==t?void 0:t.messageType))console.log("");else if(21==(null==t?void 0:t.messageType))console.log(""),netUserDetail({}),useAppDataStore().balanceChangedNotification();else if(22==(null==t?void 0:t.messageType))console.log(""),netUserDetail({});else if(23==(null==t?void 0:t.messageType))useAppDataStore().addMsgInCall(t);else if(31==(null==t?void 0:t.messageType))console.log(""),1==(null==(n=null==t?void 0:t.data)?void 0:n.orderStatus)&&(console.log(""),useAppDataStore().orderCompleteNotification(),netUserDetail({}),netUserAdvance({}),showNotification({content:`${lanKey.rechargeSuccess.tr} ${null==(r=null==t?void 0:t.data)?void 0:r.diamonds.toBin}`}),storageLoadAllOrderUpload());else if(11==(null==t?void 0:t.messageType)||12==(null==t?void 0:t.messageType)||19==(null==t?void 0:t.messageType)||-43==(null==t?void 0:t.messageType)||-44==(null==t?void 0:t.messageType)||-50==(null==t?void 0:t.messageType)||-51==(null==t?void 0:t.messageType)||-52==(null==t?void 0:t.messageType))try{console.log(""),storageSaveMsg(e,t,(()=>{console.log("")}))}catch(o){console.log(` ${o}`)}},updateMsg:function(e,t){storageUpdateMsg({conversationId:e,newMsg:t})},addMsgInCall:function(e){},clearAllConversation:function(){storageClearAll((()=>{l({})}))},localInvitationSendSuccess:()=>{appTrackRtmSendInvite(!0)},localInvitationSendSFail:()=>{console.log(""),A++,A>=3&&(A=0,showMediaUnavaliableModal()),appTrackRtmSendInvite(!1)},localInvitationAccepted:e=>{},localInvitationRefused:()=>{},remoteInvitationCanceled:e=>{},remoteInvitationReceived:()=>{},pwaStatusChanged:()=>{},globalTimerNTF:()=>{console.log(" ")},debugRtmStatus:t,firebaseStatus:n}})),_sfc_main$d={__name:"modal-app-download-guide",props:["type"],emits:["close"],setup(e,{emit:t}){const n=ref(null);cacheAppConfig({success:e=>{n.value=null==e?void 0:e.webSourceReward}});const r=ref(e.type),o=ref([]);netRewardsFloat({success:e=>{o.value=e}});const i=t,a=()=>i("close"),s=useAppDataStore().$onAction((({name:e})=>{"remoteInvitationReceived"==e&&(console.log(" "),a())}));return onUnmounted((()=>{console.log("app "),s()})),(e,t)=>{const i=index$g,s=index$i,c=ScrollView;return openBlock(),createBlock(i,{class:"loginBack modal-gradient"},{default:withCtx((()=>[0==r.value?(openBlock(),createBlock(i,{key:0,class:"guide-chat"},{default:withCtx((()=>[createVNode(i,{class:"home_logo_logo",style:{width:"104rpx",height:"104rpx"}}),createVNode(s,{class:"first-download-tip"},{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(lanKey).downloadAppToChatTip.tr),1)])),_:1}),createVNode(s,{class:"first-download-tip-2"},{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(lanKey).downloadAppToChatTip2.tr),1)])),_:1})])),_:1})):1==r.value?(openBlock(),createBlock(i,{key:1,class:"guide-daily-reward"},{default:withCtx((()=>[createVNode(s,{class:"first-download-tip"},{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(lanKey).downloadAppRewardTip.tr),1)])),_:1}),createVNode(c,{"show-scrollbar":"false",class:"reward-scroll","scroll-x":"true"},{default:withCtx((()=>{var e,t,r,o;return[0!=(null==(e=n.value)?void 0:e.matchCardNum)?(openBlock(),createBlock(i,{key:0,class:"reward-scroll-item"},{default:withCtx((()=>[createVNode(i,{class:"reward-scroll-item-top"},{default:withCtx((()=>[createVNode(i,{class:"reward-props props-match-big"}),createVNode(s,{class:"count"},{default:withCtx((()=>{var e;return[createTextVNode("x"+toDisplayString$1(null==(e=n.value)?void 0:e.matchCardNum),1)]})),_:1})])),_:1}),createVNode(s,{class:"des"},{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(lanKey).matchCard.tr),1)])),_:1})])),_:1})):createCommentVNode("",!0),0!=(null==(t=n.value)?void 0:t.callCardNum)?(openBlock(),createBlock(i,{key:1,class:"reward-scroll-item"},{default:withCtx((()=>[createVNode(i,{class:"reward-scroll-item-top"},{default:withCtx((()=>[createVNode(i,{class:"reward-props props-video-big"}),createVNode(s,{class:"count"},{default:withCtx((()=>{var e;return[createTextVNode("x"+toDisplayString$1(null==(e=n.value)?void 0:e.callCardNum),1)]})),_:1})])),_:1}),createVNode(s,{class:"des"},{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(lanKey).videoCard.tr),1)])),_:1})])),_:1})):createCommentVNode("",!0),0!=(null==(r=n.value)?void 0:r.chatCardNum)?(openBlock(),createBlock(i,{key:2,class:"reward-scroll-item"},{default:withCtx((()=>[createVNode(i,{class:"reward-scroll-item-top"},{default:withCtx((()=>[createVNode(i,{class:"reward-props props-chat-big"}),createVNode(s,{class:"count"},{default:withCtx((()=>{var e;return[createTextVNode("x"+toDisplayString$1(null==(e=n.value)?void 0:e.chatCardNum),1)]})),_:1})])),_:1}),createVNode(s,{class:"des"},{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(lanKey).chatCard.tr),1)])),_:1})])),_:1})):createCommentVNode("",!0),0!=(null==(o=n.value)?void 0:o.diamonds)?(openBlock(),createBlock(i,{key:3,class:"reward-scroll-item"},{default:withCtx((()=>[createVNode(i,{class:"reward-scroll-item-top"},{default:withCtx((()=>[createVNode(i,{class:"reward-props props-diamond"}),createVNode(s,{class:"count"},{default:withCtx((()=>{var e;return[createTextVNode("x"+toDisplayString$1(null==(e=n.value)?void 0:e.diamonds.toBin),1)]})),_:1})])),_:1}),createVNode(s,{class:"des"},{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(lanKey).diamond.tr),1)])),_:1})])),_:1})):createCommentVNode("",!0)]})),_:1}),createVNode(s,{class:"first-download-tip"},{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(lanKey).downloadAppRewardTip2.tr),1)])),_:1}),createVNode(i,{class:"danmaku-area"},{default:withCtx((()=>[createVNode(unref(f$1),{class:"danmaku",channels:3,top:8,speeds:60,useSlot:"",randomChannel:"",danmus:o.value,loop:""},{dm:withCtx((({index:e,danmu:t})=>[createVNode(i,{class:normalizeClass(["barrage",e%3==0?"barrage-1":e%3==1?"barrage-2":"barrage-3"])},{default:withCtx((()=>[createVNode(i,{class:"portrait",style:normalizeStyle({backgroundImage:`url(${null==t?void 0:t.portrait})`})},null,8,["style"]),createVNode(s,{class:"nick-name"},{default:withCtx((()=>[createTextVNode(toDisplayString$1(null==t?void 0:t.nickname),1)])),_:2},1024),createVNode(i,{class:"reward-info"},{default:withCtx((()=>[createVNode(s,null,{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(lanKey).claimed.tr),1)])),_:1}),createVNode(s,{class:"num"},{default:withCtx((()=>[createTextVNode("+"+toDisplayString$1(t.diamonds>0?t.diamonds.toBin:t.callCardNum>0?t.callCardNum:t.chatCardNum>0?t.chatCardNum:t.matchCardNum),1)])),_:2},1024),createVNode(i,{class:normalizeClass(["reward-icon",t.diamonds>0?"props-diamond":t.callCardNum>0?"props-video":t.chatCardNum>0?"props-chat":"props-match"])},null,8,["class"])])),_:2},1024)])),_:2},1032,["class"])])),_:1},8,["danmus"])])),_:1})])),_:1})):createCommentVNode("",!0),createVNode(i,{class:"loginBtnArea"},{default:withCtx((()=>[createVNode(i,{class:"loginBtn",onClick:unref(openGooglePlay)},{default:withCtx((()=>[createVNode(i,{class:"googlePlayIcon"}),createVNode(s,null,{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(lanKey).googlePlay.tr),1)])),_:1})])),_:1},8,["onClick"])])),_:1}),createVNode(i,{class:"close-out",onClick:a},{default:withCtx((()=>[createVNode(i,{class:"close"})])),_:1})])),_:1})}}},ModalAppDownloadGuide=_export_sfc(_sfc_main$d,[["__scopeId","data-v-3cea1434"]]);var currencySymbolMap$1={exports:{}},map={AED:".",AFN:"",ALL:"L",AMD:"",ANG:"",AOA:"Kz",ARS:"$",AUD:"$",AWG:"",AZN:"",BAM:"KM",BBD:"$",BDT:"",BGN:"",BHD:"..",BIF:"FBu",BMD:"$",BND:"$",BOB:"$b",BOV:"BOV",BRL:"R$",BSD:"$",BTC:"",BTN:"Nu.",BWP:"P",BYN:"Br",BYR:"Br",BZD:"BZ$",CAD:"$",CDF:"FC",CHE:"CHE",CHF:"CHF",CHW:"CHW",CLF:"CLF",CLP:"$",CNH:"",CNY:"",COP:"$",COU:"COU",CRC:"",CUC:"$",CUP:"",CVE:"$",CZK:"K",DJF:"Fdj",DKK:"kr",DOP:"RD$",DZD:"",EEK:"kr",EGP:"",ERN:"Nfk",ETB:"Br",ETH:"",EUR:"",FJD:"$",FKP:"",GBP:"",GEL:"",GGP:"",GHC:"",GHS:"GH",GIP:"",GMD:"D",GNF:"FG",GTQ:"Q",GYD:"$",HKD:"$",HNL:"L",HRK:"kn",HTG:"G",HUF:"Ft",IDR:"Rp",ILS:"",IMP:"",INR:"",IQD:".",IRR:"",ISK:"kr",JEP:"",JMD:"J$",JOD:"JD",JPY:"",KES:"KSh",KGS:"",KHR:"",KMF:"CF",KPW:"",KRW:"",KWD:"KD",KYD:"$",KZT:"",LAK:"",LBP:"",LKR:"",LRD:"$",LSL:"M",LTC:"",LTL:"Lt",LVL:"Ls",LYD:"LD",MAD:"MAD",MDL:"lei",MGA:"Ar",MKD:"",MMK:"K",MNT:"",MOP:"MOP$",MRO:"UM",MRU:"UM",MUR:"",MVR:"Rf",MWK:"MK",MXN:"$",MXV:"MXV",MYR:"RM",MZN:"MT",NAD:"$",NGN:"",NIO:"C$",NOK:"kr",NPR:"",NZD:"$",OMR:"",PAB:"B/.",PEN:"S/.",PGK:"K",PHP:"",PKR:"",PLN:"z",PYG:"Gs",QAR:"",RMB:"",RON:"lei",RSD:".",RUB:"",RWF:"R",SAR:"",SBD:"$",SCR:"",SDG:"..",SEK:"kr",SGD:"S$",SHP:"",SLL:"Le",SOS:"S",SRD:"$",SSP:"",STD:"Db",STN:"Db",SVC:"$",SYP:"",SZL:"E",THB:"",TJS:"SM",TMT:"T",TND:".",TOP:"T$",TRL:"",TRY:"",TTD:"TT$",TVD:"$",TWD:"NT$",TZS:"TSh",UAH:"",UGX:"USh",USD:"$",UYI:"UYI",UYU:"$U",UYW:"UYW",UZS:"",VEF:"Bs",VES:"Bs.S",VND:"",VUV:"VT",WST:"WS$",XAF:"FCFA",XBT:"",XCD:"$",XOF:"CFA",XPF:"",XSU:"Sucre",XUA:"XUA",YER:"",ZAR:"R",ZMW:"ZK",ZWD:"Z$",ZWL:"$"};const currencySymbolMap=map;currencySymbolMap$1.exports=function(e){if("string"!=typeof e)return;const t=e.toUpperCase();return Object.prototype.hasOwnProperty.call(currencySymbolMap,t)?currencySymbolMap[t]:void 0},currencySymbolMap$1.exports.currencySymbolMap=currencySymbolMap;var currencySymbolMapExports=currencySymbolMap$1.exports;const getSymbolFromCurrency=getDefaultExportFromCjs(currencySymbolMapExports);function timestampToShortDateTime(e){if(null==e||""==e)return"";const t=new Date(e);return`${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")} ${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`}function timestampToYearMothDay(e){if(null==e||""==e)return"";const t=new Date(e);return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`}function timestampToYearMothDayTime(e){if(null==e||""==e)return"";const t=new Date(e);return`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")} ${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`}function timestampDifferent(e,t){if(null==e||""==e||null==t||""==t)return"";const n=Math.abs(e-t),r=Math.floor(n/1e3%60),o=Math.floor(n/6e4%60);return`${Math.floor(n/36e5%24).toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`}var agoraRtmSdk={exports:{}};agoraRtmSdk.exports,function(module,exports){var define_process_env_default={},t2;
/*
   @preserve
   AgoraRTM Web SDK 1.5.1 - commit: v1.5.1-0-g5bbbcd72
   Copyright (C) 2018-2022 Agora Lab.
   This file is licensed under the AGORA, INC. SDK LICENSE AGREEMENT
   A copy of this license may be found at https://www.agora.io/en/sdk-license-agreement/
  */t2=function(){function Be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(n),!0).forEach((function(t){x(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qa(e){return(qa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wm(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e22){return void n(e22)}s.done?t(c):Promise.resolve(c).then(r,o)}function ma(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){function i(e){wm(s,r,o,i,a,"next",e)}function a(e){wm(s,r,o,i,a,"throw",e)}var s=e.apply(t,n);i(void 0)}))}}function va(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function eb(e,t,n){return t&&xm(e.prototype,t),n&&xm(e,n),e}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ga(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jf(e,t)}function Td(e){return(Td=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Jf(e,t){return(Jf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ym(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e2){return!1}}function Ji(e,t,n){return(Ji=ym()?Reflect.construct:function(e,t,n){var r=[null];return r.push.apply(r,t),e=new(Function.bind.apply(e,r)),n&&Jf(e,n.prototype),e}).apply(null,arguments)}function Kf(e){var t="function"==typeof Map?new Map:void 0;return(Kf=function(e){function n(){return Ji(e,arguments,Td(this).constructor)}if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Jf(n,e)})(e)}function Ki(e,t){if(null==e)return{};if(null==e)var n={};else{n={};var r,o=Object.keys(e);for(r=0;r<o.length;r++){var i=o[r];0<=t.indexOf(i)||(n[i]=e[i])}}if(Object.getOwnPropertySymbols)for(r=Object.getOwnPropertySymbols(e),i=0;i<r.length;i++)o=r[i],0<=t.indexOf(o)||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o]);return n}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ha(e){var t=ym();return function(){var n=Td(e);if(t){var r=Td(this).constructor;n=Reflect.construct(n,arguments,r)}else n=n.apply(this,arguments);return!n||"object"!=typeof n&&"function"!=typeof n?z(this):n}}function Li(e,t,n){return(Li="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Td(e)););if(e)return(t=Object.getOwnPropertyDescriptor(e,t)).get?t.get.call(n):t.value})(e,t,n||e)}function $a(e,t){var n=Array.isArray(e)?e:void 0;if(!n)if(null==(n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"])))n=void 0;else{var r,o=[],i=!0,a=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e22){a=!0;var s=e22}finally{try{i||null==n.return||n.return()}finally{if(a)throw s}}n=o}if(!(e=n||zm(e,t)))throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");return e}function Z(e){var t=Array.isArray(e)?Mi(e):void 0;if(t||(t="undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"]?Array.from(e):void 0),!(e=t||zm(e)))throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");return e}function zm(e,t){if(e){if("string"==typeof e)return Mi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mi(e,t)}}function Mi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Da(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}function xb(e){var t={exports:{}};return e(t,t.exports),t.exports}function Ce(e){e||(e={});var t=e.ua;if(t||"undefined"==typeof navigator||(t=navigator.userAgent),t&&t.headers&&"string"==typeof t.headers["user-agent"]&&(t=t.headers["user-agent"]),"string"!=typeof t)return!1;var n=Zt.test(t)&&!$t.test(t)||!!e.tablet&&au.test(t);return!n&&e.tablet&&e.featureDetect&&navigator&&1<navigator.maxTouchPoints&&-1!==t.indexOf("Macintosh")&&-1!==t.indexOf("Safari")&&(n=!0),n}function Am(e,t){var n,r=3>arguments.length?e:arguments[2];return Ia(e)===r?e[t]:(n=dc.f(e,t))?ka(n,"value")?n.value:void 0===n.get?void 0:n.get.call(r):xa(n=uc(e))?Am(n,t,r):void 0}function bu(e){var t=e.charCodeAt(0)<<24,n=0|cu(~t),r=0,o=0|e.length,i="";if(5>n&&o>=n){for(t=t<<n>>>24+n,r=1;r<n;r=r+1|0)t=t<<6|63&e.charCodeAt(r);65535>=t?i+=Ud(t):1114111>=t?i+=Ud(55296+((t=t-65536|0)>>10)|0,56320+(1023&t)|0):r=0}for(;r<o;r=r+1|0)i+="";return i}function Bm(){}function du(e){var t=0|e.charCodeAt(0);if(55296<=t&&56319>=t){var n=0|e.charCodeAt(1);if(!(n==n&&56320<=n&&57343>=n))return Ud(239,191,189);if(65535<(t=(t-55296<<10)+n-56320+65536|0))return Ud(240|t>>>18,128|t>>>12&63,128|t>>>6&63,128|63&t)}return 127>=t?e:2047>=t?Ud(192|t>>>6,128|63&t):Ud(224|t>>>12,128|t>>>6&63,128|63&t)}function Cm(){}function Ba(){Ba.init.call(this)}function Wg(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+qa(e))}function Dm(e,t,n,r){Wg(n);var o=e._events;if(void 0===o)o=e._events=Object.create(null),e._eventsCount=0;else{void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events);var i=o[t]}return void 0===i?(o[t]=n,++e._eventsCount):("function"==typeof i?i=o[t]=r?[n,i]:[i,n]:r?i.unshift(n):i.push(n),0<(n=void 0===e._maxListeners?Ba.defaultMaxListeners:e._maxListeners)&&i.length>n&&!i.warned&&(i.warned=!0,(n=Error("Possible EventEmitter memory leak detected. "+i.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",n.emitter=e,n.type=t,n.count=i.length,console&&console.warn&&console.warn(n))),e}function eu(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Em(e,t,n){return e={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},(t=eu.bind(e)).listener=n,e.wrapFn=t}function Fm(e,t,n){if(void 0===(e=e._events))return[];if(void 0===(t=e[t]))return[];if("function"==typeof t)return n?[t.listener||t]:[t];if(n)for(n=Array(t.length),e=0;e<n.length;++e)n[e]=t[e].listener||t[e];else n=Gm(t,t.length);return n}function Hm(e){var t=this._events;if(void 0!==t){if("function"==typeof(e=t[e]))return 1;if(void 0!==e)return e.length}return 0}function Gm(e,t){for(var n=Array(t),r=0;r<t;++r)n[r]=e[r];return n}function fu(e,t,n){"function"==typeof e.on&&Im(e,"error",t,n)}function Im(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+qa(e));e.addEventListener(t,(function o(i){r.once&&e.removeEventListener(t,o),n(i)}))}}function gu(e){return e?Z(e):hu((function(){return[]}),(function(e,t){return e.push(t),e}))}function Jm(e,t){var n,r,o,i;return N.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n=Km(e)([Lm,Lm,function(e,t){return t}])[2],r=0;case 2:if(!(r<t.length)){a.next=17;break}if(o=t[r],!((i=n(Ni,o))instanceof Xg)){a.next=11;break}if((i=Oi(i.deref()))===Ni){a.next=10;break}return a.next=10,i;case 10:return a.abrupt("return");case 11:if(i===Ni){a.next=14;break}return a.next=14,i;case 14:r++,a.next=2;break;case 17:case"end":return a.stop()}}),iu)}function Yg(e,t){return null!=t&&"function"==typeof t[Symbol.iterator]?Jm(Yg(e),t):function(t){var n=t[2];return ju(t,(function(t,r){return n(t,e(r))}))}}function $c(e){return Object.prototype.toString.call(e).slice(8,-1)}function De(e){return"Object"===$c(e)&&e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function Mm(e){var t;return(t="Boolean"===$c(e)||"Null"===$c(e)||"Undefined"===$c(e))||(t="Number"===$c(e)&&!isNaN(e)),t||"String"===$c(e)||"Symbol"===$c(e)}function Vd(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ee(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Fe(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Lf(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Zg;++t<n;)this.add(e[t])}function Ge(e){this.size=(this.__data__=new $g(e)).size}function He(e,t,n,r,o,i){var a,s=1&t,c=2&t,l=4&t;if(n&&(a=o?n(e,r,o,i):n(e)),void 0!==a)return a;if(!Gb(e))return e;if(r=ub(e)){if(a=ku(e),!s)return Pi(e,a)}else{var u=Mf(e),d="[object Function]"==u||"[object GeneratorFunction]"==u;if(Nf(e))return Nm(e,s);if("[object Object]"==u||"[object Arguments]"==u||d&&!o){if(a=c||d?{}:Om(e),!s)return c?lu(e,mu(a,e)):nu(e,ou(a,e))}else{if(!Oa[u])return o?e:{};a=pu(e,u,s)}}if(i||(i=new Ie),o=i.get(e))return o;i.set(e,a),qu(e)?e.forEach((function(r){a.add(He(r,t,n,r,e,i))})):ru(e)&&e.forEach((function(r,o){a.set(o,He(r,t,n,o,e,i))})),c=l?c?Pm:Qi:c?Of:Wd;var A=r?void 0:c(e);return su(A||e,(function(r,o){A&&(r=e[o=r]),Qm(a,o,He(r,t,n,o,e,i))})),a}function Ri(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;return i.has(o)?i.get(o):(r=e.apply(this,r),n.cache=i.set(o,r)||i,r)};return n.cache=new(Ri.Cache||Zg),n}function Rm(e){if("string"==typeof e)return e;if(ub(e))return Je(e,Rm)+"";if(Ke(e))return Sm?Sm.call(e):"";var t=e+"";return"0"==t&&1/e==-tu?"-0":t}function Si(e,t,n,r,o){var i=-1,a=e.length;for(n||(n=uu),o||(o=[]);++i<a;){var s=e[i];n(s)?Ti(o,s):o[o.length]=s}return o}function Le(e,t,n,r,o){if(e===t)t=!0;else if(null==e||null==t||!Hc(e)&&!Hc(t))t=e!=e&&t!=t;else e:{var i=ub(e),a=ub(t),s=i?"[object Array]":Mf(e),c=a?"[object Array]":Mf(t),l="[object Object]"==(s="[object Arguments]"==s?"[object Object]":s);if(a="[object Object]"==(c="[object Arguments]"==c?"[object Object]":c),(c=s==c)&&Nf(e)){if(!Nf(t)){t=!1;break e}i=!0,l=!1}if(c&&!l)o||(o=new Ie),t=i||Ui(e)?Tm(e,t,n,r,Le,o):vu(e,t,s,n,r,Le,o);else{if(!(1&n)&&(i=l&&Um.call(e,"__wrapped__"),s=a&&Um.call(t,"__wrapped__"),i||s)){e=i?e.value():e,t=s?t.value():t,o||(o=new Ie),t=Le(e,t,n,r,o);break e}if(c)t:if(o||(o=new Ie),i=1&n,s=Qi(e),a=s.length,c=Qi(t).length,a==c||i){for(c=a;c--;){var u=s[c];if(!(i?u in t:wu.call(t,u))){t=!1;break t}}if(l=o.get(e),u=o.get(t),l&&u)t=l==t&&u==e;else{l=!0,o.set(e,t),o.set(t,e);for(var d=i;++c<a;){var A=e[u=s[c]],p=t[u];if(r)var h=i?r(p,A,u,t,e,o):r(A,p,u,e,t,o);if(void 0===h?A!==p&&!Le(A,p,n,r,o):!h){l=!1;break}d||(d="constructor"==u)}l&&!d&&(n=e.constructor)!=(r=t.constructor)&&"constructor"in e&&"constructor"in t&&!("function"==typeof n&&n instanceof n&&"function"==typeof r&&r instanceof r)&&(l=!1),o.delete(e),o.delete(t),t=l}}else t=!1;else t=!1}}return t}function Pa(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function Hb(e){return!0===(e&&e.__isLong__)}function Xd(e,t){var n;if(t){if((t=0<=(e>>>=0)&&256>e)&&(n=Vm[e]))return n;n=Qa(e,0>(0|e)?-1:0,!0),t&&(Vm[e]=n)}else{if((t=-128<=(e|=0)&&128>e)&&(n=Wm[e]))return n;n=Qa(e,0>e?-1:0,!1),t&&(Wm[e]=n)}return n}function ec(e,t){if(isNaN(e))return t?Yd:fc;if(t){if(0>e)return Yd;if(e>=Xm)return Ym}else{if(e<=-Zm)return Ib;if(e+1>=Zm)return $m}return 0>e?ec(-e,t).neg():Qa(e%Me|0,e/Me|0,t)}function Qa(e,t,n){return new Pa(e,t,n)}function Vi(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return fc;if("number"==typeof t?(n=t,t=!1):t=!!t,2>(n=n||10)||36<n)throw RangeError("radix");var r;if(0<(r=e.indexOf("-")))throw Error("interior hyphen");if(0===r)return Vi(e.substring(1),t,n).neg();r=ec(ah(n,8));for(var o=fc,i=0;i<e.length;i+=8){var a=Math.min(8,e.length-i),s=parseInt(e.substring(i,i+a),n);8>a?(a=ec(ah(n,a)),o=o.mul(a).add(ec(s))):o=(o=o.mul(r)).add(ec(s))}return o.unsigned=t,o}function vc(e,t){return"number"==typeof e?ec(e,t):"string"==typeof e?Vi(e,t):Qa(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}function ha(e,t){function n(){this.constructor=e}Wi(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function Ne(e){return"function"==typeof e}function Oe(e){setTimeout((function(){throw e}),0)}function Xi(e){return null!==e&&"object"===qa(e)}function an(e){return e.reduce((function(e,t){return e.concat(t instanceof Pf?t.errors:t)}),[])}function Yi(e){for(;e;){var t=e.destination,n=e.isStopped;if(e.closed||n)return!1;e=t&&t instanceof za?t:null}return!0}function wd(e){return e}function Zi(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return bn(e)}function bn(e){return 0===e.length?wd:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}function cn(e){if(e||(e=gc.Promise||Promise),!e)throw Error("no Promise impl found");return e}function dn(){return function(e){return e.lift(new xu(e))}}function Qf(e){return e?yu(e):Sb}function yu(e){return new ua((function(t){return e.schedule((function(){return t.complete()}))}))}function ad(e){return e&&"function"==typeof e.schedule}function $i(e,t){return new ua((function(n){var r=new nb,o=0;return r.add(t.schedule((function(){o===e.length?n.complete():(n.next(e[o++]),n.closed||r.add(this.schedule()))}))),r}))}function Rf(e,t){return t?$i(e,t):new ua(en(e))}function ob(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ad(t=e[e.length-1])?(e.pop(),$i(e,t)):Rf(e)}function ra(e,t){return new ua(t?function(n){return t.schedule(zu,0,{error:e,subscriber:n})}:function(t){return t.error(e)})}function zu(e){e.subscriber.error(e.error)}function Au(e,t){return void 0===t&&(t=0),function(n){return n.lift(new Bu(e,t))}}function fn(e){return e in aj&&(delete aj[e],!0)}function Ic(){}function Ea(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new Cu(e,t))}}function gn(e,t,n){if(t){if(!ad(t))return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return gn(e,n).apply(void 0,r).pipe(Ea((function(e){return hc(e)?t.apply(void 0,e):t(e)})))};n=t}return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var o,i=this,a={context:i,subject:o,callbackFunc:e,scheduler:n};return new ua((function(r){if(n)return n.schedule(Du,0,{args:t,subscriber:r,params:a});if(!o){o=new Sf;try{e.apply(i,t.concat([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];o.next(1>=e.length?e[0]:e),o.complete()}]))}catch(e22){Yi(o)?o.error(e22):console.warn(e22)}}return o.subscribe(r)}))}}function Du(e){var t=this,n=e.args,r=e.subscriber,o=e.params;e=o.callbackFunc;var i=o.context,a=o.scheduler,s=o.subject;if(!s){s=o.subject=new Sf,o=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.add(a.schedule(Eu,0,{value:1>=e.length?e[0]:e,subject:s}))};try{e.apply(i,n.concat([o]))}catch(e22){s.error(e22)}}this.add(s.subscribe(r))}function Eu(e){var t=e.subject;t.next(e.value),t.complete()}function hn(e,t,n){if(t){if(!ad(t))return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return hn(e,n).apply(void 0,r).pipe(Ea((function(e){return hc(e)?t.apply(void 0,e):t(e)})))};n=t}return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var o={subject:void 0,args:t,callbackFunc:e,scheduler:n,context:this};return new ua((function(r){var i=o.context,a=o.subject;if(n)return n.schedule(Fu,0,{params:o,subscriber:r,context:i});if(!a){a=o.subject=new Sf;try{e.apply(i,t.concat([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];(t=e.shift())?a.error(t):(a.next(1>=e.length?e[0]:e),a.complete())}]))}catch(e22){Yi(a)?a.error(e22):console.warn(e22)}}return a.subscribe(r)}))}}function Fu(e){var t=this,n=e.params,r=e.subscriber;e=e.context;var o=n.callbackFunc,i=n.args,a=n.scheduler,s=n.subject;if(!s){s=n.subject=new Sf,n=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];(n=e.shift())?t.add(a.schedule(jn,0,{err:n,subject:s})):t.add(a.schedule(Gu,0,{value:1>=e.length?e[0]:e,subject:s}))};try{o.apply(e,i.concat([n]))}catch(e22){this.add(a.schedule(jn,0,{err:e22,subject:s}))}}this.add(s.subscribe(r))}function Gu(e){var t=e.subject;t.next(e.value),t.complete()}function jn(e){e.subject.error(e.err)}function kn(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}function bj(e,t,n,r,o){if(void 0===o&&(o=new Hu(e,n,r)),!o.closed)return t instanceof ua?t.subscribe(o):Tf(t)(o)}function Iu(e,t){return new ua((function(n){var r=new nb;return r.add(t.schedule((function(){var o=e[Pe]();r.add(o.subscribe({next:function(e){r.add(t.schedule((function(){return n.next(e)})))},error:function(e){r.add(t.schedule((function(){return n.error(e)})))},complete:function(){r.add(t.schedule((function(){return n.complete()})))}}))}))),r}))}function Ju(e,t){return new ua((function(n){var r=new nb;return r.add(t.schedule((function(){return e.then((function(e){r.add(t.schedule((function(){n.next(e),r.add(t.schedule((function(){return n.complete()})))})))}),(function(e){r.add(t.schedule((function(){return n.error(e)})))}))}))),r}))}function Ku(e,t){if(!e)throw Error("Iterable cannot be null");return new ua((function(n){var r,o=new nb;return o.add((function(){r&&"function"==typeof r.return&&r.return()})),o.add(t.schedule((function(){r=e[xd](),o.add(t.schedule((function(){if(!n.closed){try{var e=r.next(),t=e.value,o=e.done}catch(i){return void n.error(i)}o?n.complete():(n.next(t),this.schedule())}})))}))),o}))}function ln(e,t){if(null!=e){if(e&&"function"==typeof e[Pe])return Iu(e,t);if(kn(e))return Ju(e,t);if(mn(e))return $i(e,t);if(e&&"function"==typeof e[xd]||"string"==typeof e)return Ku(e,t)}throw new TypeError((null!==e&&qa(e)||e)+" is not observable")}function Jc(e,t){return t?ln(e,t):e instanceof ua?e:new ua(Tf(e))}function bd(e,t){if(!t.closed){if(e instanceof ua)return e.subscribe(t);try{var n=Tf(e)(t)}catch(e22){t.error(e22)}return n}}function Cb(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof t?function(r){return r.pipe(Cb((function(n,r){return Jc(e(n,r)).pipe(Ea((function(e,o){return t(n,e,r,o)})))}),n))}:("number"==typeof t&&(n=t),function(t){return t.lift(new Lu(e,n))})}function bh(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),Cb(wd,e)}function nn(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return bh(1)(ob.apply(void 0,e))}function yd(e){return new ua((function(t){try{var n=e()}catch(e22){return void t.error(e22)}return(n?Jc(n):Qf()).subscribe(t)}))}function ch(e,t){return new ua((function(n){var r=e.length;if(0===r)n.complete();else for(var o=Array(r),i=0,a=0,s=function(s){var c=Jc(e[s]),l=!1;n.add(c.subscribe({next:function(e){l||(l=!0,a++),o[s]=e},error:function(e){return n.error(e)},complete:function(){++i!==r&&l||(a===r&&n.next(t?t.reduce((function(e,t,n){return e[t]=o[n],e}),{}):o),n.complete())}}))},c=0;c<r;c++)s(c)}))}function Db(e,t,n,r){return Ne(n)&&(r=n,n=void 0),r?Db(e,t,n).pipe(Ea((function(e){return hc(e)?r.apply(void 0,e):r(e)}))):new ua((function(r){on(e,t,(function(e){1<arguments.length?r.next(Array.prototype.slice.call(arguments)):r.next(e)}),r,n)}))}function on(e,t,n,r,o){if(e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener){e.addEventListener(t,n,o);var i=function(){return e.removeEventListener(t,n,o)}}else if(e&&"function"==typeof e.on&&"function"==typeof e.off)e.on(t,n),i=function(){return e.off(t,n)};else if(e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener)e.addListener(t,n),i=function(){return e.removeListener(t,n)};else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var a=0,s=e.length;a<s;a++)on(e[a],t,n,r,o)}r.add(i)}function pn(e,t,n){return n?pn(e,t).pipe(Ea((function(e){return hc(e)?n.apply(void 0,e):n(e)}))):new ua((function(n){var r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.next(1===e.length?e[0]:e)};try{var o=e(r)}catch(e22){return void n.error(e22)}if(Ne(t))return function(){return t(r,o)}}))}function Mu(e){var t=e.subscriber,n=e.condition;if(!t.closed){if(e.needIterate)try{e.state=e.iterate(e.state)}catch(e22){return void t.error(e22)}else e.needIterate=!0;if(n){var r=void 0;try{r=n(e.state)}catch(e22){return void t.error(e22)}if(!r)return void t.complete();if(t.closed)return}try{var o=e.resultSelector(e.state)}catch(e22){return void t.error(e22)}if(!t.closed&&(t.next(o),!t.closed))return this.schedule(e)}}function cj(e){return!hc(e)&&0<=e-parseFloat(e)+1}function Qe(e,t){return void 0===e&&(e=0),void 0===t&&(t=cd),(!cj(e)||0>e)&&(e=0),t&&"function"==typeof t.schedule||(t=cd),new ua((function(n){return n.add(t.schedule(Nu,e,{subscriber:n,counter:0,period:e})),n}))}function Nu(e){var t=e.subscriber,n=e.counter;e=e.period,t.next(n),this.schedule({subscriber:t,counter:n+1,period:e},e)}function Jb(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];t=Number.POSITIVE_INFINITY;var n=null,r=e[e.length-1];return ad(r)?(n=e.pop(),1<e.length&&"number"==typeof e[e.length-1]&&(t=e.pop())):"number"==typeof r&&(t=e.pop()),null===n&&1===e.length&&e[0]instanceof ua?e[0]:bh(t)(Rf(e,n))}function dj(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)return Sb;var n=e[0],r=e.slice(1);return 1===e.length&&hc(n)?dj.apply(void 0,n):new ua((function(e){var t=function(){return e.add(dj.apply(void 0,r).subscribe(e))};return Jc(n).subscribe({next:function(t){e.next(t)},error:t,complete:t})}))}function Ou(e){var t=e.keys,n=e.index,r=e.subscriber,o=e.subscription;if(e=e.obj,!r.closed)if(n<t.length){var i=t[n];r.next([i,e[i]]),o.add(this.schedule({keys:t,index:n+1,subscriber:r,subscription:o,obj:e}))}else r.complete()}function Pu(e,t){function n(){return!n.pred.apply(n.thisArg,arguments)}return n.pred=e,n.thisArg=t,n}function yb(e,t){return function(n){return n.lift(new Qu(e,t))}}function fb(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){if(!hc(e[0]))return e[0];e=e[0]}return Rf(e,void 0).lift(new Ru)}function Su(e){var t=e.start,n=e.index,r=e.subscriber;n>=e.count?r.complete():(r.next(t),r.closed||(e.index=n+1,e.start=t+1,this.schedule(e)))}function dd(e,t,n){void 0===e&&(e=0);var r=-1;return cj(t)?r=1>Number(t)?1:Number(t):ad(t)&&(n=t),ad(n)||(n=cd),new ua((function(t){var o=cj(e)?e:+e-n.now();return n.schedule(Tu,o,{index:0,period:r,subscriber:t})}))}function Tu(e){var t=e.index,n=e.period,r=e.subscriber;if(r.next(t),!r.closed){if(-1===n)return r.complete();e.index=t+1,this.schedule(e,n)}}function ej(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"function"==typeof(t=e[e.length-1])&&e.pop(),Rf(e,void 0).lift(new Uu(t))}function dh(e){var t=arguments.length,n=cd;ad(arguments[arguments.length-1])&&(n=arguments[arguments.length-1],t--);var r=null;2<=t&&(r=arguments[1]);var o=Number.POSITIVE_INFINITY;return 3<=t&&(o=arguments[2]),function(t){return t.lift(new Vu(e,r,o,n))}}function qn(e){var t=e.subscriber,n=e.context;n&&t.closeContext(n),t.closed||(e.context=t.openContext(),e.context.closeAction=this.schedule(e,e.bufferTimeSpan))}function Wu(e){var t=e.bufferCreationInterval,n=e.bufferTimeSpan,r=e.subscriber,o=e.scheduler,i=r.openContext();r.closed||(r.add(i.closeAction=o.schedule(rn,n,{subscriber:r,context:i})),this.schedule(e,t))}function rn(e){e.subscriber.closeContext(e.context)}function ab(e){return function(t){var n=new Xu(e);return t=t.lift(n),n.caught=t}}function fj(e,t){return Cb(e,t,1)}function sn(e){return void 0===e&&(e=null),function(t){return t.lift(new Yu(e))}}function Zd(e,t){void 0===t&&(t=cd);var n=e instanceof Date&&!isNaN(+e)?+e-t.now():Math.abs(e);return function(e){return e.lift(new Zu(n,t))}}function tn(e,t){return function(n){return n.lift(new $u(e,t))}}function $d(e){return void 0===e&&(e=av),function(t){return t.lift(new bv(e))}}function av(){return new eh}function hb(e){return function(t){return 0===e?Qf():t.lift(new cv(e))}}function fh(e){return function(t){return t.lift(new dv(e))}}function Ca(e,t){var n=2<=arguments.length;return function(r){return r.pipe(e?yb((function(t,n){return e(t,n,r)})):wd,hb(1),n?sn(t):$d((function(){return new eh})))}}function ev(){return function(e){return e.lift(new fv)}}function un(e){return function(t){return 0===e?Qf():t.lift(new gv(e))}}function Uf(e){return function(t){return t.lift(new hv(e))}}function gh(e,t){var n=!1;return 2<=arguments.length&&(n=!0),function(r){return r.lift(new iv(e,t,n))}}function vn(e,t){return 2<=arguments.length?function(n){return Zi(gh(e,t),un(1),sn(t))(n)}:function(t){return Zi(gh((function(t,n,r){return e(t,n,r+1)})),un(1))(t)}}function jv(e,t){return function(t){var n="function"==typeof e?e:function(){return e},r=Object.create(t,lv);return r.source=t,r.subjectFactory=n,r}}function Re(e){return function(t){return t.lift(new mv(e,t))}}function nv(){return new rb}function Se(){return function(e){return dn()(jv(nv)(e))}}function wn(e,t,n){var r=e&&"object"===qa(e)?e:{bufferSize:e,windowTime:t,refCount:!1,scheduler:n};return function(e){return e.lift(ov(r))}}function ov(e){var t,n,r=e.bufferSize,o=void 0===r?Number.POSITIVE_INFINITY:r,i=void 0===(r=e.windowTime)?Number.POSITIVE_INFINITY:r,a=e.refCount,s=e.scheduler,c=0,l=!1,u=!1;return function(e){if(c++,!t||l){l=!1;var r=(t=new Te(o,i,s)).subscribe(this);n=e.subscribe({next:function(e){t.next(e)},error:function(e){l=!0,t.error(e)},complete:function(){u=!0,n=void 0,t.complete()}}),u&&(n=void 0)}else r=t.subscribe(this);this.add((function(){c--,r.unsubscribe(),r=void 0,n&&!u&&a&&0===c&&(n.unsubscribe(),t=n=void 0)}))}}function Kb(e,t){return"function"==typeof t?function(n){return n.pipe(Kb((function(n,r){return Jc(e(n,r)).pipe(Ea((function(e,o){return t(n,e,r,o)})))})))}:function(t){return t.lift(new pv(e))}}function Kc(e){return function(t){return t.lift(new qv(e))}}function sa(e,t,n){return function(r){return r.lift(new rv(e,t,n))}}function sv(e,t,n){return void 0===t&&(t=cd),void 0===n&&(n=tv),function(r){return r.lift(new uv(e,t,n.leading,n.trailing))}}function vv(e){e.subscriber.clearThrottle()}function wv(e,t,n){return void 0===n&&(n=cd),function(r){var o=e instanceof Date&&!isNaN(+e),i=o?+e-n.now():Math.abs(e);return r.lift(new xv(i,o,t,n))}}function Lb(e,t){return void 0===t&&(t=cd),wv(e,ra(new Tb),t)}function yv(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){var n;return"function"==typeof e[e.length-1]&&(n=e.pop()),t.lift(new zv(e,n))}}function xn(e){(gj||e)&&(yn.abort(),e&&(yn=new AbortController),gj=e)}function zn(e,t,n,r,o){e!==t&&An(t,(function(i,a){if(o||(o=new Ie),Gb(i)){i=o;var s=hj(e,a),c=hj(t,a),l=i.get(c);if(l)ij(e,a,l);else{var u=void 0===(l=r?r(s,c,a+"",e,t,i):void 0);if(u){var d=ub(c),A=!d&&Nf(c),p=!d&&!A&&Ui(c);l=c,d||A||p?ub(s)?l=s:Hc(s)&&ae(s)?l=Pi(s):A?(u=!1,l=Nm(c,!0)):p?(u=!1,l=Bn(c,!0)):l=[]:Cn(c)||Vf(c)?(l=s,Vf(s)?l=Ue(s,Of(s)):Gb(s)&&!jj(s)||(l=Om(c))):u=!1}u&&(i.set(c,l),zn(l,c,n,r,i),i.delete(c)),ij(e,a,l)}}else void 0===(s=r?r(hj(e,a),i,a+"",e,t,o):void 0)&&(s=i),ij(e,a,s)}),Of)}function Av(e){var t=1,n=kj;1==(1>=arguments.length?0:arguments.length-1)?"number"==typeof(1>=arguments.length?void 0:arguments[1])?t=1>=arguments.length?void 0:arguments[1]:n=1>=arguments.length?void 0:arguments[1]:2==(1>=arguments.length?0:arguments.length-1)&&(t=1>=arguments.length?void 0:arguments[1],n=2>=arguments.length?void 0:arguments[2]);var r=t||1;return function(t){return t.pipe(gh((function(t,o){var i=n.now(),a=i-e;if((t=t.filter((function(e){return e.until>a}))).length>=r){var s=t[t.length-1],c=t[0].until+e*Math.floor(t.length/r);t.push({delay:s.until<i?c-i:c-s.until,until:c,value:o})}else t.push({delay:0,until:i,value:o});return t}),[]),Ea((function(e){return e[e.length-1]})),fj((function(e){var t=ob(e.value);return e.delay?t.pipe(Zd(e.delay,n)):t})))}}function Bv(e,t){var n=(t=void 0===t?{protocols:Dn,makeWebSocket:En}:t).protocols,r=void 0===n?Dn:n,o=void 0===(t=t.makeWebSocket)?En:t;return new ua((function(t){var n,i=new rb,a=o(e,r),s=!1,c=!1,l=!1,u=function(e){if(n)throw s=!0,e=Error("Web socket message factory function called more than once"),t.error(e),e;return n=e.subscribe((function(e){a.send(e)})),i};return a.onopen=function(){l=!0,c?(s=!0,a.close()):t.next(u)},a.onmessage=function(e){i.next(e.data)},a.onerror=function(e){s=!0,t.error(Error(e.message))},a.onclose=function(e){s||(s=!0,c?(t.complete(),i.complete()):t.error(Error(1e3===e.code?"Normal closure":e.reason)))},function(){c=!0,n&&n.unsubscribe(),s||(s=!0,l&&a.close())}}))}function hh(){this._listeners={}}function Fn(e){return"undefined"!=typeof Float32Array?function(){function t(e,t,n){i[0]=e,t[n]=a[0],t[n+1]=a[1],t[n+2]=a[2],t[n+3]=a[3]}function n(e,t,n){i[0]=e,t[n]=a[3],t[n+1]=a[2],t[n+2]=a[1],t[n+3]=a[0]}function r(e,t){return a[0]=e[t],a[1]=e[t+1],a[2]=e[t+2],a[3]=e[t+3],i[0]}function o(e,t){return a[3]=e[t],a[2]=e[t+1],a[1]=e[t+2],a[0]=e[t+3],i[0]}var i=new Float32Array([-0]),a=new Uint8Array(i.buffer),s=128===a[3];e.writeFloatLE=s?t:n,e.writeFloatBE=s?n:t,e.readFloatLE=s?r:o,e.readFloatBE=s?o:r}():function(){function t(e,t,n,r){var o=0>t?1:0;if(o&&(t=-t),0===t)e(0<1/t?0:2147483648,n,r);else if(isNaN(t))e(2143289344,n,r);else if(34028234663852886e22<t)e((o<<31|2139095040)>>>0,n,r);else if(11754943508222875e-54>t)e((o<<31|Math.round(t/1401298464324817e-60))>>>0,n,r);else{var i=Math.floor(Math.log(t)/Math.LN2);e((o<<31|i+127<<23|8388607&Math.round(t*Math.pow(2,-i)*8388608))>>>0,n,r)}}function n(e,t,n){return n=e(t,n),e=2*(n>>31)+1,t=n>>>23&255,n&=8388607,255===t?n?NaN:1/0*e:0===t?1401298464324817e-60*e*n:e*Math.pow(2,t-150)*(n+8388608)}e.writeFloatLE=t.bind(null,Gn),e.writeFloatBE=t.bind(null,Hn),e.readFloatLE=n.bind(null,In),e.readFloatBE=n.bind(null,Jn)}(),"undefined"!=typeof Float64Array?function(){function t(e,t,n){i[0]=e,t[n]=a[0],t[n+1]=a[1],t[n+2]=a[2],t[n+3]=a[3],t[n+4]=a[4],t[n+5]=a[5],t[n+6]=a[6],t[n+7]=a[7]}function n(e,t,n){i[0]=e,t[n]=a[7],t[n+1]=a[6],t[n+2]=a[5],t[n+3]=a[4],t[n+4]=a[3],t[n+5]=a[2],t[n+6]=a[1],t[n+7]=a[0]}function r(e,t){return a[0]=e[t],a[1]=e[t+1],a[2]=e[t+2],a[3]=e[t+3],a[4]=e[t+4],a[5]=e[t+5],a[6]=e[t+6],a[7]=e[t+7],i[0]}function o(e,t){return a[7]=e[t],a[6]=e[t+1],a[5]=e[t+2],a[4]=e[t+3],a[3]=e[t+4],a[2]=e[t+5],a[1]=e[t+6],a[0]=e[t+7],i[0]}var i=new Float64Array([-0]),a=new Uint8Array(i.buffer),s=128===a[7];e.writeDoubleLE=s?t:n,e.writeDoubleBE=s?n:t,e.readDoubleLE=s?r:o,e.readDoubleBE=s?o:r}():function(){function t(e,t,n,r,o,i){var a=0>r?1:0;if(a&&(r=-r),0===r)e(0,o,i+t),e(0<1/r?0:2147483648,o,i+n);else if(isNaN(r))e(0,o,i+t),e(2146959360,o,i+n);else if(17976931348623157e292<r)e(0,o,i+t),e((a<<31|2146435072)>>>0,o,i+n);else if(22250738585072014e-324>r)e((r/=5e-324)>>>0,o,i+t),e((a<<31|r/4294967296)>>>0,o,i+n);else{var s=Math.floor(Math.log(r)/Math.LN2);1024===s&&(s=1023),e(4503599627370496*(r*=Math.pow(2,-s))>>>0,o,i+t),e((a<<31|s+1023<<20|1048576*r&1048575)>>>0,o,i+n)}}function n(e,t,n,r,o){return t=e(r,o+t),r=e(r,o+n),e=2*(r>>31)+1,t=4294967296*(1048575&r)+t,2047==(n=r>>>20&2047)?t?NaN:1/0*e:0===n?5e-324*e*t:e*Math.pow(2,n-1075)*(t+4503599627370496)}e.writeDoubleLE=t.bind(null,Gn,0,4),e.writeDoubleBE=t.bind(null,Hn,4,0),e.readDoubleLE=n.bind(null,In,0,4),e.readDoubleBE=n.bind(null,Jn,4,0)}(),e}function Gn(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function Hn(e,t,n){t[n]=e>>>24,t[n+1]=e>>>16&255,t[n+2]=e>>>8&255,t[n+3]=255&e}function In(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function Jn(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}function vb(e,t){this.lo=e>>>0,this.hi=t>>>0}function Wf(e,t,n){this.fn=e,this.len=t,this.next=void 0,this.val=n}function lj(){}function Cv(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function Aa(){this.len=0,this.tail=this.head=new Wf(lj,0,0),this.states=null}function mj(e,t,n){t[n]=255&e}function nj(e,t){this.len=e,this.next=void 0,this.val=t}function oj(e,t,n){for(;e.hi;)t[n++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;127<e.lo;)t[n++]=127&e.lo|128,e.lo>>>=7;t[n++]=e.lo}function pj(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function Lc(){qj.call(this)}function Dv(e,t,n){40>e.length?pa.utf8.write(e,t,n):t.utf8Write?t.utf8Write(e,n):t.write(e,n)}function wc(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function ib(e){this.buf=e,this.pos=0,this.len=e.length}function rj(){var e=new Kn(0,0),t=0;if(!(4<this.len-this.pos)){for(;3>t;++t){if(this.pos>=this.len)throw wc(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,128>this.buf[this.pos++])return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;4>t;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,128>this.buf[this.pos++])return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,128>this.buf[this.pos++])return e;if(t=0,4<this.len-this.pos){for(;5>t;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,128>this.buf[this.pos++])return e}else for(;5>t;++t){if(this.pos>=this.len)throw wc(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,128>this.buf[this.pos++])return e}throw Error("invalid varint encoding")}function ih(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function Ln(){if(this.pos+8>this.len)throw wc(this,8);return new Kn(ih(this.buf,this.pos+=4),ih(this.buf,this.pos+=4))}function be(e){sj.call(this,e)}function Xf(e,t,n){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");pa.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=!!t,this.responseDelimited=!!n}function Mn(e){var t=[];return function e(n){if(null===n||"object"!==qa(n))return n;if(-1!==t.indexOf(n))return"[Circular]";if(t.push(n),"function"==typeof n.toJSON)try{var r=e(n.toJSON());return t.pop(),r}catch(o){return"[Throws: "+(o?o.message:"?")+"]"}return Array.isArray(n)?(r=n.map(e),t.pop(),r):(r=Object.keys(n).reduce((function(t,r){e:{if(Ev.call(n,r))try{var i=n[r];break e}catch(o){i="[Throws: "+(o?o.message:"?")+"]";break e}i=n[r]}return t[r]=e(i),t}),{}),t.pop(),r)}(e)}function Fv(e){if(!(100<(e=String(e)).length)&&(e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e))){var t=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*t;case"weeks":case"week":case"w":return 6048e5*t;case"days":case"day":case"d":return 864e5*t;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*t;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*t;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t}}}function jh(e,t,n,r){return Math.round(e/n)+" "+r+(t>=1.5*n?"s":"")}function Gv(e){var t=e.areas,n=e.excludedArea;if(1===t.length&&t[0]===S.GLOBAL&&n===S.CHINA)return Ve([S.OVERSEA]);if(t.includes(S.GLOBAL)){if(e=Yf(kh).filter((function(e){return e!==S.GLOBAL&&e!==S.OVERSEA})),n in Zf){t=Zf[n];var r=[].concat(Z(null!=t?t:[]),[n]);return Ve(e.filter((function(e){return!r.includes(e)})))}if(Nn(n)){var o=Hv(n);return Ve(e.filter((function(e){return e!==n&&e!==o})))}}if(Nn(n)||n in Zf)return Ve(t);throw new ca("Invalid excludedArea area config")}function jb(e,t,n){void 0===n&&(n=Object.getOwnPropertyDescriptor(e,t));var r=n.value;return n.value=function(){for(var e=this,n=arguments.length,o=Array(n),i=0;i<n;i++)o[i]=arguments[i];this.invokeTracker.apply(this,["%s: ".concat(0<o.length?"%s with args: ".concat(o.map((function(){return"%o"}))):"%s"),this.name,t].concat(Z(o.map(We))));try{var a=r.apply(this,o)}catch(c){throw this.logError.apply(this,["".concat(void 0!==c.code?"Error Code ".concat(c.code,": "):"","%s failed").concat(0<o.length?" with args: ".concat(o.map((function(){return"%o"}))):""),t].concat(Z(o.map(We)))),c.originalError&&this.logError(c.originalError),this.errorTracker(c),c}var s=Date.now();return ma(N.mark((function n(){var r,i;return N.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a;case 3:r=n.sent,n.next=12;break;case 6:return n.prev=6,n.t0=n.catch(0),e.logError.apply(e,["".concat(void 0!==n.t0.code?"Error Code ".concat(n.t0.code,": "):"","%s failed").concat(0<o.length?" with args: ".concat(o.map((function(){return"%o"}))):""),t].concat(Z(o.map(We)))),n.t0.originalError&&e.logError(n.t0.originalError),e.errorTracker(n.t0),n.abrupt("return");case 12:r!==a?void 0===r?e.resultTracker("%s promise resolves after %dms",t,Date.now()-s):e.resultTracker("%s promise resolves after %dms, result is %o",t,Date.now()-s,We(r)):"Object"!==$c(r)||De(r)?e.resultTracker("%s result is %o",t,We(r)):e.resultTracker("%s result is %s",t,r.name||(null===(i=r.constructor)||void 0===i?void 0:i.name));case 13:case"end":return n.stop()}}),n,null,[[0,6]])})))(),a},n}function Mc(e,t,n){void 0===n&&(n=Object.getOwnPropertyDescriptor(e,t));var r=n.value;return n.value=function(){for(var e=this,n=arguments.length,o=Array(n),i=0;i<n;i++)o[i]=arguments[i];this.invokeTracker.apply(this,["%s: ".concat(0<o.length?"%s with args: ".concat(o.map((function(){return"%o"}))):"%s"),this.name,t].concat(o));try{var a=r.apply(this,o)}catch(c){throw this.logError.apply(this,["".concat(void 0!==c.code?"Error Code ".concat(c.code,": "):"","%s failed").concat(0<o.length?" with args: ".concat(o.map((function(){return"%o"}))):""),t].concat(o)),c.originalError&&this.logError(c.originalError),this.errorTracker(c),c}var s=Date.now();return ma(N.mark((function n(){var r,i;return N.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a;case 3:r=n.sent,n.next=12;break;case 6:return n.prev=6,n.t0=n.catch(0),e.logError.apply(e,["".concat(void 0!==n.t0.code?"Error Code ".concat(n.t0.code,": "):"","%s failed").concat(0<o.length?" with args: ".concat(o.map((function(){return"%o"}))):""),t].concat(o)),n.t0.originalError&&e.logError(n.t0.originalError),e.errorTracker(n.t0),n.abrupt("return");case 12:r!==a?void 0===r?e.resultTracker("%s promise resolves after %dms",t,Date.now()-s):e.resultTracker("%s promise resolves after %dms, result is %o",t,Date.now()-s,r):"Object"!==$c(r)||De(r)?e.resultTracker("%s result is %o",t,r):e.resultTracker("%s result is %s",t,r.name||(null===(i=r.constructor)||void 0===i?void 0:i.name));case 13:case"end":return n.stop()}}),n,null,[[0,6]])})))(),a},n}function bb(e,t,n){return tj.apply(this,arguments)}function tj(){return(tj=ma(N.mark((function e(t,n,r){var o,i,a,s=arguments;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=3<s.length&&void 0!==s[3]&&s[3],i=Iv[t].encode(n).finish(),a=function(){var e=ma(N.mark((function e(n){var s,c,l,u=arguments;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(3<(c=1<u.length&&void 0!==u[1]?u[1]:0))){e.next=3;break}return e.abrupt("return");case 3:if(l=Xe(l=r?"https://".concat(null!==(s=null==fa?void 0:fa.PROXY_NGINX[0])&&void 0!==s?s:"webrtc-cloud-proxy.sd-rtn.com","/rs/?h=").concat(n,"&p=443&d=events/proto-raw"):"https://".concat(n,"/events/proto-raw"),"sentTs",Math.ceil(Date.now()/1e3).toString()),l=Xe(l,"id",Jv[t].toString()),!o){e.next=9;break}return e.next=9,Kv(1e4);case 9:return e.next=11,lh(l,{body:i,timeout:2e4,headers:{"Content-Type":"application/octet-stream"}}).catch((function(e){return a(n,c+1)}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.prev=3,e.next=6,a((null==fa?void 0:fa.EVENT_REPORT_DOMAIN[0])||$f(null)||"webcollector-rtm.agora.io");case 6:e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(3),e.next=12,a(fa&&On(1<(null==fa?void 0:fa.EVENT_REPORT_DOMAIN.length)?null==fa?void 0:fa.EVENT_REPORT_DOMAIN.slice(1):null==fa?void 0:fa.EVENT_REPORT_DOMAIN)||"rtm.statscollector.sd-rtn.com");case 12:case"end":return e.stop()}}),e,null,[[3,8]])})))).apply(this,arguments)}function Xa(e){return void 0===e?P.fromNumber(0):P.fromNumber(Date.now()-e)}function Ta(e){return"string"==typeof e&&/^[\s\w!#$%&()+,.:;<=>?@[\]^{|}~-]{1,64}$/.test(e)&&"null"!==e}function Pn(e){try{var t=e.split(".").map((function(e){return Number(e)}))}catch(e22){return!1}if(4!==t.length||0===t[0])return!1;for(e=0;e<t.length;e++){var n=t[e];if(!Number.isInteger(n)||0>n||255<n)return!1}return!0}function Qn(e,t){if(!Array.isArray(t)||0===t.length||32<t.length||t.some((function(e){return 0===e.length||32<e.length})))throw new ca("arguments is not valid",gb);if(!Ta(e))throw new ca("ID is invalid",gb)}function ag(e){var t=e.attributes,n=e.attrSizeMap,r=e.maxAttrsCount,o=e.maxAttrValueSize;if(e=e.maxTotalSize,!De(t))throw new ca("attributes must be an object",gb);if(Object.keys(t).length>r)throw new ic("Exceed the limit of ".concat(r," attributes"),Ye);if(0===Object.keys(t).length)throw new ca("The attributes is an empty object",gb);var i=0,a=0;for(t=Object.entries(t);a<t.length;a++){var s=$a(t[a],2),c=s[1];s=new Blob([s[0]]).size;var l=new Blob([c]).size;if(0===s||32<s)throw new ca("Invalid attribute key",gb);if(l>o)throw new ic("Invalid attribute value, over the limit of ".concat(o," bytes"),Ye);if("string"!=typeof c||0===c.length)throw new ca("Invalid attribute value",gb);i+=s,i+=l}if(i>e)throw new ic("The attributes size overflow",Ye);if(void 0!==n){if(Object.keys(n).length>r)throw new ic("Exceed the limit of ".concat(r," attributes"),Ye);for(i=r=0,n=Object.entries(n);i<n.length;i++){if(a=(t=$a(n[i],2))[1],0===(t=new Blob([t[0]]).size))throw new ca("Invalid attribute key",gb);if(a>o)throw new ic("Invalid attribute value, over the limit of ".concat(o," bytes"),Ye);r+=t,r+=a}if(r>e)throw new ic("The attributes size overflow",Ye)}}function mh(e,t){return Math.floor(Math.random()*(Math.floor(t)-Math.ceil(e)+1))+e}function nh(){var e=mh(0,4294967295),t=mh(1,4294967295);return new P(e,t,!0)}function sb(e){return e.toString().padEnd(32,"0")}function Rn(e,t){return new TypeError("Unexpected ".concat(e,": ").concat(t))}function Sn(e,t){return e=e.split(".").map((function(e){return Number(e)})),t=t.split(".").map((function(e){return Number(e)})),Math.sqrt(1e3*Math.pow(e[0]-t[0],2)+100*Math.pow(e[1]-t[1],2)+10*Math.pow(e[2]-t[2],2)+1*Math.pow(e[3]-t[3],2))}function Tn(e){return e.lessThanOrEqual(Number.MAX_SAFE_INTEGER)?e.toNumber():e.toString()}function uj(e,t){t="".concat(e).concat(t||"");var n=Un.get(t)||1;return Un.set(t,n+1),"".concat(e).concat(n)}function Vn(e,t){var n="number"==typeof t?t:void 0!==t&&"string"!=typeof t?t.code:void 0;return t="number"!=typeof t&&"string"!=typeof t&&void 0!==t&&void 0!==t.serverCode?t.serverCode:void 0,n="".concat(void 0!==n?" Error Code ".concat(n):"").concat(void 0!==t?", server Code ".concat(t):""),e="string"==typeof e&&e?oh(e):Array.isArray(e)&&"string"==typeof e[0]&&e[0]?oh(Wn.apply(void 0,[e[0]].concat(Z(e.slice(1))))):"","".concat(""===n?"":"".concat(n," - ")).concat(e)}function Kv(e,t){return vj.apply(this,arguments)}function vj(){return(vj=ma(N.mark((function e(t,n){return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n||!n.aborted){e.next=2;break}return e.abrupt("return");case 2:return e.abrupt("return",new Promise((function(e){setTimeout(e,t),null==n||n.addEventListener("abort",e)})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lh(e,t,n){return wj.apply(this,arguments)}function wj(){return(wj=ma(N.mark((function e(t,n,r){var o,i,a,s,c,l,u,d,A,p,h,f,g,m,_,E,v,y,b,C,S,w,T,I,R,O;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.body,i=n.headers,a=void 0===i?{}:i,s=n.timeout,c=void 0===s?1e4:s,l=n.signal,u=n.withCredentials,d=void 0!==u&&u,A=(r||{}).useBinaryResponse,p=void 0!==A&&A,(h=new XMLHttpRequest).open("POST",t,!0),h.responseType=p?"arraybuffer":"text",h.withCredentials=d,h.timeout=c,f=o instanceof FormData,g=o instanceof Uint8Array,!(1<(m=Object.keys(a).filter((function(e){return"content-type"===e.toLowerCase()}))).length)){e.next=14;break}throw new RangeError("multiple content-type");case 14:0===m.length&&(g?a["Content-Type"]="application/octet-stream":f||(a["Content-Type"]="application/json"));case 15:if("setRequestHeader"in h){e.next=46;break}return h.abort(),e.next=19,fetch(t,{body:f||g?o:JSON.stringify(o),cache:"no-cache",credentials:d?"include":"same-origin",headers:a,method:"POST",mode:"cors",referrer:"no-referrer",signal:l});case 19:if(_=e.sent,!(200<=(E=_.status)&&300>E||304===E)){e.next=31;break}if(!p){e.next=27;break}return e.next=25,_.arrayBuffer();case 25:return v=e.sent,e.abrupt("return",{status:E,responseData:v});case 27:return e.next=29,_.text();case 29:return y=e.sent,e.abrupt("return",{status:E,responseText:y});case 31:return b=new Ja(["Post XHR failure, status %d",E]),e.prev=32,e.next=35,_.text();case 35:throw C=e.sent,b.statusCode=E,b.message=C||"Request failed, status ".concat(E),b;case 41:throw e.prev=41,e.t0=e.catch(32),b.statusCode=E,b.message="Request failed, status ".concat(E),b;case 46:if(0!==Object.keys(a).length)for(S=0,w=Object.entries(a);S<w.length;S++)T=$a(w[S],2),I=T[0],R=T[1],h.setRequestHeader(I,R);return void 0!==l&&(O=function e(){h.abort(),l.removeEventListener("abort",e)},l.addEventListener("abort",O)),f||g?h.send(o):h.send(JSON.stringify(o)),e.abrupt("return",new Promise((function(e,t){h.onload=function(){var n=h.status;if(200<=n&&300>n||304===n)e(p?{status:n,responseData:h.response}:{status:n,responseText:h.responseText});else{var r=new Ja(["Post XHR failure, status %d",n]);r.statusCode=n,r.message=h.response||"Request failed, status ".concat(h.status),t(r)}},h.ontimeout=function(e){t(new Ub(["XHR request timed out after %d ms",c],{originalError:e}))},h.onerror=function(){var e=new Ja(["Post XHR failure, status %d",h.status]);e.statusCode=h.status,e.message=h.response||"Request failed, status ".concat(h.status),t(e)},h.onabort=function(){try{t(new DOMException("The request aborted.","AbortError"))}catch(n){var e=Error("The request aborted.");e.name="AbortError",t(e)}}})));case 50:case"end":return e.stop()}}),e,null,[[32,41]])})))).apply(this,arguments)}function Xn(e,t){if(!De(e))throw new ca("message object is not a plain object",t);if(void 0===e.messageType)if(e.rawMessage instanceof Uint8Array){if(e.messageType="RAW",void 0!==e.text)throw new ca("Raw messages cannot have text property. Use description instead",t)}else{if("string"!=typeof e.text)throw new ca("messageType is undefined",t);if(e.messageType="TEXT",void 0!==e.rawMessage)throw new ca("Text messages cannot have rawMessage property",t)}}function ph(e){return xj.apply(this,arguments)}function xj(){return(xj=ma(N.mark((function e(t){var n,r,o,i,a,s,c,l,u,d,A,p,h,f,g,m,_,E,v,y,b;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.message,r=t.peerId,o=t.toPeer,i=t.session,a=t.errorCodes,s=t.diff,c=t.logger,void 0!==i){e.next=3;break}throw new da("The client is not logged in. Cannot do the operation",a.NOT_LOGGED_IN);case 3:if(l=!1,u=o?"TEXT"===n.messageType?Ka.P2pSMsgNoOfflineFlag:Ka.P2pRMsgNoOfflineFlag:"TEXT"===n.messageType?Ka.ChannelSMsg:Ka.ChannelRMsg,"TEXT"!==n.messageType||!n.text.startsWith("AgoraRTMLegacyEndcallCompatibleMessagePrefix")||!o){e.next=14;break}if(d=n.text.split("_"),A=$a(d,3),p=A[0],h=A[1],void 0!==A[2]&&Ta(h)&&"AgoraRTMLegacyEndcallCompatibleMessagePrefix"===p){e.next=13;break}throw i.emit("messageCount",{messageCategory:u,type:"common",key:"sentcount"}),i.emit("messageCount",{messageCategory:u,type:"common",key:"invalidmessagecount"}),new ca("Message is not valid",bg);case 13:l=!0;case 14:if(f=Date.now(),g=i.messageSentTimes.length-1,!((m=i.messageSentTimes[g])&&m+3e3<f)){e.next=21;break}i.messageSentTimes=[f],e.next=34;break;case 21:_=g;case 22:if(!(0<=_)){e.next=33;break}if(!(i.messageSentTimes[_]+3e3<f)){e.next=26;break}return i.messageSentTimes=i.messageSentTimes.slice(_+1,g+1),e.abrupt("break",33);case 26:if(!(180<=g-_+1)){e.next=30;break}throw i.emit("messageCount",{messageCategory:u,type:"common",key:"sentcount"}),i.emit("messageCount",{messageCategory:u,type:"common",key:"toooftencount"}),new ic("Message sent failed, exceeded the 180 message in 3 seconds",a.TOO_OFTEN);case 30:_--,e.next=22;break;case 33:i.messageSentTimes.push(f);case 34:e.t0=n.messageType,e.next="TEXT"===e.t0?37:"RAW"===e.t0?42:44;break;case 37:if(!l){e.next=41;break}return E=n.text.split("_"),v=$a(E,3),y=v[1],b=v[2],c.info("[rtm-API] EndCall message send api is called"),e.abrupt("return",i.sendInvitationMessage({peerId:r,type:"CallCancel",extra:b,channelId:y,callId:"0"}));case 41:return e.abrupt("return",i.sendTextMessage(n.text,r,o,1e4-s));case 42:return void 0===n.description&&(n.description=""),e.abrupt("return",i.sendRawMessage(n.rawMessage,n.description,r,o,1e4-s));case 44:throw i.emit("messageCount",{messageCategory:u,type:"common",key:"sentcount"}),i.emit("messageCount",{messageCategory:u,type:"common",key:"invalidmessagecount"}),new ca("Invalid message type",bg);case 47:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lv(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=e.replace(/(https?:\/\/)?(www.)?/i,"");return t||(n=n.split(".").slice(e.length-2).join(".")),-1!==n.indexOf("/")?n.split("/")[0]:n}function La(e){if("string"!=typeof e)return"[Sensitive Info]";var t=Math.floor(.7*e.length),n=e.length;return Yn(e,t,n,"*".repeat(n-t))}function Zn(e,t,n){function r(o){if(void 0===e)return e;if(Mm(o))return o;if(Array.isArray(o))return o.map(r);var i={},a=0;for(o=qh(o);a<o.length;a++){var s=$a(o[a],2),c=s[0];if("string"==typeof(s=s[1])&&n.includes(c)){i[c]="string"==typeof s?La(s):"[Sensitive Info]";break}t.includes(c)?i[c]="[Hidden Info]":i[c]=null==s?s:n.includes(c)?"[Sensitive Info]":r(s)}return i}return Array.isArray(e)?e.map(r):r(e)}function $n(e){return Object.getOwnPropertyNames(e).forEach((function(t){"object"==qa(t=e[t])&&null!==t&&$n(t)})),Object.freeze(e)}function cg(e){return new TextDecoder("utf-8").decode(e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength))}function rh(e){return(new TextEncoder).encode(e).length}function ao(){for(var e=0,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];for(t=0;t<n.length;t++)e+=n[t].length;for(e=new Uint8Array(e),r=t=0;r<n.length;r++){var o=n[r];e.set(o,t),t+=o.length}return e}function Xe(e,t,n){var r=e.match(/([^?#]+)(\?[^#]*)?(#.*)?/);if(e=null==r?void 0:r[1],r=null==r?void 0:r[2]){var o;for(r=r.substr(1).split("&"),o=0;o<r.length;o++)if(r[o].split("=")[0]==t){r[o]=t+"="+encodeURIComponent(n);break}return o==r.length&&r.push(t+"="+encodeURIComponent(n)),e+"?"+r.join("&")}return e+"?"+t+"="+encodeURIComponent(n)}function Yn(e,t,n,r){return"string"!=typeof e?"[Sensitive Info]":e.substring(0,t)+r+e.substring(n)}function $f(e){return"string"==typeof e}function Mv(e,t){var n="".concat(e,"Uri");if("number"!=typeof(n=yj[n])||0===n)throw new TypeError("Got Unknown URI Name");return t=new(e=bo[e])(t),t=e.encode(t).finish(),new Nv({uri:n,data:t})}function co(e,t){return"".concat(e.split(".").join("-"),".edge.").concat(t?"sd-rtn.com":"agora.io")}function sh(e,t){return P.fromValue(e).eq(t)}function th(e,t){var n=void 0===t?e.val:t,r=e.isBoolean;t=e.isNumber;var o=e.oneof,i=e.len;if(2!==[r,t,o].filter((function(e){return!e})).length)throw new TypeError("invalid field type");if(void 0!==n&&(e=!1,void 0!==o&&(o=zj(o),Ov(o,sh).length===o.length&&void 0!==Pv(o,(function(e){return sh(n,e)}))&&(e=!0)),r=void 0!==r&&(0===n||1===n)&&1===i,t=void 0!==t&&n.toString(2).length<=i,!(e||r||t)))throw Error("invalid field value")}function eo(e){return e.reduce((function(e,t){return e.concat(t instanceof uh.UnsubscriptionError?t.errors:t)}),[])}function Qv(e,t){do{2147483647==dg?dg=0:dg++}while(Ze.hasOwnProperty(dg));var n=dg;return Ze[n]={callback:e,parameters:Array.prototype.slice.call(arguments,2)},Aj.postMessage({name:"setInterval",fakeId:n,time:t}),n}function fo(e){return function(){var t=e();if(!t)throw new da("Client is not logged in. Cannot do the operation");return t}}var Ya="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==commonjsGlobal?commonjsGlobal:"undefined"!=typeof self?self:{},vh=function(e){return e&&e.Math==Math&&e},R=vh("object"==typeof globalThis&&globalThis)||vh("object"==typeof window&&window)||vh("object"==typeof self&&self)||vh("object"==typeof Ya&&Ya)||function(){return this}()||Function("return this")(),la=function(e){try{return!!e()}catch(e22){return!0}},wa=!la((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),go={}.propertyIsEnumerable,ho=Object.getOwnPropertyDescriptor,eg=ho&&!go.call({1:2},1)?function(e){return!!(e=ho(this,e))&&e.enumerable}:go,Nc=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},Rv={}.toString,xc=function(e){return Rv.call(e).slice(8,-1)},Sv="".split,fg=la((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==xc(e)?Sv.call(e,""):Object(e)}:Object,Eb=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},Mb=function(e){return fg(Eb(e))},xa=function(e){return"object"==typeof e?null!==e:"function"==typeof e},Oc=function(e,t){if(!xa(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!xa(r=n.call(e))||"function"==typeof(n=e.valueOf)&&!xa(r=n.call(e))||!t&&"function"==typeof(n=e.toString)&&!xa(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")},pb=function(e){return Object(Eb(e))},Tv={}.hasOwnProperty,ka=function(e,t){return Tv.call(pb(e),t)},$e=R.document,wh=xa($e)&&xa($e.createElement),io=!wa&&!la((function(){return 7!=Object.defineProperty(wh?$e.createElement("div"):{},"a",{get:function(){return 7}}).a})),jo=Object.getOwnPropertyDescriptor,dc={f:wa?jo:function(e,t){if(e=Mb(e),t=Oc(t,!0),io)try{return jo(e,t)}catch(e22){}if(ka(e,t))return Nc(!eg.call(e,t),e[t])}},Ia=function(e){if(!xa(e))throw TypeError(String(e)+" is not an object");return e},ko=Object.defineProperty,qb={f:wa?ko:function(e,t,n){if(Ia(e),t=Oc(t,!0),Ia(n),io)try{return ko(e,t,n)}catch(e22){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},kb=wa?function(e,t,n){return qb.f(e,t,Nc(1,n))}:function(e,t,n){return e[t]=n,e},Bj=function(e,t){try{kb(R,e,t)}catch(n){R[e]=t}return t},zd=R["__core-js_shared__"]||Bj("__core-js_shared__",{}),Uv=Function.toString;"function"!=typeof zd.inspectSource&&(zd.inspectSource=function(e){return Uv.call(e)});var Cj=zd.inspectSource,lo=R.WeakMap,Vv="function"==typeof lo&&/native code/.test(Cj(lo)),Ad=xb((function(e){(e.exports=function(e,t){return zd[e]||(zd[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.12.1",mode:"global",copyright:" 2021 Denis Pushkarev (zloirock.ru)"})})),Wv=0,Xv=Math.random(),af=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++Wv+Xv).toString(36)},mo=Ad("keys"),xh=function(e){return mo[e]||(mo[e]=af(e))},bf={},Yv=R.WeakMap;if(Vv||zd.state)var ce=zd.state||(zd.state=new Yv),Zv=ce.get,no=ce.has,$v=ce.set,Dj=function(e,t){if(no.call(ce,e))throw new TypeError("Object already initialized");return t.facade=e,$v.call(ce,e,t),t},yh=function(e){return Zv.call(ce,e)||{}},Ej=function(e){return no.call(ce,e)};else{var cf=xh("state");bf[cf]=!0,Dj=function(e,t){if(ka(e,cf))throw new TypeError("Object already initialized");return t.facade=e,kb(e,cf,t),t},yh=function(e){return ka(e,cf)?e[cf]:{}},Ej=function(e){return ka(e,cf)}}var cb={set:Dj,get:yh,has:Ej,enforce:function(e){return Ej(e)?yh(e):Dj(e,{})},getterFor:function(e){return function(t){var n;if(!xa(t)||(n=yh(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}},Za=xb((function(e){var t=cb.get,n=cb.enforce,r=String(String).split("String");(e.exports=function(e,t,o,i){var a=!!i&&!!i.unsafe,s=!!i&&!!i.enumerable;if(i=!!i&&!!i.noTargetGet,"function"==typeof o){"string"!=typeof t||ka(o,"name")||kb(o,"name",t);var c=n(o);c.source||(c.source=r.join("string"==typeof t?t:""))}e===R?s?e[t]=o:Bj(t,o):(a?!i&&e[t]&&(s=!0):delete e[t],s?e[t]=o:kb(e,t,o))})(Function.prototype,"toString",(function(){return"function"==typeof this&&t(this).source||Cj(this)}))})),oo=function(e){return"function"==typeof e?e:void 0},Pc=function(e,t){return 2>arguments.length?oo(R[e])||oo(R[e]):R[e]&&R[e][t]||R[e]&&R[e][t]},aw=Math.ceil,bw=Math.floor,yc=function(e){return isNaN(e=+e)?0:(0<e?bw:aw)(e)},cw=Math.min,Ma=function(e){return 0<e?cw(yc(e),9007199254740991):0},dw=Math.max,ew=Math.min,Vb=function(e,t){return 0>(e=yc(e))?dw(e+t,0):ew(e,t)},po=function(e){return function(t,n,r){t=Mb(t);var o=Ma(t.length);if(r=Vb(r,o),e&&n!=n){for(;o>r;)if((n=t[r++])!=n)return!0}else for(;o>r;r++)if((e||r in t)&&t[r]===n)return e||r||0;return!e&&-1}},qo=po(!0),Fj=po(!1),ro=function(e,t){e=Mb(e);var n,r=0,o=[];for(n in e)!ka(bf,n)&&ka(e,n)&&o.push(n);for(;t.length>r;)ka(e,n=t[r++])&&(~Fj(o,n)||o.push(n));return o},zh="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),fw=zh.concat("length","prototype"),de={f:Object.getOwnPropertyNames||function(e){return ro(e,fw)}},gg={f:Object.getOwnPropertySymbols},so=Pc("Reflect","ownKeys")||function(e){var t=de.f(Ia(e)),n=gg.f;return n?t.concat(n(e)):t},to=function(e,t){for(var n=so(t),r=qb.f,o=dc.f,i=0;i<n.length;i++){var a=n[i];ka(e,a)||r(e,a,o(t,a))}},gw=/#|\.prototype\./,Qc=function(e,t){return(e=hw[iw(e)])==jw||e!=kw&&("function"==typeof t?la(t):!!t)},iw=Qc.normalize=function(e){return String(e).replace(gw,".").toLowerCase()},hw=Qc.data={},kw=Qc.NATIVE="N",jw=Qc.POLYFILL="P",lw=dc.f,ea=function(e,t){var n,r,o,i=e.target,a=e.global,s=e.stat;if(r=a?R:s?R[i]||Bj(i,{}):(R[i]||{}).prototype)for(o in t){var c=t[o],l=e.noTargetGet?(n=lw(r,o))&&n.value:r[o];if(!(n=Qc(a?o:i+(s?".":"#")+o,e.forced))&&void 0!==l){if(typeof c==typeof l)continue;to(c,l)}(e.sham||l&&l.sham)&&kb(c,"sham",!0);try{Za(r,o,c,e)}catch(e22){}}},Gj=function(){var e=Ia(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t},Rc=la((function(){var e=/a/y;return e.lastIndex=2,null!=e.exec("abcd")})),mw=la((function(){var e=/^r/gy;return e.lastIndex=2,null!=e.exec("str")})),Ah=RegExp.prototype.exec,nw=Ad("native-string-replace",String.prototype.replace),uo=Ah,Hj=(c=/a/,b=/b*/g,Ah.call(c,"a"),Ah.call(b,"a"),0!==c.lastIndex||0!==b.lastIndex),vo=Rc||mw,Ij=void 0!==/()??/.exec("")[1],c,b;(Hj||Ij||vo)&&(uo=function(e){var t,n=vo&&this.sticky,r=Gj.call(this),o=this.source,i=0,a=e;if(n){-1===(r=r.replace("y","")).indexOf("g")&&(r+="g"),a=String(e).slice(this.lastIndex),0<this.lastIndex&&(!this.multiline||this.multiline&&"\n"!==e[this.lastIndex-1])&&(o="(?: "+o+")",a=" "+a,i++);var s=new RegExp("^(?:"+o+")",r)}if(Ij&&(s=new RegExp("^"+o+"$(?!\\s)",r)),Hj)var c=this.lastIndex;var l=Ah.call(n?s:this,a);return n?l?(l.input=l.input.slice(i),l[0]=l[0].slice(i),l.index=this.lastIndex,this.lastIndex+=l[0].length):this.lastIndex=0:Hj&&l&&(this.lastIndex=this.global?l.index+l[0].length:c),Ij&&l&&1<l.length&&nw.call(l[0],s,(function(){for(t=1;t<arguments.length-2;t++)void 0===arguments[t]&&(l[t]=void 0)})),l});var hg=uo;ea({target:"RegExp",proto:!0,forced:/./.exec!==hg},{exec:hg});var df=Pc("navigator","userAgent")||"",wo=R.process,xo=wo&&wo.versions,yo=xo&&xo.v8;if(yo)var Bd=yo.split("."),Jj=4>Bd[0]?1:Bd[0]+Bd[1];else df&&(Bd=df.match(/Edge\/(\d+)/),(!Bd||74<=Bd[1])&&(Bd=df.match(/Chrome\/(\d+)/))&&(Jj=Bd[1]));var Cd=Jj&&+Jj,Sc=!!Object.getOwnPropertySymbols&&!la((function(){return!String(Symbol())||!Symbol.sham&&Cd&&41>Cd})),zo=Sc&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,ig=Ad("wks"),jg=R.Symbol,ow=zo?jg:jg&&jg.withoutSetter||af,Fa=function(e){return ka(ig,e)&&(Sc||"string"==typeof ig[e])||(Sc&&ka(jg,e)?ig[e]=jg[e]:ig[e]=ow("Symbol."+e)),ig[e]},pw=Fa("species"),Kj=RegExp.prototype,qw=!la((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),Ao="$0"==="a".replace(/./,"$0"),Bo=Fa("replace"),Co=!!/./[Bo]&&""===/./[Bo]("a","$0"),rw=!la((function(){var e=/(?:)/,t=e.exec;return e.exec=function(){return t.apply(this,arguments)},2!==(e="ab".split(e)).length||"a"!==e[0]||"b"!==e[1]})),Bh=function(e,t,n,r){var o=Fa(e),i=!la((function(){var t={};return t[o]=function(){return 7},7!=""[e](t)})),a=i&&!la((function(){var t=!1,n=/a/;return"split"===e&&((n={constructor:{}}).constructor[pw]=function(){return n},n.flags="",n[o]=/./[o]),n.exec=function(){return t=!0,null},n[o](""),!t}));if(!i||!a||"replace"===e&&(!qw||!Ao||Co)||"split"===e&&!rw){var s=/./[o],c=(n=n(o,""[e],(function(e,t,n,r,o){var a=t.exec;return a===hg||a===Kj.exec?i&&!o?{done:!0,value:s.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:Ao,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:Co}))[1];Za(String.prototype,e,n[0]),Za(Kj,o,2==t?function(e,t){return c.call(e,this,t)}:function(e){return c.call(e,this)})}r&&kb(Kj[o],"sham",!0)},sw=Fa("match"),Lj=function(e){var t;return xa(e)&&(void 0!==(t=e[sw])?!!t:"RegExp"==xc(e))},Wb=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e},tw=Fa("species"),ee=function(e,t){var n;return void 0===(e=Ia(e).constructor)||null==(n=Ia(e)[tw])?t:Wb(n)},Do=function(e){return function(t,n){t=String(Eb(t)),n=yc(n);var r,o=t.length;if(0>n||n>=o)return e?"":void 0;var i=t.charCodeAt(n);return 55296>i||56319<i||n+1===o||56320>(r=t.charCodeAt(n+1))||57343<r?e?t.charAt(n):i:e?t.slice(n,n+2):r-56320+(i-55296<<10)+65536}},uw=Do(!1),Eo=Do(!0),Mj=function(e,t,n){return t+(n?Eo(e,t).length:1)},ef=function(e,t){var n=e.exec;if("function"==typeof n){if("object"!=typeof(e=n.call(e,t)))throw TypeError("RegExp exec method returned something other than an Object or null");return e}if("RegExp"!==xc(e))throw TypeError("RegExp#exec called on incompatible receiver");return hg.call(e,t)},vw=[].push,ww=Math.min;Bh("split",2,(function(e,t,n){var r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||1<".".split(/()()/).length||"".split(/.?/).length?function(e,n){var r=String(Eb(this));if(0==(n=void 0===n?4294967295:n>>>0))return[];if(void 0===e)return[r];if(!Lj(e))return t.call(r,e,n);var o,i,a,s=[],c=0;for(e=new RegExp(e.source,(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":"")+"g");(o=hg.call(e,r))&&!((i=e.lastIndex)>c&&(s.push(r.slice(c,o.index)),1<o.length&&o.index<r.length&&vw.apply(s,o.slice(1)),a=o[0].length,c=i,s.length>=n));)e.lastIndex===o.index&&e.lastIndex++;return c===r.length?(a||!e.test(""))&&s.push(""):s.push(r.slice(c)),s.length>n?s.slice(0,n):s}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t;return[function(t,n){var o=Eb(this),i=null==t?void 0:t[e];return void 0!==i?i.call(t,o,n):r.call(String(o),t,n)},function(e,o){var i=n(r,e,this,o,r!==t);if(i.done)return i.value;var a=Ia(e);e=String(this);var s=ee(a,RegExp);if(i=a.unicode,a=new s(Rc?"^(?:"+a.source+")":a,(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(Rc?"g":"y")),0==(o=void 0===o?4294967295:o>>>0))return[];if(0===e.length)return null===ef(a,e)?[e]:[];var c=0,l=0;for(s=[];l<e.length;){a.lastIndex=Rc?0:l;var u,d=ef(a,Rc?e.slice(l):e);if(null===d||(u=ww(Ma(a.lastIndex+(Rc?l:0)),e.length))===c)l=Mj(e,l,i);else{if(s.push(e.slice(c,l)),s.length===o)return s;for(c=1;c<=d.length-1;c++)if(s.push(d[c]),s.length===o)return s;l=c=u}}return s.push(e.slice(c)),s}]}),Rc);var xw=/^[\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff][\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]*/,yw=/[\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff][\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]*$/,Nj=function(e){return function(t){return t=String(Eb(t)),1&e&&(t=t.replace(xw,"")),2&e&&(t=t.replace(yw,"")),t}},Oj=Nj(3),Ch=R.parseInt,zw=/^[+-]?0[Xx]/,Fo=8!==Ch("\t\n\v\f\r \u2028\u2029\ufeff08")||22!==Ch("\t\n\v\f\r \u2028\u2029\ufeff0x16")?function(e,t){return e=Oj(String(e)),Ch(e,t>>>0||(zw.test(e)?16:10))}:Ch;ea({global:!0,forced:parseInt!=Fo},{parseInt:Fo});var Dd=function(e,t,n){if(Wb(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}},Ed=Array.isArray||function(e){return"Array"==xc(e)},Aw=Fa("species"),Dh=function(e,t){if(Ed(e)){var n=e.constructor;"function"!=typeof n||n!==Array&&!Ed(n.prototype)?xa(n)&&null===(n=n[Aw])&&(n=void 0):n=void 0}return new(void 0===n?Array:n)(0===t?0:t)},Go=[].push,Fd=function(e){var t=1==e,n=2==e,r=3==e,o=4==e,i=6==e,a=7==e,s=5==e||i;return function(c,l,u,d){var A=pb(c),p=fg(A);l=Dd(l,u,3),u=Ma(p.length);var h,f=0;for(d=d||Dh,c=t?d(c,u):n||a?d(c,0):void 0;u>f;f++)if((s||f in p)&&(h=l(d=p[f],f,A),e))if(t)c[f]=h;else if(h)switch(e){case 3:return!0;case 5:return d;case 6:return f;case 2:Go.call(c,d)}else switch(e){case 4:return!1;case 7:Go.call(c,d)}return i?-1:r||o?o:c}},fe=Fd(0),Ho=Fd(1),Io=Fd(2),Bw=Fd(3),Cw=Fd(4),Jo=Fd(5),Dw=Fd(6),Ew=Fa("species"),kg=function(e){return 51<=Cd||!la((function(){var t=[];return(t.constructor={})[Ew]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},Fw=kg("filter");ea({target:"Array",proto:!0,forced:!Fw},{filter:function(e){return Io(this,e,1<arguments.length?arguments[1]:void 0)}});var ed=Object.keys||function(e){return ro(e,zh)},Gw=la((function(){ed(1)}));ea({target:"Object",stat:!0,forced:Gw},{keys:function(e){return ed(pb(e))}});var ff=function(e,t){var n=[][e];return!!n&&la((function(){n.call(null,t||function(){throw 1},1)}))},Hw=[].join,Iw=fg!=Object,Jw=ff("join",",");ea({target:"Array",proto:!0,forced:Iw||!Jw},{join:function(e){return Hw.call(Mb(this),void 0===e?",":e)}});var Kw=kg("map");ea({target:"Array",proto:!0,forced:!Kw},{map:function(e){return Ho(this,e,1<arguments.length?arguments[1]:void 0)}});var Pj=function(e){var t=e.return;if(void 0!==t)return Ia(t.call(e)).value},gf={},Lw=Fa("iterator"),Mw=Array.prototype,Qj=function(e){return void 0!==e&&(gf.Array===e||Mw[Lw]===e)},hf=function(e,t,n){(t=Oc(t))in e?qb.f(e,t,Nc(0,n)):e[t]=n},Nw=Fa("toStringTag"),Ko={};Ko[Nw]="z";var Rj="[object z]"===String(Ko),Ow=Fa("toStringTag"),Pw="Arguments"==xc(function(){return arguments}()),jf=Rj?xc:function(e){var t;if(void 0===e)var n="Undefined";else{if(null===e)var r="Null";else{e:{var o=e=Object(e);try{r=o[Ow];break e}catch(e22){}r=void 0}r="string"==typeof(n=r)?n:Pw?xc(e):"Object"==(t=xc(e))&&"function"==typeof e.callee?"Arguments":t}n=r}return n},Qw=Fa("iterator"),lg=function(e){if(null!=e)return e[Qw]||e["@@iterator"]||gf[jf(e)]},ge=function(e){var t,n=pb(e),r="function"==typeof this?this:Array,o=arguments.length,i=1<o?arguments[1]:void 0,a=void 0!==i,s=lg(n),c=0;if(a&&(i=Dd(i,2<o?arguments[2]:void 0,2)),null==s||r==Array&&Qj(s)){var l=Ma(n.length);for(r=new r(l);l>c;c++)s=a?i(n[c],c):n[c],hf(r,c,s)}else for(o=(n=s.call(n)).next,r=new r;!(t=o.call(n)).done;c++){if(a){s=n;var u=i;t=[t.value,c];try{l=u(Ia(t)[0],t[1])}catch(e22){throw Pj(s),e22}}else l=t.value;hf(r,c,s=l)}return r.length=c,r},Lo=Fa("iterator"),Mo=!1;try{var Rw=0,No={next:function(){return{done:!!Rw++}},return:function(){Mo=!0}};No[Lo]=function(){return this},Array.from(No,(function(){throw 2}))}catch(c2){}var Eh=function(e,t){if(!t&&!Mo)return!1;var n=!1;try{(t={})[Lo]=function(){return{next:function(){return{done:n=!0}}}},e(t)}catch(e22){}return n},Sw=!Eh((function(e){Array.from(e)}));ea({target:"Array",stat:!0,forced:Sw},{from:ge});var Oo=!la((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),Po=xh("IE_PROTO"),Tw=Object.prototype,uc=Oo?Object.getPrototypeOf:function(e){return e=pb(e),ka(e,Po)?e[Po]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?Tw:null},Sj=Fa("iterator"),Qo=!1,Uw=function(){return this},he;if([].keys){var Ro=[].keys();if("next"in Ro){var So=uc(uc(Ro));So!==Object.prototype&&(he=So)}else Qo=!0}(null==he||la((function(){var e={};return he[Sj].call(e)!==e})))&&(he={}),ka(he,Sj)||kb(he,Sj,Uw);var Fh=he,Gh=Qo,To=wa?Object.defineProperties:function(e,t){Ia(e);for(var n,r=ed(t),o=r.length,i=0;o>i;)qb.f(e,n=r[i++],t[n]);return e},Tj=Pc("document","documentElement"),Uo=xh("IE_PROTO"),Uj=function(){},Vj,Hh=function(){try{Vj=document.domain&&new ActiveXObject("htmlfile")}catch(e22){}if(Vj){var e=Vj;e.write("<script><\/script>"),e.close(),e=e.parentWindow.Object}else(e=wh?$e.createElement("iframe"):{}).style.display="none",Tj.appendChild(e),e.src="javascript:",(e=e.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),e=e.F;for(Hh=e,e=zh.length;e--;)delete Hh.prototype[zh[e]];return Hh()};bf[Uo]=!0;var jc=Object.create||function(e,t){if(null!==e){Uj.prototype=Ia(e);var n=new Uj;Uj.prototype=null,n[Uo]=e}else n=Hh();return void 0===t?n:To(n,t)},Vw=qb.f,Vo=Fa("toStringTag"),zc=function(e,t,n){e&&!ka(e=n?e:e.prototype,Vo)&&Vw(e,Vo,{configurable:!0,value:t})},Ww=function(){return this},Wo=function(e,t,n){return t+=" Iterator",e.prototype=jc(Fh,{next:Nc(1,n)}),zc(e,t,!1),gf[t]=Ww,e},tb=Object.setPrototypeOf||("__proto__"in{}?function(){var e=!1,t={};try{var n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set;n.call(t,[]),e=t instanceof Array}catch(e22){}return function(t,r){if(Ia(t),!xa(r)&&null!==r)throw TypeError("Can't set "+String(r)+" as a prototype");return e?n.call(t,r):t.__proto__=r,t}}():void 0),mg=Fa("iterator"),Xw=function(){return this},Wj=function(e,t,n,r,o,i,a){Wo(n,t,r),r=function(e){if(e===o&&A)return A;if(!Gh&&e in u)return u[e];switch(e){case"keys":case"values":case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}};var s,c=t+" Iterator",l=!1,u=e.prototype,d=u[mg]||u["@@iterator"]||o&&u[o],A=!Gh&&d||r(o),p="Array"==t&&u.entries||d;if(p&&(e=uc(p.call(new e)),Fh!==Object.prototype&&e.next&&(uc(e)!==Fh&&(tb?tb(e,Fh):"function"!=typeof e[mg]&&kb(e,mg,Xw)),zc(e,c,!0))),"values"==o&&d&&"values"!==d.name&&(l=!0,A=function(){return d.call(this)}),u[mg]!==A&&kb(u,mg,A),gf[t]=A,o){var h={values:r("values"),keys:i?A:r("keys"),entries:r("entries")};if(a)for(s in h)!Gh&&!l&&s in u||Za(u,s,h[s]);else ea({target:t,proto:!0,forced:Gh||l},h)}return h},Yw=cb.set,Zw=cb.getterFor("String Iterator");Wj(String,"String",(function(e){Yw(this,{type:"String Iterator",string:String(e),index:0})}),(function(){var e=Zw(this),t=e.string,n=e.index;return n>=t.length?{value:void 0,done:!0}:(t=Eo(t,n),e.index+=t.length,{value:t,done:!1})}));var Xj=Fa("unscopables"),Yj=Array.prototype;null==Yj[Xj]&&qb.f(Yj,Xj,{configurable:!0,value:jc(null)});var ng=function(e){Yj[Xj][e]=!0},Xo=!0;"find"in[]&&Array(1).find((function(){Xo=!1})),ea({target:"Array",proto:!0,forced:Xo},{find:function(e){return Jo(this,e,1<arguments.length?arguments[1]:void 0)}}),ng("find");var Yo=function(e){var t=String(Eb(this)),n="";if(0>(e=yc(e))||1/0==e)throw RangeError("Wrong number of repetitions");for(;0<e;(e>>>=1)&&(t+=t))1&e&&(n+=t);return n};ea({target:"String",proto:!0},{repeat:Yo});var Zo=[].indexOf,$o=!!Zo&&0>1/[1].indexOf(1,-0),$w=ff("indexOf");ea({target:"Array",proto:!0,forced:$o||!$w},{indexOf:function(e){return $o?Zo.apply(this,arguments)||0:Fj(this,e,1<arguments.length?arguments[1]:void 0)}});var Zt=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,$t=/CrOS/,au=/android|ipad|playbook|silk/i;Ce.isMobile=Ce,Ce.default=Ce,ea({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991}),ea({target:"Number",stat:!0},{isNaN:function(e){return e!=e}}),R.Number.isNaN;var ax=Rj?{}.toString:function(){return"[object "+jf(this)+"]"};Rj||Za(Object.prototype,"toString",ax,{unsafe:!0});var Ih=R.Promise,kf=function(e,t,n){for(var r in t)Za(e,r,t[r],n);return e},ap=Fa("species"),og=function(e){e=Pc(e);var t=qb.f;wa&&e&&!e[ap]&&t(e,ap,{configurable:!0,get:function(){return this}})},Ac=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e},pg=function(e,t){this.stopped=e,this.result=t},Jh=function(e,t,n){var r,o=!(!n||!n.AS_ENTRIES),i=!(!n||!n.IS_ITERATOR),a=!(!n||!n.INTERRUPTED),s=Dd(t,n&&n.that,1+o+a),c=function(e){return l&&Pj(l),new pg(!0,e)};if(t=function(e){return o?(Ia(e),a?s(e[0],e[1],c):s(e[0],e[1])):a?s(e,c):s(e)},i)var l=e;else{if("function"!=typeof(i=lg(e)))throw TypeError("Target is not iterable");if(Qj(i)){for(i=0,n=Ma(e.length);n>i;i++)if((r=t(e[i]))&&r instanceof pg)return r;return new pg(!1)}l=i.call(e)}for(e=l.next;!(i=e.call(l)).done;){try{r=t(i.value)}catch(e22){throw Pj(l),e22}if("object"==typeof r&&r&&r instanceof pg)return r}return new pg(!1)},bp=/(?:iphone|ipod|ipad).*applewebkit/i.test(df),fd="process"==xc(R.process),Kh=R.location,Zj=R.setImmediate,cp=R.clearImmediate,bx=R.process,dp=R.MessageChannel,ak=R.Dispatch,bk=0,qg={},ck=function(e){if(qg.hasOwnProperty(e)){var t=qg[e];delete qg[e],t()}},dk=function(e){return function(){ck(e)}},ep=function(e){ck(e.data)},fp=function(e){R.postMessage(e+"",Kh.protocol+"//"+Kh.host)};if(!Zj||!cp)if(Zj=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return qg[++bk]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},rg(bk),bk},cp=function(e){delete qg[e]},fd)var rg=function(e){bx.nextTick(dk(e))};else if(ak&&ak.now)rg=function(e){ak.now(dk(e))};else if(dp&&!bp){var gp=new dp,hp=gp.port2;gp.port1.onmessage=ep,rg=Dd(hp.postMessage,hp,1)}else R.addEventListener&&"function"==typeof postMessage&&!R.importScripts&&Kh&&"file:"!==Kh.protocol&&!la(fp)?(rg=fp,R.addEventListener("message",ep,!1)):rg="onreadystatechange"in(wh?$e.createElement("script"):{})?function(e){Tj.appendChild(wh?$e.createElement("script"):{}).onreadystatechange=function(){Tj.removeChild(this),ck(e)}}:function(e){setTimeout(dk(e),0)};var ek=Zj,cx=/web0s(?!.*chrome)/i.test(df),dx=dc.f,ip=R.MutationObserver||R.WebKitMutationObserver,jp=R.document,kp=R.process,Lh=R.Promise,lp=dx(R,"queueMicrotask"),mp=lp&&lp.value,ie,sg;if(!mp){var Nh=function(){var e;for(fd&&(e=kp.domain)&&e.exit();ie;){var t=ie.fn;ie=ie.next;try{t()}catch(e22){throw ie?Mh():sg=void 0,e22}}sg=void 0,e&&e.enter()};if(bp||fd||cx||!ip||!jp)if(Lh&&Lh.resolve){var fk=Lh.resolve(void 0);fk.constructor=Lh;var ex=fk.then,Mh=function(){ex.call(fk,Nh)}}else Mh=fd?function(){kp.nextTick(Nh)}:function(){ek.call(R,Nh)};else{var np=!0,op=jp.createTextNode("");new ip(Nh).observe(op,{characterData:!0}),Mh=function(){op.data=np=!np}}}var pp=mp||function(e){e={fn:e,next:void 0},sg&&(sg.next=e),ie||(ie=e,Mh()),sg=e},fx=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=Wb(t),this.reject=Wb(n)},gk={f:function(e){return new fx(e)}},gx=function(e,t){var n=R.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))},hk=function(e){try{return{error:!1,value:e()}}catch(e22){return{error:!0,value:e22}}},hx="object"==typeof window,ix=Fa("species"),qp=cb.get,jx=cb.set,kx=cb.getterFor("Promise"),je=Ih&&Ih.prototype,Xb=Ih,Oh=je,rp=R.TypeError,ik=R.document,jk=R.process,lf=gk.f,lx=lf,mx=!!(ik&&ik.createEvent&&R.dispatchEvent),sp="function"==typeof PromiseRejectionEvent,tp=!1,tg=Qc("Promise",(function(){var e=Cj(Xb)!==String(Xb);if(!e&&66===Cd)return!0;if(51<=Cd&&/native code/.test(Xb))return!1;var t=new Xb((function(e){e(1)})),n=function(e){e((function(){}),(function(){}))};return(t.constructor={})[ix]=n,!(tp=t.then((function(){}))instanceof n)||!e&&hx&&!sp})),nx=tg||!Eh((function(e){Xb.all(e).catch((function(){}))})),up=function(e){var t;return!(!xa(e)||"function"!=typeof(t=e.then))&&t},kk=function(e,t){if(!e.notified){e.notified=!0;var n=e.reactions;pp((function(){for(var r=e.value,o=1==e.state,i=0;n.length>i;){var a,s=n[i++],c=o?s.ok:s.fail,l=s.resolve,u=s.reject,d=s.domain;try{if(c){if(o||(2===e.rejection&&ox(e),e.rejection=1),!0===c)var A=r;else if(d&&d.enter(),A=c(r),d){d.exit();var p=!0}A===s.promise?u(rp("Promise-chain cycle")):(a=up(A))?a.call(A,l,u):l(A)}else u(r)}catch(e22){d&&!p&&d.exit(),u(e22)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&px(e)}))}},vp=function(e,t,n){var r;if(mx){var o=ik.createEvent("Event");o.promise=t,o.reason=n,o.initEvent(e,!1,!0),R.dispatchEvent(o)}else o={promise:t,reason:n};!sp&&(r=R["on"+e])?r(o):"unhandledrejection"===e&&gx("Unhandled promise rejection",n)},px=function(e){ek.call(R,(function(){var t=e.facade,n=e.value;if(1!==e.rejection&&!e.parent){var r=hk((function(){fd?jk.emit("unhandledRejection",n,t):vp("unhandledrejection",t,n)}));if(e.rejection=fd||1!==e.rejection&&!e.parent?2:1,r.error)throw r.value}}))},ox=function(e){ek.call(R,(function(){var t=e.facade;fd?jk.emit("rejectionHandled",t):vp("rejectionhandled",t,e.value)}))},mf=function(e,t,n){return function(r){e(t,r,n)}},nf=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,kk(e,!0))},lk=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw rp("Promise can't be resolved itself");var r=up(t);r?pp((function(){var n={done:!1};try{r.call(t,mf(lk,n,e),mf(nf,n,e))}catch(o){nf(n,o,e)}})):(e.value=t,e.state=1,kk(e,!1))}catch(o){nf({done:!1},o,e)}}};if(tg){Xb=function(e){Ac(this,Xb,"Promise"),Wb(e),mk.call(this);var t=qp(this);try{e(mf(lk,t),mf(nf,t))}catch(e22){nf(t,e22)}},Oh=Xb.prototype;var mk=function(e){jx(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})};mk.prototype=kf(Oh,{then:function(e,t){var n=kx(this),r=lf(ee(this,Xb));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=fd?jk.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&kk(n,!1),r.promise},catch:function(e){return this.then(void 0,e)}});var qx=function(){var e=new mk,t=qp(e);this.promise=e,this.resolve=mf(lk,t),this.reject=mf(nf,t)};if(gk.f=lf=function(e){return e===Xb||e===rx?new qx(e):lx(e)},"function"==typeof Ih&&je!==Object.prototype){var sx=je.then;tp||(Za(je,"then",(function(e,t){var n=this;return new Xb((function(e,t){sx.call(n,e,t)})).then(e,t)}),{unsafe:!0}),Za(je,"catch",Oh.catch,{unsafe:!0}));try{delete je.constructor}catch(c2){}tb&&tb(je,Oh)}}ea({global:!0,wrap:!0,forced:tg},{Promise:Xb}),zc(Xb,"Promise",!1),og("Promise");var rx=Pc("Promise");ea({target:"Promise",stat:!0,forced:tg},{reject:function(e){var t=lf(this);return t.reject.call(void 0,e),t.promise}}),ea({target:"Promise",stat:!0,forced:tg},{resolve:function(e){if(Ia(this),!xa(e)||e.constructor!==this){var t=gk.f(this);(0,t.resolve)(e),e=t.promise}return e}}),ea({target:"Promise",stat:!0,forced:nx},{all:function(e){var t=this,n=lf(t),r=n.resolve,o=n.reject,i=hk((function(){var n=Wb(t.resolve),i=[],a=0,s=1;Jh(e,(function(e){var c=a++,l=!1;i.push(void 0),s++,n.call(t,e).then((function(e){l||(l=!0,i[c]=e,--s||r(i))}),o)})),--s||r(i)}));return i.error&&o(i.value),n.promise},race:function(e){var t=this,n=lf(t),r=n.reject,o=hk((function(){var o=Wb(t.resolve);Jh(e,(function(e){o.call(t,e).then(n.resolve,r)}))}));return o.error&&r(o.value),n.promise}});var tx=Math.floor,ux="".replace,vx=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,wx=/\$([$&'`]|\d{1,2})/g,xx=function(e,t,n,r,o,i){var a=n+e.length,s=r.length,c=wx;return void 0!==o&&(o=pb(o),c=vx),ux.call(i,c,(function(i,c){switch(c.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(a);case"<":i=o[c.slice(1,-1)];break;default:var l=+c;if(0===l)return i;if(l>s)return 0===(l=tx(l/10))?i:l<=s?void 0===r[l-1]?c.charAt(1):r[l-1]+c.charAt(1):i;i=r[l-1]}return void 0===i?"":i}))},yx=Math.max,zx=Math.min;Bh("replace",2,(function(e,t,n,r){var o=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,i=r.REPLACE_KEEPS_$0,a=o?"$":"$0";return[function(n,r){var o=Eb(this),i=null==n?void 0:n[e];return void 0!==i?i.call(n,o,r):t.call(String(o),n,r)},function(e,r){if(!o&&i||"string"==typeof r&&-1===r.indexOf(a)){var s=n(t,e,this,r);if(s.done)return s.value}var c=Ia(e);e=String(this),(s="function"==typeof r)||(r=String(r));var l=c.global;if(l){var u=c.unicode;c.lastIndex=0}for(var d=[];;){var A=ef(c,e);if(null===A)break;if(d.push(A),!l)break;""===String(A[0])&&(c.lastIndex=Mj(e,Ma(c.lastIndex),u))}for(u="",l=c=0;l<d.length;l++){A=d[l];for(var p=String(A[0]),h=yx(zx(yc(A.index),e.length),0),f=[],g=1;g<A.length;g++){var m=f,_=A[g];m.push.call(m,void 0===_?_:String(_))}A=A.groups,s?(f=[p].concat(f,h,e),void 0!==A&&f.push(A),A=String(r.apply(void 0,f))):A=xx(p,e,h,f,A,r),h>=c&&(u+=e.slice(c,h)+A,c=h+p.length)}return u+e.slice(c)}]}));var Ax=kg("slice"),Bx=Fa("species"),Cx=[].slice,Dx=Math.max;ea({target:"Array",proto:!0,forced:!Ax},{slice:function(e,t){var n=Mb(this),r=Ma(n.length);if(e=Vb(e,r),t=Vb(void 0===t?r:t,r),Ed(n)){var o=n.constructor;if("function"!=typeof o||o!==Array&&!Ed(o.prototype)?xa(o)&&null===(o=o[Bx])&&(o=void 0):o=void 0,o===Array||void 0===o)return Cx.call(n,e,t)}for(o=new(void 0===o?Array:o)(Dx(t-e,0)),r=0;e<t;e++,r++)e in n&&hf(o,r,n[e]);return o.length=r,o}});var Ex=cb.set,Fx=cb.getterFor("Array Iterator"),Gd=Wj(Array,"Array",(function(e,t){Ex(this,{type:"Array Iterator",target:Mb(e),index:0,kind:t})}),(function(){var e=Fx(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values");gf.Arguments=gf.Array,ng("keys"),ng("values"),ng("entries");var wp="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,of=function(e){if(void 0===e)return 0;e=yc(e);var t=Ma(e);if(e!==t)throw RangeError("Wrong length or index");return t},Gx=Math.abs,gd=Math.pow,Hx=Math.floor,Ix=Math.log,Jx=Math.LN2,xp=function(e){var t=pb(this),n=Ma(t.length),r=arguments.length,o=Vb(1<r?arguments[1]:void 0,n);for(n=void 0===(r=2<r?arguments[2]:void 0)?n:Vb(r,n);n>o;)t[o++]=e;return t},Kx=de.f,Lx=qb.f,pf=cb.get,yp=cb.set,Bc=R.ArrayBuffer,Yb=Bc,Cc=R.DataView,Ph=Cc&&Cc.prototype,zp=Object.prototype,Qh=R.RangeError,Ap=function(e,t,n){var r,o=Array(n),i=(1<<(n=8*n-t-1))-1,a=i>>1,s=23===t?gd(2,-24)-gd(2,-77):0,c=0>e||0===e&&0>1/e?1:0,l=0;if((e=Gx(e))!=e||1/0===e){e=e!=e?1:0;var u=i}else u=Hx(Ix(e)/Jx),1>e*(r=gd(2,-u))&&(u--,r*=2),2<=(e=1<=u+a?e+s/r:e+s*gd(2,1-a))*r&&(u++,r/=2),u+a>=i?(e=0,u=i):1<=u+a?(e=(e*r-1)*gd(2,t),u+=a):(e=e*gd(2,a-1)*gd(2,t),u=0);for(;8<=t;o[l++]=255&e,e/=256,t-=8);for(u=u<<t|e,n+=t;0<n;o[l++]=255&u,u/=256,n-=8);return o[--l]|=128*c,o},Bp=function(e,t){var n=e.length,r=8*n-t-1,o=(1<<r)-1,i=o>>1;r-=7,--n;var a=e[n--],s=127&a;for(a>>=7;0<r;s=256*s+e[n],n--,r-=8);var c=s&(1<<-r)-1;for(s>>=-r,r+=t;0<r;c=256*c+e[n],n--,r-=8);if(0===s)s=1-i;else{if(s===o)return c?NaN:a?-1/0:1/0;c+=gd(2,t),s-=i}return(a?-1:1)*c*gd(2,s-t)},Cp=function(e){return[255&e]},Dp=function(e){return[255&e,e>>8&255]},Ep=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},Fp=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},Mx=function(e){return Ap(e,23,4)},Nx=function(e){return Ap(e,52,8)},Rh=function(e,t){Lx(e.prototype,t,{get:function(){return pf(this)[t]}})},Hd=function(e,t,n,r){n=of(n);var o=pf(e);if(n+t>o.byteLength)throw Qh("Wrong index");return e=pf(o.buffer).bytes,n+=o.byteOffset,t=e.slice(n,n+t),r?t:t.reverse()},Id=function(e,t,n,r,o,i){n=of(n);var a=pf(e);if(n+t>a.byteLength)throw Qh("Wrong index");for(e=pf(a.buffer).bytes,n+=a.byteOffset,r=r(+o),o=0;o<t;o++)e[n+o]=r[i?o:t-o-1]};if(wp){if(!la((function(){Bc(1)}))||!la((function(){new Bc(-1)}))||la((function(){return new Bc,new Bc(1.5),new Bc(NaN),"ArrayBuffer"!=Bc.name}))){Yb=function(e){return Ac(this,Yb),new Bc(of(e))};for(var Ox=Yb.prototype=Bc.prototype,Gp=Kx(Bc),Hp=0,nk;Gp.length>Hp;)(nk=Gp[Hp++])in Yb||kb(Yb,nk,Bc[nk]);Ox.constructor=Yb}tb&&uc(Ph)!==zp&&tb(Ph,zp);var Sh=new Cc(new Yb(2)),Ip=Ph.setInt8;Sh.setInt8(0,2147483648),Sh.setInt8(1,2147483649),!Sh.getInt8(0)&&Sh.getInt8(1)||kf(Ph,{setInt8:function(e,t){Ip.call(this,e,t<<24>>24)},setUint8:function(e,t){Ip.call(this,e,t<<24>>24)}},{unsafe:!0})}else Yb=function(e){Ac(this,Yb,"ArrayBuffer"),e=of(e),yp(this,{bytes:xp.call(Array(e),0),byteLength:e}),wa||(this.byteLength=e)},Cc=function(e,t,n){Ac(this,Cc,"DataView"),Ac(e,Yb,"DataView");var r=pf(e).byteLength;if(0>(t=yc(t))||t>r)throw Qh("Wrong offset");if(t+(n=void 0===n?r-t:Ma(n))>r)throw Qh("Wrong length");yp(this,{buffer:e,byteLength:n,byteOffset:t}),wa||(this.buffer=e,this.byteLength=n,this.byteOffset=t)},wa&&(Rh(Yb,"byteLength"),Rh(Cc,"buffer"),Rh(Cc,"byteLength"),Rh(Cc,"byteOffset")),kf(Cc.prototype,{getInt8:function(e){return Hd(this,1,e)[0]<<24>>24},getUint8:function(e){return Hd(this,1,e)[0]},getInt16:function(e){var t=Hd(this,2,e,1<arguments.length?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=Hd(this,2,e,1<arguments.length?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return Fp(Hd(this,4,e,1<arguments.length?arguments[1]:void 0))},getUint32:function(e){return Fp(Hd(this,4,e,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(e){return Bp(Hd(this,4,e,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(e){return Bp(Hd(this,8,e,1<arguments.length?arguments[1]:void 0),52)},setInt8:function(e,t){Id(this,1,e,Cp,t)},setUint8:function(e,t){Id(this,1,e,Cp,t)},setInt16:function(e,t){Id(this,2,e,Dp,t,2<arguments.length?arguments[2]:void 0)},setUint16:function(e,t){Id(this,2,e,Dp,t,2<arguments.length?arguments[2]:void 0)},setInt32:function(e,t){Id(this,4,e,Ep,t,2<arguments.length?arguments[2]:void 0)},setUint32:function(e,t){Id(this,4,e,Ep,t,2<arguments.length?arguments[2]:void 0)},setFloat32:function(e,t){Id(this,4,e,Mx,t,2<arguments.length?arguments[2]:void 0)},setFloat64:function(e,t){Id(this,8,e,Nx,t,2<arguments.length?arguments[2]:void 0)}});zc(Yb,"ArrayBuffer"),zc(Cc,"DataView");var ug={ArrayBuffer:Yb,DataView:Cc},ok=ug.ArrayBuffer,Jp=ug.DataView,Kp=ok.prototype.slice,Px=la((function(){return!new ok(2).slice(1,void 0).byteLength}));ea({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:Px},{slice:function(e,t){if(void 0!==Kp&&void 0===t)return Kp.call(Ia(this),e);var n=Ia(this).byteLength;e=Vb(e,n),t=Vb(void 0===t?n:t,n),n=new(ee(this,ok))(Ma(t-e));for(var r=new Jp(this),o=new Jp(n),i=0;e<t;)o.setUint8(i++,r.getUint8(e++));return n}});var Qx=qb.f,Th=R.Int8Array,pk=Th&&Th.prototype,Lp=R.Uint8ClampedArray,Mp=Lp&&Lp.prototype,Tc=Th&&uc(Th),Dc=pk&&uc(pk),Np=Object.prototype,Op=Np.isPrototypeOf,Pp=Fa("toStringTag"),qk=af("TYPED_ARRAY_TAG"),hd=wp&&!!tb&&"Opera"!==jf(R.opera),Qp=!1,Zb,Uc={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Rx={BigInt64Array:8,BigUint64Array:8},Uh=function(e){return!!xa(e)&&(e=jf(e),ka(Uc,e)||ka(Rx,e))};for(Zb in Uc)R[Zb]||(hd=!1);if((!hd||"function"!=typeof Tc||Tc===Function.prototype)&&(Tc=function(){throw TypeError("Incorrect invocation")},hd))for(Zb in Uc)R[Zb]&&tb(R[Zb],Tc);if((!hd||!Dc||Dc===Np)&&(Dc=Tc.prototype,hd))for(Zb in Uc)R[Zb]&&tb(R[Zb].prototype,Dc);if(hd&&uc(Mp)!==Dc&&tb(Mp,Dc),wa&&!ka(Dc,Pp))for(Zb in Qp=!0,Qx(Dc,Pp,{get:function(){return xa(this)?this[qk]:void 0}}),Uc)R[Zb]&&kb(R[Zb],qk,Zb);var vg=hd,Rp=Qp&&qk,Ua=function(e){if(Uh(e))return e;throw TypeError("Target is not a typed array")},qf=function(e){if(tb){if(Op.call(Tc,e))return e}else for(var t in Uc)if(ka(Uc,Zb)){var n=R[t];if(n&&(e===n||Op.call(n,e)))return e}throw TypeError("Target is not a typed array constructor")},Ra=function(e,t,n){if(wa){if(n)for(var r in Uc){var o=R[r];if(o&&ka(o.prototype,e))try{delete o.prototype[e]}catch(e22){}}Dc[e]&&!n||Za(Dc,e,n?t:hd&&pk[e]||t)}},Sp=function(e,t,n){var r,o;if(wa){if(tb){if(n)for(r in Uc)if((o=R[r])&&ka(o,e))try{delete o[e]}catch(e22){}if(Tc[e]&&!n)return;try{return Za(Tc,e,n?t:hd&&Tc[e]||t)}catch(e22){}}for(r in Uc)!(o=R[r])||o[e]&&!n||Za(o,e,t)}},Tp=Tc,wg=Dc,Sx=R.ArrayBuffer,ke=R.Int8Array,rk=!vg||!la((function(){ke(1)}))||!la((function(){new ke(-1)}))||!Eh((function(e){new ke,new ke(null),new ke(1.5),new ke(e)}),!0)||la((function(){return 1!==new ke(new Sx(2),1,void 0).length})),Vh=function(e,t){if(0>(e=yc(e)))throw RangeError("The argument can't be less than 0");if(e%t)throw RangeError("Wrong offset");return e},sk=function(e){var t=pb(e),n=arguments.length,r=1<n?arguments[1]:void 0,o=void 0!==r,i=lg(t);if(null!=i&&!Qj(i)){var a=i.call(t),s=a.next;for(t=[];!(i=s.call(a)).done;)t.push(i.value)}for(o&&2<n&&(r=Dd(r,arguments[2],2)),i=Ma(t.length),a=new(qf(this))(i),n=0;i>n;n++)a[n]=o?r(t[n],n):t[n];return a},Wh=function(e,t,n){var r,o;return tb&&"function"==typeof(r=t.constructor)&&r!==n&&xa(o=r.prototype)&&o!==n.prototype&&tb(e,o),e},xg=xb((function(e){var t=de.f,n=cb.get,r=cb.set,o=qb.f,i=dc.f,a=Math.round,s=R.RangeError,c=ug.ArrayBuffer,l=ug.DataView,u=function(e,t){var n=0,r=t.length;for(e=new(qf(e))(r);r>n;)e[n]=t[n++];return e},d=function(e,t){o(e,t,{get:function(){return n(this)[t]}})},A=function(e){var t;return e instanceof c||"ArrayBuffer"==(t=jf(e))||"SharedArrayBuffer"==t},p=function(e,t){return Uh(e)&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},h=function(e,t){return p(e,t=Oc(t,!0))?Nc(2,e[t]):i(e,t)},f=function(e,t,n){return!(p(e,t=Oc(t,!0))&&xa(n)&&ka(n,"value"))||ka(n,"get")||ka(n,"set")||n.configurable||ka(n,"writable")&&!n.writable||ka(n,"enumerable")&&!n.enumerable?o(e,t,n):(e[t]=n.value,e)};wa?(vg||(dc.f=h,qb.f=f,d(wg,"buffer"),d(wg,"byteOffset"),d(wg,"byteLength"),d(wg,"length")),ea({target:"Object",stat:!0,forced:!vg},{getOwnPropertyDescriptor:h,defineProperty:f}),e.exports=function(e,i,d){var p=e.match(/\d+$/)[0]/8,h=e+(d?"Clamped":"")+"Array",f="get"+e,g="set"+e,m=R[h],_=m;e=_&&_.prototype;var E={},v=function(e,t){o(e,t,{get:function(){var e=n(this);return e.view[f](t*p+e.byteOffset,!0)},set:function(e){var r=n(this);d&&(e=0>(e=a(e))?0:255<e?255:255&e),r.view[g](t*p+r.byteOffset,e,!0)},enumerable:!0})};vg?rk&&(_=i((function(e,t,n,r){return Ac(e,_,h),Wh(xa(t)?A(t)?void 0!==r?new m(t,Vh(n,p),r):void 0!==n?new m(t,Vh(n,p)):new m(t):Uh(t)?u(_,t):sk.call(_,t):new m(of(t)),e,_)})),tb&&tb(_,Tp),fe(t(m),(function(e){e in _||kb(_,e,m[e])})),_.prototype=e):(_=i((function(e,t,n,o){Ac(e,_,h);var i=0,a=0;if(xa(t)){if(!A(t))return Uh(t)?u(_,t):sk.call(_,t);var d=t;if(a=Vh(n,p),t=t.byteLength,void 0===o){if(t%p)throw s("Wrong length");if(0>(o=t-a))throw s("Wrong length")}else if((o=Ma(o)*p)+a>t)throw s("Wrong length");t=o/p}else t=of(t),d=new c(o=t*p);for(r(e,{buffer:d,byteOffset:a,byteLength:o,length:t,view:new l(d)});i<t;)v(e,i++)})),tb&&tb(_,Tp),e=_.prototype=jc(wg)),e.constructor!==_&&kb(e,"constructor",_),Rp&&kb(e,Rp,h),E[h]=_,ea({global:!0,forced:_!=m,sham:!vg},E),"BYTES_PER_ELEMENT"in _||kb(_,"BYTES_PER_ELEMENT",p),"BYTES_PER_ELEMENT"in e||kb(e,"BYTES_PER_ELEMENT",p),og(h)}):e.exports=function(){}}));xg("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}));var Tx=Math.min,Ux=[].copyWithin||function(e,t){var n=pb(this),r=Ma(n.length),o=Vb(e,r),i=Vb(t,r),a=2<arguments.length?arguments[2]:void 0;for(r=Tx((void 0===a?r:Vb(a,r))-i,r-o),a=1,i<o&&o<i+r&&(a=-1,i+=r-1,o+=r-1);0<r--;)i in n?n[o]=n[i]:delete n[o],o+=a,i+=a;return n};Ra("copyWithin",(function(e,t){return Ux.call(Ua(this),e,t,2<arguments.length?arguments[2]:void 0)})),Ra("every",(function(e){return Cw(Ua(this),e,1<arguments.length?arguments[1]:void 0)})),Ra("fill",(function(e){return xp.apply(Ua(this),arguments)})),Ra("filter",(function(e){var t=Io(Ua(this),e,1<arguments.length?arguments[1]:void 0),n=ee(this,this.constructor),r=0,o=t.length;for(n=new(qf(n))(o);o>r;)n[r]=t[r++];return n})),Ra("find",(function(e){return Jo(Ua(this),e,1<arguments.length?arguments[1]:void 0)})),Ra("findIndex",(function(e){return Dw(Ua(this),e,1<arguments.length?arguments[1]:void 0)})),Ra("forEach",(function(e){fe(Ua(this),e,1<arguments.length?arguments[1]:void 0)})),Ra("includes",(function(e){return qo(Ua(this),e,1<arguments.length?arguments[1]:void 0)})),Ra("indexOf",(function(e){return Fj(Ua(this),e,1<arguments.length?arguments[1]:void 0)}));var Up=Fa("iterator"),Vp=R.Uint8Array,Vx=Gd.values,Wx=Gd.keys,Xx=Gd.entries,tk=Vp&&Vp.prototype[Up],Wp=!!tk&&("values"==tk.name||null==tk.name),Xp=function(){return Vx.call(Ua(this))};Ra("entries",(function(){return Xx.call(Ua(this))})),Ra("keys",(function(){return Wx.call(Ua(this))})),Ra("values",Xp,!Wp),Ra(Up,Xp,!Wp);var Yx=[].join;Ra("join",(function(e){return Yx.apply(Ua(this),arguments)}));var Zx=Math.min,uk=[].lastIndexOf,Yp=!!uk&&0>1/[1].lastIndexOf(1,-0),$x=ff("lastIndexOf"),ay=Yp||!$x?function(e){if(Yp)return uk.apply(this,arguments)||0;var t=Mb(this),n=Ma(t.length),r=n-1;for(1<arguments.length&&(r=Zx(r,yc(arguments[1]))),0>r&&(r=n+r);0<=r;r--)if(r in t&&t[r]===e)return r||0;return-1}:uk;Ra("lastIndexOf",(function(e){return ay.apply(Ua(this),arguments)})),Ra("map",(function(e){return Ho(Ua(this),e,1<arguments.length?arguments[1]:void 0,(function(e,t){return new(qf(ee(e,e.constructor)))(t)}))}));var Zp=function(e){return function(t,n,r,o){Wb(n),t=pb(t);var i=fg(t),a=Ma(t.length),s=e?a-1:0,c=e?-1:1;if(2>r)for(;;){if(s in i){o=i[s],s+=c;break}if(s+=c,e?0>s:a<=s)throw TypeError("Reduce of empty array with no initial value")}for(;e?0<=s:a>s;s+=c)s in i&&(o=n(o,i[s],s,t));return o}},$p=Zp(!1),by=Zp(!0);Ra("reduce",(function(e){return $p(Ua(this),e,arguments.length,1<arguments.length?arguments[1]:void 0)})),Ra("reduceRight",(function(e){return by(Ua(this),e,arguments.length,1<arguments.length?arguments[1]:void 0)}));var cy=Math.floor;Ra("reverse",(function(){for(var e,t=Ua(this).length,n=cy(t/2),r=0;r<n;)e=this[r],this[r++]=this[--t],this[t]=e;return this}));var dy=la((function(){new Int8Array(1).set({})}));Ra("set",(function(e){Ua(this);var t=Vh(1<arguments.length?arguments[1]:void 0,1),n=this.length,r=pb(e),o=Ma(r.length),i=0;if(o+t>n)throw RangeError("Wrong length");for(;i<o;)this[t+i]=r[i++]}),dy);var ey=[].slice,fy=la((function(){new Int8Array(1).slice()}));Ra("slice",(function(e,t){e=ey.call(Ua(this),e,t);var n=ee(this,this.constructor);t=0;var r=e.length;for(n=new(qf(n))(r);r>t;)n[t]=e[t++];return n}),fy),Ra("some",(function(e){return Bw(Ua(this),e,1<arguments.length?arguments[1]:void 0)}));var gy=[].sort;Ra("sort",(function(e){return gy.call(Ua(this),e)})),Ra("subarray",(function(e,t){var n=Ua(this),r=n.length;return e=Vb(e,r),new(ee(n,n.constructor))(n.buffer,n.byteOffset+e*n.BYTES_PER_ELEMENT,Ma((void 0===t?r:Vb(t,r))-e))}));var Xh=R.Int8Array,aq=[].toLocaleString,hy=[].slice,iy=!!Xh&&la((function(){aq.call(new Xh(1))})),jy=la((function(){return[1,2].toLocaleString()!=new Xh([1,2]).toLocaleString()}))||!la((function(){Xh.prototype.toLocaleString.call([1,2])}));Ra("toLocaleString",(function(){return aq.apply(iy?hy.call(Ua(this)):Ua(this),arguments)}),jy);var bq=R.Uint8Array,ky=bq&&bq.prototype||{},Yh=[].toString,ly=[].join;la((function(){Yh.call({})}))&&(Yh=function(){return ly.call(this)}),Ra("toString",Yh,ky.toString!=Yh);var cq=ug.ArrayBuffer;ea({global:!0,forced:R.ArrayBuffer!==cq},{ArrayBuffer:cq}),og("ArrayBuffer");var my=qb.f,vk=Function.prototype,ny=vk.toString,oy=/^\s*function ([^ (]*)/;!wa||"name"in vk||my(vk,"name",{configurable:!0,get:function(){try{return ny.call(this).match(oy)[1]}catch(e2){return""}}});var dq=RegExp.prototype,eq=dq.toString,py=la((function(){return"/a/b"!=eq.call({source:"a",flags:"b"})})),qy="toString"!=eq.name;(py||qy)&&Za(RegExp.prototype,"toString",(function(){var e=Ia(this),t=String(e.source),n=e.flags;return"/"+t+"/"+String(void 0===n&&e instanceof RegExp&&!("flags"in dq)?Gj.call(e):n)}),{unsafe:!0});var ry=kg("splice"),sy=Math.max,ty=Math.min;ea({target:"Array",proto:!0,forced:!ry},{splice:function(e,t){var n,r,o=pb(this),i=Ma(o.length),a=Vb(e,i),s=arguments.length;if(0===s?s=n=0:1===s?(s=0,n=i-a):(s-=2,n=ty(sy(yc(t),0),i-a)),9007199254740991<i+s-n)throw TypeError("Maximum allowed length exceeded");var c=Dh(o,n);for(r=0;r<n;r++){var l=a+r;l in o&&hf(c,r,o[l])}if(c.length=n,s<n){for(r=a;r<i-n;r++){var u=r+s;(l=r+n)in o?o[u]=o[l]:delete o[u]}for(r=i;r>i-n+s;r--)delete o[r-1]}else if(s>n)for(r=i-n;r>a;r--)u=r+s-1,(l=r+n-1)in o?o[u]=o[l]:delete o[u];for(r=0;r<s;r++)o[r+a]=arguments[r+2];return o.length=i-n+s,c}});var wk={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},xk=Fa("iterator"),fq=Fa("toStringTag"),yk=Gd.values,Zh;for(Zh in wk){var gq=R[Zh],id=gq&&gq.prototype;if(id){if(id[xk]!==yk)try{kb(id,xk,yk)}catch(c2){id[xk]=yk}if(id[fq]||kb(id,fq,Zh),wk[Zh])for(var rf in Gd)if(id[rf]!==Gd[rf])try{kb(id,rf,Gd[rf])}catch(c2){id[rf]=Gd[rf]}}}var hq=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t};Bh("search",1,(function(e,t,n){return[function(t){var n=Eb(this),r=null==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;e=Ia(e);var o=String(this);return r=e.lastIndex,hq(r,0)||(e.lastIndex=0),o=ef(e,o),hq(e.lastIndex,r)||(e.lastIndex=r),null===o?-1:o.index}]})),xb((function(e){var t,n;t="undefined"!=typeof self?self:Ya,n=function(e){function t(e){return btoa(e).replace(/=+$/,"").replace(/\+/g,"-").replace(/\//g,"_")}function n(e){return e=(e+="===").slice(0,-e.length%4),atob(e.replace(/-/g,"+").replace(/_/g,"/"))}function r(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}function o(e){return e instanceof ArrayBuffer&&(e=new Uint8Array(e)),String.fromCharCode.apply(String,e)}function i(e){var t={name:(e.name||e||"").toUpperCase().replace("V","v")};switch(t.name){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":break;case"AES-CBC":case"AES-GCM":case"AES-KW":e.length&&(t.length=e.length);break;case"HMAC":e.hash&&(t.hash=i(e.hash)),e.length&&(t.length=e.length);break;case"RSAES-PKCS1-v1_5":e.publicExponent&&(t.publicExponent=new Uint8Array(e.publicExponent)),e.modulusLength&&(t.modulusLength=e.modulusLength);break;case"RSASSA-PKCS1-v1_5":case"RSA-OAEP":e.hash&&(t.hash=i(e.hash)),e.publicExponent&&(t.publicExponent=new Uint8Array(e.publicExponent)),e.modulusLength&&(t.modulusLength=e.modulusLength);break;default:throw new SyntaxError("Bad algorithm name")}return t}function a(e){return{HMAC:{"SHA-1":"HS1","SHA-256":"HS256","SHA-384":"HS384","SHA-512":"HS512"},"RSASSA-PKCS1-v1_5":{"SHA-1":"RS1","SHA-256":"RS256","SHA-384":"RS384","SHA-512":"RS512"},"RSAES-PKCS1-v1_5":{"":"RSA1_5"},"RSA-OAEP":{"SHA-1":"RSA-OAEP","SHA-256":"RSA-OAEP-256"},"AES-KW":{128:"A128KW",192:"A192KW",256:"A256KW"},"AES-GCM":{128:"A128GCM",192:"A192GCM",256:"A256GCM"},"AES-CBC":{128:"A128CBC",192:"A192CBC",256:"A256CBC"}}[e.name][(e.hash||{}).name||e.length||""]}function s(e){(e instanceof ArrayBuffer||e instanceof Uint8Array)&&(e=JSON.parse(decodeURIComponent(escape(o(e)))));var t={kty:e.kty,alg:e.alg,ext:e.ext||e.extractable};switch(t.kty){case"oct":t.k=e.k;case"RSA":"n e d p q dp dq qi oth".split(" ").forEach((function(n){n in e&&(t[n]=e[n])}));break;default:throw new TypeError("Unsupported key type")}return t}function c(e,t){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),t||(t={pos:0,end:e.length}),2>t.end-t.pos||t.end>e.length)throw new RangeError("Malformed DER");var n=e[t.pos++],r=e[t.pos++];if(128<=r){if(r&=127,t.end-t.pos<r)throw new RangeError("Malformed DER");for(var i=0;r--;)i<<=8,i|=e[t.pos++];r=i}if(t.end-t.pos<r)throw new RangeError("Malformed DER");switch(n){case 2:n=e.subarray(t.pos,t.pos+=r);break;case 3:if(e[t.pos++])throw Error("Unsupported bit string");r--;case 4:n=new Uint8Array(e.subarray(t.pos,t.pos+=r)).buffer;break;case 5:n=null;break;case 6:if(!((e=btoa(o(e.subarray(t.pos,t.pos+=r))))in v))throw Error("Unsupported OBJECT ID "+e);n=v[e];break;case 48:for(n=[],r=t.pos+r;t.pos<r;)n.push(c(e,t));break;default:throw Error("Unsupported DER tag 0x"+n.toString(16))}return n}function l(e,t){t||(t=[]);var n=t.length+2;if(t.push(0,0),e instanceof Uint8Array)for(var o=2,i=e.length,a=0;a<i;a++)t.push(e[a]);else if(e instanceof ArrayBuffer)for(o=4,i=e.byteLength,e=new Uint8Array(e),a=0;a<i;a++)t.push(e[a]);else if(null===e)o=5,i=0;else if("string"==typeof e&&e in y)for(o=6,i=(e=r(atob(y[e]))).length,a=0;a<i;a++)t.push(e[a]);else if(e instanceof Array){for(a=0;a<e.length;a++)l(e[a],t);o=48,i=t.length-n}else{if(!("object"===qa(e)&&3===e.tag&&e.value instanceof ArrayBuffer))throw Error("Unsupported DER value "+e);for(o=3,i=(e=new Uint8Array(e.value)).byteLength,t.push(0),a=0;a<i;a++)t.push(e[a]);i++}if(128<=i){for(a=i,i=4,t.splice(n,0,a>>24&255,a>>16&255,a>>8&255,255&a);1<i&&!(a>>24);)a<<=8,i--;4>i&&t.splice(n,4-i),i|=128}return t.splice(n-2,2,o,i),t}function u(e,t,n,r){Object.defineProperties(this,{_key:{value:e},type:{value:e.type,enumerable:!0},extractable:{value:void 0===n?e.extractable:n,enumerable:!0},algorithm:{value:void 0===t?e.algorithm:t,enumerable:!0},usages:{value:void 0===r?e.usages:r,enumerable:!0}})}function d(e){return"verify"===e||"encrypt"===e||"wrapKey"===e}function A(e){return"sign"===e||"decrypt"===e||"unwrapKey"===e}if("function"!=typeof Promise)throw"Promise support required";var p=e.crypto||e.msCrypto;if(p){var h=p.subtle||p.webkitSubtle;if(h){var f=e.Crypto||p.constructor||Object,g=e.SubtleCrypto||h.constructor||Object;e.CryptoKey||e.Key;var m=-1<e.navigator.userAgent.indexOf("Edge/"),_=!!e.msCrypto&&!m,E=!p.subtle&&!!p.webkitSubtle;if(_||E){var v={KoZIhvcNAQEB:"1.2.840.113549.1.1.1"},y={"1.2.840.113549.1.1.1":"KoZIhvcNAQEB"};if(["generateKey","importKey","unwrapKey"].forEach((function(e){var l=h[e];h[e]=function(f,g,m){var v=[].slice.call(arguments);switch(e){case"generateKey":var y=i(f),b=g,C=m;break;case"importKey":y=i(m),b=v[3],C=v[4],"jwk"===f&&((g=s(g)).alg||(g.alg=a(y)),g.key_ops||(g.key_ops="oct"!==g.kty?"d"in g?C.filter(A):C.filter(d):C.slice()),v[1]=function(e){return e=s(e),_&&(e.extractable=e.ext,delete e.ext),r(unescape(encodeURIComponent(JSON.stringify(e)))).buffer}(g));break;case"unwrapKey":y=v[4],b=v[5],C=v[6],v[2]=m._key}if("generateKey"===e&&"HMAC"===y.name&&y.hash)return y.length=y.length||{"SHA-1":512,"SHA-256":512,"SHA-384":1024,"SHA-512":1024}[y.hash.name],h.importKey("raw",p.getRandomValues(new Uint8Array(y.length+7>>3)),y,b,C);if(E&&"generateKey"===e&&"RSASSA-PKCS1-v1_5"===y.name&&(!y.modulusLength||2048<=y.modulusLength))return(f=i(f)).name="RSAES-PKCS1-v1_5",delete f.hash,h.generateKey(f,!0,["encrypt","decrypt"]).then((function(e){return Promise.all([h.exportKey("jwk",e.publicKey),h.exportKey("jwk",e.privateKey)])})).then((function(e){return e[0].alg=e[1].alg=a(y),e[0].key_ops=C.filter(d),e[1].key_ops=C.filter(A),Promise.all([h.importKey("jwk",e[0],y,!0,e[0].key_ops),h.importKey("jwk",e[1],y,b,e[1].key_ops)])})).then((function(e){return{publicKey:e[0],privateKey:e[1]}}));if((E||_&&"SHA-1"===(y.hash||{}).name)&&"importKey"===e&&"jwk"===f&&"HMAC"===y.name&&"oct"===g.kty)return h.importKey("raw",r(n(g.k)),m,v[3],v[4]);if(E&&"importKey"===e&&("spki"===f||"pkcs8"===f))return h.importKey("jwk",function(e){var n=c(e),r=!1;if("1.2.840.113549.1.1.1"!==(2<n.length&&(r=!0,n.shift()),e={ext:!0},n[0][0]))throw new TypeError("Unsupported key type");var i="n e d p q dp dq qi".split(" ");for(n=c(n[1]),r&&n.shift(),r=0;r<n.length;r++)n[r][0]||(n[r]=n[r].subarray(1)),e[i[r]]=t(o(n[r]));return e.kty="RSA",e}(g),m,v[3],v[4]);if(_&&"unwrapKey"===e)return h.decrypt(v[3],m,g).then((function(e){return h.importKey(f,e,v[4],v[5],v[6])}));try{var S=l.apply(h,v)}catch(w){return Promise.reject(w)}return _&&(S=new Promise((function(e,t){S.onabort=S.onerror=function(e){t(e)},S.oncomplete=function(t){e(t.target.result)}}))),S=S.then((function(e){return"HMAC"!==y.name||y.length||(y.length=8*e.algorithm.length),0==y.name.search("RSA")&&(y.modulusLength||(y.modulusLength=(e.publicKey||e).algorithm.modulusLength),y.publicExponent||(y.publicExponent=(e.publicKey||e).algorithm.publicExponent)),e.publicKey&&e.privateKey?{publicKey:new u(e.publicKey,y,b,C.filter(d)),privateKey:new u(e.privateKey,y,b,C.filter(A))}:new u(e,y,b,C)}))}})),["exportKey","wrapKey"].forEach((function(e){var i=h[e];h[e]=function(c,u,p){var f=[].slice.call(arguments);switch(e){case"exportKey":f[1]=u._key;break;case"wrapKey":f[1]=u._key,f[2]=p._key}if((E||_&&"SHA-1"===(u.algorithm.hash||{}).name)&&"exportKey"===e&&"jwk"===c&&"HMAC"===u.algorithm.name&&(f[0]="raw"),!E||"exportKey"!==e||"spki"!==c&&"pkcs8"!==c||(f[0]="jwk"),_&&"wrapKey"===e)return h.exportKey(c,u).then((function(e){return"jwk"===c&&(e=r(unescape(encodeURIComponent(JSON.stringify(s(e)))))),h.encrypt(f[3],p,e)}));try{var g=i.apply(h,f)}catch(m){return Promise.reject(m)}return _&&(g=new Promise((function(e,t){g.onabort=g.onerror=function(e){t(e)},g.oncomplete=function(t){e(t.target.result)}}))),"exportKey"===e&&"jwk"===c&&(g=g.then((function(e){return(E||_&&"SHA-1"===(u.algorithm.hash||{}).name)&&"HMAC"===u.algorithm.name?{kty:"oct",alg:a(u.algorithm),key_ops:u.usages.slice(),ext:!0,k:t(o(e))}:((e=s(e)).alg||(e.alg=a(u.algorithm)),e.key_ops||(e.key_ops="public"===u.type?u.usages.filter(d):"private"===u.type?u.usages.filter(A):u.usages.slice()),e)}))),!E||"exportKey"!==e||"spki"!==c&&"pkcs8"!==c||(g=g.then((function(e){var t=[["",null]],o=!1;if("RSA"!==(e=s(e)).kty)throw new TypeError("Unsupported key type");for(var i="n e d p q dp dq qi".split(" "),a=[],c=0;c<i.length&&i[c]in e;c++){var u=a[c]=r(n(e[i[c]]));128&u[0]&&(a[c]=new Uint8Array(u.length+1),a[c].set(u,1))}return 2<a.length&&(o=!0,a.unshift(new Uint8Array([0]))),t[0][0]="1.2.840.113549.1.1.1",t.push(new Uint8Array(l(a)).buffer),o?t.unshift(new Uint8Array([0])):t[1]={tag:3,value:t[1]},new Uint8Array(l(t)).buffer}))),g}})),["encrypt","decrypt","sign","verify"].forEach((function(e){var t=h[e];h[e]=function(n,r,o,a){if(_&&(!o.byteLength||a&&!a.byteLength))throw Error("Empty input is not allowed");var s=[].slice.call(arguments),c=i(n);if(!_||"sign"!==e&&"verify"!==e||"RSASSA-PKCS1-v1_5"!==n&&"HMAC"!==n||(s[0]={name:n}),_&&r.algorithm.hash&&(s[0].hash=s[0].hash||r.algorithm.hash),_&&"decrypt"===e&&"AES-GCM"===c.name){var l=n.tagLength>>3;s[2]=(o.buffer||o).slice(0,o.byteLength-l),n.tag=(o.buffer||o).slice(o.byteLength-l)}_&&"AES-GCM"===c.name&&void 0===s[0].tagLength&&(s[0].tagLength=128),s[1]=r._key;try{var u=t.apply(h,s)}catch(d){return Promise.reject(d)}return _&&(u=new Promise((function(t,n){u.onabort=u.onerror=function(e){n(e)},u.oncomplete=function(n){if(n=n.target.result,"encrypt"===e&&n instanceof AesGcmEncryptResult){var r=n.ciphertext,o=n.tag;(n=new Uint8Array(r.byteLength+o.byteLength)).set(new Uint8Array(r),0),n.set(new Uint8Array(o),r.byteLength),n=n.buffer}t(n)}}))),u}})),_){var b=h.digest;h.digest=function(e,t){if(!t.byteLength)throw Error("Empty input is not allowed");try{var n=b.call(h,e,t)}catch(r){return Promise.reject(r)}return n=new Promise((function(e,t){n.onabort=n.onerror=function(e){t(e)},n.oncomplete=function(t){e(t.target.result)}}))},e.crypto=Object.create(p,{getRandomValues:{value:function(e){return p.getRandomValues(e)}},subtle:{value:h}}),e.CryptoKey=u}E&&(p.subtle=h,e.Crypto=f,e.SubtleCrypto=g,e.CryptoKey=u)}}}},e.exports?e.exports=n(t):n(t)})),function(e){e.console||(e.console={}),e=e.console;for(var t,n=function(){},r=["memory"],o="assert clear count debug dir dirxml error exception group groupCollapsed groupEnd info log markTimeline profile profiles profileEnd show table time timeEnd timeline timelineEnd timeStamp trace warn".split(" ");t=r.pop();)e[t]||(e[t]={});for(;t=o.pop();)e[t]||(e[t]=n)}("undefined"==typeof window?Ya:window),ea({target:"Object",stat:!0},{setPrototypeOf:tb});var uy=la((function(){uc(1)}));ea({target:"Object",stat:!0,forced:uy,sham:!Oo},{getPrototypeOf:function(e){return uc(pb(e))}});var iq=[].slice,zk={},vy=Function.bind||function(e){var t=Wb(this),n=iq.call(arguments,1),r=function(){var o=n.concat(iq.call(arguments));if(this instanceof r){var i=o.length;if(!(i in zk)){for(var a=[],s=0;s<i;s++)a[s]="a["+s+"]";zk[i]=Function("C,a","return new C("+a.join(",")+")")}o=zk[i](t,o)}else o=t.apply(e,o);return o};return xa(t.prototype)&&(r.prototype=t.prototype),r},Ak=Pc("Reflect","construct"),jq=la((function(){function e(){}return!(Ak((function(){}),[],e)instanceof e)})),kq=!la((function(){Ak((function(){}))})),lq=jq||kq;ea({target:"Reflect",stat:!0,forced:lq,sham:lq},{construct:function(e,t){Wb(e),Ia(t);var n=3>arguments.length?e:Wb(arguments[2]);if(kq&&!jq)return Ak(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}return(n=[null]).push.apply(n,t),new(vy.apply(e,n))}n=n.prototype,n=jc(xa(n)?n:Object.prototype);var r=Function.apply.call(e,n,t);return xa(r)?r:n}}),ea({target:"Reflect",stat:!0},{get:Am});var mq=dc.f,wy=la((function(){mq(1)}));ea({target:"Object",stat:!0,forced:!wa||wy,sham:!wa},{getOwnPropertyDescriptor:function(e,t){return mq(Mb(e),t)}});var nq=de.f,xy={}.toString,oq="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Bk=function(e){if(oq&&"[object Window]"==xy.call(e))try{var t=nq(e)}catch(e22){t=oq.slice()}else t=nq(Mb(e));return t},pq={f:Fa},yy=qb.f,$h=function(e){var t=R.Symbol||(R.Symbol={});ka(t,e)||yy(t,e,{value:pq.f(e)})},Nb=xh("hidden"),qq=Fa("toPrimitive"),zy=cb.set,rq=cb.getterFor("Symbol"),kc=Object.prototype,Ob=R.Symbol,yg=Pc("JSON","stringify"),sq=dc.f,Jd=qb.f,tq=Bk,Ay=eg,jd=Ad("symbols"),zg=Ad("op-symbols"),Ck=Ad("string-to-symbol-registry"),Dk=Ad("symbol-to-string-registry"),By=Ad("wks"),Ek=R.QObject,Fk=!Ek||!Ek.prototype||!Ek.prototype.findChild,Gk=wa&&la((function(){return 7!=jc(Jd({},"a",{get:function(){return Jd(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=sq(kc,t);r&&delete kc[t],Jd(e,t,n),r&&e!==kc&&Jd(kc,t,r)}:Jd,Hk=function(e,t){var n=jd[e]=jc(Ob.prototype);return zy(n,{type:"Symbol",tag:e,description:t}),wa||(n.description=t),n},Ik=zo?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof Ob},ai=function(e,t,n){return e===kc&&ai(zg,t,n),Ia(e),t=Oc(t,!0),Ia(n),ka(jd,t)?(n.enumerable?(ka(e,Nb)&&e[Nb][t]&&(e[Nb][t]=!1),n=jc(n,{enumerable:Nc(0,!1)})):(ka(e,Nb)||Jd(e,Nb,Nc(1,{})),e[Nb][t]=!0),Gk(e,t,n)):Jd(e,t,n)},uq=function(e,t){Ia(e);var n=Mb(t);return t=ed(n).concat(Jk(n)),fe(t,(function(t){wa&&!Kk.call(n,t)||ai(e,t,n[t])})),e},Kk=function(e){e=Oc(e,!0);var t=Ay.call(this,e);return!(this===kc&&ka(jd,e)&&!ka(zg,e))&&(!(t||!ka(this,e)||!ka(jd,e)||ka(this,Nb)&&this[Nb][e])||t)},vq=function(e,t){if(e=Mb(e),t=Oc(t,!0),e!==kc||!ka(jd,t)||ka(zg,t)){var n=sq(e,t);return!n||!ka(jd,t)||ka(e,Nb)&&e[Nb][t]||(n.enumerable=!0),n}},wq=function(e){e=tq(Mb(e));var t=[];return fe(e,(function(e){ka(jd,e)||ka(bf,e)||t.push(e)})),t},Jk=function(e){var t=e===kc;e=tq(t?zg:Mb(e));var n=[];return fe(e,(function(e){!ka(jd,e)||t&&!ka(kc,e)||n.push(jd[e])})),n};if(Sc||(Ob=function(){if(this instanceof Ob)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=af(e),n=function(e){this===kc&&n.call(zg,e),ka(this,Nb)&&ka(this[Nb],t)&&(this[Nb][t]=!1),Gk(this,t,Nc(1,e))};return wa&&Fk&&Gk(kc,t,{configurable:!0,set:n}),Hk(t,e)},Za(Ob.prototype,"toString",(function(){return rq(this).tag})),Za(Ob,"withoutSetter",(function(e){return Hk(af(e),e)})),eg=Kk,qb.f=ai,dc.f=vq,de.f=Bk=wq,gg.f=Jk,pq.f=function(e){return Hk(Fa(e),e)},wa&&(Jd(Ob.prototype,"description",{configurable:!0,get:function(){return rq(this).description}}),Za(kc,"propertyIsEnumerable",Kk,{unsafe:!0}))),ea({global:!0,wrap:!0,forced:!Sc,sham:!Sc},{Symbol:Ob}),fe(ed(By),(function(e){$h(e)})),ea({target:"Symbol",stat:!0,forced:!Sc},{for:function(e){if(e=String(e),ka(Ck,e))return Ck[e];var t=Ob(e);return Ck[e]=t,Dk[t]=e,t},keyFor:function(e){if(!Ik(e))throw TypeError(e+" is not a symbol");if(ka(Dk,e))return Dk[e]},useSetter:function(){Fk=!0},useSimple:function(){Fk=!1}}),ea({target:"Object",stat:!0,forced:!Sc,sham:!wa},{create:function(e,t){return void 0===t?jc(e):uq(jc(e),t)},defineProperty:ai,defineProperties:uq,getOwnPropertyDescriptor:vq}),ea({target:"Object",stat:!0,forced:!Sc},{getOwnPropertyNames:wq,getOwnPropertySymbols:Jk}),ea({target:"Object",stat:!0,forced:la((function(){gg.f(1)}))},{getOwnPropertySymbols:function(e){return gg.f(pb(e))}}),yg){var Cy=!Sc||la((function(){var e=Ob();return"[null]"!=yg([e])||"{}"!=yg({a:e})||"{}"!=yg(Object(e))}));ea({target:"JSON",stat:!0,forced:Cy},{stringify:function(e,t,n){for(var r,o=[e],i=1;arguments.length>i;)o.push(arguments[i++]);if(r=t,(xa(t)||void 0!==e)&&!Ik(e))return Ed(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!Ik(t))return t}),o[1]=t,yg.apply(null,o)}})}Ob.prototype[qq]||kb(Ob.prototype,qq,Ob.prototype.valueOf),zc(Ob,"Symbol"),bf[Nb]=!0;var Dy=qb.f,kd=R.Symbol;if(wa&&"function"==typeof kd&&(!("description"in kd.prototype)||void 0!==kd().description)){var xq={},Ag=function(){var e=1>arguments.length||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof Ag?new kd(e):void 0===e?kd():kd(e);return""===e&&(xq[t]=!0),t};to(Ag,kd);var Lk=Ag.prototype=kd.prototype;Lk.constructor=Ag;var Ey=Lk.toString,Fy="Symbol(test)"==String(kd("test")),Gy=/^Symbol\((.*)\)[^)]+$/;Dy(Lk,"description",{configurable:!0,get:function(){var e=xa(this)?this.valueOf():this,t=Ey.call(e);return ka(xq,e)?"":""===(e=Fy?t.slice(7,-1):t.replace(Gy,"$1"))?void 0:e}}),ea({global:!0,forced:!0},{Symbol:Ag})}$h("toStringTag"),zc(R.JSON,"JSON",!0),zc(Math,"Math",!0),function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}function n(e){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e,t,r){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=n(e)););if(e)return(t=Object.getOwnPropertyDescriptor(e,t)).get?t.get.call(r):t.value})(e,t,r||e)}var a=function(){function n(){e(this,n),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return t(n,[{key:"addEventListener",value:function(e,t,n){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push({callback:t,options:n})}},{key:"removeEventListener",value:function(e,t){if(e in this.listeners)for(var n=0,r=(e=this.listeners[e]).length;n<r;n++)if(e[n].callback===t){e.splice(n,1);break}}},{key:"dispatchEvent",value:function(e){if(e.type in this.listeners){for(var t=this.listeners[e.type].slice(),n=0,r=t.length;n<r;n++){var o=t[n];try{o.callback.call(this,e)}catch(i){Promise.resolve().then((function(){throw i}))}o.options&&o.options.once&&this.removeEventListener(e.type,o.callback)}return!e.defaultPrevented}}}]),n}(),s=function(s){function c(){e(this,c);var t=l.call(this);return t.listeners||a.call(o(t)),Object.defineProperty(o(t),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(o(t),"onabort",{value:null,writable:!0,configurable:!0}),t}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}(c,s);var l=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r=n(e);if(t){var i=n(this).constructor;r=Reflect.construct(r,arguments,i)}else r=r.apply(this,arguments);return!r||"object"!==qa(r)&&"function"!=typeof r?o(this):r}}(c);return t(c,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(e){"abort"===e.type&&(this.aborted=!0,"function"==typeof this.onabort&&this.onabort.call(this,e)),i(n(c.prototype),"dispatchEvent",this).call(this,e)}}]),c}(a),c=function(){function n(){e(this,n),Object.defineProperty(this,"signal",{value:new s,writable:!0,configurable:!0})}return t(n,[{key:"abort",value:function(){try{var e=new Event("abort")}catch(t){"undefined"!=typeof document?document.createEvent?(e=document.createEvent("Event")).initEvent("abort",!1,!1):(e=document.createEventObject()).type="abort":e={type:"abort",bubbles:!1,cancelable:!1}}this.signal.dispatchEvent(e)}},{key:"toString",value:function(){return"[object AbortController]"}}]),n}();"undefined"!=typeof Symbol&&Symbol.toStringTag&&(c.prototype[Symbol.toStringTag]="AbortController",s.prototype[Symbol.toStringTag]="AbortSignal"),function(e){if(e.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL){console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill");var t=!0}else t="function"==typeof e.Request&&!e.Request.prototype.hasOwnProperty("signal")||!e.AbortController;t&&(e.AbortController=c,e.AbortSignal=s)}("undefined"!=typeof self?self:Ya)}();var Hy=Math.floor,Iy=Math.log,Jy=Math.LOG2E;ea({target:"Math",stat:!0},{clz32:function(e){return(e>>>=0)?31-Hy(Iy(e+.5)*Jy):32}});var Ky=Math.log,Ly=Math.LN2,cu=Math.clz32||function(e){return 31-Ky(e>>>0)/Ly|0},Ud=String.fromCharCode,yq={}.toString,Mk=window.Uint8Array,Nk=Mk||Array,My=yq.call((window.ArrayBuffer||Nk).prototype),Ok,e2,t2,n,r,o2,i2,s,a2,c2,u2,l,f2,h2,e22;Bm.prototype.decode=function(e){if(e=e&&e.buffer||e,yq.call(e)!==My)throw Error("Failed to execute 'decode' on 'TextDecoder': The provided value is not of type '(ArrayBuffer or ArrayBufferView)'");for(var t="",n=0,r=0|(e=Mk?new Nk(e):e).length;n<r;n=n+32768|0)t+=Ud.apply(0,e[Mk?"slice":"subarray"](n,n+32768|0));return t.replace(/[\xc0-\xff][\x80-\xbf]*/g,bu)},window.TextDecoder||(window.TextDecoder=Bm),Cm.prototype.encode=function(e){for(var t=0|(e=void 0===e?"":(""+e).replace(/[\x80-\uD7ff\uDC00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]?/g,du)).length,n=new Nk(t),r=0;r<t;r=r+1|0)n[r]=e.charCodeAt(r);return n},window.TextEncoder||(window.TextEncoder=Cm),e2=Ok||(Ok={}),(n=t2||(t2={})).LOGIN="LOGIN",n.LOGIN_SUCCESS="LOGIN_SUCCESS",n.LOGIN_FAILURE="LOGIN_FAILURE",n.LOGIN_TIMEOUT="LOGIN_TIMEOUT",n.INTERRUPTED="INTERRUPTED",n.LOGOUT="LOGOUT",n.BANNED_BY_SERVER="BANNED_BY_SERVER",n.REMOTE_LOGIN="REMOTE_LOGIN",n.TOKEN_EXPIRED="TOKEN_EXPIRED",e2.ConnectionChangeReason=t2,(e22=r||(r={})).DISCONNECTED="DISCONNECTED",e22.CONNECTING="CONNECTING",e22.CONNECTED="CONNECTED",e22.RECONNECTING="RECONNECTING",e22.ABORTED="ABORTED",e2.ConnectionState=r,function(e){e.IDLE="IDLE",e.SENT_TO_REMOTE="SENT_TO_REMOTE",e.RECEIVED_BY_REMOTE="RECEIVED_BY_REMOTE",e.ACCEPTED_BY_REMOTE="ACCEPTED_BY_REMOTE",e.REFUSED_BY_REMOTE="REFUSED_BY_REMOTE",e.CANCELED="CANCELED",e.FAILURE="FAILURE"}(o2||(o2={})),e2.LocalInvitationState=o2,function(e){e.INVITATION_RECEIVED="INVITATION_RECEIVED",e.ACCEPT_SENT_TO_LOCAL="ACCEPT_SENT_TO_LOCAL",e.REFUSED="REFUSED",e.ACCEPTED="ACCEPTED",e.CANCELED="CANCELED",e.FAILURE="FAILURE"}(i2||(i2={})),e2.RemoteInvitationState=i2,function(e){e.UNKNOWN="UNKNOWN",e.PEER_NO_RESPONSE="PEER_NO_RESPONSE",e.INVITATION_EXPIRE="INVITATION_EXPIRE",e.PEER_OFFLINE="PEER_OFFLINE",e.NOT_LOGGEDIN="NOT_LOGGEDIN"}(s||(s={})),e2.LocalInvitationFailureReason=s,function(e){e.UNKNOWN="UNKNOWN",e.PEER_OFFLINE="PEER_OFFLINE",e.ACCEPT_FAILURE="ACCEPT_FAILURE",e.INVITATION_EXPIRE="INVITATION_EXPIRE"}(a2||(a2={})),e2.RemoteInvitationFailureReason=a2,function(e){e.ONLINE="ONLINE",e.UNREACHABLE="UNREACHABLE",e.OFFLINE="OFFLINE"}(c2||(c2={})),e2.PeerOnlineState=c2,(u2||(u2={})).ONLINE_STATUS="ONLINE_STATUS",e2.PeerSubscriptionOption=u2,function(e){e.TEXT="TEXT",e.RAW="RAW"}(l||(l={})),e2.MessageType=l,function(e){e.CN="CN",e.NA="NA",e.EU="EU",e.AS="AS",e.JP="JP",e.IN="IN",e.GLOB="GLOB",e.OC="OC",e.SA="SA",e.AF="AF",e.OVS="OVS"}(f2||(f2={})),e2.LegacyAreaCode=f2,function(e){e.GLOBAL="GLOBAL",e.INDIA="INDIA",e.JAPAN="JAPAN",e.ASIA="ASIA",e.EUROPE="EUROPE",e.CHINA="CHINA",e.NORTH_AMERICA="NORTH_AMERICA"}(h2||(h2={})),e2.AreaCode=h2;var ta=Ok;ea({target:"Array",proto:!0},{includes:function(e){return qo(this,e,1<arguments.length?arguments[1]:void 0)}}),ng("includes");var Pk=function(e){if(Lj(e))throw TypeError("The method doesn't accept regular expressions");return e},Ny=Fa("match"),Qk=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[Ny]=!1,"/./"[e](t)}catch(e22){}}return!1};ea({target:"String",proto:!0,forced:!Qk("includes")},{includes:function(e){return!!~String(Eb(this)).indexOf(Pk(e),1<arguments.length?arguments[1]:void 0)}});var Ec={RECONNECTING_AP_INTERVAL:2500,RECONNECTING_AP_NUM:2,DISABLE_MESSAGE_COMPRESSION:!1,LOG_UPLOAD_INTERVAL:3e3,LOG_HANDLER:void 0,ENABLE_EDGE_AUTO_FALLBACK:!0};$h("iterator"),$h("asyncIterator");var Rk=ff("forEach")?[].forEach:function(e){return fe(this,e,1<arguments.length?arguments[1]:void 0)},zq;for(zq in wk){var Aq=R[zq],bi=Aq&&Aq.prototype;if(bi&&bi.forEach!==Rk)try{kb(bi,"forEach",Rk)}catch(c2){bi.forEach=Rk}}var Oy=[].reverse,Bq=[1,2];ea({target:"Array",proto:!0,forced:String(Bq)===String(Bq.reverse())},{reverse:function(){return Ed(this)&&(this.length=this.length),Oy.call(this)}});var N=xb((function(e){e=function(e){function t(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}function n(e,t,n,i){return t=Object.create((t&&t.prototype instanceof o?t:o).prototype),i=new A(i||[]),t._invoke=function(e,t,n){var o=b;return function(i,a){if(o===S)throw Error("Generator is already running");if(o===w){if("throw"===i)throw a;return h()}for(n.method=i,n.arg=a;;){if((i=n.delegate)&&(i=l(i,n))){if(i===T)continue;return i}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===b)throw o=w,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);if(o=S,"normal"===(i=r(e,t,n)).type){if(o=n.done?w:C,i.arg===T)continue;return{value:i.arg,done:n.done}}"throw"===i.type&&(o=w,n.method="throw",n.arg=i.arg)}}}(e,n,i),t}function r(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(r){return{type:"throw",arg:r}}}function o(){}function i(){}function a(){}function s(e){["next","throw","return"].forEach((function(n){t(e,n,(function(e){return this._invoke(n,e)}))}))}function c(e,t){function n(o,i,a,s){if("throw"!==(o=r(e[o],e,i)).type){var c=o.arg;return(o=c.value)&&"object"===qa(o)&&m.call(o,"__await")?t.resolve(o.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(o).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(o.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function l(e,t){var n=e.iterator[t.method];if(n===f){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=f,l(e,t),"throw"===t.method))return T;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return T}return"throw"===(n=r(n,e.iterator,t.arg)).type?(t.method="throw",t.arg=n.arg,t.delegate=null,T):(n=n.arg)?n.done?(t[e.resultName]=n.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=f),t.delegate=null,T):n:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,T)}function u(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function d(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(u,this),this.reset(!0)}function p(e){if(e){var t=e[E];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1;return(t=function t(){for(;++n<e.length;)if(m.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=f,t.done=!0,t}).next=t}}return{next:h}}function h(){return{value:f,done:!0}}var f,g=Object.prototype,m=g.hasOwnProperty,_="function"==typeof Symbol?Symbol:{},E=_.iterator||"@@iterator",v=_.asyncIterator||"@@asyncIterator",y=_.toStringTag||"@@toStringTag";try{t({},"")}catch(O){t=function(e,t,n){return e[t]=n}}e.wrap=n;var b="suspendedStart",C="suspendedYield",S="executing",w="completed",T={};t(_={},E,(function(){return this}));var I=Object.getPrototypeOf;(I=I&&I(I(p([]))))&&I!==g&&m.call(I,E)&&(_=I);var R=a.prototype=o.prototype=Object.create(_);return i.prototype=a,t(R,"constructor",a),t(a,"constructor",i),i.displayName=t(a,y,"GeneratorFunction"),e.isGeneratorFunction=function(e){return!!(e="function"==typeof e&&e.constructor)&&(e===i||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,a):(e.__proto__=a,t(e,y,"GeneratorFunction")),e.prototype=Object.create(R),e},e.awrap=function(e){return{__await:e}},s(c.prototype),t(c.prototype,v,(function(){return this})),e.AsyncIterator=c,e.async=function(t,r,o,i,a){void 0===a&&(a=Promise);var s=new c(n(t,r,o,i),a);return e.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},s(R),t(R,y,"Generator"),t(R,E,(function(){return this})),t(R,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t,n=[];for(t in e)n.push(t);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=p,A.prototype={constructor:A,reset:function(e){if(this.next=this.prev=0,this.sent=this._sent=f,this.done=!1,this.delegate=null,this.method="next",this.arg=f,this.tryEntries.forEach(d),!e)for(var t in this)"t"===t.charAt(0)&&m.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=f)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,r){return i.type="throw",i.arg=e,n.next=t,r&&(n.method="next",n.arg=f),!!r}if(this.done)throw e;for(var n=this,r=this.tryEntries.length-1;0<=r;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var a=m.call(o,"catchLoc"),s=m.call(o,"finallyLoc");if(a&&s){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return t(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&m.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}return o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null),(n=o?o.completion:{}).type=e,n.arg=t,o?(this.method="next",this.next=o.finallyLoc,T):this.complete(n)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),T},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),d(n),T}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.tryLoc===e){if("throw"===(e=n.completion).type){var r=e.arg;d(n)}return r}}throw Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:p(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=f),T}},e}(e.exports);try{regeneratorRuntime=e}catch(t2){"object"===("undefined"==typeof globalThis?"undefined":qa(globalThis))?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}})),Cq=!la((function(){return Object.isExtensible(Object.preventExtensions({}))})),Sk=xb((function(e){var t=qb.f,n=af("meta"),r=0,o=Object.isExtensible||function(){return!0},i=function(e){t(e,n,{value:{objectID:"O"+ ++r,weakData:{}}})},a=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!xa(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!ka(e,n)){if(!o(e))return"F";if(!t)return"E";i(e)}return e[n].objectID},getWeakData:function(e,t){if(!ka(e,n)){if(!o(e))return!0;if(!t)return!1;i(e)}return e[n].weakData},onFreeze:function(e){return Cq&&a.REQUIRED&&o(e)&&!ka(e,n)&&i(e),e}};bf[n]=!0})),Dq=function(e,t,n){var r=-1!==e.indexOf("Map"),o=-1!==e.indexOf("Weak"),i=r?"set":"add",a=R[e],s=a&&a.prototype,c=a,l={},u=function(e){var t=s[e];Za(s,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(o&&!xa(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return o&&!xa(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(o&&!xa(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})};if(Qc(e,"function"!=typeof a||!(o||s.forEach&&!la((function(){(new a).entries().next()})))))c=n.getConstructor(t,e,r,i),Sk.REQUIRED=!0;else if(Qc(e,!0)){var d=new c,A=d[i](o?{}:-0,1)!=d,p=la((function(){d.has(1)})),h=Eh((function(e){new a(e)})),f=!o&&la((function(){for(var e=new a,t=5;t--;)e[i](t,t);return!e.has(-0)}));h||((c=t((function(t,n){return Ac(t,c,e),t=Wh(new a,t,c),null!=n&&Jh(n,t[i],{that:t,AS_ENTRIES:r}),t}))).prototype=s,s.constructor=c),(p||f)&&(u("delete"),u("has"),r&&u("get")),(f||A)&&u(i),o&&s.clear&&delete s.clear}return l[e]=c,ea({global:!0,forced:c!=a},l),zc(c,e),o||n.setStrong(c,e,r),c},Py=qb.f,Eq=Sk.fastKey,Fq=cb.set,Tk=cb.getterFor,Gq={getConstructor:function(e,t,n,r){var o=e((function(e,i){Ac(e,o,t),Fq(e,{type:t,index:jc(null),first:void 0,last:void 0,size:0}),wa||(e.size=0),null!=i&&Jh(i,e[r],{that:e,AS_ENTRIES:n})})),i=Tk(t),a=function(e,t,n){var r,o=i(e),a=s(e,t);return a?a.value=n:(o.last=a={index:r=Eq(t,!0),key:t,value:n,previous:t=o.last,next:void 0,removed:!1},o.first||(o.first=a),t&&(t.next=a),wa?o.size++:e.size++,"F"!==r&&(o.index[r]=a)),e},s=function(e,t){e=i(e);var n=Eq(t);if("F"!==n)return e.index[n];for(e=e.first;e;e=e.next)if(e.key==t)return e};return kf(o.prototype,{clear:function(){for(var e=i(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,wa?e.size=0:this.size=0},delete:function(e){var t=i(this);if(e=s(this,e)){var n=e.next,r=e.previous;delete t.index[e.index],e.removed=!0,r&&(r.next=n),n&&(n.previous=r),t.first==e&&(t.first=n),t.last==e&&(t.last=r),wa?t.size--:this.size--}return!!e},forEach:function(e){for(var t,n=i(this),r=Dd(e,1<arguments.length?arguments[1]:void 0,3);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!s(this,e)}}),kf(o.prototype,n?{get:function(e){return(e=s(this,e))&&e.value},set:function(e,t){return a(this,0===e?0:e,t)}}:{add:function(e){return a(this,e=0===e?0:e,e)}}),wa&&Py(o.prototype,"size",{get:function(){return i(this).size}}),o},setStrong:function(e,t,n){var r=t+" Iterator",o=Tk(t),i=Tk(r);Wj(e,t,(function(e,t){Fq(this,{type:r,target:e,state:o(e),kind:t,last:void 0})}),(function(){for(var e=i(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),og(t)}};Dq("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),Gq);var Uk=Pc("Reflect","apply"),Qy=Function.apply,Ry=!la((function(){Uk((function(){}))}));ea({target:"Reflect",stat:!0,forced:Ry},{apply:function(e,t,n){return Wb(e),Ia(n),Uk?Uk(e,t,n):Qy.call(e,t,n)}}),ea({target:"Reflect",stat:!0},{ownKeys:so});var Hq=Fa("isConcatSpreadable"),Sy=51<=Cd||!la((function(){var e=[];return e[Hq]=!1,e.concat()[0]!==e})),Ty=kg("concat");ea({target:"Array",proto:!0,forced:!Sy||!Ty},{concat:function(e){var t,n=pb(this),r=Dh(n,0),o=0,i=-1;for(t=arguments.length;i<t;i++){var a=-1===i?n:arguments[i],s=a;if(xa(s)){var c=s[Hq];s=void 0!==c?!!c:Ed(s)}else s=!1;if(s){if(9007199254740991<o+(c=Ma(a.length)))throw TypeError("Maximum allowed index exceeded");for(s=0;s<c;s++,o++)s in a&&hf(r,o,a[s])}else{if(9007199254740991<=o)throw TypeError("Maximum allowed index exceeded");hf(r,o++,a)}}return r.length=o,r}});var Uy=Bk,Vy=la((function(){return!Object.getOwnPropertyNames(1)}));ea({target:"Object",stat:!0,forced:Vy},{getOwnPropertyNames:Uy});var Wy=de.f,Xy=dc.f,Yy=qb.f,Kd=R.Number,ci=Kd.prototype,Zy="Number"==xc(jc(ci)),Iq=function(e){var t,n=Oc(e,!1);if("string"==typeof n&&2<n.length)if(43===(e=(n=Oj(n)).charCodeAt(0))||45===e){if(88===(e=n.charCodeAt(2))||120===e)return NaN}else if(48===e){switch(n.charCodeAt(1)){case 66:case 98:e=2;var r=49;break;case 79:case 111:e=8,r=55;break;default:return+n}var o=(n=n.slice(2)).length;for(t=0;t<o;t++){var i=n.charCodeAt(t);if(48>i||i>r)return NaN}return parseInt(n,e)}return+n};if(Qc("Number",!Kd(" 0o1")||!Kd("0b1")||Kd("+0x1"))){for(var le=function(e){var t=1>arguments.length?0:e,n=this;return n instanceof le&&(Zy?la((function(){ci.valueOf.call(n)})):"Number"!=xc(n))?Wh(new Kd(Iq(t)),n,le):Iq(t)},Jq=wa?Wy(Kd):"MAX_VALUE MIN_VALUE NaN NEGATIVE_INFINITY POSITIVE_INFINITY EPSILON isFinite isInteger isNaN isSafeInteger MAX_SAFE_INTEGER MIN_SAFE_INTEGER parseFloat parseInt isInteger fromString range".split(" "),Vk=0,di;Jq.length>Vk;Vk++)ka(Kd,di=Jq[Vk])&&!ka(le,di)&&Yy(le,di,Xy(Kd,di));le.prototype=ci,ci.constructor=le,Za(R,"Number",le)}var sf="object"===("undefined"==typeof Reflect?"undefined":qa(Reflect))?Reflect:null,Kq=sf&&"function"==typeof sf.apply?sf.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},$y=sf&&"function"==typeof sf.ownKeys?sf.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)},Lq=Number.isNaN||function(e){return e!=e};Ba.EventEmitter=Ba,Ba.prototype._events=void 0,Ba.prototype._eventsCount=0,Ba.prototype._maxListeners=void 0;var Mq=10;Object.defineProperty(Ba,"defaultMaxListeners",{enumerable:!0,get:function(){return Mq},set:function(e){if("number"!=typeof e||0>e||Lq(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");Mq=e}}),Ba.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Ba.prototype.setMaxListeners=function(e){if("number"!=typeof e||0>e||Lq(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},Ba.prototype.getMaxListeners=function(){return void 0===this._maxListeners?Ba.defaultMaxListeners:this._maxListeners},Ba.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);n="error"===e;var r=this._events;if(void 0!==r)n=n&&void 0===r.error;else if(!n)return!1;if(n){var o;if(0<t.length&&(o=t[0]),o instanceof Error)throw o;throw(t=Error("Unhandled error."+(o?" ("+o.message+")":""))).context=o,t}if(void 0===(n=r[e]))return!1;if("function"==typeof n)Kq(n,this,t);else for(r=Gm(n,o=n.length),n=0;n<o;++n)Kq(r[n],this,t);return!0},Ba.prototype.addListener=function(e,t){return Dm(this,e,t,!1)},Ba.prototype.on=Ba.prototype.addListener,Ba.prototype.prependListener=function(e,t){return Dm(this,e,t,!0)},Ba.prototype.once=function(e,t){return Wg(t),this.on(e,Em(this,e,t)),this},Ba.prototype.prependOnceListener=function(e,t){return Wg(t),this.prependListener(e,Em(this,e,t)),this},Ba.prototype.removeListener=function(e,t){var n;Wg(t);var r=this._events;if(void 0===r)return this;var o=r[e];if(void 0===o)return this;if(o===t||o.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,o.listener||t));else if("function"!=typeof o){var i=-1;for(n=o.length-1;0<=n;n--)if(o[n]===t||o[n].listener===t){var a=o[n].listener;i=n;break}if(0>i)return this;if(0===i)o.shift();else{for(;i+1<o.length;i++)o[i]=o[i+1];o.pop()}1===o.length&&(r[e]=o[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},Ba.prototype.off=Ba.prototype.removeListener,Ba.prototype.removeAllListeners=function(e){var t=this._events;if(void 0===t)return this;if(void 0===t.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==t[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete t[e]),this;if(0===arguments.length){var n=Object.keys(t);for(t=0;t<n.length;++t){var r=n[t];"removeListener"!==r&&this.removeAllListeners(r)}return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(n=t[e]))this.removeListener(e,n);else if(void 0!==n)for(t=n.length-1;0<=t;t--)this.removeListener(e,n[t]);return this},Ba.prototype.listeners=function(e){return Fm(this,e,!0)},Ba.prototype.rawListeners=function(e){return Fm(this,e,!1)},Ba.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):Hm.call(e,t)},Ba.prototype.listenerCount=Hm,Ba.prototype.eventNames=function(){return 0<this._eventsCount?$y(this._events):[]},Ba.once=function(e,t){return new Promise((function(n,r){function o(n){e.removeListener(t,i),r(n)}function i(){"function"==typeof e.removeListener&&e.removeListener("error",o),n([].slice.call(arguments))}Im(e,t,i,{once:!0}),"error"!==t&&fu(e,o,{once:!0})}))};var tf=Object.assign,Nq=Object.defineProperty,Bg=!tf||la((function(){if(wa&&1!==tf({b:1},tf(Nq({},"a",{enumerable:!0,get:function(){Nq(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol();return e[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(e){t[e]=e})),7!=tf({},e)[n]||"abcdefghijklmnopqrst"!=ed(tf({},t)).join("")}))?function(e,t){for(var n=pb(e),r=arguments.length,o=1,i=gg.f,a=eg;r>o;)for(var s,c=fg(arguments[o++]),l=i?ed(c).concat(i(c)):ed(c),u=l.length,d=0;u>d;)s=l[d++],(!wa||a.call(c,s))&&(n[s]=c[s]);return n}:tf;ea({target:"Object",stat:!0,forced:Object.assign!==Bg},{assign:Bg}),Dq("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),Gq);var az=Math.log,bz=Math.LN2;ea({target:"Math",stat:!0},{log2:function(e){return az(e)/bz}});var cz=qb.f,dz=de.f,ez=cb.enforce,fz=Fa("match"),Vc=R.RegExp,Wk=Vc.prototype,Cg=/a/g,Xk=/a/g,Yk=new Vc(Cg)!==Cg;if(wa&&Qc("RegExp",!Yk||Rc||la((function(){return Xk[fz]=!1,Vc(Cg)!=Cg||Vc(Xk)==Xk||"/a/i"!=Vc(Cg,"i")})))){for(var ld=function(e,t){var n,r=this instanceof ld,o=Lj(e),i=void 0===t;return!r&&o&&e.constructor===ld&&i||(Yk?o&&!i&&(e=e.source):e instanceof ld&&(i&&(t=Gj.call(e)),e=e.source),Rc&&(n=!!t&&-1<t.indexOf("y"))&&(t=t.replace(/y/g,"")),e=Wh(Yk?new Vc(e,t):Vc(e,t),r?this:Wk,ld),Rc&&n&&(ez(e).sticky=!0)),e},gz=function(e){e in ld||cz(ld,e,{configurable:!0,get:function(){return Vc[e]},set:function(t){Vc[e]=t}})},Oq=dz(Vc),Pq=0;Oq.length>Pq;)gz(Oq[Pq++]);Wk.constructor=ld,ld.prototype=Wk,Za(R,"RegExp",ld)}og("RegExp"),xg("Float32",(function(e){return function(t,n,r){return e(this,t,n,r)}})),xg("Float64",(function(e){return function(t,n,r){return e(this,t,n,r)}})),xg("Uint32",(function(e){return function(t,n,r){return e(this,t,n,r)}})),xg("Uint16",(function(e){return function(t,n,r){return e(this,t,n,r)}}));var Zk=function(e,t){return e===t?0:null==e?null==t?0:-1:null==t?null==e?0:1:"function"==typeof e.compare?e.compare(t):"function"==typeof t.compare?-t.compare(e):e<t?-1:e>t?1:0},$k=[],Qq=$k.sort,hz=la((function(){$k.sort(void 0)})),iz=la((function(){$k.sort(null)})),jz=ff("sort");ea({target:"Array",proto:!0,forced:hz||!iz||!jz},{sort:function(e){return void 0===e?Qq.call(pb(this)):Qq.call(pb(this),Wb(e))}});var Rq=Object.getPrototypeOf({}),Dg=function(e,t){var n;return e===t||(null==e?e==t:"function"===qa(e.equiv)?e.equiv(t):null==t?e==t:"function"===qa(t.equiv)?t.equiv(e):"string"!==qa(e)&&"string"!==qa(t)&&(null!=(n=Object.getPrototypeOf(e))&&n!==Rq||null!=(n=Object.getPrototypeOf(t))&&n!==Rq?"function"!==qa(e)&&void 0!==e.length&&"function"!==qa(t)&&void 0!==t.length?lz(e,t):e instanceof Set&&t instanceof Set?mz(e,t):e instanceof Map&&t instanceof Map?nz(e,t):e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():e instanceof RegExp&&t instanceof RegExp?e.toString()===t.toString():e!=e&&t!=t:kz(e,t)))},lz=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Dg,r=e.length;if(r===t.length)for(;0<=--r&&n(e[r],t[r]););return 0>r},mz=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Dg;return e.size===t.size&&n(Z(e.keys()).sort(),Z(t.keys()).sort())},nz=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Dg;return e.size===t.size&&n(Z(e).sort(),Z(t).sort())},kz=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Dg;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var r in e)if(!t.hasOwnProperty(r)||!n(e[r],t[r]))return!1;return!0},Sq=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(e){return void 0!==e?": "+e:""};return function(n){function r(n){return va(this,r),o.call(this,e(n)+t(n))}Ga(r,n);var o=Ha(r);return r}(Kf(Error))},oz=Sq((function(){return"illegal argument(s)"})),ei=function(e){throw new oz(e)},al=Sq((function(){return"index out of bounds"})),Tq=1/4294967295,pz=function(){function e(){va(this,e)}return eb(e,[{key:"float",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return this.int()*Tq*e}},{key:"norm",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return 2*(this.int()*Tq-.5)*e}},{key:"minmax",value:function(e,t){return this.float()*(t-e)+e}}]),e}(),bl=Math.random,qz=new(function(e){function t(){return va(this,t),n.apply(this,arguments)}Ga(t,e);var n=Ha(t);return eb(t,[{key:"int",value:function(){return 4294967296*bl()>>>0}},{key:"float",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return bl()*e}},{key:"norm",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return 2*(bl()-.5)*e}}]),t}(pz)),Ni=Symbol(),Lm=function(){},rz=Sk.onFreeze,cl=Object.freeze,sz=la((function(){cl(1)}));ea({target:"Object",stat:!0,forced:sz,sham:!Cq},{freeze:function(e){return cl&&xa(e)?cl(rz(e)):e}});var tz=ff("reduce"),uz=!fd&&79<Cd&&83>Cd;ea({target:"Array",proto:!0,forced:!tz||uz},{reduce:function(e){return $p(this,e,arguments.length,1<arguments.length?arguments[1]:void 0)}});var Km=function(e){return null!=e&&"function"==typeof e.xform?e.xform():e},Xg=function(){function e(t){va(this,e),this.value=t}return eb(e,[{key:"deref",value:function(){return this.value}}]),e}(),Oi=function(e){return e instanceof Xg?e.deref():e},hu=function(e,t){return[e,function(e){return e},t]},vz=N.mark((function(e,t){var n,r,o,i,a,s;return N.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:n=Km(e)(gu()),r=n[1],o=n[2],i=0;case 4:if(!(i<t.length)){c.next=15;break}if(a=t[i],!((s=o([],a))instanceof Xg)){c.next=10;break}return c.delegateYield(Oi(r(s.deref())),"t0",9);case 9:return c.abrupt("return");case 10:if(!s.length){c.next=12;break}return c.delegateYield(s,"t1",12);case 12:i++,c.next=4;break;case 15:return c.delegateYield(Oi(r([])),"t2",16);case 16:case"end":return c.stop()}}),vz)})),iu=N.mark(Jm),ju=function(e,t){return[e[0],e[1],t]},wz=function(){function e(t){va(this,e),this._length=0,t&&this.into(t)}return eb(e,[{key:"length",get:function(){return this._length}},{key:"copy",value:function(){return new e(this)}},{key:"empty",value:function(){return new e}},{key:"clear",value:function(){this.release()}},{key:"release",value:function(){for(var e,t=this.head;t;)e=t.next,delete t.value,delete t.prev,delete t.next,t=e;return delete this.head,delete this.tail,this._length=0,!0}},{key:"compare",value:function(e){var t=this._length;if(t<e._length)return-1;if(t>e._length)return 1;if(0===t)return 0;t=this.head,e=e.head;for(var n=0;t&&0==n;)n=Zk(t.value,e.value),t=t.next,e=e.next;return n}},{key:"equiv",value:function(t){if(!(t instanceof e||null!=t&&"function"!=typeof t&&void 0!==t.length)||this._length!==t.length)return!1;if(!this._length||this===t)return!0;for(var n=this.head,r=0;r<t.length;r++){if(!Dg(n.value,t[r]))return!1;n=n.next}return!0}},{key:Symbol.iterator,value:N.mark((function e(){var t;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.head;case 1:if(!t){e.next=7;break}return e.next=4,t.value;case 4:t=t.next,e.next=1;break;case 7:case"end":return e.stop()}}),e,this)}))},{key:"seq",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.length;if(!(e>=t||0>e)){e=this.nthCell(e);var n=this.nthCell(t-1);return t=function e(t){return{first:function(){return t.value},next:function(){return t!==n&&t.next?e(t.next):void 0}}},e?t(e):void 0}}},{key:"cycle",value:N.mark((function e(){return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this,"t0",2);case 2:e.next=0;break;case 4:case"end":return e.stop()}}),e,this)}))},{key:"$reduce",value:function(e,t){for(var n=this.head;n&&!(t instanceof Xg);)t=e(t,n.value),n=n.next;return t}},{key:"drop",value:function(){var e=this.head;if(e)return(this.head=e.next)?delete this.head.prev:delete this.tail,this._length--,e.value}},{key:"cons",value:function(e){return e={value:e,next:this.head},this.head?this.head.prev=e:this.tail=e,this.head=e,this._length++,this}},{key:"insertBefore",value:function(e,t){return e||ei("cell is undefined"),t={value:t,next:e,prev:e.prev},e.prev?e.prev.next=t:this.head=t,e.prev=t,this._length++,this}},{key:"insertAfter",value:function(e,t){return e||ei("cell is undefined"),t={value:t,next:e.next,prev:e},e.next?e.next.prev=t:this.tail=t,e.next=t,this._length++,this}},{key:"insertBeforeNth",value:function(e,t){if(0>e&&(e+=this._length),0>=e)return this.cons(t);if(0>e||e>=this._length)throw new al(e);return this.insertBefore(this.nthCellUnsafe(e),t)}},{key:"insertAfterNth",value:function(e,t){if(0>e&&(e+=this._length),e>=this._length-1)return this.push(t);if(0>e||e>=this._length)throw new al(e);return this.insertAfter(this.nthCellUnsafe(e),t)}},{key:"insertSorted",value:function(e,t){t=t||Zk;for(var n=this.head;n;){if(0>=t(e,n.value))return this.insertBefore(n,e);n=n.next}return this.push(e)}},{key:"find",value:function(e){for(var t=this.head;t;){if(t.value===e)return t;t=t.next}}},{key:"findWith",value:function(e){for(var t=this.head;t;){if(e(t.value))return t;t=t.next}}},{key:"concat",value:function(){for(var e=this.copy(),t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];for(t=0;t<n.length;t++)e.into(n[t]);return e}},{key:"into",value:function(e){for(var t=0;t<e.length;t++)this.push(e[t])}},{key:"slice",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.length;t=0>t?t+this._length:t,n=0>n?n+this._length:n,(0>t||0>n)&&ei("invalid indices: ${from} / ${to}");for(var r=new e,o=this.nthCell(t);o&&++t<=n;)r.push(o.value),o=o.next;return r}},{key:"splice",value:function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length?arguments[2]:void 0;if("number"==typeof t){if(0>t&&(t+=this._length),0>t||t>=this._length)throw new al(t);var o=this.nthCellUnsafe(t)}else o=t;var i=new e;if(0<n)for(;o&&0<n--;)this.remove(o),i.push(o.value),o=o.next;else o&&(o=o.next);if(r)if(o)for(n=0;n<r.length;n++)this.insertBefore(o,r[n]);else for(o=0;o<r.length;o++)this.push(r[o]);return i}},{key:"remove",value:function(e){return e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev,this._length--,this}},{key:"swap",value:function(e,t){if(e!==t){var n=e.value;e.value=t.value,t.value=n}return this}},{key:"push",value:function(e){return this.tail?(e={value:e,prev:this.tail},this.tail=this.tail.next=e,this._length++,this):this.cons(e)}},{key:"pop",value:function(){var e=this.tail;if(e)return(this.tail=e.prev)?delete this.tail.next:delete this.head,this._length--,e.value}},{key:"first",value:function(){return this.head&&this.head.value}},{key:"peek",value:function(){return this.tail&&this.tail.value}},{key:"setHead",value:function(e){return this.head?(this.head.value=e,this):this.cons(e)}},{key:"setTail",value:function(e){return this.tail?(this.tail.value=e,this):this.push(e)}},{key:"setNth",value:function(e,t){var n=this.nthCell(e);return!n&&ei("index out of bounds: ".concat(e)),n.value=t,this}},{key:"nth",value:function(e,t){return(e=this.nthCell(e))?e.value:t}},{key:"nthCell",value:function(e){if(0>e&&(e+=this._length),!(0>e||e>=this._length))return this.nthCellUnsafe(e)}},{key:"rotateLeft",value:function(){switch(this._length){case 0:case 1:return this;case 2:return this.swap(this.head,this.tail);default:return this.push(this.drop())}}},{key:"rotateRight",value:function(){switch(this._length){case 0:case 1:return this;case 2:return this.swap(this.head,this.tail);default:var e=this.peek();return this.pop(),this.cons(e)}}},{key:"map",value:function(t){for(var n=new e,r=this.head;r;)n.push(t(r.value)),r=r.next;return n}},{key:"filter",value:function(t){for(var n=new e,r=this.head;r;)t(r.value)&&n.push(r.value),r=r.next;return n}},{key:"reduce",value:function(e,t){for(var n=this.head;n;)t=e(t,n.value),n=n.next;return t}},{key:"shuffle",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:qz;if(2>this._length)return this;for(e=null!=e?e:Math.ceil(1.5*Math.log2(this._length));0<e;e--)for(var n=this.head;n;){var r=n.next;.5>t.float()?this.asHead(n):this.asTail(n),n=r}return this}},{key:"sort",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Zk;if(!this._length)return this;for(var t=1;;){var n=this.head;this.tail=this.head=void 0;for(var r=0;n;){r++;for(var o=n,i=0,a=0;a<t&&(i++,o=o.next);a++);for(a=t;0<i||0<a&&o;){if(0===i){var s=o;o=o.next,a--}else o&&0!==a?0>=e(n.value,o.value)?(s=n,n=n.next,i--):(s=o,o=o.next,a--):(s=n,n=n.next,i--);this.tail?this.tail.next=s:this.head=s,s.prev=this.tail,this.tail=s}n=o}if(this.tail.next=void 0,1>=r)return this;t*=2}}},{key:"reverse",value:function(){for(var e=this.head,t=this.tail,n=(this._length>>>1)+(1&this._length);e&&t&&0<n;){var r=e.value;e.value=t.value,t.value=r,e=e.next,t=t.prev,n--}return this}},{key:"asHead",value:function(e){return e===this.head||(this.remove(e),this.head.prev=e,e.next=this.head,e.prev=void 0,this.head=e,this._length++),this}},{key:"asTail",value:function(e){return e===this.tail||(this.remove(e),this.tail.next=e,e.prev=this.tail,e.next=void 0,this.tail=e,this._length++),this}},{key:"toString",value:function(){for(var e=[],t=this.head;t;)e.push(String(t.value)),t=t.next;return e.join(", ")}},{key:"toJSON",value:function(){return Z(this)}},{key:"nthCellUnsafe",value:function(e){if(e<=this._length>>1)var t=this.head,n="next";else t=this.tail,n="prev",e=this._length-e-1;for(;0<e--&&t;)t=t[n];return t}}]),e}(),Wc=function(){function e(t,n){va(this,e),n=Object.assign({maxlen:1/0,maxsize:1/0,map:function(){return new Map},ksize:function(){return 0},vsize:function(){return 0}},n),this.map=n.map(),this.items=new wz,this._size=0,this.opts=n,t&&this.into(t)}return eb(e,[{key:"length",get:function(){return this.items.length}},{key:"size",get:function(){return this._size}},{key:Symbol.iterator,value:function(){return this.entries()}},{key:"entries",value:function(){return Yg((function(e){return[e.k,e]}),this.items)}},{key:"keys",value:function(){return Yg((function(e){return e.k}),this.items)}},{key:"values",value:function(){return Yg((function(e){return e.v}),this.items)}},{key:"copy",value:function(){var e=this.empty();e.items=this.items.copy();for(var t=e.items.head;t;)e.map.set(t.value.k,t),t=t.next;return e}},{key:"empty",value:function(){return new e(null,this.opts)}},{key:"release",value:function(){this._size=0,this.map.clear();var e=this.opts.release;if(e){for(var t;t=this.items.drop();)e(t.k,t.v);return!0}return this.items.release()}},{key:"has",value:function(e){return this.map.has(e)}},{key:"get",value:function(e,t){return(e=this.map.get(e))?this.resetEntry(e):t}},{key:"set",value:function(e,t){var n=this.opts.ksize(e)+this.opts.vsize(t),r=this.map.get(e);return this._size+=Math.max(0,n-(r?r.value.s:0)),this.ensureSize()&&this.doSetEntry(r,e,t,n),t}},{key:"into",value:function(e){for(var t=0;t<e.length;t++){var n=e[t];this.set(n[0],n[1])}return this}},{key:"getSet",value:function(e,t){var n=this,r=this.map.get(e);return r?Promise.resolve(this.resetEntry(r)):t().then((function(t){return n.set(e,t)}))}},{key:"delete",value:function(e){return!!(e=this.map.get(e))&&(this.removeEntry(e),!0)}},{key:"resetEntry",value:function(e){return this.items.asTail(e),e.value.v}},{key:"ensureSize",value:function(){for(var e=this.opts.release,t=this.opts.maxsize,n=this.opts.maxlen;this._size>t||this.length>=n;){var r=this.items.drop();if(!r)return!1;this.map.delete(r.k),e&&e(r.k,r.v),this._size-=r.s}return!0}},{key:"removeEntry",value:function(e){var t=e.value;this.map.delete(t.k),this.items.remove(e),this.opts.release&&this.opts.release(t.k,t.v),this._size-=t.s}},{key:"doSetEntry",value:function(e,t,n,r){e?(e.value.v=n,e.value.s=r,this.items.asTail(e)):(this.items.push({k:t,v:n,s:r}),this.map.set(t,this.items.tail))}}]),e}(),xz=function(e){function t(e,r){return va(this,t),r=Object.assign({ttl:36e5},r),n.call(this,e,r)}Ga(t,e);var n=Ha(t);return eb(t,[{key:"empty",value:function(){return new t(null,this.opts)}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"get",value:function(e,t){if(e=this.map.get(e)){if(e.value.t>=Date.now())return this.resetEntry(e);this.removeEntry(e)}return t}},{key:"set",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.opts.ttl,r=this.opts.ksize(e)+this.opts.vsize(t),o=this.map.get(e);return this._size+=Math.max(0,r-(o?o.value.s:0)),this.ensureSize()&&(n=Date.now()+n,o?(o.value.v=t,o.value.s=r,o.value.t=n,this.items.asTail(o)):(this.items.push({k:e,v:t,s:r,t:n}),this.map.set(e,this.items.tail))),t}},{key:"getSet",value:function(e,t){var n=this,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.opts.ttl,o=this.get(e);return o?Promise.resolve(o):t().then((function(t){return n.set(e,t,r)}))}},{key:"prune",value:function(){for(var e=Date.now(),t=this.items.head;t;)t.value.t<e&&this.removeEntry(t),t=t.next}},{key:"ensureSize",value:function(){for(var e=this.opts.maxsize,n=this.opts.maxlen,r=Date.now(),o=this.items.head;o&&(this._size>e||this.length>=n);)o.value.t<r&&this.removeEntry(o),o=o.next;return Li(Td(t.prototype),"ensureSize",this).call(this)}}]),t}(Wc),Uq="object"==qa(Ya)&&Ya&&Ya.Object===Object&&Ya,yz="object"==("undefined"==typeof self?"undefined":qa(self))&&self&&self.Object===Object&&self,$b=Uq||yz||Function("return this")(),lc=$b.Symbol,Vq=Object.prototype,zz=Vq.hasOwnProperty,Az=Vq.toString,Eg=lc?lc.toStringTag:void 0,Bz=Object.prototype.toString,Wq=lc?lc.toStringTag:void 0,me=function(e){if(null==e)e=void 0===e?"[object Undefined]":"[object Null]";else if(Wq&&Wq in Object(e)){var t=zz.call(e,Eg),n=e[Eg];try{e[Eg]=void 0;var r=!0}catch(e22){}var o=Az.call(e);r&&(t?e[Eg]=n:delete e[Eg]),e=o}else e=Bz.call(e);return e},Gb=function(e){var t=qa(e);return null!=e&&("object"==t||"function"==t)},jj=function(e){return!!Gb(e)&&("[object Function]"==(e=me(e))||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e)},dl=$b["__core-js_shared__"],Xq=function(){var e=/[^.]+$/.exec(dl&&dl.keys&&dl.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Cz=Function.prototype.toString,ne=function(e){if(null!=e){try{return Cz.call(e)}catch(e22){}return e+""}return""},Dz=/^\[object .+?Constructor\]$/,Ez=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),oe=function(e,t){return e=null==e?void 0:e[t],!Gb(e)||Xq&&Xq in e||!(jj(e)?Ez:Dz).test(ne(e))?void 0:e},Fg=oe(Object,"create"),Fz=Object.prototype.hasOwnProperty,Gz=Object.prototype.hasOwnProperty;Vd.prototype.clear=function(){this.__data__=Fg?Fg(null):{},this.size=0},Vd.prototype.delete=function(e){return e=this.has(e)&&delete this.__data__[e],this.size-=e?1:0,e},Vd.prototype.get=function(e){var t=this.__data__;return Fg?"__lodash_hash_undefined__"===(e=t[e])?void 0:e:Fz.call(t,e)?t[e]:void 0},Vd.prototype.has=function(e){var t=this.__data__;return Fg?void 0!==t[e]:Gz.call(t,e)},Vd.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Fg&&void 0===t?"__lodash_hash_undefined__":t,this};var Gg=function(e,t){return e===t||e!=e&&t!=t},fi=function(e,t){for(var n=e.length;n--;)if(Gg(e[n][0],t))return n;return-1},Hz=Array.prototype.splice;Ee.prototype.clear=function(){this.__data__=[],this.size=0},Ee.prototype.delete=function(e){var t=this.__data__;return!(0>(e=fi(t,e))||(e==t.length-1?t.pop():Hz.call(t,e,1),--this.size,0))},Ee.prototype.get=function(e){var t=this.__data__;return 0>(e=fi(t,e))?void 0:t[e][1]},Ee.prototype.has=function(e){return-1<fi(this.__data__,e)},Ee.prototype.set=function(e,t){var n=this.__data__,r=fi(n,e);return 0>r?(++this.size,n.push([e,t])):n[r][1]=t,this};var $g=Ee,Hg=oe($b,"Map"),gi=function(e,t){e=e.__data__;var n=qa(t);return("string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==t:null===t)?e["string"==typeof t?"string":"hash"]:e.map};Fe.prototype.clear=function(){this.size=0,this.__data__={hash:new Vd,map:new(Hg||$g),string:new Vd}},Fe.prototype.delete=function(e){return e=gi(this,e).delete(e),this.size-=e?1:0,e},Fe.prototype.get=function(e){return gi(this,e).get(e)},Fe.prototype.has=function(e){return gi(this,e).has(e)},Fe.prototype.set=function(e,t){var n=gi(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};var Zg=Fe;Lf.prototype.add=Lf.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Lf.prototype.has=function(e){return this.__data__.has(e)};var Yq=function(e,t,n,r){var o=e.length;for(n+=-1;++n<o;)if(t(e[n],n,e))return n;return-1},Iz=function(e){return e!=e},Jz=function(e,t){var n;if(n=!(null==e||!e.length)){if(t==t)e:{n=-1;for(var r=e.length;++n<r;)if(e[n]===t){e=n;break e}e=-1}else e=Yq(e,Iz,0);n=-1<e}return n},Kz=function(e,t,n){for(var r=-1,o=null==e?0:e.length;++r<o;)if(n(t,e[r]))return!0;return!1},Lz=function(e,t){return e.has(t)},uf=oe($b,"Set"),Mz=function(){},el=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n},Nz=1/0,Oz=uf&&1/el(new uf([,-0]))[1]==Nz?function(e){return new uf(e)}:Mz,fl=function(e,t,n){var r=-1,o=Jz,i=e.length,a=!0,s=[],c=s;if(n)a=!1,o=Kz;else if(200<=i){if(o=Oz(e))return el(o);a=!1,o=Lz,c=new Lf}else c=s;e:for(;++r<i;){var l=e[r],u=l;if(l=n||0!==l?l:0,a&&u==u){for(var d=c.length;d--;)if(c[d]===u)continue e;s.push(l)}else o(c,u,n)||(c!==s&&c.push(u),s.push(l))}return s},Zq=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var o=e[t];r[o[0]]=o[1]}return r},Je=function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o};Ge.prototype.clear=function(){this.__data__=new $g,this.size=0},Ge.prototype.delete=function(e){var t=this.__data__;return e=t.delete(e),this.size=t.size,e},Ge.prototype.get=function(e){return this.__data__.get(e)},Ge.prototype.has=function(e){return this.__data__.has(e)},Ge.prototype.set=function(e,t){var n=this.__data__;if(n instanceof $g){var r=n.__data__;if(!Hg||199>r.length)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Zg(r)}return n.set(e,t),this.size=n.size,this};var Ie=Ge,su=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e},hi=function(){try{var e=oe(Object,"defineProperty");return e({},"",{}),e}catch(e22){}}(),Ig=function(e,t,n){"__proto__"==t&&hi?hi(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},Pz=Object.prototype.hasOwnProperty,Qm=function(e,t,n){var r=e[t];Pz.call(e,t)&&Gg(r,n)&&(void 0!==n||t in e)||Ig(e,t,n)},Ue=function(e,t,n,r){var o=!n;n||(n={});for(var i=-1,a=t.length;++i<a;){var s=t[i],c=void 0;void 0===c&&(c=e[s]),o?Ig(n,s,c):Qm(n,s,c)}return n},Hc=function(e){return null!=e&&"object"==qa(e)},$q=function(e){return Hc(e)&&"[object Arguments]"==me(e)},ar=Object.prototype,Qz=ar.hasOwnProperty,Rz=ar.propertyIsEnumerable,Vf=$q(function(){return arguments}())?$q:function(e){return Hc(e)&&Qz.call(e,"callee")&&!Rz.call(e,"callee")},ub=Array.isArray,Sz=function(){return!1},Nf=xb((function(e,t){var n=(t=t&&!t.nodeType&&t)&&e&&!e.nodeType&&e;t=n&&n.exports===t?$b.Buffer:void 0,e.exports=(t?t.isBuffer:void 0)||Sz})),Tz=/^(?:0|[1-9]\d*)$/,gl=function(e,t){var n=qa(e);return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&Tz.test(e))&&-1<e&&0==e%1&&e<t},hl=function(e){return"number"==typeof e&&-1<e&&0==e%1&&9007199254740991>=e},Va={};Va["[object Float32Array]"]=Va["[object Float64Array]"]=Va["[object Int8Array]"]=Va["[object Int16Array]"]=Va["[object Int32Array]"]=Va["[object Uint8Array]"]=Va["[object Uint8ClampedArray]"]=Va["[object Uint16Array]"]=Va["[object Uint32Array]"]=!0,Va["[object Arguments]"]=Va["[object Array]"]=Va["[object ArrayBuffer]"]=Va["[object Boolean]"]=Va["[object DataView]"]=Va["[object Date]"]=Va["[object Error]"]=Va["[object Function]"]=Va["[object Map]"]=Va["[object Number]"]=Va["[object Object]"]=Va["[object RegExp]"]=Va["[object Set]"]=Va["[object String]"]=Va["[object WeakMap]"]=!1;var Uz=function(e){return Hc(e)&&hl(e.length)&&!!Va[me(e)]},ii=function(e){return function(t){return e(t)}},vf=xb((function(e,t){var n=t&&!t.nodeType&&t;n=(t=n&&e&&!e.nodeType&&e)&&t.exports===n&&Uq.process;e:{try{var r=t&&t.require&&t.require("util").types;if(r){var o=r;break e}o=n&&n.binding&&n.binding("util");break e}catch(e22){}o=void 0}e.exports=o})),br=vf&&vf.isTypedArray,Ui=br?ii(br):Uz,Vz=Object.prototype.hasOwnProperty,cr=function(e,t){var n=ub(e),r=!n&&Vf(e),o=!n&&!r&&Nf(e),i=!n&&!r&&!o&&Ui(e);if(n=n||r||o||i){r=e.length;for(var a=String,s=-1,c=Array(r);++s<r;)c[s]=a(s);r=c}else r=[];for(var l in a=r.length,e)!t&&!Vz.call(e,l)||n&&("length"==l||o&&("offset"==l||"parent"==l)||i&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||gl(l,a))||r.push(l);return r},Wz=Object.prototype,il=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Wz)},dr=function(e,t){return function(n){return e(t(n))}},Xz=dr(Object.keys,Object),Yz=Object.prototype.hasOwnProperty,ae=function(e){return null!=e&&hl(e.length)&&!jj(e)},Wd=function(e){if(ae(e))e=cr(e);else if(il(e)){var t,n=[];for(t in Object(e))Yz.call(e,t)&&"constructor"!=t&&n.push(t);e=n}else e=Xz(e);return e},ou=function(e,t){return e&&Ue(t,Wd(t),e)},Zz=Object.prototype.hasOwnProperty,Of=function(e){if(ae(e))e=cr(e,!0);else if(Gb(e)){var t=il(e),n=[];for(r in e)("constructor"!=r||!t&&Zz.call(e,r))&&n.push(r);e=n}else{var r=[];if(null!=e)for(t in Object(e))r.push(t);e=r}return e},mu=function(e,t){return e&&Ue(t,Of(t),e)},Nm=xb((function(e,t){var n=(t=t&&!t.nodeType&&t)&&e&&!e.nodeType&&e,r=(t=n&&n.exports===t?$b.Buffer:void 0)?t.allocUnsafe:void 0;e.exports=function(e,t){return t?e.slice():(t=e.length,t=r?r(t):new e.constructor(t),e.copy(t),t)}})),Pi=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t},$z=function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i},er=function(){return[]},aA=Object.prototype.propertyIsEnumerable,fr=Object.getOwnPropertySymbols,jl=fr?function(e){return null==e?[]:(e=Object(e),$z(fr(e),(function(t){return aA.call(e,t)})))}:er,nu=function(e,t){return Ue(e,jl(e),t)},Ti=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e},kl=dr(Object.getPrototypeOf,Object),gr=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Ti(t,jl(e)),e=kl(e);return t}:er,lu=function(e,t){return Ue(e,gr(e),t)},hr=function(e,t,n){return t=t(e),ub(e)?t:Ti(t,n(e))},Qi=function(e){return hr(e,Wd,jl)},Pm=function(e){return hr(e,Of,gr)},ll=oe($b,"DataView"),ml=oe($b,"Promise"),nl=oe($b,"WeakMap"),bA=ne(ll),cA=ne(Hg),dA=ne(ml),eA=ne(uf),fA=ne(nl),pe=me;(ll&&"[object DataView]"!=pe(new ll(new ArrayBuffer(1)))||Hg&&"[object Map]"!=pe(new Hg)||ml&&"[object Promise]"!=pe(ml.resolve())||uf&&"[object Set]"!=pe(new uf)||nl&&"[object WeakMap]"!=pe(new nl))&&(pe=function(e){var t=me(e);if(e=(e="[object Object]"==t?e.constructor:void 0)?ne(e):"")switch(e){case bA:return"[object DataView]";case cA:return"[object Map]";case dA:return"[object Promise]";case eA:return"[object Set]";case fA:return"[object WeakMap]"}return t});var Mf=pe,gA=Object.prototype.hasOwnProperty,ku=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&gA.call(e,"index")&&(n.index=e.index,n.input=e.input),n},ji=$b.Uint8Array,ol=function(e){var t=new e.constructor(e.byteLength);return new ji(t).set(new ji(e)),t},hA=/\w*$/,ir=lc?lc.prototype:void 0,jr=ir?ir.valueOf:void 0,Bn=function(e,t){return t=t?ol(e.buffer):e.buffer,new e.constructor(t,e.byteOffset,e.length)},pu=function(e,t,n){var r=e.constructor;switch(t){case"[object ArrayBuffer]":return ol(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return t=n?ol(e.buffer):e.buffer,new e.constructor(t,e.byteOffset,e.byteLength);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Bn(e,n);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return(t=new e.constructor(e.source,hA.exec(e))).lastIndex=e.lastIndex,t;case"[object Symbol]":return jr?Object(jr.call(e)):{}}},kr=Object.create,iA=function(){function e(){}return function(t){return Gb(t)?kr?kr(t):(e.prototype=t,t=new e,e.prototype=void 0,t):{}}}(),Om=function(e){return"function"!=typeof e.constructor||il(e)?{}:iA(kl(e))},jA=function(e){return Hc(e)&&"[object Map]"==Mf(e)},lr=vf&&vf.isMap,ru=lr?ii(lr):jA,kA=function(e){return Hc(e)&&"[object Set]"==Mf(e)},mr=vf&&vf.isSet,qu=mr?ii(mr):kA,Oa={};Oa["[object Arguments]"]=Oa["[object Array]"]=Oa["[object ArrayBuffer]"]=Oa["[object DataView]"]=Oa["[object Boolean]"]=Oa["[object Date]"]=Oa["[object Float32Array]"]=Oa["[object Float64Array]"]=Oa["[object Int8Array]"]=Oa["[object Int16Array]"]=Oa["[object Int32Array]"]=Oa["[object Map]"]=Oa["[object Number]"]=Oa["[object Object]"]=Oa["[object RegExp]"]=Oa["[object Set]"]=Oa["[object String]"]=Oa["[object Symbol]"]=Oa["[object Uint8Array]"]=Oa["[object Uint8ClampedArray]"]=Oa["[object Uint16Array]"]=Oa["[object Uint32Array]"]=!0,Oa["[object Error]"]=Oa["[object Function]"]=Oa["[object WeakMap]"]=!1;var Ke=function(e){return"symbol"==qa(e)||Hc(e)&&"[object Symbol]"==me(e)},lA=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,mA=/^\w*$/,pl=function(e,t){if(ub(e))return!1;var n=qa(e);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Ke(e))||mA.test(e)||!lA.test(e)||null!=t&&e in Object(t)};Ri.Cache=Zg;var nA=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,oA=/\\(\\)?/g,pA=function(e){var t=(e=Ri(e,(function(e){return 500===t.size&&t.clear(),e}))).cache;return e}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(nA,(function(e,n,r,o){t.push(r?o.replace(oA,"$1"):n||e)})),t})),tu=1/0,nr=lc?lc.prototype:void 0,Sm=nr?nr.toString:void 0,ki=function(e,t){return ub(e)?e:pl(e,t)?[e]:pA(null==e?"":Rm(e))},qA=1/0,Jg=function(e){if("string"==typeof e||Ke(e))return e;var t=e+"";return"0"==t&&1/e==-qA?"-0":t},li=function(e,t){for(var n=0,r=(t=ki(t,e)).length;null!=e&&n<r;)e=e[Jg(t[n++])];return n&&n==r?e:void 0},rA=function(e,t){if(!(2>(t=ki(t,e)).length)){var n=t,r=0,o=-1,i=-1,a=n.length;for(0>r&&(r=-r>a?0:a+r),0>(o=o>a?a:o)&&(o+=a),a=r>o?0:o-r>>>0,r>>>=0,o=Array(a);++i<a;)o[i]=n[i+r];e=li(e,o)}return(n=null==e)||(n=null==t?0:t.length,n=delete e[Jg(n?t[n-1]:void 0)]),n},or=Function.prototype.toString,sA=Object.prototype.hasOwnProperty,tA=or.call(Object),Cn=function(e){return!(!Hc(e)||"[object Object]"!=me(e))&&(null===(e=kl(e))||"function"==typeof(e=sA.call(e,"constructor")&&e.constructor)&&e instanceof e&&or.call(e)==tA)},uA=function(e){return Cn(e)?void 0:e},pr=lc?lc.isConcatSpreadable:void 0,uu=function(e){return ub(e)||Vf(e)||!!(pr&&e&&e[pr])},vA=function(e){return null!=e&&e.length?Si(e):[]},wA=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},qr=Math.max,rr=function(e,t,n){return t=qr(void 0===t?e.length-1:t,0),function(){for(var r=arguments,o=-1,i=qr(r.length-t,0),a=Array(i);++o<i;)a[o]=r[t+o];for(o=-1,i=Array(t+1);++o<t;)i[o]=r[o];return i[t]=n(a),wA(e,this,i)}},xA=function(e){return function(){return e}},mi=function(e){return e},yA=Date.now,sr=function(e){var t=0,n=0;return function(){var r=yA(),o=16-(r-n);if(n=r,0<o){if(800<=++t)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(hi?function(e,t){return hi(e,"toString",{configurable:!0,enumerable:!1,value:xA(t),writable:!0})}:mi),ql=function(e){return sr(rr(e,void 0,vA),e+"")}((function(e,t){var n={};if(null==e)return n;var r=!1;t=Je(t,(function(t){return t=ki(t,e),r||(r=1<t.length),t})),Ue(e,Pm(e),n),r&&(n=He(n,7,uA));for(var o=t.length;o--;)rA(n,t[o]);return n})),zA=function(e,t,n,r){for(var o=-1,i=null==e?0:e.length;++o<i;){var a=e[o];t(r,a,n(a),e)}return r},An=function(e,t,n){for(var r=-1,o=Object(e),i=(n=n(e)).length;i--;){var a=n[++r];if(!1===t(o[a],a,o))break}return e},tr=function(e,t){return e&&An(e,t,Wd)},rl=function(e,t){return function(t,n){if(null==t)return t;if(!ae(t))return e(t,n);for(var r=t.length,o=-1,i=Object(t);++o<r&&!1!==n(i[o],o,i););return t}}(tr),AA=function(e,t,n,r){return rl(e,(function(e,o,i){t(r,e,n(e),i)})),r},ur=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1},Tm=function(e,t,n,r,o,i){var a=1&n,s=e.length,c=t.length;if(s!=c&&!(a&&c>s))return!1;c=i.get(e);var l=i.get(t);if(c&&l)return c==t&&l==e;c=-1,l=!0;var u=2&n?new Lf:void 0;for(i.set(e,t),i.set(t,e);++c<s;){var d=e[c],A=t[c];if(r)var p=a?r(A,d,c,t,e,i):r(d,A,c,e,t,i);if(void 0!==p){if(p)continue;l=!1;break}if(u){if(!ur(t,(function(e,t){if(!u.has(t)&&(d===e||o(d,e,n,r,i)))return u.push(t)}))){l=!1;break}}else if(d!==A&&!o(d,A,n,r,i)){l=!1;break}}return i.delete(e),i.delete(t),l},BA=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n},vr=lc?lc.prototype:void 0,sl=vr?vr.valueOf:void 0,vu=function(e,t,n,r,o,i,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":if(e.byteLength!=t.byteLength||!i(new ji(e),new ji(t)))break;return!0;case"[object Boolean]":case"[object Date]":case"[object Number]":return Gg(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=BA;case"[object Set]":if(s||(s=el),e.size!=t.size&&!(1&r))break;return(n=a.get(e))?n==t:(r|=2,a.set(e,t),t=Tm(s(e),s(t),r,o,i,a),a.delete(e),t);case"[object Symbol]":if(sl)return sl.call(e)==sl.call(t)}return!1},wu=Object.prototype.hasOwnProperty,Um=Object.prototype.hasOwnProperty,CA=function(e,t,n,r){var o=n.length,i=o;if(null==e)return!i;for(e=Object(e);o--;){var a=n[o];if(a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++o<i;){var s=(a=n[o])[0],c=e[s],l=a[1];if(a[2]){if(void 0===c&&!(s in e))return!1}else if(!Le(l,c,3,r,a=new Ie))return!1}return!0},DA=function(e){for(var t=Wd(e),n=t.length;n--;){var r=t[n],o=e[r];t[n]=[r,o,o==o&&!Gb(o)]}return t},wr=function(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}},EA=function(e){var t=DA(e);return 1==t.length&&t[0][2]?wr(t[0][0],t[0][1]):function(n){return n===e||CA(n,e,t)}},FA=function(e,t){return pl(e)&&t==t&&!Gb(t)?wr(Jg(e),t):function(n){var r=null==n?void 0:li(n,e);if(void 0===(r=void 0===r?void 0:r)&&r===t){if(r=null!=n){for(var o=-1,i=(r=ki(r=e,n)).length,a=!1;++o<i;){var s=Jg(r[o]);if(!(a=null!=n&&null!=n&&s in Object(n)))break;n=n[s]}r=a||++o!=i?a:!!(i=null==n?0:n.length)&&hl(i)&&gl(s,i)&&(ub(n)||Vf(n))}s=r}else s=Le(t,r,3);return s}},GA=function(e){return function(t){return null==t?void 0:t[e]}},HA=function(e){return function(t){return li(t,e)}},wf=function(e){return"function"==typeof e?e:null==e?mi:"object"==qa(e)?ub(e)?FA(e[0],e[1]):EA(e):pl(e)?GA(Jg(e)):HA(e)},tl=function(e,t){return function(t,n){return(ub(t)?zA:AA)(t,e,wf(n),{})}}((function(e,t,n){Ig(e,n,t)})),md=function(e,t){var n={};return t=wf(t),tr(e,(function(e,r,o){Ig(n,r,t(e,r,o))})),n};ea({target:"String",proto:!0,forced:la((function(){var e="".sub('"');return e!==e.toLowerCase()||3<e.split('"').length}))},{sub:function(){return"<sub>"+String(Eb(this))+"</sub>"}});var P=Pa,mc=null;try{mc=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(c2){}Pa.prototype.__isLong__,Object.defineProperty(Pa.prototype,"__isLong__",{value:!0}),Pa.isLong=Hb;var Wm={},Vm={};Pa.fromInt=Xd,Pa.fromNumber=ec,Pa.fromBits=Qa;var ah=Math.pow;Pa.fromString=Vi,Pa.fromValue=vc;var Me=4294967296,Xm=Me*Me,Zm=Xm/2,xr=Xd(16777216),fc=Xd(0);Pa.ZERO=fc;var Yd=Xd(0,!0);Pa.UZERO=Yd;var xf=Xd(1);Pa.ONE=xf;var yr=Xd(1,!0);Pa.UONE=yr;var ul=Xd(-1);Pa.NEG_ONE=ul;var $m=Qa(-1,2147483647,!1);Pa.MAX_VALUE=$m;var Ym=Qa(-1,-1,!0);Pa.MAX_UNSIGNED_VALUE=Ym;var Ib=Qa(0,-2147483648,!1);Pa.MIN_VALUE=Ib;var V=Pa.prototype;V.toInt=function(){return this.unsigned?this.low>>>0:this.low},V.toNumber=function(){return this.unsigned?(this.high>>>0)*Me+(this.low>>>0):this.high*Me+(this.low>>>0)},V.toString=function(e){if(2>(e=e||10)||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(Ib)){var t=ec(e),n=this.div(t);return t=n.mul(t).sub(this),n.toString(e)+t.toInt().toString(e)}return"-"+this.neg().toString(e)}n=ec(ah(e,6),this.unsigned),t=this;for(var r="";;){var o=t.div(n),i=(t.sub(o.mul(n)).toInt()>>>0).toString(e);if((t=o).isZero())return i+r;for(;6>i.length;)i="0"+i;r=""+i+r}},V.getHighBits=function(){return this.high},V.getHighBitsUnsigned=function(){return this.high>>>0},V.getLowBits=function(){return this.low},V.getLowBitsUnsigned=function(){return this.low>>>0},V.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Ib)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;0<t&&!(e&1<<t);t--);return 0!=this.high?t+33:t+1},V.isZero=function(){return 0===this.high&&0===this.low},V.eqz=V.isZero,V.isNegative=function(){return!this.unsigned&&0>this.high},V.isPositive=function(){return this.unsigned||0<=this.high},V.isOdd=function(){return!(1&~this.low)},V.isEven=function(){return!(1&this.low)},V.equals=function(e){return Hb(e)||(e=vc(e)),(this.unsigned===e.unsigned||1!=this.high>>>31||1!=e.high>>>31)&&this.high===e.high&&this.low===e.low},V.eq=V.equals,V.notEquals=function(e){return!this.eq(e)},V.neq=V.notEquals,V.ne=V.notEquals,V.lessThan=function(e){return 0>this.comp(e)},V.lt=V.lessThan,V.lessThanOrEqual=function(e){return 0>=this.comp(e)},V.lte=V.lessThanOrEqual,V.le=V.lessThanOrEqual,V.greaterThan=function(e){return 0<this.comp(e)},V.gt=V.greaterThan,V.greaterThanOrEqual=function(e){return 0<=this.comp(e)},V.gte=V.greaterThanOrEqual,V.ge=V.greaterThanOrEqual,V.compare=function(e){if(Hb(e)||(e=vc(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},V.comp=V.compare,V.negate=function(){return!this.unsigned&&this.eq(Ib)?Ib:this.not().add(xf)},V.neg=V.negate,V.add=function(e){Hb(e)||(e=vc(e));var t=this.high>>>16,n=65535&this.high,r=this.low>>>16,o=e.high>>>16,i=65535&e.high,a=e.low>>>16;return r=(a=((e=(65535&this.low)+(65535&e.low))>>>16)+(r+a))>>>16,Qa((65535&a)<<16|65535&e,(t=((r+=n+i)>>>16)+(t+o)&65535)<<16|65535&r,this.unsigned)},V.subtract=function(e){return Hb(e)||(e=vc(e)),this.add(e.neg())},V.sub=V.subtract,V.multiply=function(e){if(this.isZero())return fc;if(Hb(e)||(e=vc(e)),mc){var t=mc.mul(this.low,this.high,e.low,e.high);return Qa(t,mc.get_high(),this.unsigned)}if(e.isZero())return fc;if(this.eq(Ib))return e.isOdd()?Ib:fc;if(e.eq(Ib))return this.isOdd()?Ib:fc;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(xr)&&e.lt(xr))return ec(this.toNumber()*e.toNumber(),this.unsigned);t=this.high>>>16;var n=65535&this.high,r=this.low>>>16,o=65535&this.low,i=e.high>>>16,a=65535&e.high,s=e.low>>>16,c=o*(e=65535&e.low),l=(c>>>16)+r*e,u=l>>>16;u+=(l=(65535&l)+o*s)>>>16;var d=(u+=n*e)>>>16;return Qa((65535&l)<<16|65535&c,(d=(d+=(u=(65535&u)+r*s)>>>16)+((u=(65535&u)+o*a)>>>16)+(t*e+n*s+r*a+o*i)&65535)<<16|65535&u,this.unsigned)},V.mul=V.multiply,V.divide=function(e){if(Hb(e)||(e=vc(e)),e.isZero())throw Error("division by zero");if(mc)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?Qa(e=(this.unsigned?mc.div_u:mc.div_s)(this.low,this.high,e.low,e.high),mc.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?Yd:fc;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return Yd;if(e.gt(this.shru(1)))return yr;var t=Yd}else{if(this.eq(Ib)){if(e.eq(xf)||e.eq(ul))return Ib;if(e.eq(Ib))return xf;var n=this.shr(1).div(e).shl(1);if(n.eq(fc))return e.isNegative()?xf:ul;var r=this.sub(e.mul(n));return n.add(r.div(e))}if(e.eq(Ib))return this.unsigned?Yd:fc;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();t=fc}for(r=this;r.gte(e);){n=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));var o=Math.ceil(Math.log(n)/Math.LN2);o=48>=o?1:ah(2,o-48);for(var i=ec(n),a=i.mul(e);a.isNegative()||a.gt(r);)a=(i=ec(n-=o,this.unsigned)).mul(e);i.isZero()&&(i=xf),t=t.add(i),r=r.sub(a)}return t},V.div=V.divide,V.modulo=function(e){return Hb(e)||(e=vc(e)),mc?Qa(e=(this.unsigned?mc.rem_u:mc.rem_s)(this.low,this.high,e.low,e.high),mc.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},V.mod=V.modulo,V.rem=V.modulo,V.not=function(){return Qa(~this.low,~this.high,this.unsigned)},V.and=function(e){return Hb(e)||(e=vc(e)),Qa(this.low&e.low,this.high&e.high,this.unsigned)},V.or=function(e){return Hb(e)||(e=vc(e)),Qa(this.low|e.low,this.high|e.high,this.unsigned)},V.xor=function(e){return Hb(e)||(e=vc(e)),Qa(this.low^e.low,this.high^e.high,this.unsigned)},V.shiftLeft=function(e){return Hb(e)&&(e=e.toInt()),0==(e&=63)?this:32>e?Qa(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):Qa(0,this.low<<e-32,this.unsigned)},V.shl=V.shiftLeft,V.shiftRight=function(e){return Hb(e)&&(e=e.toInt()),0==(e&=63)?this:32>e?Qa(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):Qa(this.high>>e-32,0<=this.high?0:-1,this.unsigned)},V.shr=V.shiftRight,V.shiftRightUnsigned=function(e){if(Hb(e)&&(e=e.toInt()),0==(e&=63))return this;var t=this.high;return 32>e?Qa(this.low>>>e|t<<32-e,t>>>e,this.unsigned):Qa(32===e?t:t>>>e-32,0,this.unsigned)},V.shru=V.shiftRightUnsigned,V.shr_u=V.shiftRightUnsigned,V.toSigned=function(){return this.unsigned?Qa(this.low,this.high,!1):this},V.toUnsigned=function(){return this.unsigned?this:Qa(this.low,this.high,!0)},V.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},V.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},V.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},Pa.fromBytes=function(e,t,n){return n?Pa.fromBytesLE(e,t):Pa.fromBytesBE(e,t)},Pa.fromBytesLE=function(e,t){return new Pa(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},Pa.fromBytesBE=function(e,t){return new Pa(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};var Wi=function(e,t){return(Wi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},vl=!1,gc={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e?console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+Error().stack):vl&&console.log("RxJS: Back to a better error behavior. Thank you. <3"),vl=e},get useDeprecatedSynchronousErrorHandling(){return vl}},ni={closed:!0,next:function(e){},error:function(e){if(gc.useDeprecatedSynchronousErrorHandling)throw e;Oe(e)},complete:function(){}},hc=Array.isArray||function(e){return e&&"number"==typeof e.length},Pf=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),nb=function(){function e(e){this.closed=!1,this._subscriptions=this._parentOrParents=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return e.prototype.unsubscribe=function(){if(!this.closed){var t=this._parentOrParents,n=this._ctorUnsubscribe,r=this._unsubscribe,o=this._subscriptions;if(this.closed=!0,this._subscriptions=this._parentOrParents=null,t instanceof e)t.remove(this);else if(null!==t)for(var i=0;i<t.length;++i)t[i].remove(this);if(Ne(r)){n&&(this._unsubscribe=void 0);try{r.call(this)}catch(e22){var a=e22 instanceof Pf?an(e22.errors):[e22]}}if(hc(o))for(i=-1,t=o.length;++i<t;)if(Xi(n=o[i]))try{n.unsubscribe()}catch(e22){a=a||[],e22 instanceof Pf?a=a.concat(an(e22.errors)):a.push(e22)}if(a)throw new Pf(a)}},e.prototype.add=function(t){var n=t;if(!t)return e.EMPTY;switch(qa(t)){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;n instanceof e||(t=n,(n=new e)._subscriptions=[t]);break;default:throw Error("unrecognized teardown "+t+" added to Subscription.")}if(null===(t=n._parentOrParents))n._parentOrParents=this;else if(t instanceof e){if(t===this)return n;n._parentOrParents=[t,this]}else{if(-1!==t.indexOf(this))return n;t.push(this)}return null===(t=this._subscriptions)?this._subscriptions=[n]:t.push(n),n},e.prototype.remove=function(e){var t=this._subscriptions;t&&-1!==(e=t.indexOf(e))&&t.splice(e,1)},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}(),oi="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),za=function(e){function t(n,r,o){var i=e.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,arguments.length){case 0:i.destination=ni;break;case 1:if(!n){i.destination=ni;break}if("object"===qa(n)){n instanceof t?(i.syncErrorThrowable=n.syncErrorThrowable,i.destination=n,n.add(i)):(i.syncErrorThrowable=!0,i.destination=new zr(i,n));break}default:i.syncErrorThrowable=!0,i.destination=new zr(i,n,r,o)}return i}return ha(t,e),t.prototype[oi]=function(){return this},t.create=function(e,n,r){return(e=new t(e,n,r)).syncErrorThrowable=!1,e},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.isStopped=this.closed=!1,this._parentOrParents=e,this},t}(nb),zr=function(e){function t(t,n,r,o){var i=e.call(this)||this;if(i._parentSubscriber=t,t=i,Ne(n))var a=n;else n&&(a=n.next,r=n.error,o=n.complete,n!==ni&&(Ne((t=Object.create(n)).unsubscribe)&&i.add(t.unsubscribe.bind(t)),t.unsubscribe=i.unsubscribe.bind(i)));return i._context=t,i._next=a,i._error=r,i._complete=o,i}return ha(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;gc.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=gc.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?this.__tryOrSetError(t,this._error,e):this.__tryOrUnsub(this._error,e),this.unsubscribe();else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):Oe(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;Oe(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};gc.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,n):this.__tryOrUnsub(n)}this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),gc.useDeprecatedSynchronousErrorHandling)throw n;Oe(n)}},t.prototype.__tryOrSetError=function(e,t,n){if(!gc.useDeprecatedSynchronousErrorHandling)throw Error("bad call");try{t.call(this._context,n)}catch(r){return gc.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0):Oe(r),!0}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._parentSubscriber=this._context=null,e.unsubscribe()},t}(za),Pe="function"==typeof Symbol&&Symbol.observable||"@@observable",ua=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this.operator;e:{if(e){if(e instanceof za)break e;if(e[oi]){e=e[oi]();break e}}e=e||t||n?new za(e,t,n):new za(ni)}if(r?e.add(r.call(e,this.source)):e.add(this.source||gc.useDeprecatedSynchronousErrorHandling&&!e.syncErrorThrowable?this._subscribe(e):this._trySubscribe(e)),gc.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable&&(e.syncErrorThrowable=!1,e.syncErrorThrown))throw e.syncErrorValue;return e},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t2){gc.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t2),Yi(e)?e.error(t2):console.warn(t2)}},e.prototype.forEach=function(e,t){var n=this;return new(t=cn(t))((function(t,r){var o=n.subscribe((function(t){try{e(t)}catch(n){r(n),o&&o.unsubscribe()}}),r,t)}))},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[Pe]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:bn(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=cn(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}(),Ld=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}(),Ar=function(e){function t(t,n){var r=e.call(this)||this;return r.subject=t,r.subscriber=n,r.closed=!1,r}return ha(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;this.subject=null,!t||0===t.length||e.isStopped||e.closed||-1!==(e=t.indexOf(this.subscriber))&&t.splice(e,1)}},t}(nb),Br=function(e){function t(t){var n=e.call(this,t)||this;return n.destination=t,n}return ha(t,e),t}(za),rb=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return ha(t,e),t.prototype[oi]=function(){return new Br(this)},t.prototype.lift=function(e){var t=new Cr(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new Ld;if(!this.isStopped){var t=this.observers,n=t.length;t=t.slice();for(var r=0;r<n;r++)t[r].next(e)}},t.prototype.error=function(e){if(this.closed)throw new Ld;this.hasError=!0,this.thrownError=e,this.isStopped=!0;var t=this.observers,n=t.length;t=t.slice();for(var r=0;r<n;r++)t[r].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new Ld;this.isStopped=!0;var e=this.observers,t=e.length;e=e.slice();for(var n=0;n<t;n++)e[n].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.closed=this.isStopped=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new Ld;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new Ld;return this.hasError?(e.error(this.thrownError),nb.EMPTY):this.isStopped?(e.complete(),nb.EMPTY):(this.observers.push(e),new Ar(this,e))},t.prototype.asObservable=function(){var e=new ua;return e.source=this,e},t.create=function(e,t){return new Cr(e,t)},t}(ua),Cr=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return ha(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):nb.EMPTY},t}(rb),xu=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var n=this.connectable;return n._refCount++,e=new IA(e,n),t=t.subscribe(e),e.closed||(e.connection=n.connect()),t},e}(),IA=function(e){function t(t,n){return(t=e.call(this,t)||this).connectable=n,t}return ha(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;0>=t?this.connection=null:(e._refCount=t-1,1<t?this.connection=null:(t=this.connection,e=e._connection,this.connection=null,!e||t&&e!==t||e.unsubscribe()))}else this.connection=null},t}(za),Dr=function(e){function t(t,n){var r=e.call(this)||this;return r.source=t,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return ha(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new nb).add(this.source.subscribe(new JA(this.getSubject(),this))),e.closed&&(this._connection=null,e=nb.EMPTY)),e},t.prototype.refCount=function(){return dn()(this)},t}(ua),lv=function(){var e=Dr.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}}(),JA=function(e){function t(t,n){return(t=e.call(this,t)||this).connectable=n,t}return ha(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(Br);!function(e){function t(t,n){return(t=e.call(this,t)||this).connectable=n,t}ha(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;0>=t?this.connection=null:(e._refCount=t-1,1<t?this.connection=null:(t=this.connection,e=e._connection,this.connection=null,!e||t&&e!==t||e.unsubscribe()))}else this.connection=null}}(za),function(e){function t(t,n,r,o,i){return(t=e.call(this,t)||this).keySelector=n,t.elementSelector=r,t.durationSelector=o,t.subjectSelector=i,t.groups=null,t.attemptedToUnsubscribe=!1,t.count=0,t}ha(t,e),t.prototype._next=function(e){try{var t=this.keySelector(e)}catch(n){return void this.error(n)}this._group(e,t)},t.prototype._group=function(e,t){var n=this.groups;n||(n=this.groups=new Map);var r=n.get(t);if(this.elementSelector)try{var o=this.elementSelector(e)}catch(i){this.error(i)}else o=e;if(!r&&(r=this.subjectSelector?this.subjectSelector():new rb,n.set(t,r),e=new wl(t,r,this),this.destination.next(e),this.durationSelector)){e=void 0;try{e=this.durationSelector(new wl(t,r))}catch(i){return void this.error(i)}this.add(e.subscribe(new KA(t,r,this)))}r.closed||r.next(o)},t.prototype._error=function(e){var t=this.groups;t&&(t.forEach((function(t,n){t.error(e)})),t.clear()),this.destination.error(e)},t.prototype._complete=function(){var e=this.groups;e&&(e.forEach((function(e,t){e.complete()})),e.clear()),this.destination.complete()},t.prototype.removeGroup=function(e){this.groups.delete(e)},t.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&e.prototype.unsubscribe.call(this))}}(za);var KA=function(e){function t(t,n,r){var o=e.call(this,n)||this;return o.key=t,o.group=n,o.parent=r,o}return ha(t,e),t.prototype._next=function(e){this.complete()},t.prototype._unsubscribe=function(){var e=this.parent,t=this.key;this.key=this.parent=null,e&&e.removeGroup(t)},t}(za),wl=function(e){function t(t,n,r){var o=e.call(this)||this;return o.key=t,o.groupSubject=n,o.refCountSubscription=r,o}return ha(t,e),t.prototype._subscribe=function(e){var t=new nb,n=this.refCountSubscription,r=this.groupSubject;return n&&!n.closed&&t.add(new LA(n)),t.add(r.subscribe(e)),t},t}(ua),LA=function(e){function t(t){var n=e.call(this)||this;return n.parent=t,t.count++,n}return ha(t,e),t.prototype.unsubscribe=function(){var t=this.parent;t.closed||this.closed||(e.prototype.unsubscribe.call(this),--t.count,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())},t}(nb),MA=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return ha(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return n&&!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Ld;return this._value},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(rb),Kg=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return ha(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e,e=this.id;var n=this.scheduler;return null!=e&&(this.id=this.recycleAsyncId(n,e,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(n,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)},t.prototype.execute=function(e,t){return this.closed?Error("executing a cancelled action"):(this.pending=!1,(e=this._execute(e,t))?e:void(!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))))},t.prototype._execute=function(e,t){t=!1;var n=void 0;try{this.work(e)}catch(r){t=!0,n=!!r&&r||Error(r)}if(t)return this.unsubscribe(),n},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.state=this.work=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(function(e){function t(t,n){return e.call(this)||this}return ha(t,e),t.prototype.schedule=function(e,t){return this},t}(nb)),NA=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return ha(t,e),t.prototype.schedule=function(t,n){return void 0===n&&(n=0),0<n?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,n){return 0<n||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&0<r||null===r&&0<this.delay?e.prototype.requestAsyncId.call(this,t,n,r):t.flush(this)},t}(Kg),xl=function(){function e(t,n){void 0===n&&(n=e.now),this.SchedulerAction=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},e.now=function(){return Date.now()},e}(),Lg=function(e){function t(n,r){void 0===r&&(r=xl.now);var o=e.call(this,n,(function(){return t.delegate&&t.delegate!==o?t.delegate.now():r()}))||this;return o.actions=[],o.active=!1,o.scheduled=void 0,o}return ha(t,e),t.prototype.schedule=function(n,r,o){return void 0===r&&(r=0),t.delegate&&t.delegate!==this?t.delegate.schedule(n,r,o):e.prototype.schedule.call(this,n,r,o)},t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(xl),Mg=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ha(t,e),t}(Lg))(NA),Sb=new ua((function(e){return e.complete()})),en=function(e){return function(t){for(var n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}},yl;!function(e){e.NEXT="N",e.ERROR="E",e.COMPLETE="C"}(yl||(yl={}));var yf=function(){function e(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},e.prototype.do=function(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}},e.prototype.accept=function(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)},e.prototype.toObservable=function(){switch(this.kind){case"N":return ob(this.value);case"E":return ra(this.error);case"C":return Qf()}throw Error("unexpected notification kind value")},e.createNext=function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}(),Bu=function(){function e(e,t){void 0===t&&(t=0),this.scheduler=e,this.delay=t}return e.prototype.call=function(e,t){return t.subscribe(new Er(e,this.scheduler,this.delay))},e}(),Er=function(e){function t(t,n,r){return void 0===r&&(r=0),(t=e.call(this,t)||this).scheduler=n,t.delay=r,t}return ha(t,e),t.dispatch=function(e){e.notification.observe(e.destination),this.unsubscribe()},t.prototype.scheduleMessage=function(e){this.destination.add(this.scheduler.schedule(t.dispatch,this.delay,new OA(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(yf.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(yf.createError(e)),this.unsubscribe()},t.prototype._complete=function(){this.scheduleMessage(yf.createComplete()),this.unsubscribe()},t}(za),OA=function(e,t){this.notification=e,this.destination=t},Te=function(e){function t(t,n,r){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY);var o=e.call(this)||this;return o.scheduler=r,o._events=[],o._infiniteTimeWindow=!1,o._bufferSize=1>t?1:t,o._windowTime=1>n?1:n,n===Number.POSITIVE_INFINITY?(o._infiniteTimeWindow=!0,o.next=o.nextInfiniteTimeWindow):o.next=o.nextTimeWindow,o}return ha(t,e),t.prototype.nextInfiniteTimeWindow=function(t){if(!this.isStopped){var n=this._events;n.push(t),n.length>this._bufferSize&&n.shift()}e.prototype.next.call(this,t)},t.prototype.nextTimeWindow=function(t){this.isStopped||(this._events.push(new PA(this._getNow(),t)),this._trimBufferThenGetEvents()),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){var t=this._infiniteTimeWindow,n=t?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,o=n.length;if(this.closed)throw new Ld;if(this.isStopped||this.hasError)var i=nb.EMPTY;else this.observers.push(e),i=new Ar(this,e);if(r&&e.add(e=new Er(e,r)),t)for(t=0;t<o&&!e.closed;t++)e.next(n[t]);else for(t=0;t<o&&!e.closed;t++)e.next(n[t].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),i},t.prototype._getNow=function(){return(this.scheduler||Mg).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,o=r.length,i=0;i<o&&!(e-r[i].time<n);)i++;return o>t&&(i=Math.max(i,o-t)),0<i&&r.splice(0,i),r},t}(rb),PA=function(e,t){this.time=e,this.value=t},Sf=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.value=null,t.hasNext=!1,t.hasCompleted=!1,t}return ha(t,e),t.prototype._subscribe=function(t){return this.hasError?(t.error(this.thrownError),nb.EMPTY):this.hasCompleted&&this.hasNext?(t.next(this.value),t.complete(),nb.EMPTY):e.prototype._subscribe.call(this,t)},t.prototype.next=function(e){this.hasCompleted||(this.value=e,this.hasNext=!0)},t.prototype.error=function(t){this.hasCompleted||e.prototype.error.call(this,t)},t.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&e.prototype.next.call(this,this.value),e.prototype.complete.call(this)},t}(rb),QA=1,RA=Promise.resolve(),aj={},Fr={setImmediate:function(e){var t=QA++;return aj[t]=!0,RA.then((function(){return fn(t)&&e()})),t},clearImmediate:function(e){fn(e)}},SA=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return ha(t,e),t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&0<r?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t.scheduled||(t.scheduled=Fr.setImmediate(t.flush.bind(t,null))))},t.prototype.recycleAsyncId=function(t,n,r){if(void 0===r&&(r=0),null!==r&&0<r||null===r&&0<this.delay)return e.prototype.recycleAsyncId.call(this,t,n,r);0===t.actions.length&&(Fr.clearImmediate(n),t.scheduled=void 0)},t}(Kg),kj=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ha(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,r=-1,o=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++r<o&&(e=n.shift()));if(this.active=!1,t){for(;++r<o&&(e=n.shift());)e.unsubscribe();throw t}},t}(Lg))(SA),TA=kj,zl=new Lg(Kg),cd=zl,UA=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return ha(t,e),t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&0<r?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t.scheduled||(t.scheduled=requestAnimationFrame((function(){return t.flush(null)}))))},t.prototype.recycleAsyncId=function(t,n,r){if(void 0===r&&(r=0),null!==r&&0<r||null===r&&0<this.delay)return e.prototype.recycleAsyncId.call(this,t,n,r);0===t.actions.length&&(cancelAnimationFrame(n),t.scheduled=void 0)},t}(Kg),Gr=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ha(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,r=-1,o=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++r<o&&(e=n.shift()));if(this.active=!1,t){for(;++r<o&&(e=n.shift());)e.unsubscribe();throw t}},t}(Lg))(UA),VA=function(e){function t(t,n){void 0===t&&(t=Hr),void 0===n&&(n=Number.POSITIVE_INFINITY);var r=e.call(this,t,(function(){return r.frame}))||this;return r.maxFrames=n,r.frame=0,r.index=-1,r}return ha(t,e),t.prototype.flush=function(){for(var e,t,n=this.actions,r=this.maxFrames;(t=n[0])&&t.delay<=r&&(n.shift(),this.frame=t.delay,!(e=t.execute(t.state,t.delay))););if(e){for(;t=n.shift();)t.unsubscribe();throw e}},t.frameTimeFactor=10,t}(Lg),Hr=function(e){function t(t,n,r){void 0===r&&(r=t.index+=1);var o=e.call(this,t,n)||this;return o.scheduler=t,o.work=n,o.index=r,o.active=!0,o.index=t.index=r,o}return ha(t,e),t.prototype.schedule=function(n,r){if(void 0===r&&(r=0),!this.id)return e.prototype.schedule.call(this,n,r);this.active=!1;var o=new t(this.scheduler,this.work);return this.add(o),o.schedule(n,r)},t.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),this.delay=e.frame+r,(e=e.actions).push(this),e.sort(t.sortActions),!0},t.prototype.recycleAsyncId=function(e,t,n){},t.prototype._execute=function(t,n){if(!0===this.active)return e.prototype._execute.call(this,t,n)},t.sortActions=function(e,t){return e.delay===t.delay?e.index===t.index?0:e.index>t.index?1:-1:e.delay>t.delay?1:-1},t}(Kg),Al=function(){function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e}(),eh=function(){function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e}(),Tb=function(){function e(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return e.prototype=Object.create(Error.prototype),e}(),Cu=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new WA(e,this.project,this.thisArg))},e}(),WA=function(e){function t(t,n,r){return(t=e.call(this,t)||this).project=n,t.count=0,t.thisArg=r||t,t}return ha(t,e),t.prototype._next=function(e){try{var t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)},t}(za),Bl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ha(t,e),t.prototype.notifyNext=function(e,t,n,r,o){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(za),Hu=function(e){function t(t,n,r){var o=e.call(this)||this;return o.parent=t,o.outerValue=n,o.outerIndex=r,o.index=0,o}return ha(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(za),XA=function(e){return function(t){return e.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,Oe),t}},xd="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",YA=function(e){return function(t){for(var n=e[xd]();;){var r=void 0;try{r=n.next()}catch(e22){return t.error(e22),t}if(r.done){t.complete();break}if(t.next(r.value),t.closed)break}return"function"==typeof n.return&&t.add((function(){n.return&&n.return()})),t}},ZA=function(e){return function(t){var n=e[Pe]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(t)}},mn=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e},Tf=function(e){if(e&&"function"==typeof e[Pe])return ZA(e);if(mn(e))return en(e);if(kn(e))return XA(e);if(e&&"function"==typeof e[xd])return YA(e);throw e=Xi(e)?"an invalid object":"'"+e+"'",new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")},Ir={},aB=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new $A(e,this.resultSelector))},e}(),$A=function(e){function t(t,n){return(t=e.call(this,t)||this).resultSelector=n,t.active=0,t.values=[],t.observables=[],t}return ha(t,e),t.prototype._next=function(e){this.values.push(Ir),this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.toRespond=this.active=t;for(var n=0;n<t;n++)this.add(bj(this,e[n],void 0,n))}},t.prototype.notifyComplete=function(e){0==--this.active&&this.destination.complete()},t.prototype.notifyNext=function(e,t,n){var r=(e=this.values)[n];r=this.toRespond?r===Ir?--this.toRespond:this.toRespond:0,e[n]=t,0===r&&(this.resultSelector?this._tryResultSelector(e):this.destination.next(e.slice()))},t.prototype._tryResultSelector=function(e){try{var t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)},t}(Bl),nd=function(e){function t(t){var n=e.call(this)||this;return n.parent=t,n}return ha(t,e),t.prototype._next=function(e){this.parent.notifyNext(e)},t.prototype._error=function(e){this.parent.notifyError(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},t}(za);!function(e){function t(t,n,r){var o=e.call(this)||this;return o.parent=t,o.outerValue=n,o.outerIndex=r,o}ha(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this)},t.prototype._error=function(e){this.parent.notifyError(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()}}(za);var od=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ha(t,e),t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(){this.destination.complete()},t}(za);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}ha(t,e),t.prototype.notifyNext=function(e,t,n,r){this.destination.next(t)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()}}(za);var Lu=function(){function e(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}return e.prototype.call=function(e,t){return t.subscribe(new bB(e,this.project,this.concurrent))},e}(),bB=function(e){function t(t,n,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),(t=e.call(this,t)||this).project=n,t.concurrent=r,t.hasCompleted=!1,t.buffer=[],t.active=0,t.index=0,t}return ha(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t=this.index++;try{var n=this.project(e,t)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(n)},t.prototype._innerSub=function(e){var t=new nd(this),n=this.destination;n.add(t),(e=bd(e,t))!==t&&n.add(e)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyComplete=function(){var e=this.buffer;this.active--,0<e.length?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(od),Cl=R.parseFloat,Jr=-1/0!=1/Cl("\t\n\v\f\r \u2028\u2029\ufeff-0")?function(e){e=Oj(String(e));var t=Cl(e);return 0===t&&"-"==e.charAt(0)?-0:t}:Cl;ea({global:!0,forced:parseFloat!=Jr},{parseFloat:Jr});var Dl=new ua(Ic),Qu=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new cB(e,this.predicate,this.thisArg))},e}(),cB=function(e){function t(t,n,r){return(t=e.call(this,t)||this).predicate=n,t.thisArg=r,t.count=0,t}return ha(t,e),t.prototype._next=function(e){try{var t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)},t}(za),Ru=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new dB(e))},e}(),dB=function(e){function t(t){return(t=e.call(this,t)||this).hasFirst=!1,t.observables=[],t.subscriptions=[],t}return ha(t,e),t.prototype._next=function(e){this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(var n=0;n<t&&!this.hasFirst;n++){var r=bj(this,e[n],void 0,n);this.subscriptions&&this.subscriptions.push(r),this.add(r)}this.observables=null}},t.prototype.notifyNext=function(e,t,n){if(!this.hasFirst){for(this.hasFirst=!0,e=0;e<this.subscriptions.length;e++)if(e!==n){var r=this.subscriptions[e];r.unsubscribe(),this.remove(r)}this.subscriptions=null}this.destination.next(t)},t}(Bl),Uu=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new eB(e,this.resultSelector))},e}(),eB=function(e){function t(t,n,r){return(t=e.call(this,t)||this).resultSelector=n,t.iterators=[],t.active=0,t.resultSelector="function"==typeof n?n:void 0,t}return ha(t,e),t.prototype._next=function(e){var t=this.iterators;hc(e)?t.push(new fB(e)):"function"==typeof e[xd]?t.push(new gB(e[xd]())):t.push(new hB(this.destination,this,e))},t.prototype._complete=function(){var e=this.iterators,t=e.length;if(this.unsubscribe(),0===t)this.destination.complete();else{this.active=t;for(var n=0;n<t;n++){var r=e[n];r.stillUnsubscribed?this.destination.add(r.subscribe()):this.active--}}},t.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},t.prototype.checkIterators=function(){for(var e=this.iterators,t=e.length,n=this.destination,r=0;r<t;r++){var o=e[r];if("function"==typeof o.hasValue&&!o.hasValue())return}var i=!1,a=[];for(r=0;r<t;r++){var s=(o=e[r]).next();if(o.hasCompleted()&&(i=!0),s.done)return void n.complete();a.push(s.value)}this.resultSelector?this._tryresultSelector(a):n.next(a),i&&n.complete()},t.prototype._tryresultSelector=function(e){try{var t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)},t}(za),gB=function(){function e(e){this.iterator=e,this.nextResult=e.next()}return e.prototype.hasValue=function(){return!0},e.prototype.next=function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e},e.prototype.hasCompleted=function(){var e=this.nextResult;return!(!e||!e.done)},e}(),fB=function(){function e(e){this.array=e,this.length=this.index=0,this.length=e.length}return e.prototype[xd]=function(){return this},e.prototype.next=function(e){e=this.index++;var t=this.array;return e<this.length?{value:t[e],done:!1}:{value:null,done:!0}},e.prototype.hasValue=function(){return this.array.length>this.index},e.prototype.hasCompleted=function(){return this.array.length===this.index},e}(),hB=function(e){function t(t,n,r){return(t=e.call(this,t)||this).parent=n,t.observable=r,t.stillUnsubscribed=!0,t.buffer=[],t.isComplete=!1,t}return ha(t,e),t.prototype[xd]=function(){return this},t.prototype.next=function(){var e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}},t.prototype.hasValue=function(){return 0<this.buffer.length},t.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},t.prototype.notifyComplete=function(){0<this.buffer.length?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},t.prototype.notifyNext=function(e){this.buffer.push(e),this.parent.checkIterators()},t.prototype.subscribe=function(){return bd(this.observable,new nd(this))},t}(od),iB=Object.freeze({__proto__:null,Observable:ua,ConnectableObservable:Dr,GroupedObservable:wl,observable:Pe,Subject:rb,BehaviorSubject:MA,ReplaySubject:Te,AsyncSubject:Sf,asap:TA,asapScheduler:kj,async:cd,asyncScheduler:zl,queue:Mg,queueScheduler:Mg,animationFrame:Gr,animationFrameScheduler:Gr,VirtualTimeScheduler:VA,VirtualAction:Hr,Scheduler:xl,Subscription:nb,Subscriber:za,Notification:yf,get NotificationKind(){return yl},pipe:Zi,noop:Ic,identity:wd,isObservable:function(e){return!!e&&(e instanceof ua||"function"==typeof e.lift&&"function"==typeof e.subscribe)},ArgumentOutOfRangeError:Al,EmptyError:eh,ObjectUnsubscribedError:Ld,UnsubscriptionError:Pf,TimeoutError:Tb,bindCallback:gn,bindNodeCallback:hn,combineLatest:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=t=void 0;return ad(e[e.length-1])&&(n=e.pop()),"function"==typeof e[e.length-1]&&(t=e.pop()),1===e.length&&hc(e[0])&&(e=e[0]),Rf(e,n).lift(new aB(t))},concat:nn,defer:yd,empty:Qf,forkJoin:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var n=e[0];if(hc(n))return ch(n,null);if(Xi(n)&&Object.getPrototypeOf(n)===Object.prototype)return ch((e=Object.keys(n)).map((function(e){return n[e]})),e)}if("function"==typeof e[e.length-1]){var r=e.pop();return ch(e=1===e.length&&hc(e[0])?e[0]:e,null).pipe(Ea((function(e){return r.apply(void 0,e)})))}return ch(e,null)},from:Jc,fromEvent:Db,fromEventPattern:pn,generate:function(e,t,n,r,o){if(1==arguments.length){var i=e.initialState;t=e.condition,n=e.iterate;var a=e.resultSelector||wd;o=e.scheduler}else void 0===r||ad(r)?(i=e,a=wd,o=r):(i=e,a=r);return new ua((function(e){var r=i;if(o)return o.schedule(Mu,0,{subscriber:e,iterate:n,condition:t,resultSelector:a,state:r});for(;;){if(t){var s=void 0;try{s=t(r)}catch(c){e.error(c);break}if(!s){e.complete();break}}s=void 0;try{s=a(r)}catch(c){e.error(c);break}if(e.next(s),e.closed)break;try{r=n(r)}catch(c){e.error(c);break}}}))},iif:function(e,t,n){return void 0===t&&(t=Sb),void 0===n&&(n=Sb),yd((function(){return e()?t:n}))},interval:Qe,merge:Jb,never:function(){return Dl},of:ob,onErrorResumeNext:dj,pairs:function(e,t){return new ua(t?function(n){var r=Object.keys(e),o=new nb;return o.add(t.schedule(Ou,0,{keys:r,index:0,subscriber:n,subscription:o,obj:e})),o}:function(t){for(var n=Object.keys(e),r=0;r<n.length&&!t.closed;r++){var o=n[r];e.hasOwnProperty(o)&&t.next([o,e[o]])}t.complete()})},partition:function(e,t,n){return[yb(t,n)(new ua(Tf(e))),yb(Pu(t,n))(new ua(Tf(e)))]},race:fb,range:function(e,t,n){return void 0===e&&(e=0),new ua((function(r){void 0===t&&(t=e,e=0);var o=0,i=e;if(n)return n.schedule(Su,0,{index:o,count:t,start:e,subscriber:r});for(;;){if(o++>=t){r.complete();break}if(r.next(i++),r.closed)break}}))},throwError:ra,timer:dd,using:function(e,t){return new ua((function(n){try{var r=e()}catch(e22){return void n.error(e22)}try{var o=t(r)}catch(e22){return void n.error(e22)}var i=(o?Jc(o):Sb).subscribe(n);return function(){i.unsubscribe(),r&&r.unsubscribe()}}))},zip:ej,scheduled:ln,EMPTY:Sb,NEVER:Dl,config:gc}),Vu=function(){function e(e,t,n,r){this.bufferTimeSpan=e,this.bufferCreationInterval=t,this.maxBufferSize=n,this.scheduler=r}return e.prototype.call=function(e,t){return t.subscribe(new jB(e,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},e}(),kB=function(){this.buffer=[]},jB=function(e){function t(t,n,r,o,i){if((t=e.call(this,t)||this).bufferTimeSpan=n,t.bufferCreationInterval=r,t.maxBufferSize=o,t.scheduler=i,t.contexts=[],o=t.openContext(),t.timespanOnly=null==r||0>r,t.timespanOnly)t.add(o.closeAction=i.schedule(qn,n,{subscriber:t,context:o,bufferTimeSpan:n}));else{var a={bufferTimeSpan:n,bufferCreationInterval:r,subscriber:t,scheduler:i};t.add(o.closeAction=i.schedule(rn,n,{subscriber:t,context:o})),t.add(i.schedule(Wu,r,a))}return t}return ha(t,e),t.prototype._next=function(e){for(var t,n=this.contexts,r=n.length,o=0;o<r;o++){var i=n[o],a=i.buffer;a.push(e),a.length==this.maxBufferSize&&(t=i)}t&&this.onBufferFull(t)},t.prototype._error=function(t){this.contexts.length=0,e.prototype._error.call(this,t)},t.prototype._complete=function(){for(var t=this.contexts,n=this.destination;0<t.length;){var r=t.shift();n.next(r.buffer)}e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.contexts=null},t.prototype.onBufferFull=function(e){if(this.closeContext(e),(e=e.closeAction).unsubscribe(),this.remove(e),!this.closed&&this.timespanOnly){e=this.openContext();var t=this.bufferTimeSpan;this.add(e.closeAction=this.scheduler.schedule(qn,t,{subscriber:this,context:e,bufferTimeSpan:t}))}},t.prototype.openContext=function(){var e=new kB;return this.contexts.push(e),e},t.prototype.closeContext=function(e){this.destination.next(e.buffer);var t=this.contexts;0<=(t?t.indexOf(e):-1)&&t.splice(t.indexOf(e),1)},t}(za),Xu=function(){function e(e){this.selector=e}return e.prototype.call=function(e,t){return t.subscribe(new lB(e,this.selector,this.caught))},e}(),lB=function(e){function t(t,n,r){return(t=e.call(this,t)||this).selector=n,t.caught=r,t}return ha(t,e),t.prototype.error=function(t){if(!this.isStopped){var n=void 0;try{n=this.selector(t,this.caught)}catch(r){return void e.prototype.error.call(this,r)}this._unsubscribeAndRecycle(),t=new nd(this),this.add(t),(n=bd(n,t))!==t&&this.add(n)}},t}(od),Yu=function(){function e(e){this.defaultValue=e}return e.prototype.call=function(e,t){return t.subscribe(new mB(e,this.defaultValue))},e}(),mB=function(e){function t(t,n){return(t=e.call(this,t)||this).defaultValue=n,t.isEmpty=!0,t}return ha(t,e),t.prototype._next=function(e){this.isEmpty=!1,this.destination.next(e)},t.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},t}(za),Zu=function(){function e(e,t){this.delay=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new nB(e,this.delay,this.scheduler))},e}(),nB=function(e){function t(t,n,r){return(t=e.call(this,t)||this).delay=n,t.scheduler=r,t.queue=[],t.active=!1,t.errored=!1,t}return ha(t,e),t.dispatch=function(e){for(var t=e.source,n=t.queue,r=e.scheduler,o=e.destination;0<n.length&&0>=n[0].time-r.now();)n.shift().notification.observe(o);0<n.length?(t=Math.max(0,n[0].time-r.now()),this.schedule(e,t)):(this.unsubscribe(),t.active=!1)},t.prototype._schedule=function(e){this.active=!0,this.destination.add(e.schedule(t.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))},t.prototype.scheduleNotification=function(e){if(!0!==this.errored){var t=this.scheduler;e=new oB(t.now()+this.delay,e),this.queue.push(e),!1===this.active&&this._schedule(t)}},t.prototype._next=function(e){this.scheduleNotification(yf.createNext(e))},t.prototype._error=function(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.scheduleNotification(yf.createComplete()),this.unsubscribe()},t}(za),oB=function(e,t){this.time=e,this.notification=t},$u=function(){function e(e,t){this.keySelector=e,this.flushes=t}return e.prototype.call=function(e,t){return t.subscribe(new pB(e,this.keySelector,this.flushes))},e}(),pB=function(e){function t(t,n,r){return(t=e.call(this,t)||this).keySelector=n,t.values=new Set,r&&t.add(bd(r,new nd(t))),t}return ha(t,e),t.prototype.notifyNext=function(){this.values.clear()},t.prototype.notifyError=function(e){this._error(e)},t.prototype._next=function(e){this.keySelector?this._useKeySelector(e):this._finalizeNext(e,e)},t.prototype._useKeySelector=function(e){var t=this.destination;try{var n=this.keySelector(e)}catch(r){return void t.error(r)}this._finalizeNext(n,e)},t.prototype._finalizeNext=function(e,t){var n=this.values;n.has(e)||(n.add(e),this.destination.next(t))},t}(od),bv=function(){function e(e){this.errorFactory=e}return e.prototype.call=function(e,t){return t.subscribe(new qB(e,this.errorFactory))},e}(),qB=function(e){function t(t,n){return(t=e.call(this,t)||this).errorFactory=n,t.hasValue=!1,t}return ha(t,e),t.prototype._next=function(e){this.hasValue=!0,this.destination.next(e)},t.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var e=void 0;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)},t}(za),cv=function(){function e(e){if(this.total=e,0>this.total)throw new Al}return e.prototype.call=function(e,t){return t.subscribe(new rB(e,this.total))},e}(),rB=function(e){function t(t,n){return(t=e.call(this,t)||this).total=n,t.count=0,t}return ha(t,e),t.prototype._next=function(e){var t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))},t}(za),dv=function(){function e(e){this.callback=e}return e.prototype.call=function(e,t){return t.subscribe(new sB(e,this.callback))},e}(),sB=function(e){function t(t,n){return(t=e.call(this,t)||this).add(new nb(n)),t}return ha(t,e),t}(za),fv=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new tB(e))},e}(),tB=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ha(t,e),t.prototype._next=function(e){},t}(za),gv=function(){function e(e){if(this.total=e,0>this.total)throw new Al}return e.prototype.call=function(e,t){return t.subscribe(new uB(e,this.total))},e}(),uB=function(e){function t(t,n){return(t=e.call(this,t)||this).total=n,t.ring=[],t.count=0,t}return ha(t,e),t.prototype._next=function(e){var t=this.ring,n=this.total,r=this.count++;t.length<n?t.push(e):t[r%n]=e},t.prototype._complete=function(){var e=this.destination,t=this.count;if(0<t)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,o=0;o<n;o++){var i=t++%n;e.next(r[i])}e.complete()},t}(za),hv=function(){function e(e){this.value=e}return e.prototype.call=function(e,t){return t.subscribe(new vB(e,this.value))},e}(),vB=function(e){function t(t,n){return(t=e.call(this,t)||this).value=n,t}return ha(t,e),t.prototype._next=function(e){this.destination.next(this.value)},t}(za),iv=function(){function e(e,t,n){void 0===n&&(n=!1),this.accumulator=e,this.seed=t,this.hasSeed=n}return e.prototype.call=function(e,t){return t.subscribe(new wB(e,this.accumulator,this.seed,this.hasSeed))},e}(),wB=function(e){function t(t,n,r,o){return(t=e.call(this,t)||this).accumulator=n,t._seed=r,t.hasSeed=o,t.index=0,t}return ha(t,e),Object.defineProperty(t.prototype,"seed",{get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e},enumerable:!0,configurable:!0}),t.prototype._next=function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)},t.prototype._tryNext=function(e){var t=this.index++;try{var n=this.accumulator(this.seed,e,t)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)},t}(za),mv=function(){function e(e,t){this.notifier=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new xB(e,this.notifier,this.source))},e}(),xB=function(e){function t(t,n,r){return(t=e.call(this,t)||this).notifier=n,t.source=r,t}return ha(t,e),t.prototype.error=function(t){if(!this.isStopped){var n=this.errors,r=this.retries,o=this.retriesSubscription;if(r)this.retriesSubscription=this.errors=void 0;else{n=new rb;try{r=(0,this.notifier)(n)}catch(i){return e.prototype.error.call(this,i)}o=bd(r,new nd(this))}this._unsubscribeAndRecycle(),this.errors=n,this.retries=r,this.retriesSubscription=o,n.next(t)}},t.prototype._unsubscribe=function(){var e=this.errors,t=this.retriesSubscription;e&&(e.unsubscribe(),this.errors=void 0),t&&(t.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},t.prototype.notifyNext=function(){var e=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=e,this.source.subscribe(this)},t}(od),pv=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new yB(e,this.project))},e}(),yB=function(e){function t(t,n){return(t=e.call(this,t)||this).project=n,t.index=0,t}return ha(t,e),t.prototype._next=function(e){var t=this.index++;try{var n=this.project(e,t)}catch(r){return void this.destination.error(r)}this._innerSub(n)},t.prototype._innerSub=function(e){var t=this.innerSubscription;t&&t.unsubscribe(),t=new nd(this);var n=this.destination;n.add(t),this.innerSubscription=bd(e,t),this.innerSubscription!==t&&n.add(this.innerSubscription)},t.prototype._complete=function(){var t=this.innerSubscription;t&&!t.closed||e.prototype._complete.call(this),this.unsubscribe()},t.prototype._unsubscribe=function(){this.innerSubscription=void 0},t.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&e.prototype._complete.call(this)},t.prototype.notifyNext=function(e){this.destination.next(e)},t}(od),qv=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){e=new zB(e);var n=bd(this.notifier,new nd(e));return n&&!e.seenValue?(e.add(n),t.subscribe(e)):e},e}(),zB=function(e){function t(t){return(t=e.call(this,t)||this).seenValue=!1,t}return ha(t,e),t.prototype.notifyNext=function(){this.seenValue=!0,this.complete()},t.prototype.notifyComplete=function(){},t}(od),rv=function(){function e(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}return e.prototype.call=function(e,t){return t.subscribe(new AB(e,this.nextOrObserver,this.error,this.complete))},e}(),AB=function(e){function t(t,n,r,o){return(t=e.call(this,t)||this)._tapNext=Ic,t._tapError=Ic,t._tapComplete=Ic,t._tapError=r||Ic,t._tapComplete=o||Ic,Ne(n)?(t._context=t,t._tapNext=n):n&&(t._context=n,t._tapNext=n.next||Ic,t._tapError=n.error||Ic,t._tapComplete=n.complete||Ic),t}return ha(t,e),t.prototype._next=function(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)},t.prototype._error=function(e){try{this._tapError.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.error(e)},t.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(e22){return void this.destination.error(e22)}return this.destination.complete()},t}(za),tv={leading:!0,trailing:!1};!function(e){function t(t,n,r,o){var i=e.call(this,t)||this;return i.destination=t,i.durationSelector=n,i._leading=r,i._trailing=o,i._hasValue=!1,i}ha(t,e),t.prototype._next=function(e){this._hasValue=!0,this._sendValue=e,this._throttled||(this._leading?this.send():this.throttle(e))},t.prototype.send=function(){var e=this._sendValue;this._hasValue&&(this.destination.next(e),this.throttle(e)),this._hasValue=!1,this._sendValue=void 0},t.prototype.throttle=function(e){(e=this.tryDurationSelector(e))&&this.add(this._throttled=bd(e,new nd(this)))},t.prototype.tryDurationSelector=function(e){try{return this.durationSelector(e)}catch(t){return this.destination.error(t),null}},t.prototype.throttlingDone=function(){var e=this._throttled,t=this._trailing;e&&e.unsubscribe(),this._throttled=void 0,t&&this.send()},t.prototype.notifyNext=function(){this.throttlingDone()},t.prototype.notifyComplete=function(){this.throttlingDone()}}(od);for(var uv=function(){function e(e,t,n,r){this.duration=e,this.scheduler=t,this.leading=n,this.trailing=r}return e.prototype.call=function(e,t){return t.subscribe(new BB(e,this.duration,this.scheduler,this.leading,this.trailing))},e}(),BB=function(e){function t(t,n,r,o,i){return(t=e.call(this,t)||this).duration=n,t.scheduler=r,t.leading=o,t.trailing=i,t._hasTrailingValue=!1,t._trailingValue=null,t}return ha(t,e),t.prototype._next=function(e){this.throttled?this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(vv,this.duration,{subscriber:this})),this.leading?this.destination.next(e):this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0))},t.prototype._complete=function(){this._hasTrailingValue&&this.destination.next(this._trailingValue),this.destination.complete()},t.prototype.clearThrottle=function(){var e=this.throttled;e&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),e.unsubscribe(),this.remove(e),this.throttled=null)},t}(za),xv=function(){function e(e,t,n,r){this.waitFor=e,this.absoluteTimeout=t,this.withObservable=n,this.scheduler=r}return e.prototype.call=function(e,t){return t.subscribe(new CB(e,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},e}(),CB=function(e){function t(t,n,r,o,i){return(t=e.call(this,t)||this).absoluteTimeout=n,t.waitFor=r,t.withObservable=o,t.scheduler=i,t.scheduleTimeout(),t}return ha(t,e),t.dispatchTimeout=function(e){var t=e.withObservable;e._unsubscribeAndRecycle(),e.add(bd(t,new nd(e)))},t.prototype.scheduleTimeout=function(){var e=this.action;e?this.action=e.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(t.dispatchTimeout,this.waitFor,this))},t.prototype._next=function(t){this.absoluteTimeout||this.scheduleTimeout(),e.prototype._next.call(this,t)},t.prototype._unsubscribe=function(){this.action=void 0,this.withObservable=this.scheduler=null},t}(od),zv=function(){function e(e,t){this.observables=e,this.project=t}return e.prototype.call=function(e,t){return t.subscribe(new DB(e,this.observables,this.project))},e}(),DB=function(e){function t(t,n,r){(t=e.call(this,t)||this).observables=n,t.project=r,t.toRespond=[],r=n.length,t.values=Array(r);for(var o=0;o<r;o++)t.toRespond.push(o);for(o=0;o<r;o++)t.add(bj(t,n[o],void 0,o));return t}return ha(t,e),t.prototype.notifyNext=function(e,t,n){this.values[n]=t,0<(e=this.toRespond).length&&-1!==(n=e.indexOf(n))&&e.splice(n,1)},t.prototype.notifyComplete=function(){},t.prototype._next=function(e){0===this.toRespond.length&&(e=[e].concat(this.values),this.project?this._tryProject(e):this.destination.next(e))},t.prototype._tryProject=function(e){try{var t=this.project.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)},t}(Bl),Kr=xb((function(e){var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var n=new Uint8Array(16);e.exports=function(){return t(n),n}}else{var r=Array(16);e.exports=function(){for(var e,t=0;16>t;t++)!(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}})),zb=[],pi=0;256>pi;++pi)zb[pi]=(pi+256).toString(16).substr(1);var Lr=function(e,t){return t=t||0,[zb[e[t++]],zb[e[t++]],zb[e[t++]],zb[e[t++]],"-",zb[e[t++]],zb[e[t++]],"-",zb[e[t++]],zb[e[t++]],"-",zb[e[t++]],zb[e[t++]],"-",zb[e[t++]],zb[e[t++]],zb[e[t++]],zb[e[t++]],zb[e[t++]],zb[e[t++]]].join("")},Ng=function(e,t,n){if(n=t&&n||0,"string"==typeof e&&(t="binary"===e?Array(16):null,e=null),(e=(e=e||{}).random||(e.rng||Kr)())[6]=15&e[6]|64,e[8]=63&e[8]|128,t)for(var r=0;16>r;++r)t[n+r]=e[r];return t||Lr(e)},Og=Ng(),gj=!1,yn=new AbortController,pd,Md,El,Fl,Nd,qe,Fc,re,nc,Gl,qd,se,rd,sd,td,zf;!function(e){e[e.ATTRIBUTE_OPERATION_ERR_FAILURE=2]="ATTRIBUTE_OPERATION_ERR_FAILURE",e[e.ATTRIBUTE_OPERATION_ERR_INVALID_ARGUMENT=3]="ATTRIBUTE_OPERATION_ERR_INVALID_ARGUMENT",e[e.ATTRIBUTE_OPERATION_ERR_SIZE_OVERFLOW=4]="ATTRIBUTE_OPERATION_ERR_SIZE_OVERFLOW",e[e.ATTRIBUTE_OPERATION_ERR_TOO_OFTEN=5]="ATTRIBUTE_OPERATION_ERR_TOO_OFTEN",e[e.ATTRIBUTE_OPERATION_ERR_USER_NOT_FOUND=6]="ATTRIBUTE_OPERATION_ERR_USER_NOT_FOUND",e[e.ATTRIBUTE_OPERATION_ERR_TIMEOUT=7]="ATTRIBUTE_OPERATION_ERR_TIMEOUT",e[e.ATTRIBUTE_OPERATION_ERR_USER_NOT_LOGGED_IN=102]="ATTRIBUTE_OPERATION_ERR_USER_NOT_LOGGED_IN"}(pd||(pd={})),function(e){e[e.CHANNEL_MESSAGE_ERR_FAILURE=1]="CHANNEL_MESSAGE_ERR_FAILURE",e[e.CHANNEL_MESSAGE_ERR_TIMEOUT=2]="CHANNEL_MESSAGE_ERR_TIMEOUT",e[e.CHANNEL_MESSAGE_ERR_TOO_OFTEN=3]="CHANNEL_MESSAGE_ERR_TOO_OFTEN",e[e.CHANNEL_MESSAGE_ERR_INVALID_MESSAGE=4]="CHANNEL_MESSAGE_ERR_INVALID_MESSAGE",e[e.CHANNEL_MESSAGE_ERR_NOT_IN_CHANNEL=5]="CHANNEL_MESSAGE_ERR_NOT_IN_CHANNEL",e[e.CHANNEL_MESSAGE_ERR_USER_NOT_LOGGED_IN=102]="CHANNEL_MESSAGE_ERR_USER_NOT_LOGGED_IN"}(Md||(Md={})),function(e){e[e.CREATE_CHANNEL_ERR_INVALID_ARGUMENT=1]="CREATE_CHANNEL_ERR_INVALID_ARGUMENT"}(El||(El={})),function(e){e[e.CREATE_INSTANCE_ERR_INVALID_ARGUMENT=1]="CREATE_INSTANCE_ERR_INVALID_ARGUMENT"}(Fl||(Fl={})),function(e){e[e.GET_MEMBERS_ERR_FAILURE=1]="GET_MEMBERS_ERR_FAILURE",e[e.GET_MEMBERS_ERR_REJECTED=2]="GET_MEMBERS_ERR_REJECTED",e[e.GET_MEMBERS_ERR_TIMEOUT=3]="GET_MEMBERS_ERR_TIMEOUT",e[e.GET_MEMBERS_ERR_TOO_OFTEN=4]="GET_MEMBERS_ERR_TOO_OFTEN",e[e.GET_MEMBERS_ERR_NOT_IN_CHANNEL=5]="GET_MEMBERS_ERR_NOT_IN_CHANNEL",e[e.GET_MEMBERS_ERR_USER_NOT_LOGGED_IN=102]="GET_MEMBERS_ERR_USER_NOT_LOGGED_IN"}(Nd||(Nd={})),function(e){e[e.INVITATION_API_CALL_ERR_INVALID_ARGUMENT=1]="INVITATION_API_CALL_ERR_INVALID_ARGUMENT",e[e.INVITATION_API_CALL_ERR_NOT_STARTED=2]="INVITATION_API_CALL_ERR_NOT_STARTED",e[e.INVITATION_API_CALL_ERR_ALREADY_END=3]="INVITATION_API_CALL_ERR_ALREADY_END",e[e.INVITATION_API_CALL_ERR_ALREADY_ACCEPT=4]="INVITATION_API_CALL_ERR_ALREADY_ACCEPT",e[e.INVITATION_API_CALL_ERR_ALREADY_SENT=5]="INVITATION_API_CALL_ERR_ALREADY_SENT"}(qe||(qe={})),function(e){e[e.JOIN_CHANNEL_ERR_FAILURE=1]="JOIN_CHANNEL_ERR_FAILURE",e[e.JOIN_CHANNEL_ERR_REJECTED=2]="JOIN_CHANNEL_ERR_REJECTED",e[e.JOIN_CHANNEL_ERR_INVALID_ARGUMENT=3]="JOIN_CHANNEL_ERR_INVALID_ARGUMENT",e[e.JOIN_CHANNEL_TIMEOUT=4]="JOIN_CHANNEL_TIMEOUT",e[e.JOIN_CHANNEL_ERR_EXCEED_LIMIT=5]="JOIN_CHANNEL_ERR_EXCEED_LIMIT",e[e.JOIN_CHANNEL_ERR_ALREADY_JOINED=6]="JOIN_CHANNEL_ERR_ALREADY_JOINED",e[e.JOIN_CHANNEL_ERR_TOO_OFTEN=7]="JOIN_CHANNEL_ERR_TOO_OFTEN",e[e.JOIN_CHANNEL_ERR_JOIN_SAME_CHANNEL_TOO_OFTEN=8]="JOIN_CHANNEL_ERR_JOIN_SAME_CHANNEL_TOO_OFTEN",e[e.JOIN_CHANNEL_ERR_USER_NOT_LOGGED_IN=102]="JOIN_CHANNEL_ERR_USER_NOT_LOGGED_IN",e[e.JOIN_CHANNEL_ERR_ABORTED_BY_LEAVE=201]="JOIN_CHANNEL_ERR_ABORTED_BY_LEAVE",e[e.JOIN_CHANNEL_ERR_ALREADY_JOINED_CHANNEL_OF_SAME_ID=202]="JOIN_CHANNEL_ERR_ALREADY_JOINED_CHANNEL_OF_SAME_ID"}(Fc||(Fc={})),function(e){e[e.LEAVE_CHANNEL_ERR_FAILURE=1]="LEAVE_CHANNEL_ERR_FAILURE",e[e.LEAVE_CHANNEL_ERR_REJECTED=2]="LEAVE_CHANNEL_ERR_REJECTED",e[e.LEAVE_CHANNEL_ERR_NOT_IN_CHANNEL=3]="LEAVE_CHANNEL_ERR_NOT_IN_CHANNEL",e[e.LEAVE_CHANNEL_ERR_KICKED=4]="LEAVE_CHANNEL_ERR_KICKED",e[e.LEAVE_CHANNEL_ERR_USER_NOT_LOGGED_IN=102]="LEAVE_CHANNEL_ERR_USER_NOT_LOGGED_IN"}(re||(re={})),function(e){e[e.LOGIN_ERR_UNKNOWN=1]="LOGIN_ERR_UNKNOWN",e[e.LOGIN_ERR_REJECTED=2]="LOGIN_ERR_REJECTED",e[e.LOGIN_ERR_INVALID_ARGUMENT=3]="LOGIN_ERR_INVALID_ARGUMENT",e[e.LOGIN_ERR_INVALID_APP_ID=4]="LOGIN_ERR_INVALID_APP_ID",e[e.LOGIN_ERR_INVALID_TOKEN=5]="LOGIN_ERR_INVALID_TOKEN",e[e.LOGIN_ERR_TOKEN_EXPIRED=6]="LOGIN_ERR_TOKEN_EXPIRED",e[e.LOGIN_ERR_NOT_AUTHORIZED=7]="LOGIN_ERR_NOT_AUTHORIZED",e[e.LOGIN_ERR_ALREADY_LOGIN=8]="LOGIN_ERR_ALREADY_LOGIN",e[e.LOGIN_ERR_TIMEOUT=9]="LOGIN_ERR_TIMEOUT",e[e.LOGIN_ERR_TOO_OFTEN=10]="LOGIN_ERR_TOO_OFTEN",e[e.LOGIN_ERR_ABORTED_BY_LOGOUT=201]="LOGIN_ERR_ABORTED_BY_LOGOUT"}(nc||(nc={})),function(e){e[e.LOGOUT_ERR_USER_NOT_LOGGED_IN=102]="LOGOUT_ERR_USER_NOT_LOGGED_IN"}(Gl||(Gl={})),function(e){e[e.PEER_MESSAGE_ERR_FAILURE=1]="PEER_MESSAGE_ERR_FAILURE",e[e.PEER_MESSAGE_ERR_TIMEOUT=2]="PEER_MESSAGE_ERR_TIMEOUT",e[e.PEER_MESSAGE_ERR_TOO_OFTEN=5]="PEER_MESSAGE_ERR_TOO_OFTEN",e[e.PEER_MESSAGE_ERR_INVALID_USERID=6]="PEER_MESSAGE_ERR_INVALID_USERID",e[e.PEER_MESSAGE_ERR_INVALID_MESSAGE=7]="PEER_MESSAGE_ERR_INVALID_MESSAGE",e[e.PEER_MESSAGE_ERR_INCOMPATIBLE_MESSAGE=8]="PEER_MESSAGE_ERR_INCOMPATIBLE_MESSAGE",e[e.PEER_MESSAGE_ERR_USER_NOT_LOGGED_IN=102]="PEER_MESSAGE_ERR_USER_NOT_LOGGED_IN"}(qd||(qd={})),function(e){e[e.QUERY_PEERS_ONLINE_STATUS_ERR_INVALID_ARGUMENT=2]="QUERY_PEERS_ONLINE_STATUS_ERR_INVALID_ARGUMENT",e[e.QUERY_PEERS_ONLINE_STATUS_ERR_REJECTED=3]="QUERY_PEERS_ONLINE_STATUS_ERR_REJECTED",e[e.QUERY_PEERS_ONLINE_STATUS_ERR_TIMEOUT=4]="QUERY_PEERS_ONLINE_STATUS_ERR_TIMEOUT",e[e.QUERY_PEERS_ONLINE_STATUS_ERR_TOO_OFTEN=5]="QUERY_PEERS_ONLINE_STATUS_ERR_TOO_OFTEN",e[e.QUERY_PEERS_ONLINE_STATUS_ERR_USER_NOT_LOGGED_IN=102]="QUERY_PEERS_ONLINE_STATUS_ERR_USER_NOT_LOGGED_IN"}(se||(se={})),function(e){e[e.RENEW_TOKEN_ERR_FAILURE=1]="RENEW_TOKEN_ERR_FAILURE",e[e.RENEW_TOKEN_ERR_INVALID_ARGUMENT=2]="RENEW_TOKEN_ERR_INVALID_ARGUMENT",e[e.RENEW_TOKEN_ERR_REJECTED=3]="RENEW_TOKEN_ERR_REJECTED",e[e.RENEW_TOKEN_ERR_TOO_OFTEN=4]="RENEW_TOKEN_ERR_TOO_OFTEN",e[e.RENEW_TOKEN_ERR_TOKEN_EXPIRED=5]="RENEW_TOKEN_ERR_TOKEN_EXPIRED",e[e.RENEW_TOKEN_ERR_INVALID_TOKEN=6]="RENEW_TOKEN_ERR_INVALID_TOKEN",e[e.RENEW_TOKEN_ERR_USER_NOT_LOGGED_IN=102]="RENEW_TOKEN_ERR_USER_NOT_LOGGED_IN",e[e.RENEW_TOKEN_ERR_ABORTED_BY_LOGOUT=201]="RENEW_TOKEN_ERR_ABORTED_BY_LOGOUT"}(rd||(rd={})),function(e){e[e.GET_CHANNEL_MEMBER_COUNT_ERR_FAILURE=1]="GET_CHANNEL_MEMBER_COUNT_ERR_FAILURE",e[e.GET_CHANNEL_MEMBER_COUNT_ERR_INVALID_ARGUMENT=2]="GET_CHANNEL_MEMBER_COUNT_ERR_INVALID_ARGUMENT",e[e.GET_CHANNEL_MEMBER_COUNT_ERR_TOO_OFTEN=3]="GET_CHANNEL_MEMBER_COUNT_ERR_TOO_OFTEN",e[e.GET_CHANNEL_MEMBER_COUNT_ERR_TIMEOUT=4]="GET_CHANNEL_MEMBER_COUNT_ERR_TIMEOUT",e[e.GET_CHANNEL_MEMBER_COUNT_ERR_EXCEED_LIMIT=5]="GET_CHANNEL_MEMBER_COUNT_ERR_EXCEED_LIMIT",e[e.GET_CHANNEL_MEMBER_COUNT_ERR_NOT_INITIALIZED=101]="GET_CHANNEL_MEMBER_COUNT_ERR_NOT_INITIALIZED",e[e.GET_CHANNEL_MEMBER_COUNT_ERR_USER_NOT_LOGGED_IN=102]="GET_CHANNEL_MEMBER_COUNT_ERR_USER_NOT_LOGGED_IN"}(sd||(sd={})),function(e){e[e.PEER_SUBSCRIPTION_STATUS_ERR_FAILURE=1]="PEER_SUBSCRIPTION_STATUS_ERR_FAILURE",e[e.PEER_SUBSCRIPTION_STATUS_ERR_INVALID_ARGUMENT=2]="PEER_SUBSCRIPTION_STATUS_ERR_INVALID_ARGUMENT",e[e.PEER_SUBSCRIPTION_STATUS_ERR_REJECTED=3]="PEER_SUBSCRIPTION_STATUS_ERR_REJECTED",e[e.PEER_SUBSCRIPTION_STATUS_ERR_TIMEOUT=4]="PEER_SUBSCRIPTION_STATUS_ERR_TIMEOUT",e[e.PEER_SUBSCRIPTION_STATUS_ERR_TOO_OFTEN=5]="PEER_SUBSCRIPTION_STATUS_ERR_TOO_OFTEN",e[e.PEER_SUBSCRIPTION_STATUS_ERR_OVERFLOW=6]="PEER_SUBSCRIPTION_STATUS_ERR_OVERFLOW",e[e.PEER_SUBSCRIPTION_STATUS_ERR_USER_NOT_LOGGED_IN=102]="PEER_SUBSCRIPTION_STATUS_ERR_USER_NOT_LOGGED_IN"}(td||(td={})),function(e){e[e.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_FAILURE=1]="QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_FAILURE",e[e.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TIMEOUT=2]="QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TIMEOUT",e[e.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TOO_OFTEN=3]="QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TOO_OFTEN",e[e.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_USER_NOT_LOGGED_IN=102]="QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_USER_NOT_LOGGED_IN"}(zf||(zf={}));var oc=pd.ATTRIBUTE_OPERATION_ERR_FAILURE,gb=pd.ATTRIBUTE_OPERATION_ERR_INVALID_ARGUMENT,Ye=pd.ATTRIBUTE_OPERATION_ERR_SIZE_OVERFLOW;pd.ATTRIBUTE_OPERATION_ERR_TOO_OFTEN;var Mr=pd.ATTRIBUTE_OPERATION_ERR_USER_NOT_FOUND,pc=pd.ATTRIBUTE_OPERATION_ERR_TIMEOUT,qc=pd.ATTRIBUTE_OPERATION_ERR_USER_NOT_LOGGED_IN,qi=Md.CHANNEL_MESSAGE_ERR_FAILURE,Hl=Md.CHANNEL_MESSAGE_ERR_TIMEOUT,Nr=Md.CHANNEL_MESSAGE_ERR_TOO_OFTEN,Il=Md.CHANNEL_MESSAGE_ERR_INVALID_MESSAGE,EB=Md.CHANNEL_MESSAGE_ERR_NOT_IN_CHANNEL,Jl=Md.CHANNEL_MESSAGE_ERR_USER_NOT_LOGGED_IN,FB=El.CREATE_CHANNEL_ERR_INVALID_ARGUMENT,Or=Fl.CREATE_INSTANCE_ERR_INVALID_ARGUMENT;sd.GET_CHANNEL_MEMBER_COUNT_ERR_FAILURE;var Pr=sd.GET_CHANNEL_MEMBER_COUNT_ERR_INVALID_ARGUMENT;sd.GET_CHANNEL_MEMBER_COUNT_ERR_TOO_OFTEN;var Qr=sd.GET_CHANNEL_MEMBER_COUNT_ERR_TIMEOUT,GB=sd.GET_CHANNEL_MEMBER_COUNT_ERR_EXCEED_LIMIT;sd.GET_CHANNEL_MEMBER_COUNT_ERR_NOT_INITIALIZED;var HB=sd.GET_CHANNEL_MEMBER_COUNT_ERR_USER_NOT_LOGGED_IN,IB=Nd.GET_MEMBERS_ERR_FAILURE,JB=Nd.GET_MEMBERS_ERR_REJECTED;Nd.GET_MEMBERS_ERR_TIMEOUT,Nd.GET_MEMBERS_ERR_TOO_OFTEN;var KB=Nd.GET_MEMBERS_ERR_NOT_IN_CHANNEL,LB=Nd.GET_MEMBERS_ERR_USER_NOT_LOGGED_IN,Xc=qe.INVITATION_API_CALL_ERR_INVALID_ARGUMENT,MB=qe.INVITATION_API_CALL_ERR_NOT_STARTED,ri=qe.INVITATION_API_CALL_ERR_ALREADY_END,Rr=qe.INVITATION_API_CALL_ERR_ALREADY_ACCEPT,NB=qe.INVITATION_API_CALL_ERR_ALREADY_SENT,Sr=Fc.JOIN_CHANNEL_ERR_FAILURE;Fc.JOIN_CHANNEL_ERR_REJECTED;var OB=Fc.JOIN_CHANNEL_ERR_INVALID_ARGUMENT,Tr=Fc.JOIN_CHANNEL_TIMEOUT,Ur=Fc.JOIN_CHANNEL_ERR_EXCEED_LIMIT,Vr=Fc.JOIN_CHANNEL_ERR_ALREADY_JOINED;Fc.JOIN_CHANNEL_ERR_TOO_OFTEN;var Wr=Fc.JOIN_CHANNEL_ERR_USER_NOT_LOGGED_IN,Xr=Fc.JOIN_CHANNEL_ERR_ALREADY_JOINED_CHANNEL_OF_SAME_ID,Yr=re.LEAVE_CHANNEL_ERR_FAILURE,Zr=re.LEAVE_CHANNEL_ERR_REJECTED,PB=re.LEAVE_CHANNEL_ERR_NOT_IN_CHANNEL,QB=re.LEAVE_CHANNEL_ERR_USER_NOT_LOGGED_IN,RB=re.LEAVE_CHANNEL_ERR_KICKED,$r=nc.LOGIN_ERR_UNKNOWN,Pg=nc.LOGIN_ERR_REJECTED,si=nc.LOGIN_ERR_INVALID_ARGUMENT,as=nc.LOGIN_ERR_INVALID_APP_ID,bs=nc.LOGIN_ERR_INVALID_TOKEN,ti=nc.LOGIN_ERR_TOKEN_EXPIRED;nc.LOGIN_ERR_NOT_AUTHORIZED;var SB=nc.LOGIN_ERR_ALREADY_LOGIN,TB=nc.LOGIN_ERR_TIMEOUT,UB=nc.LOGIN_ERR_TOO_OFTEN,cs=Gl.LOGOUT_ERR_USER_NOT_LOGGED_IN,ds=qd.PEER_MESSAGE_ERR_FAILURE,Kl=qd.PEER_MESSAGE_ERR_TIMEOUT,es=qd.PEER_MESSAGE_ERR_TOO_OFTEN,fs=qd.PEER_MESSAGE_ERR_INVALID_USERID,bg=qd.PEER_MESSAGE_ERR_INVALID_MESSAGE,Ll=qd.PEER_MESSAGE_ERR_USER_NOT_LOGGED_IN;qd.PEER_MESSAGE_ERR_INCOMPATIBLE_MESSAGE;var gs=se.QUERY_PEERS_ONLINE_STATUS_ERR_INVALID_ARGUMENT;se.QUERY_PEERS_ONLINE_STATUS_ERR_REJECTED;var VB=se.QUERY_PEERS_ONLINE_STATUS_ERR_TIMEOUT;se.QUERY_PEERS_ONLINE_STATUS_ERR_TOO_OFTEN;var WB=se.QUERY_PEERS_ONLINE_STATUS_ERR_USER_NOT_LOGGED_IN,Ml=rd.RENEW_TOKEN_ERR_FAILURE,XB=rd.RENEW_TOKEN_ERR_INVALID_ARGUMENT;rd.RENEW_TOKEN_ERR_REJECTED,rd.RENEW_TOKEN_ERR_TOO_OFTEN;var YB=rd.RENEW_TOKEN_ERR_TOKEN_EXPIRED,ZB=rd.RENEW_TOKEN_ERR_INVALID_TOKEN,hs=rd.RENEW_TOKEN_ERR_USER_NOT_LOGGED_IN,is=td.PEER_SUBSCRIPTION_STATUS_ERR_FAILURE,Qg=td.PEER_SUBSCRIPTION_STATUS_ERR_INVALID_ARGUMENT;td.PEER_SUBSCRIPTION_STATUS_ERR_REJECTED;var $B=td.PEER_SUBSCRIPTION_STATUS_ERR_TIMEOUT;td.PEER_SUBSCRIPTION_STATUS_ERR_TOO_OFTEN;var js=td.PEER_SUBSCRIPTION_STATUS_ERR_OVERFLOW,Nl=td.PEER_SUBSCRIPTION_STATUS_ERR_USER_NOT_LOGGED_IN;zf.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_FAILURE,zf.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TIMEOUT,zf.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TOO_OFTEN,zf.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_USER_NOT_LOGGED_IN;var aC=function(e,t){var n;return rl(e,(function(e,r,o){return!(n=t(e,r,o))})),!!n},ui=function(e,t,n){if(!Gb(n))return!1;var r=qa(t);return!!("number"==r?ae(n)&&gl(t,n.length):"string"==r&&t in n)&&Gg(n[t],e)},Ol=function(e,t,n){return(ub(e)?ur:aC)(e,wf(t))},bC=function(e,t){var n=-1,r=ae(e)?Array(e.length):[];return rl(e,(function(e,o,i){r[++n]=t(e,o,i)})),r},cC=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e},dC=function(e,t,n){t=t.length?Je(t,(function(e){return ub(e)?function(t){return li(t,1===e.length?e[0]:e)}:e})):[mi];var r=-1;return t=Je(t,ii(wf)),e=bC(e,(function(e,n,o){return{criteria:Je(t,(function(t){return t(e)})),index:++r,value:e}})),cC(e,(function(e,t){e:{for(var r=-1,o=e.criteria,i=t.criteria,a=o.length,s=n.length;++r<a;){t:{var c=o[r],l=i[r];if(c!==l){var u=void 0!==c,d=null===c,A=c==c,p=Ke(c),h=void 0!==l,f=null===l,g=l==l,m=Ke(l);if(!f&&!m&&!p&&c>l||p&&h&&g&&!f&&!m||d&&h&&g||!u&&g||!A){c=1;break t}if(!d&&!p&&!m&&c<l||m&&u&&A&&!d&&!p||f&&u&&A||!h&&A||!g){c=-1;break t}}c=0}if(c){e=r>=s?c:c*("desc"==n[r]?-1:1);break e}}e=e.index-t.index}return e}))},ks=function(e,t){return sr(rr(e,t,mi),e+"")},ls=ks((function(e,t){if(null==e)return[];var n=t.length;return 1<n&&ui(e,t[0],t[1])?t=[]:2<n&&ui(t[0],t[1],t[2])&&(t=[t[0]]),dC(e,Si(t),[])})),ms=function(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})})),t}(iB),ns=xb((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=[],r=function(e,t){return new WebSocket(e,t)};t.normalClosureMessage="Normal closure",t.default=function(e,o){var i=(o=void 0===o?{protocols:n,makeWebSocket:r}:o).protocols,a=void 0===i?n:i,s=void 0===(o=o.makeWebSocket)?r:o;return new ms.Observable((function(n){var r,o=new ms.Subject,i=s(e,a),c=!1,l=!1,u=function(e){if(r)throw c=!0,e=Error("Web socket message factory function called more than once"),n.error(e),e;return r=e.subscribe((function(e){i.send(e)})),o};return i.onopen=function(){l?(c=!0,i.close()):n.next(u)},i.onmessage=function(e){o.next(e.data)},i.onerror=function(e){c=!0,n.error(Error(e.message))},i.onclose=function(e){c||(c=!0,l?(n.complete(),o.complete()):n.error(Error(1e3===e.code?t.normalClosureMessage:e.reason)))},function(){l=!0,r&&r.unsubscribe(),c||(c=!0,i.close())}}))}}));!function(e){e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")&&e.default}(ns);var ij=function(e,t,n){(void 0===n||Gg(e[t],n))&&(void 0!==n||t in e)||Ig(e,t,n)},hj=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]},eC=function(e){return ks((function(t,n){var r=-1,o=n.length,i=1<o?n[o-1]:void 0,a=2<o?n[2]:void 0;for(i=3<e.length&&"function"==typeof i?(o--,i):void 0,a&&ui(n[0],n[1],a)&&(i=3>o?void 0:i,o=1),t=Object(t);++r<o;)(a=n[r])&&e(t,a,r,i);return t}))}((function(e,t,n,r){zn(e,t,n,r)})),fC=Math.floor,gC=Math.random,os=function(e,t){return e+fC(gC()*(t-e+1))},ps=function(e){var t=e.length;return t?e[os(0,t-1)]:void 0},hC=function(e,t){return Je(t,(function(t){return e[t]}))},zj=function(e){return null==e?[]:hC(e,Wd(e))},iC=function(e){return ps(zj(e))},On=function(e){return(ub(e)?ps:iC)(e)},Dn=[],En=function(e,t){return new WebSocket(e,t)},jC=Math.floor;ea({target:"Number",stat:!0},{isInteger:function(e){return!xa(e)&&isFinite(e)&&jC(e)===e}}),Sp("from",sk,rk);var kC=function(e,t){for(var n=Array(arguments.length-1),r=0,o=2,i=!0;o<arguments.length;)n[r++]=arguments[o++];return new Promise((function(o,a){n[r]=function(e){if(i)if(i=!1,e)a(e);else{for(var t=Array(arguments.length-1),n=0;n<t.length;)t[n++]=arguments[n];o.apply(null,t)}};try{e.apply(t||null,n)}catch(e22){i&&(i=!1,a(e22))}}))},lC=xb((function(e,t){t.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;1<--t%4&&"="===e.charAt(t);)++n;return Math.ceil(3*e.length)/4-n};var n=Array(64),r=Array(123);for(e=0;64>e;)r[n[e]=26>e?e+65:52>e?e+71:62>e?e-4:e-59|43]=e++;t.encode=function(e,t,r){for(var o,i=null,a=[],s=0,c=0;t<r;){var l=e[t++];switch(c){case 0:a[s++]=n[l>>2],o=(3&l)<<4,c=1;break;case 1:a[s++]=n[o|l>>4],o=(15&l)<<2,c=2;break;case 2:a[s++]=n[o|l>>6],a[s++]=n[63&l],c=0}8191<s&&((i||(i=[])).push(String.fromCharCode.apply(String,a)),s=0)}return c&&(a[s++]=n[o],a[s++]=61,1===c&&(a[s++]=61)),i?(s&&i.push(String.fromCharCode.apply(String,a.slice(0,s))),i.join("")):String.fromCharCode.apply(String,a.slice(0,s))},t.decode=function(e,t,n){for(var o,i=n,a=0,s=0;s<e.length;){var c=e.charCodeAt(s++);if(61===c&&1<a)break;if(void 0===(c=r[c]))throw Error("invalid encoding");switch(a){case 0:o=c,a=1;break;case 1:t[n++]=o<<2|(48&c)>>4,o=c,a=2;break;case 2:t[n++]=(15&o)<<4|(60&c)>>2,o=c,a=3;break;case 3:t[n++]=(3&o)<<6|c,a=0}}if(1===a)throw Error("invalid encoding");return n-i},t.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}}));hh.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this},hh.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else{e=this._listeners[e];for(var n=0;n<e.length;)e[n].fn===t?e.splice(n,1):++n}return this},hh.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<t.length;)t[r].fn.apply(t[r++].ctx,n)}return this};var mC=Fn(Fn),nC=function(c){try{var b=eval("quire".replace(/^/,"re"))(c);if(b&&(b.length||Object.keys(b).length))return b}catch(e2){}return null},oC=xb((function(e,t){t.length=function(e){for(var t,n=0,r=0;r<e.length;++r)128>(t=e.charCodeAt(r))?n+=1:2048>t?n+=2:55296==(64512&t)&&56320==(64512&e.charCodeAt(r+1))?(++r,n+=4):n+=3;return n},t.read=function(e,t,n){if(1>n-t)return"";for(var r,o=null,i=[],a=0;t<n;)128>(r=e[t++])?i[a++]=r:191<r&&224>r?i[a++]=(31&r)<<6|63&e[t++]:239<r&&365>r?(r=((7&r)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,i[a++]=55296+(r>>10),i[a++]=56320+(1023&r)):i[a++]=(15&r)<<12|(63&e[t++])<<6|63&e[t++],8191<a&&((o||(o=[])).push(String.fromCharCode.apply(String,i)),a=0);return o?(a&&o.push(String.fromCharCode.apply(String,i.slice(0,a))),o.join("")):String.fromCharCode.apply(String,i.slice(0,a))},t.write=function(e,t,n){for(var r,o,i=n,a=0;a<e.length;++a)128>(r=e.charCodeAt(a))?t[n++]=r:(2048>r?t[n++]=r>>6|192:(55296==(64512&r)&&56320==(64512&(o=e.charCodeAt(a+1)))?(r=65536+((1023&r)<<10)+(1023&o),++a,t[n++]=r>>18|240,t[n++]=r>>12&63|128):t[n++]=r>>12|224,t[n++]=r>>6&63|128),t[n++]=63&r|128);return n-i}})),pC=function(e,t,n){var r=n||8192,o=r>>>1,i=null,a=r;return function(n){return 1>n||n>o?e(n):(a+n>r&&(i=e(r),a=0),n=t.call(i,a,a+=n),7&a&&(a=1+(7|a)),n)}},te=vb.zero=new vb(0,0);te.toNumber=function(){return 0},te.zzEncode=te.zzDecode=function(){return this},te.length=function(){return 1};var qC=vb.zeroHash="\0\0\0\0\0\0\0\0";vb.fromNumber=function(e){if(0===e)return te;var t=0>e;t&&(e=-e);var n=e>>>0;return e=(e-n)/4294967296>>>0,t&&(e=~e>>>0,n=~n>>>0,4294967295<++n&&(n=0,4294967295<++e&&(e=0))),new vb(n,e)},vb.from=function(e){if("number"==typeof e)return vb.fromNumber(e);if(pa.isString(e)){if(!pa.Long)return vb.fromNumber(parseInt(e,10));e=pa.Long.fromString(e)}return e.low||e.high?new vb(e.low>>>0,e.high>>>0):te},vb.prototype.toNumber=function(e){if(!e&&this.hi>>>31){e=1+~this.lo>>>0;var t=~this.hi>>>0;return e||(t=t+1>>>0),-(e+4294967296*t)}return this.lo+4294967296*this.hi},vb.prototype.toLong=function(e){return pa.Long?new pa.Long(0|this.lo,0|this.hi,!!e):{low:0|this.lo,high:0|this.hi,unsigned:!!e}};var Od=String.prototype.charCodeAt;vb.fromHash=function(e){return e===qC?te:new vb((Od.call(e,0)|Od.call(e,1)<<8|Od.call(e,2)<<16|Od.call(e,3)<<24)>>>0,(Od.call(e,4)|Od.call(e,5)<<8|Od.call(e,6)<<16|Od.call(e,7)<<24)>>>0)},vb.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},vb.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},vb.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},vb.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===t?16384>e?128>e?1:2:2097152>e?3:4:16384>t?128>t?5:6:2097152>t?7:8:128>n?9:10};var pa=xb((function(e,t){function n(e,t,n){for(var r=Object.keys(t),o=0;o<r.length;++o)void 0!==e[r[o]]&&n||(e[r[o]]=t[r[o]]);return e}function r(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:Error().stack||""}),r&&n(this,r)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}t.asPromise=kC,t.base64=lC,t.EventEmitter=hh,t.float=mC,t.inquire=nC,t.utf8=oC,t.pool=pC,t.LongBits=vb,t.isNode=!!(void 0!==Ya&&Ya&&Ya.process&&Ya.process.versions&&Ya.process.versions.node),t.global=t.isNode&&Ya||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||Ya,t.emptyArray=Object.freeze?Object.freeze([]):[],t.emptyObject=Object.freeze?Object.freeze({}):{},t.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},t.isString=function(e){return"string"==typeof e||e instanceof String},t.isObject=function(e){return e&&"object"===qa(e)},t.isset=t.isSet=function(e,t){var n=e[t];return!(null==n||!e.hasOwnProperty(t))&&("object"!==qa(n)||0<(Array.isArray(n)?n.length:Object.keys(n).length))},t.Buffer=function(){try{var e=t.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(n){return null}}(),t._Buffer_from=null,t._Buffer_allocUnsafe=null,t.newBuffer=function(e){return"number"==typeof e?t.Buffer?t._Buffer_allocUnsafe(e):new t.Array(e):t.Buffer?t._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},t.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,t.Long=t.global.dcodeIO&&t.global.dcodeIO.Long||t.global.Long||t.inquire("long"),t.key2Re=/^true|false|0|1$/,t.key32Re=/^-?(?:0|[1-9][0-9]*)$/,t.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,t.longToHash=function(e){return e?t.LongBits.from(e).toHash():t.LongBits.zeroHash},t.longFromHash=function(e,n){return e=t.LongBits.fromHash(e),t.Long?t.Long.fromBits(e.lo,e.hi,n):e.toNumber(!!n)},t.merge=n,t.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},t.newError=r,t.ProtocolError=r("ProtocolError"),t.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var e=Object.keys(this),n=e.length-1;-1<n;--n)if(1===t[e[n]]&&void 0!==this[e[n]]&&null!==this[e[n]])return e[n]}},t.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}},t.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},t._configure=function(){var e=t.Buffer;e?(t._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,n){return new e(t,n)},t._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):t._Buffer_from=t._Buffer_allocUnsafe=null}})),qj=Aa,Pl,vi=pa.LongBits,qs=pa.base64,rs=pa.utf8,ss=function(){return pa.Buffer?function(){return(Aa.create=function(){return new Pl})()}:function(){return new Aa}};Aa.create=ss(),Aa.alloc=function(e){return new pa.Array(e)},pa.Array!==Array&&(Aa.alloc=pa.pool(Aa.alloc,pa.Array.prototype.subarray)),Aa.prototype._push=function(e,t,n){return this.tail=this.tail.next=new Wf(e,t,n),this.len+=t,this},nj.prototype=Object.create(Wf.prototype),nj.prototype.fn=function(e,t,n){for(;127<e;)t[n++]=127&e|128,e>>>=7;t[n]=e},Aa.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new nj(128>(e>>>=0)?1:16384>e?2:2097152>e?3:268435456>e?4:5,e)).len,this},Aa.prototype.int32=function(e){return 0>e?this._push(oj,10,vi.fromNumber(e)):this.uint32(e)},Aa.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},Aa.prototype.uint64=function(e){return e=vi.from(e),this._push(oj,e.length(),e)},Aa.prototype.int64=Aa.prototype.uint64,Aa.prototype.sint64=function(e){return e=vi.from(e).zzEncode(),this._push(oj,e.length(),e)},Aa.prototype.bool=function(e){return this._push(mj,1,e?1:0)},Aa.prototype.fixed32=function(e){return this._push(pj,4,e>>>0)},Aa.prototype.sfixed32=Aa.prototype.fixed32,Aa.prototype.fixed64=function(e){return e=vi.from(e),this._push(pj,4,e.lo)._push(pj,4,e.hi)},Aa.prototype.sfixed64=Aa.prototype.fixed64,Aa.prototype.float=function(e){return this._push(pa.float.writeFloatLE,4,e)},Aa.prototype.double=function(e){return this._push(pa.float.writeDoubleLE,8,e)};var rC=pa.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var r=0;r<e.length;++r)t[n+r]=e[r]};Aa.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(mj,1,0);if(pa.isString(e)){var n=Aa.alloc(t=qs.length(e));qs.decode(e,n,0),e=n}return this.uint32(t)._push(rC,t,e)},Aa.prototype.string=function(e){var t=rs.length(e);return t?this.uint32(t)._push(rs.write,t,e):this._push(mj,1,0)},Aa.prototype.fork=function(){return this.states=new Cv(this),this.head=this.tail=new Wf(lj,0,0),this.len=0,this},Aa.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Wf(lj,0,0),this.len=0),this},Aa.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this},Aa.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t},Aa._configure=function(e){Pl=e,Aa.create=ss(),Pl._configure()},(Lc.prototype=Object.create(qj.prototype)).constructor=Lc,Lc._configure=function(){Lc.alloc=pa._Buffer_allocUnsafe,Lc.writeBytesBuffer=pa.Buffer&&pa.Buffer.prototype instanceof Uint8Array&&"set"===pa.Buffer.prototype.set.name?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var r=0;r<e.length;)t[n++]=e[r++]}},Lc.prototype.bytes=function(e){pa.isString(e)&&(e=pa._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(Lc.writeBytesBuffer,t,e),this},Lc.prototype.string=function(e){var t=pa.Buffer.byteLength(e);return this.uint32(t),t&&this._push(Dv,t,e),this},Lc._configure();var sj=ib,Ql,Kn=pa.LongBits,sC=pa.utf8,ts="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new ib(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new ib(e);throw Error("illegal buffer")},us=function(){return pa.Buffer?function(e){return(ib.create=function(e){return pa.Buffer.isBuffer(e)?new Ql(e):ts(e)})(e)}:ts};ib.create=us(),ib.prototype._slice=pa.Array.prototype.subarray||pa.Array.prototype.slice,ib.prototype.uint32=function(){var e=4294967295;return function(){if(e=(127&this.buf[this.pos])>>>0,128>this.buf[this.pos++])return e;if(e=(e|(127&this.buf[this.pos])<<7)>>>0,128>this.buf[this.pos++])return e;if(e=(e|(127&this.buf[this.pos])<<14)>>>0,128>this.buf[this.pos++])return e;if(e=(e|(127&this.buf[this.pos])<<21)>>>0,128>this.buf[this.pos++])return e;if(e=(e|(15&this.buf[this.pos])<<28)>>>0,128>this.buf[this.pos++])return e;if((this.pos+=5)>this.len)throw this.pos=this.len,wc(this,10);return e}}(),ib.prototype.int32=function(){return 0|this.uint32()},ib.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)},ib.prototype.bool=function(){return 0!==this.uint32()},ib.prototype.fixed32=function(){if(this.pos+4>this.len)throw wc(this,4);return ih(this.buf,this.pos+=4)},ib.prototype.sfixed32=function(){if(this.pos+4>this.len)throw wc(this,4);return 0|ih(this.buf,this.pos+=4)},ib.prototype.float=function(){if(this.pos+4>this.len)throw wc(this,4);var e=pa.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},ib.prototype.double=function(){if(this.pos+8>this.len)throw wc(this,4);var e=pa.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},ib.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw wc(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)},ib.prototype.string=function(){var e=this.bytes();return sC.read(e,0,e.length)},ib.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw wc(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw wc(this)}while(128&this.buf[this.pos++]);return this},ib.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},ib._configure=function(e){Ql=e,ib.create=us(),Ql._configure();var t=pa.Long?"toLong":"toNumber";pa.merge(ib.prototype,{int64:function(){return rj.call(this)[t](!1)},uint64:function(){return rj.call(this)[t](!0)},sint64:function(){return rj.call(this).zzDecode()[t](!1)},fixed64:function(){return Ln.call(this)[t](!0)},sfixed64:function(){return Ln.call(this)[t](!1)}})},(be.prototype=Object.create(sj.prototype)).constructor=be,be._configure=function(){pa.Buffer&&(be.prototype._slice=pa.Buffer.prototype.slice)},be.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},be._configure(),(Xf.prototype=Object.create(pa.EventEmitter.prototype)).constructor=Xf,Xf.prototype.rpcCall=function e(t,n,r,o,i){if(!o)throw TypeError("request must be specified");var a=this;if(!i)return pa.asPromise(e,a,t,n,r,o);if(a.rpcImpl)try{return a.rpcImpl(t,n[a.requestDelimited?"encodeDelimited":"encode"](o).finish(),(function(e,n){if(e)return a.emit("error",e,t),i(e);if(null!==n){if(!(n instanceof r))try{n=r[a.responseDelimited?"decodeDelimited":"decode"](n)}catch(o){return a.emit("error",o,t),i(o)}return a.emit("data",n,t),i(null,n)}a.end(!0)}))}catch(e22){a.emit("error",e22,t),setTimeout((function(){i(e22)}),0)}else setTimeout((function(){i(Error("already ended"))}),0)},Xf.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};var tC=xb((function(e,t){t.Service=Xf})),uC={},Gc=xb((function(e,t){function n(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}var r=t;r.build="minimal",r.Writer=qj,r.BufferWriter=Lc,r.Reader=sj,r.BufferReader=be,r.util=pa,r.rpc=tC,r.roots=uC,r.configure=n,n()}));Gc.util.Long=P,Gc.configure();var M=Gc.Reader,ia=Gc.Writer,D=Gc.util,I=Gc.roots.default||(Gc.roots.default={}),vC=I.URI=function(){var e={},t=Object.create(e);return t[e[0]="Unknown"]=0,t[e[1]="PingUri"]=1,t[e[2]="PongUri"]=2,t[e[11]="UserJoinUri"]=11,t[e[12]="UserRespUri"]=12,t[e[15]="UserTicketNearlyExpireUri"]=15,t[e[16]="UserRenewTokenReqUri"]=16,t[e[17]="UserRenewTokenRespUri"]=17,t[e[21]="UserQuitUri"]=21,t[e[22]="UserDropUri"]=22,t[e[31]="GroupEnterUri"]=31,t[e[32]="GroupLeaveUri"]=32,t[e[33]="GroupReplyUri"]=33,t[e[35]="GroupDropUri"]=35,t[e[36]="GroupEnterNoticeUri"]=36,t[e[37]="GroupLeaveNoticeUri"]=37,t[e[38]="GroupEventNoticeUri"]=38,t[e[39]="GroupCountNoticeUri"]=39,t[e[41]="UserStatusListUri"]=41,t[e[42]="UserStatusResultUri"]=42,t[e[51]="GroupStatusListUri"]=51,t[e[52]="GroupStatusResultUri"]=52,t[e[55]="GroupAllUsersListUri"]=55,t[e[56]="GroupAllUsersResultUri"]=56,t[e[100]="MessageUri"]=100,t[e[101]="AckUri"]=101,t[e[201]="UserJoinNoticeUri"]=201,t[e[202]="UserQuitNoticeUri"]=202,t[e[203]="UserWaitNoticeUri"]=203,t[e[301]="UserAttributeGetUri"]=301,t[e[302]="UserAttributeRetUri"]=302,t[e[303]="UserAttributeSetUri"]=303,t[e[304]="UserAttributeModUri"]=304,t[e[305]="UserAttributeDelUri"]=305,t[e[307]="UserAttributeRspUri"]=307,t[e[308]="UserAttributeErrUri"]=308,t[e[311]="UserAttributeKeysGetUri"]=311,t[e[312]="UserAttributeKeysRetUri"]=312,t[e[351]="GroupAttributeGetUri"]=351,t[e[352]="GroupAttributeRetUri"]=352,t[e[353]="GroupAttributeSetUri"]=353,t[e[354]="GroupAttributeModUri"]=354,t[e[355]="GroupAttributeDelUri"]=355,t[e[356]="GroupAttributeAltUri"]=356,t[e[357]="GroupAttributeRspUri"]=357,t[e[358]="GroupAttributeErrUri"]=358,t[e[361]="GroupAttributeKeysGetUri"]=361,t[e[362]="GroupAttributeKeysRetUri"]=362,t[e[401]="SubscribeUserStatusUri"]=401,t[e[402]="UnsubscribeUserStatusUri"]=402,t[e[499]="SubscribeResponseUri"]=499,t}(),wi=I.Wrapper=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.uri=0,e.prototype.data=D.newBuffer([]),e.encode=function(e,t){return t||(t=ia.create()),null!=e.uri&&Object.hasOwnProperty.call(e,"uri")&&t.uint32(8).int32(e.uri),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&t.uint32(18).bytes(e.data),t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.Wrapper;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.uri=e.int32();break;case 2:n.data=e.bytes();break;default:e.skipType(7&r)}}return n},e}(),wC=I.Ping=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.ms=D.Long?D.Long.fromBits(0,0,!0):0,e.encode=function(e,t){return t||(t=ia.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.ms&&Object.hasOwnProperty.call(e,"ms")&&t.uint32(16).uint64(e.ms),t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.Ping;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.ms=e.uint64();break;default:e.skipType(7&r)}}return n},e}(),xC=I.Pong=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.ms=D.Long?D.Long.fromBits(0,0,!0):0,e.encode=function(e,t){return t||(t=ia.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.ms&&Object.hasOwnProperty.call(e,"ms")&&t.uint32(16).uint64(e.ms),t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.Pong;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.ms=e.uint64();break;default:e.skipType(7&r)}}return n},e}(),yC=I.UserJoin=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.opt=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.instance=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.account="",e.prototype.ticket="",e.encode=function(e,t){return t||(t=ia.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.opt&&Object.hasOwnProperty.call(e,"opt")&&t.uint32(16).uint64(e.opt),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(24).uint64(e.instance),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(34).string(e.account),null!=e.ticket&&Object.hasOwnProperty.call(e,"ticket")&&t.uint32(42).string(e.ticket),t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.UserJoin;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.opt=e.uint64();break;case 3:n.instance=e.uint64();break;case 4:n.account=e.string();break;case 5:n.ticket=e.string();break;default:e.skipType(7&r)}}return n},e}(),zC=I.UserResp=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.account="",e.prototype.code=0,e.encode=function(e,t){return t||(t=ia.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(18).string(e.account),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(24).uint32(e.code),t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.UserResp;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.account=e.string();break;case 3:n.code=e.uint32();break;default:e.skipType(7&r)}}return n},e}(),AC=I.UserQuit=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.encode=function(e,t){return t||(t=ia.create()),t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.UserQuit;e.pos<t;){var r=e.uint32();e.skipType(7&r)}return n},e}(),BC=I.UserDrop=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.code=0,e.encode=function(e,t){return t||(t=ia.create()),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).uint32(e.code),t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.UserDrop;e.pos<t;){var r=e.uint32();r>>>3==1?n.code=e.uint32():e.skipType(7&r)}return n},e}(),CC=I.UserTicketNearlyExpire=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.expireTs=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.ticket="",e.encode=function(e,t){return t||(t=ia.create()),null!=e.expireTs&&Object.hasOwnProperty.call(e,"expireTs")&&t.uint32(8).uint64(e.expireTs),null!=e.ticket&&Object.hasOwnProperty.call(e,"ticket")&&t.uint32(18).string(e.ticket),t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.UserTicketNearlyExpire;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.expireTs=e.uint64();break;case 2:n.ticket=e.string();break;default:e.skipType(7&r)}}return n},e}(),DC=I.UserRenewTokenReq=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.instance=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.account="",e.prototype.ticket="",e.encode=function(e,t){return t||(t=ia.create()),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(8).uint64(e.instance),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(16).uint64(e.seq),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(26).string(e.account),null!=e.ticket&&Object.hasOwnProperty.call(e,"ticket")&&t.uint32(34).string(e.ticket),t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.UserRenewTokenReq;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.instance=e.uint64();break;case 2:n.seq=e.uint64();break;case 3:n.account=e.string();break;case 4:n.ticket=e.string();break;default:e.skipType(7&r)}}return n},e}(),EC=I.UserRenewTokenResp=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.code=0,e.encode=function(e,t){return t||(t=ia.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(16).uint32(e.code),t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.UserRenewTokenResp;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.code=e.uint32();break;default:e.skipType(7&r)}}return n},e}(),FC=I.GroupEnter=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.account="",e.encode=function(e,t){return t||(t=ia.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(18).string(e.account),t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.GroupEnter;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.account=e.string();break;default:e.skipType(7&r)}}return n},e}(),GC=I.GroupLeave=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.account="",e.encode=function(e,t){return t||(t=ia.create()),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(10).string(e.account),t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.GroupLeave;e.pos<t;){var r=e.uint32();r>>>3==1?n.account=e.string():e.skipType(7&r)}return n},e}(),HC=I.GroupReply=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.account="",e.prototype.code=0,e.encode=function(e,t){return t||(t=ia.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(18).string(e.account),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(24).uint32(e.code),t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.GroupReply;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.account=e.string();break;case 3:n.code=e.uint32();break;default:e.skipType(7&r)}}return n},e}(),vs=I.GroupLeaveNotice=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.user="",e.prototype.group="",e.prototype.instance=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.size=0,e.encode=function(e,t){return t||(t=ia.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.user&&Object.hasOwnProperty.call(e,"user")&&t.uint32(18).string(e.user),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(26).string(e.group),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(32).uint64(e.instance),null!=e.size&&Object.hasOwnProperty.call(e,"size")&&t.uint32(40).uint32(e.size),t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.GroupLeaveNotice;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.user=e.string();break;case 3:n.group=e.string();break;case 4:n.instance=e.uint64();break;case 5:n.size=e.uint32();break;default:e.skipType(7&r)}}return n},e}(),ws=I.GroupEnterNotice=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.user="",e.prototype.group="",e.prototype.instance=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.size=0,e.encode=function(e,t){return t||(t=ia.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.user&&Object.hasOwnProperty.call(e,"user")&&t.uint32(18).string(e.user),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(26).string(e.group),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(32).uint64(e.instance),null!=e.size&&Object.hasOwnProperty.call(e,"size")&&t.uint32(40).uint32(e.size),t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.GroupEnterNotice;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.user=e.string();break;case 3:n.group=e.string();break;case 4:n.instance=e.uint64();break;case 5:n.size=e.uint32();break;default:e.skipType(7&r)}}return n},e}(),xs=I.Message=function(){function e(e){if(this.MiscMap={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.instance=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.dialogue=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.sequence=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.options=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.src="",e.prototype.dst="",e.prototype.payload=D.newBuffer([]),e.prototype.MiscMap=D.emptyObject,e.prototype.ms=D.Long?D.Long.fromBits(0,0,!0):0,e.encode=function(e,t){if(t||(t=ia.create()),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(8).uint64(e.instance),null!=e.dialogue&&Object.hasOwnProperty.call(e,"dialogue")&&t.uint32(16).uint64(e.dialogue),null!=e.sequence&&Object.hasOwnProperty.call(e,"sequence")&&t.uint32(24).uint64(e.sequence),null!=e.options&&Object.hasOwnProperty.call(e,"options")&&t.uint32(32).uint64(e.options),null!=e.src&&Object.hasOwnProperty.call(e,"src")&&t.uint32(42).string(e.src),null!=e.dst&&Object.hasOwnProperty.call(e,"dst")&&t.uint32(50).string(e.dst),null!=e.payload&&Object.hasOwnProperty.call(e,"payload")&&t.uint32(58).bytes(e.payload),null!=e.MiscMap&&Object.hasOwnProperty.call(e,"MiscMap"))for(var n=Object.keys(e.MiscMap),r=0;r<n.length;++r)t.uint32(66).fork().uint32(10).string(n[r]).uint32(18).bytes(e.MiscMap[n[r]]).ldelim();return null!=e.ms&&Object.hasOwnProperty.call(e,"ms")&&t.uint32(72).uint64(e.ms),t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n,r,o=new I.Message;e.pos<t;)switch(n=e.uint32(),n>>>3){case 1:o.instance=e.uint64();break;case 2:o.dialogue=e.uint64();break;case 3:o.sequence=e.uint64();break;case 4:o.options=e.uint64();break;case 5:o.src=e.string();break;case 6:o.dst=e.string();break;case 7:o.payload=e.bytes();break;case 8:o.MiscMap===D.emptyObject&&(o.MiscMap={});var i=e.uint32()+e.pos;for(n="",r=[];e.pos<i;){var a=e.uint32();switch(a>>>3){case 1:n=e.string();break;case 2:r=e.bytes();break;default:e.skipType(7&a)}}o.MiscMap[n]=r;break;case 9:o.ms=e.uint64();break;default:e.skipType(7&n)}return o},e}(),ys=I.Ack=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.instance=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.dialogue=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.sequence=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.code=0,e.encode=function(e,t){return t||(t=ia.create()),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(8).uint64(e.instance),null!=e.dialogue&&Object.hasOwnProperty.call(e,"dialogue")&&t.uint32(16).uint64(e.dialogue),null!=e.sequence&&Object.hasOwnProperty.call(e,"sequence")&&t.uint32(24).uint64(e.sequence),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(32).uint32(e.code),t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.Ack;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.instance=e.uint64();break;case 2:n.dialogue=e.uint64();break;case 3:n.sequence=e.uint64();break;case 4:n.code=e.uint32();break;default:e.skipType(7&r)}}return n},e}(),IC=I.GroupDrop=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.account="",e.prototype.code=0,e.encode=function(e,t){return t||(t=ia.create()),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(10).string(e.account),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(16).uint32(e.code),t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.GroupDrop;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.account=e.string();break;case 2:n.code=e.uint32();break;default:e.skipType(7&r)}}return n},e}(),JC=I.GroupAllUsersList=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.group="",e.prototype.pageSize=0,e.prototype.pageNumber=0,e.encode=function(e,t){return t||(t=ia.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(18).string(e.group),null!=e.pageSize&&Object.hasOwnProperty.call(e,"pageSize")&&t.uint32(24).uint32(e.pageSize),null!=e.pageNumber&&Object.hasOwnProperty.call(e,"pageNumber")&&t.uint32(32).uint32(e.pageNumber),t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.GroupAllUsersList;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.group=e.string();break;case 3:n.pageSize=e.uint32();break;case 4:n.pageNumber=e.uint32();break;default:e.skipType(7&r)}}return n},e}(),KC=I.GroupAllUsersResult=function(){function e(e){if(this.memberInfos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.group="",e.prototype.totalSize=0,e.prototype.pageSize=0,e.prototype.pageNumber=0,e.prototype.memberInfos=D.emptyArray,e.encode=function(e,t){if(t||(t=ia.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(18).string(e.group),null!=e.totalSize&&Object.hasOwnProperty.call(e,"totalSize")&&t.uint32(24).uint32(e.totalSize),null!=e.pageSize&&Object.hasOwnProperty.call(e,"pageSize")&&t.uint32(32).uint32(e.pageSize),null!=e.pageNumber&&Object.hasOwnProperty.call(e,"pageNumber")&&t.uint32(40).uint32(e.pageNumber),null!=e.memberInfos&&e.memberInfos.length)for(var n=0;n<e.memberInfos.length;++n)I.GroupAllUsersResult.MemberInfo.encode(e.memberInfos[n],t.uint32(50).fork()).ldelim();return t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.GroupAllUsersResult;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.group=e.string();break;case 3:n.totalSize=e.uint32();break;case 4:n.pageSize=e.uint32();break;case 5:n.pageNumber=e.uint32();break;case 6:n.memberInfos&&n.memberInfos.length||(n.memberInfos=[]),n.memberInfos.push(I.GroupAllUsersResult.MemberInfo.decode(e,e.uint32()));break;default:e.skipType(7&r)}}return n},e.MemberInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.account="",e.prototype.ts=0,e.encode=function(e,t){return t||(t=ia.create()),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(10).string(e.account),null!=e.ts&&Object.hasOwnProperty.call(e,"ts")&&t.uint32(16).uint32(e.ts),t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.GroupAllUsersResult.MemberInfo;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.account=e.string();break;case 2:n.ts=e.uint32();break;default:e.skipType(7&r)}}return n},e}(),e}(),LC=I.UserStatusList=function(){function e(e){if(this.users=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.users=D.emptyArray,e.encode=function(e,t){if(t||(t=ia.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.users&&e.users.length)for(var n=0;n<e.users.length;++n)t.uint32(18).string(e.users[n]);return t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.UserStatusList;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.users&&n.users.length||(n.users=[]),n.users.push(e.string());break;default:e.skipType(7&r)}}return n},e}(),MC=I.UserStatusResult=function(){function e(e){if(this.userInfos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.userInfos=D.emptyArray,e.encode=function(e,t){if(t||(t=ia.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.userInfos&&e.userInfos.length)for(var n=0;n<e.userInfos.length;++n)I.UserStatusResult.UserStatusInfo.encode(e.userInfos[n],t.uint32(18).fork()).ldelim();return t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.UserStatusResult;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.userInfos&&n.userInfos.length||(n.userInfos=[]),n.userInfos.push(I.UserStatusResult.UserStatusInfo.decode(e,e.uint32()));break;default:e.skipType(7&r)}}return n},e.UserStatusInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.account="",e.prototype.ts=0,e.encode=function(e,t){return t||(t=ia.create()),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(10).string(e.account),null!=e.ts&&Object.hasOwnProperty.call(e,"ts")&&t.uint32(16).uint32(e.ts),t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.UserStatusResult.UserStatusInfo;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.account=e.string();break;case 2:n.ts=e.uint32();break;default:e.skipType(7&r)}}return n},e}(),e}(),NC=I.UserAttributeGet=function(){function e(e){if(this.attributes=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.account="",e.prototype.attributes=D.emptyArray,e.encode=function(e,t){if(t||(t=ia.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(18).string(e.account),null!=e.attributes&&e.attributes.length)for(var n=0;n<e.attributes.length;++n)t.uint32(26).string(e.attributes[n]);return t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.UserAttributeGet;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.account=e.string();break;case 3:n.attributes&&n.attributes.length||(n.attributes=[]),n.attributes.push(e.string());break;default:e.skipType(7&r)}}return n},e}(),OC=I.UserAttributeRet=function(){function e(e){if(this.attributeInfos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.attributeInfos=D.emptyArray,e.encode=function(e,t){if(t||(t=ia.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.attributeInfos&&e.attributeInfos.length)for(var n=0;n<e.attributeInfos.length;++n)I.UserAttributeRet.AttributeInfo.encode(e.attributeInfos[n],t.uint32(18).fork()).ldelim();return t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.UserAttributeRet;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.attributeInfos&&n.attributeInfos.length||(n.attributeInfos=[]),n.attributeInfos.push(I.UserAttributeRet.AttributeInfo.decode(e,e.uint32()));break;default:e.skipType(7&r)}}return n},e.AttributeInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.key="",e.prototype.value="",e.encode=function(e,t){return t||(t=ia.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.UserAttributeRet.AttributeInfo;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.key=e.string();break;case 2:n.value=e.string();break;default:e.skipType(7&r)}}return n},e}(),e}(),PC=I.UserAttributeSet=function(){function e(e){if(this.attributeInfos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.account="",e.prototype.attributeInfos=D.emptyArray,e.encode=function(e,t){if(t||(t=ia.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(18).string(e.account),null!=e.attributeInfos&&e.attributeInfos.length)for(var n=0;n<e.attributeInfos.length;++n)I.UserAttributeSet.AttributeInfo.encode(e.attributeInfos[n],t.uint32(26).fork()).ldelim();return t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.UserAttributeSet;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.account=e.string();break;case 3:n.attributeInfos&&n.attributeInfos.length||(n.attributeInfos=[]),n.attributeInfos.push(I.UserAttributeSet.AttributeInfo.decode(e,e.uint32()));break;default:e.skipType(7&r)}}return n},e.AttributeInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.key="",e.prototype.value="",e.encode=function(e,t){return t||(t=ia.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.UserAttributeSet.AttributeInfo;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.key=e.string();break;case 2:n.value=e.string();break;default:e.skipType(7&r)}}return n},e}(),e}(),QC=I.UserAttributeMod=function(){function e(e){if(this.attributeInfos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.account="",e.prototype.attributeInfos=D.emptyArray,e.encode=function(e,t){if(t||(t=ia.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(18).string(e.account),null!=e.attributeInfos&&e.attributeInfos.length)for(var n=0;n<e.attributeInfos.length;++n)I.UserAttributeMod.AttributeInfo.encode(e.attributeInfos[n],t.uint32(26).fork()).ldelim();return t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.UserAttributeMod;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.account=e.string();break;case 3:n.attributeInfos&&n.attributeInfos.length||(n.attributeInfos=[]),n.attributeInfos.push(I.UserAttributeMod.AttributeInfo.decode(e,e.uint32()));break;default:e.skipType(7&r)}}return n},e.AttributeInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.key="",e.prototype.value="",e.encode=function(e,t){return t||(t=ia.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.UserAttributeMod.AttributeInfo;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.key=e.string();break;case 2:n.value=e.string();break;default:e.skipType(7&r)}}return n},e}(),e}(),RC=I.UserAttributeDel=function(){function e(e){if(this.attributes=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.account="",e.prototype.attributes=D.emptyArray,e.encode=function(e,t){if(t||(t=ia.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(18).string(e.account),null!=e.attributes&&e.attributes.length)for(var n=0;n<e.attributes.length;++n)t.uint32(26).string(e.attributes[n]);return t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.UserAttributeDel;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.account=e.string();break;case 3:n.attributes&&n.attributes.length||(n.attributes=[]),n.attributes.push(e.string());break;default:e.skipType(7&r)}}return n},e}(),SC=I.UserAttributeErr=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.code=0,e.encode=function(e,t){return t||(t=ia.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(16).uint32(e.code),t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.UserAttributeErr;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.code=e.uint32();break;default:e.skipType(7&r)}}return n},e}(),TC=I.UserAttributeKeysGet=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.account="",e.encode=function(e,t){return t||(t=ia.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(18).string(e.account),t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.UserAttributeKeysGet;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.account=e.string();break;default:e.skipType(7&r)}}return n},e}(),UC=I.UserAttributeKeysRet=function(){function e(e){if(this.keys=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.keys=D.emptyArray,e.encode=function(e,t){if(t||(t=ia.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.keys&&e.keys.length)for(var n=0;n<e.keys.length;++n)t.uint32(18).string(e.keys[n]);return t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.UserAttributeKeysRet;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.keys&&n.keys.length||(n.keys=[]),n.keys.push(e.string());break;default:e.skipType(7&r)}}return n},e}(),VC=I.UserAttributeRsp=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.encode=function(e,t){return t||(t=ia.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.UserAttributeRsp;e.pos<t;){var r=e.uint32();r>>>3==1?n.seq=e.uint64():e.skipType(7&r)}return n},e}(),WC=I.GroupStatusList=function(){function e(e){if(this.groups=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.groups=D.emptyArray,e.encode=function(e,t){if(t||(t=ia.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.groups&&e.groups.length)for(var n=0;n<e.groups.length;++n)t.uint32(18).string(e.groups[n]);return t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.GroupStatusList;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.groups&&n.groups.length||(n.groups=[]),n.groups.push(e.string());break;default:e.skipType(7&r)}}return n},e}(),XC=I.GroupStatusResult=function(){function e(e){if(this.groupInfos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.groupInfos=D.emptyArray,e.encode=function(e,t){if(t||(t=ia.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.groupInfos&&e.groupInfos.length)for(var n=0;n<e.groupInfos.length;++n)I.GroupStatusResult.GroupInfo.encode(e.groupInfos[n],t.uint32(18).fork()).ldelim();return t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.GroupStatusResult;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.groupInfos&&n.groupInfos.length||(n.groupInfos=[]),n.groupInfos.push(I.GroupStatusResult.GroupInfo.decode(e,e.uint32()));break;default:e.skipType(7&r)}}return n},e.GroupInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.group="",e.prototype.memberCount=0,e.encode=function(e,t){return t||(t=ia.create()),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(10).string(e.group),null!=e.memberCount&&Object.hasOwnProperty.call(e,"memberCount")&&t.uint32(16).uint32(e.memberCount),t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.GroupStatusResult.GroupInfo;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.group=e.string();break;case 2:n.memberCount=e.uint32();break;default:e.skipType(7&r)}}return n},e}(),e}(),YC=I.GroupCountNotice=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.instance=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.group="",e.prototype.size=0,e.encode=function(e,t){return t||(t=ia.create()),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(8).uint64(e.instance),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(16).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(26).string(e.group),null!=e.size&&Object.hasOwnProperty.call(e,"size")&&t.uint32(32).uint32(e.size),t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.GroupCountNotice;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.instance=e.uint64();break;case 2:n.seq=e.uint64();break;case 3:n.group=e.string();break;case 4:n.size=e.uint32();break;default:e.skipType(7&r)}}return n},e}(),ZC=I.GroupAttributeGet=function(){function e(e){if(this.attributes=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.group="",e.prototype.attributes=D.emptyArray,e.encode=function(e,t){if(t||(t=ia.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(18).string(e.group),null!=e.attributes&&e.attributes.length)for(var n=0;n<e.attributes.length;++n)t.uint32(26).string(e.attributes[n]);return t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.GroupAttributeGet;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.group=e.string();break;case 3:n.attributes&&n.attributes.length||(n.attributes=[]),n.attributes.push(e.string());break;default:e.skipType(7&r)}}return n},e}(),$C=I.GroupAttributeRet=function(){function e(e){if(this.attributeMaps=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.attributeMaps=D.emptyArray,e.encode=function(e,t){if(t||(t=ia.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.attributeMaps&&e.attributeMaps.length)for(var n=0;n<e.attributeMaps.length;++n)I.GroupAttributeRet.AttributeMap.encode(e.attributeMaps[n],t.uint32(18).fork()).ldelim();return t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.GroupAttributeRet;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.attributeMaps&&n.attributeMaps.length||(n.attributeMaps=[]),n.attributeMaps.push(I.GroupAttributeRet.AttributeMap.decode(e,e.uint32()));break;default:e.skipType(7&r)}}return n},e.AttributeMap=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.key="",e.prototype.value="",e.prototype.origin="",e.prototype.ms=D.Long?D.Long.fromBits(0,0,!0):0,e.encode=function(e,t){return t||(t=ia.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),null!=e.origin&&Object.hasOwnProperty.call(e,"origin")&&t.uint32(26).string(e.origin),null!=e.ms&&Object.hasOwnProperty.call(e,"ms")&&t.uint32(32).uint64(e.ms),t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.GroupAttributeRet.AttributeMap;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.key=e.string();break;case 2:n.value=e.string();break;case 3:n.origin=e.string();break;case 4:n.ms=e.uint64();break;default:e.skipType(7&r)}}return n},e}(),e}(),aD=I.GroupAttributeSet=function(){function e(e){if(this.attributeInfos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.group="",e.prototype.broadcast=!1,e.prototype.attributeInfos=D.emptyArray,e.encode=function(e,t){if(t||(t=ia.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(18).string(e.group),null!=e.broadcast&&Object.hasOwnProperty.call(e,"broadcast")&&t.uint32(24).bool(e.broadcast),null!=e.attributeInfos&&e.attributeInfos.length)for(var n=0;n<e.attributeInfos.length;++n)I.GroupAttributeSet.AttributeInfo.encode(e.attributeInfos[n],t.uint32(34).fork()).ldelim();return t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.GroupAttributeSet;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.group=e.string();break;case 3:n.broadcast=e.bool();break;case 4:n.attributeInfos&&n.attributeInfos.length||(n.attributeInfos=[]),n.attributeInfos.push(I.GroupAttributeSet.AttributeInfo.decode(e,e.uint32()));break;default:e.skipType(7&r)}}return n},e.AttributeInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.key="",e.prototype.value="",e.encode=function(e,t){return t||(t=ia.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.GroupAttributeSet.AttributeInfo;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.key=e.string();break;case 2:n.value=e.string();break;default:e.skipType(7&r)}}return n},e}(),e}(),bD=I.GroupAttributeMod=function(){function e(e){if(this.attributeInfos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.group="",e.prototype.broadcast=!1,e.prototype.attributeInfos=D.emptyArray,e.encode=function(e,t){if(t||(t=ia.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(18).string(e.group),null!=e.broadcast&&Object.hasOwnProperty.call(e,"broadcast")&&t.uint32(24).bool(e.broadcast),null!=e.attributeInfos&&e.attributeInfos.length)for(var n=0;n<e.attributeInfos.length;++n)I.GroupAttributeMod.AttributeInfo.encode(e.attributeInfos[n],t.uint32(34).fork()).ldelim();return t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.GroupAttributeMod;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.group=e.string();break;case 3:n.broadcast=e.bool();break;case 4:n.attributeInfos&&n.attributeInfos.length||(n.attributeInfos=[]),n.attributeInfos.push(I.GroupAttributeMod.AttributeInfo.decode(e,e.uint32()));break;default:e.skipType(7&r)}}return n},e.AttributeInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.key="",e.prototype.value="",e.encode=function(e,t){return t||(t=ia.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.GroupAttributeMod.AttributeInfo;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.key=e.string();break;case 2:n.value=e.string();break;default:e.skipType(7&r)}}return n},e}(),e}(),cD=I.GroupAttributeDel=function(){function e(e){if(this.attributes=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.group="",e.prototype.broadcast=!1,e.prototype.attributes=D.emptyArray,e.encode=function(e,t){if(t||(t=ia.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(18).string(e.group),null!=e.broadcast&&Object.hasOwnProperty.call(e,"broadcast")&&t.uint32(24).bool(e.broadcast),null!=e.attributes&&e.attributes.length)for(var n=0;n<e.attributes.length;++n)t.uint32(34).string(e.attributes[n]);return t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.GroupAttributeDel;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.group=e.string();break;case 3:n.broadcast=e.bool();break;case 4:n.attributes&&n.attributes.length||(n.attributes=[]),n.attributes.push(e.string());break;default:e.skipType(7&r)}}return n},e}(),dD=I.GroupAttributeAlt=function(){function e(e){if(this.attributeMaps=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.group="",e.prototype.instance=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.attributeMaps=D.emptyArray,e.encode=function(e,t){if(t||(t=ia.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(18).string(e.group),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(24).uint64(e.instance),null!=e.attributeMaps&&e.attributeMaps.length)for(var n=0;n<e.attributeMaps.length;++n)I.GroupAttributeAlt.AttributeMap.encode(e.attributeMaps[n],t.uint32(34).fork()).ldelim();return t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.GroupAttributeAlt;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.group=e.string();break;case 3:n.instance=e.uint64();break;case 4:n.attributeMaps&&n.attributeMaps.length||(n.attributeMaps=[]),n.attributeMaps.push(I.GroupAttributeAlt.AttributeMap.decode(e,e.uint32()));break;default:e.skipType(7&r)}}return n},e.AttributeMap=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.key="",e.prototype.value="",e.prototype.origin="",e.prototype.ms=D.Long?D.Long.fromBits(0,0,!0):0,e.encode=function(e,t){return t||(t=ia.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),null!=e.origin&&Object.hasOwnProperty.call(e,"origin")&&t.uint32(26).string(e.origin),null!=e.ms&&Object.hasOwnProperty.call(e,"ms")&&t.uint32(32).uint64(e.ms),t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.GroupAttributeAlt.AttributeMap;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.key=e.string();break;case 2:n.value=e.string();break;case 3:n.origin=e.string();break;case 4:n.ms=e.uint64();break;default:e.skipType(7&r)}}return n},e}(),e}(),eD=I.GroupAttributeRsp=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.encode=function(e,t){return t||(t=ia.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.GroupAttributeRsp;e.pos<t;){var r=e.uint32();r>>>3==1?n.seq=e.uint64():e.skipType(7&r)}return n},e}(),fD=I.GroupAttributeErr=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.code=0,e.encode=function(e,t){return t||(t=ia.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(16).uint32(e.code),t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.GroupAttributeErr;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.code=e.uint32();break;default:e.skipType(7&r)}}return n},e}(),gD=I.GroupAttributeKeysGet=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.group="",e.encode=function(e,t){return t||(t=ia.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(18).string(e.group),t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.GroupAttributeKeysGet;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.group=e.string();break;default:e.skipType(7&r)}}return n},e}(),hD=I.GroupAttributeKeysRet=function(){function e(e){if(this.keys=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.keys=D.emptyArray,e.encode=function(e,t){if(t||(t=ia.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.keys&&e.keys.length)for(var n=0;n<e.keys.length;++n)t.uint32(18).string(e.keys[n]);return t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.GroupAttributeKeysRet;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.keys&&n.keys.length||(n.keys=[]),n.keys.push(e.string());break;default:e.skipType(7&r)}}return n},e}(),iD=I.SubscribeUserStatus=function(){function e(e){if(this.users=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.users=D.emptyArray,e.encode=function(e,t){if(t||(t=ia.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.users&&e.users.length)for(var n=0;n<e.users.length;++n)t.uint32(18).string(e.users[n]);return t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.SubscribeUserStatus;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.users&&n.users.length||(n.users=[]),n.users.push(e.string());break;default:e.skipType(7&r)}}return n},e}(),jD=I.UnsubscribeUserStatus=function(){function e(e){if(this.users=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.users=D.emptyArray,e.encode=function(e,t){if(t||(t=ia.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.users&&e.users.length)for(var n=0;n<e.users.length;++n)t.uint32(18).string(e.users[n]);return t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.UnsubscribeUserStatus;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.users&&n.users.length||(n.users=[]),n.users.push(e.string());break;default:e.skipType(7&r)}}return n},e}(),kD=I.UserJoinNotice=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.instance=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.user="",e.encode=function(e,t){return t||(t=ia.create()),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(8).uint64(e.instance),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(16).uint64(e.seq),null!=e.user&&Object.hasOwnProperty.call(e,"user")&&t.uint32(26).string(e.user),t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.UserJoinNotice;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.instance=e.uint64();break;case 2:n.seq=e.uint64();break;case 3:n.user=e.string();break;default:e.skipType(7&r)}}return n},e}(),lD=I.UserQuitNotice=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.instance=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.user="",e.encode=function(e,t){return t||(t=ia.create()),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(8).uint64(e.instance),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(16).uint64(e.seq),null!=e.user&&Object.hasOwnProperty.call(e,"user")&&t.uint32(26).string(e.user),t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.UserQuitNotice;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.instance=e.uint64();break;case 2:n.seq=e.uint64();break;case 3:n.user=e.string();break;default:e.skipType(7&r)}}return n},e}(),mD=I.UserWaitNotice=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.instance=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.user="",e.encode=function(e,t){return t||(t=ia.create()),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(8).uint64(e.instance),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(16).uint64(e.seq),null!=e.user&&Object.hasOwnProperty.call(e,"user")&&t.uint32(26).string(e.user),t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.UserWaitNotice;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.instance=e.uint64();break;case 2:n.seq=e.uint64();break;case 3:n.user=e.string();break;default:e.skipType(7&r)}}return n},e}(),nD=I.SubscribeResponse=function(){function e(e){if(this.errors=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.errors=D.emptyArray,e.encode=function(e,t){if(t||(t=ia.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.errors&&e.errors.length)for(var n=0;n<e.errors.length;++n)I.SubscribeResponse.SubscribeErrorsType.encode(e.errors[n],t.uint32(18).fork()).ldelim();return t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.SubscribeResponse;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.errors&&n.errors.length||(n.errors=[]),n.errors.push(I.SubscribeResponse.SubscribeErrorsType.decode(e,e.uint32()));break;default:e.skipType(7&r)}}return n},e.SubscribeErrorsType=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.account="",e.prototype.code=0,e.encode=function(e,t){return t||(t=ia.create()),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(10).string(e.account),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(16).uint32(e.code),t},e.decode=function(e,t){e instanceof M||(e=M.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new I.SubscribeResponse.SubscribeErrorsType;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.account=e.string();break;case 2:n.code=e.uint32();break;default:e.skipType(7&r)}}return n},e}(),e}(),oD=Object.freeze({__proto__:null,URI:vC,Wrapper:wi,Ping:wC,Pong:xC,UserJoin:yC,UserResp:zC,UserQuit:AC,UserDrop:BC,UserTicketNearlyExpire:CC,UserRenewTokenReq:DC,UserRenewTokenResp:EC,GroupEnter:FC,GroupLeave:GC,GroupReply:HC,GroupLeaveNotice:vs,GroupEnterNotice:ws,Message:xs,Ack:ys,GroupDrop:IC,GroupAllUsersList:JC,GroupAllUsersResult:KC,UserStatusList:LC,UserStatusResult:MC,UserAttributeGet:NC,UserAttributeRet:OC,UserAttributeSet:PC,UserAttributeMod:QC,UserAttributeDel:RC,UserAttributeErr:SC,UserAttributeKeysGet:TC,UserAttributeKeysRet:UC,UserAttributeRsp:VC,GroupStatusList:WC,GroupStatusResult:XC,GroupCountNotice:YC,GroupAttributeGet:ZC,GroupAttributeRet:$C,GroupAttributeSet:aD,GroupAttributeMod:bD,GroupAttributeDel:cD,GroupAttributeAlt:dD,GroupAttributeRsp:eD,GroupAttributeErr:fD,GroupAttributeKeysGet:gD,GroupAttributeKeysRet:hD,SubscribeUserStatus:iD,UnsubscribeUserStatus:jD,UserJoinNotice:kD,UserQuitNotice:lD,UserWaitNotice:mD,SubscribeResponse:nD,default:I}),pD=Math.ceil,zs=function(e){return function(t,n,r){var o=(t=String(Eb(t))).length;return r=void 0===r?" ":String(r),(n=Ma(n))<=o||""==r?t:(n-=o,(o=Yo.call(r,pD(n/r.length))).length>n&&(o=o.slice(0,n)),e?t+o:o+t)}},qD=zs(!1),rD=zs(!0),As=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(df);ea({target:"String",proto:!0,forced:As},{padEnd:function(e){return rD(this,e,1<arguments.length?arguments[1]:void 0)}});var sD=eg,Bs=function(e){return function(t){t=Mb(t);for(var n,r=ed(t),o=r.length,i=0,a=[];o>i;)n=r[i++],wa&&!sD.call(t,n)||a.push(e?[n,t[n]]:t[n]);return a}},tD=Bs(!0),uD=Bs(!1);ea({target:"Object",stat:!0},{entries:function(e){return tD(e)}});var vD=dc.f,Cs="".endsWith,wD=Math.min,Ds=Qk("endsWith"),xD=!Ds&&!!function(){var e=vD(String.prototype,"endsWith");return e&&!e.writable}();ea({target:"String",proto:!0,forced:!xD&&!Ds},{endsWith:function(e){var t=String(Eb(this));Pk(e);var n=1<arguments.length?arguments[1]:void 0,r=Ma(t.length);return n=void 0===n?r:wD(Ma(n),r),r=String(e),Cs?Cs.call(t,r,n):t.slice(n-r.length,n)===r}}),Bh("match",1,(function(e,t,n){return[function(t){var n=Eb(this),r=null==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;if(e=Ia(e),r=String(this),!e.global)return ef(e,r);var o=e.unicode;e.lastIndex=0;for(var i,a=[],s=0;null!==(i=ef(e,r));)i=String(i[0]),a[s]=i,""===i&&(e.lastIndex=Mj(r,Ma(e.lastIndex),o)),s++;return 0===s?null:a}]}));var yD=dc.f,Es="".startsWith,zD=Math.min,Fs=Qk("startsWith"),AD=!Fs&&!!function(){var e=yD(String.prototype,"startsWith");return e&&!e.writable}();ea({target:"String",proto:!0,forced:!AD&&!Fs},{startsWith:function(e){var t=String(Eb(this));Pk(e);var n=Ma(zD(1<arguments.length?arguments[1]:void 0,t.length)),r=String(e);return Es?Es.call(t,r,n):t.slice(n,n+r.length)===r}});var Wn=function(e){var t=Array.prototype.slice.call(arguments,1);return t.length&&(e=e.replace(/(%?)(%([jds]))/g,(function(e,n,r,o){switch(r=t.shift(),o){case"s":r=""+r;break;case"d":r=Number(r);break;case"j":r=JSON.stringify(r)}return n?(t.unshift(r),e):r}))),t.length&&(e+=" "+t.join(" ")),""+e.replace(/%{2,2}/g,"%")},BD=/\s/,CD=/^\s+/,Gs=NaN,DD=/^[-+]0x[0-9a-f]+$/i,ED=/^0b[01]+$/i,FD=/^0o[0-7]+$/i,GD=parseInt,xi=function(e){if("number"==typeof e)return e;if(Ke(e))return Gs;if(Gb(e)&&(e="function"==typeof e.valueOf?e.valueOf():e,e=Gb(e)?e+"":e),"string"!=typeof e)return 0===e?e:+e;if(e){for(var t=e.slice,n=e.length;n--&&BD.test(e.charAt(n)););e=t.call(e,0,n+1).replace(CD,"")}return(t=ED.test(e))||FD.test(e)?GD(e.slice(2),t?2:8):DD.test(e)?Gs:+e},HD=Math.max,ID=Math.min,JD=function(e,t,n){function r(t){var n=c,r=l;return c=l=void 0,p=t,u=e.apply(r,n)}function o(e){var n=e-A;return e-=p,void 0===A||n>=t||0>n||f&&e>=m}function i(){var e=$b.Date.now();if(o(e))return a(e);var n=setTimeout,r=e-p;e=t-(e-A),r=f?ID(e,m-r):e,d=n(i,r)}function a(e){return d=void 0,g&&c?r(e):(c=l=void 0,u)}function s(){var e=$b.Date.now(),n=o(e);if(c=arguments,l=this,A=e,n){if(void 0===d)return p=e=A,d=setTimeout(i,t),h?r(e):u;if(f)return clearTimeout(d),d=setTimeout(i,t),r(A)}return void 0===d&&(d=setTimeout(i,t)),u}var c,l,u,d,A,p=0,h=!1,f=!1,g=!0;if("function"!=typeof e)throw new TypeError("Expected a function");if(t=xi(t)||0,Gb(n)){h=!!n.leading;var m=(f="maxWait"in n)?HD(xi(n.maxWait)||0,t):m;g="trailing"in n?!!n.trailing:g}return s.cancel=function(){void 0!==d&&clearTimeout(d),p=0,c=A=l=d=void 0},s.flush=function(){return void 0===d?u:a($b.Date.now())},s},KD=Math.max,LD=Math.min,Hs=1/0,Rl=function(e){return e?(e=xi(e))===Hs||e===-Hs?17976931348623157e292*(0>e?-1:1):e==e?e:0:0===e?e:0},Is=function(e,t,n){return t=Rl(t),void 0===n?(n=t,t=0):n=Rl(n),(e=xi(e))>=LD(t,n)&&e<KD(t,n)},ac=Gc.Writer,H=Gc.util,Pb=Gc.roots.default||(Gc.roots.default={}),MD=Pb.Session=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.elapse=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.appId="",e.prototype.ver="",e.prototype.buildno=0,e.prototype.installId="",e.prototype.os=0,e.prototype.did="",e.prototype.index=null,e.prototype.token="",e.prototype.version=0,e.prototype.subVersion=0,e.encode=function(e,t){return t||(t=ac.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),null!=e.appId&&Object.hasOwnProperty.call(e,"appId")&&t.uint32(42).string(e.appId),null!=e.ver&&Object.hasOwnProperty.call(e,"ver")&&t.uint32(50).string(e.ver),null!=e.buildno&&Object.hasOwnProperty.call(e,"buildno")&&t.uint32(56).int32(e.buildno),null!=e.installId&&Object.hasOwnProperty.call(e,"installId")&&t.uint32(66).string(e.installId),null!=e.os&&Object.hasOwnProperty.call(e,"os")&&t.uint32(128).int32(e.os),null!=e.did&&Object.hasOwnProperty.call(e,"did")&&t.uint32(138).string(e.did),null!=e.index&&Object.hasOwnProperty.call(e,"index")&&Pb.Session.CommonIndex.encode(e.index,t.uint32(162).fork()).ldelim(),null!=e.token&&Object.hasOwnProperty.call(e,"token")&&t.uint32(170).string(e.token),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&t.uint32(176).int32(e.version),null!=e.subVersion&&Object.hasOwnProperty.call(e,"subVersion")&&t.uint32(184).int32(e.subVersion),t},e.CommonIndex=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.index1="",e.prototype.index2="",e.prototype.index3="",e.encode=function(e,t){return t||(t=ac.create()),null!=e.index1&&Object.hasOwnProperty.call(e,"index1")&&t.uint32(10).string(e.index1),null!=e.index2&&Object.hasOwnProperty.call(e,"index2")&&t.uint32(18).string(e.index2),null!=e.index3&&Object.hasOwnProperty.call(e,"index3")&&t.uint32(26).string(e.index3),t},e}(),e}(),ND=Pb.ApEvent=function(){function e(e){if(this.linkServerList=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.elapse=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.apAddr="",e.prototype.linkServerList=H.emptyArray,e.prototype.errCode=0,e.prototype.serverErrCode=0,e.prototype.isp="",e.prototype.opId=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.envId=0,e.prototype.flag=0,e.prototype.area="",e.encode=function(e,t){if(t||(t=ac.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),null!=e.apAddr&&Object.hasOwnProperty.call(e,"apAddr")&&t.uint32(50).string(e.apAddr),null!=e.linkServerList&&e.linkServerList.length)for(var n=0;n<e.linkServerList.length;++n)t.uint32(58).string(e.linkServerList[n]);return null!=e.errCode&&Object.hasOwnProperty.call(e,"errCode")&&t.uint32(72).int32(e.errCode),null!=e.serverErrCode&&Object.hasOwnProperty.call(e,"serverErrCode")&&t.uint32(80).int32(e.serverErrCode),null!=e.isp&&Object.hasOwnProperty.call(e,"isp")&&t.uint32(90).string(e.isp),null!=e.opId&&Object.hasOwnProperty.call(e,"opId")&&t.uint32(96).int64(e.opId),null!=e.envId&&Object.hasOwnProperty.call(e,"envId")&&t.uint32(104).int32(e.envId),null!=e.flag&&Object.hasOwnProperty.call(e,"flag")&&t.uint32(112).int32(e.flag),null!=e.area&&Object.hasOwnProperty.call(e,"area")&&t.uint32(122).string(e.area),t},e}(),OD=Pb.ApRequest=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.elapse=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.apAddr="",e.prototype.opId=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.envId=0,e.prototype.flag=0,e.encode=function(e,t){return t||(t=ac.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),null!=e.apAddr&&Object.hasOwnProperty.call(e,"apAddr")&&t.uint32(42).string(e.apAddr),null!=e.opId&&Object.hasOwnProperty.call(e,"opId")&&t.uint32(48).int64(e.opId),null!=e.envId&&Object.hasOwnProperty.call(e,"envId")&&t.uint32(56).int32(e.envId),null!=e.flag&&Object.hasOwnProperty.call(e,"flag")&&t.uint32(64).int32(e.flag),t},e}(),PD=Pb.LinkLoginRequest=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.elapse=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.destServerIp="",e.prototype.linkId=0,e.encode=function(e,t){return t||(t=ac.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),null!=e.destServerIp&&Object.hasOwnProperty.call(e,"destServerIp")&&t.uint32(42).string(e.destServerIp),null!=e.linkId&&Object.hasOwnProperty.call(e,"linkId")&&t.uint32(48).int32(e.linkId),t},e}(),QD=Pb.Link=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.elapse=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.ec=0,e.prototype.sc=0,e.prototype.destServerIp="",e.prototype.ackedServerIp="",e.prototype.responseTime=0,e.encode=function(e,t){return t||(t=ac.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),null!=e.ec&&Object.hasOwnProperty.call(e,"ec")&&t.uint32(40).int32(e.ec),null!=e.sc&&Object.hasOwnProperty.call(e,"sc")&&t.uint32(48).int32(e.sc),null!=e.destServerIp&&Object.hasOwnProperty.call(e,"destServerIp")&&t.uint32(58).string(e.destServerIp),null!=e.ackedServerIp&&Object.hasOwnProperty.call(e,"ackedServerIp")&&t.uint32(66).string(e.ackedServerIp),null!=e.responseTime&&Object.hasOwnProperty.call(e,"responseTime")&&t.uint32(72).int32(e.responseTime),t},e}(),RD=Pb.Logout=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.elapse=H.Long?H.Long.fromBits(0,0,!1):0,e.encode=function(e,t){return t||(t=ac.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),t},e}(),SD=Pb.KickedOff=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.elapse=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.linkId=0,e.prototype.code=0,e.prototype.server="",e.prototype.serverCode=0,e.encode=function(e,t){return t||(t=ac.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),null!=e.linkId&&Object.hasOwnProperty.call(e,"linkId")&&t.uint32(48).int32(e.linkId),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(56).int32(e.code),null!=e.server&&Object.hasOwnProperty.call(e,"server")&&t.uint32(66).string(e.server),null!=e.serverCode&&Object.hasOwnProperty.call(e,"serverCode")&&t.uint32(72).int32(e.serverCode),t},e}(),TD=Pb.ChnJoin=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.elapse=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.cname="",e.prototype.errCode=0,e.encode=function(e,t){return t||(t=ac.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),null!=e.cname&&Object.hasOwnProperty.call(e,"cname")&&t.uint32(50).string(e.cname),null!=e.errCode&&Object.hasOwnProperty.call(e,"errCode")&&t.uint32(56).int32(e.errCode),t},e}(),UD=Pb.ChnJoinRes=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.elapse=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.cname="",e.prototype.errCode=0,e.prototype.serverErrCode=0,e.encode=function(e,t){return t||(t=ac.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),null!=e.cname&&Object.hasOwnProperty.call(e,"cname")&&t.uint32(50).string(e.cname),null!=e.errCode&&Object.hasOwnProperty.call(e,"errCode")&&t.uint32(56).int32(e.errCode),null!=e.serverErrCode&&Object.hasOwnProperty.call(e,"serverErrCode")&&t.uint32(64).int32(e.serverErrCode),t},e}(),VD=Pb.ChnLeave=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.elapse=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.cname="",e.prototype.errCode=0,e.encode=function(e,t){return t||(t=ac.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),null!=e.cname&&Object.hasOwnProperty.call(e,"cname")&&t.uint32(50).string(e.cname),null!=e.errCode&&Object.hasOwnProperty.call(e,"errCode")&&t.uint32(56).int32(e.errCode),t},e}(),WD=Pb.ConnectionStateChange=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.elapse=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.oldState=0,e.prototype.newState=0,e.prototype.reason=0,e.prototype.reconnId=0,e.encode=function(e,t){return t||(t=ac.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),null!=e.oldState&&Object.hasOwnProperty.call(e,"oldState")&&t.uint32(40).int32(e.oldState),null!=e.newState&&Object.hasOwnProperty.call(e,"newState")&&t.uint32(48).int32(e.newState),null!=e.reason&&Object.hasOwnProperty.call(e,"reason")&&t.uint32(56).int32(e.reason),null!=e.reconnId&&Object.hasOwnProperty.call(e,"reconnId")&&t.uint32(64).int32(e.reconnId),t},e}(),Js=Pb.RtmSdkMessageCount=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.lts=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.vid=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.sid="",e.prototype.messagecategory=0,e.prototype.reportsequence=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.sentcount=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.receivedcount=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.peerack10mscount=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.peerack25mscount=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.peerack50mscount=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.peerack75mscount=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.peerack100mscount=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.peerack150mscount=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.peerack200mscount=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.peerack250mscount=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.peerack300mscount=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.peerack400mscount=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.peerack500mscount=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.peerack600mscount=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.peerack800mscount=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.peerack1000mscount=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.peerack2000mscount=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.peerack3000mscount=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.peerack5000mscount=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.peerack7000mscount=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.peerackslowcount=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.norecipientack10mscount=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.norecipientack25mscount=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.norecipientack50mscount=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.norecipientack75mscount=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.norecipientack100mscount=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.norecipientack150mscount=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.norecipientack200mscount=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.norecipientack250mscount=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.norecipientack300mscount=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.norecipientack400mscount=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.norecipientack500mscount=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.norecipientack600mscount=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.norecipientack800mscount=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.norecipientack1000mscount=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.norecipientack2000mscount=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.norecipientack3000mscount=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.norecipientack5000mscount=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.norecipientack7000mscount=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.norecipientackslowcount=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.acktimeoutcount=H.Long?H.Long.fromBits(0,0,!1):0,e.prototype.apimajorversion=0,e.prototype.apiminorversion=0,e.prototype.os=0,e.prototype.toooftencount=0,e.prototype.receiverofflinecount=0,e.prototype.invalidmessagecount=0,e.prototype.unknowerrorcount=0,e.prototype.servercachedcount=0,e.prototype.timeoutcount=0,e.prototype.successcount=0,e.prototype.userid="",e.encode=function(e,t){return t||(t=ac.create()),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(8).int64(e.lts),null!=e.vid&&Object.hasOwnProperty.call(e,"vid")&&t.uint32(16).int64(e.vid),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(26).string(e.sid),null!=e.messagecategory&&Object.hasOwnProperty.call(e,"messagecategory")&&t.uint32(32).int32(e.messagecategory),null!=e.reportsequence&&Object.hasOwnProperty.call(e,"reportsequence")&&t.uint32(40).int64(e.reportsequence),null!=e.sentcount&&Object.hasOwnProperty.call(e,"sentcount")&&t.uint32(48).int64(e.sentcount),null!=e.receivedcount&&Object.hasOwnProperty.call(e,"receivedcount")&&t.uint32(56).int64(e.receivedcount),null!=e.peerack10mscount&&Object.hasOwnProperty.call(e,"peerack10mscount")&&t.uint32(64).int64(e.peerack10mscount),null!=e.peerack25mscount&&Object.hasOwnProperty.call(e,"peerack25mscount")&&t.uint32(72).int64(e.peerack25mscount),null!=e.peerack50mscount&&Object.hasOwnProperty.call(e,"peerack50mscount")&&t.uint32(80).int64(e.peerack50mscount),null!=e.peerack75mscount&&Object.hasOwnProperty.call(e,"peerack75mscount")&&t.uint32(88).int64(e.peerack75mscount),null!=e.peerack100mscount&&Object.hasOwnProperty.call(e,"peerack100mscount")&&t.uint32(96).int64(e.peerack100mscount),null!=e.peerack150mscount&&Object.hasOwnProperty.call(e,"peerack150mscount")&&t.uint32(104).int64(e.peerack150mscount),null!=e.peerack200mscount&&Object.hasOwnProperty.call(e,"peerack200mscount")&&t.uint32(112).int64(e.peerack200mscount),null!=e.peerack250mscount&&Object.hasOwnProperty.call(e,"peerack250mscount")&&t.uint32(120).int64(e.peerack250mscount),null!=e.peerack300mscount&&Object.hasOwnProperty.call(e,"peerack300mscount")&&t.uint32(128).int64(e.peerack300mscount),null!=e.peerack400mscount&&Object.hasOwnProperty.call(e,"peerack400mscount")&&t.uint32(136).int64(e.peerack400mscount),null!=e.peerack500mscount&&Object.hasOwnProperty.call(e,"peerack500mscount")&&t.uint32(144).int64(e.peerack500mscount),null!=e.peerack600mscount&&Object.hasOwnProperty.call(e,"peerack600mscount")&&t.uint32(152).int64(e.peerack600mscount),null!=e.peerack800mscount&&Object.hasOwnProperty.call(e,"peerack800mscount")&&t.uint32(160).int64(e.peerack800mscount),null!=e.peerack1000mscount&&Object.hasOwnProperty.call(e,"peerack1000mscount")&&t.uint32(168).int64(e.peerack1000mscount),null!=e.peerack2000mscount&&Object.hasOwnProperty.call(e,"peerack2000mscount")&&t.uint32(176).int64(e.peerack2000mscount),null!=e.peerack3000mscount&&Object.hasOwnProperty.call(e,"peerack3000mscount")&&t.uint32(184).int64(e.peerack3000mscount),null!=e.peerack5000mscount&&Object.hasOwnProperty.call(e,"peerack5000mscount")&&t.uint32(192).int64(e.peerack5000mscount),null!=e.peerack7000mscount&&Object.hasOwnProperty.call(e,"peerack7000mscount")&&t.uint32(200).int64(e.peerack7000mscount),null!=e.peerackslowcount&&Object.hasOwnProperty.call(e,"peerackslowcount")&&t.uint32(208).int64(e.peerackslowcount),null!=e.norecipientack10mscount&&Object.hasOwnProperty.call(e,"norecipientack10mscount")&&t.uint32(216).int64(e.norecipientack10mscount),null!=e.norecipientack25mscount&&Object.hasOwnProperty.call(e,"norecipientack25mscount")&&t.uint32(224).int64(e.norecipientack25mscount),null!=e.norecipientack50mscount&&Object.hasOwnProperty.call(e,"norecipientack50mscount")&&t.uint32(232).int64(e.norecipientack50mscount),null!=e.norecipientack75mscount&&Object.hasOwnProperty.call(e,"norecipientack75mscount")&&t.uint32(240).int64(e.norecipientack75mscount),null!=e.norecipientack100mscount&&Object.hasOwnProperty.call(e,"norecipientack100mscount")&&t.uint32(248).int64(e.norecipientack100mscount),null!=e.norecipientack150mscount&&Object.hasOwnProperty.call(e,"norecipientack150mscount")&&t.uint32(256).int64(e.norecipientack150mscount),null!=e.norecipientack200mscount&&Object.hasOwnProperty.call(e,"norecipientack200mscount")&&t.uint32(264).int64(e.norecipientack200mscount),null!=e.norecipientack250mscount&&Object.hasOwnProperty.call(e,"norecipientack250mscount")&&t.uint32(272).int64(e.norecipientack250mscount),null!=e.norecipientack300mscount&&Object.hasOwnProperty.call(e,"norecipientack300mscount")&&t.uint32(280).int64(e.norecipientack300mscount),null!=e.norecipientack400mscount&&Object.hasOwnProperty.call(e,"norecipientack400mscount")&&t.uint32(288).int64(e.norecipientack400mscount),null!=e.norecipientack500mscount&&Object.hasOwnProperty.call(e,"norecipientack500mscount")&&t.uint32(296).int64(e.norecipientack500mscount),null!=e.norecipientack600mscount&&Object.hasOwnProperty.call(e,"norecipientack600mscount")&&t.uint32(304).int64(e.norecipientack600mscount),null!=e.norecipientack800mscount&&Object.hasOwnProperty.call(e,"norecipientack800mscount")&&t.uint32(312).int64(e.norecipientack800mscount),null!=e.norecipientack1000mscount&&Object.hasOwnProperty.call(e,"norecipientack1000mscount")&&t.uint32(320).int64(e.norecipientack1000mscount),null!=e.norecipientack2000mscount&&Object.hasOwnProperty.call(e,"norecipientack2000mscount")&&t.uint32(328).int64(e.norecipientack2000mscount),null!=e.norecipientack3000mscount&&Object.hasOwnProperty.call(e,"norecipientack3000mscount")&&t.uint32(336).int64(e.norecipientack3000mscount),null!=e.norecipientack5000mscount&&Object.hasOwnProperty.call(e,"norecipientack5000mscount")&&t.uint32(344).int64(e.norecipientack5000mscount),null!=e.norecipientack7000mscount&&Object.hasOwnProperty.call(e,"norecipientack7000mscount")&&t.uint32(352).int64(e.norecipientack7000mscount),null!=e.norecipientackslowcount&&Object.hasOwnProperty.call(e,"norecipientackslowcount")&&t.uint32(360).int64(e.norecipientackslowcount),null!=e.acktimeoutcount&&Object.hasOwnProperty.call(e,"acktimeoutcount")&&t.uint32(368).int64(e.acktimeoutcount),null!=e.apimajorversion&&Object.hasOwnProperty.call(e,"apimajorversion")&&t.uint32(376).int32(e.apimajorversion),null!=e.apiminorversion&&Object.hasOwnProperty.call(e,"apiminorversion")&&t.uint32(384).int32(e.apiminorversion),null!=e.os&&Object.hasOwnProperty.call(e,"os")&&t.uint32(392).int32(e.os),null!=e.toooftencount&&Object.hasOwnProperty.call(e,"toooftencount")&&t.uint32(400).int32(e.toooftencount),null!=e.receiverofflinecount&&Object.hasOwnProperty.call(e,"receiverofflinecount")&&t.uint32(408).int32(e.receiverofflinecount),null!=e.invalidmessagecount&&Object.hasOwnProperty.call(e,"invalidmessagecount")&&t.uint32(416).int32(e.invalidmessagecount),null!=e.unknowerrorcount&&Object.hasOwnProperty.call(e,"unknowerrorcount")&&t.uint32(424).int32(e.unknowerrorcount),null!=e.servercachedcount&&Object.hasOwnProperty.call(e,"servercachedcount")&&t.uint32(432).int32(e.servercachedcount),null!=e.timeoutcount&&Object.hasOwnProperty.call(e,"timeoutcount")&&t.uint32(440).int32(e.timeoutcount),null!=e.successcount&&Object.hasOwnProperty.call(e,"successcount")&&t.uint32(448).int32(e.successcount),null!=e.userid&&Object.hasOwnProperty.call(e,"userid")&&t.uint32(458).string(e.userid),t},e}(),Iv=Object.freeze({__proto__:null,Session:MD,ApEvent:ND,ApRequest:OD,LinkLoginRequest:PD,Link:QD,Logout:RD,KickedOff:SD,ChnJoin:TD,ChnJoinRes:UD,ChnLeave:VD,ConnectionStateChange:WD,RtmSdkMessageCount:Js,default:Pb}),XD=la((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}));ea({target:"Date",proto:!0,forced:XD},{toJSON:function(e){e=pb(this);var t=Oc(e);return"number"!=typeof t||isFinite(t)?e.toISOString():null}}),ea({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}});var Ev=Object.prototype.hasOwnProperty,Ks=function(e,t,n){return JSON.stringify(Mn(e),t,n)};Ks.ensureProperties=Mn;var YD=function(e,t){t=t||{};var n=qa(e);if("string"===n&&0<e.length)return Fv(e);if("number"===n&&isFinite(e))return e=t.long?864e5<=(t=Math.abs(e))?jh(e,t,864e5,"day"):36e5<=t?jh(e,t,36e5,"hour"):6e4<=t?jh(e,t,6e4,"minute"):1e3<=t?jh(e,t,1e3,"second"):e+" ms":864e5<=(t=Math.abs(e))?Math.round(e/864e5)+"d":36e5<=t?Math.round(e/36e5)+"h":6e4<=t?Math.round(e/6e4)+"m":1e3<=t?Math.round(e/1e3)+"s":e+"ms";throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))},ZD=function(e){function t(e){function r(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];if(r.enabled){e=Number(new Date),r.diff=e-(o||e),r.prev=o,o=r.curr=e,n[0]=t.coerce(n[0]),"string"!=typeof n[0]&&n.unshift("%O");var a=0;n[0]=n[0].replace(/%([a-zA-Z%])/g,(function(e,o){return"%%"===e?"%":(a++,"function"==typeof(o=t.formatters[o])&&(e=o.call(r,n[a]),n.splice(a,1),a--),e)})),t.formatArgs.call(r,n),(r.log||t.log).apply(r,n)}}var o,i=null;return r.namespace=e,r.useColors=t.useColors(),r.color=t.selectColor(e),r.extend=n,r.destroy=t.destroy,Object.defineProperty(r,"enabled",{enumerable:!0,configurable:!1,get:function(){return null===i?t.enabled(e):i},set:function(e){i=e}}),"function"==typeof t.init&&t.init(r),r}function n(e,n){return(e=t(this.namespace+(void 0===n?":":n)+e)).log=this.log,e}function r(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){var e=[].concat(Z(t.names.map(r)),Z(t.skips.map(r).map((function(e){return"-"+e})))).join(",");return t.enable(""),e},t.enable=function(e){t.save(e),t.names=[],t.skips=[];var n,r=("string"==typeof e?e:"").split(/[\s,]+/),o=r.length;for(n=0;n<o;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,r=0;for(n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=YD,t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((function(n){t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){for(var n=0,r=0;r<e.length;r++)n=(n<<5)-n+e.charCodeAt(r),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t},Ls=xb((function(e,t){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),this.useColors){var n="color: "+this.color;t.splice(1,0,n,"color: inherit");var r=0,o=0;t[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(r++,"%c"===e&&(o=r))})),t.splice(o,0,n)}},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(n){}},t.load=function(){try{var e=t.storage.getItem("debug")}catch(n){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=define_process_env_default.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))};e:{try{var n=localStorage;break e}catch(o){}n=void 0}var r;t.storage=n,t.destroy=(r=!1,function(){r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}),t.colors="#0000CC #0000FF #0033CC #0033FF #0066CC #0066FF #0099CC #0099FF #00CC00 #00CC33 #00CC66 #00CC99 #00CCCC #00CCFF #3300CC #3300FF #3333CC #3333FF #3366CC #3366FF #3399CC #3399FF #33CC00 #33CC33 #33CC66 #33CC99 #33CCCC #33CCFF #6600CC #6600FF #6633CC #6633FF #66CC00 #66CC33 #9900CC #9900FF #9933CC #9933FF #99CC00 #99CC33 #CC0000 #CC0033 #CC0066 #CC0099 #CC00CC #CC00FF #CC3300 #CC3333 #CC3366 #CC3399 #CC33CC #CC33FF #CC6600 #CC6633 #CC9900 #CC9933 #CCCC00 #CCCC33 #FF0000 #FF0033 #FF0066 #FF0099 #FF00CC #FF00FF #FF3300 #FF3333 #FF3366 #FF3399 #FF33CC #FF33FF #FF6600 #FF6633 #FF9900 #FF9933 #FFCC00 #FFCC33".split(" "),t.log=console.debug||console.log||function(){},e.exports=ZD(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}})),Ms=Ls("RTM:DEBUG"),Af;Ms.enabled=!1,function(e){e[e.Uploading=0]="Uploading",e[e.Free=1]="Free"}(Af||(Af={}));var $D=function(){function e(t){va(this,e),x(this,"uploadRequest",void 0),x(this,"uploadState",void 0),x(this,"uploadResendCount",void 0),x(this,"LogCache",void 0),x(this,"LogsToPost",void 0),x(this,"processId",void 0),x(this,"sdkVersion",void 0),x(this,"logId",void 0),x(this,"rtmConfig",void 0),this.processId=t.processId,this.sdkVersion=t.sdkVersion,this.rtmConfig=t.rtmConfig,this.uploadRequest=t.uploadRequest,this.uploadState=Af.Free,this.uploadResendCount=0,this.LogCache=[],this.LogsToPost=[],this.logId=0}return eb(e,[{key:"upload",value:function(e){this.LogCache.push(e),this.uploadState===Af.Free&&(this.LogsToPost=40>this.LogCache.length?this.LogCache.splice(0,this.LogCache.length):this.LogCache.splice(0,40),this.postLog(this.LogsToPost))}},{key:"postLog",value:function(e){var t=this;this.uploadState=Af.Uploading,setTimeout(ma(N.mark((function n(){var r,o,i;return N.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={sdk_version:t.sdkVersion,process_id:t.processId,payload:JSON.stringify(e)},n.prev=1,n.next=4,t.uploadRequest(r,null!==(o=t.rtmConfig.enableCloudProxy)&&void 0!==o&&o);case 4:if(!gj){n.next=6;break}throw Error("RTM is busy");case 6:n.next=13;break;case 8:return n.prev=8,n.t0=n.catch(1),i=2>t.uploadResendCount++?2e3:1e4,setTimeout((function(){return t.postLog(t.LogsToPost)}),i),n.abrupt("return");case 13:if(Ms('The logs uploaded for "process-'.concat(Og,'"')),0!==t.LogCache.length){n.next=17;break}return t.uploadState=Af.Free,n.abrupt("return");case 17:t.uploadResendCount=0,t.LogsToPost=40>t.LogCache.length?t.LogCache.splice(0,t.LogCache.length):t.LogCache.splice(0,40),t.postLog(t.LogsToPost);case 20:case"end":return n.stop()}}),n,null,[[1,8]])}))),ue.getParameter("LOG_UPLOAD_INTERVAL"))}}]),e}(),Ns=function(e,t,n,r,o,i,a,s){var c=0;for(a=!!a&&Dd(a,s,3);c<r;){if(c in n){if(s=a?a(n[c],c,t):n[c],0<i&&Ed(s))o=Ns(e,t,s,Ma(s.length),o,i-1)-1;else{if(9007199254740991<=o)throw TypeError("Exceed the acceptable array length");e[o]=s}o++}c++}return o},aE=Ns;ea({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=pb(this),n=Ma(t.length),r=Dh(t,0);return r.length=aE(r,t,t,n,0,void 0===e?1:yc(e)),r}}),ea({target:"Object",stat:!0},{values:function(e){return uD(e)}});var ud=function(e){function t(e,r){return va(this,t),x(z(e=n.call(this,Vn(e,r))),"originalError",void 0),x(z(e),"code",void 0),x(z(e),"serverCode",void 0),"number"==typeof r?e.code=r:"string"==typeof r?e.name=r:void 0!==r&&(r.originalError&&(e.originalError=r.originalError),void 0!==r.code&&(e.code=r.code),void 0!==r.serverCode&&(e.serverCode=r.serverCode)),e}Ga(t,e);var n=Ha(t);return t}(Kf(Error)),rc=function(e){function t(e,r){return va(this,t),x(z(e=n.call(this,Vn(e,r))),"name","RtmInternalError"),x(z(e),"code",void 0),e.code=r,e}Ga(t,e);var n=Ha(t);return t}(Kf(Error)),yi=function(){return function(e){function t(e){va(this,t);var r=Object.keys(e);return n.call(this,e[r[0]],r[0])}Ga(t,e);var n=Ha(t);return t}(rc)},mb=yi(),Ub=function(e){function t(){va(this,t);for(var e=arguments.length,r=Array(e),o=0;o<e;o++)r[o]=arguments[o];return x(z(e=n.call.apply(n,[this].concat(r))),"name","RtmTimeoutError"),e}Ga(t,e);var n=Ha(t);return t}(ud),ca=function(e){function t(){va(this,t);for(var e=arguments.length,r=Array(e),o=0;o<e;o++)r[o]=arguments[o];return x(z(e=n.call.apply(n,[this].concat(r))),"name","RtmInvalidArgumentError"),e}Ga(t,e);var n=Ha(t);return t}(ud),da=function(e){function t(){va(this,t);for(var e=arguments.length,r=Array(e),o=0;o<e;o++)r[o]=arguments[o];return x(z(e=n.call.apply(n,[this].concat(r))),"name","RtmInvalidStatusError"),e}Ga(t,e);var n=Ha(t);return t}(ud),ic=function(e){function t(){va(this,t);for(var e=arguments.length,r=Array(e),o=0;o<e;o++)r[o]=arguments[o];return x(z(e=n.call.apply(n,[this].concat(r))),"name","RtmLimitExceededError"),e}Ga(t,e);var n=Ha(t);return t}(ud),bE=function(e){function t(){va(this,t);for(var e=arguments.length,r=Array(e),o=0;o<e;o++)r[o]=arguments[o];return x(z(e=n.call.apply(n,[this].concat(r))),"name","RtmInvokeTooOftenError"),e}Ga(t,e);var n=Ha(t);return t}(ud),Ja=function(e){function t(){va(this,t);for(var e=arguments.length,r=Array(e),o=0;o<e;o++)r[o]=arguments[o];return x(z(e=n.call.apply(n,[this].concat(r))),"name","RtmUnavailableError"),x(z(e),"serverCode",void 0),x(z(e),"statusCode",void 0),e}Ga(t,e);var n=Ha(t);return t}(ud),Bf=function(e){function t(){va(this,t);for(var e=arguments.length,r=Array(e),o=0;o<e;o++)r[o]=arguments[o];return x(z(e=n.call.apply(n,[this].concat(r))),"name","RtmUnauthenticatedError"),x(z(e),"serverCode",void 0),e}Ga(t,e);var n=Ha(t);return t}(ud),ve=function(e){function t(){va(this,t);for(var e=arguments.length,r=Array(e),o=0;o<e;o++)r[o]=arguments[o];return x(z(e=n.call.apply(n,[this].concat(r))),"name","RtmUnknownError"),e}Ga(t,e);var n=Ha(t);return t}(ud),Ab=function(e){return e instanceof Ub||e instanceof Tb},Na=function(e){return e instanceof ud},we=function(e,t,n){return['Executing "%s.%s" timed out after %ds',e,t,n/1e3]},cE=["CODE"],bc,Pd,S;!function(e){e.CHINA="CN",e.ASIA="AS",e.NORTH_AMERICA="NA",e.EUROPE="EU",e.JAPAN="JP",e.INDIA="IN",e.OCEANIA="OC",e.SOUTH_AMERICA="SA",e.AFRICA="AF",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL"}(S||(S={}));var dE={CN:S.CHINA,NA:S.NORTH_AMERICA,EU:S.EUROPE,AS:S.ASIA,JP:S.JAPAN,IN:S.INDIA,GLOB:S.GLOBAL,AF:S.AFRICA,OC:S.OVERSEA,OVS:S.OVERSEA,SA:S.SOUTH_AMERICA},kh=$n((bc={},x(bc,S.ASIA,{CODE:S.ASIA,AP_DOMAINS:["ap-web-1-asia.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-asia.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],PROXY_AP:["proxy-ap-web-asia.agora.io"],PROXY_NGINX:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]}),x(bc,S.NORTH_AMERICA,{CODE:S.NORTH_AMERICA,AP_DOMAINS:["ap-web-1-north-america.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-north-america.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],PROXY_AP:["proxy-ap-web-america.agora.io"],PROXY_NGINX:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]}),x(bc,S.EUROPE,{CODE:S.EUROPE,AP_DOMAINS:["ap-web-1-europe.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-europe.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],PROXY_AP:["proxy-ap-web-europe.agora.io"],PROXY_NGINX:["europe.webrtc-cloud-proxy.sd-rtn.com"]}),x(bc,S.JAPAN,{CODE:S.JAPAN,AP_DOMAINS:["ap-web-1-japan.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-japan.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],PROXY_AP:["proxy-ap-web-japan.agora.io"],PROXY_NGINX:["japan.webrtc-cloud-proxy.sd-rtn.com"]}),x(bc,S.INDIA,{CODE:S.INDIA,AP_DOMAINS:["ap-web-1-india.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-india.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],PROXY_AP:["proxy-ap-web-india.agora.io"],PROXY_NGINX:["india.webrtc-cloud-proxy.sd-rtn.com"]}),x(bc,S.OVERSEA,{CODE:S.OVERSEA,AP_DOMAINS:["ap-web-1-oversea.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],PROXY_AP:["proxy-ap-web-oversea.agora.io"],PROXY_NGINX:["webrtc-cloud-proxy.agora.io"]}),x(bc,S.GLOBAL,{CODE:S.GLOBAL,AP_DOMAINS:["ap-web-1.agora.io","ap-web-2.agora.io"],AP_BACKUP_DOMAINS:["ap-web-3.agora.io","ap-web-4.agora.io"],EVENT_REPORT_DOMAIN:["webcollector-rtm.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["webcollector-1.agora.io"],LOG_UPLOAD_SERVER:["logservice-rtm.agora.io"],PROXY_AP:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],PROXY_NGINX:["webrtc-cloud-proxy.sd-rtn.com"]}),x(bc,S.OCEANIA,{CODE:S.OCEANIA,AP_DOMAINS:["ap-web-1-oceania.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-oceania.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],PROXY_AP:["proxy-ap-web-oceania.agora.io"],PROXY_NGINX:["oceania.webrtc-cloud-proxy.sd-rtn.com"]}),x(bc,S.SOUTH_AMERICA,{CODE:S.SOUTH_AMERICA,AP_DOMAINS:["ap-web-1-south-america.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-south-america.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],PROXY_AP:["proxy-ap-web-south-america.agora.io"],PROXY_NGINX:["south-america.webrtc-cloud-proxy.sd-rtn.com"]}),x(bc,S.AFRICA,{CODE:S.AFRICA,AP_DOMAINS:["ap-web-1-africa.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-africa.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],PROXY_AP:["proxy-ap-web-africa.agora.io"],PROXY_NGINX:["africa.webrtc-cloud-proxy.sd-rtn.com"]}),x(bc,S.CHINA,{CODE:S.CHINA,AP_DOMAINS:["webrtc2-2.ap.sd-rtn.com"],AP_BACKUP_DOMAINS:["webrtc2-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],PROXY_AP:["proxy-ap-web.agoraio.cn"],PROXY_NGINX:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]}),bc)),Zf=(Pd={},x(Pd,S.ASIA,[S.CHINA,S.JAPAN,S.INDIA]),x(Pd,S.EUROPE,[]),x(Pd,S.NORTH_AMERICA,[]),x(Pd,S.SOUTH_AMERICA,[]),x(Pd,S.OCEANIA,[]),x(Pd,S.AFRICA,[]),Pd),Os=[S.OVERSEA,S.GLOBAL,S.CHINA,S.NORTH_AMERICA,S.EUROPE,S.ASIA,S.JAPAN,S.INDIA,S.OCEANIA,S.SOUTH_AMERICA,S.AFRICA],Nn=function(e){return Object.values(Zf).flat().includes(e)},Hv=function(e){var t;return null===(t=qh(Zf).find((function(t){return(t=$a(t,2))[0],t[1].includes(e)})))||void 0===t?void 0:t[0]},eE=function(e){return e.sort((function(e,t){return Os.indexOf(e)-Os.indexOf(t)}))},Ve=function(e){var t=new Set;if(0===(e=eE(e).slice(0,3).map((function(e){var n=kh[e];if(void 0===n)throw new rc("invalid area key");return e=n.CODE,n=Ki(n,cE),t.add(e),n}))).length)throw new rc("areas cannot be empty");return Wa({CODES:t},e.reduce((function(e,t){for(var n=0,r=qh(e);n<r.length;n++){var o=$a(r[n],2),i=o[0];o=o[1],e[i]=Array.from(new Set([].concat(Z(t[i]),Z(o))))}return e})))},fa,Ps=function(){var e=ma(N.mark((function e(t,n){var r,o,i,a,s,c=arguments;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(2<(o=2<c.length&&void 0!==c[2]?c[2]:0))){e.next=3;break}return e.abrupt("return");case 3:return i={withCredentials:!0,body:t,timeout:2e4},a=0<o?(null==fa?void 0:fa.LOG_UPLOAD_SERVER[0])||"rtm.logservice.sd-rtn.com":(null==fa?void 0:fa.LOG_UPLOAD_SERVER[0])||"logservice-rtm.agora.io",s=n?"https://".concat(null!==(r=null==fa?void 0:fa.PROXY_NGINX[0])&&void 0!==r?r:"webrtc-cloud-proxy.sd-rtn.com","/ls/?h=").concat(a,"&p=443&d=upload/v1"):"https://".concat(a,"/upload/v1"),e.next=8,lh(s,i).catch((function(e){return Ps(t,n,o+1)}));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Qs=new $D({processId:"process-".concat(Og),sdkVersion:"Agora_RTM_SDK_for_Web_".concat("v1.5.1-0-g5bbbcd72"),uploadRequest:Ps,rtmConfig:{}}),Sl="text payload rawMessage thumbnail attributeInfos keys value extra".split(" "),Rs="account ticket uid detail token account fileName cname user group key origin users src dst lastUpdateUserId channel cert wan_ip".split(" "),Ss=["serverReceivedTs","hasPeerReceived","messageType","enableNotificationToChannelMembers","lastUpdateTs"],fE="ChannelMessage MemberLeft MessageFromPeer LocalInvitationRefused LocalInvitationAccepted RemoteInvitationCanceled PeersOnlineStatusChanged AttributesUpdated MemberJoined".split(" "),We=function(e){if("string"==typeof e)return La(e);if(Array.isArray(e)&&e.every((function(e){return"string"==typeof e})))return e.map((function(e){return La(e)}));if(!Mm(e)){for(var t={},n=0;n<Ss.length;n++){var r=Ss[n];r in e&&(t[r]=e[r])}if(0<Object.keys(t).length)return t;if(5>Object.keys(e).length){for(n=0,e=Object.entries(e);n<e.length;n++){var o=$a(e[n],2);r=o[0],o=o[1],Sl.includes(r)?t[r]="[Hidden Info]":t[La(r)]="string"==typeof o?La(o):"[Sensitive Info]"}return t}return"[Sensitive Info]"}return e},Ts=function(e){return"object"===qa(e)?De(e)?Zn(He(e,5),Sl,Rs):e.constructor&&e.constructor.name:e},Us=function(e,t){return e instanceof Error?e.message:"string"!=typeof e?JSON.stringify(Zn(He(e,5),Sl,Rs)):(t=t.map((function(e){return e instanceof Error?e.message:"object"===qa(e)?Ks(Array.isArray(e)?e.map(Ts):Ts(e)):e})),Wn.apply(void 0,[e.replace(/%[%Oo]/g,(function(e){return"%%"===e?"%":"%o"===e||"%O"===e?"%s":e}))].concat(Z(t))))},gE=1,Vs=function(e,t,n){var r=Ls(e);return r.enabled=!0,r.log=n,r.useColors=!1,function(n){for(var o=arguments.length,i=Array(1<o?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];if(t.enableLogUpload){o=oh(n);var s=Us(o,i);Qs.upload({log_item_id:"".concat(gE++),log_level:e,payload_str:"[".concat(hE(),"] ").concat(e," - ").concat(256<s.length?s.slice(0,256):s)})}switch(o=function(e){var t=s||Us(oh(n),i),o=Ec.LOG_HANDLER;"function"==typeof o&&o({level:e,message:t}),r(t)},e){case"RTM:INFO":t.logFilter.info&&o("log");break;case"RTM:WARN":t.logFilter.warn&&o("warning");break;case"RTM:ERROR":t.logFilter.error&&o("error");break;case"RTM:TRACK":t.logFilter.track&&o("log");break;case"RTM:MSG:RECV":case"RTM:MSG:SEND":case"RTM:DEBUG":t.logFilter.debug&&o("debug")}}},Tl,Ws=function(e){return function(t){var n=1===Tl||void 0===e?"":"Ins#".concat(e," ");return"".concat(n).concat(t)}},Ul=function(e,t,n){var r=Ws(Tl);return Vs("RTM:".concat(t),n,(function(t){return e(r(t))}))},sc=function(){return function(e){function t(e,r){var o=2<arguments.length&&void 0!==arguments[2]&&arguments[2];va(this,t);var i=n.call(this);if(x(z(i),"logError",void 0),x(z(i),"invokeTracker",void 0),x(z(i),"resultTracker",void 0),x(z(i),"errorTracker",void 0),x(z(i),"eventTracker",void 0),x(z(i),"info",void 0),x(z(i),"warn",void 0),x(z(i),"log",void 0),x(z(i),"genLogger",void 0),x(z(i),"loggerId",void 0),x(z(i),"logger",void 0),x(z(i),"name",void 0),i.logger=e,i.name=r,i.loggerId=e.loggerId,i.info=e.info,i.warn=e.warn,i.logError=e.logError,i.genLogger=e.genLogger,i.log=e.genLogger("RTM:DEBUG","<".concat(r,"> ")),i.invokeTracker=e.genTracker("Invoke"),i.eventTracker=e.genTracker("Event"),i.resultTracker=e.genTracker("Result"),i.errorTracker=e.genTracker("Error"),o){var a=i.emit.bind(z(i));i.emit=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];e=t[0],n=t.slice(1);var o=fE.includes(e);i.eventTracker.apply(i,["%s: ".concat(0<n.length?"%s emitted with args: ".concat(n.map((function(){return"%o"}))):"%s emitted"),r,e].concat(Z(o?n.map(We):n)));try{a.apply(void 0,t)}catch(s){i.logError("Caught in the callback function of the event %s",e,s)}}}return i}Ga(t,e);var n=Ha(t);return t}(Ba)},iE=function(e){return Ul(console.log.bind(console),"INFO",e)},jE=function(e){return Ul(console.warn.bind(console),"WARN",e)},kE=function(e){return Ul(console.error.bind(console),"ERROR",e)},Xs=function(e,t){return function(n){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",o=Ws(e),i=console.debug.bind(console),a=Vs(n,t,(function(e){return i(o(e))}));return function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return a.apply(void 0,[r+e].concat(n))}}},lE=function(e,t){return function(n){return Xs(e,t)("RTM:TRACK","[".concat(n,"] "))}},Jv=Object.freeze({__proto__:null,Counter:1,ApiExec:154,Session:164,ApEvent:165,Link:166,Logout:167,TxMessage:168,RxMessage:169,KickedOff:170,TxMessageRes:171,ChnJoin:172,ChnJoinRes:173,ChnLeave:174,ChnGetMembers:175,ChnGetMembersRes:176,ChnMemberJoined:177,ChnMemberLeft:178,QueryPeersOnlineStatus:179,QueryPeersOnlineStatusRes:180,RenewToken:181,OperateAttribute:186,OperateAttributeRes:187,ApRequest:188,LinkTcpEvent:189,LinkLoginRequest:190,ConnectionStateChange:191,RtmSdkMessageCount:510,default:{Counter:1,ApiExec:154,Session:164,ApEvent:165,Link:166,Logout:167,TxMessage:168,RxMessage:169,KickedOff:170,TxMessageRes:171,ChnJoin:172,ChnJoinRes:173,ChnLeave:174,ChnGetMembers:175,ChnGetMembersRes:176,ChnMemberJoined:177,ChnMemberLeft:178,QueryPeersOnlineStatus:179,QueryPeersOnlineStatusRes:180,RenewToken:181,OperateAttribute:186,OperateAttributeRes:187,ApRequest:188,LinkTcpEvent:189,LinkLoginRequest:190,ConnectionStateChange:191,RtmSdkMessageCount:510}}),Ka;!function(e){e[e.ChannelSMsg=1]="ChannelSMsg",e[e.ChannelRMsg=2]="ChannelRMsg",e[e.P2pSMsgOfflineFlag=3]="P2pSMsgOfflineFlag",e[e.P2pRMsgOfflineFlag=4]="P2pRMsgOfflineFlag",e[e.P2pSMsgNoOfflineFlag=5]="P2pSMsgNoOfflineFlag",e[e.P2pRMsgNoOfflineFlag=6]="P2pRMsgNoOfflineFlag",e[e.P2pCallInvitation=7]="P2pCallInvitation",e[e.P2pCallCancellation=8]="P2pCallCancellation",e[e.P2pCallAcceptance=9]="P2pCallAcceptance",e[e.P2pCallRefusal=10]="P2pCallRefusal"}(Ka||(Ka={}));var zi=function(e){function t(e,r,o){return va(this,t),x(z(r=n.call(this,r,"MessageReport")),"messagecount",r.getInitMessageCount()),x(z(r),"context",void 0),x(z(r),"rtmMessageCategory",void 0),x(z(r),"seq",P.fromNumber(1,!0)),r.context=e,r.rtmMessageCategory=o,r}Ga(t,e);var n=Ha(t);return eb(t,[{key:"incGetSeq",value:function(){return this.seq=this.seq.add(1)}},{key:"getInitMessageCount",value:function(){return{peerack10mscount:P.fromNumber(0),peerack25mscount:P.fromNumber(0),peerack50mscount:P.fromNumber(0),peerack75mscount:P.fromNumber(0),peerack100mscount:P.fromNumber(0),peerack150mscount:P.fromNumber(0),peerack200mscount:P.fromNumber(0),peerack250mscount:P.fromNumber(0),peerack300mscount:P.fromNumber(0),peerack400mscount:P.fromNumber(0),peerack500mscount:P.fromNumber(0),peerack600mscount:P.fromNumber(0),peerack800mscount:P.fromNumber(0),peerack1000mscount:P.fromNumber(0),peerack2000mscount:P.fromNumber(0),peerack3000mscount:P.fromNumber(0),peerack5000mscount:P.fromNumber(0),peerack7000mscount:P.fromNumber(0),peerackslowcount:P.fromNumber(0),norecipientack10mscount:P.fromNumber(0),norecipientack25mscount:P.fromNumber(0),norecipientack50mscount:P.fromNumber(0),norecipientack75mscount:P.fromNumber(0),norecipientack100mscount:P.fromNumber(0),norecipientack150mscount:P.fromNumber(0),norecipientack200mscount:P.fromNumber(0),norecipientack250mscount:P.fromNumber(0),norecipientack300mscount:P.fromNumber(0),norecipientack400mscount:P.fromNumber(0),norecipientack500mscount:P.fromNumber(0),norecipientack600mscount:P.fromNumber(0),norecipientack800mscount:P.fromNumber(0),norecipientack1000mscount:P.fromNumber(0),norecipientack2000mscount:P.fromNumber(0),norecipientack3000mscount:P.fromNumber(0),norecipientack5000mscount:P.fromNumber(0),norecipientack7000mscount:P.fromNumber(0),norecipientackslowcount:P.fromNumber(0),sentcount:P.fromNumber(0),receivedcount:P.fromNumber(0),acktimeoutcount:P.fromNumber(0),toooftencount:0,receiverofflinecount:0,invalidmessagecount:0,unknowerrorcount:0,servercachedcount:0,timeoutcount:0,successcount:0}}},{key:"updatePeerAckCount",value:function(e){e/=2;for(var t=[[0,10],[10,25],[25,50],[50,75],[75,100],[100,150],[150,200],[200,250],[250,300],[300,400],[400,500],[500,600],[600,800],[800,1e3],[1e3,2e3],[2e3,3e3],[3e3,5e3],[5e3,7e3]],n=0;n<t.length;n++){var r,o=t[n];if(Is(e,o[0],o[1]))o="peerack".concat(o[1],"mscount"),this.messagecount[o]=null===(r=this.messagecount[o])||void 0===r?void 0:r.add(1);else if(7e3<e){var i;this.messagecount.peerackslowcount=null===(i=this.messagecount.peerackslowcount)||void 0===i?void 0:i.add(1)}}}},{key:"updateNorecipientackCount",value:function(e){e/=2;for(var t=[[0,10],[10,25],[25,50],[50,75],[75,100],[100,150],[150,200],[200,250],[250,300],[300,400],[400,500],[500,600],[600,800],[800,1e3],[1e3,2e3],[2e3,3e3],[3e3,5e3],[5e3,7e3]],n=0;n<t.length;n++){var r,o=t[n];if(Is(e,o[0],o[1]))o="norecipientack".concat(o[1],"mscount"),this.messagecount[o]=null===(r=this.messagecount[o])||void 0===r?void 0:r.add(1);else if(7e3<e){var i;this.messagecount.norecipientackslowcount=null===(i=this.messagecount.norecipientackslowcount)||void 0===i?void 0:i.add(1)}}}},{key:"updateCommonCount",value:function(e){var t=this.messagecount[e];P.isLong(t)?this.messagecount[e]=t.add(1):this.messagecount[e]=t+1}},{key:"report",value:function(){var e,t;bb("RtmSdkMessageCount",new Js(Wa(Wa({},this.messagecount),{},{vid:P.fromString(null!==(e=this.context.vid)&&void 0!==e?e:"0"),os:7,lts:P.fromNumber(Date.now()),sid:this.context.sid,reportsequence:this.incGetSeq(),apimajorversion:4,apiminorversion:18,userid:this.context.uid,messagecategory:this.rtmMessageCategory})),null!==(t=this.context.config.enableCloudProxy)&&void 0!==t&&t),this.messagecount=Wa(Wa({},this.messagecount),{},{toooftencount:0,receiverofflinecount:0,invalidmessagecount:0,unknowerrorcount:0,servercachedcount:0,timeoutcount:0,successcount:0})}}]),t}(sc()),Un=new Map,hE=function(){var e=new Date;return"".concat(e.toISOString().split("T")[1].replace(/\..+/,""),".").concat(e.getMilliseconds())},Yf=Object.keys,qh=Object.entries.bind(Object),oh=function(e){return"string"==typeof e?e.endsWith(".")?e:"".concat(e,"."):e},yj=I.URI,Nv=wi,mE=Ki(oD,["Wrapper"]),bo=ql(mE,"URI"),Ys=function(e,t){var n=-1,r=e.length,o=r-1;for(t=void 0===t?r:t;++n<t;){var i=e[r=os(n,o)];e[r]=e[n],e[n]=i}return e.length=t,e},nE=function(e){return Ys(Pi(e))},oE=function(e){return Ys(zj(e))},Cf=function(e){return(ub(e)?nE:oE)(e)},Df={0:9591,1:9593},xe=function(e){return"https://".concat(e,"/api/v1")},pE=ob.apply(void 0,Z(Cf(["web-1.ap.sd-rtn.com","web-2.ap.sd-rtn.com"].map(xe)))),qE=ob.apply(void 0,Z(Cf(["ap-web-1.agora.io","ap-web-2.agora.io"].map(xe)))),rE=ob.apply(void 0,Z(Cf(["web-3.ap.sd-rtn.com","web-4.ap.sd-rtn.com"].map(xe)))),sE=ob.apply(void 0,Z(Cf(["ap-web-3.agora.io","ap-web-4.agora.io"].map(xe)))),Zs=yi(),Vl=function(e){function t(e,r,o,i,a,s){var c,l;va(this,t);var u=n.call(this,a,uj("Socket-",a.loggerId));if(x(z(u),"isActiveClose",!1),x(z(u),"loggedIn",!1),x(z(u),"useNewDomain",void 0),x(z(u),"receivedPacket",new rb),x(z(u),"open$",void 0),x(z(u),"input$",new rb),x(z(u),"userJoin$",new rb),x(z(u),"attemptsSinceLastError",0),x(z(u),"message$",new rb),x(z(u),"socket$",void 0),x(z(u),"toClose",new rb),x(z(u),"toReconnect",new rb),x(z(u),"sendLogger",void 0),x(z(u),"receiveLogger",void 0),x(z(u),"ip",void 0),x(z(u),"env",void 0),x(z(u),"ticket",void 0),x(z(u),"context",void 0),x(z(u),"getDomain",(function(){return co(u.ip,u.useNewDomain)})),x(z(u),"socketReconnector",(function(e){var t=function(e){return u.attemptsSinceLastError+=1,u.warn("The %s of Env %d reconnecting %s",u.name,u.env,e.message),dd(3e3)};return e.pipe(ab((function(e){return u.log("socket connection closed"),u.loggedIn=!1,2<=u.attemptsSinceLastError?(u.warn("socket connection failure"),u.emit("connectionFailure"),u.close(),ra(e)):u.isActiveClose?Sb:(u.emit("reconnect"),u.useNewDomain=!u.useNewDomain,ra(e))})),Re((function(e){return e.pipe(Kb(t))})))})),u.ip=e,u.env=r,u.ticket=o,u.context=i,u.useNewDomain=null!=s?s:.5<=Math.random(),u.sendLogger=u.genLogger("RTM:MSG:SEND"),u.receiveLogger=u.genLogger("RTM:MSG:RECV"),0!==r&&1!==r)throw new Zs({ILLEGAL_RTM_ENV:"The env number is out of rtm env count"});var d=Df[r];u.log("Opening websocket address %s for the Env %d",u.ip,u.env),bb("LinkLoginRequest",{sid:u.context.sid,userId:u.context.uid,lts:P.fromNumber(Date.now()),elapse:Xa(u.context.startTime),destServerIp:u.ip,linkId:u.env},null!==(c=u.context.config.enableCloudProxy||u.context.socketUseProxy)&&void 0!==c&&c),bb("LinkLoginRequest",{sid:u.context.sid,userId:u.context.uid,lts:P.fromNumber(Date.now()),elapse:Xa(u.context.startTime),destServerIp:u.ip,linkId:u.env},null!==(l=u.context.config.enableCloudProxy||u.context.socketUseProxy)&&void 0!==l&&l);var A=Jb(u.input$,u.userJoin$.pipe(Av(2)),u.message$).pipe(Ea((function(e){return wi.encode(e).finish()})));return e=Jb(Bv("",{protocols:[],makeWebSocket:function(){if(u.context.config.enableCloudProxy||u.context.socketUseProxy){if(0===u.context.cloudProxyServers.length)throw u.logError("No cloud proxy server to connect"),new Ja;var e=u.context.cloudProxyServers;e=Xe(e="wss://".concat(co(On(e),!1),"/"),"sid",u.context.sid),e=Xe(e,"remote_port",d.toString()),e=Xe(e,"remote_ip",u.ip),e=Xe(e,"token",u.context.key),e=new WebSocket(e)}else e=new WebSocket("wss://".concat(u.getDomain(),":").concat(d));return e.binaryType="arraybuffer",e}}),u.toReconnect),u.socket$=fb(e,Dl.pipe(Lb(7e3),ab((function(e){return Ab(e)&&u.warn("socket open timed out"),ra(e)})))).pipe(Ea((function(e){if(e instanceof Error)throw u.warn("Env_%d: Force reconnect the socket",u.env),e;return e(A).pipe(Ea((function(e){return wi.decode(new Uint8Array(e))})))})),u.socketReconnector),u.open$=u.socket$.pipe(sa((function(e){u.log("Websocket opened",u.name),e.subscribe((function(e){var t=e.data;e=yj[e.uri].slice(0,-3),t=bo[e].decode(t);var n=eC({},ql(t,"toJSON"),(function(e,t){return t instanceof P?Tn(t):t})),r=!1;if((t instanceof ws||t instanceof vs)&&t.instance.lessThanOrEqual(4294967295)&&(r=!0),t instanceof xs||t instanceof ys){var o=t.instance,i=t.sequence;(t.dialogue.lessThanOrEqual(4294967295)||o.lessThanOrEqual(4294967295)||i.lessThan(1))&&(r=!0)}r?u.warn("Env_%d: Illegal %s, abandoned %o",u.env,e,n):("Pong"!==e&&u.receiveLogger("Env_%d: %s %o",u.env,e,n),u.receivedPacket.next([e,t]))}),(function(){}))})),Uf(void 0),Kc(u.toClose),Se()),u}Ga(t,e);var n=Ha(t);return eb(t,[{key:"address",get:function(){return"".concat(this.ip,":").concat(Df[this.env])}},{key:"sendPacket",value:function(e,t){if("Ping"!==e){var n=md(t,(function(e){return e instanceof P?Tn(e):e}));this.sendLogger("Env_%d: %s %o",this.env,e,n)}t=Mv(e,t),"UserJoin"===e?this.userJoin$.next(t):"Message"===e?this.message$.next(t):this.input$.next(t)}},{key:"close",value:function(){this.isActiveClose=!0,this.loggedIn=!1,this.toClose.next()}},{key:"fromReceived",value:function(e){return this.receivedPacket.pipe(yb((function(t){return $a(t,1)[0]===e})),Ea((function(e){return $a(e,2)[1]})))}},{key:"forceReconnect",value:function(){this.toReconnect.next(new Zs({FORCE_RECONNECTING:"Connection seems broken, try force reconnecting"}))}}]),t}(sc());ea({target:"String",proto:!0,forced:As},{padStart:function(e){return qD(this,e,1<arguments.length?arguments[1]:void 0)}});var tE=function(e){var t=Yf(kh);e=Lv(e);for(var n=0;n<t.length;n++){var r=kh[t[n]];if(null!=r&&r.AP_DOMAINS.includes(e)||null!=r&&r.AP_BACKUP_DOMAINS.includes(e)||null!=r&&r.PROXY_AP.includes(e))return[r.CODE]}return[S.CHINA,S.GLOBAL]},uE={INVALID_APP_ID:"Illegal App ID",NO_AUTHORIZED:"Signature verification failed",TOKEN_TIMEOUT:"Dynamic key expired",INVALID_TOKEN_UID:"UID in the security key(token) is not valid",APP_ID_NO_ACTIVATED:"The vendor is not activated",DYNAMIC_KEY_NOT_ENABLED:"The vendor did not enable the dynamic key, but uses the dynamic key",DYNAMIC_ENABLED_BUT_STATIC_KEY:"The vendor enabled the dynamic key, but uses the static key",TOKEN_EXPIRED:"The token has expired",INVALID_USER_ID:"The user ID to login does not match the token",FORBIDDEN_REGION:"Forbidden to access the request in this area",CANNOT_MEET_AREA_DEMAND:"Cannot allocate to meet the requirements of the given area limit"},$s={5:"INVALID_APP_ID",7:"INVALID_USER_ID",9:"NO_AUTHORIZED",10:"TOKEN_TIMEOUT",11:"APP_ID_NO_ACTIVATED",12:"INVALID_TOKEN_UID",13:"TOKEN_EXPIRED",14:"DYNAMIC_KEY_NOT_ENABLED",15:"DYNAMIC_ENABLED_BUT_STATIC_KEY",18:"FORBIDDEN_REGION",19:"CANNOT_MEET_AREA_DEMAND"},vE=[100,101,102],Ai=/web-(\d)/,at=function(e){function t(e,r){var o=2<arguments.length&&void 0!==arguments[2]&&arguments[2];va(this,t);var i=n.call(this,r,"AccessPoint");return x(z(i),"handleUniLbsError",(function(e,t){var n=e;if(4<e.toString().length){var r=e.toString().padStart(8,"0"),o=parseInt(r.slice(0,4),10);if(r=parseInt(r.slice(4,8),10),201===o)n=r;else if(101===o&&!vE.includes(r))return ra(Error("service is currently unavailable"))}if(o=n.toString(),!Object.keys($s).includes(o))return(e=new Ja(["Login is rejected by the server. The response code is %d",e],Pg)).serverCode=n,ra(e);switch(o=$s[o],n=uE[o],o){case"INVALID_APP_ID":case"APP_ID_NO_ACTIVATED":return(t=new Bf(n,as)).serverCode=e,ra(t);case"INVALID_USER_ID":return(t=new Bf(n,si)).serverCode=e,ra(t);case"TOKEN_EXPIRED":case"TOKEN_TIMEOUT":return(t=new Bf(n,ti)).serverCode=e,ra(t);case"NO_AUTHORIZED":case"INVALID_TOKEN_UID":case"DYNAMIC_KEY_NOT_ENABLED":case"DYNAMIC_ENABLED_BUT_STATIC_KEY":return(t=new Bf(n,bs)).serverCode=e,ra(t);case"CANNOT_MEET_AREA_DEMAND":return(t=tE(t)).forEach((function(e){return i.failedAreas.add(e)})),i.failedAreas.size===(void 0===fa?2:fa.CODES.size)?((t=new ca(n,Pg)).serverCode=e,ra(t)):ra(Error("ap ".concat(t.join(", ")," cannot meet requirement")));case"FORBIDDEN_REGION":return(t=new Ja(n,Pg)).serverCode=e,ra(t);default:return ra(Rn("ApResErrType",o))}})),x(z(i),"getApEdgeInfo$",void 0),x(z(i),"getApEdgeInfoEndFirst$",void 0),x(z(i),"apFinish$",new rb),x(z(i),"retryCount",0),x(z(i),"failedAreas",new Set),x(z(i),"usedUrl",[]),x(z(i),"newDomainUsed",!1),x(z(i),"backupNewDomainUsed",!1),x(z(i),"genUrl",(function(){return void 0===fa?ej.apply(void 0,Z(Cf([pE,qE]))).pipe(fj((function(e){return ob.apply(void 0,Z(e))}))):ob.apply(void 0,Z(fa.AP_DOMAINS.slice(0,3).map(xe)))})),x(z(i),"genBackupUrl",(function(){return void 0===fa?ej.apply(void 0,Z(Cf([rE,sE]))).pipe(fj((function(e){return ob.apply(void 0,Z(e))}))):ob.apply(void 0,Z(fa.AP_BACKUP_DOMAINS.slice(0,3).map(xe)))})),x(z(i),"getApUrl$",(function(e){var n,r;return i.genUrl().pipe(yb((function(e){return!(i.newDomainUsed&&e.includes("sd-rtn.com")||(e.includes("sd-rtn.com")&&(i.newDomainUsed=!0),Ol(i.usedUrl,(function(t){var n;return t===(null===(n=e.match(Ai))||void 0===n?void 0:n[1])}))))})),sa((function(e){var t;void 0===fa&&"string"==typeof(e=null===(t=e.match(Ai))||void 0===t?void 0:t[1])&&i.usedUrl.push(e)})),hb(e?Math.max(Ec.RECONNECTING_AP_NUM,null!==(n=null==fa?void 0:fa.CODES.size)&&void 0!==n?n:0):null!==(r=null==fa?void 0:fa.CODES.size)&&void 0!==r?r:2),$d((function(){return t.runOutOfUrlSymbol})),ab((function(e,n){return i.newDomainUsed=!1,e===t.runOutOfUrlSymbol?(i.usedUrl=[],n):ra(e)})))})),x(z(i),"getBackupApUrl$",(function(e){var n,r;return i.genBackupUrl().pipe(yb((function(e){return!(i.backupNewDomainUsed&&e.includes("sd-rtn.com")||(e.includes("sd-rtn.com")&&(i.backupNewDomainUsed=!0),Ol(i.usedUrl,(function(t){var n;return t===(null===(n=e.match(Ai))||void 0===n?void 0:n[1])}))))})),sa((function(e){var t;void 0===fa&&"string"==typeof(e=null===(t=e.match(Ai))||void 0===t?void 0:t[1])&&i.usedUrl.push(e)})),hb(e?Math.max(Ec.RECONNECTING_AP_NUM,null!==(n=null==fa?void 0:fa.CODES.size)&&void 0!==n?n:0):null!==(r=null==fa?void 0:fa.CODES.size)&&void 0!==r?r:2),$d((function(){return t.runOutOfUrlSymbol})),ab((function(e,n){return i.backupNewDomainUsed=!1,e===t.runOutOfUrlSymbol?(i.usedUrl=[],n):ra(e)})))})),x(z(i),"getProxyApUrl$",(function(e){var t,n;return ob.apply(void 0,Z(((null==fa?void 0:fa.PROXY_AP.slice(0,3))||["ap-proxy-1.agora.io","ap-proxy-2.agora.io"]).map(xe))).pipe(hb(e?Math.max(Ec.RECONNECTING_AP_NUM,null!==(t=null==fa?void 0:fa.CODES.size)&&void 0!==t?t:0):null!==(n=null==fa?void 0:fa.CODES.size)&&void 0!==n?n:2))})),x(z(i),"context",void 0),x(z(i),"fetchCloudProxy",(function(e,t){var n=uj("AP-",i.loggerId);i.log("The AccessPoint requests %s(%s)",e,n);var r,o=new AbortController;return i.apFinish$.pipe(hb(1)).subscribe((function(){return o.abort()})),yd(ma(N.mark((function r(){var a,s;return N.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s=mh(0,Number.MAX_SAFE_INTEGER),i.log("%s request opid: %d",n,s),bb("ApRequest",{sid:i.context.sid,userId:i.context.uid,lts:P.fromNumber(Date.now()),elapse:Xa(i.context.startTime),apAddr:e,opId:P.fromNumber(s),envId:0,flag:128},null!==(a=i.context.config.enableCloudProxy)&&void 0!==a&&a),r.abrupt("return",lh(e,{headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"90","Content-Type":"application/json"},body:{sid:i.context.sid,opid:s,appid:i.context.appId,client_ts:Math.ceil(Date.now()/1e3),request_bodies:[{uri:22,buffer:{service_ids:[7,16],key:null!=t?t:i.context.key,cname:i.context.uid,uid:0,detail:Wa({},void 0===fa?{11:[S.CHINA,S.GLOBAL].join(),12:"1"}:{11:Array.from(fa.CODES).map((function(e){return e===S.OVERSEA?"".concat(S.ASIA,",").concat(S.EUROPE,",").concat(S.AFRICA,",").concat(S.NORTH_AMERICA,",").concat(S.SOUTH_AMERICA,",").concat(S.OCEANIA):e})).join(","),12:"1"})}}]},signal:o.signal}));case 4:case"end":return r.stop()}}),r)})))).pipe(ab((function(t){return"AbortError"!==t.name&&(i.logError(t),i.warn("The AP server %s request failure",e,t)),Sb})),Cb((r=ma(N.mark((function t(r){var o,a,s,c,l,u,d,A,p,h,f,g,m,_,E,v,y,b,C;return N.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=r.responseText,a=JSON.parse(o),i.log("The %s response is %o",n,a),(void 0===(s=a.response_body)||0===s.length||s.some((function(e){var t;return void 0===(null===(t=e.buffer)||void 0===t?void 0:t.code)||23!==e.uri})))&&ra(new Ja("cloud proxy response_body not valid",Pg)),0===(c=s.filter((function(e){return 0!==e.buffer.code}))).length){t.next=14;break}if(void 0===(l=c.find((function(e){return 128===e.buffer.flag})))){t.next=12;break}return t.abrupt("return",i.handleUniLbsError(l.buffer.code,e));case 12:return i.logError("cloud proxy error response"),t.abrupt("return",i.handleUniLbsError(c[0].buffer.code,e));case 14:for(u=[],d=0;d<s.length;d++)if(262144===(null==(h=s[d])||null===(A=h.buffer)||void 0===A?void 0:A.flag))null===(f=h.buffer)||void 0===f||null===(g=f.edges_services)||void 0===g||null===(m=g.forEach)||void 0===m||m.call(g,(function(e){Pn(e=e.ip)&&-1===i.context.cloudProxyServers.indexOf(e)&&(i.log("got cloud proxy server: %s",e),i.context.cloudProxyServers.push(e))}));else if(128===(null==h||null===(p=h.buffer)||void 0===p?void 0:p.flag)){for(y=function(e,t){var n=t[e];u.some((function(e){return e.ip===n.ip}))||u.push({ip:n.ip,ticket:h.buffer.cert})},b=0,C=h.buffer.edges_services;b<C.length;b++)y(b,C);i.context.rtmArea=null!==(_=null===(E=h.buffer)||void 0===E||null===(v=E.detail)||void 0===v?void 0:v[9])&&void 0!==_?_:""}return t.abrupt("return",ob.apply(void 0,Z(u).concat([Mg])));case 19:case"end":return t.stop()}}),t)}))),function(e){return r.apply(this,arguments)})),ab((function(e){return Na(e)?ra(e):Sb})),bh(),yb((function(e){return void 0!==e&&"string"==typeof e.ip&&"string"==typeof e.ticket&&Pn(e.ip)})))})),x(z(i),"fetchAp",(function(e,t){var n=uj("AP-",i.loggerId);i.log("The AccessPoint requests %s(%s)",e,n);var r=new AbortController;i.apFinish$.pipe(hb(1)).subscribe((function(){return r.abort()}));var o,a=mh(0,Number.MAX_SAFE_INTEGER);return yd(ma(N.mark((function o(){var s;return N.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return i.log("%s request opid: %d",n,a),bb("ApRequest",{sid:i.context.sid,userId:i.context.uid,lts:P.fromNumber(Date.now()),elapse:Xa(i.context.startTime),apAddr:e,opId:P.fromNumber(a),envId:0,flag:128},null!==(s=i.context.config.enableCloudProxy)&&void 0!==s&&s),o.abrupt("return",lh(e,{headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"69","Content-Type":"application/json"},body:{flag:128,opid:a,key:t||i.context.key,cname:i.context.uid,detail:Wa({},void 0===fa?{11:[S.CHINA,S.GLOBAL].join(),12:"1"}:{11:Array.from(fa.CODES).map((function(e){return e===S.OVERSEA?"".concat(S.ASIA,",").concat(S.EUROPE,",").concat(S.AFRICA,",").concat(S.NORTH_AMERICA,",").concat(S.SOUTH_AMERICA,",").concat(S.OCEANIA):e})).join(","),12:"1"}),uid:0,sid:i.context.sid},signal:r.signal}));case 3:case"end":return o.stop()}}),o)})))).pipe(ab((function(t){return"AbortError"!==t.name&&(i.logError(t),i.warn("The AP server %s request failure",e,t)),Sb})),Cb((o=ma(N.mark((function t(r){var o,s,c,l,u,d,A,p;return N.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=r.responseText,c=JSON.parse(s),i.log("The %s response is %o",n,c),u=(l=c).code,d=l.addresses,A=l.detail,i.context.vid=A[8],bb("ApEvent",{sid:i.context.sid,userId:i.context.uid,lts:P.fromNumber(Date.now()),elapse:Xa(i.context.startTime),apAddr:e,linkServerList:d.map((function(e){return e.ip})),serverErrCode:u,flag:128,envId:0,opId:P.fromNumber(a),errCode:0,area:A[9],isp:A[2]},null!==(o=i.context.config.enableCloudProxy)&&void 0!==o&&o),i.info(c),0===u){t.next=9;break}return t.abrupt("return",i.handleUniLbsError(u,e));case 9:if(0!==(p=d).length){t.next=14;break}return t.abrupt("return",ra(Error("No available edge address to connect")));case 14:return i.context.rtmArea=null==A?void 0:A[9],t.abrupt("return",ob.apply(void 0,Z(p).concat([Mg])));case 16:case"end":return t.stop()}}),t)}))),function(e){return o.apply(this,arguments)})),bh(),ab((function(e){return Na(e)?ra(e):Sb})),yb((function(e){return void 0!==e&&"string"==typeof e.ip&&"string"==typeof e.ticket})))})),i.context=e,i.getApEdgeInfoEndFirst$=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return dd(0,e||o?Ec.RECONNECTING_AP_INTERVAL:2e3).pipe(hb(1),sa((function(){i.retryCount+=1})),Cb((function(){return i.context.config.enableCloudProxy||i.context.socketUseProxy?i.getProxyApUrl$(e||o):(4<=i.retryCount&&(i.retryCount=0),3>=i.retryCount?i.getApUrl$(e||o):i.getBackupApUrl$(e||o))})),Cb((function(e){return i.context.config.enableCloudProxy||i.context.socketUseProxy?i.fetchCloudProxy(e):i.fetchAp(e)})),ab((function(e){return e instanceof Tb&&i.warn("AP request timeout"),ra(e)})),tn((function(e){return e.ip})),Kc(i.apFinish$))},i.getApEdgeInfo$=function(e){return dd(0,e||o?Ec.RECONNECTING_AP_INTERVAL:2e3).pipe(hb(8),sa((function(){i.retryCount+=1})),Cb((function(){return i.context.config.enableCloudProxy||i.context.socketUseProxy?i.getProxyApUrl$(e||o):3>=i.retryCount?i.getApUrl$(e||o):i.getBackupApUrl$(e||o)})),Cb((function(e){return(i.context.config.enableCloudProxy||i.context.socketUseProxy?i.fetchCloudProxy(e):i.fetchAp(e)).pipe()})),ab((function(e){return e instanceof Tb&&i.warn("AP request timeout"),ra(e)})),tn((function(e){return e.ip})),Kc(i.apFinish$))},i}Ga(t,e);var n=Ha(t);return eb(t,[{key:"clearUp",value:function(){this.failedAreas.clear(),this.retryCount=0}}]),t}(sc());x(at,"runOutOfUrlSymbol",Symbol("AP urls are used up"));var bt=yi(),ct=function(e){function t(e,r,o){va(this,t);var i=n.call(this,r,"Connection");x(z(i),"apClient",void 0),x(z(i),"lastOpenSockets",[new Te(1),new Te(1)]),x(z(i),"curOpenSockets",[void 0,void 0]),x(z(i),"ipIterator",0),x(z(i),"loginSocketOpenFailureCount",0),x(z(i),"firstEnv",.5<=Math.random()?1:0),x(z(i),"firstSocketOpener",void 0),x(z(i),"secondSocketOpener",void 0),x(z(i),"firstOpenKeeperSubject",new rb),x(z(i),"secondOpenKeeperSubject",new rb),x(z(i),"blacklistedIP",{}),x(z(i),"edgeInfoReplayed",void 0),x(z(i),"firstEnvOpenSocket",void 0),x(z(i),"firstOpenKeeperSub",void 0),x(z(i),"secondOpenKeeperSub",void 0),x(z(i),"context",void 0),x(z(i),"logger",void 0),i.context=e,i.logger=r,i.apClient=new at(i.context,r),i.apClient.apFinish$.subscribe((function(){i.log("Ap client fetch finished")}));var a,s=[];return i.edgeInfoReplayed=i.apClient.getApEdgeInfo$(o).pipe(Re((function(e){return e.pipe(sa((function(e){if(Na(e))throw e})),Zd(o?ue.getParameter("RECONNECTING_AP_INTERVAL"):900),Kc(dd(2e4)))})),yb((function(e){var t;return!Ol(s,e)&&1>=(null!==(t=i.blacklistedIP[e.ip])&&void 0!==t?t:0)})),$d((function(){return new bt({AP_NO_AVAILABLE_EDGE:"No available edge address to connect"})})),sa((function(e){s.push(e),i.log("An edge info got %o",e)})),sa({error:function(e){i.emit("connectionInitFailure",e)}}),fh((function(){i.apClient.clearUp()})),wn()),i.firstEnvOpenSocket=i.edgeInfoReplayed.pipe(Cb((function(e){if(void 0===e)return ra(Error("Invalid edge info"));var t=new Vl(e.ip,i.firstEnv,e.ticket,i.context,r,a);if(i.firstEnv=1===i.firstEnv?0:1,t.once("connectionFailure",(function(){return i.onSocketConnectionFailure(t)})),!o&&Ec.ENABLE_EDGE_AUTO_FALLBACK&&!i.context.config.enableCloudProxy){var n,s=Date.now();t.on("reconnect",(function(){var e;i.loginSocketOpenFailureCount+=1,null!==(e=n)&&void 0!==e||(n=Date.now()-s),500>n&&1<i.loginSocketOpenFailureCount&&(i.context.socketUseProxy=!0)}))}return a=!t.useNewDomain,t.open$.pipe(Uf(t))})),sa((function(e){i.log("The websocket of ENV_%d opened to %s:%d",e.env,e.ip,Df[e.env]),i.curOpenSockets[e.env]=e,i.lastOpenSockets[e.env].next(e),i.firstEnv=e.env,i.openSecondSocket(e.env,e.ip,e.useNewDomain)})),hb(1),Se()),i.firstSocketOpener=i.firstEnvOpenSocket.pipe(Cb((function(e){return e.open$.pipe(sa((function(){i.log("The websocket of first ENV_%d re-opened to %s:%d",e.env,e.ip,Df[e.env]),i.curOpenSockets[e.env]=e,i.lastOpenSockets[e.env].next(e)})))}))),e=i.firstOpenKeeperSubject.pipe(Kb(wd)),i.firstOpenKeeperSub=e.subscribe({error:i.logError}),i}Ga(t,e);var n=Ha(t);return eb(t,[{key:"initConnection",value:function(){this.firstOpenKeeperSubject.next(this.firstSocketOpener)}},{key:"closeSocket",value:function(e,t){if(![0,1].includes(e))throw new mb({INVALID_ENV:"The env argument is not 0 or 1"});var n=e===this.firstEnv?this.firstOpenKeeperSub:this.secondOpenKeeperSub;this.firstOpenKeeperSub=void 0;var r=this.curOpenSockets[e];this.curOpenSockets[e]=void 0,r&&(r.isActiveClose=!0,setTimeout((function(){r.close()}),t)),void 0!==n&&setTimeout((function(){null==n||n.unsubscribe()}),t)}},{key:"waitClosing",value:function(e){var t=this;return e.isActiveClose=!0,e.open$.pipe(ev(),ab((function(e){return e.message===ns.normalClosureMessage?Sb:ra(e)})),Lb(5e3),ab((function(n){return n instanceof Tb?(t.warn("Force closing the ENV_%d connection",e.env),Sb):ra(n)})))}},{key:"onSocketConnectionFailure",value:function(e){var t=[0,1].filter((function(t){return t!==e.env}))[0];(t=this.curOpenSockets[t])&&t.loggedIn?this.reopenSocketWithApRequest(e.env):this.emit("socketsFailure")}},{key:"openSecondSocket",value:function(e,t,n){var r=this,o=1===e?0:1;this.secondSocketOpener=this.edgeInfoReplayed.pipe(vn((function(e,t){return[].concat(Z(e),[t])}),[]),Ea((function(e){return ls(e,(function(e){return Sn(t,e.ip)})).slice(-1)[0]})),hb(1),Cb((function(e){if(void 0===e)return ra(Error("Invalid edge info"));var t=new Vl(e.ip,o,e.ticket,r.context,r.logger,n);return t.on("connectionFailure",(function(){return r.onSocketConnectionFailure(t)})),t.open$.pipe(sa((function(){r.lastOpenSockets[o].next(t),r.curOpenSockets[o]=t})))})),Se()),this.secondOpenKeeperSub=this.secondOpenKeeperSubject.pipe(Kb(wd)).subscribe({error:this.logError}),this.secondOpenKeeperSubject.next(this.secondSocketOpener)}},{key:"reopenSocketWithApRequest",value:function(e){var t=this,n=[0,1].filter((function(t){return t!==e}))[0];if(void 0!==(n=this.curOpenSockets[n])){var r,o=n.ip;n=this.apClient.getApEdgeInfoEndFirst$(!0).pipe($d((function(){return new bt({AP_NO_AVAILABLE_EDGE:"No available edge address to connect"})})),Re((function(e){return e.pipe(sa((function(e){if(e.code===ti)t.emit("tokenExpired"),t.apClient.apFinish$.next(void 0);else if(Na(e))throw e})),Zd(ue.getParameter("RECONNECTING_AP_INTERVAL")),Kc(dd(15e3)))})),sa((function(e){t.log("An edge info got %o",e)})),fh((function(){t.apClient.clearUp()}))).pipe(vn((function(e,t){return[].concat(Z(e),[t])}),[]),Ea((function(e){return(e=ls(e,(function(e){return Sn(o,e.ip)}))).length-1>=t.ipIterator?e.slice(-t.ipIterator++-1)[0]:(t.ipIterator=0,e.slice(-1)[0])})),$d(),Cb((function(n){if(void 0===n)return ra(Error("Invalid edge info"));var o=new Vl(n.ip,e,n.ticket,t.context,t.logger,r);return o.on("connectionFailure",(function(){return t.onSocketConnectionFailure(o)})),r=!o.useNewDomain,o.open$.pipe(Uf(o))})),sa((function(n){t.log("The websocket of ENV_%d re-opened to %s:%d using ap",n.env,n.ip,Df[n.env]),t.curOpenSockets[e]=n,t.lastOpenSockets[e].next(n)})),Cb((function(n){return n.open$.pipe(sa((function(){t.log("The websocket of ENV_%d re-opened to %s:%d",n.env,n.ip,Df[n.env]),t.curOpenSockets[e]=n,t.lastOpenSockets[e].next(n)})))})),Se()),e===this.firstEnv?this.firstOpenKeeperSubject.next(n):this.secondOpenKeeperSubject.next(n)}}}]),t}(sc()),xE=function(e){function t(e,r,o){return va(this,t),x(z(o=n.call(this,o,"Context")),"_token",void 0),x(z(o),"config",void 0),x(z(o),"_uid",void 0),x(z(o),"_sid",void 0),x(z(o),"_vid",void 0),x(z(o),"_startTime",void 0),x(z(o),"_area","CN"),x(z(o),"_socketUseProxy",!1),x(z(o),"appId",void 0),x(z(o),"enableCloudProxy",!1),x(z(o),"cloudProxyServers",[]),o.appId=e,o.config=r,o}Ga(t,e);var n=Ha(t);return eb(t,[{key:"socketUseProxy",get:function(){return this._socketUseProxy&&Ec.ENABLE_EDGE_AUTO_FALLBACK},set:function(e){this.log("socketUseProxy is set to %s",e),this._socketUseProxy=e}},{key:"token",set:function(e){this._token="string"==typeof e&&e?e:void 0}},{key:"uid",get:function(){if("string"==typeof this._uid&&this._uid)return this._uid;throw new rc("Cannot get illegal uid")},set:function(e){if(this.log("The user ID is set to %s",La(e)),!Ta(e))throw new rc;this._uid=e}},{key:"vid",get:function(){if("string"==typeof this._vid&&this._vid)return this._vid;throw new rc("Cannot get illegal vid")},set:function(e){this._vid=e}},{key:"key",get:function(){if("string"==typeof this._token&&this._token)return this._token;if("string"==typeof this.appId&&this.appId)return this.appId;throw new rc("Cannot get illegal key")}},{key:"sid",get:function(){if("string"==typeof this._sid&&this._sid)return this._sid;throw new rc("Cannot get illegal sid")},set:function(e){if(this.log("sid is set to %s",e),"string"!=typeof e||!e)throw new rc;this._sid=e}},{key:"startTime",get:function(){if("number"==typeof this._startTime&&this._startTime)return this._startTime;throw new rc("Cannot get illegal startTime")},set:function(e){if(this.log("startTime is set to %s",e),"number"!=typeof e||!e)throw new rc;this._startTime=e}},{key:"rtmArea",get:function(){if("string"==typeof this._area&&this._area)return this._area;throw new rc("Cannot get illegal area")},set:function(e){this.log("area is set to %s",e),"string"==typeof e&&e?this._area=e:this.warn("set area failed")}}]),t}(sc());Sp("of",(function(){for(var e=0,t=arguments.length,n=new(qf(this))(t);t>e;)n[e]=arguments[e++];return n}),rk);var yE=Math.max,Pv=function(e,t,n){var r=Object(e);if(!ae(e)){var o=wf(t);e=Wd(e),t=function(e){return o(r[e],e,r)}}return-1<(t=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;if(null==n)n=0;else{var o=(n=Rl(n))%1;n=n==n?o?n-o:n:0}return 0>n&&(n=yE(r+n,0)),Yq(e,wf(t),n)}(e,t,n))?r[o?e[t]:t]:void 0},Ov=function(e,t){return e&&e.length?fl(e,void 0,"function"==typeof t?t:void 0):[]},dt=function(){function e(){va(this,e),x(this,"size",0),x(this,"fields",new Map)}return eb(e,[{key:"define",value:function(e,t,n){if(this.size+=n,64<this.size)throw new RangeError("the struct over 64 bits is not supported");th(t={val:0,isNumber:"number"===t,isBoolean:"boolean"===t,oneof:"number"===t||"boolean"===t?void 0:t,len:n}),this.fields.set(e,t)}},{key:"set",value:function(e,t){if(!(e=this.fields.get(e)))throw Error("field not found");var n=e.oneof;if(!P.isLong(t)&&"number"!=typeof t)if("boolean"==typeof t)t=t?1:0;else{if(void 0===n)throw Error("invalid field type");if(void 0===(t=n[t]))throw Error("field type not found")}th(e,t),e.val=t}},{key:"toNumber",value:function(){for(var e=0,t=0,n=0,r=Array.from(this.fields);n<r.length;n++){var o=$a(r[n],2)[1],i=o.len;void 0!==(o=o.val)&&(e+=P.fromValue(o).shiftLeft(t).toNumber(),t+=i)}return e}},{key:"toLong",value:function(){for(var e=P.fromNumber(0,!0),t=0,n=0,r=Array.from(this.fields);n<r.length;n++){var o=$a(r[n],2)[1],i=o.len;void 0!==(o=o.val)&&(e=P.fromValue(o).shiftLeft(t).add(e),t+=i)}return e}},{key:"assert",value:function(e,t){function n(e){if(!P.isLong(e)&&"number"!=typeof e)if("boolean"==typeof e)e=e?1:0;else{if(void 0===o)throw Error("invalid field type");if(void 0===(e=o[e]))throw Error("field type not found")}return th(r,e),sh(e,r.val)}var r=this.fields.get(e);if(!r)throw Error("field not found");var o=r.oneof;if(!Array.isArray(t))return n(t);if(1===t.length)return n(t[0]);if(t.every((function(e){return"string"==typeof e}))&&void 0!==o)return t.some((function(e){return n(e)}));throw Error("invalid valueTypes")}},{key:"from",value:function(e){e=P.fromValue(e);for(var t=0,n=0,r=Array.from(this.fields);n<r.length;n++){var o=$a(r[n],2)[1],i=o.len,a=P.fromNumber(Math.pow(2,i)-1,!0).shiftLeft(t);th(o,a=e.and(a).shiftRightUnsigned(t)),o.val=a,t+=i}}},{key:"typeOf",value:function(e){if(void 0!==(e=this.fields.get(e))){var t=e.oneof;if(e=e.val,void 0!==t){var n=0;for(t=Object.entries(t);n<t.length;n++){var r=$a(t[n],2),o=r[0];if(sh(e,r[1]))return o}}}throw new TypeError("can only get type of oneof type")}}]),e}(),et=function(e){function t(e){va(this,t);var r=n.call(this);return r.define("Rejoin","boolean",1),r.define("Unused","number",31),r.define("Platform","number",8),r.define("Version","number",12),r.define("Subversion","number",12),r.set("Platform",7),r.set("Version",4),r.set("Subversion",18),r.set("Rejoin",e),r}Ga(t,e);var n=Ha(t);return t}(dt),zE=Wa(Wa({},{PeerTextMessage:0,ChannelTextMessage:1,VendorTextMessage:2}),{PeerRawMessage:3,ChannelRawMessage:4,VendorRawMessage:5}),ft={CallInvite:101,CallAccept:102,CallReject:103,CallCancel:104},AE=Wa(Wa({},zE),ft),BE={Uncompressed:0,Zlib:1},Ef=function(e){function t(e){va(this,t);var r=n.call(this);if(r.define("MessageType",AE,8),r.define("BroadcastJumps","number",2),r.define("ToCache","boolean",1),r.define("FromCache","boolean",1),r.define("CompressionMethod",BE,2),r.define("IterationNumber","number",4),r.define("BufferedMessage","boolean",1),r.define("ToArchive","boolean",1),r.define("FromArchive","boolean",1),"number"==typeof e||P.isLong(e))r.from(e);else if(void 0!==e){var o=0;for(e=qh(e);o<e.length;o++){var i=$a(e[o],2);r.set(i[0],i[1])}}return r}Ga(t,e);var n=Ha(t);return eb(t,[{key:"isTextMessage",value:function(){return this.assert("MessageType",["PeerTextMessage","ChannelTextMessage","VendorTextMessage"])}},{key:"isRawMessage",value:function(){return this.assert("MessageType",["ChannelRawMessage","PeerRawMessage","VendorRawMessage"])}},{key:"isRawPeerMessage",value:function(){return this.assert("MessageType","PeerRawMessage")}},{key:"isRawChannelMessage",value:function(){return this.assert("MessageType","ChannelRawMessage")}},{key:"isPeerTextMessage",value:function(){return this.assert("MessageType","PeerTextMessage")}},{key:"isChannelTextMessage",value:function(){return this.assert("MessageType","ChannelTextMessage")}},{key:"isInvitation",value:function(e){var t=this;return void 0!==e?this.assert("MessageType",e):Yf(ft).some((function(e){return t.assert("MessageType",e)}))}},{key:"isPeerMessage",value:function(){return this.assert("MessageType",["PeerTextMessage","PeerRawMessage"])}},{key:"isZlibCompressed",value:function(){return this.assert("CompressionMethod","Zlib")}},{key:"isFromCache",value:function(){return this.assert("FromCache",!0)}},{key:"isBufferedMessage",value:function(){return this.assert("BufferedMessage",!0)}},{key:"getInvitationType",value:function(){if(!this.isInvitation())throw new TypeError("cannot get InvitationType of a normal message type");return this.typeOf("MessageType")}}]),t}(dt),CE=function(e){function t(e){return va(this,t),x(z(e=n.call(this,e,"ChatManager")),"dialogueLru",new xz(void 0,{maxlen:1e4,ttl:1e4})),e}Ga(t,e);var n=Ha(t);return eb(t,[{key:"getChatInfo",value:function(e){var t=this.dialogueLru.get(e);if(this.dialogueLru.prune(),t){var n=t.dialogue,r={dialogue:n,sequence:t=t.sequence.add(1)};return this.dialogueLru.set(e,{dialogue:n,sequence:t}),r}return n={dialogue:nh(),sequence:P.fromNumber(1,!0)},this.dialogueLru.set(e,n),n}}]),t}(sc()),G={};"object"==qa(module)&&(module.exports=G),G.parse=function(e,t){var n,r=G.bin.readUshort,o=G.bin.readUint,i={};for(n=(e=new Uint8Array(e)).length-4;101010256!=o(e,n);)n--;var a=r(e,n=n+4+4);r(e,n+=2),o(e,n+=2),n=o(e,n+=4);for(var s=0;s<a;s++){o(e,n),n+=4,n+=4,n+=4,o(e,n+=4);var c=o(e,n+=4),l=o(e,n+=4),u=r(e,n+=4),d=r(e,n+2),A=r(e,n+4);n+=6;var p=o(e,n+=8);n+=4,n+=u+d+A,G._readLocal(e,p,i,c,l,t)}return i},G._readLocal=function(e,t,n,r,o,i){var a=G.bin.readUshort,s=G.bin.readUint;s(e,t),a(e,t+=4),a(e,t+=2);var c=a(e,t+=2);s(e,t+=2),s(e,t+=4),s=a(e,t=t+4+8);var l=a(e,t+=2);if(t+=2,a=G.bin.readUTF8(e,t,s),t=t+s+l,i)n[a]={size:o,csize:r};else if(e=new Uint8Array(e.buffer,t),0==c)n[a]=new Uint8Array(e.buffer.slice(t,t+r));else{if(8!=c)throw"unknown compression method: "+c;t=new Uint8Array(o),G.inflateRaw(e,t),n[a]=t}},G.inflateRaw=function(e,t){return G.F.inflate(e,t)},G.inflate=function(e,t){return e[0],e[1],G.inflateRaw(new Uint8Array(e.buffer,e.byteOffset+2,e.length-2),t)},G.deflate=function(e,t){null==t&&(t={level:6});var n=0,r=new Uint8Array(50+Math.floor(1.1*e.length));return r[n]=120,r[n+1]=156,n=G.F.deflateRaw(e,r,n+2,t.level),e=G.adler(e,0,e.length),r[n+0]=e>>>24&255,r[n+1]=e>>>16&255,r[n+2]=e>>>8&255,r[n+3]=e>>>0&255,new Uint8Array(r.buffer,0,n+4)},G.deflateRaw=function(e,t){null==t&&(t={level:6});var n=new Uint8Array(50+Math.floor(1.1*e.length)),r=G.F.deflateRaw(e,n,r,t.level);return new Uint8Array(n.buffer,0,r)},G.encode=function(e,t){null==t&&(t=!1);var n,r=0,o=G.bin.writeUint,i=G.bin.writeUshort,a={};for(n in e){var s=!G._noNeed(n)&&!t,c=e[n],l=G.crc.crc(c,0,c.length);a[n]={cpr:s,usize:c.length,crc:l,file:s?G.deflateRaw(c):c}}for(n in a)r+=a[n].file.length+30+46+2*G.bin.sizeUTF8(n);for(n in e=new Uint8Array(r+22),t=0,c=[],a)l=a[n],c.push(t),t=G._writeHeader(e,t,n,l,0);for(n in r=0,s=t,a)l=a[n],c.push(t),t=G._writeHeader(e,t,n,l,1,c[r++]);return a=t-s,o(e,t,101010256),i(e,t=t+4+4,r),i(e,t+=2,r),o(e,t+=2,a),o(e,t+4,s),e.buffer},G._noNeed=function(e){return e=e.split(".").pop().toLowerCase(),-1!="png,jpg,jpeg,zip".indexOf(e)},G._writeHeader=function(e,t,n,r,o,i){var a=G.bin.writeUint,s=G.bin.writeUshort,c=r.file;return a(e,t,0==o?67324752:33639248),t+=4,1==o&&(t+=2),s(e,t,20),s(e,t+=2,0),s(e,t+=2,r.cpr?8:0),a(e,t+=2,0),a(e,t+=4,r.crc),a(e,t+=4,c.length),a(e,t+=4,r.usize),s(e,t+=4,G.bin.sizeUTF8(n)),s(e,t+=2,0),t+=2,1==o&&(a(e,t=t+2+2+6,i),t+=4),t+=n=G.bin.writeUTF8(e,t,n),0==o&&(e.set(c,t),t+=c.length),t},G.crc={table:function(){for(var e=new Uint32Array(256),t=0;256>t;t++){for(var n=t,r=0;8>r;r++)n=1&n?3988292384^n>>>1:n>>>1;e[t]=n}return e}(),update:function(e,t,n,r){for(var o=0;o<r;o++)e=G.crc.table[255&(e^t[n+o])]^e>>>8;return e},crc:function(e,t,n){return 4294967295^G.crc.update(4294967295,e,t,n)}},G.adler=function(e,t,n){var r=1,o=0,i=t;for(t+=n;i<t;){for(n=Math.min(i+5552,t);i<n;)o+=r+=e[i++];r%=65521,o%=65521}return o<<16|r},G.bin={readUshort:function(e,t){return e[t]|e[t+1]<<8},writeUshort:function(e,t,n){e[t]=255&n,e[t+1]=n>>8&255},readUint:function(e,t){return 16777216*e[t+3]+(e[t+2]<<16|e[t+1]<<8|e[t])},writeUint:function(e,t,n){e[t]=255&n,e[t+1]=n>>8&255,e[t+2]=n>>16&255,e[t+3]=n>>24&255},readASCII:function(e,t,n){for(var r="",o=0;o<n;o++)r+=String.fromCharCode(e[t+o]);return r},writeASCII:function(e,t,n){for(var r=0;r<n.length;r++)e[t+r]=n.charCodeAt(r)},pad:function(e){return 2>e.length?"0"+e:e},readUTF8:function(e,t,n){for(var r,o="",i=0;i<n;i++)o+="%"+G.bin.pad(e[t+i].toString(16));try{r=decodeURIComponent(o)}catch(a){return G.bin.readASCII(e,t,n)}return r},writeUTF8:function(e,t,n){for(var r=n.length,o=0,i=0;i<r;i++){var a=n.charCodeAt(i);if(4294967168&a)if(4294965248&a)if(4294901760&a){if(4292870144&a)throw"e";e[t+o]=240|a>>18,e[t+o+1]=128|a>>12&63,e[t+o+2]=128|a>>6&63,e[t+o+3]=128|63&a,o+=4}else e[t+o]=224|a>>12,e[t+o+1]=128|a>>6&63,e[t+o+2]=128|63&a,o+=3;else e[t+o]=192|a>>6,e[t+o+1]=128|63&a,o+=2;else e[t+o]=a,o++}return o},sizeUTF8:function(e){for(var t=e.length,n=0,r=0;r<t;r++){var o=e.charCodeAt(r);if(4294967168&o)if(4294965248&o)if(4294901760&o){if(4292870144&o)throw"e";n+=4}else n+=3;else n+=2;else n++}return n}},G.F={},G.F.deflateRaw=function(e,t,n,r){var o=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][r],i=G.F.U,a=G.F._goodIndex;G.F._hash;var s=G.F._putsE,c=0;n<<=3;var l=0,u=e.length;if(0==r){for(;c<u;){var d=Math.min(65535,u-c);s(t,n,c+d==u?1:0),n=G.F._copyExact(e,c,d,t,n+8),c+=d}return n>>>3}s=i.lits,r=i.strt;var A=i.prev,p=0,h=0,f=0,g=0,m=0;for(2<u&&(r[m=G.F._hash(e,0)]=0),c=0;c<u;c++){if(d=m,c+1<u-2){m=G.F._hash(e,c+1);var _=c+1&32767;A[_]=r[m],r[m]=_}if(l<=c){if((14e3<p||26697<h)&&100<u-c&&(l<c&&(s[p]=c-l,p+=2,l=c),n=G.F._writeBlock(c==u-1||l==u?1:0,s,p,g,e,f,c-f,t,n),p=h=g=0,f=c),_=0,c<u-2&&(_=G.F._bestMatch(e,c,A,d,Math.min(o[2],u-c),o[3])),0!=_){d=_>>>16,_&=65535;var E=a(d,i.of0);i.lhst[257+E]++;var v=a(_,i.df0);i.dhst[v]++,g+=i.exb[E]+i.dxb[v],s[p]=d<<23|c-l,s[p+1]=_<<16|E<<8|v,p+=2,l=c+d}else i.lhst[e[c]]++;h++}}for(f==c&&0!=e.length||(l<c&&(s[p]=c-l,p+=2),n=G.F._writeBlock(1,s,p,g,e,f,c-f,t,n));7&n;)n++;return n>>>3},G.F._bestMatch=function(e,t,n,r,o,i){var a=32767&t,s=n[a],c=a-s+32768&32767;if(s==a||r!=G.F._hash(e,t-c))return 0;for(var l=r=0,u=Math.min(32767,t);c<=u&&0!=--i&&s!=a;){if((0==r||e[t+r]==e[t+r-c])&&(a=G.F._howLong(e,t,c))>r){if(l=c,(r=a)>=o)break;c+2<a&&(a=c+2);for(var d=0,A=0;A<a-2;A++){var p=t-c+A+32768&32767,h=p-n[p]+32768&32767;h>d&&(d=h,s=p)}}c+=(a=s)-(s=n[a])+32768&32767}return r<<16|l},G.F._howLong=function(e,t,n){if(e[t]!=e[t-n]||e[t+1]!=e[t+1-n]||e[t+2]!=e[t+2-n])return 0;var r=t,o=Math.min(e.length,t+258);for(t+=3;t<o&&e[t]==e[t-n];)t++;return t-r},G.F._hash=function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<4)&65535},G.saved=0,G.F._writeBlock=function(e,t,n,r,o,i,a,s,c){var l=G.F.U,u=G.F._putsF,d=G.F._putsE;l.lhst[256]++;var A=G.F.getTrees(),p=A[0],h=A[1],f=A[2],g=A[3],m=A[4],_=A[5],E=A[6];A=A[7];var v=32+(c+3&7?8-(c+3&7):0)+(a<<3),y=r+G.F.contSize(l.fltree,l.lhst)+G.F.contSize(l.fdtree,l.dhst);r=r+G.F.contSize(l.ltree,l.lhst)+G.F.contSize(l.dtree,l.dhst),r+=14+3*_+G.F.contSize(l.itree,l.ihst)+(2*l.ihst[16]+3*l.ihst[17]+7*l.ihst[18]);for(var b=0;286>b;b++)l.lhst[b]=0;for(b=0;30>b;b++)l.dhst[b]=0;for(b=0;19>b;b++)l.ihst[b]=0;if(v=v<y&&v<r?0:y<r?1:2,u(s,c,e),u(s,c+1,v),c+=3,0==v){for(;7&c;)c++;c=G.F._copyExact(o,i,a,s,c)}else{if(1==v)var C=l.fltree,S=l.fdtree;if(2==v){for(G.F.makeCodes(l.ltree,p),G.F.revCodes(l.ltree,p),G.F.makeCodes(l.dtree,h),G.F.revCodes(l.dtree,h),G.F.makeCodes(l.itree,f),G.F.revCodes(l.itree,f),C=l.ltree,S=l.dtree,d(s,c,g-257),d(s,c+=5,m-1),d(s,c+=5,_-4),c+=4,e=0;e<_;e++)d(s,c+3*e,l.itree[1+(l.ordr[e]<<1)]);c=G.F._codeTiny(E,l.itree,s,c+3*_),c=G.F._codeTiny(A,l.itree,s,c)}for(_=0;_<n;_+=2){for(E=(e=t[_])>>>23,e=i+(8388607&e);i<e;)c=G.F._writeLit(o[i++],C,s,c);0!=E&&(e=(p=t[_+1])>>16,a=p>>8&255,p&=255,d(s,c=G.F._writeLit(257+a,C,s,c),E-l.of0[a]),c+=l.exb[a],u(s,c=G.F._writeLit(p,S,s,c),e-l.df0[p]),c+=l.dxb[p],i+=E)}c=G.F._writeLit(256,C,s,c)}return c},G.F._copyExact=function(e,t,n,r,o){var i=o>>>3;return r[i]=n,r[i+1]=n>>>8,r[i+2]=255-r[i],r[i+3]=255-r[i+1],i+=4,r.set(new Uint8Array(e.buffer,t,n),i),o+(n+4<<3)},G.F.getTrees=function(){for(var e=G.F.U,t=G.F._hufTree(e.lhst,e.ltree,15),n=G.F._hufTree(e.dhst,e.dtree,15),r=[],o=G.F._lenCodes(e.ltree,r),i=[],a=G.F._lenCodes(e.dtree,i),s=0;s<r.length;s+=2)e.ihst[r[s]]++;for(s=0;s<i.length;s+=2)e.ihst[i[s]]++;s=G.F._hufTree(e.ihst,e.itree,7);for(var c=19;4<c&&0==e.itree[1+(e.ordr[c-1]<<1)];)c--;return[t,n,s,o,a,c,r,i]},G.F.getSecond=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(e[n+1]);return t},G.F.nonZero=function(e){for(var t="",n=0;n<e.length;n+=2)0!=e[n+1]&&(t+=(n>>1)+",");return t},G.F.contSize=function(e,t){for(var n=0,r=0;r<t.length;r++)n+=t[r]*e[1+(r<<1)];return n},G.F._codeTiny=function(e,t,n,r){for(var o=0;o<e.length;o+=2){var i=e[o],a=e[o+1];r=G.F._writeLit(i,t,n,r);var s=16==i?2:17==i?3:7;15<i&&(G.F._putsE(n,r,a,s),r+=s)}return r},G.F._lenCodes=function(e,t){for(var n=e.length;2!=n&&0==e[n-1];)n-=2;for(var r=0;r<n;r+=2){var o=e[r+1],i=r+3<n?e[r+3]:-1,a=r+5<n?e[r+5]:-1,s=0==r?-1:e[r-1];if(0==o&&i==o&&a==o){for(i=r+5;i+2<n&&e[i+2]==o;)i+=2;11>(o=Math.min(i+1-r>>>1,138))?t.push(17,o-3):t.push(18,o-11),r+=2*o-2}else if(o==s&&i==o&&a==o){for(i=r+5;i+2<n&&e[i+2]==o;)i+=2;o=Math.min(i+1-r>>>1,6),t.push(16,o-3),r+=2*o-2}else t.push(o,0)}return n>>>1},G.F._hufTree=function(e,t,n){var r=[],o=e.length,i=t.length,a=0;for(a=0;a<i;a+=2)t[a]=0,t[a+1]=0;for(a=0;a<o;a++)0!=e[a]&&r.push({lit:a,f:e[a]});if(e=r.length,o=r.slice(0),0==e)return 0;if(1==e)return t[1+((n=r[0].lit)<<1)]=1,t[1+((0==n?1:0)<<1)]=1;r.sort((function(e,t){return e.f-t.f})),a=r[0],i=r[1];var s=0,c=1,l=2;for(r[0]={lit:-1,f:a.f+i.f,l:a,r:i,d:0};c!=e-1;)a=s!=c&&(l==e||r[s].f<r[l].f)?r[s++]:r[l++],i=s!=c&&(l==e||r[s].f<r[l].f)?r[s++]:r[l++],r[c++]={lit:-1,f:a.f+i.f,l:a,r:i};for((r=G.F.setDepth(r[c-1],0))>n&&(G.F.restrictDepth(o,n,r),r=n),a=0;a<e;a++)t[1+(o[a].lit<<1)]=o[a].d;return r},G.F.setDepth=function(e,t){return-1!=e.lit?e.d=t:Math.max(G.F.setDepth(e.l,t+1),G.F.setDepth(e.r,t+1))},G.F.restrictDepth=function(e,t,n){var r=0,o=1<<n-t,i=0;for(e.sort((function(e,t){return t.d==e.d?e.f-t.f:t.d-e.d})),r=0;r<e.length&&e[r].d>t;r++){var a=e[r].d;e[r].d=t,i+=o-(1<<n-a)}for(i>>>=n-t;0<i;)(a=e[r].d)<t?(e[r].d++,i-=1<<t-a-1):r++;for(;0<=r;r--)e[r].d==t&&0>i&&(e[r].d--,i++);0!=i&&console.log("debt left")},G.F._goodIndex=function(e,t){var n=0;return t[16|n]<=e&&(n|=16),t[8|n]<=e&&(n|=8),t[4|n]<=e&&(n|=4),t[2|n]<=e&&(n|=2),t[1|n]<=e&&(n|=1),n},G.F._writeLit=function(e,t,n,r){return G.F._putsF(n,r,t[e<<1]),r+t[1+(e<<1)]},G.F.inflate=function(e,t){var n=Uint8Array;if(3==e[0]&&0==e[1])return t||new n(0);var r=G.F,o=r._bitsF,i=r._bitsE,a=r._decodeTiny,s=r.makeCodes,c=r.codes2map,l=r._get17,u=r.U,d=null==t;d&&(t=new n(e.length>>>2<<3));for(var A,p,h,f,g=0,m=0,_=p=0,E=0;0==g;)if(g=o(e,E,1),A=o(e,E+1,2),E+=3,0==A)!!(7&E)&&(E+=8-(7&E)),A=e[(E=4+(E>>>3))-4]|e[E-3]<<8,d&&(t=G.F._check(t,_+A)),t.set(new n(e.buffer,e.byteOffset+E,A),_),E=E+A<<3,_+=A;else{if(d&&(t=G.F._check(t,_+131072)),1==A&&(h=u.flmap,f=u.fdmap,m=511,p=31),2==A){for(p=i(e,E,5)+257,A=i(e,E+5,5)+1,h=i(e,E+10,4)+4,E+=14,f=0;38>f;f+=2)u.itree[f]=0,u.itree[f+1]=0;for(m=1,f=0;f<h;f++){var v=i(e,E+3*f,3);u.itree[1+(u.ordr[f]<<1)]=v,v>m&&(m=v)}E+=3*h,s(u.itree,m),c(u.itree,m,u.imap),h=u.lmap,f=u.dmap,E=a(u.imap,(1<<m)-1,p+A,e,E,u.ttree),m=(1<<(v=r._copyOut(u.ttree,0,p,u.ltree)))-1,p=(1<<(A=r._copyOut(u.ttree,p,A,u.dtree)))-1,s(u.ltree,v),c(u.ltree,v,h),s(u.dtree,A),c(u.dtree,A,f)}for(;;)if(E+=15&(A=h[l(e,E)&m]),0==(v=A>>>4)>>>8)t[_++]=v;else{if(256==v)break;A=_+v-254,264<v&&(A=_+((v=u.ldef[v-257])>>>3)+i(e,E,7&v),E+=7&v),E+=15&(v=f[l(e,E)&p]);var y=((v=u.ddef[v>>>4])>>>4)+o(e,E,15&v);for(E+=15&v,d&&(t=G.F._check(t,_+131072));_<A;)t[_]=t[_++-y],t[_]=t[_++-y],t[_]=t[_++-y],t[_]=t[_++-y];_=A}}return t.length==_?t:t.slice(0,_)},G.F._check=function(e,t){var n=e.length;return t<=n?e:((t=new Uint8Array(Math.max(n<<1,t))).set(e,0),t)},G.F._decodeTiny=function(e,t,n,r,o,i){for(var a=G.F._bitsE,s=G.F._get17,c=0;c<n;){var l=e[s(r,o)&t];o+=15&l;var u=l>>>4;if(15>=u)i[c]=u,c++;else{var d=l=0;for(16==u?(d=3+a(r,o,2),o+=2,l=i[c-1]):17==u?(d=3+a(r,o,3),o+=3):18==u&&(d=11+a(r,o,7),o+=7),u=c+d;c<u;)i[c]=l,c++}}return o},G.F._copyOut=function(e,t,n,r){for(var o=0,i=0,a=r.length>>>1;i<n;){var s=e[i+t];r[i<<1]=0,r[1+(i<<1)]=s,s>o&&(o=s),i++}for(;i<a;)r[i<<1]=0,r[1+(i<<1)]=0,i++;return o},G.F.makeCodes=function(e,t){var n,r,o=G.F.U,i=e.length,a=o.bl_count;for(n=0;n<=t;n++)a[n]=0;for(n=1;n<i;n+=2)a[e[n]]++;for(o=o.next_code,n=0,a[0]=0,r=1;r<=t;r++)n=n+a[r-1]<<1,o[r]=n;for(t=0;t<i;t+=2)0!=(a=e[t+1])&&(e[t]=o[a],o[a]++)},G.F.codes2map=function(e,t,n){for(var r=e.length,o=G.F.U.rev15,i=0;i<r;i+=2)if(0!=e[i+1]){var a=e[i+1],s=i>>1<<4|a,c=t-a;for(c=(a=e[i]<<c)+(1<<c);a!=c;)n[o[a]>>>15-t]=s,a++}},G.F.revCodes=function(e,t){for(var n=G.F.U.rev15,r=15-t,o=0;o<e.length;o+=2)e[o]=n[e[o]<<t-e[o+1]]>>>r},G.F._putsE=function(e,t,n){n<<=7&t,e[t>>>=3]|=n,e[t+1]|=n>>>8},G.F._putsF=function(e,t,n){n<<=7&t,e[t>>>=3]|=n,e[t+1]|=n>>>8,e[t+2]|=n>>>16},G.F._bitsE=function(e,t,n){return(e[t>>>3]|e[1+(t>>>3)]<<8)>>>(7&t)&(1<<n)-1},G.F._bitsF=function(e,t,n){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)&(1<<n)-1},G.F._get17=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)},G.F._get25=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16|e[3+(t>>>3)]<<24)>>>(7&t)},G.F.U=function(){var e=Uint16Array,t=Uint32Array;return{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new t(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new t(286),dhst:new t(30),ihst:new t(19),lits:new t(15e3),strt:new e(65536),prev:new e(32768)}}(),function(){function e(e,t,n){for(;0!=t--;)e.push(0,n)}for(var t=G.F.U,n=0;32768>n;n++){var r=n;r=(4278255360&(r=(4042322160&(r=(3435973836&(r=(2863311530&r)>>>1|(1431655765&r)<<1))>>>2|(858993459&r)<<2))>>>4|(252645135&r)<<4))>>>8|(16711935&r)<<8,t.rev15[n]=(r>>>16|r<<16)>>>17}for(n=0;32>n;n++)t.ldef[n]=t.of0[n]<<3|t.exb[n],t.ddef[n]=t.df0[n]<<4|t.dxb[n];e(t.fltree,144,8),e(t.fltree,112,9),e(t.fltree,24,7),e(t.fltree,8,8),G.F.makeCodes(t.fltree,9),G.F.codes2map(t.fltree,9,t.flmap),G.F.revCodes(t.fltree,9),e(t.fdtree,32,5),G.F.makeCodes(t.fdtree,5),G.F.codes2map(t.fdtree,5,t.fdmap),G.F.revCodes(t.fdtree,5),e(t.itree,19,0),e(t.ltree,286,0),e(t.dtree,30,0),e(t.ttree,320,0)}();var DE=Array.isArray||function(e){return e&&"number"==typeof e.length},EE=Object.defineProperty({isArray:DE},"__esModule",{value:!0}),FE=Object.defineProperty({isObject:function(e){return null!==e&&"object"===qa(e)}},"__esModule",{value:!0}),GE=Object.defineProperty({isFunction:function(e){return"function"==typeof e}},"__esModule",{value:!0}),HE=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),uh=Object.defineProperty({UnsubscriptionError:HE},"__esModule",{value:!0}),IE=function(){function e(e){this.closed=!1,this._subscriptions=this._parentOrParents=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}var t;return e.prototype.unsubscribe=function(){if(!this.closed){var t=this._parentOrParents,n=this._ctorUnsubscribe,r=this._unsubscribe,o=this._subscriptions;if(this.closed=!0,this._subscriptions=this._parentOrParents=null,t instanceof e)t.remove(this);else if(null!==t)for(var i=0;i<t.length;++i)t[i].remove(this);if(GE.isFunction(r)){n&&(this._unsubscribe=void 0);try{r.call(this)}catch(e22){var a=e22 instanceof uh.UnsubscriptionError?eo(e22.errors):[e22]}}if(EE.isArray(o))for(i=-1,t=o.length;++i<t;)if(n=o[i],FE.isObject(n))try{n.unsubscribe()}catch(e22){a=a||[],e22 instanceof uh.UnsubscriptionError?a=a.concat(eo(e22.errors)):a.push(e22)}if(a)throw new uh.UnsubscriptionError(a)}},e.prototype.add=function(t){var n=t;if(!t)return e.EMPTY;switch(qa(t)){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;n instanceof e||(t=n,(n=new e)._subscriptions=[t]);break;default:throw Error("unrecognized teardown "+t+" added to Subscription.")}if(null===(t=n._parentOrParents))n._parentOrParents=this;else if(t instanceof e){if(t===this)return n;n._parentOrParents=[t,this]}else{if(-1!==t.indexOf(this))return n;t.push(this)}return null===(t=this._subscriptions)?this._subscriptions=[n]:t.push(n),n},e.prototype.remove=function(e){var t=this._subscriptions;t&&-1!==(e=t.indexOf(e))&&t.splice(e,1)},e.EMPTY=((t=new e).closed=!0,t),e}(),JE=Object.defineProperty({Subscription:IE},"__esModule",{value:!0}),KE=Ya&&Ya.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),LE=function(e){function t(t,n){return e.call(this)||this}return KE(t,e),t.prototype.schedule=function(e,t){return this},t}(JE.Subscription),ME=Object.defineProperty({Action:LE},"__esModule",{value:!0}),NE=Ya&&Ya.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),gt=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return NE(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e,e=this.id;var n=this.scheduler;return null!=e&&(this.id=this.recycleAsyncId(n,e,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(n,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)},t.prototype.execute=function(e,t){return this.closed?Error("executing a cancelled action"):(this.pending=!1,(e=this._execute(e,t))?e:void(!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))))},t.prototype._execute=function(e,t){t=!1;var n=void 0;try{this.work(e)}catch(r){t=!0,n=!!r&&r||Error(r)}if(t)return this.unsubscribe(),n},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.state=this.work=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(ME.Action),OE=function(){function e(t,n){void 0===n&&(n=e.now),this.SchedulerAction=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},e.now=function(){return Date.now()},e}(),ht=Object.defineProperty({Scheduler:OE},"__esModule",{value:!0}),PE=Ya&&Ya.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),it=function(e){function t(n,r){void 0===r&&(r=ht.Scheduler.now);var o=e.call(this,n,(function(){return t.delegate&&t.delegate!==o?t.delegate.now():r()}))||this;return o.actions=[],o.active=!1,o.scheduled=void 0,o}return PE(t,e),t.prototype.schedule=function(n,r,o){return void 0===r&&(r=0),t.delegate&&t.delegate!==this?t.delegate.schedule(n,r,o):e.prototype.schedule.call(this,n,r,o)},t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(ht.Scheduler),QE=Fa("iterator"),Wl=!la((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,r){t.delete("b"),n+=r+e})),!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[QE]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://").host||"#%D0%B1"!==new URL("http://a#").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host})),RE=/[^\0-\u007E]/,SE=/[.\u3002\uFF0E\uFF61]/g,Ff=Math.floor,Xl=String.fromCharCode,jt=function(e){var t=lg(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return Ia(t.call(e))},kt=Pc("fetch"),Yl=Pc("Headers"),TE=Fa("iterator"),lt=cb.set,cc=cb.getterFor("URLSearchParams"),UE=cb.getterFor("URLSearchParamsIterator"),VE=/\+/g,mt=Array(4),WE=function(e){try{return decodeURIComponent(e)}catch(t2){return e}},nt=function(e){var t=e.replace(VE," ");e=4;try{return decodeURIComponent(t)}catch(o2){for(;e;){var n=t.replace,r=e--;r=mt[r-1]||(mt[r-1]=RegExp("((?:%[\\da-f]{2}){"+r+"})","gi")),t=n.call(t,r,WE)}return t}},ot=/[!'()~]|%20/g,XE={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},pt=function(e){return XE[e]},qt=function(e,t){if(t){t=t.split("&");for(var n,r=0;r<t.length;)(n=t[r++]).length&&(n=n.split("="),e.push({key:nt(n.shift()),value:nt(n.join("="))}))}},YE=function(e){this.entries.length=0,qt(this.entries,e)},Gf=function(e,t){if(e<t)throw TypeError("Not enough arguments")},Zl=Wo((function(e,t){lt(this,{type:"URLSearchParamsIterator",iterator:jt(cc(e).entries),kind:t})}),"Iterator",(function(){var e=UE(this),t=e.kind,n=(e=e.iterator.next()).value;return e.done||(e.value="keys"===t?n.key:"values"===t?n.value:[n.key,n.value]),e})),Rg=function(){Ac(this,Rg,"URLSearchParams");var e,t,n,r=0<arguments.length?arguments[0]:void 0,o=[];if(lt(this,{type:"URLSearchParams",entries:o,updateURL:function(){},updateSearchParams:YE}),void 0!==r)if(xa(r)){var i=lg(r);if("function"==typeof i)for(r=i.call(r),i=r.next;!(e=i.call(r)).done;){var a=(e=jt(Ia(e.value))).next;if((t=a.call(e)).done||(n=a.call(e)).done||!a.call(e).done)throw TypeError("Expected sequence with length 2");o.push({key:t.value+"",value:n.value+""})}else for(e in r)ka(r,e)&&o.push({key:e,value:r[e]+""})}else qt(o,"string"==typeof r?"?"===r.charAt(0)?r.slice(1):r:r+"")},Bi=Rg.prototype;kf(Bi,{append:function(e,t){Gf(arguments.length,2);var n=cc(this);n.entries.push({key:e+"",value:t+""}),n.updateURL()},delete:function(e){Gf(arguments.length,1);for(var t=cc(this),n=t.entries,r=e+"",o=0;o<n.length;)n[o].key===r?n.splice(o,1):o++;t.updateURL()},get:function(e){Gf(arguments.length,1);for(var t=cc(this).entries,n=e+"",r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){Gf(arguments.length,1);for(var t=cc(this).entries,n=e+"",r=[],o=0;o<t.length;o++)t[o].key===n&&r.push(t[o].value);return r},has:function(e){Gf(arguments.length,1);for(var t=cc(this).entries,n=e+"",r=0;r<t.length;)if(t[r++].key===n)return!0;return!1},set:function(e,t){Gf(arguments.length,1);for(var n,r=cc(this),o=r.entries,i=!1,a=e+"",s=t+"",c=0;c<o.length;c++)(n=o[c]).key===a&&(i?o.splice(c--,1):(i=!0,n.value=s));i||o.push({key:a,value:s}),r.updateURL()},sort:function(){var e,t,n=cc(this),r=n.entries,o=r.slice();for(t=r.length=0;t<o.length;t++){var i=o[t];for(e=0;e<t;e++)if(r[e].key>i.key){r.splice(e,0,i);break}e===t&&r.push(i)}n.updateURL()},forEach:function(e){for(var t,n=cc(this).entries,r=Dd(e,1<arguments.length?arguments[1]:void 0,3),o=0;o<n.length;)r((t=n[o++]).value,t.key,this)},keys:function(){return new Zl(this,"keys")},values:function(){return new Zl(this,"values")},entries:function(){return new Zl(this,"entries")}},{enumerable:!0}),Za(Bi,TE,Bi.entries),Za(Bi,"toString",(function(){for(var e,t=cc(this).entries,n=[],r=0;r<t.length;)e=t[r++],n.push(encodeURIComponent(e.key).replace(ot,pt)+"="+encodeURIComponent(e.value).replace(ot,pt));return n.join("&")}),{enumerable:!0}),zc(Rg,"URLSearchParams"),ea({global:!0,forced:!Wl},{URLSearchParams:Rg}),Wl||"function"!=typeof kt||"function"!=typeof Yl||ea({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var t=[e];if(1<arguments.length){var n=arguments[1];if(xa(n)){var r=n.body;if("URLSearchParams"===jf(r)){var o=n.headers?new Yl(n.headers):new Yl;o.has("content-type")||o.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),n=jc(n,{body:Nc(0,String(r)),headers:Nc(0,o)})}}t.push(n)}return kt.apply(this,t)}});var Sg=R.URL,ZE=Rg,$E=cb.set,db=cb.getterFor("URL"),aF=Math.floor,rt=Math.pow,st=/[A-Za-z]/,bF=/[\d+-.A-Za-z]/,$l=/\d/,cF=/^(0x|0X)/,dF=/^[0-7]+$/,eF=/^\d+$/,tt=/^[\dA-Fa-f]+$/,fF=/[\0\t\n\r #%/:?@[\\]]/,gF=/[\0\t\n\r #/:?@[\\]]/,hF=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,iF=/[\t\n\r]/g,am=function(e,t){var n;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return"Invalid host";var r=jF(t.slice(1,-1));if(!r)return"Invalid host"}else if(wb(e)){for(r=[],t=t.toLowerCase().replace(SE,".").split("."),n=0;n<t.length;n++){var o=t[n],i=r,a=i.push;if(RE.test(o)){var s=o;o=[];var c=s;s=[];for(var l=0,u=c.length;l<u;){var d=c.charCodeAt(l++);if(55296<=d&&56319>=d&&l<u){var A=c.charCodeAt(l++);56320==(64512&A)?s.push(((1023&d)<<10)+(1023&A)+65536):(s.push(d),l--)}else s.push(d)}l=s.length,u=128;var p=0,h=72;for(c=0;c<s.length;c++){var f=s[c];128>f&&o.push(Xl(f))}for((A=d=o.length)&&o.push("-");A<l;){var g=2147483647;for(c=0;c<s.length;c++)(f=s[c])>=u&&f<g&&(g=f);var m=A+1;if(g-u>Ff((2147483647-p)/m))throw RangeError("Overflow: input needs wider integers to process");for(p+=(g-u)*m,u=g,c=0;c<s.length;c++){if((f=s[c])<u&&2147483647<++p)throw RangeError("Overflow: input needs wider integers to process");if(f==u){var _=p;for(f=36;!(_<(g=f<=h?1:f>=h+26?26:f-h));f+=36){var E=36-g,v=o;g+=(_-=g)%E,v.push.call(v,Xl(g+22+75*(26>g))),_=Ff(_/E)}for(o.push(Xl(_+22+75*(26>_))),h=m,f=0,p=A==d?Ff(p/700):p>>1,p+=Ff(p/h);455<p;f+=36)p=Ff(p/35);h=Ff(f+36*p/(p+38)),p=0,++A}}++p,++u}o="xn--"+o.join("")}a.call(i,o)}if(t=r.join("."),fF.test(t))return"Invalid host";if(null===(r=kF(t)))return"Invalid host"}else{if(gF.test(t))return"Invalid host";for(r="",t=ge(t),n=0;n<t.length;n++)r+=Qd(t[n],Ci)}e.host=r},kF=function(e){var t,n=e.split(".");n.length&&""==n[n.length-1]&&n.pop();var r=n.length;if(4<r)return e;var o=[];for(t=0;t<r;t++){var i=n[t];if(""==i)return e;var a=10;if(1<i.length&&"0"==i.charAt(0)&&(a=cF.test(i)?16:8,i=i.slice(8==a?1:2)),""===i)i=0;else{if(!(10==a?eF:8==a?dF:tt).test(i))return e;i=parseInt(i,a)}o.push(i)}for(t=0;t<r;t++)if(i=o[t],t==r-1){if(i>=rt(256,5-r))return null}else if(255<i)return null;for(e=o.pop(),t=0;t<o.length;t++)e+=o[t]*rt(256,3-t);return e},jF=function(e){var t,n,r=[0,0,0,0,0,0,0,0],o=0,i=null,a=0,s=function(){return e.charAt(a)};if(":"==s()){if(":"!=e.charAt(1))return;a+=2,i=++o}for(;s();){if(8==o)return;if(":"==s()){if(null!==i)return;a++,i=++o}else{for(t=n=0;4>n&&tt.test(s());)t=16*t+parseInt(s(),16),a++,n++;if("."==s()){if(0==n)return;if(a-=n,6<o)return;for(t=0;s();){if(n=null,0<t){if(!("."==s()&&4>t))return;a++}if(!$l.test(s()))return;for(;$l.test(s());){var c=parseInt(s(),10);if(null===n)n=c;else{if(0==n)return;n=10*n+c}if(255<n)return;a++}r[o]=256*r[o]+n,2!=++t&&4!=t||o++}if(4!=t)return;break}if(":"==s()){if(a++,!s())return}else if(s())return;r[o++]=t}}if(null!==i)for(s=o-i,o=7;0!=o&&0<s;)t=r[o],r[o--]=r[i+s-1],r[i+--s]=t;else if(8!=o)return;return r},Tg=function(e){var t,n;if("number"==typeof e){var r=[];for(t=0;4>t;t++)r.unshift(e%256),e=aF(e/256);return r.join(".")}if("object"==typeof e){r="",t=null;for(var o=1,i=null,a=0,s=0;8>s;s++)0!==e[s]?(a>o&&(t=i,o=a),i=null,a=0):(null===i&&(i=s),++a);for(a>o&&(t=i),o=t,t=0;8>t;t++)n&&0===e[t]||(n&&(n=!1),o===t?(r+=t?":":"::",n=!0):(r+=e[t].toString(16),7>t&&(r+=":")));return"["+r+"]"}return e},Ci={},ut=Bg({},Ci,{" ":1,'"':1,"<":1,">":1,"`":1}),vt=Bg({},ut,{"#":1,"?":1,"{":1,"}":1}),bm=Bg({},vt,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Qd=function(e,t){var n=uw(e,0);return 32<n&&127>n&&!ka(t,e)?e:encodeURIComponent(e)},Di={ftp:21,file:null,http:80,https:443,ws:80,wss:443},wb=function(e){return ka(Di,e.scheme)},cm=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},Ug=function(e,t){var n;return 2==e.length&&st.test(e.charAt(0))&&(":"==(n=e.charAt(1))||!t&&"|"==n)},wt=function(e){var t;return 1<e.length&&Ug(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},xt=function(e){var t=e.path,n=t.length;!n||"file"==e.scheme&&1==n&&Ug(t[0],!0)||t.pop()},dm={},yt={},em={},zt={},At={},fm={},Bt={},Ct={},Ei={},Fi={},gm={},hm={},im={},jm={},Dt={},km={},Vg={},Yc={},Et={},ye={},vd={},Zc=function(e,t,n,r){var o=n||dm,i=0,a="",s=!1,c=!1,l=!1;for(n||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(hF,"")),t=t.replace(iF,""),t=ge(t);i<=t.length;){var u=t[i];switch(o){case dm:if(!u||!st.test(u)){if(n)return"Invalid scheme";o=em;continue}a+=u.toLowerCase(),o=yt;break;case yt:if(u&&(bF.test(u)||"+"==u||"-"==u||"."==u))a+=u.toLowerCase();else{if(":"!=u){if(n)return"Invalid scheme";a="",o=em,i=0;continue}if(n&&(wb(e)!=ka(Di,a)||"file"==a&&(""!=e.username||""!=e.password||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=a,n)return void(wb(e)&&Di[e.scheme]==e.port&&(e.port=null));a="","file"==e.scheme?o=jm:wb(e)&&r&&r.scheme==e.scheme?o=zt:wb(e)?o=Ct:"/"==t[i+1]?(o=At,i++):(e.cannotBeABaseURL=!0,e.path.push(""),o=Et)}break;case em:if(!r||r.cannotBeABaseURL&&"#"!=u)return"Invalid scheme";if(r.cannotBeABaseURL&&"#"==u){e.scheme=r.scheme,e.path=r.path.slice(),e.query=r.query,e.fragment="",e.cannotBeABaseURL=!0,o=vd;break}o="file"==r.scheme?jm:fm;continue;case zt:if("/"!=u||"/"!=t[i+1]){o=fm;continue}o=Ei,i++;break;case At:if("/"==u){o=Fi;break}o=Yc;continue;case fm:if(e.scheme=r.scheme,null==u)e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query=r.query;else if("/"==u||"\\"==u&&wb(e))o=Bt;else if("?"==u)e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query="",o=ye;else{if("#"!=u){e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.path.pop(),o=Yc;continue}e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query=r.query,e.fragment="",o=vd}break;case Bt:if(!wb(e)||"/"!=u&&"\\"!=u){if("/"!=u){e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,o=Yc;continue}o=Fi}else o=Ei;break;case Ct:if(o=Ei,"/"!=u||"/"!=a.charAt(i+1))continue;i++;break;case Ei:if("/"!=u&&"\\"!=u){o=Fi;continue}break;case Fi:if("@"==u){for(s&&(a="%40"+a),s=!0,a=ge(a),u=0;u<a.length;u++){var d=a[u];":"!=d||l?(d=Qd(d,bm),l?e.password+=d:e.username+=d):l=!0}a=""}else if(null==u||"/"==u||"?"==u||"#"==u||"\\"==u&&wb(e)){if(s&&""==a)return"Invalid authority";i-=ge(a).length+1,a="",o=gm}else a+=u;break;case gm:case hm:if(n&&"file"==e.scheme){o=km;continue}if(":"!=u||c){if(null==u||"/"==u||"?"==u||"#"==u||"\\"==u&&wb(e)){if(wb(e)&&""==a)return"Invalid host";if(n&&""==a&&(""!=e.username||""!=e.password||null!==e.port))return;if(o=am(e,a))return o;if(a="",o=Vg,n)return;continue}"["==u?c=!0:"]"==u&&(c=!1),a+=u}else{if(""==a)return"Invalid host";if(o=am(e,a))return o;if(a="",o=im,n==hm)return}break;case im:if(!$l.test(u)){if(null==u||"/"==u||"?"==u||"#"==u||"\\"==u&&wb(e)||n){if(""!=a){if(65535<(o=parseInt(a,10)))return"Invalid port";e.port=wb(e)&&o===Di[e.scheme]?null:o,a=""}if(n)return;o=Vg;continue}return"Invalid port"}a+=u;break;case jm:if(e.scheme="file","/"==u||"\\"==u)o=Dt;else{if(!r||"file"!=r.scheme){o=Yc;continue}if(null==u)e.host=r.host,e.path=r.path.slice(),e.query=r.query;else if("?"==u)e.host=r.host,e.path=r.path.slice(),e.query="",o=ye;else{if("#"!=u){wt(t.slice(i).join(""))||(e.host=r.host,e.path=r.path.slice(),xt(e)),o=Yc;continue}e.host=r.host,e.path=r.path.slice(),e.query=r.query,e.fragment="",o=vd}}break;case Dt:if("/"==u||"\\"==u){o=km;break}r&&"file"==r.scheme&&!wt(t.slice(i).join(""))&&(Ug(r.path[0],!0)?e.path.push(r.path[0]):e.host=r.host),o=Yc;continue;case km:if(null==u||"/"==u||"\\"==u||"?"==u||"#"==u){if(!n&&Ug(a))o=Yc;else{if(""==a){if(e.host="",n)return}else{if(o=am(e,a))return o;if("localhost"==e.host&&(e.host=""),n)return;a=""}o=Vg}continue}a+=u;break;case Vg:if(wb(e)){if(o=Yc,"/"!=u&&"\\"!=u)continue}else if(n||"?"!=u)if(n||"#"!=u){if(null!=u&&(o=Yc,"/"!=u))continue}else e.fragment="",o=vd;else e.query="",o=ye;break;case Yc:if(null==u||"/"==u||"\\"==u&&wb(e)||!n&&("?"==u||"#"==u)){if(".."===(d=(d=a).toLowerCase())||"%2e."===d||".%2e"===d||"%2e%2e"===d?(xt(e),"/"==u||"\\"==u&&wb(e)||e.path.push("")):"."===a||"%2e"===a.toLowerCase()?"/"==u||"\\"==u&&wb(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&Ug(a)&&(e.host&&(e.host=""),a=a.charAt(0)+":"),e.path.push(a)),a="","file"==e.scheme&&(null==u||"?"==u||"#"==u))for(;1<e.path.length&&""===e.path[0];)e.path.shift();"?"==u?(e.query="",o=ye):"#"==u&&(e.fragment="",o=vd)}else a+=Qd(u,vt);break;case Et:"?"==u?(e.query="",o=ye):"#"==u?(e.fragment="",o=vd):null!=u&&(e.path[0]+=Qd(u,Ci));break;case ye:n||"#"!=u?null!=u&&("'"==u&&wb(e)?e.query+="%27":e.query="#"==u?e.query+"%23":e.query+Qd(u,Ci)):(e.fragment="",o=vd);break;case vd:null!=u&&(e.fragment+=Qd(u,ut))}i++}},Rd=function(e){var t=Ac(this,Rd,"URL"),n=1<arguments.length?arguments[1]:void 0,r=String(e),o=$E(t,{type:"URL"});if(void 0!==n)if(n instanceof Rd)var i=db(n);else if(n=Zc(i={},String(n)))throw TypeError(n);if(n=Zc(o,r,null,i))throw TypeError(n);var a=o.searchParams=new ZE;(r=cc(a)).updateSearchParams(o.query),r.updateURL=function(){o.query=String(a)||null},wa||(t.href=Gi.call(t),t.origin=Ft.call(t),t.protocol=Gt.call(t),t.username=Ht.call(t),t.password=It.call(t),t.host=Jt.call(t),t.hostname=Kt.call(t),t.port=Lt.call(t),t.pathname=Mt.call(t),t.search=Nt.call(t),t.searchParams=Ot.call(t),t.hash=Pt.call(t))},lm=Rd.prototype,Gi=function(){var e=db(this),t=e.scheme,n=e.username,r=e.password,o=e.host,i=e.port,a=e.path,s=e.query,c=e.fragment,l=t+":";return null!==o?(l+="//",""==e.username&&""==e.password||(l+=n+(r?":"+r:"")+"@"),l+=Tg(o),null!==i&&(l+=":"+i)):"file"==t&&(l+="//"),l+=e.cannotBeABaseURL?a[0]:a.length?"/"+a.join("/"):"",null!==s&&(l+="?"+s),null!==c&&(l+="#"+c),l},Ft=function(){var e=db(this),t=e.scheme,n=e.port;if("blob"==t)try{return new Rd(t.path[0]).origin}catch(e22){return"null"}return"file"!=t&&wb(e)?t+"://"+Tg(e.host)+(null!==n?":"+n:""):"null"},Gt=function(){return db(this).scheme+":"},Ht=function(){return db(this).username},It=function(){return db(this).password},Jt=function(){var e=db(this),t=e.host;return e=e.port,null===t?"":null===e?Tg(t):Tg(t)+":"+e},Kt=function(){var e=db(this).host;return null===e?"":Tg(e)},Lt=function(){var e=db(this).port;return null===e?"":String(e)},Mt=function(){var e=db(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},Nt=function(){var e=db(this).query;return e?"?"+e:""},Ot=function(){return db(this).searchParams},Pt=function(){var e=db(this).fragment;return e?"#"+e:""},tc=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(wa&&To(lm,{href:tc(Gi,(function(e){var t=db(this);if(e=Zc(t,String(e)))throw TypeError(e);cc(t.searchParams).updateSearchParams(t.query)})),origin:tc(Ft),protocol:tc(Gt,(function(e){var t=db(this);Zc(t,String(e)+":",dm)})),username:tc(Ht,(function(e){var t=db(this);if(e=ge(String(e)),!cm(t)){t.username="";for(var n=0;n<e.length;n++)t.username+=Qd(e[n],bm)}})),password:tc(It,(function(e){var t=db(this);if(e=ge(String(e)),!cm(t)){t.password="";for(var n=0;n<e.length;n++)t.password+=Qd(e[n],bm)}})),host:tc(Jt,(function(e){var t=db(this);t.cannotBeABaseURL||Zc(t,String(e),gm)})),hostname:tc(Kt,(function(e){var t=db(this);t.cannotBeABaseURL||Zc(t,String(e),hm)})),port:tc(Lt,(function(e){var t=db(this);cm(t)||(""==(e=String(e))?t.port=null:Zc(t,e,im))})),pathname:tc(Mt,(function(e){var t=db(this);t.cannotBeABaseURL||(t.path=[],Zc(t,e+"",Vg))})),search:tc(Nt,(function(e){var t=db(this);""==(e=String(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",Zc(t,e,ye)),cc(t.searchParams).updateSearchParams(t.query)})),searchParams:tc(Ot),hash:tc(Pt,(function(e){var t=db(this);""==(e=String(e))?t.fragment=null:("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",Zc(t,e,vd))}))}),Za(lm,"toJSON",(function(){return Gi.call(this)}),{enumerable:!0}),Za(lm,"toString",(function(){return Gi.call(this)}),{enumerable:!0}),Sg){var Qt=Sg.createObjectURL,Rt=Sg.revokeObjectURL;Qt&&Za(Rd,"createObjectURL",(function(e){return Qt.apply(Sg,arguments)})),Rt&&Za(Rd,"revokeObjectURL",(function(e){return Rt.apply(Sg,arguments)}))}zc(Rd,"URL"),ea({global:!0,forced:!Wl,sham:!wa},{URL:Rd});var lF=new Blob(["var fakeIdToId = {};onmessage = function (event) {\tvar data = event.data,\t\tname = data.name,\t\tfakeId = data.fakeId,\t\ttime;\tif(data.hasOwnProperty('time')) {\t\ttime = data.time;\t}\tswitch (name) {\t\tcase 'setInterval':\t\t\tfakeIdToId[fakeId] = setInterval(function () {\t\t\t\tpostMessage({fakeId: fakeId});\t\t\t}, time);\t\t\tbreak;\t\tcase 'clearInterval':\t\t\tif (fakeIdToId.hasOwnProperty (fakeId)) {\t\t\t\tclearInterval(fakeIdToId[fakeId]);\t\t\t\tdelete fakeIdToId[fakeId];\t\t\t}\t\t\tbreak;\t}}"]),mF=window.URL.createObjectURL(lF),Ze={},dg=0,Aj=new Worker(mF);Aj.onmessage=function(e){if(e=e.data.fakeId,Ze.hasOwnProperty(e)){var t=Ze[e];e=t.callback,t=t.parameters,e.apply(window,t)}};var nF=function(e){function t(){return va(this,t),n.apply(this,arguments)}Ga(t,e);var n=Ha(t);return eb(t,[{key:"requestAsyncId",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;return Qv(e.flush.bind(e,this),n)}},{key:"recycleAsyncId",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;if(null!==n&&this.delay===n&&!1===this.pending)return t;Ze.hasOwnProperty(t)&&(delete Ze[t],Aj.postMessage({name:"clearInterval",fakeId:t}))}}]),t}(gt),oF=new it(nF),pF=["group"],mm=G.inflate,St=G.deflate,Tt=function(e){function t(e,n,o,i){va(this,t);var a=r.call(this,i,"Session");return x(z(a),"lastNoticeTicket",""),x(z(a),"chatManager",void 0),x(z(a),"usedChannelIds",[]),x(z(a),"msgDedupLru",new Wc(void 0,{maxlen:200})),x(z(a),"startTime",Date.now()),x(z(a),"seq",P.fromNumber(1,!0)),x(z(a),"userJoinOptions",new et(!1)),x(z(a),"seqSentStatuses",[!1,!1]),x(z(a),"dialogueSequenceLru",new Wc(void 0,{maxlen:1e4})),x(z(a),"loggedOut",!1),x(z(a),"messageSentTimes",[]),x(z(a),"curLoginSockets",[void 0,void 0]),x(z(a),"loginSocketSubs",[{channels:new Map,receivers:[]},{channels:new Map,receivers:[]}]),x(z(a),"lastLoginSockets",[new Te(1),new Te(1)]),x(z(a),"dialPendingMsgSubjectMap",new Map),x(z(a),"context",void 0),x(z(a),"connection",void 0),x(z(a),"instanceId",void 0),x(z(a),"lastPingTime",void 0),x(z(a),"chanelStringMessageReport",void 0),x(z(a),"chanelRawMessageReport",void 0),x(z(a),"p2pSMsgNoOfflineReport",void 0),x(z(a),"p2pRMsgNoOfflineReport",void 0),x(z(a),"registerSocketsFailureListener",(function(){a.connection.once("socketsFailure",(function(){a.log("socketsFailure, creating a new connection"),yd((function(){return a.connection.removeAllListeners(),a.connection=new ct(a.context,a.logger,!0),a.loginHandler(15e3,!0)})).pipe(Re((function(e){return e.pipe(Zd(ue.getParameter("RECONNECTING_AP_INTERVAL")))})),Kc(a.connection.apClient.apFinish$)).subscribe((function(){a.log("new connection connected")}))})),0===a.connection.listenerCount("tokenExpired")&&a.connection.on("tokenExpired",(function(){a.emit("tokenExpired")}))})),a.context=e,a.context.startTime=a.startTime,a.connection=n,a.instanceId=o,a.chatManager=new CE(i),a.lastPingTime=[0,0],a.setMaxListeners(512),a.log("The instanceId is %s",a.instanceId.toString()),a.chanelStringMessageReport=new zi(e,i,Ka.ChannelSMsg),a.chanelRawMessageReport=new zi(e,i,Ka.ChannelRMsg),a.p2pSMsgNoOfflineReport=new zi(e,i,Ka.P2pSMsgNoOfflineFlag),a.p2pRMsgNoOfflineReport=new zi(e,i,Ka.P2pRMsgNoOfflineFlag),a}Ga(t,e);var n,r=Ha(t);return eb(t,[{key:"loginHandler",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:12e3,n=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(this.loggedOut&&n)throw new da("Already logged out, request ignored");n&&this.registerSocketsFailureListener(),this.connection.initConnection();var r=this.getSocketLoginObservables(this.connection.lastOpenSockets,this.seq),o=Date.now();return r.forEach((function(t,r){var i=e.loginSocketSubs[r].login;void 0!==i&&i.unsubscribe(),e.loginSocketSubs[r].login=t.pipe(sa((function(t){var i;e.curLoginSockets[r]=t;var a=Date.now();bb("Link",{ackedServerIp:t.address,destServerIp:t.ip,ec:0,sc:0,elapse:Xa(e.startTime),lts:P.fromNumber(a),responseTime:a-o,sid:sb(e.instanceId),userId:e.context.uid},null!==(i=e.context.config.enableCloudProxy)&&void 0!==i&&i),e.emit("userJoined",t.env),n&&e.connection.apClient.apFinish$.next(void 0)}))).subscribe(e.lastLoginSockets[r])})),this.initKeepAliveSender(),this.initKeepAliveReconnector(),this.initLoginReceiver(),Jb.apply(void 0,Z(r).concat([Db(this.connection,"connectionInitFailure").pipe(sa((function(e){if(Na(e)||Ab(e))throw e;throw new Ja("Login failure",{code:$r,originalError:e})})))])).pipe(hb(1),Lb(t),ab((function(t){return t instanceof Tb&&e.warn("Client login timeout"),t&&t.code===ti&&(e.connection.emit("tokenExpired"),e.connection.apClient.apFinish$.next(void 0)),e.clearSockets(0,n),ra(t)})),sa((function(){n||e.registerSocketsFailureListener()})),fh((function(){n||e.connection.apClient.apFinish$.next(void 0)})))}},{key:"logoutHandler",value:(n=ma(N.mark((function e(){var t,n,r,o=this;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loggedOut=!0,this.connection.apClient.apFinish$.next(void 0),t=this.getLoginSockets(),n=t.map((function(e){return e.sendPacket("UserQuit",{}),o.connection.waitClosing(e)})),this.clearSockets(5e3),r=t.map((function(e){return e.env})),[0,1].filter((function(e){return!r.includes(e)})).forEach((function(e){o.connection.closeSocket(e,0)})),e.abrupt("return",Jb.apply(void 0,Z(n)).toPromise());case 9:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"requestChannelJoin",value:function(){var e=ma(N.mark((function e(t){var n,r,o,i=this;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.getLoginSockets().length){e.next=2;break}throw new da("Client is not logged in. Cannot join the channel",Wr);case 2:return n=Db(this,"channelLeft").pipe(yb((function(e){return t===e})),hb(1)),r=this.incGetSeq(),(o=this.lastLoginSockets.map((function(e){return e.pipe(Kb((function(e,n){0!==n&&i.incSeqIfNeeded(e.env);var o=0===n?r:i.seq;return e.sendPacket("GroupEnter",{account:t,seq:o}),e.fromReceived("GroupReply").pipe(Ca((function(e){return o.eq(e.seq)})),sa((function(e){if(0!==(e=e.code))throw new Ja(["Channel join failure. The response code is %d",e],Sr)})))})),Kc(n),Se())}))).forEach((function(e,n){var r=function(){return i.loginSocketSubs[n].channels.delete(t)};i.loginSocketSubs[n].channels.set(t,e.subscribe({error:r,complete:r}))})),e.next=8,Jb.apply(void 0,Z(o)).pipe(hb(1),Lb(1e4),ab((function(e){return e instanceof Tb&&i.warn("Channel join timeout"),ra(e)}))).toPromise();case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestChannelLeave",value:function(e){this.getLoginSockets().forEach((function(t){t.sendPacket("GroupLeave",{account:e})}))}},{key:"requestUpdateEdgeTicket",value:function(e){var n=this,r=this.getLoginSockets();if(0===r.length)throw new da("Client is not logged in. Cannot renew token",hs);var o=this.incGetSeq();return r.forEach((function(t){t.sendPacket("UserRenewTokenReq",{instance:n.instanceId,seq:o,account:n.context.uid,ticket:e})})),fb.apply(void 0,[t.genTimeoutError(Ml)].concat(Z(r.map((function(e){return e.fromReceived("UserRenewTokenResp").pipe(Ca((function(e){var t=e.code;return o.eq(e.seq)&&0===t})))})))))}},{key:"requestChannelMemberList",value:function(e){var n=this.getLoginSockets();if(0===n.length)throw new da("Client is not logged in. Cannot get the channel members",JB);var r=this.incGetSeq();return n.forEach((function(t){t.sendPacket("GroupAllUsersList",{group:e,pageNumber:0,pageSize:200,seq:r})})),fb.apply(void 0,[t.genTimeoutError(Qr)].concat(Z(n.map((function(t){return t.fromReceived("GroupAllUsersResult").pipe(Ca((function(t){var n=t.seq;return t.group===e&&r.eq(n)})))})))))}},{key:"requestPeersOnlineStatus",value:function(e){var n=this.getLoginSockets();if(0===n.length)throw new da("Client is not logged in");var r=this.incGetSeq();return n.forEach((function(t){t.sendPacket("UserStatusList",{users:e,seq:r})})),fb.apply(void 0,[t.genTimeoutError(VB)].concat(Z(n.map((function(e){return e.fromReceived("UserStatusResult").pipe(Ca((function(e){return r.eq(e.seq)})))})))))}},{key:"requestSetLocalUserAttributes",value:function(e,n){var r=this,o=this.getLoginSockets();if(0===o.length)throw new da("Client is not logged in");var i=this.incGetSeq();return o.forEach((function(t,o){void 0!==n&&o!==n||t.sendPacket("UserAttributeSet",{account:r.context.uid,attributeInfos:Object.entries(e).map((function(e){return{key:(e=$a(e,2))[0],value:e[1]}})),seq:i})})),fb.apply(void 0,Z(o.map((function(e){return e.fromReceived("UserAttributeErr").pipe(Ca((function(e){return i.eq(e.seq)})),Ea((function(e){throw new Ja(["The user attributes set failure, code %d",e.code],oc)})))}))).concat([t.genTimeoutError(pc)],Z(o.map((function(e){return e.fromReceived("UserAttributeRsp").pipe(Ca((function(e){return i.eq(e.seq)})))})))))}},{key:"requestSetChannelAttributes",value:function(e,n,r){var o=this.getLoginSockets();if(0===o.length)throw new da("Client is not logged in");var i=this.incGetSeq();return o.forEach((function(t){t.sendPacket("GroupAttributeSet",{broadcast:r,group:e,attributeInfos:Object.entries(n).map((function(e){return{key:(e=$a(e,2))[0],value:e[1]}})),seq:i})})),fb.apply(void 0,Z(o.map((function(e){return e.fromReceived("GroupAttributeErr").pipe(Ca((function(e){return i.eq(e.seq)})),Ea((function(e){throw new Ja(["The group attributes set failure, code %d",e.code],oc)})))}))).concat([t.genTimeoutError(pc)],Z(o.map((function(e){return e.fromReceived("GroupAttributeRsp").pipe(Ca((function(e){return i.eq(e.seq)})))})))))}},{key:"requestAddOrUpdateLocalUserAttributes",value:function(e){var n=this,r=this.getLoginSockets();if(0===r.length)throw new da("Client is not logged in");var o=this.incGetSeq();return r.forEach((function(t){t.sendPacket("UserAttributeMod",{account:n.context.uid,attributeInfos:Object.entries(e).map((function(e){return{key:(e=$a(e,2))[0],value:e[1]}})),seq:o})})),fb.apply(void 0,Z(r.map((function(e){return e.fromReceived("UserAttributeErr").pipe(Ca((function(e){return o.eq(e.seq)})),Ea((function(e){throw new Ja(["The user attributes add or update failure, code %d",e.code],oc)})))}))).concat([t.genTimeoutError(pc)],Z(r.map((function(e){return e.fromReceived("UserAttributeRsp").pipe(Ca((function(e){return o.eq(e.seq)})))})))))}},{key:"requestAddOrUpdateChannelAttributes",value:function(e,n,r){var o=this.getLoginSockets();if(0===o.length)throw new da("Client is not logged in");var i=this.incGetSeq();return o.forEach((function(t){t.sendPacket("GroupAttributeMod",{broadcast:r,group:e,attributeInfos:Object.entries(n).map((function(e){return{key:(e=$a(e,2))[0],value:e[1]}})),seq:i})})),fb.apply(void 0,Z(o.map((function(e){return e.fromReceived("GroupAttributeErr").pipe(Ca((function(e){return i.eq(e.seq)})),Ea((function(e){throw new Ja(["The group attributes add or update failure, code %d",e.code],oc)})))}))).concat([t.genTimeoutError(pc)],Z(o.map((function(e){return e.fromReceived("GroupAttributeRsp").pipe(Ca((function(e){return i.eq(e.seq)})))})))))}},{key:"requestDeleteLocalUserAttributesByKeys",value:function(e){var n=this,r=this.getLoginSockets();if(0===r.length)throw new da("Client is not logged in");var o=this.incGetSeq();return r.forEach((function(t){t.sendPacket("UserAttributeDel",{account:n.context.uid,attributes:e,seq:o})})),fb.apply(void 0,Z(r.map((function(e){return e.fromReceived("UserAttributeErr").pipe(Ca((function(e){return o.eq(e.seq)})),Ea((function(e){throw new Ja(["The user attributes delete failure, code %d",e.code],oc)})))}))).concat([t.genTimeoutError(pc)],Z(r.map((function(e){return e.fromReceived("UserAttributeRsp").pipe(Ca((function(e){return o.eq(e.seq)})))})))))}},{key:"requestDeleteChannelAttributesByKeys",value:function(e,n,r){var o=this.getLoginSockets();if(0===o.length)throw new da("Client is not logged in");var i=this.incGetSeq();return o.forEach((function(t){t.sendPacket("GroupAttributeDel",{group:e,broadcast:r,attributes:n,seq:i})})),fb.apply(void 0,Z(o.map((function(e){return e.fromReceived("GroupAttributeErr").pipe(Ca((function(e){return i.eq(e.seq)})),Ea((function(e){throw new Ja(["The channel attributes delete failure, code %d",e.code],oc)})))}))).concat([t.genTimeoutError(pc)],Z(o.map((function(e){return e.fromReceived("GroupAttributeRsp").pipe(Ca((function(e){return i.eq(e.seq)})))})))))}},{key:"requestClearLocalUserAttributes",value:function(){var e=this,n=this.getLoginSockets();if(0===n.length)throw new da("Client is not logged in");var r=this.incGetSeq();return n.forEach((function(t){t.sendPacket("UserAttributeSet",{account:e.context.uid,seq:r,attributeInfos:[]})})),fb.apply(void 0,Z(n.map((function(e){return e.fromReceived("UserAttributeErr").pipe(Ca((function(e){return r.eq(e.seq)})),Ea((function(e){throw new Ja(["The user attributes clear failure, code %d",e.code],oc)})))}))).concat([t.genTimeoutError(pc)],Z(n.map((function(e){return e.fromReceived("UserAttributeRsp").pipe(Ca((function(e){return r.eq(e.seq)})))})))))}},{key:"requestClearChannelAttributes",value:function(e,n){var r=this.getLoginSockets();if(0===r.length)throw new da("Client is not logged in");var o=this.incGetSeq();return r.forEach((function(t){t.sendPacket("GroupAttributeSet",{group:e,seq:o,attributeInfos:[],broadcast:n})})),fb.apply(void 0,Z(r.map((function(e){return e.fromReceived("GroupAttributeErr").pipe(Ca((function(e){return o.eq(e.seq)})),Ea((function(e){throw new Ja(["The channel attributes clear failure, code %d",e.code],oc)})))}))).concat([t.genTimeoutError(pc)],Z(r.map((function(e){return e.fromReceived("GroupAttributeRsp").pipe(Ca((function(e){return o.eq(e.seq)})))})))))}},{key:"requestGetUserAttributesByKeys",value:function(e,n){var r=this.getLoginSockets();if(0===r.length)throw new da("Client is not logged in");var o=this.incGetSeq();return r.forEach((function(t){t.sendPacket("UserAttributeGet",{account:e,seq:o,attributes:n})})),fb.apply(void 0,[t.genTimeoutError(pc)].concat(Z(r.map((function(e){return e.fromReceived("UserAttributeErr").pipe(Ca((function(e){return o.eq(e.seq)})),Ea((function(e){if(10008===(e=e.code))throw new Ja("The user requested is not online",Mr);throw new ve(["User attribute operation unknown error code: %d",e],oc)})))}))),Z(r.map((function(e){return e.fromReceived("UserAttributeRet").pipe(Ca((function(e){return o.eq(e.seq)})))})))))}},{key:"requestGetChannelAttributesByKeys",value:function(e,n){var r=this.getLoginSockets();if(0===r.length)throw new da("Client is not logged in");var o=this.incGetSeq();return r.forEach((function(t){t.sendPacket("GroupAttributeGet",{group:e,seq:o,attributes:n})})),fb.apply(void 0,[t.genTimeoutError(pc)].concat(Z(r.map((function(e){return e.fromReceived("GroupAttributeErr").pipe(Ca((function(e){return o.eq(e.seq)})),Ea((function(e){throw new Ja(["The channel attributes get failure, code %d",e.code],oc)})))}))),Z(r.map((function(e){return e.fromReceived("GroupAttributeRet").pipe(Ca((function(e){return o.eq(e.seq)})))})))))}},{key:"requestGetUserAttributeKeys",value:function(e){var n=this.getLoginSockets();if(0===n.length)throw new da("Client is not logged in");var r=this.incGetSeq();return n.forEach((function(t){t.sendPacket("UserAttributeKeysGet",{account:e,seq:r})})),fb.apply(void 0,[t.genTimeoutError(pc)].concat(Z(n.map((function(e){return e.fromReceived("UserAttributeErr").pipe(Ca((function(e){return r.eq(e.seq)})),Ea((function(e){if(10008===(e=e.code))throw new Ja("The user requested is not online",Mr);throw new ve(["User attribute operation unknown error code: %d",e],oc)})))}))),Z(n.map((function(e){return e.fromReceived("UserAttributeKeysRet").pipe(Ca((function(e){return r.eq(e.seq)})))})))))}},{key:"requestGetChannelAttributesKeys",value:function(e){var n=this.getLoginSockets();if(0===n.length)throw new da("Client is not logged in");var r=this.incGetSeq();return n.forEach((function(t){t.sendPacket("GroupAttributeKeysGet",{group:e,seq:r})})),fb.apply(void 0,[t.genTimeoutError(pc)].concat(Z(n.map((function(e){return e.fromReceived("GroupAttributeErr").pipe(Ca((function(e){return r.eq(e.seq)})),Ea((function(e){throw new ve(["Channel attribute operation unknown error code: %d",e.code],oc)})))}))),Z(n.map((function(e){return e.fromReceived("GroupAttributeKeysRet").pipe(Ca((function(e){return r.eq(e.seq)})))})))))}},{key:"requestGetChannelMemberCount",value:function(e){var n=this.getLoginSockets();if(0===n.length)throw new da("Client is not logged in");var r=this.incGetSeq();return n.forEach((function(t){t.sendPacket("GroupStatusList",{groups:e,seq:r})})),fb.apply(void 0,[t.genTimeoutError(Qr)].concat(Z(n.map((function(e){return e.fromReceived("GroupStatusResult").pipe(Ca((function(e){return r.eq(e.seq)})))})))))}},{key:"requestSubscribePeersOnlineStatus",value:function(e){var n=this.getLoginSockets();if(0===n.length)throw new da("Client is not logged in");var r=this.incGetSeq();return n.forEach((function(t){t.sendPacket("SubscribeUserStatus",{seq:r,users:e})})),fb.apply(void 0,[t.genTimeoutError($B)].concat(Z(n.map((function(e){return e.fromReceived("SubscribeResponse").pipe(Ca((function(e){return r.eq(e.seq)})))})))))}},{key:"requestUnsubscribePeersOnlineStatus",value:function(e){var t=this.getLoginSockets();if(0===t.length)throw new da("Client is not logged in");var n=this.incGetSeq();t.forEach((function(t){t.sendPacket("UnsubscribeUserStatus",{seq:n,users:e})}))}},{key:"sendInvitationMessage",value:function(){var e=ma(N.mark((function e(t){var n,r,o,i,a,s,c,l,u,d,A,p,h=this;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.peerId,r=t.callId,o=t.extra,i=t.isAcceptAck,a=t.channelId,s=t.type,c={callId:r},void 0===i){e.next=6;break}if("CallAccept"===s){e.next=5;break}throw Error("invalid invitation type");case 5:c.type=i?"ack":"request";case 6:return c.channel=a,("CallInvite"===s||"CallCancel"===s||"CallReject"===s||"CallAccept"===s&&!1===i)&&void 0!==o&&(c.extra=o),l=nh(),this.log("The sent invitation body is %o",c),u=function(e){return{MiscMap:{},sequence:P.fromNumber(1),dialogue:l,instance:h.instanceId,dst:n,ms:P.fromNumber(Date.now(),!0),options:new Ef({IterationNumber:e,MessageType:s}).toLong(),payload:(new TextEncoder).encode(JSON.stringify(c)),src:h.context.uid}},e.next=14,Jc(this.sendMessageToRetry(u,!0)).pipe(Lb(1e4),ab((function(e){return e instanceof Tb&&h.warn("Send invitation timeout"),ra(e)}))).toPromise();case 14:return d=e.sent,A=d.code,p=d.retryTimes,e.abrupt("return",{hasPeerReceived:0===A,hasReSent:0!==p});case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendRawMessage",value:function(){var e=ma(N.mark((function e(t,n,r,o,i){var a,s,c,l,u,d,A,p,h,f,g,m=this;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Date.now(),s=o?Ka.P2pRMsgNoOfflineFlag:Ka.ChannelRMsg,Ta(r)&&t instanceof Uint8Array&&"string"==typeof n){e.next=4;break}throw new ca("The send message arguments are not valid",o?fs:qi);case 4:if(!(32768<t.byteLength+new Blob([n]).size)){e.next=8;break}throw this.emit("messageCount",{messageCategory:s,type:"common",key:"sentcount"}),this.emit("messageCount",{messageCategory:s,type:"common",key:"invalidmessagecount"}),new ic("The message size is over the 32KB limit",o?bg:Il);case 8:return c=!ue.getParameter("DISABLE_MESSAGE_COMPRESSION")&&128<=t.byteLength,l=this.chatManager.getChatInfo(r),u=l.dialogue,d=l.sequence,A=this.instanceId,this.log('A%s %s raw message is sending to %s: "'.concat(A,"-").concat(u,"#").concat(d,'"'),c?" compressed":"",o?"peer":"channel",La(r)),p=function(e){return{MiscMap:{description:(new TextEncoder).encode(n)},sequence:d,dialogue:u,instance:A,dst:r,ms:P.fromNumber(Date.now(),!0),options:new Ef({IterationNumber:e,CompressionMethod:c?"Zlib":"Uncompressed",MessageType:o?"PeerRawMessage":"ChannelRawMessage",ToCache:!1,ToArchive:!1}).toLong(),payload:c?St(t):t,src:m.context.uid}},e.next=15,Jc(this.sendMessageToRetry(p,!0)).pipe(Lb(void 0===i?1e4:i),ab((function(e){return e instanceof Tb&&m.warn("Send message timeout"),ra(e)}))).toPromise();case 15:return h=e.sent,f=h.code,g=0===f,this.emit("messageCount",{messageCategory:s,type:"common",key:"sentcount"}),g&&(this.emit("messageCount",{messageCategory:s,type:"common",key:"successcount"}),this.emit("messageCount",{messageCategory:s,type:o?"peer":"recipient",delay:Xa(a).toNumber()})),e.abrupt("return",{hasPeerReceived:g});case 21:case"end":return e.stop()}}),e,this)})));return function(t,n,r,o,i){return e.apply(this,arguments)}}()},{key:"sendTextMessage",value:function(){var e=ma(N.mark((function e(t,n,r,o){var i,a,s,c,l,u,d,A,p,h,f,g,m=this;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Date.now(),a=r?Ka.P2pSMsgNoOfflineFlag:Ka.ChannelSMsg,Ta(n)){e.next=4;break}throw new ca("The send message arguments are not valid",r?fs:qi);case 4:if(!(32768<new Blob([t]).size)){e.next=8;break}throw this.emit("messageCount",{messageCategory:a,type:"common",key:"sentcount"}),this.emit("messageCount",{messageCategory:a,type:"common",key:"invalidmessagecount"}),new ic("The message size is over the 32KB limit",r?bg:Il);case 8:return s=!ue.getParameter("DISABLE_MESSAGE_COMPRESSION")&&128<=new Blob([t]).size,c=this.chatManager.getChatInfo(n),l=c.dialogue,u=c.sequence,d=this.instanceId,this.log('A%s %s message is sending to %s: "'.concat(d,"-").concat(l,"#").concat(u,'"'),s?" compressed":"",r?"peer":"channel",La(n)),A=(new TextEncoder).encode(t),p=function(e){return{MiscMap:{},sequence:u,dialogue:l,instance:d,dst:n,ms:P.fromNumber(Date.now(),!0),options:new Ef({IterationNumber:e,CompressionMethod:s?"Zlib":"Uncompressed",MessageType:r?"PeerTextMessage":"ChannelTextMessage",ToCache:!1,ToArchive:!1}).toLong(),payload:s?St(A):A,src:m.context.uid}},e.next=16,Jc(this.sendMessageToRetry(p,!0)).pipe(Lb(void 0===o?1e4:o),ab((function(e){return e instanceof Tb&&(m.emit("messageCount",{messageCategory:a,type:"common",key:"sentcount"}),m.emit("messageCount",{messageCategory:a,type:"common",key:"timeoutcount"}),m.warn("Send message timeout")),ra(e)}))).toPromise();case 16:return h=e.sent,f=h.code,g=0===f,this.emit("messageCount",{messageCategory:a,type:"common",key:"sentcount"}),g&&(this.emit("messageCount",{messageCategory:a,type:"common",key:"successcount"}),this.emit("messageCount",{messageCategory:a,type:r?"peer":"recipient",delay:Xa(i).toNumber()})),e.abrupt("return",{hasPeerReceived:g});case 22:case"end":return e.stop()}}),e,this)})));return function(t,n,r,o){return e.apply(this,arguments)}}()},{key:"cleanLoginSubs",value:function(e,t){Object.entries(this.loginSocketSubs[e]).forEach((function(e){var n=(e=$a(e,2))[1];"channels"===e[0]&&t||(Array.isArray(n)||n instanceof Map?n.forEach((function(e){return e.unsubscribe()})):n&&n.unsubscribe())})),this.loginSocketSubs[e]={channels:t?this.loginSocketSubs[e].channels:new Map,receivers:[]}}},{key:"sendMessageToRetry",value:function(){var e=ma(N.mark((function e(t,n){var r,o,i,a,s,c,l,u,d,A=this,p=arguments;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=2<p.length&&void 0!==p[2]?p[2]:0,this.log("Attempt to send the message ".concat(n?" with retrying, %o":"without retrying"),{retryTimes:r}),0!==(o=this.getLoginSockets()).length){e.next=5;break}throw Error("no logged-in sockets");case 5:return i=t(r),o.forEach((function(e){e.sendPacket("Message",i)})),a=i.dialogue,s=i.sequence,c=i.instance,l=o.map((function(e){return e.fromReceived("Ack").pipe(yb((function(e){return a.eq(e.dialogue)&&s.eq(e.sequence)&&c.eq(e.instance)})))})),e.prev=9,e.next=12,Jb.apply(void 0,Z(l)).pipe(Lb(6e3),ab((function(e){return Ab(e)&&A.warn("Message send timeout, retry times %d",r),ra(e)})),hb(1)).toPromise();case 12:return u=e.sent,d=u.code,this.log("The message has been acked, %o",{code:d}),e.abrupt("return",{code:d,retryTimes:r});case 18:if(e.prev=18,e.t0=e.catch(9),!(e.t0 instanceof Tb&&n)){e.next=22;break}return e.abrupt("return",this.sendMessageToRetry(t,!1,r+1));case 22:throw e.t0;case 23:case"end":return e.stop()}}),e,this,[[9,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"initKeepAliveSender",value:function(){var e=this;this.lastLoginSockets.map((function(t){return t.pipe(Kb((function(t){return dd(0,2500,Ce()?void 0:oF).pipe(sa((function(){e.sendPing(t)})))})))})).forEach((function(t,n){var r=e.loginSocketSubs[n].keepAlive;void 0!==r&&r.unsubscribe(),e.loginSocketSubs[n].keepAlive=t.subscribe({error:function(){}})}))}},{key:"initKeepAliveReconnector",value:function(){var e=this;this.lastLoginSockets.map((function(e){return e.pipe(Kb((function(e){var t,n=!1,r=e.userJoin$.pipe(sa((function(){n=!0}))),o=e.input$.pipe(sa((function(e){"Ping"!==yj[e.uri].slice(0,-3)&&(n=!1)})));return Jb(dd(6e3,1e4).pipe(yv(e.receivedPacket),sa((function(r){r=$a(r,2),r=$a(r[1],2)[1],t!==r||n||e.forceReconnect(),t=r}))),r,o)})))})).forEach((function(t,n){var r=e.loginSocketSubs[n].keepAliveReconnector;void 0!==r&&r.unsubscribe(),e.loginSocketSubs[n].keepAliveReconnector=t.subscribe({error:function(){}})}))}},{key:"initLoginReceiver",value:function(){var e=this;fb.apply(void 0,Z(this.lastLoginSockets.map((function(t){return t.pipe(Kb((function(t){return t.fromReceived("UserTicketNearlyExpire").pipe(sv(5e3),sa(e.onUserTicketNearlyExpire(t)))})))})))).subscribe();var t=Db(this,"messageCount"),n=t.pipe(yb((function(e){return e.messageCategory===Ka.ChannelSMsg})));n.subscribe((function(t){return e.updateMessageCount(t)})),n.pipe(dh(6e3)).subscribe((function(t){t.length&&e.chanelStringMessageReport.report()})),Jb(ob(void 0),n).pipe(Kb((function(){return Qe(36e5)}))).subscribe((function(){e.chanelStringMessageReport.report()})),(n=t.pipe(yb((function(e){return e.messageCategory===Ka.ChannelRMsg})))).subscribe((function(t){return e.updateMessageCount(t)})),n.pipe(dh(6e3)).subscribe((function(t){t.length&&e.chanelRawMessageReport.report()})),Jb(ob(void 0),n).pipe(Kb((function(){return Qe(36e5)}))).subscribe((function(){e.chanelRawMessageReport.report()})),(n=t.pipe(yb((function(e){return e.messageCategory===Ka.P2pSMsgNoOfflineFlag})))).subscribe((function(t){return e.updateMessageCount(t)})),n.pipe(dh(6e3)).subscribe((function(t){t.length&&e.p2pSMsgNoOfflineReport.report()})),Jb(ob(void 0),n).pipe(Kb((function(){return Qe(36e5)}))).subscribe((function(){e.p2pSMsgNoOfflineReport.report()})),(t=t.pipe(yb((function(e){return e.messageCategory===Ka.P2pRMsgNoOfflineFlag})))).subscribe((function(t){return e.updateMessageCount(t)})),t.pipe(dh(6e3)).subscribe((function(t){t.length&&e.p2pRMsgNoOfflineReport.report()})),Jb(ob(void 0),t).pipe(Kb((function(){return Qe(36e5)}))).subscribe((function(){e.p2pSMsgNoOfflineReport.report()})),this.lastLoginSockets.map((function(t){return t.pipe(Kb((function(t){return Jb(Db(t,"reconnect").pipe(sa(e.onSocketReconnect(t))),t.fromReceived("Message").pipe(sa(e.onMessage(t))),t.fromReceived("GroupEnterNotice").pipe(sa(e.onGroupEnterNotice())),t.fromReceived("GroupLeaveNotice").pipe(sa(e.onGroupLeaveNotice())),t.fromReceived("GroupCountNotice").pipe(sa(e.onGroupCountNotice())),t.fromReceived("GroupAttributeAlt").pipe(sa(e.onGroupAttributeAlt())),t.fromReceived("UserJoinNotice").pipe(sa(e.onUserNotice(ta.PeerOnlineState.ONLINE))),t.fromReceived("UserQuitNotice").pipe(sa(e.onUserNotice(ta.PeerOnlineState.OFFLINE))),t.fromReceived("UserWaitNotice").pipe(sa(e.onUserNotice(ta.PeerOnlineState.UNREACHABLE))),t.fromReceived("Pong").pipe(sa(e.onPong())),t.fromReceived("UserDrop").pipe(sa(e.onUserDrop(t))),t.fromReceived("GroupDrop").pipe(sa(e.onGroupDrop()))).pipe(Uf(void 0))})))})).forEach((function(t,n){e.loginSocketSubs[n].receivers.push(t.subscribe({error:function(){}}))}))}},{key:"requestSocketLogin",value:function(e,t,n){var r=this;return nn(yd((function(){r.userJoinOptions=new et(t),e.sendPacket("UserJoin",{account:r.context.uid,instance:r.instanceId,opt:r.userJoinOptions.toLong(),seq:n,ticket:e.ticket})})),e.fromReceived("UserResp").pipe(Ca((function(e){return n.eq(e.seq)})),sa((function(t){if(0!==(t=t.code))throw r.clearSockets(),r.logError("Connected to gateway success but the Rtm server rejected login"),new Ja(["Login failure. The response code from the RTM service is %d",t],Pg);e.attemptsSinceLastError=0,e.loggedIn=!0,r.log("ENV_%d logged in",e.env)})),Uf(e),Lb(6e3))).pipe(yb((function(e){return void 0!==e})),ab((function(n){return n instanceof Tb&&r.warn("Login response timeout, rejoin: %s",t),r.clearSockets(),n.name="loginRespTimeout",r.emit("banEdgeIP",e.ip),ra(n)})))}},{key:"getSocketLoginObservables",value:function(e,t){var n=this;return e.map((function(e){return e.pipe(Kb((function(e,r){return n.incSeqIfNeeded(e.env),n.requestSocketLogin(e,0!==r,0===r?t:n.seq)})),Se())}))}},{key:"incSeqIfNeeded",value:function(e){if(![0,1].includes(e))throw new mb({INVALID_ENV:"The env argument is not 0 or 1"});this.seqSentStatuses[e]&&(this.seq=this.seq.add(1),this.seqSentStatuses=[!1,!1]),this.seqSentStatuses[e]=!0}},{key:"incGetSeq",value:function(){return this.seq=this.seq.add(1),this.seqSentStatuses=[!0,!0],this.seq}},{key:"getLoginSockets",value:function(){for(var e=this.curLoginSockets,t=-1,n=null==e?0:e.length,r=0,o=[];++t<n;){var i=e[t];i&&(o[r++]=i)}return o}},{key:"emitMessage",value:function(e,n){var r,o=e.options,i=e.payload,a=e.src,s=e.dst,c=e.instance,l=e.dialogue,u=e.sequence,d=e.ms,A=e.MiscMap;this.dialogueSequenceLru.set(l.toString(),u),c="".concat(c,"-").concat(l,"#").concat(u),this.msgDedupLru.has(c)?this.warn("Env_%d: Messages out-of-order or not start with 1: %s",n,c):(this.msgDedupLru.set(c,void 0),o=new Ef(o),this.lastLoginSockets.forEach((r=ma(N.mark((function n(r){var o;return N.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.pipe(hb(1)).toPromise();case 2:o=n.sent,t.sendMessageAck(e,o);case 4:case"end":return n.stop()}}),n)}))),function(e){return r.apply(this,arguments)})),n=o.isZlibCompressed(),o.isInvitation()?(s=cg(n?mm(ao(i,Uint8Array.of(0,0,0,0))):i),s=JSON.parse(s),this.log("The received invitation body is %o",s),this.emit("invitationMessage",{body:s,type:o.getInvitationType(),peerId:a,serverReceivedTs:d.toNumber()})):o.isTextMessage()?(A=o.isPeerTextMessage(),i=cg(n?mm(ao(i,Uint8Array.of(0,0,0,0))):i),this.info("Received a %s %s text message from %s to %s, %s",n?" compressed":"",A?"peer":"channel",La(a),La(s),c),A?(a={text:i,peerId:a,properties:{serverReceivedTs:d.toNumber()}},this.emit("peerTextMessage",a),this.emit("messageCount",{messageCategory:Ka.P2pSMsgNoOfflineFlag,type:"common",key:"receivedcount"})):(this.emit("channelTextMessage",{channelId:s,memberId:a,text:i,properties:{serverReceivedTs:d.toNumber()}}),this.emit("messageCount",{messageCategory:Ka.ChannelSMsg,type:"common",key:"receivedcount"}))):o.isRawMessage()&&(o=o.isRawPeerMessage(),A=void 0===(A=A.description)?"":cg(A),i=n?mm(i):i,this.info("Received a %s %s raw message from %s to %s, %s",n?" compressed":"",o?"peer":"channel",La(a),La(s),c),o?(a={desc:A,raw:i,peerId:a,properties:{serverReceivedTs:d.toNumber()}},this.emit("peerRawMessage",a),this.emit("messageCount",{messageCategory:Ka.P2pRMsgNoOfflineFlag,type:"common",key:"receivedcount"})):(this.emit("channelRawMessage",{desc:A,raw:i,channelId:s,memberId:a,properties:{serverReceivedTs:d.toNumber()}}),this.emit("messageCount",{messageCategory:Ka.ChannelRMsg,type:"common",key:"receivedcount"}))))}},{key:"onSocketReconnect",value:function(e){var t=this;return function(){var n=[0,1].filter((function(t){return t!==e.env}))[0];(n=t.connection.curOpenSockets[n])&&!n.loggedIn&&t.emit("connectionLost")}}},{key:"onUserTicketNearlyExpire",value:function(e){var t=this;return function(n){(n=n.ticket)!==t.lastNoticeTicket&&n===e.ticket?(t.lastNoticeTicket=n,t.emit("tokenPrivilegeWillExpire")):t.requestUpdateEdgeTicket(e.ticket).toPromise()}}},{key:"onGroupDrop",value:function(){var e=this;return function(t){var n,r=t.account;bb("ChnLeave",{cname:r,lts:P.fromNumber(Date.now()),elapse:Xa(e.startTime),errCode:RB,sid:sb(e.instanceId),userId:e.context.uid},null!==(n=e.context.config.enableCloudProxy)&&void 0!==n&&n),[0,1].forEach((function(t){return e.loginSocketSubs[t].channels.delete(r)})),e.logError("the user is kicked out of the current channel")}}},{key:"onUserDrop",value:function(e){var t=this;return function(n){var r;n=n.code,bb("KickedOff",{code:0,elapse:Xa(t.startTime),linkId:parseInt(e.name.split("-")[1],10),lts:P.fromNumber(Date.now()),server:e.address,serverCode:n,sid:sb(t.instanceId),userId:t.context.uid},null!==(r=t.context.config.enableCloudProxy)&&void 0!==r&&r),10006===n||10001===n?t.warn("Login too often and kicked off, reconnect and login"):10009===n?(t.warn("The instance ID conflicts, reconnecting"),t.instanceId=nh(),t.context.sid=sb(t.instanceId),t.emit("instanceChanged",t.instanceId)):[2,11,14,15,16].includes(n)&&(t.emit("userDrop",n),t.clearSockets())}}},{key:"clearSockets",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,n=1<arguments.length&&void 0!==arguments[1]&&arguments[1];[0,1].forEach((function(r){e.cleanLoginSubs(r,n),e.connection.closeSocket(r,t)}))}},{key:"onMessage",value:function(e){var t=this;return function(n){var r=n.dialogue,o=n.instance,i=n.sequence,a=n.options;if(n.src===t.context.uid)t.log("The message is from the local account, ignored");else{var s=r.toString(),c=t.dialPendingMsgSubjectMap.get(s);if(r="".concat(o,"-").concat(r,"#").concat(i),c)c.next(n),t.log("Env_%d: The dialogue has pending messages, next: %s",e.env,r);else{var l=t.dialogueSequenceLru.get(s);if(c=!l&&i.eq(1),o=void 0!==l&&i.sub(l).eq(1),c||o)t.emitMessage(n,e.env);else{if(l){if(i.lte(l))return;t.log("Env_%d: The message pended, the sequence is not continuous with the last: %s",e.env,r)}else t.log("Env_%d: The message pended, the first sequence is not equal to 1: %s",e.env,r);i=new rb,t.dialPendingMsgSubjectMap.set(s,i);var u=i.pipe(Au(zl),gh((function(e,t){return[].concat(Z(e),[t])}),[]),Ea((function(e){return Z(e).sort((function(e,t){return e=e.sequence,t=t.sequence,e.eq(t)?0:e.gt(t)?1:-1}))})),wn(1));a=!(a=new Ef(a)).isFromCache()&&!a.isBufferedMessage(),u.pipe(Kc(dd(a?750:1500)),Ca((function(e){if(2>e.length)return!1;for(var t=void 0===l?P.fromNumber(1,!0):l.add(1),n=0;n<e.length;t=t.add(1),n++)if(!e[n].sequence.eq(t))return!1;return!0})),fh((function(){t.dialPendingMsgSubjectMap.delete(s)}))).subscribe((function(n){n.forEach((function(n){t.emitMessage(n,e.env),t.log("Env_%d: The message queue has fully ordered, emitting: %s",e.env,"".concat(n.instance,"-").concat(n.dialogue,"#").concat(n.sequence))}))}),(function(n){n instanceof eh&&u.pipe(hb(1)).subscribe((function(n){return n.forEach((function(n){t.log("Env_%d: The message pending queue expired, emitting: %s",e.env,"".concat(n.instance,"-").concat(n.dialogue,"#").concat(n.sequence)),t.emitMessage(n,e.env)}))}))})),i.next(n)}}}}}},{key:"onPong",value:function(){var e=this;return function(){document.hidden&&e.getLoginSockets().forEach((function(t){e.sendPing(t)}))}}},{key:"onGroupEnterNotice",value:function(){var e=this;return function(t){e.emit("memberNotice",{channelId:t.group,seq:t.seq,instance:t.instance,memberId:t.user,type:"MemberJoined",size:t.size})}}},{key:"onGroupLeaveNotice",value:function(){var e=this;return function(t){e.emit("memberNotice",{channelId:t.group,seq:t.seq,instance:t.instance,memberId:t.user,type:"MemberLeft",size:t.size})}}},{key:"onGroupCountNotice",value:function(){var e=this;return function(t){e.emit("memberNotice",{channelId:t.group,seq:t.seq,instance:t.instance,type:"MemberCountUpdated",size:t.size})}}},{key:"onGroupAttributeAlt",value:function(){var e=this;return function(t){var n=t.group;t=Ki(t,pF),e.emit("channelAttributesUpdated",Wa({channelId:n},t))}}},{key:"onUserNotice",value:function(e){var t=this;return function(n){t.emit("peerOnlineStatusChanged",{peerId:n.user,instance:n.instance,seq:n.seq,state:e})}}},{key:"sendPing",value:function(e){2500>=Date.now()-this.lastPingTime[e.env]||(this.incSeqIfNeeded(e.env),e.sendPacket("Ping",{ms:P.fromNumber(Date.now(),!0),seq:this.seq}),this.lastPingTime[e.env]=Date.now())}},{key:"updateMessageCount",value:function(e){var t,n=(t={},x(t,Ka.ChannelRMsg,this.chanelRawMessageReport),x(t,Ka.ChannelSMsg,this.chanelStringMessageReport),x(t,Ka.P2pRMsgNoOfflineFlag,this.p2pRMsgNoOfflineReport),x(t,Ka.P2pSMsgNoOfflineFlag,this.p2pSMsgNoOfflineReport),x(t,3,void 0),x(t,4,void 0),x(t,7,void 0),x(t,8,void 0),x(t,9,void 0),x(t,10,void 0),t)[e.messageCategory];"common"===e.type?null==n||n.updateCommonCount(e.key):"peer"===e.type?null==n||n.updatePeerAckCount(e.delay):null==n||n.updateNorecipientackCount(e.delay)}}],[{key:"sendMessageAck",value:function(e,t){var n=new Ef(e.options);(n.isInvitation()||n.isPeerMessage())&&t.sendPacket("Ack",{code:0,dialogue:e.dialogue,instance:e.instance,sequence:e.sequence})}}]),t}(sc());x(Tt,"genTimeoutError",(function(e,t){return ob(void 0).pipe(Zd(void 0===t?1e4:t),Ea((function(){throw new Ub(["Request timed out after %ds",(void 0===t?1e4:t)/1e3],e)})))}));var Ut,nm,om=0,pm=0;Ng.v1=function(e,t,n){n=t&&n||0;var r=t||[],o=(e=e||{}).node||Ut,i=void 0!==e.clockseq?e.clockseq:nm;if(null==o||null==i){var a=Kr();null==o&&(o=Ut=[1|a[0],a[1],a[2],a[3],a[4],a[5]]),null==i&&(i=nm=16383&(a[6]<<8|a[7]))}a=void 0!==e.msecs?e.msecs:(new Date).getTime();var s=void 0!==e.nsecs?e.nsecs:pm+1,c=a-om+(s-pm)/1e4;if(0>c&&void 0===e.clockseq&&(i=i+1&16383),(0>c||a>om)&&void 0===e.nsecs&&(s=0),1e4<=s)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");for(om=a,pm=s,nm=i,e=(1e4*(268435455&(a+=122192928e5))+s)%4294967296,r[n++]=e>>>24&255,r[n++]=e>>>16&255,r[n++]=e>>>8&255,r[n++]=255&e,e=a/4294967296*1e4&268435455,r[n++]=e>>>8&255,r[n++]=255&e,r[n++]=e>>>24&15|16,r[n++]=e>>>16&255,r[n++]=i>>>8|128,r[n++]=255&i,i=0;6>i;++i)r[n+i]=o[i];return t||Lr(r)},Ng.v4=Ng;var qm=yi(),Sd,Hf=ta.LocalInvitationFailureReason,Sa=ta.LocalInvitationState,qF=(Sd=function(e){function t(e,r,o){va(this,t);var i=n.call(this,o,"RtmLocalInvitation",!0);return x(z(i),"state",Sa.IDLE),x(z(i),"localInvitationEnd$",fb(Db(z(i),"LocalInvitationAccepted"),Db(z(i),"LocalInvitationRefused"),Db(z(i),"LocalInvitationFailure"),Db(z(i),"LocalInvitationCanceled")).pipe(hb(1))),x(z(i),"callId",Ng.v4()),x(z(i),"_content",""),x(z(i),"_channelId",""),x(z(i),"_response",""),x(z(i),"calleeId",void 0),x(z(i),"logger",void 0),x(z(i),"getSession",void 0),i.calleeId=e,i.getSession=r,i.logger=o,i}Ga(t,e);var n=Ha(t);return eb(t,[{key:"channelId",get:function(){return this._channelId},set:function(e){this.state!==Sa.IDLE?this.info("set channelId only allow before invitation sent to remote"):(this.log("set channelId for %s",this.callId),this._channelId=e)}},{key:"content",get:function(){return this._content},set:function(e){this.log("set content for %s",this.callId),this._content=e}},{key:"response",get:function(){return this._response},set:function(e){throw new ca('Cannot set the "response" of the LocalInvitation instance.',Xc)}},{key:"send",value:function(){var e,t=this;if(this.state===Sa.SENT_TO_REMOTE||this.state===Sa.RECEIVED_BY_REMOTE)throw new da("The local invitation send failure. The call invitation has already been sent.",NB);if(this.isLocalInvitationEnd())throw new da("The local invitation send failure. The call invitation has ended.",ri);if(0<this._channelId.length&&!Ta(this._channelId))throw new ca("Illegal invitation channel ID",Xc);if(!Ta(this.calleeId))throw new ca("Illegal invitation callee user ID",Xc);if(8192<rh(this._content))throw new ca('The length of the "content" overflows. The number of bytes representing content must not exceed 8  1024 if encoded in UTF-8.',Xc);this.state=Sa.SENT_TO_REMOTE,yd(ma(N.mark((function n(){var r,o,i;return N.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.getSession().sendInvitationMessage({peerId:t.calleeId,callId:t.callId,extra:t._content,type:"CallInvite",channelId:t._channelId});case 2:if(r=n.sent,o=r.hasPeerReceived,i=r.hasReSent,!t.isLocalInvitationEnd()){n.next=7;break}throw new Ub("send invitation timeout");case 7:if(t.log("The local invitation has sent to the callee"),o||i){n.next=11;break}throw e=new qm({PEER_NOT_ONLINE:"The peer of the invitation is not online"});case 11:if(o){n.next=14;break}throw e=new qm({RESENT_AND_OFFLINE:"Resent and the peer of the invitation is not online"});case 14:case"end":return n.stop()}}),n)})))).pipe(Re((function(e){return e.pipe(sa((function(e){if(!(e instanceof qm))throw e})),Zd(2e3))})),Lb(3e4),ab((function(e){return Ab(e)&&t.warn("local invitation ack timed out"),ra(e)})),Kc(this.localInvitationEnd$)).subscribe({next:function(){t.state===Sa.RECEIVED_BY_REMOTE?t.log('The local invitation state is already "RECEIVED_BY_REMOTE", skipped emitting "LocalInvitationReceivedByPeer"'):t.state!==Sa.SENT_TO_REMOTE?t.log("The invitation has ended, skipped emitting the %s event","LocalInvitationReceivedByPeer"):(t.info("The peer received the local invitation %s.",t.callId),t.state=Sa.RECEIVED_BY_REMOTE,t.emit("LocalInvitationReceivedByPeer"),t.localInvitationEnd$.pipe(Lb(6e4),ab((function(e){return Ab(e)&&t.warn("local invitation expired"),ra(e)}))).subscribe({error:function(){t.state=Sa.FAILURE,t.emit("LocalInvitationFailure",Hf.INVITATION_EXPIRE)}}))},error:function(n){t.isLocalInvitationEnd()?t.log("The invitation has ended, skipped emitting the %s event","LocalInvitationFailure"):(t.state=Sa.FAILURE,Ab(n)&&e?"PEER_NOT_ONLINE"===e.code?t.emit("LocalInvitationFailure",Hf.PEER_OFFLINE):"RESENT_AND_OFFLINE"===e.code&&t.emit("LocalInvitationFailure",Hf.PEER_NO_RESPONSE):Ab(n)?t.emit("LocalInvitationFailure",Hf.PEER_NO_RESPONSE):"RtmInvalidStatusError"===n.name?t.emit("LocalInvitationFailure",Hf.NOT_LOGGEDIN):t.emit("LocalInvitationFailure",Hf.UNKNOWN))}})}},{key:"cancel",value:function(){if(this.isLocalInvitationEnd())throw new da("The local invitation cancel failure",ri);if(this.state===Sa.IDLE)throw new da("The local invitation has not been sent",MB);if(8192<rh(this._content))throw new ca('The length of the "content" overflows. The number of bytes representing content must not exceed 8  1024 if encoded in UTF-8.',Xc);this.getSession().sendInvitationMessage({callId:this.callId,peerId:this.calleeId,type:"CallCancel",channelId:this._channelId,extra:this._content}),this.state=Sa.CANCELED,this.emit("LocalInvitationCanceled")}},{key:"onAcceptReceived",value:function(e){if(this.isLocalInvitationEnd()&&this.state!==Sa.ACCEPTED_BY_REMOTE)this.log("The invitation has ended, skipped emitting the %s event","LocalInvitationAccepted");else{if(this.state===Sa.IDLE)throw new da("the local have not sent the invitation, how can remote accept it?");this.getSession().sendInvitationMessage({callId:this.callId,isAcceptAck:!0,type:"CallAccept",peerId:this.calleeId,channelId:this.channelId}),this.state===Sa.ACCEPTED_BY_REMOTE?this.log("already in ACCEPTED_BY_REMOTE state, ignore emit ACCEPTED_BY_REMOTE"):(this.state===Sa.SENT_TO_REMOTE&&(this.log("receive LocalInvitationAccepted before remote response to the invitation"),this.state=Sa.RECEIVED_BY_REMOTE,this.emit("LocalInvitationReceivedByPeer")),this.state=Sa.ACCEPTED_BY_REMOTE,this._response=e,this.emit("LocalInvitationAccepted",e))}}},{key:"onRefuseReceived",value:function(e){if(this.isLocalInvitationEnd())this.log("The invitation has ended, skipped emitting the %s event","LocalInvitationRefused");else{if(this.state===Sa.IDLE)throw new da("the local have not sent the invitation, how can remote refuse it?");this.state===Sa.SENT_TO_REMOTE&&(this.log("receive LocalInvitationRefused before remote response to the invitation"),this.state=Sa.RECEIVED_BY_REMOTE,this.emit("LocalInvitationReceivedByPeer")),this._response=e,this.state=Sa.REFUSED_BY_REMOTE,this.emit("LocalInvitationRefused",e)}}},{key:"isLocalInvitationEnd",value:function(){return[Sa.CANCELED,Sa.FAILURE,Sa.ACCEPTED_BY_REMOTE,Sa.REFUSED_BY_REMOTE].includes(this.state)}}]),t}(sc()),Da(Sd.prototype,"send",[Mc],Object.getOwnPropertyDescriptor(Sd.prototype,"send"),Sd.prototype),Da(Sd.prototype,"cancel",[Mc],Object.getOwnPropertyDescriptor(Sd.prototype,"cancel"),Sd.prototype),Sd),Hi=ta.RemoteInvitationFailureReason,Fb=ta.RemoteInvitationState,rF=function(e){function t(e){var r=e.invitationChannel,o=e.extraContent,i=e.callId,a=e.callerId,s=e.logger;e=e.getSession,va(this,t);var c=n.call(this,s,"RtmRemoteInvitation",!0);return x(z(c),"state",Fb.INVITATION_RECEIVED),x(z(c),"remoteInvitationEnd$",fb(Db(z(c),"RemoteInvitationCanceled"),Db(z(c),"RemoteInvitationRefused"),Db(z(c),"RemoteInvitationAccepted"),Db(z(c),"RemoteInvitationFailure")).pipe(hb(1))),x(z(c),"callerId",void 0),x(z(c),"callId",void 0),x(z(c),"_getSession",void 0),x(z(c),"logger",void 0),x(z(c),"_content",void 0),x(z(c),"_channelId",void 0),x(z(c),"_response",""),c._channelId=r,c._content=o,c.callId=i,c.callerId=a,c._getSession=e,c.logger=s,c.remoteInvitationEnd$.pipe(Lb(6e4),ab((function(e){return Ab(e)&&c.warn("Remote invitation expired"),ra(e)}))).subscribe({error:function(){c.state=Fb.FAILURE,c.emit("RemoteInvitationFailure",Hi.INVITATION_EXPIRE)}}),c}Ga(t,e);var n=Ha(t);return eb(t,[{key:"channelId",get:function(){return this._channelId},set:function(e){throw new ca('Cannot set the "response" of the RemoteInvitation instance.',Xc)}},{key:"content",get:function(){return this._content},set:function(e){throw new ca('Cannot set the "content" of the RemoteInvitation instance.',Xc)}},{key:"response",get:function(){return this._response},set:function(e){this._response=e}},{key:"accept",value:function(){var e,t=this;if(this.isRemoteInvitationEnd())throw new da("The local invitation has ended. Cannot accept.",ri);if(this.state===Fb.ACCEPT_SENT_TO_LOCAL)throw new da("The remote invitation is accepting. Cannot do the operation.",Rr);if(8192<rh(this._response))throw new ca('The length of the "response" overflows. The number of bytes representing content must not exceed 8  1024 if encoded in UTF-8.',Xc);this.state=Fb.ACCEPT_SENT_TO_LOCAL,Jb(Qe(1e3).pipe(Cb((function(){return yd(ma(N.mark((function e(){return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t._getSession().sendInvitationMessage({peerId:t.callerId,callId:t.callId,extra:t.response,type:"CallAccept",isAcceptAck:!1,channelId:t.channelId}));case 1:case"end":return e.stop()}}),e)}))))})),yb((function(t){return e=t.hasPeerReceived})),hb(1)),Db(this,"RemoteInvitationAccepted")).pipe(Lb(5e3),Kc(this.remoteInvitationEnd$)).subscribe({error:function(n){if(t.logError(n),t.state=Fb.FAILURE,Ab(n))switch(e){case void 0:case!0:return void t.emit("RemoteInvitationFailure",Hi.ACCEPT_FAILURE);case!1:return void t.emit("RemoteInvitationFailure",Hi.PEER_OFFLINE)}t.emit("RemoteInvitationFailure",Hi.UNKNOWN)}})}},{key:"refuse",value:function(){if(this.state===Fb.ACCEPT_SENT_TO_LOCAL)throw new da("The remote invitation is accepting. Cannot do the operation.",Rr);if(this.isRemoteInvitationEnd())throw new da("The invitation is end. Cannot refuse",ri);if(8192<rh(this._response))throw new ca('The length of the "response" overflows. The number of bytes representing content must not exceed 8  1024 if encoded in UTF-8.',Xc);this._getSession().sendInvitationMessage({peerId:this.callerId,callId:this.callId,extra:this.response,type:"CallReject",channelId:this.channelId}),this.state=Fb.REFUSED,this.emit("RemoteInvitationRefused")}},{key:"onCancelReceived",value:function(e){this.isRemoteInvitationEnd()?this.log("The invitation has ended, skipped emitting the %s event","RemoteInvitationCanceled"):(this.state===Fb.ACCEPT_SENT_TO_LOCAL&&this.log("caller canceled before receive accept"),this._content=e,this.state=Fb.CANCELED,this.emit("RemoteInvitationCanceled",e))}},{key:"onAcceptAckReceived",value:function(){this.state!==Fb.ACCEPT_SENT_TO_LOCAL?this.log("The invitation has ended, skipped emitting the %s event","ori:".concat(this.state,", to: RemoteInvitationAccepted")):(this.state=Fb.ACCEPTED,this.emit("RemoteInvitationAccepted"))}},{key:"isRemoteInvitationEnd",value:function(){return[Fb.ACCEPTED,Fb.REFUSED,Fb.CANCELED,Fb.FAILURE].includes(this.state)}}]),t}(sc()),sF=function(e){function t(e,r){va(this,t);var o=n.call(this,r,"InvitationManager");return x(z(o),"getSession",void 0),x(z(o),"invitationDispatcher",new Ba.EventEmitter),x(z(o),"outgoingLocalInvitations",new Map),x(z(o),"receivedRemoteInvitations",new Wc(void 0,{maxlen:1e4})),x(z(o),"logger",void 0),o.getSession=fo(e),o.logger=r,o.invitationDispatcher.on("remoteInvitationToManager",(function(e){var t=e.callId,n=e.extra,i=e.callerId;e=e.channelId,o.receivedRemoteInvitations.has(t)||((n=new rF({callerId:i,callId:t,getSession:o.getSession,logger:r,extraContent:n,invitationChannel:e})).remoteInvitationEnd$.subscribe((function(){o.receivedRemoteInvitations.delete(t)})),o.receivedRemoteInvitations.set(t,n),o.emit("remoteInvitationInstance",n))})),o.invitationDispatcher.on("acceptAckToRemoteInvitation",(function(e){(e=o.receivedRemoteInvitations.get(e.callId))&&e.onAcceptAckReceived()})),o.invitationDispatcher.on("cancelToRemoteInvitation",(function(e){var t=e.extra;(e=o.receivedRemoteInvitations.get(e.callId))&&e.onCancelReceived(t)})),o.invitationDispatcher.on("acceptToLocalInvitation",(function(e){var t=e.extra;(e=o.outgoingLocalInvitations.get(e.callId))&&e.onAcceptReceived(t)})),o.invitationDispatcher.on("refuseToLocalInvitation",(function(e){var t=e.extra;(e=o.outgoingLocalInvitations.get(e.callId))&&e.onRefuseReceived(t)})),o}Ga(t,e);var n=Ha(t);return eb(t,[{key:"invitationMessageHandler",value:function(e){var t=e.body,n=t.callId,r=t.extra;r=void 0===r?"":r;var o=t.type,i=void 0===(t=t.channel)?"":t,a=e.type;switch(t=e.peerId,e=e.serverReceivedTs,a){case"CallAccept":"ack"===o?this.invitationDispatcher.emit("acceptAckToRemoteInvitation",{callId:n}):"request"===o&&this.invitationDispatcher.emit("acceptToLocalInvitation",{callId:n,extra:r});break;case"CallInvite":this.invitationDispatcher.emit("remoteInvitationToManager",{callId:n,callerId:t,extra:r,channelId:i});break;case"CallCancel":if("0"===n){n="".concat("AgoraRTMLegacyEndcallCompatibleMessagePrefix","_").concat(i,"_").concat(r),this.getSession().emit("peerTextMessage",{peerId:t,properties:{serverReceivedTs:e},text:n});break}this.invitationDispatcher.emit("cancelToRemoteInvitation",{callId:n,extra:r});break;case"CallReject":this.invitationDispatcher.emit("refuseToLocalInvitation",{callId:n,extra:r});break;default:throw Rn("invitationType",a)}}},{key:"genLocalInvitation",value:function(e){var t=this,n=new qF(e,this.getSession,this.logger);return n.localInvitationEnd$.subscribe((function(){t.outgoingLocalInvitations.delete(n.callId)})),this.outgoingLocalInvitations.set(n.callId,n),n}}]),t}(sc()),tF=function(e,t,n){var r=!0,o=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return Gb(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),JD(e,t,{leading:r,maxWait:t,trailing:o})},Qb,If;!function(e){e[e.JOINED=0]="JOINED",e[e.LEFT=1]="LEFT"}(If||(If={}));var Ii=ta.ConnectionState,uF=(Qb=function(e){function t(e,n,o,i){va(this,t);var a=r.call(this,i,"RtmChannel",!0);return x(z(a),"onMemberCountUpdated",tF((function(e){e!==a.memberCount&&(a.memberCount=e,a.emit("MemberCountUpdated",e))}),1e3)),x(z(a),"getSession",void 0),x(z(a),"memberCount",0),x(z(a),"joinState","LEFT"),x(z(a),"joinPromise",void 0),x(z(a),"memberJoinedLru",new Wc(void 0,{maxlen:1e4})),x(z(a),"memberLeftLru",new Wc(void 0,{maxlen:1e4})),x(z(a),"memberJoinStateLru",new Wc(void 0,{maxlen:1e4})),x(z(a),"attributesSeqLru",new Wc(void 0,{maxlen:1e4})),x(z(a),"channelId",void 0),x(z(a),"client",void 0),x(z(a),"onChannelMemberCountUpdated",(function(e,t){a.channelId===e&&a.onMemberCountUpdated(t)})),x(z(a),"onLogout",(function(){try{a.clearChannel(a.getSession())}catch(e){}})),x(z(a),"onAttributesUpdated",(function(e){var t=e.channelId,n=e.attributeMaps,r=e.seq;e=e.instance.toString();var o=a.attributesSeqLru.get(e);if((!o||r.greaterThan(o))&&(a.attributesSeqLru.set(e,r),t===a.channelId)){for(t={},r=0;r<n.length;r++){var i=n[r];e=i.key,o=i.ms;var s=i.value;if(i=i.origin,"string"!=typeof e||!P.isLong(o)||"string"!=typeof s||!Ta(i))break;t[e]={value:s,lastUpdateUserId:i,lastUpdateTs:o.toNumber()}}a.emit("AttributesUpdated",t)}})),x(z(a),"onChannelTextMessage",(function(e){var t=e.memberId,n=e.text,r=e.properties;e.channelId===a.channelId&&a.emit("ChannelMessage",{text:n,messageType:ta.MessageType.TEXT},t,r)})),x(z(a),"onChannelRawMessage",(function(e){var t=e.desc,n=e.raw,r=e.memberId,o=e.properties;e.channelId===a.channelId&&a.emit("ChannelMessage",{messageType:ta.MessageType.RAW,rawMessage:n,description:t},r,o)})),x(z(a),"onMemberNotice",(function(e){var t=e.memberId,n=e.type,r=e.size;if(e.channelId===a.channelId){var o=e.instance.toString();e=e.seq.toString();var i={MemberLeft:a.memberLeftLru,MemberJoined:a.memberJoinedLru,MemberCountUpdated:void 0}[n];if(i){if(i.has(o+e))return void a.log("received duplicated %s notice (seq: %s), channel '%s', member '%s'",n,e,La(a.channelId),La(t||""));if(i.set(o+e,void 0),"string"!=typeof t)return;if(t!==a.getSession().context.uid){if((o=a.memberJoinStateLru.get(t))===If.JOINED&&"MemberJoined"===n)return void a.log("received duplicated %s state (seq: %s), channel '%s', member '%s'",n,e,La(a.channelId),La(t||""));if(o===If.LEFT&&"MemberLeft"===n)return void a.log("received duplicated %s state (seq: %s), channel '%s', member '%s'",n,e,La(a.channelId),La(t||""))}a.memberJoinStateLru.set(t,"MemberJoined"===n?If.JOINED:If.LEFT)}a.info("Channel %s - %s, memberId: %s",n,La(a.channelId),"MemberCountUpdated"===n?"[unknown]":La(t||"")),o=t===a.getSession().context.uid,"MemberLeft"===n&&Ta(t)||"MemberJoined"===n&&Ta(t)?(o||a.emit(n,t),a.onMemberCountUpdated(r)):"MemberCountUpdated"===n&&"number"==typeof r&&a.onMemberCountUpdated(r)}})),a.getSession=fo(n),a.channelId=e,a.client=o,a.info("A channel created, id %s",La(e)),a}Ga(t,e);var n,r=Ha(t);return eb(t,[{key:"join",value:(n=ma(N.mark((function e(){var t,n,r,o,i,a,s,c=this;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,t=this.getSession(),e.next=7;break;case 4:throw e.prev=4,e.t0=e.catch(0),new da("The client is not logged in. Cannot do the operation",Wr);case 7:if(e.prev=7,Ta(this.channelId)){e.next=10;break}throw new ca(["The %s in the arguments is invalid","channelId"],OB);case 10:if("LEFT"===this.joinState){e.next=13;break}throw bb("ChnJoin",{cname:this.channelId,lts:P.fromNumber(Date.now()),userId:t.context.uid,elapse:Xa(t.startTime),errCode:Vr,sid:sb(t.instanceId)},null!==(o=this.client.context.config.enableCloudProxy)&&void 0!==o&&o),new da("The channel has joined. Cannot rejoin",Vr);case 13:if(!t.usedChannelIds.includes(this.channelId)){e.next=16;break}throw bb("ChnJoin",{cname:this.channelId,lts:P.fromNumber(Date.now()),userId:t.context.uid,elapse:Xa(t.startTime),errCode:Xr,sid:sb(t.instanceId)},null!==(i=this.client.context.config.enableCloudProxy)&&void 0!==i&&i),new da("A channel of the same channel ID has already joined. Cannot rejoin",Xr);case 16:if(!(20<=t.usedChannelIds.length)){e.next=19;break}throw bb("ChnJoin",{cname:this.channelId,lts:P.fromNumber(Date.now()),userId:t.context.uid,elapse:Xa(t.startTime),errCode:Ur,sid:sb(t.instanceId)},null!==(a=this.client.context.config.enableCloudProxy)&&void 0!==a&&a),new ic("The joined channels has exceeded the limit of 20",Ur);case 19:return bb("ChnJoin",{cname:this.channelId,lts:P.fromNumber(Date.now()),userId:t.context.uid,elapse:Xa(t.startTime),errCode:0,sid:sb(t.instanceId)},null!==(n=this.client.context.config.enableCloudProxy)&&void 0!==n&&n),this.log("Joining the channel %s",La(this.channelId)),this.joinState="JOINING",t.usedChannelIds.push(this.channelId),this.joinPromise=t.requestChannelJoin(this.channelId).then((function(){c.joinState="JOINED"})),e.next=26,this.joinPromise;case 26:bb("ChnJoinRes",{cname:this.channelId,lts:P.fromNumber(Date.now()),elapse:Xa(t.startTime),errCode:0,sid:sb(t.instanceId),serverErrCode:0,userId:t.context.uid},null!==(r=this.client.context.config.enableCloudProxy)&&void 0!==r&&r),this.info("The channel %s joined successfully",La(this.channelId)),t.on("channelTextMessage",this.onChannelTextMessage),t.on("channelRawMessage",this.onChannelRawMessage),t.on("memberNotice",this.onMemberNotice),t.on("channelAttributesUpdated",this.onAttributesUpdated),this.client.internalEmitter.on("channelMemberCountUpdated",this.onChannelMemberCountUpdated),this.client.internalEmitter.once("LOGOUT",this.onLogout),e.next=46;break;case 36:if(e.prev=36,e.t1=e.catch(7),"JOINING"===this.joinState&&(this.joinState="LEFT"),this.logError(e.t1),!Na(e.t1)){e.next=42;break}throw e.t1;case 42:if(!Ab(e.t1)){e.next=45;break}throw bb("ChnJoinRes",{cname:this.channelId,lts:P.fromNumber(Date.now()),elapse:Xa(t.startTime),errCode:Tr,sid:sb(t.instanceId),serverErrCode:0,userId:t.context.uid},null!==(s=this.client.context.config.enableCloudProxy)&&void 0!==s&&s),new Ub(["Join channel %s timed out",La(this.channelId)],Tr);case 45:throw new ve(["The channel %s join failure",La(this.channelId)],{code:Sr,originalError:e.t1});case 46:case"end":return e.stop()}}),e,this,[[0,4],[7,36]])}))),function(){return n.apply(this,arguments)})},{key:"leave",value:function(){var e=ma(N.mark((function e(){var t,n,r,o;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=this.getSession(),e.next=7;break;case 4:throw e.prev=4,e.t0=e.catch(0),new da("The client is not logged in. Cannot do the operation",QB);case 7:if("LEFT"!==this.joinState){e.next=9;break}throw new da("The channel does not join. Cannot do the operation",PB);case 9:return e.prev=9,n.requestChannelLeave(this.channelId),e.next=13,this.clearChannel(n);case 13:e.next=24;break;case 15:if(e.prev=15,e.t1=e.catch(9),this.logError(e.t1),!Na(e.t1)){e.next=22;break}throw void 0===e.t1.code&&(e.t1.code=Zr),bb("ChnLeave",{cname:this.channelId,lts:P.fromNumber(Date.now()),elapse:Xa(n.startTime),errCode:Zr,sid:sb(n.instanceId),userId:n.context.uid},null!==(o=this.client.context.config.enableCloudProxy)&&void 0!==o&&o),e.t1;case 22:throw bb("ChnLeave",{cname:this.channelId,lts:P.fromNumber(Date.now()),elapse:Xa(n.startTime),errCode:Yr,sid:sb(n.instanceId),userId:n.context.uid},null!==(r=this.client.context.config.enableCloudProxy)&&void 0!==r&&r),new ve("The channel leave failure",{code:Yr,originalError:e.t1});case 24:bb("ChnLeave",{cname:this.channelId,lts:P.fromNumber(Date.now()),elapse:Xa(n.startTime),errCode:0,sid:sb(n.instanceId),userId:n.context.uid},null!==(t=this.client.context.config.enableCloudProxy)&&void 0!==t&&t);case 25:case"end":return e.stop()}}),e,this,[[0,4],[9,15]])})));return function(){return e.apply(this,arguments)}}()},{key:"sendMessage",value:function(){var e=ma(N.mark((function e(t){var n,r=this;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Xn(t,Il),this.client.connectionState!==Ii.CONNECTED||"JOINED"===this.joinState){e.next=3;break}throw new da("The channel does not join. Cannot do the operation",EB);case 3:if(this.client.connectionState!==Ii.RECONNECTING){e.next=8;break}return n=Date.now(),e.next=7,new Promise((function(e,o){var i,a=(i=ma(N.mark((function i(){var a;return N.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return a=Date.now()-n,i.prev=1,i.next=4,ph({message:t,peerId:r.channelId,toPeer:!1,session:r.getSession(),errorCodes:{NOT_LOGGED_IN:Jl,TOO_OFTEN:Nr},diff:a,logger:r.logger});case 4:e(),i.next=12;break;case 7:i.prev=7,i.t0=i.catch(1),Ab(i.t0)&&o(new Ub(we(r.name,"sendMessageToPeer",1e4),Hl)),Na(i.t0)&&o(i.t0),o(new Ja("Channel message send failure",{code:qi,originalError:i.t0}));case 12:return i.prev=12,clearTimeout(s),i.finish(12);case 15:case"end":return i.stop()}}),i,null,[[1,7,12,15]])}))),function(){return i.apply(this,arguments)});r.client.internalEmitter.once("RECONNECTED",a);var s=setTimeout((function(){r.client.internalEmitter.off("RECONNECTED",a),o(new Ub(we(r.name,"sendMessageToPeer",1e4),Hl))}),9e3)}));case 7:return e.abrupt("return");case 8:if(this.client.connectionState===Ii.CONNECTED){e.next=10;break}throw new da("The client is not logged in. Cannot do the operation",Jl);case 10:return e.prev=10,e.next=13,ph({message:t,peerId:this.channelId,toPeer:!1,session:this.getSession(),errorCodes:{NOT_LOGGED_IN:Jl,TOO_OFTEN:Nr},diff:0,logger:this.logger});case 13:e.next=23;break;case 15:if(e.prev=15,e.t0=e.catch(10),!Ab(e.t0)){e.next=19;break}throw new Ub(we(this.name,"sendMessage",1e4),Hl);case 19:if(!Na(e.t0)){e.next=22;break}throw this.logError(e.t0),e.t0;case 22:throw new ve("The channel message send failure",qi);case 23:case"end":return e.stop()}}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getMembers",value:function(){var e=ma(N.mark((function e(){var t,n;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.client.connectionState===Ii.CONNECTED){e.next=3;break}throw new da("The client is not logged in. Cannot do the operation",LB);case 3:if("JOINED"===this.joinState){e.next=5;break}throw new da("The channel does not join. Cannot do the operation",KB);case 5:return t=this.getSession().requestChannelMemberList(this.channelId),e.next=8,t.pipe(Ea((function(e){return e.memberInfos.map((function(e){return e.account}))}))).toPromise();case 8:return n=e.sent,this.info("Channel %s - get members success, %o",La(this.channelId),n.map(La)),e.abrupt("return",n);case 13:if(e.prev=13,e.t0=e.catch(0),!Na(e.t0)){e.next=18;break}throw this.logError(e.t0),e.t0;case 18:throw new ve("The channel members get failure",IB);case 19:case"end":return e.stop()}}),e,this,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"clearChannel",value:function(){var e=ma(N.mark((function e(t){var n=this;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.emit("channelLeft",this.channelId),"JOINING"!==this.joinState){e.next=4;break}return e.next=4,this.joinPromise;case 4:this.joinState="LEFT",this.memberLeftLru.empty(),this.memberJoinedLru.empty(),this.attributesSeqLru.empty(),this.memberJoinStateLru.empty(),this.memberCount=0,t.removeListener("channelTextMessage",this.onChannelTextMessage),t.removeListener("channelRawMessage",this.onChannelRawMessage),t.removeListener("memberNotice",this.onMemberNotice),t.removeListener("channelAttributesUpdated",this.onAttributesUpdated),this.client.internalEmitter.removeListener("channelMemberCountUpdated",this.onChannelMemberCountUpdated),this.client.internalEmitter.removeListener("LOGOUT",this.onLogout),t.usedChannelIds=t.usedChannelIds.filter((function(e){return e!==n.channelId}));case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(sc()),Da(Qb.prototype,"join",[Mc],Object.getOwnPropertyDescriptor(Qb.prototype,"join"),Qb.prototype),Da(Qb.prototype,"leave",[Mc],Object.getOwnPropertyDescriptor(Qb.prototype,"leave"),Qb.prototype),Da(Qb.prototype,"sendMessage",[Mc],Object.getOwnPropertyDescriptor(Qb.prototype,"sendMessage"),Qb.prototype),Da(Qb.prototype,"getMembers",[jb],Object.getOwnPropertyDescriptor(Qb.prototype,"getMembers"),Qb.prototype),Qb),W,Rb=ta.ConnectionChangeReason,oa=ta.ConnectionState,Vt={DISCONNECTED:1,CONNECTING:2,CONNECTED:3,RECONNECTING:4,ABORTED:5},vF={LOGIN:1,LOGIN_SUCCESS:2,LOGIN_FAILURE:3,LOGIN_TIMEOUT:4,INTERRUPTED:5,LOGOUT:6,BANNED_BY_SERVER:7,REMOTE_LOGIN:8,TOKEN_EXPIRED:9},wF=(W=function(e){function t(e,n,o,i){va(this,t);var a=r.call(this,n,"RtmClient",!0);return x(z(a),"connectionState",oa.DISCONNECTED),x(z(a),"internalEmitter",new Ba),x(z(a),"context",void 0),x(z(a),"attributes",{}),x(z(a),"loginPromise",void 0),x(z(a),"attributeDrafts",new Set),x(z(a),"session",void 0),x(z(a),"lastLoginTime",void 0),x(z(a),"reconnId",0),x(z(a),"channelAttributesCacheLru",new Wc(void 0,{maxlen:1e4})),x(z(a),"invitationManager",void 0),x(z(a),"subscribedPeerStatusCache",{}),x(z(a),"pendingPeerStatusSubCount",0),x(z(a),"peerStatusSeqLru",new Wc(void 0,{maxlen:1e4})),x(z(a),"peerUnreachableTimers",{}),x(z(a),"setParameters",void 0),x(z(a),"updateConfig",void 0),x(z(a),"blacklistedIP",{}),x(z(a),"TokenPrivilegeWillExpireHandler",(function(){a.emit("TokenPrivilegeWillExpire")})),x(z(a),"userDropHandler",(function(e){if(a.connectionState!==oa.ABORTED)switch(e){case 2:a.logError("Server banned because of token is expired"),a.onConnectionStateChanged(oa.ABORTED,Rb.TOKEN_EXPIRED),a.emit("TokenExpired");break;case 11:a.logError("Kicked off by remote session"),a.onConnectionStateChanged(oa.ABORTED,Rb.REMOTE_LOGIN);break;case 14:case 15:case 16:a.logError("Server banned because of illegal ".concat({14:"User ID",15:"IP",16:"Channel Name"}[e])),a.onConnectionStateChanged(oa.ABORTED,Rb.BANNED_BY_SERVER);break;default:a.logError("User kicked off for unknown code: ".concat(e)),a.onConnectionStateChanged(oa.ABORTED,Rb.INTERRUPTED)}})),a.context=new xE(e,o,n),a.context.config=o,a.setParameters=i.bind(z(a)),a.updateConfig=i.bind(z(a)),a.invitationManager=new sF((function(){return a.session}),n),a.invitationManager.on("remoteInvitationInstance",(function(e){a.emit("RemoteInvitationReceived",e)})),a.setMaxListeners(512),a.internalEmitter.setMaxListeners(512),a}Ga(t,e);var n,r=Ha(t);return eb(t,[{key:"renewToken",value:(n=ma(N.mark((function e(t){var n,r,o,i,a=this;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t&&0!==t.length){e.next=2;break}throw new ca("Invalid argument",XB);case 2:if(this.connectionState!==oa.ABORTED){e.next=5;break}return e.next=5,new Promise((function(){}));case 5:if(this.connectionState===oa.CONNECTED||this.connectionState===oa.RECONNECTING){e.next=7;break}throw new da("The client is not logged in",hs);case 7:if(void 0!==this.session){e.next=9;break}throw new mb({SESSION_NOT_FOUND:"Failed to get session of the client"});case 9:return e.prev=9,n=this.context.token,this.context.token=t,e.next=14,this.session.connection.apClient.getApEdgeInfo$(!1).pipe($d((function(){return Error("No available edge address to connect")})),Re((function(e){return e.pipe(sa((function(e){if(Na(e))throw e})),Zd(2500),hb(4))})),hb(1),Lb(2e4),ab((function(e){return Ab(e)&&a.warn("renewToken timed out"),ra(e)}))).toPromise();case 14:r=e.sent,o=r.ticket,e.next=27;break;case 18:if(e.prev=18,e.t0=e.catch(9),this.context.token=n,e.t0.code!==as&&e.t0.code!==bs){e.next=23;break}throw new Bf("Invalid token",ZB);case 23:if(e.t0.code!==ti){e.next=25;break}throw new Bf("The token expired",YB);case 25:if(!Ab(e.t0)){e.next=27;break}throw new Ub("Renew token timed out",Ml);case 27:i=this.session,this.session.requestUpdateEdgeTicket(o).toPromise().then((function(e){if(0!==e.code)throw new Ja(["RenewToken failure. The response code is %d",e.code],Ml);i.curLoginSockets.filter((function(e){return void 0!==e})).forEach((function(e){return e.ticket=o}))}));case 29:case"end":return e.stop()}}),e,this,[[9,18]])}))),function(e){return n.apply(this,arguments)})},{key:"queryPeersOnlineStatus",value:function(){var e=ma(N.mark((function e(t){var n,r,o=this;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectionState===oa.CONNECTED){e.next=2;break}throw new da("The client is not logged in",WB);case 2:if(void 0!==this.session){e.next=4;break}throw new mb({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:if(!(!Array.isArray(t)||0===t.length||t.some((function(e){return!Ta(e)}))||256<t.length)){e.next=6;break}throw new ca("invalid arguments",gs);case 6:return e.next=8,this.session.requestPeersOnlineStatus(t).toPromise();case 8:return n=e.sent,r=md(tl(n.userInfos,"account"),(function(e){return!!e.ts})),Object.keys(r).forEach((function(e){if(e in o.subscribedPeerStatusCache&&o.subscribedPeerStatusCache[e]!==ta.PeerOnlineState.UNREACHABLE){var t=r[e]?ta.PeerOnlineState.ONLINE:ta.PeerOnlineState.OFFLINE;o.emit("PeersOnlineStatusChanged",x({},e,t)),o.subscribedPeerStatusCache[e]=t}})),e.abrupt("return",r);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getChannelMemberCount",value:function(){var e=ma(N.mark((function e(t){var n,r,o,i,a,s,c,l,u;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectionState===oa.CONNECTED){e.next=2;break}throw new da("The client is not logged in",HB);case 2:if(void 0!==this.session){e.next=4;break}throw new mb({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:if(Array.isArray(t)&&t.every((function(e){return"string"==typeof e}))&&0!==t.length){e.next=6;break}throw new ca("Invalid arguments: channelIds",Pr);case 6:if(!(32<t.length)){e.next=8;break}throw new ca("getChannelMemberCount exceed limit of 32 channelIds",GB);case 8:n=0;case 9:if(!(n<t.length)){e.next=16;break}if(Ta(r=t[n])){e.next=13;break}throw new ca(["getChannelMemberCount channel id %s is invalid",r],Pr);case 13:n++,e.next=9;break;case 16:return e.next=18,this.session.requestGetChannelMemberCount(t).toPromise();case 18:for(o=e.sent,i=o.groupInfos,a={},s=0;s<i.length;s++)c=i[s],l=c.group,u=c.memberCount,Ta(l)&&"number"==typeof u&&(this.internalEmitter.emit("channelMemberCountUpdated",l,u),a[l]=u);return e.abrupt("return",a);case 23:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setLocalUserAttributes",value:function(){var e=ma(N.mark((function e(t){var n,r;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ag({attributes:t,maxAttrValueSize:8192,maxAttrsCount:32,maxTotalSize:16384}),this.connectionState===oa.CONNECTED){e.next=3;break}throw new da("The client is not logged in",qc);case 3:if(void 0!==this.session){e.next=5;break}throw new mb({SESSION_NOT_FOUND:"Failed to get session of the client"});case 5:return n=this.session.requestSetLocalUserAttributes(t).toPromise(),r={attribute:t,promise:n},this.attributeDrafts.add(r),e.prev=8,e.next=11,n;case 11:this.attributes=t,e.next=19;break;case 14:if(e.prev=14,e.t0=e.catch(8),!Na(e.t0)){e.next=18;break}throw e.t0;case 18:throw new ca("arguments is not valid",gb);case 19:return e.prev=19,this.attributeDrafts.delete(r),e.finish(19);case 22:case"end":return e.stop()}}),e,this,[[8,14,19,22]])})));return function(t){return e.apply(this,arguments)}}()},{key:"setChannelAttributes",value:function(){var e=ma(N.mark((function e(t,n){var r,o,i,a,s=arguments;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(2<s.length&&void 0!==s[2]?s[2]:{}).enableNotificationToChannelMembers,o=void 0!==r&&r,ag({attributes:n,maxAttrValueSize:8192,maxAttrsCount:32,maxTotalSize:32768}),this.connectionState===oa.CONNECTED){e.next=4;break}throw new da("The client is not logged in",qc);case 4:if(void 0!==this.session){e.next=6;break}throw new mb({SESSION_NOT_FOUND:"Failed to get session of the client"});case 6:return i=this.session.requestSetChannelAttributes(t,n,o).toPromise(),e.prev=7,e.next=10,i;case 10:a=md(n,(function(e){return new Blob([e]).size})),this.channelAttributesCacheLru.set(t,a),e.next=19;break;case 14:if(e.prev=14,e.t0=e.catch(7),!Na(e.t0)){e.next=18;break}throw e.t0;case 18:throw new ca("arguments is not valid",gb);case 19:case"end":return e.stop()}}),e,this,[[7,14]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"addOrUpdateLocalUserAttributes",value:function(){var e=ma(N.mark((function e(t){var n,r,o;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Wa(Wa({},this.attributes),t),ag({attributes:t,maxAttrValueSize:8192,maxAttrsCount:32,maxTotalSize:16384}),ag({attributes:n,maxAttrValueSize:8192,maxAttrsCount:32,maxTotalSize:16384}),this.connectionState===oa.CONNECTED){e.next=5;break}throw new da("The client is not logged in",qc);case 5:if(void 0!==this.session){e.next=7;break}throw new mb({SESSION_NOT_FOUND:"Failed to get session of the client"});case 7:return r=this.session.requestAddOrUpdateLocalUserAttributes(t).toPromise(),o={attribute:n,promise:r},this.attributeDrafts.add(o),e.prev=10,e.next=13,r;case 13:this.attributes=n,e.next=21;break;case 16:if(e.prev=16,e.t0=e.catch(10),!Na(e.t0)){e.next=20;break}throw e.t0;case 20:throw new ca("arguments is not valid",gs);case 21:return e.prev=21,this.attributeDrafts.delete(o),e.finish(21);case 24:case"end":return e.stop()}}),e,this,[[10,16,21,24]])})));return function(t){return e.apply(this,arguments)}}()},{key:"addOrUpdateChannelAttributes",value:function(){var e=ma(N.mark((function e(t,n){var r,o,i,a,s,c,l=arguments;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(2<l.length&&void 0!==l[2]?l[2]:{}).enableNotificationToChannelMembers,o=void 0!==r&&r,i=this.channelAttributesCacheLru.get(t,{}),a=md(n,(function(e){return new Blob([e]).size})),s=Wa(Wa({},i),a),ag({attributes:n,attrSizeMap:s,maxAttrValueSize:8192,maxAttrsCount:32,maxTotalSize:32768}),this.connectionState===oa.CONNECTED){e.next=7;break}throw new da("The client is not logged in",qc);case 7:if(void 0!==this.session){e.next=9;break}throw new mb({SESSION_NOT_FOUND:"Failed to get session of the client"});case 9:return c=this.session.requestAddOrUpdateChannelAttributes(t,n,o).toPromise(),e.prev=10,e.next=13,c;case 13:this.channelAttributesCacheLru.set(t,s),e.next=21;break;case 16:if(e.prev=16,e.t0=e.catch(10),!Na(e.t0)){e.next=20;break}throw e.t0;case 20:throw new ca("arguments is not valid",gb);case 21:case"end":return e.stop()}}),e,this,[[10,16]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"deleteLocalUserAttributesByKeys",value:function(){var e=ma(N.mark((function e(t){var n,r,o,i;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Array.isArray(t)&&0!==t.length&&!t.some((function(e){return 0===e.length}))){e.next=2;break}throw new da("arguments is not valid",gb);case 2:if(this.connectionState===oa.CONNECTED){e.next=4;break}throw new da("The client is not logged in",qc);case 4:if(void 0!==this.session){e.next=6;break}throw new mb({SESSION_NOT_FOUND:"Failed to get session of the client"});case 6:return n=this.session.requestDeleteLocalUserAttributesByKeys(t).toPromise(),r={attribute:ql(this.attributes,t),promise:n},this.attributeDrafts.add(r),e.prev=9,e.next=12,n;case 12:for(o=0;o<t.length;o++)i=t[o],delete this.attributes[i];e.next=20;break;case 15:if(e.prev=15,e.t0=e.catch(9),!Na(e.t0)){e.next=19;break}throw e.t0;case 19:throw new ca("arguments is not valid",gb);case 20:return e.prev=20,this.attributeDrafts.delete(r),e.finish(20);case 23:case"end":return e.stop()}}),e,this,[[9,15,20,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteChannelAttributesByKeys",value:function(){var e=ma(N.mark((function e(t,n){var r,o,i,a,s,c,l=arguments;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(2<l.length&&void 0!==l[2]?l[2]:{}).enableNotificationToChannelMembers,o=void 0!==r&&r,Array.isArray(n)&&0!==n.length&&Ta(t)&&!n.some((function(e){return 0===e.length||512<e.length}))){e.next=3;break}throw new da("arguments is not valid",gb);case 3:if(this.connectionState===oa.CONNECTED){e.next=5;break}throw new da("The client is not logged in",qc);case 5:if(void 0!==this.session){e.next=7;break}throw new mb({SESSION_NOT_FOUND:"Failed to get session of the client"});case 7:return i=this.session.requestDeleteChannelAttributesByKeys(t,n,o).toPromise(),e.prev=8,e.next=11,i;case 11:if(a=this.channelAttributesCacheLru.get(t))for(s=0;s<n.length;s++)c=n[s],delete a[c];e.next=20;break;case 15:if(e.prev=15,e.t0=e.catch(8),!Na(e.t0)){e.next=19;break}throw e.t0;case 19:throw new ca("arguments is not valid",gb);case 20:case"end":return e.stop()}}),e,this,[[8,15]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"clearLocalUserAttributes",value:function(){var e=ma(N.mark((function e(){var t,n;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectionState===oa.CONNECTED){e.next=2;break}throw new da("The client is not logged in",qc);case 2:if(void 0!==this.session){e.next=4;break}throw new mb({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:return t=this.session.requestClearLocalUserAttributes().toPromise(),n={attribute:{},promise:t},this.attributeDrafts.add(n),e.prev=7,e.next=10,t;case 10:this.attributes={},e.next=18;break;case 13:if(e.prev=13,e.t0=e.catch(7),!Na(e.t0)){e.next=17;break}throw e.t0;case 17:throw new ca("arguments is not valid",gb);case 18:return e.prev=18,this.attributeDrafts.delete(n),e.finish(18);case 21:case"end":return e.stop()}}),e,this,[[7,13,18,21]])})));return function(){return e.apply(this,arguments)}}()},{key:"clearChannelAttributes",value:function(){var e=ma(N.mark((function e(t){var n,r,o,i=arguments;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(1<i.length&&void 0!==i[1]?i[1]:{}).enableNotificationToChannelMembers,r=void 0!==n&&n,this.connectionState===oa.CONNECTED){e.next=3;break}throw new da("The client is not logged in",qc);case 3:if(void 0!==this.session){e.next=5;break}throw new mb({SESSION_NOT_FOUND:"Failed to get session of the client"});case 5:return o=this.session.requestClearChannelAttributes(t,r).toPromise(),e.prev=6,e.next=9,o;case 9:this.channelAttributesCacheLru.delete(t),e.next=17;break;case 12:if(e.prev=12,e.t0=e.catch(6),!Na(e.t0)){e.next=16;break}throw e.t0;case 16:throw new ca("arguments is not valid",gb);case 17:case"end":return e.stop()}}),e,this,[[6,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getUserAttributes",value:function(){var e=ma(N.mark((function e(t){var n,r,o;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ta(t)){e.next=2;break}throw new ca("Not a valid user ID",gb);case 2:if(this.connectionState===oa.CONNECTED){e.next=4;break}throw new da("The client is not logged in",qc);case 4:if(void 0!==this.session){e.next=6;break}throw new mb({SESSION_NOT_FOUND:"Failed to get session of the client"});case 6:return e.prev=6,e.next=9,this.session.requestGetUserAttributeKeys(t).toPromise();case 9:return n=e.sent,r=n.keys,e.next=13,this.session.requestGetUserAttributesByKeys(t,r.slice(0,512)).toPromise();case 13:o=e.sent,e.next=21;break;case 16:if(e.prev=16,e.t0=e.catch(6),!Na(e.t0)){e.next=20;break}throw e.t0;case 20:throw new ca("arguments is not valid",gb);case 21:return e.abrupt("return",Zq(o.attributeInfos.map((function(e){return[e.key,e.value]}))));case 22:case"end":return e.stop()}}),e,this,[[6,16]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getChannelAttributes",value:function(){var e=ma(N.mark((function e(t){var n,r,o,i,a,s,c,l,u,d,A;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ta(t)){e.next=2;break}throw new ca("Not a valid channel ID",gb);case 2:if(this.connectionState===oa.CONNECTED){e.next=4;break}throw new da("The client is not logged in",qc);case 4:if(void 0!==this.session){e.next=6;break}throw new mb({SESSION_NOT_FOUND:"Failed to get session of the client"});case 6:return e.prev=6,e.next=9,this.session.requestGetChannelAttributesKeys(t).toPromise();case 9:return n=e.sent,r=n.keys,e.next=13,this.session.requestGetChannelAttributesByKeys(t,r).toPromise();case 13:o=e.sent,i=o.attributeMaps,e.next=22;break;case 17:if(e.prev=17,e.t0=e.catch(6),!Na(e.t0)){e.next=21;break}throw e.t0;case 21:throw new ca("arguments is not valid",gb);case 22:a={},s=0;case 24:if(!(s<i.length)){e.next=32;break}if(c=i[s],l=c.key,u=c.ms,d=c.value,A=c.origin,"string"==typeof l&&P.isLong(u)&&"string"==typeof d&&Ta(A)){e.next=28;break}return e.abrupt("break",32);case 28:a[l]={value:d,lastUpdateUserId:A,lastUpdateTs:u.toNumber()};case 29:s++,e.next=24;break;case 32:return this.channelAttributesCacheLru.set(t,md(a,(function(e){return new Blob([e.value]).size}))),e.abrupt("return",a);case 34:case"end":return e.stop()}}),e,this,[[6,17]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getChannelAttributesByKeys",value:function(){var e=ma(N.mark((function e(t,n){var r,o,i,a,s,c,l,u,d,A;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectionState===oa.CONNECTED){e.next=2;break}throw new da("The client is not logged in",qc);case 2:if(void 0!==this.session){e.next=4;break}throw new mb({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:return Qn(t,n),e.prev=5,e.next=8,this.session.requestGetChannelAttributesByKeys(t,n).toPromise();case 8:r=e.sent,o=r.attributeMaps,e.next=17;break;case 12:if(e.prev=12,e.t0=e.catch(5),!Na(e.t0)){e.next=16;break}throw e.t0;case 16:throw new ca("arguments is not valid",gb);case 17:i={},a=this.channelAttributesCacheLru.get(t,{}),s=0;case 20:if(!(s<o.length)){e.next=29;break}if(c=o[s],l=c.key,u=c.ms,d=c.value,A=c.origin,"string"==typeof l&&P.isLong(u)&&"string"==typeof d&&Ta(A)){e.next=24;break}return e.abrupt("break",29);case 24:a[l]=new Blob([d]).size,i[l]={value:d,lastUpdateUserId:A,lastUpdateTs:u.toNumber()};case 26:s++,e.next=20;break;case 29:return this.channelAttributesCacheLru.set(t,a),e.abrupt("return",i);case 31:case"end":return e.stop()}}),e,this,[[5,12]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getUserAttributesByKeys",value:function(){var e=ma(N.mark((function e(t,n){var r;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectionState===oa.CONNECTED){e.next=2;break}throw new da("The client is not logged in",qc);case 2:if(void 0!==this.session){e.next=4;break}throw new mb({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:return Qn(t,n),e.prev=5,e.next=8,this.session.requestGetUserAttributesByKeys(t,n).toPromise();case 8:r=e.sent,e.next=16;break;case 11:if(e.prev=11,e.t0=e.catch(5),!Na(e.t0)){e.next=15;break}throw e.t0;case 15:throw new ca("arguments is not valid",gb);case 16:return e.abrupt("return",Zq(r.attributeInfos.map((function(e){return[e.key,e.value]}))));case 17:case"end":return e.stop()}}),e,this,[[5,11]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=ma(N.mark((function e(t){var n,r,o,i,a;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(xn(!0),r=nh(),o=t.token,t.token===this.context.appId&&(o=void 0),bb("Session",{appId:this.context.appId,did:navigator.userAgent,elapse:Xa(this.session&&this.session.startTime),index:{index1:t.uid,index2:this.context.appId,index3:"enableLogUpload=".concat(this.context.config.enableLogUpload)},installId:Og,lts:P.fromNumber(Date.now()),os:7,sid:sb(r),token:o||"",userId:t.uid,ver:"1.5.1",buildno:418,subVersion:18,version:4},null!==(n=this.context.config.enableCloudProxy)&&void 0!==n&&n,!0),De(t)&&Ta(t.uid)){e.next=7;break}throw new ca("not a valid user id",si);case 7:if("string"!=typeof o||!o){e.next=11;break}this.context.token=o,e.next=13;break;case 11:if("string"==typeof o||null==o){e.next=13;break}throw new ca('The "token" is not a valid string.',si);case 13:return i=Date.now(),this.context.sid=sb(r),this.loginPromise=this.loginImpl({uid:t.uid,instanceId:r}),this.info("RTM Client logging in as ".concat(La(t.uid))),e.prev=17,e.next=20,this.loginPromise;case 20:e.next=28;break;case 22:throw e.prev=22,e.t0=e.catch(17),Na(e.t0)&&bb("Link",{ackedServerIp:"",destServerIp:"",ec:e.t0.code||1,sc:e.t0.serverCode,elapse:Xa(this.session&&this.session.startTime),lts:P.fromNumber(Date.now()),responseTime:Date.now()-i,sid:sb(r),userId:t.uid},null!==(a=this.context.config.enableCloudProxy)&&void 0!==a&&a),this.context.token=void 0,this.context.socketUseProxy=!1,e.t0;case 28:return e.prev=28,this.loginPromise=void 0,e.finish(28);case 31:this.context.socketUseProxy&&this.emit("FallbackProxyConnected"),xn(!1);case 33:case"end":return e.stop()}}),e,this,[[17,22,28,31]])})));return function(t){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=ma(N.mark((function e(){var t;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.loginPromise){e.next=3;break}return e.next=3,this.loginPromise;case 3:if(this.connectionState!==oa.DISCONNECTED){e.next=6;break}throw this.logError("Already in logout state"),new da("Logout failure. The client has already been logged out",cs);case 6:if(this.internalEmitter.emit("LOGOUT"),this.connectionState!==oa.ABORTED){e.next=11;break}return this.info('Reset connection state from "ABORTED" to "DISCONNECTED"'),this.onConnectionStateChanged(oa.DISCONNECTED,Rb.LOGOUT),e.abrupt("return");case 11:if(void 0!==this.session){e.next=14;break}return this.onConnectionStateChanged(oa.DISCONNECTED,Rb.LOGOUT),e.abrupt("return");case 14:return bb("Logout",{elapse:Xa(this.session.startTime),lts:P.fromNumber(Date.now()),sid:sb(this.session.instanceId),userId:this.context.uid},null!==(t=this.context.config.enableCloudProxy)&&void 0!==t&&t),e.next=17,this.session.logoutHandler();case 17:this.onConnectionStateChanged(oa.DISCONNECTED,Rb.LOGOUT),this.log("Log out success");case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"logoutSync",value:function(){var e,t=this;if(this.connectionState===oa.DISCONNECTED)throw this.logError("Already in logout state"),new da("Logout failure. The client has already been logged out",cs);this.connectionState===oa.ABORTED?this.info('Reset connection state from "ABORTED" to "DISCONNECTED"'):void 0!==this.session&&(bb("Logout",{elapse:Xa(this.session.startTime),lts:P.fromNumber(Date.now()),sid:sb(this.session.instanceId),userId:this.context.uid},null!==(e=this.context.config.enableCloudProxy)&&void 0!==e&&e),this.session.logoutHandler().then((function(){t.log("Log out success")}))),this.onConnectionStateChanged(oa.DISCONNECTED,Rb.LOGOUT)}},{key:"sendMessageToPeer",value:function(){var e=ma(N.mark((function e(t,n){var r,o,i=this;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Xn(t,bg),r="TEXT"===t.messageType?Ka.P2pSMsgNoOfflineFlag:Ka.P2pRMsgNoOfflineFlag,this.connectionState!==oa.RECONNECTING){e.next=5;break}return o=Date.now(),e.abrupt("return",new Promise((function(e,a){var s,c=(s=ma(N.mark((function s(){var c;return N.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(void 0!==i.session){s.next=2;break}throw new mb({SESSION_NOT_FOUND:"Failed to get session of the client"});case 2:return c=Date.now()-o,s.prev=3,s.t0=e,s.next=7,ph({message:t,peerId:n,toPeer:!0,session:i.session,errorCodes:{NOT_LOGGED_IN:Ll,TOO_OFTEN:es},diff:c,logger:i.logger});case 7:s.t1=s.sent,(0,s.t0)(s.t1),s.next=18;break;case 11:s.prev=11,s.t2=s.catch(3),Ab(s.t2)&&(i.session.emit("messageCount",{messageCategory:r,type:"common",key:"sentcount"}),i.session.emit("messageCount",{messageCategory:r,type:"common",key:"timeoutcount"}),a(new Ub(we(i.name,"sendMessageToPeer",1e4),Kl))),Na(s.t2)&&a(s.t2),i.session.emit("messageCount",{messageCategory:r,type:"common",key:"sentcount"}),i.session.emit("messageCount",{messageCategory:r,type:"common",key:"unknowerrorcount"}),a(new Ja("Peer-to-peer message send failure",{code:ds,originalError:s.t2}));case 18:return s.prev=18,clearTimeout(l),s.finish(18);case 21:case"end":return s.stop()}}),s,null,[[3,11,18,21]])}))),function(){return s.apply(this,arguments)});i.internalEmitter.once("RECONNECTED",c);var l=setTimeout((function(){i.internalEmitter.off("RECONNECTED",c),a(new Ub(we(i.name,"sendMessageToPeer",1e4),Kl))}),9e3)})));case 5:if(this.connectionState===oa.CONNECTED){e.next=7;break}throw new da("Failed to send the peer-to-peer message. The client is not logged in",Ll);case 7:if(void 0!==this.session){e.next=9;break}throw new mb({SESSION_NOT_FOUND:"Failed to get session of the client"});case 9:return e.prev=9,e.next=12,ph({message:t,peerId:n,toPeer:!0,session:this.session,errorCodes:{NOT_LOGGED_IN:Ll,TOO_OFTEN:es},diff:0,logger:this.logger});case 12:return e.abrupt("return",e.sent);case 15:if(e.prev=15,e.t0=e.catch(9),!Ab(e.t0)){e.next=21;break}throw this.session.emit("messageCount",{messageCategory:r,type:"common",key:"sentcount"}),this.session.emit("messageCount",{messageCategory:r,type:"common",key:"timeoutcount"}),new Ub(we(this.name,"sendMessageToPeer",1e4),Kl);case 21:if(!Na(e.t0)){e.next=23;break}throw e.t0;case 23:throw this.session.emit("messageCount",{messageCategory:r,type:"common",key:"sentcount"}),this.session.emit("messageCount",{messageCategory:r,type:"common",key:"unknowerrorcount"}),new Ja("Peer-to-peer message send failure",{code:ds,originalError:e.t0});case 26:case"end":return e.stop()}}),e,this,[[9,15]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createChannel",value:function(e){var t=this;if(!Ta(e))throw new ca(["The %s in the arguments is invalid",Object.keys({channelId:e})[0]],FB);return new uF(e,(function(){return t.session}),this,this.logger)}},{key:"createLocalInvitation",value:function(e){if(!Ta(e))throw new ca(["The %s in the arguments is invalid",Object.keys({calleeId:e})[0]],Xc);return this.invitationManager.genLocalInvitation(e)}},{key:"subscribePeersOnlineStatus",value:function(){var e=ma(N.mark((function e(t){var n,r,o,i,a,s,c,l,u,d,A,p,h,f=this;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectionState===oa.CONNECTED){e.next=2;break}throw new da("The client is not logged in",Nl);case 2:if(void 0!==this.session){e.next=4;break}throw new mb({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:if(Array.isArray(t)&&0!==t.length){e.next=6;break}throw new ca("Invalid arguments: peerIds",Qg);case 6:n=0;case 7:if(!(n<t.length)){e.next=14;break}if(Ta(r=t[n])){e.next=11;break}throw new ca(["subscribePeersOnlineStatus peer id %s is invalid",r],Qg);case 11:n++,e.next=7;break;case 14:if(!(512<(o=t&&t.length?fl(t):[]).length+Object.keys(this.subscribedPeerStatusCache).length+this.pendingPeerStatusSubCount)){e.next=17;break}throw new ic("Subscribed peers overflows",js);case 17:return this.pendingPeerStatusSubCount+=o.length,e.next=20,this.session.requestSubscribePeersOnlineStatus(o).toPromise();case 20:i=e.sent,a=i.errors,this.pendingPeerStatusSubCount-=o.length,s=[],c=[],l=0;case 26:if(!(l<a.length)){e.next=34;break}if(u=a[l],d=u.code,"string"==typeof(A=u.account)){e.next=30;break}throw new Ja("Returned account is invalid",is);case 30:0!==d&&s.push(A);case 31:l++,e.next=26;break;case 34:for(p=0;p<o.length;p++)h=o[p],s.includes(h)||(c.push(h),this.subscribedPeerStatusCache[h]=void 0);if(this.session.requestPeersOnlineStatus(c).pipe(Ea((function(e){return md(tl(e.userInfos,"account"),(function(e){return!!e.ts}))}))).subscribe((function(e){e=md(e,(function(e,t){return e=e?ta.PeerOnlineState.ONLINE:ta.PeerOnlineState.OFFLINE,f.subscribedPeerStatusCache[t]=e})),f.emit("PeersOnlineStatusChanged",e)})),0===s.length){e.next=38;break}throw new Ja("Subscription failed",is);case 38:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"unsubscribePeersOnlineStatus",value:function(){var e=ma(N.mark((function e(t){var n,r,o,i,a;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectionState===oa.CONNECTED){e.next=2;break}throw new da("The client is not logged in",Nl);case 2:if(void 0!==this.session){e.next=4;break}throw new mb({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:if(Array.isArray(t)&&0!==t.length){e.next=6;break}throw new ca("Invalid arguments: peerIds",Qg);case 6:n=0;case 7:if(!(n<t.length)){e.next=14;break}if(Ta(r=t[n])){e.next=11;break}throw new ca(["subscribePeersOnlineStatus peer id %s is invalid",r],Qg);case 11:n++,e.next=7;break;case 14:if(!(512<t.length)){e.next=16;break}throw new ic("Unsubscribed peers overflows",js);case 16:for(o=t&&t.length?fl(t):[],this.session.requestUnsubscribePeersOnlineStatus(o),i=0;i<o.length;i++)a=o[i],delete this.subscribedPeerStatusCache[a];case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queryPeersBySubscriptionOption",value:function(){var e=ma(N.mark((function e(t){return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectionState===oa.CONNECTED){e.next=2;break}throw new da("The client is not logged in",Nl);case 2:if(t!==ta.PeerSubscriptionOption.ONLINE_STATUS){e.next=4;break}return e.abrupt("return",Object.keys(this.subscribedPeerStatusCache));case 4:throw new ca("Subscription option not supported",Qg);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createMessage",value:function(e){return e}},{key:"loginImpl",value:function(){var e=ma(N.mark((function e(t){var n,r,o,i,a,s,c,l,u=this;return N.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.uid,r=t.instanceId,o=t.forceLoginTime,i=void 0===o?0:o,a=r,!(void 0!==this.lastLoginTime&&500>Date.now()-this.lastLoginTime)){e.next=4;break}throw new bE(["The frequency of login exceeded the limit of %d queries per second",2],UB);case 4:if(this.connectionState===oa.DISCONNECTED||0!==i){e.next=6;break}throw new da("The SDK is either logging in or has logged in the Agora RTM system",SB);case 6:e.prev=6,this.context.uid=n,e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(6),new ca(["The %s in the arguments is invalid",Object.keys({uid:n})[0]],si);case 13:return 0===i&&this.onConnectionStateChanged(oa.CONNECTING,Rb.LOGIN),(s=new ct(this.context,this.logger,!1)).blacklistedIP=this.blacklistedIP,this.session=c=new Tt(this.context,s,a,this.logger),l=function(){u.connectionState===oa.CONNECTED&&(u.onConnectionStateChanged(oa.RECONNECTING,Rb.INTERRUPTED),u.session)&&u.session.once("userJoined",(function(){u.onConnectionStateChanged(oa.CONNECTED,Rb.LOGIN_SUCCESS)}))},c.on("connectionLost",l),c.on("tokenExpired",(function(){u.emit("TokenExpired")})),c.on("tokenPrivilegeWillExpire",this.TokenPrivilegeWillExpireHandler),c.once("userDrop",this.userDropHandler),this.session.on("peerTextMessage",(function(e){u.emit("MessageFromPeer",{text:e.text,messageType:ta.MessageType.TEXT},e.peerId,e.properties)})),this.session.on("peerRawMessage",(function(e){u.emit("MessageFromPeer",{rawMessage:e.raw,description:e.desc,messageType:ta.MessageType.RAW},e.peerId,e.properties)})),c.on("instanceChanged",(function(e){return a=e})),c.on("peerOnlineStatusChanged",(function(e){var t=e.instance.toString()+e.state,n=u.peerStatusSeqLru.get(t);!n||e.seq.greaterThan(n)?(u.peerStatusSeqLru.set(t,e.seq),e.state!==u.subscribedPeerStatusCache[e.peerId]&&u.emit("PeersOnlineStatusChanged",x({},e.peerId,e.state)),u.subscribedPeerStatusCache[e.peerId]=e.state,clearTimeout(u.peerUnreachableTimers[t]),e.state===ta.PeerOnlineState.UNREACHABLE&&(u.peerUnreachableTimers[t]=setTimeout((function(){u.subscribedPeerStatusCache[e.peerId]===ta.PeerOnlineState.UNREACHABLE&&(u.subscribedPeerStatusCache[e.peerId]=ta.PeerOnlineState.ONLINE,u.emit("PeersOnlineStatusChanged",x({},e.peerId,ta.PeerOnlineState.ONLINE)))}),3e4))):u.log("peerOnlineStatusChanged dedup for %s, %d",t,e.seq.toNumber())})),c.on("invitationMessage",this.invitationManager.invitationMessageHandler.bind(this.invitationManager)),c.on("channelAttributesUpdated",(function(e){var t=e.channelId;e=e.attributeMaps;for(var n={},r=0;r<e.length;r++){var o=e[r],i=o.key,a=o.ms,s=o.value;if(o=o.origin,"string"!=typeof i||!P.isLong(a)||"string"!=typeof s||!Ta(o))break;n[i]=new Blob([s]).size}u.channelAttributesCacheLru.set(t,n)})),c.on("userJoined",(function(e){if(0!==Object.keys(u.attributes).length){if(void 0===u.session)return;u.session.requestSetLocalUserAttributes(u.attributes,e).toPromise()}if(0!==u.attributeDrafts.size)for(var t=function(t,n){var r=(t=n[t]).attribute;t.promise.then((function(){void 0!==u.session&&u.session.requestSetLocalUserAttributes(r,e).toPromise()}))},n=0,r=Array.from(u.attributeDrafts);n<r.length;n++)t(n,r);0!==Object.keys(u.subscribedPeerStatusCache).length&&c.requestSubscribePeersOnlineStatus(Object.keys(u.subscribedPeerStatusCache))})),c.on("banEdgeIP",(function(e){u.banIP(e)})),this.lastLoginTime=Date.now(),e.prev=32,e.next=35,c.loginHandler().toPromise();case 35:e.next=53;break;case 37:if(e.prev=37,e.t1=e.catch(32),!("loginRespTimeout"===e.t1.name&&2>i)){e.next=46;break}return c.removeAllListeners(),e.next=43,this.loginImpl({uid:n,instanceId:r,forceLoginTime:i+1});case 43:return e.abrupt("return");case 46:if(!Ab(e.t1)){e.next=49;break}throw this.onConnectionStateChanged(oa.DISCONNECTED,Rb.LOGIN_TIMEOUT),new Ub(we(this.name,"login",12e3),TB);case 49:if(this.onConnectionStateChanged(oa.DISCONNECTED,Rb.LOGIN_FAILURE),!Na(e.t1)){e.next=52;break}throw e.t1;case 52:throw new Ja("Login failure",{code:$r,originalError:e.t1});case 53:this.onConnectionStateChanged(oa.CONNECTED,Rb.LOGIN_SUCCESS);case 54:case"end":return e.stop()}}),e,this,[[6,10],[32,37]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onConnectionStateChanged",value:function(e,t){var n,r=this;e===oa.RECONNECTING&&(this.reconnId+=1),bb("ConnectionStateChange",{elapse:Xa(this.session&&this.session.startTime),lts:P.fromNumber(Date.now()),newState:Vt[e],oldState:Vt[this.connectionState],reason:vF[t],sid:sb(this.session&&this.session.instanceId||P.fromNumber(0)),userId:this.context.uid,reconnId:this.reconnId},null!==(n=this.context.config.enableCloudProxy)&&void 0!==n&&n),this.connectionState===oa.RECONNECTING&&e===oa.CONNECTED&&(0!==Object.keys(this.subscribedPeerStatusCache).length&&void 0!==this.session&&this.session.requestPeersOnlineStatus(Object.keys(this.subscribedPeerStatusCache)).pipe(Ea((function(e){return md(tl(e.userInfos,"account"),(function(e){return!!e.ts}))}))).subscribe((function(e){e=md(e,(function(e,t){return e=e?ta.PeerOnlineState.ONLINE:ta.PeerOnlineState.OFFLINE,r.subscribedPeerStatusCache[t]=e})),r.emit("PeersOnlineStatusChanged",e)})),this.internalEmitter.emit("RECONNECTED")),this.connectionState=e,e!==oa.ABORTED&&e!==oa.DISCONNECTED||(this.pendingPeerStatusSubCount=this.reconnId=0,this.attributes={},this.session&&(this.session.removeAllListeners(),this.session.msgDedupLru.empty(),this.session.dialogueSequenceLru.empty(),this.session.dialPendingMsgSubjectMap.clear()),this.channelAttributesCacheLru.empty(),this.peerStatusSeqLru.empty(),this.peerUnreachableTimers={},this.subscribedPeerStatusCache={},this.attributeDrafts.clear(),this.context.token=void 0),this.emit("ConnectionStateChanged",e,t)}},{key:"banIP",value:function(e){var t;this.log("ip banned",e);var n=null!==(t=this.blacklistedIP[e])&&void 0!==t?t:0;this.blacklistedIP[e]=n+1}}]),t}(sc()),Da(W.prototype,"renewToken",[jb],Object.getOwnPropertyDescriptor(W.prototype,"renewToken"),W.prototype),Da(W.prototype,"queryPeersOnlineStatus",[jb],Object.getOwnPropertyDescriptor(W.prototype,"queryPeersOnlineStatus"),W.prototype),Da(W.prototype,"getChannelMemberCount",[jb],Object.getOwnPropertyDescriptor(W.prototype,"getChannelMemberCount"),W.prototype),Da(W.prototype,"setLocalUserAttributes",[jb],Object.getOwnPropertyDescriptor(W.prototype,"setLocalUserAttributes"),W.prototype),Da(W.prototype,"setChannelAttributes",[jb],Object.getOwnPropertyDescriptor(W.prototype,"setChannelAttributes"),W.prototype),Da(W.prototype,"addOrUpdateLocalUserAttributes",[jb],Object.getOwnPropertyDescriptor(W.prototype,"addOrUpdateLocalUserAttributes"),W.prototype),Da(W.prototype,"addOrUpdateChannelAttributes",[jb],Object.getOwnPropertyDescriptor(W.prototype,"addOrUpdateChannelAttributes"),W.prototype),Da(W.prototype,"deleteLocalUserAttributesByKeys",[jb],Object.getOwnPropertyDescriptor(W.prototype,"deleteLocalUserAttributesByKeys"),W.prototype),Da(W.prototype,"deleteChannelAttributesByKeys",[jb],Object.getOwnPropertyDescriptor(W.prototype,"deleteChannelAttributesByKeys"),W.prototype),Da(W.prototype,"clearLocalUserAttributes",[Mc],Object.getOwnPropertyDescriptor(W.prototype,"clearLocalUserAttributes"),W.prototype),Da(W.prototype,"clearChannelAttributes",[jb],Object.getOwnPropertyDescriptor(W.prototype,"clearChannelAttributes"),W.prototype),Da(W.prototype,"getUserAttributes",[jb],Object.getOwnPropertyDescriptor(W.prototype,"getUserAttributes"),W.prototype),Da(W.prototype,"getChannelAttributes",[jb],Object.getOwnPropertyDescriptor(W.prototype,"getChannelAttributes"),W.prototype),Da(W.prototype,"getChannelAttributesByKeys",[jb],Object.getOwnPropertyDescriptor(W.prototype,"getChannelAttributesByKeys"),W.prototype),Da(W.prototype,"getUserAttributesByKeys",[jb],Object.getOwnPropertyDescriptor(W.prototype,"getUserAttributesByKeys"),W.prototype),Da(W.prototype,"login",[Mc],Object.getOwnPropertyDescriptor(W.prototype,"login"),W.prototype),Da(W.prototype,"logout",[Mc],Object.getOwnPropertyDescriptor(W.prototype,"logout"),W.prototype),Da(W.prototype,"logoutSync",[Mc],Object.getOwnPropertyDescriptor(W.prototype,"logoutSync"),W.prototype),Da(W.prototype,"sendMessageToPeer",[jb],Object.getOwnPropertyDescriptor(W.prototype,"sendMessageToPeer"),W.prototype),Da(W.prototype,"createChannel",[jb],Object.getOwnPropertyDescriptor(W.prototype,"createChannel"),W.prototype),Da(W.prototype,"createLocalInvitation",[jb],Object.getOwnPropertyDescriptor(W.prototype,"createLocalInvitation"),W.prototype),Da(W.prototype,"subscribePeersOnlineStatus",[jb],Object.getOwnPropertyDescriptor(W.prototype,"subscribePeersOnlineStatus"),W.prototype),Da(W.prototype,"unsubscribePeersOnlineStatus",[jb],Object.getOwnPropertyDescriptor(W.prototype,"unsubscribePeersOnlineStatus"),W.prototype),Da(W.prototype,"queryPeersBySubscriptionOption",[jb],Object.getOwnPropertyDescriptor(W.prototype,"queryPeersBySubscriptionOption"),W.prototype),Da(W.prototype,"createMessage",[Mc],Object.getOwnPropertyDescriptor(W.prototype,"createMessage"),W.prototype),W),rm,sm,tm,um,Wt=null===(rm=/Chrome\/([0-9.]+)/.exec(null===(tm=window)||void 0===tm||null===(um=tm.navigator)||void 0===um?void 0:um.userAgent))||void 0===rm||null===(sm=rm[1])||void 0===sm?void 0:sm.split(".")[0];if(Wt&&88<=parseInt(Wt,10)&&!Ce()){var vm,ze=document.createElement("video"),Ae=document.createElement("canvas");ze.setAttribute("style","display:none"),ze.setAttribute("muted",""),ze.muted=!0,ze.setAttribute("autoplay",""),ze.autoplay=!0,ze.setAttribute("playsinline",""),Ae.setAttribute("style","display:none"),Ae.setAttribute("width","1"),Ae.setAttribute("height","1"),null===(vm=Ae.getContext("2d"))||void 0===vm||vm.fillRect(0,0,1,1),ze.srcObject=null==Ae?void 0:Ae.captureStream()}var Xt={LOG_FILTER_OFF:{error:!1,warn:!1,info:!1,track:!1,debug:!1},LOG_FILTER_ERROR:{error:!0,warn:!1,info:!1,track:!1,debug:!1},LOG_FILTER_WARNING:{error:!0,warn:!0,info:!1,track:!1,debug:!1},LOG_FILTER_INFO:{error:!0,warn:!0,info:!0,track:!1,debug:!1},LOG_FILTER_DEBUG:{error:!0,warn:!0,info:!0,track:!0,debug:!0}},Yt={enableLogUpload:!1,logFilter:Xt.LOG_FILTER_INFO,enableCloudProxy:!1},ue=Wa(Wa({createInstance:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length?arguments[2]:void 0;if(!/^[\dA-Za-z]{32}$/.test(e))throw new ca(["The %s in the arguments is invalid",Object.keys({appId:e})[0]],Or);var r=Object.keys(t).filter((function(e){return!(e in Yt)}));if(0!==r.length)throw new ca("Invalid RTM config: ".concat(r.join(", ")),Or);var o=Wa(Wa({},Yt),t);if(void 0!==n&&(!Array.isArray(n)||0===n.length))throw new ca("Invalid area config");if(null!=n){if(!n.every((function(e){return e in ta.LegacyAreaCode})))throw new ca("Invalid area codes: ".concat(n.filter((function(e){return!(e in ta)})).join(", ")));fa=Ve(n.map((function(e){return dE[e]})))}n=Tl=Ya.__global_unique_id__=(Ya.__global_unique_id__||0)+1;var i=iE(o);r=jE(o);var a=kE(o),s=lE(n,o),c=Xs(n,o),l=c("RTM:DEBUG","<Entry> ");return Qs.rtmConfig=o,i("The Agora RTM Web SDK version is %s","1.5.1"),t.enableCloudProxy&&i("RTM cloud proxy enabled"),t.enableLogUpload&&i("Log upload enabled"),fa&&l("Area is set to %s",Array.from(fa.CODES).map((function(e){return Yf(S).find((function(t){return S[t]===e}))})).join(", ")),l("Creating an RtmClient instance"),l('The Git commit ID is "'.concat("v1.5.1-0-g5bbbcd72",'"')),l("The App ID is %s",Yn(e,4,10,"*".repeat(6))),i("The process ID is %s",Og),l("The build is %s","v1.5.1-0-g5bbbcd72"),l("NODE_ENV is %s","production"),new wF(e,{genLogger:c,genTracker:s,info:i,warn:r,logError:a,loggerId:n},o,(function(e){for(var t=0,n=Yf(e);t<n.length;t++){var r=n[t];try{var a=e[r];null!=a&&(e.enableCloudProxy&&i("RTM cloud proxy enabled"),e.enableLogUpload&&i("Log upload enabled"),o[r]=a)}catch(s){throw new ca(["The %s in the arguments is invalid",r],void 0)}}}))},BUILD:"v1.5.1-0-g5bbbcd72",VERSION:"1.5.1",END_CALL_PREFIX:"AgoraRTMLegacyEndcallCompatibleMessagePrefix",processId:Og,ConnectionChangeReason:ta.ConnectionChangeReason,ConnectionState:ta.ConnectionState,LocalInvitationFailureReason:ta.LocalInvitationFailureReason,LocalInvitationState:ta.LocalInvitationState,RemoteInvitationFailureReason:ta.RemoteInvitationFailureReason,RemoteInvitationState:ta.RemoteInvitationState,MessageType:ta.MessageType,PeerOnlineState:ta.PeerOnlineState,PeerSubscriptionOption:ta.PeerSubscriptionOption},Xt),{},{setParameter:function(e,t){Object.keys(Ec).includes(e)&&(Ec[e]=t)},getParameter:function(e){return Ec[e]},setArea:function(e){var t=e.areaCodes;if(e=e.excludedArea,!Array.isArray(t)||0===t.length||!t.every((function(e){return e in ta.AreaCode})))throw new ca("Invalid area config");if(void 0!==e&&e===ta.AreaCode.GLOBAL)throw new ca("Excluded area cannot be global");if(void 0===e)fa=Ve(t.map((function(e){return S[e]})));else{if(t.includes(e))throw new ca("Excluded area cannot be in areaCodes");if(!(e in S))throw new ca("Invalid excludedArea:",e);fa=Gv({areas:t.map((function(e){return S[e]})),excludedArea:S[e]})}}});return ue},module.exports=t2()}(agoraRtmSdk,agoraRtmSdk.exports);var agoraRtmSdkExports=agoraRtmSdk.exports;const AgoraRTM=getDefaultExportFromCjs(agoraRtmSdkExports);let userCallBusy=!1,userRechargeBusy=!1,userMatchBusy=!1,userGameBusy=!1,userLeaveBusy=!1;const userIsBusy=()=>userCallBusy||userRechargeBusy||userMatchBusy||userGameBusy||userLeaveBusy,isCallBusy=()=>userCallBusy;function changeUserIsBusy({callBusy:e=!1,rechargeBusy:t=!1,matchBusy:n=!1,gameBusy:r=!1,leaveBusy:o=!1,action:i}){e?userCallBusy=i:t?userRechargeBusy=i:o&&(userLeaveBusy=i)}let remoteInvitations={},localInvitation=null,gRtmToken=null;const storeLoginRtmToken="loginRtmToken";function saveLoginRtmToken(e){gRtmToken=e,storeSave({key:storeLoginRtmToken,value:e})}function getLoginRtmToken(){return(null==gRtmToken||null==gRtmToken||gRtmToken.length<=0)&&(gRtmToken=storeRead(storeLoginRtmToken)),gRtmToken}function clearLoginRtmToken(){gRtmToken=null,storeClear(storeLoginRtmToken)}function cacheRtmToken({success:e=()=>{},fail:t=()=>{}}){getLoginRtmToken(),null!=gRtmToken&&null!=gRtmToken&&""!=gRtmToken?console.log("RtmToken "):(console.log("RtmToken "),netRtmToken({success:t=>{console.log("RtmToken"),null!=t&&null!=t&&""!=t&&(saveLoginRtmToken(t),e())}}))}let rtm=null,initFailLimitCount=0,loginFailLimitCount=0;function isLoginRtm(){return console.log(`Rtm ${null==rtm?void 0:rtm.connectionState}`),"CONNECTED"==(null==rtm?void 0:rtm.connectionState)}async function initRtmAndLogin(){if(!localAuthAvailable())return console.log(" Rtm Rtm"),void rtmLoginOut();if(isLoginRtm())return void console.log("RTM RTM");if(console.log("RTM"),null==rtm||null==rtm){console.log("Rtm ");let e=getAgoraAppId();if(null==e||null==e||e.length<=0)return console.log("Agora appId "),void cacheAppConfig({});try{rtm=AgoraRTM.createInstance(e),console.log("Rtm")}catch(r){rtm=null,appTrackRtmInitFail(null==r?void 0:r.message),initFailLimitCount++,initFailLimitCount>=3&&(initFailLimitCount=0,showMediaUnavaliableModal()),console.log("Rtm")}if(null==rtm)return}else console.log("Rtm");let e=getLoginUserId();if(null==e||null==e||e.length<=0)return void console.log("uid  TO BE DO...");let t=getLoginRtmToken();if(null==t||null==t||t.length<=0)return console.log("RtmToken "),void cacheRtmToken({});rtm.on("MessageFromPeer",((e,t)=>{console.log(`${t}\n${JSON.stringify(e)}`);const n=JSON.parse(e.text);n.data=JSON.parse(n.data),console.log(` ${JSON.stringify(n)}`),useAppDataStore().addConversation(`${getLoginUserId()}_${t}`,n)})),rtm.on("RemoteInvitationReceived",(e=>{const t=e.callerId.toString();if(console.log(` ${t} ${e.content}`),remoteInvitations[t]=e,userIsBusy())return console.log(""),void operateRemoteInvitation({peerId:t,accept:!1});e.on("RemoteInvitationCanceled",(()=>{console.log(""),delete remoteInvitations[t],useAppDataStore().remoteInvitationCanceled(t)})),e.on("RemoteInvitationFailure",(()=>{console.log(""),delete remoteInvitations[t],useAppDataStore().remoteInvitationCanceled(t)}));showRtcRemoteInvitationModal({anchorUserId:t,channelId:e.channelId,content:JSON.parse(e.content)})})),rtm.on("ConnectionStateChanged",(async(e,t)=>{console.log(` state:${e} reason:${t}`),useAppDataStore().debugRtmStatus=null==rtm?void 0:rtm.connectionState,"TOKEN_EXPIRED"==t&&clearLoginRtmToken()}));let n={uid:e.toString(),token:t};try{await rtm.login(n);console.log("Rtm")}catch(o){console.error(`Rtm ${o.code}:${o.message}`),6==o.code?(console.error("Rtm Rtmtoken"),clearLoginRtmToken(),initRtmAndLogin()):8==o.code?(console.log(""),rtmLoginOut()):(appTrackRtmLoginFail(null==o?void 0:o.message),loginFailLimitCount++,loginFailLimitCount>=3&&(loginFailLimitCount=0,showMediaUnavaliableModal()))}}function rtmLoginOut(){try{console.log("Rtm"),null!=rtm&&null!=rtm&&"DISCONNECTED"!=rtm.connectionState&&(console.log(`Rtm ${null==rtm?void 0:rtm.connectionState}`),null==rtm||rtm.logout())}catch(e){console.log(`Rtm ${e.message}`)}}function sendLocalInvitation({peerId:e,userInfo:t,channelId:n}){if(1!=isLoginRtm())return console.log("RTM  "),void useAppDataStore().localInvitationSendSFail();cancelLocalInvitation(),localInvitation=rtm.createLocalInvitation(e.toString()),localInvitation.on("LocalInvitationReceivedByPeer",(()=>{console.log(`LocalInvitationReceivedByPeer ${e}`)})),localInvitation.on("LocalInvitationRefused",(()=>{console.log(`RTM ${e}`),useAppDataStore().localInvitationRefused()})),localInvitation.on("LocalInvitationCanceled",(()=>{console.log(`RTM ${e}`)})),localInvitation.on("LocalInvitationAccepted",(()=>{console.log(`RTM ${e}`),useAppDataStore().localInvitationAccepted(n)}));try{localInvitation.content=t,localInvitation.channelId=n,localInvitation.send(),console.log(`RTM ${e}`),useAppDataStore().localInvitationSendSuccess()}catch(r){console.log("RTM"),useAppDataStore().localInvitationSendSFail()}}function cancelLocalInvitation(){if(null!=localInvitation)try{null==localInvitation||localInvitation.cancel()}catch(e){console.log(` ${e}`)}localInvitation=null}function operateRemoteInvitation({peerId:e,accept:t}){try{const n=remoteInvitations[e.toString()];t?n.accept():n.refuse()}catch(n){console.log(` ${n}`)}finally{console.log(` ${e}`),delete remoteInvitations[e.toString()]}}const availableTime$1=18e5,_sfc_main$c={__name:"modal-recharge-first",props:["type","fullScreen","anchorId","path"],emits:["close"],setup(e,{emit:t}){changeUserIsBusy({rechargeBusy:!0,action:!0});const n=getAppConfig(),r=e,o=r.type;console.log(` ${o}`),storeToRefs(useAppDataStore());const i=ref(null);ref([]);const a=ref(null);let s=Date.now(),c=firstLoginTimestamp();const l=useAppDataStore().$onAction((({name:e,args:t})=>{"globalTimerNTF"==e?(console.log(" "),s+=1e3,c>=s-availableTime$1?a.value=timestampDifferent(c,s-availableTime$1):(console.log(" 30"),targetFirstLoginTimestamp(getLoginUserId(),!0),c=firstLoginTimestamp())):"orderCompleteNotification"==e&&d()}));onUnmounted((()=>{l()})),netRechargeCenter({type:2,success:e=>{if(console.log(""),!isFlutterWebApp)for(const n of e)n.ppp=n.ppp.filter((e=>1!=e.ppType&&2!=e.ppType));const t=e.filter((e=>e.ppp.length>0)).filter((e=>2==e.productType&&1==e.discountType));t.length>0&&(i.value=t[0])},fail:()=>{},netFail:()=>{}});const u=t,d=()=>{changeUserIsBusy({rechargeBusy:!0,action:!1}),u("close")};return(e,t)=>{const s=index$g,c=index$i;return openBlock(),createBlock(s,{class:"content"},{default:withCtx((()=>[createVNode(s,{class:"discount-content"},{default:withCtx((()=>[createVNode(s,{class:"recharge-nav"},{default:withCtx((()=>[createVNode(s,{class:"close",onClick:d})])),_:1}),createVNode(s,{class:"discount-product"},{default:withCtx((()=>{var e;return[(null==(e=i.value)?void 0:e.discount)>0?(openBlock(),createBlock(s,{key:0,class:"discount-num"},{default:withCtx((()=>[createVNode(s,{class:"discount-num-detail"},{default:withCtx((()=>[createVNode(c,null,{default:withCtx((()=>{var e;return[createTextVNode(toDisplayString$1(null==(e=i.value)?void 0:e.discount)+"%",1)]})),_:1}),createVNode(c,null,{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(lanKey).off.tr),1)])),_:1})])),_:1})])),_:1})):createCommentVNode("",!0),createVNode(s,{class:"diamond-area"},{default:withCtx((()=>[createVNode(c,null,{default:withCtx((()=>{var e;return[createTextVNode(toDisplayString$1(null==(e=i.value)?void 0:e.diamonds.toBin),1)]})),_:1}),createVNode(s,{class:"diamond"})])),_:1}),createVNode(s,{class:"send-area"},{default:withCtx((()=>{var e,t,r;return[(null==(e=i.value)?void 0:e.matchCardNum)>0?(openBlock(),createBlock(s,{key:0,class:"item"},{default:withCtx((()=>[createVNode(s,{class:"item-top"},{default:withCtx((()=>[createVNode(s,{class:"item-props"},{default:withCtx((()=>[createVNode(s,{class:"item-icon props-match-big"}),createVNode(c,null,{default:withCtx((()=>{var e;return[createTextVNode("x"+toDisplayString$1(null==(e=i.value)?void 0:e.matchCardNum),1)]})),_:1})])),_:1}),createVNode(c,{class:"des"},{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(lanKey).matchCard.tr),1)])),_:1})])),_:1}),createVNode(s,{class:"about-price"},{default:withCtx((()=>[createVNode(c,null,{default:withCtx((()=>[createTextVNode(""+toDisplayString$1(unref(n).matchCardDiamonds.toBin),1)])),_:1}),createVNode(s,{class:"diamond"})])),_:1})])),_:1})):createCommentVNode("",!0),(null==(t=i.value)?void 0:t.callCardNum)>0?(openBlock(),createBlock(s,{key:1,class:"item"},{default:withCtx((()=>[createVNode(s,{class:"item-top"},{default:withCtx((()=>[createVNode(s,{class:"item-props"},{default:withCtx((()=>[createVNode(s,{class:"item-icon props-video-big"}),createVNode(c,null,{default:withCtx((()=>{var e;return[createTextVNode("x"+toDisplayString$1(null==(e=i.value)?void 0:e.callCardNum),1)]})),_:1})])),_:1}),createVNode(c,{class:"des"},{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(lanKey).videoCard.tr),1)])),_:1})])),_:1}),createVNode(s,{class:"about-price"},{default:withCtx((()=>[createVNode(c,null,{default:withCtx((()=>[createTextVNode(""+toDisplayString$1(unref(n).callCardDiamonds.toBin),1)])),_:1}),createVNode(s,{class:"diamond"})])),_:1})])),_:1})):createCommentVNode("",!0),(null==(r=i.value)?void 0:r.chatCardNum)>0?(openBlock(),createBlock(s,{key:2,class:"item"},{default:withCtx((()=>[createVNode(s,{class:"item-top"},{default:withCtx((()=>[createVNode(s,{class:"item-props"},{default:withCtx((()=>[createVNode(s,{class:"item-icon props-chat-big"}),createVNode(c,null,{default:withCtx((()=>{var e;return[createTextVNode("x"+toDisplayString$1(null==(e=i.value)?void 0:e.chatCardNum),1)]})),_:1})])),_:1}),createVNode(c,{class:"des"},{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(lanKey).chatCard.tr),1)])),_:1})])),_:1}),createVNode(s,{class:"about-price"},{default:withCtx((()=>[createVNode(c,null,{default:withCtx((()=>[createTextVNode(""+toDisplayString$1(unref(n).chatCardDiamonds.toBin),1)])),_:1}),createVNode(s,{class:"diamond"})])),_:1})])),_:1})):createCommentVNode("",!0)]})),_:1}),createVNode(s,{onClick:t[0]||(t[0]=e=>{showPayWay(i.value,o,r.anchorId,r.path)}),class:"recharge-btn"},{default:withCtx((()=>{var e,t;return[createVNode(c,{class:"origin-price"},{default:withCtx((()=>{var e,t,n;return[createTextVNode(toDisplayString$1(unref(getSymbolFromCurrency)(null==(e=i.value)?void 0:e.currencyCode))+toDisplayString$1(((null==(t=i.value)?void 0:t.currencyPrice)/100/((100-(null==(n=i.value)?void 0:n.discount))/100)).toFixed(2)),1)]})),_:1}),createVNode(c,null,{default:withCtx((()=>{var e,t;return[createTextVNode(toDisplayString$1(unref(getSymbolFromCurrency)(null==(e=i.value)?void 0:e.currencyCode))+toDisplayString$1(null==(t=i.value)?void 0:t.currencyPrice.toBin),1)]})),_:1}),withDirectives(createVNode(s,{class:"num"},{default:withCtx((()=>[createTextVNode(toDisplayString$1(a.value),1)])),_:1},512),[[vShow,2==(null==(e=i.value)?void 0:e.productType)&&1==(null==(t=i.value)?void 0:t.discountType)&&null!=a.value]])]})),_:1})]})),_:1})])),_:1})])),_:1})}}},ModalRechargeFirst=_export_sfc(_sfc_main$c,[["__scopeId","data-v-5d572a1b"]]),availableTime=18e5,_sfc_main$b={__name:"modal-recharge",props:["type","fullScreen","anchorId","path"],emits:["close"],setup(e,{emit:t}){changeUserIsBusy({rechargeBusy:!0,action:!0});const n=e,r=n.type;console.log(` ${r}`);const{userBalance:o}=storeToRefs(useAppDataStore()),i=ref([]),a=ref([]),s=ref(null);let c=Date.now(),l=firstLoginTimestamp();const u=useAppDataStore().$onAction((({name:e,args:t})=>{"globalTimerNTF"==e?(console.log(" "),c+=1e3,l>=c-availableTime?s.value=timestampDifferent(l,c-availableTime):(console.log(" 30"),targetFirstLoginTimestamp(getLoginUserId(),!0),l=firstLoginTimestamp())):"orderCompleteNotification"==e&&netRechargeCenter({type:1,success:e=>{if(!isFlutterWebApp)for(const n of e)n.ppp=n.ppp.filter((e=>1!=e.ppType&&2!=e.ppType));const t=e.filter((e=>e.ppp.length>0));0==t.length&&appTrackNoThirdPay(),i.value=t.filter((e=>2==e.productType&&1==e.discountType)),a.value=t.filter((e=>1==e.productType))}})}));onUnmounted((()=>{u()})),netRechargeCenter({type:1,success:e=>{if(!isFlutterWebApp)for(const n of e)n.ppp=n.ppp.filter((e=>1!=e.ppType&&2!=e.ppType));const t=e.filter((e=>e.ppp.length>0));0==t.length&&appTrackNoThirdPay(),i.value=t.filter((e=>2==e.productType&&1==e.discountType)),a.value=t.filter((e=>1==e.productType))}});const d=e=>{showPayWay(e,r,n.anchorId,n.path)},A=t,p=()=>{changeUserIsBusy({rechargeBusy:!0,action:!1}),A("close")};return(e,t)=>{const r=index$g,c=index$i,l=ScrollView;return openBlock(),createBlock(r,{class:"content"},{default:withCtx((()=>[createVNode(r,{class:"recharge-nav"},{default:withCtx((()=>[createVNode(r,{class:"left"},{default:withCtx((()=>[createVNode(r,{class:"close",onClick:p}),createVNode(c,null,{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(lanKey).diamondShop.tr),1)])),_:1})])),_:1}),createVNode(r,{class:"right"},{default:withCtx((()=>[createVNode(r,{class:"diamond-image"}),createVNode(c,{class:"diamond-text"},{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(o)),1)])),_:1})])),_:1})])),_:1}),createVNode(l,{class:normalizeClass(["scroll",n.fullScreen?"scroll-fullHeight":"scroll-not-fullHeight"]),"scroll-y":""},{default:withCtx((()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(i.value,((e,t)=>(openBlock(),createBlock(r,{class:"discount-product",key:t,onClick:t=>d(e)},{default:withCtx((()=>[createVNode(r,{class:"diamond-area"},{default:withCtx((()=>[createVNode(r,{class:"diamond"}),createVNode(c,null,{default:withCtx((()=>[createTextVNode(toDisplayString$1(e.diamonds.toBin),1)])),_:2},1024)])),_:2},1024),createVNode(r,{class:"send-area"},{default:withCtx((()=>[e.matchCardNum>0?(openBlock(),createBlock(r,{key:0,class:"item"},{default:withCtx((()=>[createVNode(r,{class:"item-icon props-match"}),createVNode(c,null,{default:withCtx((()=>[createTextVNode("x"+toDisplayString$1(e.matchCardNum),1)])),_:2},1024)])),_:2},1024)):createCommentVNode("",!0),e.callCardNum>0?(openBlock(),createBlock(r,{key:1,class:"item"},{default:withCtx((()=>[createVNode(r,{class:"item-icon props-video"}),createVNode(c,null,{default:withCtx((()=>[createTextVNode("x"+toDisplayString$1(e.callCardNum),1)])),_:2},1024)])),_:2},1024)):createCommentVNode("",!0),e.chatCardNum>0?(openBlock(),createBlock(r,{key:2,class:"item"},{default:withCtx((()=>[createVNode(r,{class:"item-icon props-chat"}),createVNode(c,null,{default:withCtx((()=>[createTextVNode("x"+toDisplayString$1(e.chatCardNum),1)])),_:2},1024)])),_:2},1024)):createCommentVNode("",!0)])),_:2},1024),createVNode(r,{class:"recharge-btn"},{default:withCtx((()=>[createVNode(c,null,{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(getSymbolFromCurrency)(e.currencyCode))+toDisplayString$1(e.currencyPrice.toBin),1)])),_:2},1024),createVNode(c,{class:"origin-price"},{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(getSymbolFromCurrency)(e.currencyCode))+toDisplayString$1((e.currencyPrice/100/((100-e.discount)/100)).toFixed(2)),1)])),_:2},1024),e.discount>0?(openBlock(),createBlock(r,{key:0,class:"discount-num"},{default:withCtx((()=>[createVNode(c,null,{default:withCtx((()=>[createTextVNode(toDisplayString$1(e.discount)+"%",1)])),_:2},1024),createVNode(c,null,{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(lanKey).off.tr),1)])),_:1})])),_:2},1024)):createCommentVNode("",!0)])),_:2},1024),withDirectives(createVNode(r,{class:"num"},{default:withCtx((()=>[createTextVNode(toDisplayString$1(s.value),1)])),_:2},1536),[[vShow,2==e.productType&&1==e.discountType&&null!=s.value]])])),_:2},1032,["onClick"])))),128)),createVNode(r,{class:"products"},{default:withCtx((()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(a.value,((e,t)=>(openBlock(),createBlock(r,{class:"product",key:t,onClick:t=>d(e)},{default:withCtx((()=>[createVNode(r,{class:"diamond-area"},{default:withCtx((()=>[createVNode(r,{class:normalizeClass({diamond:!0,"diamond-more":t>0,"diamond-more-more":t>2})},null,8,["class"]),e.discount>0?(openBlock(),createBlock(r,{key:0,class:"discount-num transX"},{default:withCtx((()=>[createVNode(c,{class:"transX"},{default:withCtx((()=>[createTextVNode("-"+toDisplayString$1(e.discount)+"%",1)])),_:2},1024)])),_:2},1024)):createCommentVNode("",!0)])),_:2},1024),createVNode(r,{class:"product-detail"},{default:withCtx((()=>[createVNode(r,{class:"top"},{default:withCtx((()=>[createVNode(c,{class:"diamonds"},{default:withCtx((()=>[createTextVNode(toDisplayString$1(e.diamonds.toBin),1)])),_:2},1024),e.bonus>0?(openBlock(),createBlock(c,{key:0,class:"bonus"},{default:withCtx((()=>[createTextVNode("+"+toDisplayString$1(e.bonus.toBin),1)])),_:2},1024)):createCommentVNode("",!0)])),_:2},1024),createVNode(r,{class:"send-area"},{default:withCtx((()=>[e.matchCardNum>0?(openBlock(),createBlock(r,{key:0,class:"item"},{default:withCtx((()=>[createVNode(r,{class:"item-icon props-match"}),createVNode(c,null,{default:withCtx((()=>[createTextVNode("x"+toDisplayString$1(e.matchCardNum),1)])),_:2},1024)])),_:2},1024)):createCommentVNode("",!0),e.callCardNum>0?(openBlock(),createBlock(r,{key:1,class:"item"},{default:withCtx((()=>[createVNode(r,{class:"item-icon props-video"}),createVNode(c,null,{default:withCtx((()=>[createTextVNode("x"+toDisplayString$1(e.callCardNum),1)])),_:2},1024)])),_:2},1024)):createCommentVNode("",!0),e.chatCardNum>0?(openBlock(),createBlock(r,{key:2,class:"item"},{default:withCtx((()=>[createVNode(r,{class:"item-icon props-chat"}),createVNode(c,null,{default:withCtx((()=>[createTextVNode("x"+toDisplayString$1(e.chatCardNum),1)])),_:2},1024)])),_:2},1024)):createCommentVNode("",!0),createVNode(r,{class:"recharge-btn"},{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(getSymbolFromCurrency)(e.currencyCode))+toDisplayString$1(e.currencyPrice.toBin),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1}),createVNode(r,{style:{height:"20rpx"}}),createVNode(r,{class:"bottom-safe-inset"})])),_:1},8,["class"])])),_:1})}}},ModalRecharge=_export_sfc(_sfc_main$b,[["__scopeId","data-v-f5511b05"]]),_sfc_main$a={__name:"modal-recharge-pay-way",props:["data","type","anchorId","path"],emits:["close"],setup(e,{emit:t}){const n=e,r=ref(n.data);console.log("");const o=t,i=()=>o("close"),a=useAppDataStore().$onAction((({name:e,args:t})=>{"orderCompleteNotification"!=e||n.path!=brcPath.homeFloat&&n.path!=brcPath.matchFloat||i()}));return onUnmounted((()=>{a()})),(e,t)=>{const o=index$i,a=index$g,s=index$q,c=ScrollView;return openBlock(),createBlock(a,{class:"loginBack modal-gradient"},{default:withCtx((()=>[createVNode(a,{class:"pay-way-area-top"},{default:withCtx((()=>[createVNode(o,{class:"title"}),createVNode(a,{class:"more-diamond"}),createVNode(o,{class:"diamond-num"},{default:withCtx((()=>[createTextVNode(toDisplayString$1(r.value.diamonds.toBin),1)])),_:1})])),_:1}),createVNode(c,{"scroll-y":"",class:"pay-way-area"},{default:withCtx((()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.value.ppp,((e,t)=>(openBlock(),createBlock(a,{onClick:t=>(e=>{if(isFlutterWebApp)return void netCreateOrder({loading:!0,ppId:e.ppId,productId:r.value.productId,anchorUserId:n.anchorId,createPath:n.path,success:t=>{1==e.ppType?console.log(""):2==e.ppType?console.log(""):1==e.browserOpen?(console.log(""),toFlutterWebAppLaunchBrowser(t.ppUrl)):(console.log(""),toFlutterWebAppOpenNewWebView(t.ppUrl))},fail:()=>{console.log("")},netFail:()=>{console.log(" ")}});const t=window.open("","recharge","popup");t?(console.log("window.open"),netCreateOrder({loading:!1,ppId:e.ppId,productId:r.value.productId,anchorUserId:n.anchorId,createPath:n.path,success:e=>{console.log("window.open"),t.location=e.ppUrl,t.focus()},fail:()=>{console.log("  window.open"),t.close()},netFail:()=>{console.log("   window.open"),t.close()}})):console.log("window.open")})(e),class:"pay-way-item"},{default:withCtx((()=>[createVNode(a,{class:"top"},{default:withCtx((()=>[createVNode(a,{class:"pay-way-detail"},{default:withCtx((()=>[createVNode(a,{class:"pay-icon"},{default:withCtx((()=>[createVNode(s,{src:e.nationalFlagPath,mode:"aspectFit"},null,8,["src"])])),_:2},1024),createVNode(o,null,{default:withCtx((()=>[createTextVNode(toDisplayString$1(e.ccName),1)])),_:2},1024)])),_:2},1024),createVNode(a,{class:"recharge-btn"},{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(getSymbolFromCurrency)(e.currencyCode))+toDisplayString$1(e.currencyPrice.toBin),1)])),_:2},1024)])),_:2},1024),e.matchCardNum>0||e.callCardNum>0||e.chatCardNum>0||e.bonus>0?(openBlock(),createBlock(a,{key:0,class:"bottom-area"},{default:withCtx((()=>[createVNode(a,{class:"line"}),createVNode(a,{class:"send-area"},{default:withCtx((()=>[createVNode(a,{class:"send-tip"},{default:withCtx((()=>[createVNode(o,null,{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(lanKey).send.tr),1)])),_:1})])),_:1}),e.matchCardNum>0?(openBlock(),createBlock(a,{key:0,class:"item"},{default:withCtx((()=>[createVNode(a,{class:"item-icon props-match"}),createVNode(o,null,{default:withCtx((()=>[createTextVNode("*"+toDisplayString$1(e.matchCardNum),1)])),_:2},1024)])),_:2},1024)):createCommentVNode("",!0),e.callCardNum>0?(openBlock(),createBlock(a,{key:1,class:"item"},{default:withCtx((()=>[createVNode(a,{class:"item-icon props-video"}),createVNode(o,null,{default:withCtx((()=>[createTextVNode("*"+toDisplayString$1(e.callCardNum),1)])),_:2},1024)])),_:2},1024)):createCommentVNode("",!0),e.chatCardNum>0?(openBlock(),createBlock(a,{key:2,class:"item"},{default:withCtx((()=>[createVNode(a,{class:"item-icon props-chat"}),createVNode(o,null,{default:withCtx((()=>[createTextVNode("*"+toDisplayString$1(e.chatCardNum),1)])),_:2},1024)])),_:2},1024)):createCommentVNode("",!0),e.bonus>0?(openBlock(),createBlock(a,{key:3,class:"item"},{default:withCtx((()=>[createVNode(a,{class:"item-icon props-diamond"}),createVNode(o,null,{default:withCtx((()=>[createTextVNode("*"+toDisplayString$1(e.bonus.toBin),1)])),_:2},1024)])),_:2},1024)):createCommentVNode("",!0)])),_:2},1024)])),_:2},1024)):createCommentVNode("",!0)])),_:2},1032,["onClick"])))),256)),createVNode(a,{style:{height:"64rpx"}})])),_:1}),createVNode(a,{class:"close-out",onClick:i},{default:withCtx((()=>[createVNode(a,{class:"close"})])),_:1})])),_:1})}}},ModalPayWay=_export_sfc(_sfc_main$a,[["__scopeId","data-v-70f8f588"]]),_sfc_main$9={__name:"modal-bag",emits:["close"],setup(e,{emit:t}){const{userDetail:n}=storeToRefs(useAppDataStore()),r=ref([]),o=t,i=()=>o("close"),a=useAppDataStore().$onAction((({name:e})=>{"remoteInvitationReceived"==e&&(console.log(" "),i())}));return onUnmounted((()=>{console.log(" "),a()})),(e,t)=>{const o=index$i,a=index$g,s=ScrollView;return openBlock(),createBlock(a,{class:"loginBack modal-gradient"},{default:withCtx((()=>[createVNode(a,{class:"title"},{default:withCtx((()=>[createVNode(o,null,{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(lanKey).myPackage.tr),1)])),_:1})])),_:1}),createVNode(s,{"scroll-y":"",class:"content"},{default:withCtx((()=>{var e;return[(openBlock(!0),createElementBlock(Fragment,null,renderList(null==(e=unref(n))?void 0:e.propVoList,((e,t)=>(openBlock(),createBlock(a,{class:"item",key:t},{default:withCtx((()=>[createVNode(a,{class:"top"},{default:withCtx((()=>[createVNode(a,{class:"item-icon-decoreation"},{default:withCtx((()=>[createVNode(a,{class:normalizeClass(["item-icon",{"props-match-big":5==e.propType,"props-video-big":1==e.propType,"props-chat-big":4==e.propType}])},null,8,["class"])])),_:2},1024),createVNode(a,{class:"detail"},{default:withCtx((()=>[createVNode(a,{class:"props-title"},{default:withCtx((()=>[createVNode(o,null,{default:withCtx((()=>[createTextVNode(toDisplayString$1(5==e.propType?unref(lanKey).matchCard.tr:1==e.propType?unref(lanKey).videoCard.tr:4==e.propType?unref(lanKey).chatCard.tr:""),1)])),_:2},1024)])),_:2},1024),createVNode(a,{class:"line"}),createVNode(a,{class:"rule",onClick:e=>(e=>{r.value.includes(e)?r.value.pop(e):r.value.push(e)})(t)},{default:withCtx((()=>[createVNode(o,null,{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(lanKey).useRule.tr),1)])),_:1}),createVNode(a,{class:normalizeClass(["arrow",{top:r.value.includes(t)}])},null,8,["class"])])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024),r.value.includes(t)?(openBlock(),createBlock(a,{key:0,class:"intro"},{default:withCtx((()=>{var t;return[createTextVNode(toDisplayString$1(5==e.propType?unref(lanKey).matchCardDes.tr:1==e.propType?unref(lanKey).videoCardDes.tr:4==e.propType?unref(lanKey).chatCardDes.trArg(null==(t=unref(getAppConfig)())?void 0:t.chatCardDays):""),1)]})),_:2},1024)):createCommentVNode("",!0),createVNode(a,{class:"num"},{default:withCtx((()=>[createTextVNode(toDisplayString$1(e.propNum),1)])),_:2},1024)])),_:2},1024)))),128)),createVNode(a,{style:{height:"40rpx"}})]})),_:1}),createVNode(a,{class:"close-out",onClick:i},{default:withCtx((()=>[createVNode(a,{class:"close"})])),_:1})])),_:1})}}},ModalBag=_export_sfc(_sfc_main$9,[["__scopeId","data-v-fb68333b"]]),_sfc_main$8={__name:"modal-setting",emits:["close"],setup(e,{emit:t}){const{userDetail:n}=storeToRefs(useAppDataStore()),r=e=>{a(),0==e?navigateTo({url:"/pages/tab_bar/mine/edit-profile/edit-profile"}):1==e&&navigateTo({url:"/pages/tab_bar/mine/setting/setting"})},o=()=>{showConfirmModal({title:lanKey.confirmLogout.tr,confirm:()=>{console.log(""),clearLoginAuth(),a()}})},i=t,a=()=>i("close"),s=useAppDataStore().$onAction((({name:e})=>{"remoteInvitationReceived"==e&&(console.log(" "),a())}));return onUnmounted((()=>{console.log(" "),s()})),(e,t)=>{const i=index$q,a=index$i,s=index$g;return openBlock(),createBlock(s,{class:"loginBack modal-gradient"},{default:withCtx((()=>[createVNode(s,{class:"user-info"},{default:withCtx((()=>{var e;return[createVNode(i,{class:"place-holder-gradient user-portrait",src:null==(e=unref(n))?void 0:e.portrait,mode:"aspectFill"},null,8,["src"]),createVNode(s,{class:"detail"},{default:withCtx((()=>[createVNode(a,{class:"nickName"},{default:withCtx((()=>{var e;return[createTextVNode(toDisplayString$1(null==(e=unref(n))?void 0:e.nickname),1)]})),_:1}),createVNode(s,{class:"country"},{default:withCtx((()=>{var e;return[createVNode(i,{class:"place-holder-gradient icon",src:null==(e=unref(n))?void 0:e.countryPath,mode:"aspectFill"},null,8,["src"]),createVNode(a,null,{default:withCtx((()=>{var e;return[createTextVNode(toDisplayString$1(null==(e=unref(n))?void 0:e.countryTitle),1)]})),_:1})]})),_:1})])),_:1})]})),_:1}),createVNode(s,{class:"line"}),createVNode(s,{class:"item",onClick:t[0]||(t[0]=e=>r(0))},{default:withCtx((()=>[createVNode(s,{class:"icon edit"}),createVNode(a,null,{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(lanKey).accountSetting.tr),1)])),_:1})])),_:1}),createVNode(s,{class:"item",onClick:t[1]||(t[1]=e=>r(1))},{default:withCtx((()=>[createVNode(s,{class:"icon setting"}),createVNode(a,null,{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(lanKey).systemSetting.tr),1)])),_:1})])),_:1}),createVNode(s,{class:"item",onClick:o},{default:withCtx((()=>[createVNode(s,{class:"icon logOut"}),createVNode(a,null,{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(lanKey).logOut.tr),1)])),_:1})])),_:1}),createVNode(s,{class:"bottom-safe-inset"})])),_:1})}}},ModalSetting=_export_sfc(_sfc_main$8,[["__scopeId","data-v-6bf7be0b"]]),audioCtx=createInnerAudioContext();function callPlay(){audioCtx.src="/static/music/call.mp3",audioCtx.play()}function callStop(){audioCtx.stop()}function matchPlay(){audioCtx.src="/static/music/match.mp3",audioCtx.play()}function matchStop(){audioCtx.stop()}audioCtx.loop=!0;var defaultInstanceSettings={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},defaultTweenSettings={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},validTransforms=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],cache={CSS:{},springs:{}};function minMax(e,t,n){return Math.min(Math.max(e,t),n)}function stringContains(e,t){return e.indexOf(t)>-1}function applyArguments(e,t){return e.apply(null,t)}var is={arr:function(e){return Array.isArray(e)},obj:function(e){return stringContains(Object.prototype.toString.call(e),"Object")},pth:function(e){return is.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return e.nodeType||is.svg(e)},str:function(e){return"string"==typeof e},fnc:function(e){return"function"==typeof e},und:function(e){return void 0===e},nil:function(e){return is.und(e)||null===e},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return is.hex(e)||is.rgb(e)||is.hsl(e)},key:function(e){return!defaultInstanceSettings.hasOwnProperty(e)&&!defaultTweenSettings.hasOwnProperty(e)&&"targets"!==e&&"keyframes"!==e}};function parseEasingParameters(e){var t=/\(([^)]+)\)/.exec(e);return t?t[1].split(",").map((function(e){return parseFloat(e)})):[]}function spring(e,t){var n=parseEasingParameters(e),r=minMax(is.und(n[0])?1:n[0],.1,100),o=minMax(is.und(n[1])?100:n[1],.1,100),i=minMax(is.und(n[2])?10:n[2],.1,100),a=minMax(is.und(n[3])?0:n[3],.1,100),s=Math.sqrt(o/r),c=i/(2*Math.sqrt(o*r)),l=c<1?s*Math.sqrt(1-c*c):0,u=c<1?(c*s-a)/l:-a+s;function d(e){var n=t?t*e/1e3:e;return n=c<1?Math.exp(-n*c*s)*(1*Math.cos(l*n)+u*Math.sin(l*n)):(1+u*n)*Math.exp(-n*s),0===e||1===e?e:1-n}return t?d:function(){var t=cache.springs[e];if(t)return t;for(var n=1/6,r=0,o=0;;)if(1===d(r+=n)){if(++o>=16)break}else o=0;var i=r*n*1e3;return cache.springs[e]=i,i}}function steps(e){return void 0===e&&(e=10),function(t){return Math.ceil(minMax(t,1e-6,1)*e)*(1/e)}}var bezier=function(){var e=.1;function t(e,t){return 1-3*t+3*e}function n(e,t){return 3*t-6*e}function r(e){return 3*e}function o(e,o,i){return((t(o,i)*e+n(o,i))*e+r(o))*e}function i(e,o,i){return 3*t(o,i)*e*e+2*n(o,i)*e+r(o)}return function(t,n,r,a){if(0<=t&&t<=1&&0<=r&&r<=1){var s=new Float32Array(11);if(t!==n||r!==a)for(var c=0;c<11;++c)s[c]=o(c*e,t,r);return function(e){return t===n&&r===a||0===e||1===e?e:o(l(e),n,a)}}function l(n){for(var a=0,c=1;10!==c&&s[c]<=n;++c)a+=e;--c;var l=a+(n-s[c])/(s[c+1]-s[c])*e,u=i(l,t,r);return u>=.001?function(e,t,n,r){for(var a=0;a<4;++a){var s=i(t,n,r);if(0===s)return t;t-=(o(t,n,r)-e)/s}return t}(n,l,t,r):0===u?l:function(e,t,n,r,i){var a,s,c=0;do{(a=o(s=t+(n-t)/2,r,i)-e)>0?n=s:t=s}while(Math.abs(a)>1e-7&&++c<10);return s}(n,a,a+e,t,r)}}}(),penner=(eases={linear:function(){return function(e){return e}}},functionEasings={Sine:function(){return function(e){return 1-Math.cos(e*Math.PI/2)}},Expo:function(){return function(e){return e?Math.pow(2,10*e-10):0}},Circ:function(){return function(e){return 1-Math.sqrt(1-e*e)}},Back:function(){return function(e){return e*e*(3*e-2)}},Bounce:function(){return function(e){for(var t,n=4;e<((t=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*t-2)/22-e,2)}},Elastic:function(e,t){void 0===e&&(e=1),void 0===t&&(t=.5);var n=minMax(e,1,10),r=minMax(t,.1,2);return function(e){return 0===e||1===e?e:-n*Math.pow(2,10*(e-1))*Math.sin((e-1-r/(2*Math.PI)*Math.asin(1/n))*(2*Math.PI)/r)}}},["Quad","Cubic","Quart","Quint"].forEach((function(e,t){functionEasings[e]=function(){return function(e){return Math.pow(e,t+2)}}})),Object.keys(functionEasings).forEach((function(e){var t=functionEasings[e];eases["easeIn"+e]=t,eases["easeOut"+e]=function(e,n){return function(r){return 1-t(e,n)(1-r)}},eases["easeInOut"+e]=function(e,n){return function(r){return r<.5?t(e,n)(2*r)/2:1-t(e,n)(-2*r+2)/2}},eases["easeOutIn"+e]=function(e,n){return function(r){return r<.5?(1-t(e,n)(1-2*r))/2:(t(e,n)(2*r-1)+1)/2}}})),eases),eases,functionEasings;function parseEasings(e,t){if(is.fnc(e))return e;var n=e.split("(")[0],r=penner[n],o=parseEasingParameters(e);switch(n){case"spring":return spring(e,t);case"cubicBezier":return applyArguments(bezier,o);case"steps":return applyArguments(steps,o);default:return applyArguments(r,o)}}function selectString(e){try{return document.querySelectorAll(e)}catch(t){return}}function filterArray(e,t){for(var n=e.length,r=arguments.length>=2?arguments[1]:void 0,o=[],i=0;i<n;i++)if(i in e){var a=e[i];t.call(r,a,i,e)&&o.push(a)}return o}function flattenArray(e){return e.reduce((function(e,t){return e.concat(is.arr(t)?flattenArray(t):t)}),[])}function toArray$1(e){return is.arr(e)?e:(is.str(e)&&(e=selectString(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function arrayContains(e,t){return e.some((function(e){return e===t}))}function cloneObject(e){var t={};for(var n in e)t[n]=e[n];return t}function replaceObjectProps(e,t){var n=cloneObject(e);for(var r in e)n[r]=t.hasOwnProperty(r)?t[r]:e[r];return n}function mergeObjects(e,t){var n=cloneObject(e);for(var r in t)n[r]=is.und(e[r])?t[r]:e[r];return n}function rgbToRgba(e){var t=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(e);return t?"rgba("+t[1]+",1)":e}function hexToRgba(e){var t=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,r){return t+t+n+n+r+r})),n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return"rgba("+parseInt(n[1],16)+","+parseInt(n[2],16)+","+parseInt(n[3],16)+",1)"}function hslToRgba(e){var t,n,r,o=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),i=parseInt(o[1],10)/360,a=parseInt(o[2],10)/100,s=parseInt(o[3],10)/100,c=o[4]||1;function l(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(0==a)t=n=r=s;else{var u=s<.5?s*(1+a):s+a-s*a,d=2*s-u;t=l(d,u,i+1/3),n=l(d,u,i),r=l(d,u,i-1/3)}return"rgba("+255*t+","+255*n+","+255*r+","+c+")"}function colorToRgb(e){return is.rgb(e)?rgbToRgba(e):is.hex(e)?hexToRgba(e):is.hsl(e)?hslToRgba(e):void 0}function getUnit(e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(t)return t[1]}function getTransformUnit(e){return stringContains(e,"translate")||"perspective"===e?"px":stringContains(e,"rotate")||stringContains(e,"skew")?"deg":void 0}function getFunctionValue(e,t){return is.fnc(e)?e(t.target,t.id,t.total):e}function getAttribute(e,t){return e.getAttribute(t)}function convertPxToUnit(e,t,n){if(arrayContains([n,"deg","rad","turn"],getUnit(t)))return t;var r=cache.CSS[t+n];if(!is.und(r))return r;var o=document.createElement(e.tagName),i=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;i.appendChild(o),o.style.position="absolute",o.style.width=100+n;var a=100/o.offsetWidth;i.removeChild(o);var s=a*parseFloat(t);return cache.CSS[t+n]=s,s}function getCSSValue(e,t,n){if(t in e.style){var r=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),o=e.style[t]||getComputedStyle(e).getPropertyValue(r)||"0";return n?convertPxToUnit(e,o,n):o}}function getAnimationType(e,t){return is.dom(e)&&!is.inp(e)&&(!is.nil(getAttribute(e,t))||is.svg(e)&&e[t])?"attribute":is.dom(e)&&arrayContains(validTransforms,t)?"transform":is.dom(e)&&"transform"!==t&&getCSSValue(e,t)?"css":null!=e[t]?"object":void 0}function getElementTransforms(e){if(is.dom(e)){for(var t,n=e.style.transform||"",r=/(\w+)\(([^)]*)\)/g,o=new Map;t=r.exec(n);)o.set(t[1],t[2]);return o}}function getTransformValue(e,t,n,r){var o=stringContains(t,"scale")?1:0+getTransformUnit(t),i=getElementTransforms(e).get(t)||o;return n&&(n.transforms.list.set(t,i),n.transforms.last=t),r?convertPxToUnit(e,i,r):i}function getOriginalTargetValue(e,t,n,r){switch(getAnimationType(e,t)){case"transform":return getTransformValue(e,t,r,n);case"css":return getCSSValue(e,t,n);case"attribute":return getAttribute(e,t);default:return e[t]||0}}function getRelativeValue(e,t){var n=/^(\*=|\+=|-=)/.exec(e);if(!n)return e;var r=getUnit(e)||0,o=parseFloat(t),i=parseFloat(e.replace(n[0],""));switch(n[0][0]){case"+":return o+i+r;case"-":return o-i+r;case"*":return o*i+r}}function validateValue(e,t){if(is.col(e))return colorToRgb(e);if(/\s/g.test(e))return e;var n=getUnit(e),r=n?e.substr(0,e.length-n.length):e;return t?r+t:r}function getDistance(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function getCircleLength(e){return 2*Math.PI*getAttribute(e,"r")}function getRectLength(e){return 2*getAttribute(e,"width")+2*getAttribute(e,"height")}function getLineLength(e){return getDistance({x:getAttribute(e,"x1"),y:getAttribute(e,"y1")},{x:getAttribute(e,"x2"),y:getAttribute(e,"y2")})}function getPolylineLength(e){for(var t,n=e.points,r=0,o=0;o<n.numberOfItems;o++){var i=n.getItem(o);o>0&&(r+=getDistance(t,i)),t=i}return r}function getPolygonLength(e){var t=e.points;return getPolylineLength(e)+getDistance(t.getItem(t.numberOfItems-1),t.getItem(0))}function getTotalLength(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return getCircleLength(e);case"rect":return getRectLength(e);case"line":return getLineLength(e);case"polyline":return getPolylineLength(e);case"polygon":return getPolygonLength(e)}}function setDashoffset(e){var t=getTotalLength(e);return e.setAttribute("stroke-dasharray",t),t}function getParentSvgEl(e){for(var t=e.parentNode;is.svg(t)&&is.svg(t.parentNode);)t=t.parentNode;return t}function getParentSvg(e,t){var n=t||{},r=n.el||getParentSvgEl(e),o=r.getBoundingClientRect(),i=getAttribute(r,"viewBox"),a=o.width,s=o.height,c=n.viewBox||(i?i.split(" "):[0,0,a,s]);return{el:r,viewBox:c,x:c[0]/1,y:c[1]/1,w:a,h:s,vW:c[2],vH:c[3]}}function getPath(e,t){var n=is.str(e)?selectString(e)[0]:e,r=t||100;return function(e){return{property:e,el:n,svg:getParentSvg(n),totalLength:getTotalLength(n)*(r/100)}}}function getPathProgress(e,t,n){function r(n){void 0===n&&(n=0);var r=t+n>=1?t+n:0;return e.el.getPointAtLength(r)}var o=getParentSvg(e.el,e.svg),i=r(),a=r(-1),s=r(1),c=n?1:o.w/o.vW,l=n?1:o.h/o.vH;switch(e.property){case"x":return(i.x-o.x)*c;case"y":return(i.y-o.y)*l;case"angle":return 180*Math.atan2(s.y-a.y,s.x-a.x)/Math.PI}}function decomposeValue(e,t){var n=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,r=validateValue(is.pth(e)?e.totalLength:e,t)+"";return{original:r,numbers:r.match(n)?r.match(n).map(Number):[0],strings:is.str(e)||t?r.split(n):[]}}function parseTargets(e){return filterArray(e?flattenArray(is.arr(e)?e.map(toArray$1):toArray$1(e)):[],(function(e,t,n){return n.indexOf(e)===t}))}function getAnimatables(e){var t=parseTargets(e);return t.map((function(e,n){return{target:e,id:n,total:t.length,transforms:{list:getElementTransforms(e)}}}))}function normalizePropertyTweens(e,t){var n=cloneObject(t);if(/^spring/.test(n.easing)&&(n.duration=spring(n.easing)),is.arr(e)){var r=e.length;2===r&&!is.obj(e[0])?e={value:e}:is.fnc(t.duration)||(n.duration=t.duration/r)}var o=is.arr(e)?e:[e];return o.map((function(e,n){var r=is.obj(e)&&!is.pth(e)?e:{value:e};return is.und(r.delay)&&(r.delay=n?0:t.delay),is.und(r.endDelay)&&(r.endDelay=n===o.length-1?t.endDelay:0),r})).map((function(e){return mergeObjects(e,n)}))}function flattenKeyframes(e){for(var t=filterArray(flattenArray(e.map((function(e){return Object.keys(e)}))),(function(e){return is.key(e)})).reduce((function(e,t){return e.indexOf(t)<0&&e.push(t),e}),[]),n={},r=function(r){var o=t[r];n[o]=e.map((function(e){var t={};for(var n in e)is.key(n)?n==o&&(t.value=e[n]):t[n]=e[n];return t}))},o=0;o<t.length;o++)r(o);return n}function getProperties(e,t){var n=[],r=t.keyframes;for(var o in r&&(t=mergeObjects(flattenKeyframes(r),t)),t)is.key(o)&&n.push({name:o,tweens:normalizePropertyTweens(t[o],e)});return n}function normalizeTweenValues(e,t){var n={};for(var r in e){var o=getFunctionValue(e[r],t);is.arr(o)&&1===(o=o.map((function(e){return getFunctionValue(e,t)}))).length&&(o=o[0]),n[r]=o}return n.duration=parseFloat(n.duration),n.delay=parseFloat(n.delay),n}function normalizeTweens(e,t){var n;return e.tweens.map((function(r){var o=normalizeTweenValues(r,t),i=o.value,a=is.arr(i)?i[1]:i,s=getUnit(a),c=getOriginalTargetValue(t.target,e.name,s,t),l=n?n.to.original:c,u=is.arr(i)?i[0]:l,d=getUnit(u)||getUnit(c),A=s||d;return is.und(a)&&(a=l),o.from=decomposeValue(u,A),o.to=decomposeValue(getRelativeValue(a,u),A),o.start=n?n.end:0,o.end=o.start+o.delay+o.duration+o.endDelay,o.easing=parseEasings(o.easing,o.duration),o.isPath=is.pth(i),o.isPathTargetInsideSVG=o.isPath&&is.svg(t.target),o.isColor=is.col(o.from.original),o.isColor&&(o.round=1),n=o,o}))}var setProgressValue={css:function(e,t,n){return e.style[t]=n},attribute:function(e,t,n){return e.setAttribute(t,n)},object:function(e,t,n){return e[t]=n},transform:function(e,t,n,r,o){if(r.list.set(t,n),t===r.last||o){var i="";r.list.forEach((function(e,t){i+=t+"("+e+") "})),e.style.transform=i}}};function setTargetsValue(e,t){getAnimatables(e).forEach((function(e){for(var n in t){var r=getFunctionValue(t[n],e),o=e.target,i=getUnit(r),a=getOriginalTargetValue(o,n,i,e),s=getRelativeValue(validateValue(r,i||getUnit(a)),a),c=getAnimationType(o,n);setProgressValue[c](o,n,s,e.transforms,!0)}}))}function createAnimation(e,t){var n=getAnimationType(e.target,t.name);if(n){var r=normalizeTweens(t,e),o=r[r.length-1];return{type:n,property:t.name,animatable:e,tweens:r,duration:o.end,delay:r[0].delay,endDelay:o.endDelay}}}function getAnimations(e,t){return filterArray(flattenArray(e.map((function(e){return t.map((function(t){return createAnimation(e,t)}))}))),(function(e){return!is.und(e)}))}function getInstanceTimings(e,t){var n=e.length,r=function(e){return e.timelineOffset?e.timelineOffset:0},o={};return o.duration=n?Math.max.apply(Math,e.map((function(e){return r(e)+e.duration}))):t.duration,o.delay=n?Math.min.apply(Math,e.map((function(e){return r(e)+e.delay}))):t.delay,o.endDelay=n?o.duration-Math.max.apply(Math,e.map((function(e){return r(e)+e.duration-e.endDelay}))):t.endDelay,o}var instanceID=0;function createNewInstance(e){var t=replaceObjectProps(defaultInstanceSettings,e),n=replaceObjectProps(defaultTweenSettings,e),r=getProperties(n,e),o=getAnimatables(e.targets),i=getAnimations(o,r),a=getInstanceTimings(i,n),s=instanceID;return instanceID++,mergeObjects(t,{id:s,children:[],animatables:o,animations:i,duration:a.duration,delay:a.delay,endDelay:a.endDelay})}var activeInstances=[],engine=function(){var e;function t(n){for(var r=activeInstances.length,o=0;o<r;){var i=activeInstances[o];i.paused?(activeInstances.splice(o,1),r--):(i.tick(n),o++)}e=o>0?requestAnimationFrame(t):void 0}return"undefined"!=typeof document&&document.addEventListener("visibilitychange",(function(){anime.suspendWhenDocumentHidden&&(isDocumentHidden()?e=cancelAnimationFrame(e):(activeInstances.forEach((function(e){return e._onDocumentVisibility()})),engine()))})),function(){e||isDocumentHidden()&&anime.suspendWhenDocumentHidden||!(activeInstances.length>0)||(e=requestAnimationFrame(t))}}();function isDocumentHidden(){return!!document&&document.hidden}function anime(e){void 0===e&&(e={});var t,n=0,r=0,o=0,i=0,a=null;function s(e){var t=window.Promise&&new Promise((function(e){return a=e}));return e.finished=t,t}var c=createNewInstance(e);function l(){var e=c.direction;"alternate"!==e&&(c.direction="normal"!==e?"normal":"reverse"),c.reversed=!c.reversed,t.forEach((function(e){return e.reversed=c.reversed}))}function u(e){return c.reversed?c.duration-e:e}function d(){n=0,r=u(c.currentTime)*(1/anime.speed)}function A(e,t){t&&t.seek(e-t.timelineOffset)}function p(e){for(var t=0,n=c.animations,r=n.length;t<r;){var o=n[t],i=o.animatable,a=o.tweens,s=a.length-1,l=a[s];s&&(l=filterArray(a,(function(t){return e<t.end}))[0]||l);for(var u=minMax(e-l.start-l.delay,0,l.duration)/l.duration,d=isNaN(u)?1:l.easing(u),A=l.to.strings,p=l.round,h=[],f=l.to.numbers.length,g=void 0,m=0;m<f;m++){var _=void 0,E=l.to.numbers[m],v=l.from.numbers[m]||0;_=l.isPath?getPathProgress(l.value,d*E,l.isPathTargetInsideSVG):v+d*(E-v),p&&(l.isColor&&m>2||(_=Math.round(_*p)/p)),h.push(_)}var y=A.length;if(y){g=A[0];for(var b=0;b<y;b++){A[b];var C=A[b+1],S=h[b];isNaN(S)||(g+=C?S+C:S+" ")}}else g=h[0];setProgressValue[o.type](i.target,o.property,g,i.transforms),o.currentValue=g,t++}}function h(e){c[e]&&!c.passThrough&&c[e](c)}function f(e){var d=c.duration,f=c.delay,g=d-c.endDelay,m=u(e);c.progress=minMax(m/d*100,0,100),c.reversePlayback=m<c.currentTime,t&&function(e){if(c.reversePlayback)for(var n=i;n--;)A(e,t[n]);else for(var r=0;r<i;r++)A(e,t[r])}(m),!c.began&&c.currentTime>0&&(c.began=!0,h("begin")),!c.loopBegan&&c.currentTime>0&&(c.loopBegan=!0,h("loopBegin")),m<=f&&0!==c.currentTime&&p(0),(m>=g&&c.currentTime!==d||!d)&&p(d),m>f&&m<g?(c.changeBegan||(c.changeBegan=!0,c.changeCompleted=!1,h("changeBegin")),h("change"),p(m)):c.changeBegan&&(c.changeCompleted=!0,c.changeBegan=!1,h("changeComplete")),c.currentTime=minMax(m,0,d),c.began&&h("update"),e>=d&&(r=0,c.remaining&&!0!==c.remaining&&c.remaining--,c.remaining?(n=o,h("loopComplete"),c.loopBegan=!1,"alternate"===c.direction&&l()):(c.paused=!0,c.completed||(c.completed=!0,h("loopComplete"),h("complete"),!c.passThrough&&"Promise"in window&&(a(),s(c)))))}return s(c),c.reset=function(){var e=c.direction;c.passThrough=!1,c.currentTime=0,c.progress=0,c.paused=!0,c.began=!1,c.loopBegan=!1,c.changeBegan=!1,c.completed=!1,c.changeCompleted=!1,c.reversePlayback=!1,c.reversed="reverse"===e,c.remaining=c.loop,t=c.children;for(var n=i=t.length;n--;)c.children[n].reset();(c.reversed&&!0!==c.loop||"alternate"===e&&1===c.loop)&&c.remaining++,p(c.reversed?c.duration:0)},c._onDocumentVisibility=d,c.set=function(e,t){return setTargetsValue(e,t),c},c.tick=function(e){o=e,n||(n=o),f((o+(r-n))*anime.speed)},c.seek=function(e){f(u(e))},c.pause=function(){c.paused=!0,d()},c.play=function(){c.paused&&(c.completed&&c.reset(),c.paused=!1,activeInstances.push(c),d(),engine())},c.reverse=function(){l(),c.completed=!c.reversed,d()},c.restart=function(){c.reset(),c.play()},c.remove=function(e){removeTargetsFromInstance(parseTargets(e),c)},c.reset(),c.autoplay&&c.play(),c}function removeTargetsFromAnimations(e,t){for(var n=t.length;n--;)arrayContains(e,t[n].animatable.target)&&t.splice(n,1)}function removeTargetsFromInstance(e,t){var n=t.animations,r=t.children;removeTargetsFromAnimations(e,n);for(var o=r.length;o--;){var i=r[o],a=i.animations;removeTargetsFromAnimations(e,a),a.length||i.children.length||r.splice(o,1)}n.length||r.length||t.pause()}function removeTargetsFromActiveInstances(e){for(var t=parseTargets(e),n=activeInstances.length;n--;){removeTargetsFromInstance(t,activeInstances[n])}}function stagger(e,t){void 0===t&&(t={});var n=t.direction||"normal",r=t.easing?parseEasings(t.easing):null,o=t.grid,i=t.axis,a=t.from||0,s="first"===a,c="center"===a,l="last"===a,u=is.arr(e),d=u?parseFloat(e[0]):parseFloat(e),A=u?parseFloat(e[1]):0,p=getUnit(u?e[1]:e)||0,h=t.start||0+(u?d:0),f=[],g=0;return function(e,t,m){if(s&&(a=0),c&&(a=(m-1)/2),l&&(a=m-1),!f.length){for(var _=0;_<m;_++){if(o){var E=c?(o[0]-1)/2:a%o[0],v=c?(o[1]-1)/2:Math.floor(a/o[0]),y=E-_%o[0],b=v-Math.floor(_/o[0]),C=Math.sqrt(y*y+b*b);"x"===i&&(C=-y),"y"===i&&(C=-b),f.push(C)}else f.push(Math.abs(a-_));g=Math.max.apply(Math,f)}r&&(f=f.map((function(e){return r(e/g)*g}))),"reverse"===n&&(f=f.map((function(e){return i?e<0?-1*e:-e:Math.abs(g-e)})))}return h+(u?(A-d)/g:d)*(Math.round(100*f[t])/100)+p}}function timeline(e){void 0===e&&(e={});var t=anime(e);return t.duration=0,t.add=function(n,r){var o=activeInstances.indexOf(t),i=t.children;function a(e){e.passThrough=!0}o>-1&&activeInstances.splice(o,1);for(var s=0;s<i.length;s++)a(i[s]);var c=mergeObjects(n,replaceObjectProps(defaultTweenSettings,e));c.targets=c.targets||e.targets;var l=t.duration;c.autoplay=!1,c.direction=t.direction,c.timelineOffset=is.und(r)?l:getRelativeValue(r,l),a(t),t.seek(c.timelineOffset);var u=anime(c);a(u),i.push(u);var d=getInstanceTimings(i,e);return t.delay=d.delay,t.endDelay=d.endDelay,t.duration=d.duration,t.seek(0),t.reset(),t.autoplay&&t.play(),t},t}anime.version="3.2.1",anime.speed=1,anime.suspendWhenDocumentHidden=!0,anime.running=activeInstances,anime.remove=removeTargetsFromActiveInstances,anime.get=getOriginalTargetValue,anime.set=setTargetsValue,anime.convertPx=convertPxToUnit,anime.path=getPath,anime.setDashoffset=setDashoffset,anime.stagger=stagger,anime.timeline=timeline,anime.easing=parseEasings,anime.penner=penner,anime.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},console.log(" ai.js");let uDetail=null,uHaveCallCard=null,_aiConfig=null,_currentAIConfig=null,globalDelay=0,rejectDelay=0;const globalDelayKey="ai_delayGlobalKey",{localGlobalDelay:localGlobalDelay,localGlobalDelayTs:localGlobalDelayTs}=storeRead(globalDelayKey);if(""!==localGlobalDelayTs&&null!=localGlobalDelayTs){const e=Date.now()-localGlobalDelayTs;if(e>0){let t=Math.floor(e/1e3);globalDelay=Math.max(localGlobalDelay-t,0),console.log(`AII ai ${globalDelay}`)}}const rejectDelayKey="ai_delayRejectKey",{localRejectDelay:localRejectDelay,localRejectDelayTs:localRejectDelayTs}=storeRead(rejectDelayKey);if(""!==localRejectDelayTs&&null!=localRejectDelayTs){const e=Date.now()-localRejectDelayTs;if(e>0){let t=Math.floor(e/1e3);rejectDelay=Math.max(localRejectDelay-t,0),console.log(`AII ai ${rejectDelay}`)}}let timerTrigger=0;const todayDate=timestampToYearMothDay(Date.now()).toString();let aiConfigTypeChanging=!1;const aiConfigTypeKey="ai_aiConfigTypeKey";let aiConfigType=storeRead(aiConfigTypeKey);const aiConfigChangeDelayKey="ai_configChangeDelayKey";let aiConfigChangeDelay=storeRead(aiConfigChangeDelayKey);""!=aiConfigChangeDelay&&null!=aiConfigChangeDelay&&null!=aiConfigChangeDelay||(aiConfigChangeDelay=-1);const changeAiConfigType=e=>{aiConfigTypeChanging=!0,console.log("AII ai  ai"),globalDelay=0,rejectDelay=0,timerTrigger=0,aivDayCount=0,aivTotalCount=0,homeDayCount=0,homeDayTotalCount=0,homeSlideTrigger=!1,timerTriggerCount=0,continueRejectAiCount=0,rejectTotalTriggerCount=0,anchorTrigger=!1,anchorLastestPauseDelay=0,storeClear(anchorPauseDelayKey),storeClear(anchorVisiteQueueKey),storeClear(globalDelayKey),storeClear(rejectDelayKey),storeClear(aivTotalCountKey),storeClear(aivDayCountKey),storeClear(homeTotalCountKey),storeClear(homeDayCountKey),storeClear(timerTriggerCountKey),storeClear(continueRejectAiCountKey),storeClear(rejectTotalTriggerCountKey),aiConfigType=e,(2==aiConfigType&&3==e||3==aiConfigType&&2==e)&&(console.log(`AII  aib ${null==_currentAIConfig?void 0:_currentAIConfig.typeDelay}`),aiConfigChangeDelay=null==_currentAIConfig?void 0:_currentAIConfig.typeDelay,storeSave({key:aiConfigChangeDelayKey,value:aiConfigChangeDelay})),storeSave({key:aiConfigTypeKey,value:aiConfigType}),aiConfigTypeChanging=!1},aivTotalCountKey="ai_aivTotalCountKey",aivDayCountKey="ai_aivDayCountKey",{date:date,count:count}=storeRead(aivDayCountKey);let aivDayCount=date==todayDate?count:0;storeSave({key:aivDayCountKey,value:{date:todayDate,count:aivDayCount}});let aivTotalCount=storeRead(aivTotalCountKey);""!=aivDayCount&&null!=aivDayCount&&null!=aivDayCount||(aivDayCount=0),""!=aivTotalCount&&null!=aivTotalCount&&null!=aivTotalCount||(aivTotalCount=0);const homeTotalCountKey="ai_homeTotalCountKey",homeDayCountKey="ai_homeDayCountKey",{homeDate:homeDate,homeCount:homeCount}=storeRead(homeDayCountKey);let homeDayCount=homeDate==todayDate?homeCount:0;storeSave({key:homeDayCountKey,value:{homeDate:todayDate,homeCount:homeDayCount}});const{homeTotalDate:homeTotalDate,homeTotalCount:homeTotalCount}=storeRead(homeTotalCountKey);let homeDayTotalCount=homeTotalDate==todayDate?homeTotalCount:0;""!=homeDayCount&&null!=homeDayCount&&null!=homeDayCount||(homeDayCount=0),""!=homeDayTotalCount&&null!=homeDayTotalCount&&null!=homeDayTotalCount||(homeDayTotalCount=0);let homeSlideTrigger=!1;const changeHomeDayCount=()=>{if(1==homeSlideTrigger)console.log("AII home ai ");else if(rejectDelay>0||globalDelay>0)console.log("AII home  ");else if(null!=_currentAIConfig){const e=null==_currentAIConfig?void 0:_currentAIConfig.slideLimit;if(homeDayTotalCount>=e)console.log(`AII home  ${homeDayTotalCount}`);else{homeDayCount++,storeSave({key:homeDayCountKey,value:{homeDate:todayDate,homeCount:homeDayCount}});const e=null==_currentAIConfig?void 0:_currentAIConfig.slideUnit;homeDayCount%e==0&&(console.log("AII home ai"),homeSlideTrigger=!0,homeDayTotalCount++,storeSave({key:homeTotalCountKey,value:{homeTotalDate:todayDate,homeTotalCount:homeDayTotalCount}}))}}else null==_currentAIConfig&&console.log("AII home ai home")},timerTriggerCountKey="ai_timerTriggerCountKey";let timerTriggerCount=storeRead(timerTriggerCountKey);""!=timerTriggerCount&&null!=timerTriggerCount&&null!=timerTriggerCount||(timerTriggerCount=0);const continueRejectAiCountKey="ai_continueRejectAiCountKey";let continueRejectAiCount=storeRead(continueRejectAiCountKey);""!=continueRejectAiCount&&null!=continueRejectAiCount&&null!=continueRejectAiCount||(continueRejectAiCount=0);const resetContinueRejectAiCount=()=>{console.log("AII   "),continueRejectAiCount=0,storeSave({key:continueRejectAiCountKey,value:continueRejectAiCount})},rejectTotalTriggerCountKey="ai_rejectTotalTriggerCountKey";let rejectTotalTriggerCount=storeRead(rejectTotalTriggerCountKey);""!=rejectTotalTriggerCount&&null!=rejectTotalTriggerCount&&null!=rejectTotalTriggerCount||(rejectTotalTriggerCount=0);const addRejectCount=()=>{if(console.log("AII  ai"),rejectDelay>0)return void console.log("AII  ai ");continueRejectAiCount++,storeSave({key:continueRejectAiCountKey,value:continueRejectAiCount}),rejectTotalTriggerCount++,storeSave({key:rejectTotalTriggerCountKey,value:rejectTotalTriggerCount});const e=null==_currentAIConfig?void 0:_currentAIConfig.refuseUnit;if(continueRejectAiCount>=e){const e=null==_currentAIConfig?void 0:_currentAIConfig.refuseReset;rejectDelay=e,console.log(`AII  ai ${rejectDelay}`)}const t=null==_currentAIConfig?void 0:_currentAIConfig.refuseLimit;if(rejectTotalTriggerCount>=t){const e=null==_currentAIConfig?void 0:_currentAIConfig.refuseReset;rejectDelay=e,console.log(`AII  ai ${rejectDelay}`)}};let anchorLastestPauseDelay=0;const anchorPauseDelayKey="ai_anchorPauseDelayKey",{anchorPauseDelay:anchorPauseDelay,anchorPauseDelayTs:anchorPauseDelayTs}=storeRead(anchorPauseDelayKey);if(""!==anchorPauseDelayTs&&null!=anchorPauseDelayTs){const e=Date.now()-anchorPauseDelayTs;if(e>0){let t=Math.floor(e/1e3);anchorLastestPauseDelay=Math.max(anchorPauseDelay-t,0),console.log(`AII  ai ${anchorLastestPauseDelay}`)}}let anchorTrigger=!1;const anchorStayTriggerAi=(e,t)=>{anchorLastestPauseDelay>0?console.log(`AII    ${anchorLastestPauseDelay}`):e===(null==_currentAIConfig?void 0:_currentAIConfig.scanStay)&&(console.log("AII  ai "),rejectDelay>0||globalDelay>0?console.log("AII    "):anchorTrigger=!0,t(),visiteQueue=[],storeSave({key:anchorVisiteQueueKey,value:visiteQueue}))},anchorVisiteQueueKey="ai_anchorVisiteQueueKey";let visiteQueue=storeRead(anchorVisiteQueueKey);""!=visiteQueue&&null!=visiteQueue&&null!=visiteQueue||(visiteQueue=[]);const anchorVisiteTriggerAi=(e,t)=>{if(console.log(`AII   ${e}`),anchorLastestPauseDelay>0)console.log(`AII  ai ${anchorLastestPauseDelay}`);else{const n={anchorId:e,date:Date.now()};visiteQueue.push(n),storeSave({key:anchorVisiteQueueKey,value:visiteQueue,success:()=>{if(visiteQueue.length>=(null==_currentAIConfig?void 0:_currentAIConfig.scanLimit)){visiteQueue.length>(null==_currentAIConfig?void 0:_currentAIConfig.scanLimit)&&(console.log("AII   "),visiteQueue=visiteQueue.slice(-(null==_currentAIConfig?void 0:_currentAIConfig.scanLimit)),storeSave({key:anchorVisiteQueueKey,value:visiteQueue})),console.log("AII  ai ");const e=visiteQueue[0];visiteQueue[visiteQueue.length-1].date-e.date<=1e3*(null==_currentAIConfig?void 0:_currentAIConfig.scanDelay)?(console.log("AII   ai"),visiteQueue=[],storeSave({key:anchorVisiteQueueKey,value:visiteQueue}),rejectDelay>0||globalDelay>0?console.log("AII    "):anchorTrigger=!0,t()):(console.log("AII   "),visiteQueue.shift(),storeSave({key:anchorVisiteQueueKey,value:visiteQueue}))}}})}},checkAiconfig=e=>{if(1==aiConfigTypeChanging)return void console.log("AII ai ai(ai) ai");if(userIsBusy())return void(null!=_currentAIConfig&&(isCallBusy()?(console.log(`AII   AI  ${globalDelay}`),globalDelay=null==_currentAIConfig?void 0:_currentAIConfig.minDelay):console.log("AII   AI")));if(e<2)return void console.log("AII 2sAI");if(null==_aiConfig)return console.log("AII  "),void(_aiConfig=[{configType:1,minDelay:15,typeDelay:20,idleDelay:25,idleReset:60,slideUnit:3,slideLimit:10,scanStay:10,scanDelay:300,scanLimit:3,scanReset:100,refuseUnit:4,refuseLimit:10,refuseReset:60,aivDailyLimit:5,aivTotalLimit:20,aivSwitch:1},{configType:2,minDelay:270,typeDelay:180,idleDelay:270,idleReset:1800,slideUnit:8,slideLimit:2,scanStay:60,scanDelay:300,scanLimit:5,scanReset:180,refuseUnit:3,refuseLimit:6,refuseReset:900,aivDailyLimit:2,aivTotalLimit:5,aivSwitch:0},{configType:3,minDelay:90,typeDelay:90,idleDelay:60,idleReset:1800,slideUnit:5,slideLimit:10,scanStay:20,scanDelay:300,scanLimit:5,scanReset:120,refuseUnit:3,refuseLimit:8,refuseReset:180,aivDailyLimit:3,aivTotalLimit:30,aivSwitch:1}]);let t=1;if(localAuthAvailable()){if(null==uDetail){console.log("AII pinia");const{userHaveCallCard:e,userDetail:t}=storeToRefs(useAppDataStore());if(null==t.value)return void console.log("AI null");uHaveCallCard=e,uDetail=t}uDetail.value.totalRecharge>0&&(console.log("AI "),!uHaveCallCard.value&&uDetail.value.remainDiamonds<getAppConfig().callPrice?(console.log("AI "),t=3):(console.log("AI "),t=2))}if(aiConfigType!==t)return changeAiConfigType(t),void console.log("AII ai   ai");if(anchorLastestPauseDelay>0&&(console.log(`AII  ai ${anchorLastestPauseDelay}`),anchorLastestPauseDelay--,storeSave({key:anchorPauseDelayKey,value:{anchorPauseDelay:anchorLastestPauseDelay,anchorPauseDelayTs:Date.now()}})),rejectDelay>0){if(console.log(`AII  ai AI ${rejectDelay}`),rejectDelay--,storeSave({key:rejectDelayKey,value:{localRejectDelay:rejectDelay,localRejectDelayTs:Date.now()}}),0==rejectDelay){const e=null==_currentAIConfig?void 0:_currentAIConfig.refuseUnit;continueRejectAiCount>=e&&(console.log("AII  ai"),continueRejectAiCount=0,storeSave({key:continueRejectAiCountKey,value:continueRejectAiCount}));const t=null==_currentAIConfig?void 0:_currentAIConfig.refuseLimit;rejectTotalTriggerCount>=t&&(console.log("AII  ai"),rejectTotalTriggerCount=0,storeSave({key:rejectTotalTriggerCountKey,value:rejectTotalTriggerCount}))}return}if(globalDelay>0)return console.log(`AII  AI ${globalDelay}`),globalDelay--,void storeSave({key:globalDelayKey,value:{localGlobalDelay:globalDelay,localGlobalDelayTs:Date.now()}});_currentAIConfig=_aiConfig.find((e=>e.configType==t));const n=_currentAIConfig,r=null==n?void 0:n.minDelay;null==n||n.typeDelay;const o=null==n?void 0:n.idleDelay,i=null==n?void 0:n.idleReset;null==n||n.slideUnit,null==n||n.slideLimit,null==n||n.scanStay,null==n||n.scanDelay,null==n||n.scanLimit,null==n||n.scanReset,null==n||n.refuseUnit,null==n||n.refuseLimit,null==n||n.refuseReset;const a=null==n?void 0:n.aivDailyLimit,s=null==n?void 0:n.aivTotalLimit,c=null==n?void 0:n.aivSwitch;if(1==homeSlideTrigger?console.log("AII home ai "):0==aiConfigChangeDelay?console.log("AII  aib "):(timerTrigger++,aiConfigChangeDelay>0&&(aiConfigChangeDelay--,storeSave({key:aiConfigChangeDelayKey,value:aiConfigChangeDelay}),console.log(`AII  ${aiConfigChangeDelay}aib`))),0==homeSlideTrigger&&0==anchorTrigger&&0!=aiConfigChangeDelay&&3==timerTriggerCount)console.log(`AII   ${i}`),timerTrigger==i&&(console.log("AII   "),timerTrigger=0,timerTriggerCount=0,storeSave({key:timerTriggerCountKey,value:0}));else if(1==homeSlideTrigger||1==anchorTrigger||0==aiConfigChangeDelay||timerTrigger==o||timerTrigger==2*o||timerTrigger==3*o){let e,n,l;1==homeSlideTrigger&&(console.log("AII home ai  "),homeSlideTrigger=!1,e=!0),1==anchorTrigger&&(console.log("AII  ai  "),anchorTrigger=!1,n=!0),0==aiConfigChangeDelay&&(console.log("AII  aib  "),aiConfigChangeDelay=-1,l=!0),1==t&&(!localAuthAvailable()||!uHaveCallCard.value&&uDetail.value.remainDiamonds<getAppConfig().callPrice&&1==c&&aivTotalCount<s&&aivDayCount<a)?netGetAivAnchor({success:e=>{if(null!=e.anchorUserId){aivDayCount++,storeSave({key:aivDayCountKey,value:{date:todayDate,count:aivDayCount}}),aivTotalCount++,storeSave({key:aivTotalCountKey,value:aivTotalCount});showRtcRemoteInvitationModal({anchorUserId:e.anchorUserId,isAib:!1,anchor:e})}},fail:()=>{1==e?(console.log("AII home ai "),homeSlideTrigger=!0):1==n?(console.log("AII  ai "),n=!0):1==l?(console.log("AII  aib ai "),aiConfigChangeDelay=0):console.log("AII  ai")},netFail:()=>{1==e?(console.log("AII home ai "),homeSlideTrigger=!0):1==n?(console.log("AII  ai "),n=!0):1==l?(console.log("AII  aib ai "),aiConfigChangeDelay=0):console.log("AII  ai")}}):(console.log("AII aib"),netGetAibAnchor({success:e=>{if(null!=e.anchorUserId){showRtcRemoteInvitationModal({anchorUserId:e.anchorUserId,isAib:!0})}},fail:()=>{1==e?(console.log("AII home ai "),homeSlideTrigger=!0):1==n?(console.log("AII  ai "),n=!0):1==l?(console.log("AII  aib ai "),aiConfigChangeDelay=0):console.log("AII  ai")},netFail:()=>{1==e?(console.log("AII home ai "),homeSlideTrigger=!0):1==n?(console.log("AII  ai "),n=!0):1==l?(console.log("AII  aib ai "),aiConfigChangeDelay=0):console.log("AII  ai")}})),globalDelay=r,timerTrigger!=o&&timerTrigger!=2*o&&timerTrigger!=3*o||(timerTriggerCount++,storeSave({key:timerTriggerCountKey,value:timerTriggerCount})),3==timerTriggerCount?(console.log(`AII  0  ${i}`),timerTrigger=0):timerTriggerCount>3&&(console.log("AII  "),timerTriggerCount=3,timerTrigger=0)}else console.log(`AII ai  ${o}`)},_sfc_main$7={__name:"modal-invitation-remote",props:["anchorUserId","isAib","anchor","channelId","content"],emits:["close"],setup(e,{emit:t}){changeUserIsBusy({callBusy:!0,action:!0}),useAppDataStore().remoteInvitationReceived();const{userHaveCallCard:n,userDetail:r}=storeToRefs(useAppDataStore()),o=ref(!1);let i;i=setTimeout((()=>{console.log(""),A({}),m()}),18e3);const a=e,s=a.anchorUserId,c=a.anchor,l=a.isAib,u=!0===l||!1===l;!0===l?console.log("AII aib"):!1===l?console.log("AII aiv"):console.log("");const d=t,A=({failEnterCall:e=!0})=>{1==e&&(console.log("  "),changeUserIsBusy({callBusy:!0,action:!1})),d("close")};let p=null;onMounted((()=>{callPlay(),p=anime({targets:".callIcon",scale:[.9,1],loop:!0,autoplay:!0,duration:250,delay:500,easing:"easeInOutCirc",direction:"alternate",loopComplete:e=>{console.log("")}})})),onUnmounted((()=>{console.log(""),i=clearTimeout(i),callStop(),g(),null!=p&&(p.pause(),p=null)}));let h=null;const f=()=>{null!=h&&(console.log(`AII aib  ${h}`),netCancelCall({channelId:h,endType:0}),h=null)},g=useAppDataStore().$onAction((({name:e,args:t})=>{if("remoteInvitationCanceled"==e){if(console.log(` ${t}`),t[0]==s){console.log(" ");const e=Date.now(),t=getLoginUserId(),n={messageType:-44,userInfo:{uid:s,virtualId:s},read:0,timestamp:e,mid:`${t}_${s}_${e}`};useAppDataStore().addConversation(`${t}_${s}`,n),A({})}}else"localInvitationSendSuccess"==e?(console.log("AII aib  10s "),i=clearTimeout(i),i=setTimeout((()=>{console.log("AII aib "),A({}),f(),cancelLocalInvitation()}),1e4)):"localInvitationAccepted"==e?(i=clearTimeout(i),console.log(`AII aib   ${t}`),A({failEnterCall:!1}),storeSave({key:"videoCallChannelId",value:t[0],success:()=>{navigateTo({url:"/pages/video-chat/video-chat"})},fail:()=>{}})):"localInvitationRefused"==e?(console.log("AII aib "),A({}),f(),showNotificationError$1({content:lanKey.operateFail.tr})):"localInvitationSendSFail"==e&&(console.log("AII aib "),A({}),f())})),m=()=>{if(console.log(""),localAuthAvailable()){const e=Date.now(),t=getLoginUserId(),n={messageType:-44,userInfo:{uid:s,virtualId:s},read:0,timestamp:e,mid:`${t}_${s}_${e}`};useAppDataStore().addConversation(`${t}_${s}`,n)}u?console.log("AI "):operateRemoteInvitation({peerId:s,accept:!1})},_=e=>{0==e?(u&&addRejectCount(),A({}),m()):localAuthAvailable()?u?(resetContinueRejectAiCount(),o.value=!0,E()):(A({failEnterCall:!1}),operateRemoteInvitation({peerId:s,accept:e}),console.log(`  ${a.channelId}`),storeSave({key:"videoCallData",value:{anchorUserId:s,remoteInvite:!0,content:a.content},success:()=>{storeSave({key:"videoCallChannelId",value:a.channelId,success:()=>{navigateTo({url:"/pages/video-chat/video-chat"})}})}})):(A({}),m(),showLoginModal())},E=()=>{const e=!0===l?{anchorUserId:s}:c;!1===l&&(e.type=1,e.url=e.videoUrl,e.isAiv=!0),storeSave({key:"videoCallData",value:e,success:()=>{1==(null==e?void 0:e.type)?(console.log("AII aiv "),A({failEnterCall:!1}),navigateTo({url:"/pages/video-chat/video-chat"})):(console.log("AII aib  "),netCreateCall({showLoading:!0,anchorUserId:e.anchorUserId,type:1,success:t=>{h=t,sendLocalInvitation({peerId:e.anchorUserId,userInfo:JSON.stringify(r.value),channelId:t})},fail:e=>{console.log("AII aib "),A({}),1008==(null==e?void 0:e.code)?showNotificationError$1({content:e.message,durationSecond:1,callback:()=>{showRechargeModal({path:brcPath.aibCallNoMoney})}}):showNotificationError$1({content:lanKey.operateFail.tr})},netFail:()=>{A({}),showNotificationError$1({content:lanKey.operateFail.tr})}}))},fail:()=>{A({}),showNotificationError$1({content:lanKey.operateFail.tr})}})},v=ref({});return netAnchorDetail({anchorUserId:s,success:e=>{v.value=e}}),(e,t)=>{const r=index$g,i=index$i;return openBlock(),createBlock(r,{class:"content modal-gradient"},{default:withCtx((()=>[createVNode(r,{class:"anchor-portrait-bg"},{default:withCtx((()=>{var e;return[createVNode(r,{class:"anchor-portrait",style:normalizeStyle({backgroundImage:`url(${null==(e=v.value)?void 0:e.portrait})`})},null,8,["style"])]})),_:1}),createVNode(i,{class:"nick-name"},{default:withCtx((()=>{var e;return[createTextVNode(toDisplayString$1(null==(e=v.value)?void 0:e.nickname),1)]})),_:1}),createVNode(r,{style:{display:"flex","justify-content":"flex-start","align-items":"center"}},{default:withCtx((()=>{var e;return[createVNode(r,{class:"countryIcon",style:normalizeStyle({backgroundImage:`url(${null==(e=v.value)?void 0:e.countryPath})`})},null,8,["style"]),createVNode(i,{class:"country-title"},{default:withCtx((()=>{var e;return[createTextVNode(toDisplayString$1(null==(e=v.value)?void 0:e.countryTitle)+",",1)]})),_:1}),createVNode(r,{class:"anchor-price"},{default:withCtx((()=>[createVNode(r,{class:"diamond-image"}),createVNode(i,{class:"price"},{default:withCtx((()=>{var e,t;return[createTextVNode(toDisplayString$1(null==(t=null==(e=v.value)?void 0:e.callPrice)?void 0:t.toBin),1)]})),_:1}),createVNode(i,{class:"unit"},{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(lanKey).unit.tr),1)])),_:1})])),_:1})]})),_:1}),0==o.value?(openBlock(),createBlock(r,{key:0,class:"call-area"},{default:withCtx((()=>[createVNode(r,{onClick:t[0]||(t[0]=e=>_(!1)),class:"hangup"}),createVNode(r,{onClick:t[1]||(t[1]=e=>_(!0)),class:"callIcon"},{default:withCtx((()=>[!unref(u)&&a.content.freeTime>0?(openBlock(),createBlock(r,{key:0,class:"tip",style:{"background-color":"#93FF74FF"}},{default:withCtx((()=>[createVNode(i,null,{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(lanKey).free.tr),1)])),_:1})])),_:1})):0==unref(l)||unref(n)?(openBlock(),createBlock(r,{key:1,class:"tip",style:{"background-color":"#93FF74FF"}},{default:withCtx((()=>[createVNode(r,{class:"props props-video"}),createVNode(i,null,{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(lanKey).free.tr),1)])),_:1})])),_:1})):createCommentVNode("",!0)])),_:1})])),_:1})):(openBlock(),createBlock(r,{key:1,class:"call-area"},{default:withCtx((()=>[createVNode(i,{style:{color:"white","text-align":"center",width:"100%"}},{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(lanKey).connecting.tr),1)])),_:1})])),_:1}))])),_:1})}}},ModalRtcRemoteInvitation=_export_sfc(_sfc_main$7,[["__scopeId","data-v-1e4b1e77"]]),_sfc_main$6={__name:"modal-invitation-local",props:["anchorUserId","combineAnchor"],emits:["close"],setup(e,{emit:t}){changeUserIsBusy({callBusy:!0,action:!0}),console.log(" "),callPlay();let n=null;const r=t,o=({failEnterCall:e=!0})=>{console.log(""),d(),callStop(),1==e&&(console.log("  "),changeUserIsBusy({callBusy:!0,action:!1}),null!=n&&(console.log(`  ${n}`),netCancelCall({channelId:n,endType:0}),cancelLocalInvitation())),A=clearInterval(A),u=clearTimeout(u),s.forEach((e=>{null==e||e.abort()})),setTimeout((()=>{r("close")}),500)},i=e,a=i.anchorUserId;let s=[];const c=()=>{console.log("");const e=Date.now(),t=getLoginUserId(),n={messageType:-44,userInfo:{uid:t,virtualId:t},read:0,timestamp:e,mid:`${t}_${a}_${e}`};useAppDataStore().addConversation(`${t}_${a}`,n),o({})},{userDetail:l}=storeToRefs(useAppDataStore());let u;const d=useAppDataStore().$onAction((({name:e,args:t})=>{"localInvitationSendSuccess"==e?(console.log(" 18s "),u=clearTimeout(u),u=setTimeout((()=>{console.log("  "),showNotification({content:lanKey.videoCallHangUpBusy.tr}),c()}),18e3)):"localInvitationAccepted"==e?(u=clearTimeout(u),console.log(`  ${t}`),storeSave({key:"videoCallChannelId",value:t[0],success:()=>{o({failEnterCall:!1}),navigateTo({url:"/pages/video-chat/video-chat"})},fail:()=>{console.log(" "),showNotification({content:lanKey.videoCallConnectFail.tr}),c()}})):"localInvitationRefused"==e?(showNotification({content:lanKey.videoCallHangUpBusy.tr}),console.log(" "),c()):"localInvitationSendSFail"==e&&(showNotification({content:lanKey.videoCallConnectFail.tr}),console.log(" "),c())}));let A;storeSave({key:"videoCallData",value:{anchorUserId:a,localInvite:!0},success:()=>{console.log(" ");const e=netCreateCall({anchorUserId:a,type:0,success:e=>{n=e,sendLocalInvitation({peerId:a,userInfo:JSON.stringify(l.value),channelId:e})},fail:e=>{console.log(" "),c(),1008==(null==e?void 0:e.code)?showNotificationError$1({content:e.message,durationSecond:1,callback:()=>{showRechargeModal({anchorId:i.combineAnchor?a:"",path:brcPath.callNoMoney})}}):showNotificationError$1({content:e.message,durationSecond:1})},netFail:()=>{console.log("  "),c()}});s.push(e)},fail:()=>{console.log(" "),c()}});let p=1;const h=ref(".");A=setInterval((()=>{p=(p+1)%4,h.value=".".repeat(p)}),500);const f=ref({});return netAnchorDetail({anchorUserId:a,success:e=>{f.value=e}}),(e,t)=>{const n=index$g,r=index$i;return openBlock(),createBlock(n,{class:"match-bg theme-gradient"},{default:withCtx((()=>[createVNode(n,{style:{display:"flex","flex-direction":"column","align-items":"center","margin-top":"240rpx"}},{default:withCtx((()=>{var e;return[createVNode(n,{class:"anchor",style:normalizeStyle({backgroundImage:`url(${null==(e=f.value)?void 0:e.portrait})`})},null,8,["style"]),createVNode(r,{style:{"margin-top":"40rpx"}},{default:withCtx((()=>{var e;return[createTextVNode(toDisplayString$1(null==(e=f.value)?void 0:e.nickname),1)]})),_:1})]})),_:1}),createVNode(r,{class:"link-tip"},{default:withCtx((()=>[createTextVNode(toDisplayString$1(`${unref(lanKey).videoCalling.tr}${h.value}`),1)])),_:1}),createVNode(n,{style:{display:"flex","flex-direction":"column","align-items":"center","margin-bottom":"240rpx"}},{default:withCtx((()=>[createVNode(n,{class:"hangUp-icon",onClick:c})])),_:1})])),_:1})}}},ModalRtcLocationInvitation=_export_sfc(_sfc_main$6,[["__scopeId","data-v-cd77d69e"]]),_sfc_main$5={__name:"modal-debug",emits:["close"],setup(e,{emit:t}){const{debugRtmStatus:n,firebaseStatus:r}=storeToRefs(useAppDataStore()),o=t,i=()=>o("close");return(e,t)=>{const o=index$g,a=index$i;return openBlock(),createBlock(o,{class:"debug-content"},{default:withCtx((()=>[createVNode(o,{class:"close",onClick:i}),createVNode(a,null,{default:withCtx((()=>[createTextVNode("")])),_:1}),createVNode(a,null,{default:withCtx((()=>[createTextVNode("Rtm:"+toDisplayString$1(unref(n)),1)])),_:1}),createVNode(a,null,{default:withCtx((()=>[createTextVNode("firebase:"+toDisplayString$1(unref(r)),1)])),_:1})])),_:1})}}},ModalDebugVue=_export_sfc(_sfc_main$5,[["__scopeId","data-v-5d2806de"]]),_sfc_main$4={__name:"modal-confirm",props:["title","content","cancelTitle","coverBg"],emits:["close"],setup(e,{emit:t}){const n=t,r=e=>{console.log(" "+(e?"":"")),n("close",e)},o=e;return(e,t)=>{const n=index$i,i=index$g;return openBlock(),createBlock(i,{class:normalizeClass({"cover-bg":o.coverBg})},{default:withCtx((()=>[createVNode(i,{class:"content"},{default:withCtx((()=>[createVNode(i,{class:"txt"},{default:withCtx((()=>[createVNode(n,{class:"title"},{default:withCtx((()=>[createTextVNode(toDisplayString$1(o.title),1)])),_:1}),createVNode(n,{class:"detail"},{default:withCtx((()=>[createTextVNode(toDisplayString$1(o.content),1)])),_:1})])),_:1}),createVNode(i,{class:"line"}),createVNode(i,{class:"action-area"},{default:withCtx((()=>[createVNode(i,{onClick:t[0]||(t[0]=e=>r(!1)),class:"cancel"},{default:withCtx((()=>[createTextVNode(toDisplayString$1(null!=o.cancelTitle&&""!=o.cancelTitle?o.cancelTitle:unref(lanKey).cancel.tr),1)])),_:1}),createVNode(i,{class:"line"}),createVNode(i,{onClick:t[1]||(t[1]=e=>r(!0)),class:"confirm"},{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(lanKey).confirm.tr),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["class"])}}},ModalConfirm=_export_sfc(_sfc_main$4,[["__scopeId","data-v-21dd4f65"]]);
/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var extendStatics=function(e,t){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function __extends(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var __assign=function(){return __assign=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},__assign.apply(this,arguments)};function __awaiter(e,t,n,r){return new(n||(n=Promise))((function(t,o){function i(e){try{s(r.next(e))}catch(t){o(t)}}function a(e){try{s(r.throw(e))}catch(t){o(t)}}function s(e){var r;e.done?t(e.value):(r=e.value,r instanceof n?r:new n((function(e){e(r)}))).then(i,a)}s((r=r.apply(e,[])).next())}))}function __generator(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function __spreadArray(e,t,n){if(2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||t)}for(var Bounds=function(){function e(e,t,n,r){this.left=e,this.top=t,this.width=n,this.height=r}return e.prototype.add=function(t,n,r,o){return new e(this.left+t,this.top+n,this.width+r,this.height+o)},e.fromClientRect=function(t,n){return new e(n.left+t.windowBounds.left,n.top+t.windowBounds.top,n.width,n.height)},e.fromDOMRectList=function(t,n){var r=Array.from(n).find((function(e){return 0!==e.width}));return r?new e(r.left+t.windowBounds.left,r.top+t.windowBounds.top,r.width,r.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),parseBounds=function(e,t){return Bounds.fromClientRect(e,t.getBoundingClientRect())},parseDocumentSize=function(e){var t=e.body,n=e.documentElement;if(!t||!n)throw new Error("Unable to get document size");var r=Math.max(Math.max(t.scrollWidth,n.scrollWidth),Math.max(t.offsetWidth,n.offsetWidth),Math.max(t.clientWidth,n.clientWidth)),o=Math.max(Math.max(t.scrollHeight,n.scrollHeight),Math.max(t.offsetHeight,n.offsetHeight),Math.max(t.clientHeight,n.clientHeight));return new Bounds(0,0,r,o)},toCodePoints$1=function(e){for(var t=[],n=0,r=e.length;n<r;){var o=e.charCodeAt(n++);if(o>=55296&&o<=56319&&n<r){var i=e.charCodeAt(n++);56320==(64512&i)?t.push(((1023&o)<<10)+(1023&i)+65536):(t.push(o),n--)}else t.push(o)}return t},fromCodePoint$1=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var n=e.length;if(!n)return"";for(var r=[],o=-1,i="";++o<n;){var a=e[o];a<=65535?r.push(a):(a-=65536,r.push(55296+(a>>10),a%1024+56320)),(o+1===n||r.length>16384)&&(i+=String.fromCharCode.apply(String,r),r.length=0)}return i},chars$2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup$2="undefined"==typeof Uint8Array?[]:new Uint8Array(256),i$2=0;i$2<chars$2.length;i$2++)lookup$2[chars$2.charCodeAt(i$2)]=i$2;for(var chars$1$1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup$1$1="undefined"==typeof Uint8Array?[]:new Uint8Array(256),i$1$1=0;i$1$1<chars$1$1.length;i$1$1++)lookup$1$1[chars$1$1.charCodeAt(i$1$1)]=i$1$1;for(var decode$1=function(e){var t,n,r,o,i,a=.75*e.length,s=e.length,c=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var l="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?new ArrayBuffer(a):new Array(a),u=Array.isArray(l)?l:new Uint8Array(l);for(t=0;t<s;t+=4)n=lookup$1$1[e.charCodeAt(t)],r=lookup$1$1[e.charCodeAt(t+1)],o=lookup$1$1[e.charCodeAt(t+2)],i=lookup$1$1[e.charCodeAt(t+3)],u[c++]=n<<2|r>>4,u[c++]=(15&r)<<4|o>>2,u[c++]=(3&o)<<6|63&i;return l},polyUint16Array$1=function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n.push(e[r+1]<<8|e[r]);return n},polyUint32Array$1=function(e){for(var t=e.length,n=[],r=0;r<t;r+=4)n.push(e[r+3]<<24|e[r+2]<<16|e[r+1]<<8|e[r]);return n},UTRIE2_SHIFT_2$1=5,UTRIE2_SHIFT_1$1=11,UTRIE2_INDEX_SHIFT$1=2,UTRIE2_SHIFT_1_2$1=UTRIE2_SHIFT_1$1-UTRIE2_SHIFT_2$1,UTRIE2_LSCP_INDEX_2_OFFSET$1=65536>>UTRIE2_SHIFT_2$1,UTRIE2_DATA_BLOCK_LENGTH$1=1<<UTRIE2_SHIFT_2$1,UTRIE2_DATA_MASK$1=UTRIE2_DATA_BLOCK_LENGTH$1-1,UTRIE2_LSCP_INDEX_2_LENGTH$1=1024>>UTRIE2_SHIFT_2$1,UTRIE2_INDEX_2_BMP_LENGTH$1=UTRIE2_LSCP_INDEX_2_OFFSET$1+UTRIE2_LSCP_INDEX_2_LENGTH$1,UTRIE2_UTF8_2B_INDEX_2_OFFSET$1=UTRIE2_INDEX_2_BMP_LENGTH$1,UTRIE2_UTF8_2B_INDEX_2_LENGTH$1=32,UTRIE2_INDEX_1_OFFSET$1=UTRIE2_UTF8_2B_INDEX_2_OFFSET$1+UTRIE2_UTF8_2B_INDEX_2_LENGTH$1,UTRIE2_OMITTED_BMP_INDEX_1_LENGTH$1=65536>>UTRIE2_SHIFT_1$1,UTRIE2_INDEX_2_BLOCK_LENGTH$1=1<<UTRIE2_SHIFT_1_2$1,UTRIE2_INDEX_2_MASK$1=UTRIE2_INDEX_2_BLOCK_LENGTH$1-1,slice16$1=function(e,t,n){return e.slice?e.slice(t,n):new Uint16Array(Array.prototype.slice.call(e,t,n))},slice32$1=function(e,t,n){return e.slice?e.slice(t,n):new Uint32Array(Array.prototype.slice.call(e,t,n))},createTrieFromBase64$1=function(e,t){var n=decode$1(e),r=Array.isArray(n)?polyUint32Array$1(n):new Uint32Array(n),o=Array.isArray(n)?polyUint16Array$1(n):new Uint16Array(n),i=slice16$1(o,12,r[4]/2),a=2===r[5]?slice16$1(o,(24+r[4])/2):slice32$1(r,Math.ceil((24+r[4])/4));return new Trie$1(r[0],r[1],r[2],r[3],i,a)},Trie$1=function(){function e(e,t,n,r,o,i){this.initialValue=e,this.errorValue=t,this.highStart=n,this.highValueIndex=r,this.index=o,this.data=i}return e.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=((t=this.index[e>>UTRIE2_SHIFT_2$1])<<UTRIE2_INDEX_SHIFT$1)+(e&UTRIE2_DATA_MASK$1),this.data[t];if(e<=65535)return t=((t=this.index[UTRIE2_LSCP_INDEX_2_OFFSET$1+(e-55296>>UTRIE2_SHIFT_2$1)])<<UTRIE2_INDEX_SHIFT$1)+(e&UTRIE2_DATA_MASK$1),this.data[t];if(e<this.highStart)return t=UTRIE2_INDEX_1_OFFSET$1-UTRIE2_OMITTED_BMP_INDEX_1_LENGTH$1+(e>>UTRIE2_SHIFT_1$1),t=this.index[t],t+=e>>UTRIE2_SHIFT_2$1&UTRIE2_INDEX_2_MASK$1,t=((t=this.index[t])<<UTRIE2_INDEX_SHIFT$1)+(e&UTRIE2_DATA_MASK$1),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),chars$3="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup$3="undefined"==typeof Uint8Array?[]:new Uint8Array(256),i$3=0;i$3<chars$3.length;i$3++)lookup$3[chars$3.charCodeAt(i$3)]=i$3;var base64$1="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",LETTER_NUMBER_MODIFIER=50,BK=1,CR$1=2,LF$1=3,CM=4,NL=5,WJ=7,ZW=8,GL=9,SP=10,ZWJ$1=11,B2=12,BA=13,BB=14,HY=15,CB=16,CL=17,CP=18,EX=19,IN=20,NS=21,OP=22,QU=23,IS=24,NU=25,PO=26,PR=27,SY=28,AI=29,AL=30,CJ=31,EB=32,EM=33,H2=34,H3=35,HL=36,ID=37,JL=38,JV=39,JT=40,RI$1=41,SA=42,XX=43,ea_OP=[9001,65288],BREAK_MANDATORY="!",BREAK_NOT_ALLOWED$1="",BREAK_ALLOWED$1="",UnicodeTrie$1=createTrieFromBase64$1(base64$1),ALPHABETICS=[AL,HL],HARD_LINE_BREAKS=[BK,CR$1,LF$1,NL],SPACE$1=[SP,ZW],PREFIX_POSTFIX=[PR,PO],LINE_BREAKS=HARD_LINE_BREAKS.concat(SPACE$1),KOREAN_SYLLABLE_BLOCK=[JL,JV,JT,H2,H3],HYPHEN=[HY,BA],codePointsToCharacterClasses=function(e,t){void 0===t&&(t="strict");var n=[],r=[],o=[];return e.forEach((function(e,i){var a=UnicodeTrie$1.get(e);if(a>LETTER_NUMBER_MODIFIER?(o.push(!0),a-=LETTER_NUMBER_MODIFIER):o.push(!1),-1!==["normal","auto","loose"].indexOf(t)&&-1!==[8208,8211,12316,12448].indexOf(e))return r.push(i),n.push(CB);if(a===CM||a===ZWJ$1){if(0===i)return r.push(i),n.push(AL);var s=n[i-1];return-1===LINE_BREAKS.indexOf(s)?(r.push(r[i-1]),n.push(s)):(r.push(i),n.push(AL))}return r.push(i),a===CJ?n.push("strict"===t?NS:ID):a===SA||a===AI?n.push(AL):a===XX?e>=131072&&e<=196605||e>=196608&&e<=262141?n.push(ID):n.push(AL):void n.push(a)})),[r,n,o]},isAdjacentWithSpaceIgnored=function(e,t,n,r){var o=r[n];if(Array.isArray(e)?-1!==e.indexOf(o):e===o)for(var i=n;i<=r.length;){if((c=r[++i])===t)return!0;if(c!==SP)break}if(o===SP)for(i=n;i>0;){var a=r[--i];if(Array.isArray(e)?-1!==e.indexOf(a):e===a)for(var s=n;s<=r.length;){var c;if((c=r[++s])===t)return!0;if(c!==SP)break}if(a!==SP)break}return!1},previousNonSpaceClassType=function(e,t){for(var n=e;n>=0;){var r=t[n];if(r!==SP)return r;n--}return 0},_lineBreakAtIndex=function(e,t,n,r,o){if(0===n[r])return BREAK_NOT_ALLOWED$1;var i=r-1;if(Array.isArray(o)&&!0===o[i])return BREAK_NOT_ALLOWED$1;var a=i-1,s=i+1,c=t[i],l=a>=0?t[a]:0,u=t[s];if(c===CR$1&&u===LF$1)return BREAK_NOT_ALLOWED$1;if(-1!==HARD_LINE_BREAKS.indexOf(c))return BREAK_MANDATORY;if(-1!==HARD_LINE_BREAKS.indexOf(u))return BREAK_NOT_ALLOWED$1;if(-1!==SPACE$1.indexOf(u))return BREAK_NOT_ALLOWED$1;if(previousNonSpaceClassType(i,t)===ZW)return BREAK_ALLOWED$1;if(UnicodeTrie$1.get(e[i])===ZWJ$1)return BREAK_NOT_ALLOWED$1;if((c===EB||c===EM)&&UnicodeTrie$1.get(e[s])===ZWJ$1)return BREAK_NOT_ALLOWED$1;if(c===WJ||u===WJ)return BREAK_NOT_ALLOWED$1;if(c===GL)return BREAK_NOT_ALLOWED$1;if(-1===[SP,BA,HY].indexOf(c)&&u===GL)return BREAK_NOT_ALLOWED$1;if(-1!==[CL,CP,EX,IS,SY].indexOf(u))return BREAK_NOT_ALLOWED$1;if(previousNonSpaceClassType(i,t)===OP)return BREAK_NOT_ALLOWED$1;if(isAdjacentWithSpaceIgnored(QU,OP,i,t))return BREAK_NOT_ALLOWED$1;if(isAdjacentWithSpaceIgnored([CL,CP],NS,i,t))return BREAK_NOT_ALLOWED$1;if(isAdjacentWithSpaceIgnored(B2,B2,i,t))return BREAK_NOT_ALLOWED$1;if(c===SP)return BREAK_ALLOWED$1;if(c===QU||u===QU)return BREAK_NOT_ALLOWED$1;if(u===CB||c===CB)return BREAK_ALLOWED$1;if(-1!==[BA,HY,NS].indexOf(u)||c===BB)return BREAK_NOT_ALLOWED$1;if(l===HL&&-1!==HYPHEN.indexOf(c))return BREAK_NOT_ALLOWED$1;if(c===SY&&u===HL)return BREAK_NOT_ALLOWED$1;if(u===IN)return BREAK_NOT_ALLOWED$1;if(-1!==ALPHABETICS.indexOf(u)&&c===NU||-1!==ALPHABETICS.indexOf(c)&&u===NU)return BREAK_NOT_ALLOWED$1;if(c===PR&&-1!==[ID,EB,EM].indexOf(u)||-1!==[ID,EB,EM].indexOf(c)&&u===PO)return BREAK_NOT_ALLOWED$1;if(-1!==ALPHABETICS.indexOf(c)&&-1!==PREFIX_POSTFIX.indexOf(u)||-1!==PREFIX_POSTFIX.indexOf(c)&&-1!==ALPHABETICS.indexOf(u))return BREAK_NOT_ALLOWED$1;if(-1!==[PR,PO].indexOf(c)&&(u===NU||-1!==[OP,HY].indexOf(u)&&t[s+1]===NU)||-1!==[OP,HY].indexOf(c)&&u===NU||c===NU&&-1!==[NU,SY,IS].indexOf(u))return BREAK_NOT_ALLOWED$1;if(-1!==[NU,SY,IS,CL,CP].indexOf(u))for(var d=i;d>=0;){if((A=t[d])===NU)return BREAK_NOT_ALLOWED$1;if(-1===[SY,IS].indexOf(A))break;d--}if(-1!==[PR,PO].indexOf(u))for(d=-1!==[CL,CP].indexOf(c)?a:i;d>=0;){var A;if((A=t[d])===NU)return BREAK_NOT_ALLOWED$1;if(-1===[SY,IS].indexOf(A))break;d--}if(JL===c&&-1!==[JL,JV,H2,H3].indexOf(u)||-1!==[JV,H2].indexOf(c)&&-1!==[JV,JT].indexOf(u)||-1!==[JT,H3].indexOf(c)&&u===JT)return BREAK_NOT_ALLOWED$1;if(-1!==KOREAN_SYLLABLE_BLOCK.indexOf(c)&&-1!==[IN,PO].indexOf(u)||-1!==KOREAN_SYLLABLE_BLOCK.indexOf(u)&&c===PR)return BREAK_NOT_ALLOWED$1;if(-1!==ALPHABETICS.indexOf(c)&&-1!==ALPHABETICS.indexOf(u))return BREAK_NOT_ALLOWED$1;if(c===IS&&-1!==ALPHABETICS.indexOf(u))return BREAK_NOT_ALLOWED$1;if(-1!==ALPHABETICS.concat(NU).indexOf(c)&&u===OP&&-1===ea_OP.indexOf(e[s])||-1!==ALPHABETICS.concat(NU).indexOf(u)&&c===CP)return BREAK_NOT_ALLOWED$1;if(c===RI$1&&u===RI$1){for(var p=n[i],h=1;p>0&&t[--p]===RI$1;)h++;if(h%2!=0)return BREAK_NOT_ALLOWED$1}return c===EB&&u===EM?BREAK_NOT_ALLOWED$1:BREAK_ALLOWED$1},cssFormattedClasses=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var n=codePointsToCharacterClasses(e,t.lineBreak),r=n[0],o=n[1],i=n[2];return"break-all"!==t.wordBreak&&"break-word"!==t.wordBreak||(o=o.map((function(e){return-1!==[NU,AL,SA].indexOf(e)?ID:e}))),[r,o,"keep-all"===t.wordBreak?i.map((function(t,n){return t&&e[n]>=19968&&e[n]<=40959})):void 0]},Break=function(){function e(e,t,n,r){this.codePoints=e,this.required=t===BREAK_MANDATORY,this.start=n,this.end=r}return e.prototype.slice=function(){return fromCodePoint$1.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),LineBreaker=function(e,t){var n=toCodePoints$1(e),r=cssFormattedClasses(n,t),o=r[0],i=r[1],a=r[2],s=n.length,c=0,l=0;return{next:function(){if(l>=s)return{done:!0,value:null};for(var e=BREAK_NOT_ALLOWED$1;l<s&&(e=_lineBreakAtIndex(n,i,o,++l,a))===BREAK_NOT_ALLOWED$1;);if(e!==BREAK_NOT_ALLOWED$1||l===s){var t=new Break(n,e,c,l);return c=l,{value:t,done:!1}}return{done:!0,value:null}}}},FLAG_UNRESTRICTED=1,FLAG_ID=2,FLAG_INTEGER=4,FLAG_NUMBER=8,LINE_FEED=10,SOLIDUS=47,REVERSE_SOLIDUS=92,CHARACTER_TABULATION=9,SPACE=32,QUOTATION_MARK=34,EQUALS_SIGN=61,NUMBER_SIGN=35,DOLLAR_SIGN=36,PERCENTAGE_SIGN=37,APOSTROPHE=39,LEFT_PARENTHESIS=40,RIGHT_PARENTHESIS=41,LOW_LINE=95,HYPHEN_MINUS=45,EXCLAMATION_MARK=33,LESS_THAN_SIGN=60,GREATER_THAN_SIGN=62,COMMERCIAL_AT=64,LEFT_SQUARE_BRACKET=91,RIGHT_SQUARE_BRACKET=93,CIRCUMFLEX_ACCENT=61,LEFT_CURLY_BRACKET=123,QUESTION_MARK=63,RIGHT_CURLY_BRACKET=125,VERTICAL_LINE=124,TILDE=126,CONTROL=128,REPLACEMENT_CHARACTER=65533,ASTERISK=42,PLUS_SIGN=43,COMMA=44,COLON=58,SEMICOLON=59,FULL_STOP=46,NULL=0,BACKSPACE=8,LINE_TABULATION=11,SHIFT_OUT=14,INFORMATION_SEPARATOR_ONE=31,DELETE=127,EOF$1=-1,ZERO=48,a=97,e=101,f=102,u=117,z=122,A=65,E=69,F=70,U=85,Z=90,isDigit=function(e){return e>=ZERO&&e<=57},isSurrogateCodePoint=function(e){return e>=55296&&e<=57343},isHex=function(e){return isDigit(e)||e>=A&&e<=F||e>=a&&e<=f},isLowerCaseLetter=function(e){return e>=a&&e<=z},isUpperCaseLetter=function(e){return e>=A&&e<=Z},isLetter=function(e){return isLowerCaseLetter(e)||isUpperCaseLetter(e)},isNonASCIICodePoint=function(e){return e>=CONTROL},isWhiteSpace=function(e){return e===LINE_FEED||e===CHARACTER_TABULATION||e===SPACE},isNameStartCodePoint=function(e){return isLetter(e)||isNonASCIICodePoint(e)||e===LOW_LINE},isNameCodePoint=function(e){return isNameStartCodePoint(e)||isDigit(e)||e===HYPHEN_MINUS},isNonPrintableCodePoint=function(e){return e>=NULL&&e<=BACKSPACE||e===LINE_TABULATION||e>=SHIFT_OUT&&e<=INFORMATION_SEPARATOR_ONE||e===DELETE},isValidEscape=function(e,t){return e===REVERSE_SOLIDUS&&t!==LINE_FEED},isIdentifierStart=function(e,t,n){return e===HYPHEN_MINUS?isNameStartCodePoint(t)||isValidEscape(t,n):!!isNameStartCodePoint(e)||!(e!==REVERSE_SOLIDUS||!isValidEscape(e,t))},isNumberStart=function(e,t,n){return e===PLUS_SIGN||e===HYPHEN_MINUS?!!isDigit(t)||t===FULL_STOP&&isDigit(n):isDigit(e===FULL_STOP?t:e)},stringToNumber=function(t){var n=0,r=1;t[n]!==PLUS_SIGN&&t[n]!==HYPHEN_MINUS||(t[n]===HYPHEN_MINUS&&(r=-1),n++);for(var o=[];isDigit(t[n]);)o.push(t[n++]);var i=o.length?parseInt(fromCodePoint$1.apply(void 0,o),10):0;t[n]===FULL_STOP&&n++;for(var a=[];isDigit(t[n]);)a.push(t[n++]);var s=a.length,c=s?parseInt(fromCodePoint$1.apply(void 0,a),10):0;t[n]!==E&&t[n]!==e||n++;var l=1;t[n]!==PLUS_SIGN&&t[n]!==HYPHEN_MINUS||(t[n]===HYPHEN_MINUS&&(l=-1),n++);for(var u=[];isDigit(t[n]);)u.push(t[n++]);var d=u.length?parseInt(fromCodePoint$1.apply(void 0,u),10):0;return r*(i+c*Math.pow(10,-s))*Math.pow(10,l*d)},LEFT_PARENTHESIS_TOKEN={type:2},RIGHT_PARENTHESIS_TOKEN={type:3},COMMA_TOKEN={type:4},SUFFIX_MATCH_TOKEN={type:13},PREFIX_MATCH_TOKEN={type:8},COLUMN_TOKEN={type:21},DASH_MATCH_TOKEN={type:9},INCLUDE_MATCH_TOKEN={type:10},LEFT_CURLY_BRACKET_TOKEN={type:11},RIGHT_CURLY_BRACKET_TOKEN={type:12},SUBSTRING_MATCH_TOKEN={type:14},BAD_URL_TOKEN={type:23},BAD_STRING_TOKEN={type:1},CDO_TOKEN={type:25},CDC_TOKEN={type:24},COLON_TOKEN={type:26},SEMICOLON_TOKEN={type:27},LEFT_SQUARE_BRACKET_TOKEN={type:28},RIGHT_SQUARE_BRACKET_TOKEN={type:29},WHITESPACE_TOKEN={type:31},EOF_TOKEN={type:32},Tokenizer=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(toCodePoints$1(e))},t.prototype.read=function(){for(var e=[],t=this.consumeToken();t!==EOF_TOKEN;)e.push(t),t=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case QUOTATION_MARK:return this.consumeStringToken(QUOTATION_MARK);case NUMBER_SIGN:var t=this.peekCodePoint(0),n=this.peekCodePoint(1),r=this.peekCodePoint(2);if(isNameCodePoint(t)||isValidEscape(n,r)){var o=isIdentifierStart(t,n,r)?FLAG_ID:FLAG_UNRESTRICTED;return{type:5,value:this.consumeName(),flags:o}}break;case DOLLAR_SIGN:if(this.peekCodePoint(0)===EQUALS_SIGN)return this.consumeCodePoint(),SUFFIX_MATCH_TOKEN;break;case APOSTROPHE:return this.consumeStringToken(APOSTROPHE);case LEFT_PARENTHESIS:return LEFT_PARENTHESIS_TOKEN;case RIGHT_PARENTHESIS:return RIGHT_PARENTHESIS_TOKEN;case ASTERISK:if(this.peekCodePoint(0)===EQUALS_SIGN)return this.consumeCodePoint(),SUBSTRING_MATCH_TOKEN;break;case PLUS_SIGN:if(isNumberStart(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case COMMA:return COMMA_TOKEN;case HYPHEN_MINUS:var i=e,a=this.peekCodePoint(0),s=this.peekCodePoint(1);if(isNumberStart(i,a,s))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(isIdentifierStart(i,a,s))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(a===HYPHEN_MINUS&&s===GREATER_THAN_SIGN)return this.consumeCodePoint(),this.consumeCodePoint(),CDC_TOKEN;break;case FULL_STOP:if(isNumberStart(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case SOLIDUS:if(this.peekCodePoint(0)===ASTERISK)for(this.consumeCodePoint();;){var c=this.consumeCodePoint();if(c===ASTERISK&&(c=this.consumeCodePoint())===SOLIDUS)return this.consumeToken();if(c===EOF$1)return this.consumeToken()}break;case COLON:return COLON_TOKEN;case SEMICOLON:return SEMICOLON_TOKEN;case LESS_THAN_SIGN:if(this.peekCodePoint(0)===EXCLAMATION_MARK&&this.peekCodePoint(1)===HYPHEN_MINUS&&this.peekCodePoint(2)===HYPHEN_MINUS)return this.consumeCodePoint(),this.consumeCodePoint(),CDO_TOKEN;break;case COMMERCIAL_AT:var l=this.peekCodePoint(0),d=this.peekCodePoint(1),A=this.peekCodePoint(2);if(isIdentifierStart(l,d,A))return{type:7,value:this.consumeName()};break;case LEFT_SQUARE_BRACKET:return LEFT_SQUARE_BRACKET_TOKEN;case REVERSE_SOLIDUS:if(isValidEscape(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case RIGHT_SQUARE_BRACKET:return RIGHT_SQUARE_BRACKET_TOKEN;case CIRCUMFLEX_ACCENT:if(this.peekCodePoint(0)===EQUALS_SIGN)return this.consumeCodePoint(),PREFIX_MATCH_TOKEN;break;case LEFT_CURLY_BRACKET:return LEFT_CURLY_BRACKET_TOKEN;case RIGHT_CURLY_BRACKET:return RIGHT_CURLY_BRACKET_TOKEN;case u:case U:var p=this.peekCodePoint(0),h=this.peekCodePoint(1);return p!==PLUS_SIGN||!isHex(h)&&h!==QUESTION_MARK||(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case VERTICAL_LINE:if(this.peekCodePoint(0)===EQUALS_SIGN)return this.consumeCodePoint(),DASH_MATCH_TOKEN;if(this.peekCodePoint(0)===VERTICAL_LINE)return this.consumeCodePoint(),COLUMN_TOKEN;break;case TILDE:if(this.peekCodePoint(0)===EQUALS_SIGN)return this.consumeCodePoint(),INCLUDE_MATCH_TOKEN;break;case EOF$1:return EOF_TOKEN}return isWhiteSpace(e)?(this.consumeWhiteSpace(),WHITESPACE_TOKEN):isDigit(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):isNameStartCodePoint(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:fromCodePoint$1(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return void 0===e?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],t=this.consumeCodePoint();isHex(t)&&e.length<6;)e.push(t),t=this.consumeCodePoint();for(var n=!1;t===QUESTION_MARK&&e.length<6;)e.push(t),t=this.consumeCodePoint(),n=!0;if(n)return{type:30,start:parseInt(fromCodePoint$1.apply(void 0,e.map((function(e){return e===QUESTION_MARK?ZERO:e}))),16),end:parseInt(fromCodePoint$1.apply(void 0,e.map((function(e){return e===QUESTION_MARK?F:e}))),16)};var r=parseInt(fromCodePoint$1.apply(void 0,e),16);if(this.peekCodePoint(0)===HYPHEN_MINUS&&isHex(this.peekCodePoint(1))){this.consumeCodePoint(),t=this.consumeCodePoint();for(var o=[];isHex(t)&&o.length<6;)o.push(t),t=this.consumeCodePoint();return{type:30,start:r,end:parseInt(fromCodePoint$1.apply(void 0,o),16)}}return{type:30,start:r,end:r}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return"url"===e.toLowerCase()&&this.peekCodePoint(0)===LEFT_PARENTHESIS?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===LEFT_PARENTHESIS?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===EOF$1)return{type:22,value:""};var t=this.peekCodePoint(0);if(t===APOSTROPHE||t===QUOTATION_MARK){var n=this.consumeStringToken(this.consumeCodePoint());return 0===n.type&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===EOF$1||this.peekCodePoint(0)===RIGHT_PARENTHESIS)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),BAD_URL_TOKEN)}for(;;){var r=this.consumeCodePoint();if(r===EOF$1||r===RIGHT_PARENTHESIS)return{type:22,value:fromCodePoint$1.apply(void 0,e)};if(isWhiteSpace(r))return this.consumeWhiteSpace(),this.peekCodePoint(0)===EOF$1||this.peekCodePoint(0)===RIGHT_PARENTHESIS?(this.consumeCodePoint(),{type:22,value:fromCodePoint$1.apply(void 0,e)}):(this.consumeBadUrlRemnants(),BAD_URL_TOKEN);if(r===QUOTATION_MARK||r===APOSTROPHE||r===LEFT_PARENTHESIS||isNonPrintableCodePoint(r))return this.consumeBadUrlRemnants(),BAD_URL_TOKEN;if(r===REVERSE_SOLIDUS){if(!isValidEscape(r,this.peekCodePoint(0)))return this.consumeBadUrlRemnants(),BAD_URL_TOKEN;e.push(this.consumeEscapedCodePoint())}else e.push(r)}},t.prototype.consumeWhiteSpace=function(){for(;isWhiteSpace(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===RIGHT_PARENTHESIS||e===EOF$1)return;isValidEscape(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var t="";e>0;){var n=Math.min(5e4,e);t+=fromCodePoint$1.apply(void 0,this._value.splice(0,n)),e-=n}return this._value.shift(),t},t.prototype.consumeStringToken=function(e){for(var t="",n=0;;){var r=this._value[n];if(r===EOF$1||void 0===r||r===e)return{type:0,value:t+=this.consumeStringSlice(n)};if(r===LINE_FEED)return this._value.splice(0,n),BAD_STRING_TOKEN;if(r===REVERSE_SOLIDUS){var o=this._value[n+1];o!==EOF$1&&void 0!==o&&(o===LINE_FEED?(t+=this.consumeStringSlice(n),n=-1,this._value.shift()):isValidEscape(r,o)&&(t+=this.consumeStringSlice(n),t+=fromCodePoint$1(this.consumeEscapedCodePoint()),n=-1))}n++}},t.prototype.consumeNumber=function(){var t=[],n=FLAG_INTEGER,r=this.peekCodePoint(0);for(r!==PLUS_SIGN&&r!==HYPHEN_MINUS||t.push(this.consumeCodePoint());isDigit(this.peekCodePoint(0));)t.push(this.consumeCodePoint());r=this.peekCodePoint(0);var o=this.peekCodePoint(1);if(r===FULL_STOP&&isDigit(o))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),n=FLAG_NUMBER;isDigit(this.peekCodePoint(0));)t.push(this.consumeCodePoint());r=this.peekCodePoint(0),o=this.peekCodePoint(1);var i=this.peekCodePoint(2);if((r===E||r===e)&&((o===PLUS_SIGN||o===HYPHEN_MINUS)&&isDigit(i)||isDigit(o)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),n=FLAG_NUMBER;isDigit(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[stringToNumber(t),n]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),t=e[0],n=e[1],r=this.peekCodePoint(0),o=this.peekCodePoint(1),i=this.peekCodePoint(2);return isIdentifierStart(r,o,i)?{type:15,number:t,flags:n,unit:this.consumeName()}:r===PERCENTAGE_SIGN?(this.consumeCodePoint(),{type:16,number:t,flags:n}):{type:17,number:t,flags:n}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(isHex(e)){for(var t=fromCodePoint$1(e);isHex(this.peekCodePoint(0))&&t.length<6;)t+=fromCodePoint$1(this.consumeCodePoint());isWhiteSpace(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(t,16);return 0===n||isSurrogateCodePoint(n)||n>1114111?REPLACEMENT_CHARACTER:n}return e===EOF$1?REPLACEMENT_CHARACTER:e},t.prototype.consumeName=function(){for(var e="";;){var t=this.consumeCodePoint();if(isNameCodePoint(t))e+=fromCodePoint$1(t);else{if(!isValidEscape(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),e;e+=fromCodePoint$1(this.consumeEscapedCodePoint())}}},t}(),Parser=function(){function e(e){this._tokens=e}return e.create=function(t){var n=new Tokenizer;return n.write(t),new e(n.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var e=this.consumeToken();31===e.type;)e=this.consumeToken();if(32===e.type)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var t=this.consumeComponentValue();do{e=this.consumeToken()}while(31===e.type);if(32===e.type)return t;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var e=[];;){var t=this.consumeComponentValue();if(32===t.type)return e;e.push(t),e.push()}},e.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},e.prototype.consumeSimpleBlock=function(e){for(var t={type:e,values:[]},n=this.consumeToken();;){if(32===n.type||isEndingTokenFor(n,e))return t;this.reconsumeToken(n),t.values.push(this.consumeComponentValue()),n=this.consumeToken()}},e.prototype.consumeFunction=function(e){for(var t={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(32===n.type||3===n.type)return t;this.reconsumeToken(n),t.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var e=this._tokens.shift();return void 0===e?EOF_TOKEN:e},e.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},e}(),isDimensionToken=function(e){return 15===e.type},isNumberToken=function(e){return 17===e.type},isIdentToken=function(e){return 20===e.type},isStringToken=function(e){return 0===e.type},isIdentWithValue=function(e,t){return isIdentToken(e)&&e.value===t},nonWhiteSpace=function(e){return 31!==e.type},nonFunctionArgSeparator=function(e){return 31!==e.type&&4!==e.type},parseFunctionArgs=function(e){var t=[],n=[];return e.forEach((function(e){if(4===e.type){if(0===n.length)throw new Error("Error parsing function args, zero tokens for arg");return t.push(n),void(n=[])}31!==e.type&&n.push(e)})),n.length&&t.push(n),t},isEndingTokenFor=function(e,t){return 11===t&&12===e.type||(28===t&&29===e.type||2===t&&3===e.type)},isLength=function(e){return 17===e.type||15===e.type},isLengthPercentage=function(e){return 16===e.type||isLength(e)},parseLengthPercentageTuple=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},ZERO_LENGTH={type:17,number:0,flags:FLAG_INTEGER},FIFTY_PERCENT={type:16,number:50,flags:FLAG_INTEGER},HUNDRED_PERCENT={type:16,number:100,flags:FLAG_INTEGER},getAbsoluteValueForTuple=function(e,t,n){var r=e[0],o=e[1];return[getAbsoluteValue(r,t),getAbsoluteValue(void 0!==o?o:r,n)]},getAbsoluteValue=function(e,t){if(16===e.type)return e.number/100*t;if(isDimensionToken(e))switch(e.unit){case"rem":case"em":return 16*e.number;default:return e.number}return e.number},DEG="deg",GRAD="grad",RAD="rad",TURN="turn",angle={name:"angle",parse:function(e,t){if(15===t.type)switch(t.unit){case DEG:return Math.PI*t.number/180;case GRAD:return Math.PI/200*t.number;case RAD:return t.number;case TURN:return 2*Math.PI*t.number}throw new Error("Unsupported angle type")}},isAngle=function(e){return 15===e.type&&(e.unit===DEG||e.unit===GRAD||e.unit===RAD||e.unit===TURN)},parseNamedSide=function(e){switch(e.filter(isIdentToken).map((function(e){return e.value})).join(" ")){case"to bottom right":case"to right bottom":case"left top":case"top left":return[ZERO_LENGTH,ZERO_LENGTH];case"to top":case"bottom":return deg(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[ZERO_LENGTH,HUNDRED_PERCENT];case"to right":case"left":return deg(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[HUNDRED_PERCENT,HUNDRED_PERCENT];case"to bottom":case"top":return deg(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[HUNDRED_PERCENT,ZERO_LENGTH];case"to left":case"right":return deg(270)}return 0},deg=function(e){return Math.PI*e/180},color$1={name:"color",parse:function(e,t){if(18===t.type){var n=SUPPORTED_COLOR_FUNCTIONS[t.name];if(void 0===n)throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return n(e,t.values)}if(5===t.type){if(3===t.value.length){var r=t.value.substring(0,1),o=t.value.substring(1,2),i=t.value.substring(2,3);return pack(parseInt(r+r,16),parseInt(o+o,16),parseInt(i+i,16),1)}if(4===t.value.length){r=t.value.substring(0,1),o=t.value.substring(1,2),i=t.value.substring(2,3);var a=t.value.substring(3,4);return pack(parseInt(r+r,16),parseInt(o+o,16),parseInt(i+i,16),parseInt(a+a,16)/255)}if(6===t.value.length){r=t.value.substring(0,2),o=t.value.substring(2,4),i=t.value.substring(4,6);return pack(parseInt(r,16),parseInt(o,16),parseInt(i,16),1)}if(8===t.value.length){r=t.value.substring(0,2),o=t.value.substring(2,4),i=t.value.substring(4,6),a=t.value.substring(6,8);return pack(parseInt(r,16),parseInt(o,16),parseInt(i,16),parseInt(a,16)/255)}}if(20===t.type){var s=COLORS[t.value.toUpperCase()];if(void 0!==s)return s}return COLORS.TRANSPARENT}},isTransparent=function(e){return!(255&e)},asString=function(e){var t=255&e,n=255&e>>8,r=255&e>>16,o=255&e>>24;return t<255?"rgba("+o+","+r+","+n+","+t/255+")":"rgb("+o+","+r+","+n+")"},pack=function(e,t,n,r){return(e<<24|t<<16|n<<8|Math.round(255*r))>>>0},getTokenColorValue=function(e,t){if(17===e.type)return e.number;if(16===e.type){var n=3===t?1:255;return 3===t?e.number/100*n:Math.round(e.number/100*n)}return 0},rgb=function(e,t){var n=t.filter(nonFunctionArgSeparator);if(3===n.length){var r=n.map(getTokenColorValue),o=r[0],i=r[1],a=r[2];return pack(o,i,a,1)}if(4===n.length){var s=n.map(getTokenColorValue),c=(o=s[0],i=s[1],a=s[2],s[3]);return pack(o,i,a,c)}return 0};function hue2rgb(e,t,n){return n<0&&(n+=1),n>=1&&(n-=1),n<1/6?(t-e)*n*6+e:n<.5?t:n<2/3?6*(t-e)*(2/3-n)+e:e}var hsl=function(e,t){var n=t.filter(nonFunctionArgSeparator),r=n[0],o=n[1],i=n[2],a=n[3],s=(17===r.type?deg(r.number):angle.parse(e,r))/(2*Math.PI),c=isLengthPercentage(o)?o.number/100:0,l=isLengthPercentage(i)?i.number/100:0,u=void 0!==a&&isLengthPercentage(a)?getAbsoluteValue(a,1):1;if(0===c)return pack(255*l,255*l,255*l,1);var d=l<=.5?l*(c+1):l+c-l*c,A=2*l-d,p=hue2rgb(A,d,s+1/3),h=hue2rgb(A,d,s),f=hue2rgb(A,d,s-1/3);return pack(255*p,255*h,255*f,u)},SUPPORTED_COLOR_FUNCTIONS={hsl:hsl,hsla:hsl,rgb:rgb,rgba:rgb},parseColor=function(e,t){return color$1.parse(e,Parser.create(t).parseComponentValue())},COLORS={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},backgroundClip={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map((function(e){if(isIdentToken(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0}))}},backgroundColor={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},parseColorStop=function(e,t){var n=color$1.parse(e,t[0]),r=t[1];return r&&isLengthPercentage(r)?{color:n,stop:r}:{color:n,stop:null}},processColorStops=function(e,t){var n=e[0],r=e[e.length-1];null===n.stop&&(n.stop=ZERO_LENGTH),null===r.stop&&(r.stop=HUNDRED_PERCENT);for(var o=[],i=0,a=0;a<e.length;a++){var s=e[a].stop;if(null!==s){var c=getAbsoluteValue(s,t);c>i?o.push(c):o.push(i),i=c}else o.push(null)}var l=null;for(a=0;a<o.length;a++){var u=o[a];if(null===u)null===l&&(l=a);else if(null!==l){for(var d=a-l,A=(u-o[l-1])/(d+1),p=1;p<=d;p++)o[l+p-1]=A*p;l=null}}return e.map((function(e,n){return{color:e.color,stop:Math.max(Math.min(1,o[n]/t),0)}}))},getAngleFromCorner=function(e,t,n){var r=t/2,o=n/2,i=getAbsoluteValue(e[0],t)-r,a=o-getAbsoluteValue(e[1],n);return(Math.atan2(a,i)+2*Math.PI)%(2*Math.PI)},calculateGradientDirection=function(e,t,n){var r="number"==typeof e?e:getAngleFromCorner(e,t,n),o=Math.abs(t*Math.sin(r))+Math.abs(n*Math.cos(r)),i=t/2,a=n/2,s=o/2,c=Math.sin(r-Math.PI/2)*s,l=Math.cos(r-Math.PI/2)*s;return[o,i-l,i+l,a-c,a+c]},distance=function(e,t){return Math.sqrt(e*e+t*t)},findCorner=function(e,t,n,r,o){return[[0,0],[0,t],[e,0],[e,t]].reduce((function(e,t){var i=t[0],a=t[1],s=distance(n-i,r-a);return(o?s<e.optimumDistance:s>e.optimumDistance)?{optimumCorner:t,optimumDistance:s}:e}),{optimumDistance:o?1/0:-1/0,optimumCorner:null}).optimumCorner},calculateRadius=function(e,t,n,r,o){var i=0,a=0;switch(e.size){case 0:0===e.shape?i=a=Math.min(Math.abs(t),Math.abs(t-r),Math.abs(n),Math.abs(n-o)):1===e.shape&&(i=Math.min(Math.abs(t),Math.abs(t-r)),a=Math.min(Math.abs(n),Math.abs(n-o)));break;case 2:if(0===e.shape)i=a=Math.min(distance(t,n),distance(t,n-o),distance(t-r,n),distance(t-r,n-o));else if(1===e.shape){var s=Math.min(Math.abs(n),Math.abs(n-o))/Math.min(Math.abs(t),Math.abs(t-r)),c=findCorner(r,o,t,n,!0),l=c[0],u=c[1];a=s*(i=distance(l-t,(u-n)/s))}break;case 1:0===e.shape?i=a=Math.max(Math.abs(t),Math.abs(t-r),Math.abs(n),Math.abs(n-o)):1===e.shape&&(i=Math.max(Math.abs(t),Math.abs(t-r)),a=Math.max(Math.abs(n),Math.abs(n-o)));break;case 3:if(0===e.shape)i=a=Math.max(distance(t,n),distance(t,n-o),distance(t-r,n),distance(t-r,n-o));else if(1===e.shape){s=Math.max(Math.abs(n),Math.abs(n-o))/Math.max(Math.abs(t),Math.abs(t-r));var d=findCorner(r,o,t,n,!1);l=d[0],u=d[1];a=s*(i=distance(l-t,(u-n)/s))}}return Array.isArray(e.size)&&(i=getAbsoluteValue(e.size[0],r),a=2===e.size.length?getAbsoluteValue(e.size[1],o):i),[i,a]},linearGradient=function(e,t){var n=deg(180),r=[];return parseFunctionArgs(t).forEach((function(t,o){if(0===o){var i=t[0];if(20===i.type&&"to"===i.value)return void(n=parseNamedSide(t));if(isAngle(i))return void(n=angle.parse(e,i))}var a=parseColorStop(e,t);r.push(a)})),{angle:n,stops:r,type:1}},prefixLinearGradient=function(e,t){var n=deg(180),r=[];return parseFunctionArgs(t).forEach((function(t,o){if(0===o){var i=t[0];if(20===i.type&&-1!==["top","left","right","bottom"].indexOf(i.value))return void(n=parseNamedSide(t));if(isAngle(i))return void(n=(angle.parse(e,i)+deg(270))%deg(360))}var a=parseColorStop(e,t);r.push(a)})),{angle:n,stops:r,type:1}},webkitGradient=function(e,t){var n=deg(180),r=[],o=1;return parseFunctionArgs(t).forEach((function(t,n){var i=t[0];if(0===n){if(isIdentToken(i)&&"linear"===i.value)return void(o=1);if(isIdentToken(i)&&"radial"===i.value)return void(o=2)}if(18===i.type)if("from"===i.name){var a=color$1.parse(e,i.values[0]);r.push({stop:ZERO_LENGTH,color:a})}else if("to"===i.name){a=color$1.parse(e,i.values[0]);r.push({stop:HUNDRED_PERCENT,color:a})}else if("color-stop"===i.name){var s=i.values.filter(nonFunctionArgSeparator);if(2===s.length){a=color$1.parse(e,s[1]);var c=s[0];isNumberToken(c)&&r.push({stop:{type:16,number:100*c.number,flags:c.flags},color:a})}}})),1===o?{angle:(n+deg(180))%deg(360),stops:r,type:o}:{size:3,shape:0,stops:r,position:[],type:o}},CLOSEST_SIDE="closest-side",FARTHEST_SIDE="farthest-side",CLOSEST_CORNER="closest-corner",FARTHEST_CORNER="farthest-corner",CIRCLE="circle",ELLIPSE="ellipse",COVER="cover",CONTAIN="contain",radialGradient=function(e,t){var n=0,r=3,o=[],i=[];return parseFunctionArgs(t).forEach((function(t,a){var s=!0;if(0===a){var c=!1;s=t.reduce((function(e,t){if(c)if(isIdentToken(t))switch(t.value){case"center":return i.push(FIFTY_PERCENT),e;case"top":case"left":return i.push(ZERO_LENGTH),e;case"right":case"bottom":return i.push(HUNDRED_PERCENT),e}else(isLengthPercentage(t)||isLength(t))&&i.push(t);else if(isIdentToken(t))switch(t.value){case CIRCLE:return n=0,!1;case ELLIPSE:return n=1,!1;case"at":return c=!0,!1;case CLOSEST_SIDE:return r=0,!1;case COVER:case FARTHEST_SIDE:return r=1,!1;case CONTAIN:case CLOSEST_CORNER:return r=2,!1;case FARTHEST_CORNER:return r=3,!1}else if(isLength(t)||isLengthPercentage(t))return Array.isArray(r)||(r=[]),r.push(t),!1;return e}),s)}if(s){var l=parseColorStop(e,t);o.push(l)}})),{size:r,shape:n,stops:o,position:i,type:2}},prefixRadialGradient=function(e,t){var n=0,r=3,o=[],i=[];return parseFunctionArgs(t).forEach((function(t,a){var s=!0;if(0===a?s=t.reduce((function(e,t){if(isIdentToken(t))switch(t.value){case"center":return i.push(FIFTY_PERCENT),!1;case"top":case"left":return i.push(ZERO_LENGTH),!1;case"right":case"bottom":return i.push(HUNDRED_PERCENT),!1}else if(isLengthPercentage(t)||isLength(t))return i.push(t),!1;return e}),s):1===a&&(s=t.reduce((function(e,t){if(isIdentToken(t))switch(t.value){case CIRCLE:return n=0,!1;case ELLIPSE:return n=1,!1;case CONTAIN:case CLOSEST_SIDE:return r=0,!1;case FARTHEST_SIDE:return r=1,!1;case CLOSEST_CORNER:return r=2,!1;case COVER:case FARTHEST_CORNER:return r=3,!1}else if(isLength(t)||isLengthPercentage(t))return Array.isArray(r)||(r=[]),r.push(t),!1;return e}),s)),s){var c=parseColorStop(e,t);o.push(c)}})),{size:r,shape:n,stops:o,position:i,type:2}},isLinearGradient=function(e){return 1===e.type},isRadialGradient=function(e){return 2===e.type},image={name:"image",parse:function(e,t){if(22===t.type){var n={url:t.value,type:0};return e.cache.addImage(t.value),n}if(18===t.type){var r=SUPPORTED_IMAGE_FUNCTIONS[t.name];if(void 0===r)throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return r(e,t.values)}throw new Error("Unsupported image type "+t.type)}};function isSupportedImage(e){return!(20===e.type&&"none"===e.value||18===e.type&&!SUPPORTED_IMAGE_FUNCTIONS[e.name])}var SUPPORTED_IMAGE_FUNCTIONS={"linear-gradient":linearGradient,"-moz-linear-gradient":prefixLinearGradient,"-ms-linear-gradient":prefixLinearGradient,"-o-linear-gradient":prefixLinearGradient,"-webkit-linear-gradient":prefixLinearGradient,"radial-gradient":radialGradient,"-moz-radial-gradient":prefixRadialGradient,"-ms-radial-gradient":prefixRadialGradient,"-o-radial-gradient":prefixRadialGradient,"-webkit-radial-gradient":prefixRadialGradient,"-webkit-gradient":webkitGradient},backgroundImage={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(0===t.length)return[];var n=t[0];return 20===n.type&&"none"===n.value?[]:t.filter((function(e){return nonFunctionArgSeparator(e)&&isSupportedImage(e)})).map((function(t){return image.parse(e,t)}))}},backgroundOrigin={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map((function(e){if(isIdentToken(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0}))}},backgroundPosition={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return parseFunctionArgs(t).map((function(e){return e.filter(isLengthPercentage)})).map(parseLengthPercentageTuple)}},backgroundRepeat={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return parseFunctionArgs(t).map((function(e){return e.filter(isIdentToken).map((function(e){return e.value})).join(" ")})).map(parseBackgroundRepeat)}},parseBackgroundRepeat=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;default:return 0}},BACKGROUND_SIZE,BACKGROUND_SIZE2;BACKGROUND_SIZE2=BACKGROUND_SIZE||(BACKGROUND_SIZE={}),BACKGROUND_SIZE2.AUTO="auto",BACKGROUND_SIZE2.CONTAIN="contain",BACKGROUND_SIZE2.COVER="cover";var backgroundSize={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return parseFunctionArgs(t).map((function(e){return e.filter(isBackgroundSizeInfoToken)}))}},isBackgroundSizeInfoToken=function(e){return isIdentToken(e)||isLengthPercentage(e)},borderColorForSide=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},borderTopColor=borderColorForSide("top"),borderRightColor=borderColorForSide("right"),borderBottomColor=borderColorForSide("bottom"),borderLeftColor=borderColorForSide("left"),borderRadiusForSide=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(e,t){return parseLengthPercentageTuple(t.filter(isLengthPercentage))}}},borderTopLeftRadius=borderRadiusForSide("top-left"),borderTopRightRadius=borderRadiusForSide("top-right"),borderBottomRightRadius=borderRadiusForSide("bottom-right"),borderBottomLeftRadius=borderRadiusForSide("bottom-left"),borderStyleForSide=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,t){switch(t){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},borderTopStyle=borderStyleForSide("top"),borderRightStyle=borderStyleForSide("right"),borderBottomStyle=borderStyleForSide("bottom"),borderLeftStyle=borderStyleForSide("left"),borderWidthForSide=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return isDimensionToken(t)?t.number:0}}},borderTopWidth=borderWidthForSide("top"),borderRightWidth=borderWidthForSide("right"),borderBottomWidth=borderWidthForSide("bottom"),borderLeftWidth=borderWidthForSide("left"),color={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},direction={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){return"rtl"===t?1:0}},display={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(isIdentToken).reduce((function(e,t){return e|parseDisplayValue(t.value)}),0)}},parseDisplayValue=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},float={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},letterSpacing={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return 20===t.type&&"normal"===t.value?0:17===t.type||15===t.type?t.number:0}},LINE_BREAK,LINE_BREAK2;LINE_BREAK2=LINE_BREAK||(LINE_BREAK={}),LINE_BREAK2.NORMAL="normal",LINE_BREAK2.STRICT="strict";var lineBreak={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){return"strict"===t?LINE_BREAK.STRICT:LINE_BREAK.NORMAL}},lineHeight={name:"line-height",initialValue:"normal",prefix:!1,type:4},computeLineHeight=function(e,t){return isIdentToken(e)&&"normal"===e.value?1.2*t:17===e.type?t*e.number:isLengthPercentage(e)?getAbsoluteValue(e,t):t},listStyleImage={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return 20===t.type&&"none"===t.value?null:image.parse(e,t)}},listStylePosition={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){return"inside"===t?0:1}},listStyleType={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;default:return-1}}},marginForSide=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},marginTop=marginForSide("top"),marginRight=marginForSide("right"),marginBottom=marginForSide("bottom"),marginLeft=marginForSide("left"),overflow={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(isIdentToken).map((function(e){switch(e.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;default:return 0}}))}},overflowWrap={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){return"break-word"===t?"break-word":"normal"}},paddingForSide=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},paddingTop=paddingForSide("top"),paddingRight=paddingForSide("right"),paddingBottom=paddingForSide("bottom"),paddingLeft=paddingForSide("left"),textAlign={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;default:return 0}}},position={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},textShadow={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return 1===t.length&&isIdentWithValue(t[0],"none")?[]:parseFunctionArgs(t).map((function(t){for(var n={color:COLORS.TRANSPARENT,offsetX:ZERO_LENGTH,offsetY:ZERO_LENGTH,blur:ZERO_LENGTH},r=0,o=0;o<t.length;o++){var i=t[o];isLength(i)?(0===r?n.offsetX=i:1===r?n.offsetY=i:n.blur=i,r++):n.color=color$1.parse(e,i)}return n}))}},textTransform={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},transform$1={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(20===t.type&&"none"===t.value)return null;if(18===t.type){var n=SUPPORTED_TRANSFORM_FUNCTIONS[t.name];if(void 0===n)throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return n(t.values)}return null}},matrix=function(e){var t=e.filter((function(e){return 17===e.type})).map((function(e){return e.number}));return 6===t.length?t:null},matrix3d=function(e){var t=e.filter((function(e){return 17===e.type})).map((function(e){return e.number})),n=t[0],r=t[1];t[2],t[3];var o=t[4],i=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var a=t[12],s=t[13];return t[14],t[15],16===t.length?[n,r,o,i,a,s]:null},SUPPORTED_TRANSFORM_FUNCTIONS={matrix:matrix,matrix3d:matrix3d},DEFAULT_VALUE={type:16,number:50,flags:FLAG_INTEGER},DEFAULT=[DEFAULT_VALUE,DEFAULT_VALUE],transformOrigin={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var n=t.filter(isLengthPercentage);return 2!==n.length?DEFAULT:[n[0],n[1]]}},visibility={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;default:return 0}}},WORD_BREAK,WORD_BREAK2;WORD_BREAK2=WORD_BREAK||(WORD_BREAK={}),WORD_BREAK2.NORMAL="normal",WORD_BREAK2.BREAK_ALL="break-all",WORD_BREAK2.KEEP_ALL="keep-all";for(var wordBreak={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return WORD_BREAK.BREAK_ALL;case"keep-all":return WORD_BREAK.KEEP_ALL;default:return WORD_BREAK.NORMAL}}},zIndex={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(20===t.type)return{auto:!0,order:0};if(isNumberToken(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},time={name:"time",parse:function(e,t){if(15===t.type)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},opacity={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return isNumberToken(t)?t.number:1}},textDecorationColor={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},textDecorationLine={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(isIdentToken).map((function(e){switch(e.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0})).filter((function(e){return 0!==e}))}},fontFamily={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var n=[],r=[];return t.forEach((function(e){switch(e.type){case 20:case 0:n.push(e.value);break;case 17:n.push(e.number.toString());break;case 4:r.push(n.join(" ")),n.length=0}})),n.length&&r.push(n.join(" ")),r.map((function(e){return-1===e.indexOf(" ")?e:"'"+e+"'"}))}},fontSize={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},fontWeight={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){return isNumberToken(t)?t.number:isIdentToken(t)&&"bold"===t.value?700:400}},fontVariant={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(isIdentToken).map((function(e){return e.value}))}},fontStyle={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";default:return"normal"}}},contains=function(e,t){return!!(e&t)},content={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(0===t.length)return[];var n=t[0];return 20===n.type&&"none"===n.value?[]:t}},counterIncrement={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return null;var n=t[0];if(20===n.type&&"none"===n.value)return null;for(var r=[],o=t.filter(nonWhiteSpace),i=0;i<o.length;i++){var a=o[i],s=o[i+1];if(20===a.type){var c=s&&isNumberToken(s)?s.number:1;r.push({counter:a.value,increment:c})}}return r}},counterReset={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return[];for(var n=[],r=t.filter(nonWhiteSpace),o=0;o<r.length;o++){var i=r[o],a=r[o+1];if(isIdentToken(i)&&"none"!==i.value){var s=a&&isNumberToken(a)?a.number:0;n.push({counter:i.value,reset:s})}}return n}},duration={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(isDimensionToken).map((function(t){return time.parse(e,t)}))}},quotes={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return null;var n=t[0];if(20===n.type&&"none"===n.value)return null;var r=[],o=t.filter(isStringToken);if(o.length%2!=0)return null;for(var i=0;i<o.length;i+=2){var a=o[i].value,s=o[i+1].value;r.push({open:a,close:s})}return r}},getQuote=function(e,t,n){if(!e)return"";var r=e[Math.min(t,e.length-1)];return r?n?r.open:r.close:""},boxShadow={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return 1===t.length&&isIdentWithValue(t[0],"none")?[]:parseFunctionArgs(t).map((function(t){for(var n={color:255,offsetX:ZERO_LENGTH,offsetY:ZERO_LENGTH,blur:ZERO_LENGTH,spread:ZERO_LENGTH,inset:!1},r=0,o=0;o<t.length;o++){var i=t[o];isIdentWithValue(i,"inset")?n.inset=!0:isLength(i)?(0===r?n.offsetX=i:1===r?n.offsetY=i:2===r?n.blur=i:n.spread=i,r++):n.color=color$1.parse(e,i)}return n}))}},paintOrder={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var n=[];return t.filter(isIdentToken).forEach((function(e){switch(e.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2)}})),[0,1,2].forEach((function(e){-1===n.indexOf(e)&&n.push(e)})),n}},webkitTextStrokeColor={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},webkitTextStrokeWidth={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return isDimensionToken(t)?t.number:0}},CSSParsedDeclaration=function(){function e(e,t){var n,r;this.animationDuration=parse(e,duration,t.animationDuration),this.backgroundClip=parse(e,backgroundClip,t.backgroundClip),this.backgroundColor=parse(e,backgroundColor,t.backgroundColor),this.backgroundImage=parse(e,backgroundImage,t.backgroundImage),this.backgroundOrigin=parse(e,backgroundOrigin,t.backgroundOrigin),this.backgroundPosition=parse(e,backgroundPosition,t.backgroundPosition),this.backgroundRepeat=parse(e,backgroundRepeat,t.backgroundRepeat),this.backgroundSize=parse(e,backgroundSize,t.backgroundSize),this.borderTopColor=parse(e,borderTopColor,t.borderTopColor),this.borderRightColor=parse(e,borderRightColor,t.borderRightColor),this.borderBottomColor=parse(e,borderBottomColor,t.borderBottomColor),this.borderLeftColor=parse(e,borderLeftColor,t.borderLeftColor),this.borderTopLeftRadius=parse(e,borderTopLeftRadius,t.borderTopLeftRadius),this.borderTopRightRadius=parse(e,borderTopRightRadius,t.borderTopRightRadius),this.borderBottomRightRadius=parse(e,borderBottomRightRadius,t.borderBottomRightRadius),this.borderBottomLeftRadius=parse(e,borderBottomLeftRadius,t.borderBottomLeftRadius),this.borderTopStyle=parse(e,borderTopStyle,t.borderTopStyle),this.borderRightStyle=parse(e,borderRightStyle,t.borderRightStyle),this.borderBottomStyle=parse(e,borderBottomStyle,t.borderBottomStyle),this.borderLeftStyle=parse(e,borderLeftStyle,t.borderLeftStyle),this.borderTopWidth=parse(e,borderTopWidth,t.borderTopWidth),this.borderRightWidth=parse(e,borderRightWidth,t.borderRightWidth),this.borderBottomWidth=parse(e,borderBottomWidth,t.borderBottomWidth),this.borderLeftWidth=parse(e,borderLeftWidth,t.borderLeftWidth),this.boxShadow=parse(e,boxShadow,t.boxShadow),this.color=parse(e,color,t.color),this.direction=parse(e,direction,t.direction),this.display=parse(e,display,t.display),this.float=parse(e,float,t.cssFloat),this.fontFamily=parse(e,fontFamily,t.fontFamily),this.fontSize=parse(e,fontSize,t.fontSize),this.fontStyle=parse(e,fontStyle,t.fontStyle),this.fontVariant=parse(e,fontVariant,t.fontVariant),this.fontWeight=parse(e,fontWeight,t.fontWeight),this.letterSpacing=parse(e,letterSpacing,t.letterSpacing),this.lineBreak=parse(e,lineBreak,t.lineBreak),this.lineHeight=parse(e,lineHeight,t.lineHeight),this.listStyleImage=parse(e,listStyleImage,t.listStyleImage),this.listStylePosition=parse(e,listStylePosition,t.listStylePosition),this.listStyleType=parse(e,listStyleType,t.listStyleType),this.marginTop=parse(e,marginTop,t.marginTop),this.marginRight=parse(e,marginRight,t.marginRight),this.marginBottom=parse(e,marginBottom,t.marginBottom),this.marginLeft=parse(e,marginLeft,t.marginLeft),this.opacity=parse(e,opacity,t.opacity);var o=parse(e,overflow,t.overflow);this.overflowX=o[0],this.overflowY=o[o.length>1?1:0],this.overflowWrap=parse(e,overflowWrap,t.overflowWrap),this.paddingTop=parse(e,paddingTop,t.paddingTop),this.paddingRight=parse(e,paddingRight,t.paddingRight),this.paddingBottom=parse(e,paddingBottom,t.paddingBottom),this.paddingLeft=parse(e,paddingLeft,t.paddingLeft),this.paintOrder=parse(e,paintOrder,t.paintOrder),this.position=parse(e,position,t.position),this.textAlign=parse(e,textAlign,t.textAlign),this.textDecorationColor=parse(e,textDecorationColor,null!==(n=t.textDecorationColor)&&void 0!==n?n:t.color),this.textDecorationLine=parse(e,textDecorationLine,null!==(r=t.textDecorationLine)&&void 0!==r?r:t.textDecoration),this.textShadow=parse(e,textShadow,t.textShadow),this.textTransform=parse(e,textTransform,t.textTransform),this.transform=parse(e,transform$1,t.transform),this.transformOrigin=parse(e,transformOrigin,t.transformOrigin),this.visibility=parse(e,visibility,t.visibility),this.webkitTextStrokeColor=parse(e,webkitTextStrokeColor,t.webkitTextStrokeColor),this.webkitTextStrokeWidth=parse(e,webkitTextStrokeWidth,t.webkitTextStrokeWidth),this.wordBreak=parse(e,wordBreak,t.wordBreak),this.zIndex=parse(e,zIndex,t.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&0===this.visibility},e.prototype.isTransparent=function(){return isTransparent(this.backgroundColor)},e.prototype.isTransformed=function(){return null!==this.transform},e.prototype.isPositioned=function(){return 0!==this.position},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return 0!==this.float},e.prototype.isInlineLevel=function(){return contains(this.display,4)||contains(this.display,33554432)||contains(this.display,268435456)||contains(this.display,536870912)||contains(this.display,67108864)||contains(this.display,134217728)},e}(),CSSParsedPseudoDeclaration=function(){return function(e,t){this.content=parse(e,content,t.content),this.quotes=parse(e,quotes,t.quotes)}}(),CSSParsedCounterDeclaration=function(){return function(e,t){this.counterIncrement=parse(e,counterIncrement,t.counterIncrement),this.counterReset=parse(e,counterReset,t.counterReset)}}(),parse=function(e,t,n){var r=new Tokenizer,o=null!=n?n.toString():t.initialValue;r.write(o);var i=new Parser(r.read());switch(t.type){case 2:var a=i.parseComponentValue();return t.parse(e,isIdentToken(a)?a.value:t.initialValue);case 0:return t.parse(e,i.parseComponentValue());case 1:return t.parse(e,i.parseComponentValues());case 4:return i.parseComponentValue();case 3:switch(t.format){case"angle":return angle.parse(e,i.parseComponentValue());case"color":return color$1.parse(e,i.parseComponentValue());case"image":return image.parse(e,i.parseComponentValue());case"length":var s=i.parseComponentValue();return isLength(s)?s:ZERO_LENGTH;case"length-percentage":var c=i.parseComponentValue();return isLengthPercentage(c)?c:ZERO_LENGTH;case"time":return time.parse(e,i.parseComponentValue())}}},elementDebuggerAttribute="data-html2canvas-debug",getElementDebugType=function(e){switch(e.getAttribute(elementDebuggerAttribute)){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},isDebugging=function(e,t){var n=getElementDebugType(e);return 1===n||t===n},ElementContainer=function(){return function(e,t){this.context=e,this.textNodes=[],this.elements=[],this.flags=0,isDebugging(t,3),this.styles=new CSSParsedDeclaration(e,window.getComputedStyle(t,null)),isHTMLElementNode(t)&&(this.styles.animationDuration.some((function(e){return e>0}))&&(t.style.animationDuration="0s"),null!==this.styles.transform&&(t.style.transform="none")),this.bounds=parseBounds(this.context,t),isDebugging(t,4)&&(this.flags|=16)}}(),base64="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",chars$1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup$1="undefined"==typeof Uint8Array?[]:new Uint8Array(256),i$1=0;i$1<chars$1.length;i$1++)lookup$1[chars$1.charCodeAt(i$1)]=i$1;for(var decode=function(e){var t,n,r,o,i,a=.75*e.length,s=e.length,c=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var l="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?new ArrayBuffer(a):new Array(a),u=Array.isArray(l)?l:new Uint8Array(l);for(t=0;t<s;t+=4)n=lookup$1[e.charCodeAt(t)],r=lookup$1[e.charCodeAt(t+1)],o=lookup$1[e.charCodeAt(t+2)],i=lookup$1[e.charCodeAt(t+3)],u[c++]=n<<2|r>>4,u[c++]=(15&r)<<4|o>>2,u[c++]=(3&o)<<6|63&i;return l},polyUint16Array=function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n.push(e[r+1]<<8|e[r]);return n},polyUint32Array=function(e){for(var t=e.length,n=[],r=0;r<t;r+=4)n.push(e[r+3]<<24|e[r+2]<<16|e[r+1]<<8|e[r]);return n},UTRIE2_SHIFT_2=5,UTRIE2_SHIFT_1=11,UTRIE2_INDEX_SHIFT=2,UTRIE2_SHIFT_1_2=UTRIE2_SHIFT_1-UTRIE2_SHIFT_2,UTRIE2_LSCP_INDEX_2_OFFSET=65536>>UTRIE2_SHIFT_2,UTRIE2_DATA_BLOCK_LENGTH=1<<UTRIE2_SHIFT_2,UTRIE2_DATA_MASK=UTRIE2_DATA_BLOCK_LENGTH-1,UTRIE2_LSCP_INDEX_2_LENGTH=1024>>UTRIE2_SHIFT_2,UTRIE2_INDEX_2_BMP_LENGTH=UTRIE2_LSCP_INDEX_2_OFFSET+UTRIE2_LSCP_INDEX_2_LENGTH,UTRIE2_UTF8_2B_INDEX_2_OFFSET=UTRIE2_INDEX_2_BMP_LENGTH,UTRIE2_UTF8_2B_INDEX_2_LENGTH=32,UTRIE2_INDEX_1_OFFSET=UTRIE2_UTF8_2B_INDEX_2_OFFSET+UTRIE2_UTF8_2B_INDEX_2_LENGTH,UTRIE2_OMITTED_BMP_INDEX_1_LENGTH=65536>>UTRIE2_SHIFT_1,UTRIE2_INDEX_2_BLOCK_LENGTH=1<<UTRIE2_SHIFT_1_2,UTRIE2_INDEX_2_MASK=UTRIE2_INDEX_2_BLOCK_LENGTH-1,slice16=function(e,t,n){return e.slice?e.slice(t,n):new Uint16Array(Array.prototype.slice.call(e,t,n))},slice32=function(e,t,n){return e.slice?e.slice(t,n):new Uint32Array(Array.prototype.slice.call(e,t,n))},createTrieFromBase64=function(e,t){var n=decode(e),r=Array.isArray(n)?polyUint32Array(n):new Uint32Array(n),o=Array.isArray(n)?polyUint16Array(n):new Uint16Array(n),i=slice16(o,12,r[4]/2),a=2===r[5]?slice16(o,(24+r[4])/2):slice32(r,Math.ceil((24+r[4])/4));return new Trie(r[0],r[1],r[2],r[3],i,a)},Trie=function(){function e(e,t,n,r,o,i){this.initialValue=e,this.errorValue=t,this.highStart=n,this.highValueIndex=r,this.index=o,this.data=i}return e.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=((t=this.index[e>>UTRIE2_SHIFT_2])<<UTRIE2_INDEX_SHIFT)+(e&UTRIE2_DATA_MASK),this.data[t];if(e<=65535)return t=((t=this.index[UTRIE2_LSCP_INDEX_2_OFFSET+(e-55296>>UTRIE2_SHIFT_2)])<<UTRIE2_INDEX_SHIFT)+(e&UTRIE2_DATA_MASK),this.data[t];if(e<this.highStart)return t=UTRIE2_INDEX_1_OFFSET-UTRIE2_OMITTED_BMP_INDEX_1_LENGTH+(e>>UTRIE2_SHIFT_1),t=this.index[t],t+=e>>UTRIE2_SHIFT_2&UTRIE2_INDEX_2_MASK,t=((t=this.index[t])<<UTRIE2_INDEX_SHIFT)+(e&UTRIE2_DATA_MASK),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup="undefined"==typeof Uint8Array?[]:new Uint8Array(256),i=0;i<chars.length;i++)lookup[chars.charCodeAt(i)]=i;var Prepend=1,CR=2,LF=3,Control=4,Extend=5,SpacingMark=7,L=8,V=9,T=10,LV=11,LVT=12,ZWJ=13,Extended_Pictographic=14,RI=15,toCodePoints=function(e){for(var t=[],n=0,r=e.length;n<r;){var o=e.charCodeAt(n++);if(o>=55296&&o<=56319&&n<r){var i=e.charCodeAt(n++);56320==(64512&i)?t.push(((1023&o)<<10)+(1023&i)+65536):(t.push(o),n--)}else t.push(o)}return t},fromCodePoint=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var n=e.length;if(!n)return"";for(var r=[],o=-1,i="";++o<n;){var a=e[o];a<=65535?r.push(a):(a-=65536,r.push(55296+(a>>10),a%1024+56320)),(o+1===n||r.length>16384)&&(i+=String.fromCharCode.apply(String,r),r.length=0)}return i},UnicodeTrie=createTrieFromBase64(base64),BREAK_NOT_ALLOWED="",BREAK_ALLOWED="",codePointToClass=function(e){return UnicodeTrie.get(e)},_graphemeBreakAtIndex=function(e,t,n){var r=n-2,o=t[r],i=t[n-1],a=t[n];if(i===CR&&a===LF)return BREAK_NOT_ALLOWED;if(i===CR||i===LF||i===Control)return BREAK_ALLOWED;if(a===CR||a===LF||a===Control)return BREAK_ALLOWED;if(i===L&&-1!==[L,V,LV,LVT].indexOf(a))return BREAK_NOT_ALLOWED;if(!(i!==LV&&i!==V||a!==V&&a!==T))return BREAK_NOT_ALLOWED;if((i===LVT||i===T)&&a===T)return BREAK_NOT_ALLOWED;if(a===ZWJ||a===Extend)return BREAK_NOT_ALLOWED;if(a===SpacingMark)return BREAK_NOT_ALLOWED;if(i===Prepend)return BREAK_NOT_ALLOWED;if(i===ZWJ&&a===Extended_Pictographic){for(;o===Extend;)o=t[--r];if(o===Extended_Pictographic)return BREAK_NOT_ALLOWED}if(i===RI&&a===RI){for(var s=0;o===RI;)s++,o=t[--r];if(s%2==0)return BREAK_NOT_ALLOWED}return BREAK_ALLOWED},GraphemeBreaker=function(e){var t=toCodePoints(e),n=t.length,r=0,o=0,i=t.map(codePointToClass);return{next:function(){if(r>=n)return{done:!0,value:null};for(var e=BREAK_NOT_ALLOWED;r<n&&(e=_graphemeBreakAtIndex(t,i,++r))===BREAK_NOT_ALLOWED;);if(e!==BREAK_NOT_ALLOWED||r===n){var a=fromCodePoint.apply(null,t.slice(o,r));return o=r,{value:a,done:!1}}return{done:!0,value:null}}}},splitGraphemes=function(e){for(var t,n=GraphemeBreaker(e),r=[];!(t=n.next()).done;)t.value&&r.push(t.value.slice());return r},testRangeBounds=function(e){if(e.createRange){var t=e.createRange();if(t.getBoundingClientRect){var n=e.createElement("boundtest");n.style.height="123px",n.style.display="block",e.body.appendChild(n),t.selectNode(n);var r=t.getBoundingClientRect(),o=Math.round(r.height);if(e.body.removeChild(n),123===o)return!0}}return!1},testIOSLineBreak=function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var n=e.createRange();t.innerHTML="function"==typeof"".repeat?"&#128104;".repeat(10):"";var r=t.firstChild,o=toCodePoints$1(r.data).map((function(e){return fromCodePoint$1(e)})),i=0,a={},s=o.every((function(e,t){n.setStart(r,i),n.setEnd(r,i+e.length);var o=n.getBoundingClientRect();i+=e.length;var s=o.x>a.x||o.y>a.y;return a=o,0===t||s}));return e.body.removeChild(t),s},testCORS=function(){return void 0!==(new Image).crossOrigin},testResponseType=function(){return"string"==typeof(new XMLHttpRequest).responseType},testSVG=function(e){var t=new Image,n=e.createElement("canvas"),r=n.getContext("2d");if(!r)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(t,0,0),n.toDataURL()}catch(o){return!1}return!0},isGreenPixel=function(e){return 0===e[0]&&255===e[1]&&0===e[2]&&255===e[3]},testForeignObject=function(e){var t=e.createElement("canvas"),n=100;t.width=n,t.height=n;var r=t.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,n,n);var o=new Image,i=t.toDataURL();o.src=i;var a=createForeignObjectSVG(n,n,0,0,o);return r.fillStyle="red",r.fillRect(0,0,n,n),loadSerializedSVG$1(a).then((function(t){r.drawImage(t,0,0);var o=r.getImageData(0,0,n,n).data;r.fillStyle="red",r.fillRect(0,0,n,n);var a=e.createElement("div");return a.style.backgroundImage="url("+i+")",a.style.height=n+"px",isGreenPixel(o)?loadSerializedSVG$1(createForeignObjectSVG(n,n,0,0,a)):Promise.reject(!1)})).then((function(e){return r.drawImage(e,0,0),isGreenPixel(r.getImageData(0,0,n,n).data)})).catch((function(){return!1}))},createForeignObjectSVG=function(e,t,n,r,o){var i="http://www.w3.org/2000/svg",a=document.createElementNS(i,"svg"),s=document.createElementNS(i,"foreignObject");return a.setAttributeNS(null,"width",e.toString()),a.setAttributeNS(null,"height",t.toString()),s.setAttributeNS(null,"width","100%"),s.setAttributeNS(null,"height","100%"),s.setAttributeNS(null,"x",n.toString()),s.setAttributeNS(null,"y",r.toString()),s.setAttributeNS(null,"externalResourcesRequired","true"),a.appendChild(s),s.appendChild(o),a},loadSerializedSVG$1=function(e){return new Promise((function(t,n){var r=new Image;r.onload=function(){return t(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(e))}))},FEATURES={get SUPPORT_RANGE_BOUNDS(){var e=testRangeBounds(document);return Object.defineProperty(FEATURES,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=FEATURES.SUPPORT_RANGE_BOUNDS&&testIOSLineBreak(document);return Object.defineProperty(FEATURES,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=testSVG(document);return Object.defineProperty(FEATURES,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e="function"==typeof Array.from&&"function"==typeof window.fetch?testForeignObject(document):Promise.resolve(!1);return Object.defineProperty(FEATURES,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=testCORS();return Object.defineProperty(FEATURES,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=testResponseType();return Object.defineProperty(FEATURES,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(FEATURES,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!("undefined"==typeof Intl||!Intl.Segmenter);return Object.defineProperty(FEATURES,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},TextBounds=function(){return function(e,t){this.text=e,this.bounds=t}}(),parseTextBounds=function(e,t,n,r){var o=breakText(t,n),i=[],a=0;return o.forEach((function(t){if(n.textDecorationLine.length||t.trim().length>0)if(FEATURES.SUPPORT_RANGE_BOUNDS){var o=createRange(r,a,t.length).getClientRects();if(o.length>1){var s=segmentGraphemes(t),c=0;s.forEach((function(t){i.push(new TextBounds(t,Bounds.fromDOMRectList(e,createRange(r,c+a,t.length).getClientRects()))),c+=t.length}))}else i.push(new TextBounds(t,Bounds.fromDOMRectList(e,o)))}else{var l=r.splitText(t.length);i.push(new TextBounds(t,getWrapperBounds(e,r))),r=l}else FEATURES.SUPPORT_RANGE_BOUNDS||(r=r.splitText(t.length));a+=t.length})),i},getWrapperBounds=function(e,t){var n=t.ownerDocument;if(n){var r=n.createElement("html2canvaswrapper");r.appendChild(t.cloneNode(!0));var o=t.parentNode;if(o){o.replaceChild(r,t);var i=parseBounds(e,r);return r.firstChild&&o.replaceChild(r.firstChild,r),i}}return Bounds.EMPTY},createRange=function(e,t,n){var r=e.ownerDocument;if(!r)throw new Error("Node has no owner document");var o=r.createRange();return o.setStart(e,t),o.setEnd(e,t+n),o},segmentGraphemes=function(e){if(FEATURES.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map((function(e){return e.segment}))}return splitGraphemes(e)},segmentWords=function(e,t){if(FEATURES.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(n.segment(e)).map((function(e){return e.segment}))}return breakWords(e,t)},breakText=function(e,t){return 0!==t.letterSpacing?segmentGraphemes(e):segmentWords(e,t)},wordSeparators=[32,160,4961,65792,65793,4153,4241],breakWords=function(e,t){for(var n,r=LineBreaker(e,{lineBreak:t.lineBreak,wordBreak:"break-word"===t.overflowWrap?"break-word":t.wordBreak}),o=[],i=function(){if(n.value){var e=n.value.slice(),t=toCodePoints$1(e),r="";t.forEach((function(e){-1===wordSeparators.indexOf(e)?r+=fromCodePoint$1(e):(r.length&&o.push(r),o.push(fromCodePoint$1(e)),r="")})),r.length&&o.push(r)}};!(n=r.next()).done;)i();return o},TextContainer=function(){return function(e,t,n){this.text=transform$2(t.data,n.textTransform),this.textBounds=parseTextBounds(e,this.text,n,t)}}(),transform$2=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(CAPITALIZE,capitalize$1);case 2:return e.toUpperCase();default:return e}},CAPITALIZE=/(^|\s|:|-|\(|\))([a-z])/g,capitalize$1=function(e,t,n){return e.length>0?t+n.toUpperCase():e},ImageElementContainer=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.src=n.currentSrc||n.src,r.intrinsicWidth=n.naturalWidth,r.intrinsicHeight=n.naturalHeight,r.context.cache.addImage(r.src),r}return __extends(t,e),t}(ElementContainer),CanvasElementContainer=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.canvas=n,r.intrinsicWidth=n.width,r.intrinsicHeight=n.height,r}return __extends(t,e),t}(ElementContainer),SVGElementContainer=function(e){function t(t,n){var r=e.call(this,t,n)||this,o=new XMLSerializer,i=parseBounds(t,n);return n.setAttribute("width",i.width+"px"),n.setAttribute("height",i.height+"px"),r.svg="data:image/svg+xml,"+encodeURIComponent(o.serializeToString(n)),r.intrinsicWidth=n.width.baseVal.value,r.intrinsicHeight=n.height.baseVal.value,r.context.cache.addImage(r.svg),r}return __extends(t,e),t}(ElementContainer),LIElementContainer=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.value=n.value,r}return __extends(t,e),t}(ElementContainer),OLElementContainer=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.start=n.start,r.reversed="boolean"==typeof n.reversed&&!0===n.reversed,r}return __extends(t,e),t}(ElementContainer),CHECKBOX_BORDER_RADIUS=[{type:15,flags:0,unit:"px",number:3}],RADIO_BORDER_RADIUS=[{type:16,flags:0,number:50}],reformatInputBounds=function(e){return e.width>e.height?new Bounds(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new Bounds(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},getInputValue=function(e){var t=e.type===PASSWORD?new Array(e.value.length+1).join(""):e.value;return 0===t.length?e.placeholder||"":t},CHECKBOX="checkbox",RADIO="radio",PASSWORD="password",INPUT_COLOR=707406591,InputElementContainer=function(e){function t(t,n){var r=e.call(this,t,n)||this;switch(r.type=n.type.toLowerCase(),r.checked=n.checked,r.value=getInputValue(n),r.type!==CHECKBOX&&r.type!==RADIO||(r.styles.backgroundColor=3739148031,r.styles.borderTopColor=r.styles.borderRightColor=r.styles.borderBottomColor=r.styles.borderLeftColor=2779096575,r.styles.borderTopWidth=r.styles.borderRightWidth=r.styles.borderBottomWidth=r.styles.borderLeftWidth=1,r.styles.borderTopStyle=r.styles.borderRightStyle=r.styles.borderBottomStyle=r.styles.borderLeftStyle=1,r.styles.backgroundClip=[0],r.styles.backgroundOrigin=[0],r.bounds=reformatInputBounds(r.bounds)),r.type){case CHECKBOX:r.styles.borderTopRightRadius=r.styles.borderTopLeftRadius=r.styles.borderBottomRightRadius=r.styles.borderBottomLeftRadius=CHECKBOX_BORDER_RADIUS;break;case RADIO:r.styles.borderTopRightRadius=r.styles.borderTopLeftRadius=r.styles.borderBottomRightRadius=r.styles.borderBottomLeftRadius=RADIO_BORDER_RADIUS}return r}return __extends(t,e),t}(ElementContainer),SelectElementContainer=function(e){function t(t,n){var r=e.call(this,t,n)||this,o=n.options[n.selectedIndex||0];return r.value=o&&o.text||"",r}return __extends(t,e),t}(ElementContainer),TextareaElementContainer=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.value=n.value,r}return __extends(t,e),t}(ElementContainer),IFrameElementContainer=function(e){function t(t,n){var r=e.call(this,t,n)||this;r.src=n.src,r.width=parseInt(n.width,10)||0,r.height=parseInt(n.height,10)||0,r.backgroundColor=r.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){r.tree=parseTree(t,n.contentWindow.document.documentElement);var o=n.contentWindow.document.documentElement?parseColor(t,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):COLORS.TRANSPARENT,i=n.contentWindow.document.body?parseColor(t,getComputedStyle(n.contentWindow.document.body).backgroundColor):COLORS.TRANSPARENT;r.backgroundColor=isTransparent(o)?isTransparent(i)?r.styles.backgroundColor:i:o}}catch(a){}return r}return __extends(t,e),t}(ElementContainer),LIST_OWNERS=["OL","UL","MENU"],parseNodeTree=function(e,t,n,r){for(var o=t.firstChild,i=void 0;o;o=i)if(i=o.nextSibling,isTextNode(o)&&o.data.trim().length>0)n.textNodes.push(new TextContainer(e,o,n.styles));else if(isElementNode(o))if(isSlotElement(o)&&o.assignedNodes)o.assignedNodes().forEach((function(t){return parseNodeTree(e,t,n,r)}));else{var a=createContainer(e,o);a.styles.isVisible()&&(createsRealStackingContext(o,a,r)?a.flags|=4:createsStackingContext(a.styles)&&(a.flags|=2),-1!==LIST_OWNERS.indexOf(o.tagName)&&(a.flags|=8),n.elements.push(a),o.slot,o.shadowRoot?parseNodeTree(e,o.shadowRoot,a,r):isTextareaElement(o)||isSVGElement(o)||isSelectElement(o)||parseNodeTree(e,o,a,r))}},createContainer=function(e,t){return isImageElement(t)?new ImageElementContainer(e,t):isCanvasElement(t)?new CanvasElementContainer(e,t):isSVGElement(t)?new SVGElementContainer(e,t):isLIElement(t)?new LIElementContainer(e,t):isOLElement(t)?new OLElementContainer(e,t):isInputElement(t)?new InputElementContainer(e,t):isSelectElement(t)?new SelectElementContainer(e,t):isTextareaElement(t)?new TextareaElementContainer(e,t):isIFrameElement(t)?new IFrameElementContainer(e,t):new ElementContainer(e,t)},parseTree=function(e,t){var n=createContainer(e,t);return n.flags|=4,parseNodeTree(e,t,n,n),n},createsRealStackingContext=function(e,t,n){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||isBodyElement(e)&&n.styles.isTransparent()},createsStackingContext=function(e){return e.isPositioned()||e.isFloating()},isTextNode=function(e){return e.nodeType===Node.TEXT_NODE},isElementNode=function(e){return e.nodeType===Node.ELEMENT_NODE},isHTMLElementNode=function(e){return isElementNode(e)&&void 0!==e.style&&!isSVGElementNode(e)},isSVGElementNode=function(e){return"object"==typeof e.className},isLIElement=function(e){return"LI"===e.tagName},isOLElement=function(e){return"OL"===e.tagName},isInputElement=function(e){return"INPUT"===e.tagName},isHTMLElement=function(e){return"HTML"===e.tagName},isSVGElement=function(e){return"svg"===e.tagName},isBodyElement=function(e){return"BODY"===e.tagName},isCanvasElement=function(e){return"CANVAS"===e.tagName},isVideoElement=function(e){return"VIDEO"===e.tagName},isImageElement=function(e){return"IMG"===e.tagName},isIFrameElement=function(e){return"IFRAME"===e.tagName},isStyleElement=function(e){return"STYLE"===e.tagName},isScriptElement=function(e){return"SCRIPT"===e.tagName},isTextareaElement=function(e){return"TEXTAREA"===e.tagName},isSelectElement=function(e){return"SELECT"===e.tagName},isSlotElement=function(e){return"SLOT"===e.tagName},isCustomElement=function(e){return e.tagName.indexOf("-")>0},CounterState=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(e){var t=this.counters[e];return t&&t.length?t[t.length-1]:1},e.prototype.getCounterValues=function(e){var t=this.counters[e];return t||[]},e.prototype.pop=function(e){var t=this;e.forEach((function(e){return t.counters[e].pop()}))},e.prototype.parse=function(e){var t=this,n=e.counterIncrement,r=e.counterReset,o=!0;null!==n&&n.forEach((function(e){var n=t.counters[e.counter];n&&0!==e.increment&&(o=!1,n.length||n.push(1),n[Math.max(0,n.length-1)]+=e.increment)}));var i=[];return o&&r.forEach((function(e){var n=t.counters[e.counter];i.push(e.counter),n||(n=t.counters[e.counter]=[]),n.push(e.reset)})),i},e}(),ROMAN_UPPER={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},ARMENIAN={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},HEBREW={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},GEORGIAN={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},createAdditiveCounter=function(e,t,n,r,o,i){return e<t||e>n?createCounterText(e,o,i.length>0):r.integers.reduce((function(t,n,o){for(;e>=n;)e-=n,t+=r.values[o];return t}),"")+i},createCounterStyleWithSymbolResolver=function(e,t,n,r){var o="";do{n||e--,o=r(e)+o,e/=t}while(e*t>=t);return o},createCounterStyleFromRange=function(e,t,n,r,o){var i=n-t+1;return(e<0?"-":"")+(createCounterStyleWithSymbolResolver(Math.abs(e),i,r,(function(e){return fromCodePoint$1(Math.floor(e%i)+t)}))+o)},createCounterStyleFromSymbols=function(e,t,n){void 0===n&&(n=". ");var r=t.length;return createCounterStyleWithSymbolResolver(Math.abs(e),r,!1,(function(e){return t[Math.floor(e%r)]}))+n},CJK_ZEROS=1,CJK_TEN_COEFFICIENTS=2,CJK_TEN_HIGH_COEFFICIENTS=4,CJK_HUNDRED_COEFFICIENTS=8,createCJKCounter=function(e,t,n,r,o,i){if(e<-9999||e>9999)return createCounterText(e,4,o.length>0);var a=Math.abs(e),s=o;if(0===a)return t[0]+s;for(var c=0;a>0&&c<=4;c++){var l=a%10;0===l&&contains(i,CJK_ZEROS)&&""!==s?s=t[l]+s:l>1||1===l&&0===c||1===l&&1===c&&contains(i,CJK_TEN_COEFFICIENTS)||1===l&&1===c&&contains(i,CJK_TEN_HIGH_COEFFICIENTS)&&e>100||1===l&&c>1&&contains(i,CJK_HUNDRED_COEFFICIENTS)?s=t[l]+(c>0?n[c-1]:"")+s:1===l&&c>0&&(s=n[c-1]+s),a=Math.floor(a/10)}return(e<0?r:"")+s},CHINESE_INFORMAL_MULTIPLIERS="",CHINESE_FORMAL_MULTIPLIERS="",JAPANESE_NEGATIVE="",KOREAN_NEGATIVE="",createCounterText=function(e,t,n){var r=n?". ":"",o=n?"":"",i=n?", ":"",a=n?" ":"";switch(t){case 0:return""+a;case 1:return""+a;case 2:return""+a;case 5:var s=createCounterStyleFromRange(e,48,57,!0,r);return s.length<4?"0"+s:s;case 4:return createCounterStyleFromSymbols(e,"",o);case 6:return createAdditiveCounter(e,1,3999,ROMAN_UPPER,3,r).toLowerCase();case 7:return createAdditiveCounter(e,1,3999,ROMAN_UPPER,3,r);case 8:return createCounterStyleFromRange(e,945,969,!1,r);case 9:return createCounterStyleFromRange(e,97,122,!1,r);case 10:return createCounterStyleFromRange(e,65,90,!1,r);case 11:return createCounterStyleFromRange(e,1632,1641,!0,r);case 12:case 49:return createAdditiveCounter(e,1,9999,ARMENIAN,3,r);case 35:return createAdditiveCounter(e,1,9999,ARMENIAN,3,r).toLowerCase();case 13:return createCounterStyleFromRange(e,2534,2543,!0,r);case 14:case 30:return createCounterStyleFromRange(e,6112,6121,!0,r);case 15:return createCounterStyleFromSymbols(e,"",o);case 16:return createCounterStyleFromSymbols(e,"",o);case 17:case 48:return createCJKCounter(e,"",CHINESE_INFORMAL_MULTIPLIERS,"",o,CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS|CJK_HUNDRED_COEFFICIENTS);case 47:return createCJKCounter(e,"",CHINESE_FORMAL_MULTIPLIERS,"",o,CJK_ZEROS|CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS|CJK_HUNDRED_COEFFICIENTS);case 42:return createCJKCounter(e,"",CHINESE_INFORMAL_MULTIPLIERS,"",o,CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS|CJK_HUNDRED_COEFFICIENTS);case 41:return createCJKCounter(e,"",CHINESE_FORMAL_MULTIPLIERS,"",o,CJK_ZEROS|CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS|CJK_HUNDRED_COEFFICIENTS);case 26:return createCJKCounter(e,"","",JAPANESE_NEGATIVE,o,0);case 25:return createCJKCounter(e,"","",JAPANESE_NEGATIVE,o,CJK_ZEROS|CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS);case 31:return createCJKCounter(e,"","",KOREAN_NEGATIVE,i,CJK_ZEROS|CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS);case 33:return createCJKCounter(e,"","",KOREAN_NEGATIVE,i,0);case 32:return createCJKCounter(e,"","",KOREAN_NEGATIVE,i,CJK_ZEROS|CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS);case 18:return createCounterStyleFromRange(e,2406,2415,!0,r);case 20:return createAdditiveCounter(e,1,19999,GEORGIAN,3,r);case 21:return createCounterStyleFromRange(e,2790,2799,!0,r);case 22:return createCounterStyleFromRange(e,2662,2671,!0,r);case 22:return createAdditiveCounter(e,1,10999,HEBREW,3,r);case 23:return createCounterStyleFromSymbols(e,"");case 24:return createCounterStyleFromSymbols(e,"");case 27:return createCounterStyleFromRange(e,3302,3311,!0,r);case 28:return createCounterStyleFromSymbols(e,"",o);case 29:return createCounterStyleFromSymbols(e,"",o);case 34:return createCounterStyleFromRange(e,3792,3801,!0,r);case 37:return createCounterStyleFromRange(e,6160,6169,!0,r);case 38:return createCounterStyleFromRange(e,4160,4169,!0,r);case 39:return createCounterStyleFromRange(e,2918,2927,!0,r);case 40:return createCounterStyleFromRange(e,1776,1785,!0,r);case 43:return createCounterStyleFromRange(e,3046,3055,!0,r);case 44:return createCounterStyleFromRange(e,3174,3183,!0,r);case 45:return createCounterStyleFromRange(e,3664,3673,!0,r);case 46:return createCounterStyleFromRange(e,3872,3881,!0,r);default:return createCounterStyleFromRange(e,48,57,!0,r)}},IGNORE_ATTRIBUTE="data-html2canvas-ignore",DocumentCloner=function(){function e(e,t,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=t,this.counters=new CounterState,this.quoteDepth=0,!t.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(t.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(e,t){var n=this,r=createIFrameContainer(e,t);if(!r.contentWindow)return Promise.reject("Unable to find iframe window");var o=e.defaultView.pageXOffset,i=e.defaultView.pageYOffset,a=r.contentWindow,s=a.document,c=iframeLoader(r).then((function(){return __awaiter(n,void 0,void 0,(function(){var e,n;return __generator(this,(function(o){switch(o.label){case 0:return this.scrolledElements.forEach(restoreNodeScroll),a&&(a.scrollTo(t.left,t.top),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||a.scrollY===t.top&&a.scrollX===t.left||(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(a.scrollX-t.left,a.scrollY-t.top,0,0))),e=this.options.onclone,void 0===(n=this.clonedReferenceElement)?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:s.fonts&&s.fonts.ready?[4,s.fonts.ready]:[3,2];case 1:o.sent(),o.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,imagesReady(s)]:[3,4];case 3:o.sent(),o.label=4;case 4:return"function"==typeof e?[2,Promise.resolve().then((function(){return e(s,n)})).then((function(){return r}))]:[2,r]}}))}))}));return s.open(),s.write(serializeDoctype(document.doctype)+"<html></html>"),restoreOwnerScroll(this.referenceElement.ownerDocument,o,i),s.replaceChild(s.adoptNode(this.documentElement),s.documentElement),s.close(),c},e.prototype.createElementClone=function(e){if(isDebugging(e,2),isCanvasElement(e))return this.createCanvasClone(e);if(isVideoElement(e))return this.createVideoClone(e);if(isStyleElement(e))return this.createStyleClone(e);var t=e.cloneNode(!1);return isImageElement(t)&&(isImageElement(e)&&e.currentSrc&&e.currentSrc!==e.src&&(t.src=e.currentSrc,t.srcset=""),"lazy"===t.loading&&(t.loading="eager")),isCustomElement(t)?this.createCustomElementClone(t):t},e.prototype.createCustomElementClone=function(e){var t=document.createElement("html2canvascustomelement");return copyCSSStyles(e.style,t),t},e.prototype.createStyleClone=function(e){try{var t=e.sheet;if(t&&t.cssRules){var n=[].slice.call(t.cssRules,0).reduce((function(e,t){return t&&"string"==typeof t.cssText?e+t.cssText:e}),""),r=e.cloneNode(!1);return r.textContent=n,r}}catch(o){if(this.context.logger.error("Unable to access cssRules property",o),"SecurityError"!==o.name)throw o}return e.cloneNode(!1)},e.prototype.createCanvasClone=function(e){var t;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch(c){this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var r=e.cloneNode(!1);try{r.width=e.width,r.height=e.height;var o=e.getContext("2d"),i=r.getContext("2d");if(i)if(!this.options.allowTaint&&o)i.putImageData(o.getImageData(0,0,e.width,e.height),0,0);else{var a=null!==(t=e.getContext("webgl2"))&&void 0!==t?t:e.getContext("webgl");if(a){var s=a.getContextAttributes();!1===(null==s?void 0:s.preserveDrawingBuffer)&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}i.drawImage(e,0,0)}return r}catch(c){this.context.logger.info("Unable to clone canvas as it is tainted",e)}return r},e.prototype.createVideoClone=function(e){var t=e.ownerDocument.createElement("canvas");t.width=e.offsetWidth,t.height=e.offsetHeight;var n=t.getContext("2d");try{return n&&(n.drawImage(e,0,0,t.width,t.height),this.options.allowTaint||n.getImageData(0,0,t.width,t.height)),t}catch(o){this.context.logger.info("Unable to clone video as it is tainted",e)}var r=e.ownerDocument.createElement("canvas");return r.width=e.offsetWidth,r.height=e.offsetHeight,r},e.prototype.appendChildNode=function(e,t,n){isElementNode(t)&&(isScriptElement(t)||t.hasAttribute(IGNORE_ATTRIBUTE)||"function"==typeof this.options.ignoreElements&&this.options.ignoreElements(t))||this.options.copyStyles&&isElementNode(t)&&isStyleElement(t)||e.appendChild(this.cloneNode(t,n))},e.prototype.cloneChildNodes=function(e,t,n){for(var r=this,o=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;o;o=o.nextSibling)if(isElementNode(o)&&isSlotElement(o)&&"function"==typeof o.assignedNodes){var i=o.assignedNodes();i.length&&i.forEach((function(e){return r.appendChildNode(t,e,n)}))}else this.appendChildNode(t,o,n)},e.prototype.cloneNode=function(e,t){if(isTextNode(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&isElementNode(e)&&(isHTMLElementNode(e)||isSVGElementNode(e))){var r=this.createElementClone(e);r.style.transitionProperty="none";var o=n.getComputedStyle(e),i=n.getComputedStyle(e,":before"),a=n.getComputedStyle(e,":after");this.referenceElement===e&&isHTMLElementNode(r)&&(this.clonedReferenceElement=r),isBodyElement(r)&&createPseudoHideStyles(r);var s=this.counters.parse(new CSSParsedCounterDeclaration(this.context,o)),c=this.resolvePseudoContent(e,r,i,PseudoElementType.BEFORE);isCustomElement(e)&&(t=!0),isVideoElement(e)||this.cloneChildNodes(e,r,t),c&&r.insertBefore(c,r.firstChild);var l=this.resolvePseudoContent(e,r,a,PseudoElementType.AFTER);return l&&r.appendChild(l),this.counters.pop(s),(o&&(this.options.copyStyles||isSVGElementNode(e))&&!isIFrameElement(e)||t)&&copyCSSStyles(o,r),0===e.scrollTop&&0===e.scrollLeft||this.scrolledElements.push([r,e.scrollLeft,e.scrollTop]),(isTextareaElement(e)||isSelectElement(e))&&(isTextareaElement(r)||isSelectElement(r))&&(r.value=e.value),r}return e.cloneNode(!1)},e.prototype.resolvePseudoContent=function(e,t,n,r){var o=this;if(n){var i=n.content,a=t.ownerDocument;if(a&&i&&"none"!==i&&"-moz-alt-content"!==i&&"none"!==n.display){this.counters.parse(new CSSParsedCounterDeclaration(this.context,n));var s=new CSSParsedPseudoDeclaration(this.context,n),c=a.createElement("html2canvaspseudoelement");copyCSSStyles(n,c),s.content.forEach((function(t){if(0===t.type)c.appendChild(a.createTextNode(t.value));else if(22===t.type){var n=a.createElement("img");n.src=t.value,n.style.opacity="1",c.appendChild(n)}else if(18===t.type){if("attr"===t.name){var r=t.values.filter(isIdentToken);r.length&&c.appendChild(a.createTextNode(e.getAttribute(r[0].value)||""))}else if("counter"===t.name){var i=t.values.filter(nonFunctionArgSeparator),l=i[0],u=i[1];if(l&&isIdentToken(l)){var d=o.counters.getCounterValue(l.value),A=u&&isIdentToken(u)?listStyleType.parse(o.context,u.value):3;c.appendChild(a.createTextNode(createCounterText(d,A,!1)))}}else if("counters"===t.name){var p=t.values.filter(nonFunctionArgSeparator),h=(l=p[0],p[1]);u=p[2];if(l&&isIdentToken(l)){var f=o.counters.getCounterValues(l.value),g=u&&isIdentToken(u)?listStyleType.parse(o.context,u.value):3,m=h&&0===h.type?h.value:"",_=f.map((function(e){return createCounterText(e,g,!1)})).join(m);c.appendChild(a.createTextNode(_))}}}else if(20===t.type)switch(t.value){case"open-quote":c.appendChild(a.createTextNode(getQuote(s.quotes,o.quoteDepth++,!0)));break;case"close-quote":c.appendChild(a.createTextNode(getQuote(s.quotes,--o.quoteDepth,!1)));break;default:c.appendChild(a.createTextNode(t.value))}})),c.className=PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+" "+PSEUDO_HIDE_ELEMENT_CLASS_AFTER;var l=r===PseudoElementType.BEFORE?" "+PSEUDO_HIDE_ELEMENT_CLASS_BEFORE:" "+PSEUDO_HIDE_ELEMENT_CLASS_AFTER;return isSVGElementNode(t)?t.className.baseValue+=l:t.className+=l,c}}},e.destroy=function(e){return!!e.parentNode&&(e.parentNode.removeChild(e),!0)},e}(),PseudoElementType,PseudoElementType2;PseudoElementType2=PseudoElementType||(PseudoElementType={}),PseudoElementType2[PseudoElementType2.BEFORE=0]="BEFORE",PseudoElementType2[PseudoElementType2.AFTER=1]="AFTER";var createIFrameContainer=function(e,t){var n=e.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=t.width.toString(),n.height=t.height.toString(),n.scrolling="no",n.setAttribute(IGNORE_ATTRIBUTE,"true"),e.body.appendChild(n),n},imageReady=function(e){return new Promise((function(t){e.complete?t():e.src?(e.onload=t,e.onerror=t):t()}))},imagesReady=function(e){return Promise.all([].slice.call(e.images,0).map(imageReady))},iframeLoader=function(e){return new Promise((function(t,n){var r=e.contentWindow;if(!r)return n("No window assigned for iframe");var o=r.document;r.onload=e.onload=function(){r.onload=e.onload=null;var n=setInterval((function(){o.body.childNodes.length>0&&"complete"===o.readyState&&(clearInterval(n),t(e))}),50)}}))},ignoredStyleProperties=["all","d","content"],copyCSSStyles=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e.item(n);-1===ignoredStyleProperties.indexOf(r)&&t.style.setProperty(r,e.getPropertyValue(r))}return t},serializeDoctype=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},restoreOwnerScroll=function(e,t,n){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||n!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,n)},restoreNodeScroll=function(e){var t=e[0],n=e[1],r=e[2];t.scrollLeft=n,t.scrollTop=r},PSEUDO_BEFORE=":before",PSEUDO_AFTER=":after",PSEUDO_HIDE_ELEMENT_CLASS_BEFORE="___html2canvas___pseudoelement_before",PSEUDO_HIDE_ELEMENT_CLASS_AFTER="___html2canvas___pseudoelement_after",PSEUDO_HIDE_ELEMENT_STYLE='{\n    content: "" !important;\n    display: none !important;\n}',createPseudoHideStyles=function(e){createStyles(e,"."+PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+PSEUDO_BEFORE+PSEUDO_HIDE_ELEMENT_STYLE+"\n         ."+PSEUDO_HIDE_ELEMENT_CLASS_AFTER+PSEUDO_AFTER+PSEUDO_HIDE_ELEMENT_STYLE)},createStyles=function(e,t){var n=e.ownerDocument;if(n){var r=n.createElement("style");r.textContent=t,e.appendChild(r)}},CacheStorage=function(){function e(){}return e.getOrigin=function(t){var n=e._link;return n?(n.href=t,n.href=n.href,n.protocol+n.hostname+n.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),Cache=function(){function e(e,t){this.context=e,this._options=t,this._cache={}}return e.prototype.addImage=function(e){var t=Promise.resolve();return this.has(e)?t:isBlobImage(e)||isRenderable(e)?((this._cache[e]=this.loadImage(e)).catch((function(){})),t):t},e.prototype.match=function(e){return this._cache[e]},e.prototype.loadImage=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n,r,o,i=this;return __generator(this,(function(a){switch(a.label){case 0:return t=CacheStorage.isSameOrigin(e),n=!isInlineImage(e)&&!0===this._options.useCORS&&FEATURES.SUPPORT_CORS_IMAGES&&!t,r=!isInlineImage(e)&&!t&&!isBlobImage(e)&&"string"==typeof this._options.proxy&&FEATURES.SUPPORT_CORS_XHR&&!n,t||!1!==this._options.allowTaint||isInlineImage(e)||isBlobImage(e)||r||n?(o=e,r?[4,this.proxy(o)]:[3,2]):[2];case 1:o=a.sent(),a.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise((function(e,t){var r=new Image;r.onload=function(){return e(r)},r.onerror=t,(isInlineBase64Image(o)||n)&&(r.crossOrigin="anonymous"),r.src=o,!0===r.complete&&setTimeout((function(){return e(r)}),500),i._options.imageTimeout>0&&setTimeout((function(){return t("Timed out ("+i._options.imageTimeout+"ms) loading image")}),i._options.imageTimeout)}))];case 3:return[2,a.sent()]}}))}))},e.prototype.has=function(e){return void 0!==this._cache[e]},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(e){var t=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var r=e.substring(0,256);return new Promise((function(o,i){var a=FEATURES.SUPPORT_RESPONSE_TYPE?"blob":"text",s=new XMLHttpRequest;s.onload=function(){if(200===s.status)if("text"===a)o(s.response);else{var e=new FileReader;e.addEventListener("load",(function(){return o(e.result)}),!1),e.addEventListener("error",(function(e){return i(e)}),!1),e.readAsDataURL(s.response)}else i("Failed to proxy resource "+r+" with status code "+s.status)},s.onerror=i;var c=n.indexOf("?")>-1?"&":"?";if(s.open("GET",""+n+c+"url="+encodeURIComponent(e)+"&responseType="+a),"text"!==a&&s instanceof XMLHttpRequest&&(s.responseType=a),t._options.imageTimeout){var l=t._options.imageTimeout;s.timeout=l,s.ontimeout=function(){return i("Timed out ("+l+"ms) proxying "+r)}}s.send()}))},e}(),INLINE_SVG=/^data:image\/svg\+xml/i,INLINE_BASE64=/^data:image\/.*;base64,/i,INLINE_IMG=/^data:image\/.*/i,isRenderable=function(e){return FEATURES.SUPPORT_SVG_DRAWING||!isSVG(e)},isInlineImage=function(e){return INLINE_IMG.test(e)},isInlineBase64Image=function(e){return INLINE_BASE64.test(e)},isBlobImage=function(e){return"blob"===e.substr(0,4)},isSVG=function(e){return"svg"===e.substr(-3).toLowerCase()||INLINE_SVG.test(e)},Vector=function(){function e(e,t){this.type=0,this.x=e,this.y=t}return e.prototype.add=function(t,n){return new e(this.x+t,this.y+n)},e}(),lerp=function(e,t,n){return new Vector(e.x+(t.x-e.x)*n,e.y+(t.y-e.y)*n)},BezierCurve=function(){function e(e,t,n,r){this.type=1,this.start=e,this.startControl=t,this.endControl=n,this.end=r}return e.prototype.subdivide=function(t,n){var r=lerp(this.start,this.startControl,t),o=lerp(this.startControl,this.endControl,t),i=lerp(this.endControl,this.end,t),a=lerp(r,o,t),s=lerp(o,i,t),c=lerp(a,s,t);return n?new e(this.start,r,a,c):new e(c,s,i,this.end)},e.prototype.add=function(t,n){return new e(this.start.add(t,n),this.startControl.add(t,n),this.endControl.add(t,n),this.end.add(t,n))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),isBezierCurve=function(e){return 1===e.type},BoundCurves=function(){return function(e){var t=e.styles,n=e.bounds,r=getAbsoluteValueForTuple(t.borderTopLeftRadius,n.width,n.height),o=r[0],i=r[1],a=getAbsoluteValueForTuple(t.borderTopRightRadius,n.width,n.height),s=a[0],c=a[1],l=getAbsoluteValueForTuple(t.borderBottomRightRadius,n.width,n.height),u=l[0],d=l[1],A=getAbsoluteValueForTuple(t.borderBottomLeftRadius,n.width,n.height),p=A[0],h=A[1],f=[];f.push((o+s)/n.width),f.push((p+u)/n.width),f.push((i+h)/n.height),f.push((c+d)/n.height);var g=Math.max.apply(Math,f);g>1&&(o/=g,i/=g,s/=g,c/=g,u/=g,d/=g,p/=g,h/=g);var m=n.width-s,_=n.height-d,E=n.width-u,v=n.height-h,y=t.borderTopWidth,b=t.borderRightWidth,C=t.borderBottomWidth,S=t.borderLeftWidth,w=getAbsoluteValue(t.paddingTop,e.bounds.width),T=getAbsoluteValue(t.paddingRight,e.bounds.width),I=getAbsoluteValue(t.paddingBottom,e.bounds.width),R=getAbsoluteValue(t.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=o>0||i>0?getCurvePoints(n.left+S/3,n.top+y/3,o-S/3,i-y/3,CORNER.TOP_LEFT):new Vector(n.left+S/3,n.top+y/3),this.topRightBorderDoubleOuterBox=o>0||i>0?getCurvePoints(n.left+m,n.top+y/3,s-b/3,c-y/3,CORNER.TOP_RIGHT):new Vector(n.left+n.width-b/3,n.top+y/3),this.bottomRightBorderDoubleOuterBox=u>0||d>0?getCurvePoints(n.left+E,n.top+_,u-b/3,d-C/3,CORNER.BOTTOM_RIGHT):new Vector(n.left+n.width-b/3,n.top+n.height-C/3),this.bottomLeftBorderDoubleOuterBox=p>0||h>0?getCurvePoints(n.left+S/3,n.top+v,p-S/3,h-C/3,CORNER.BOTTOM_LEFT):new Vector(n.left+S/3,n.top+n.height-C/3),this.topLeftBorderDoubleInnerBox=o>0||i>0?getCurvePoints(n.left+2*S/3,n.top+2*y/3,o-2*S/3,i-2*y/3,CORNER.TOP_LEFT):new Vector(n.left+2*S/3,n.top+2*y/3),this.topRightBorderDoubleInnerBox=o>0||i>0?getCurvePoints(n.left+m,n.top+2*y/3,s-2*b/3,c-2*y/3,CORNER.TOP_RIGHT):new Vector(n.left+n.width-2*b/3,n.top+2*y/3),this.bottomRightBorderDoubleInnerBox=u>0||d>0?getCurvePoints(n.left+E,n.top+_,u-2*b/3,d-2*C/3,CORNER.BOTTOM_RIGHT):new Vector(n.left+n.width-2*b/3,n.top+n.height-2*C/3),this.bottomLeftBorderDoubleInnerBox=p>0||h>0?getCurvePoints(n.left+2*S/3,n.top+v,p-2*S/3,h-2*C/3,CORNER.BOTTOM_LEFT):new Vector(n.left+2*S/3,n.top+n.height-2*C/3),this.topLeftBorderStroke=o>0||i>0?getCurvePoints(n.left+S/2,n.top+y/2,o-S/2,i-y/2,CORNER.TOP_LEFT):new Vector(n.left+S/2,n.top+y/2),this.topRightBorderStroke=o>0||i>0?getCurvePoints(n.left+m,n.top+y/2,s-b/2,c-y/2,CORNER.TOP_RIGHT):new Vector(n.left+n.width-b/2,n.top+y/2),this.bottomRightBorderStroke=u>0||d>0?getCurvePoints(n.left+E,n.top+_,u-b/2,d-C/2,CORNER.BOTTOM_RIGHT):new Vector(n.left+n.width-b/2,n.top+n.height-C/2),this.bottomLeftBorderStroke=p>0||h>0?getCurvePoints(n.left+S/2,n.top+v,p-S/2,h-C/2,CORNER.BOTTOM_LEFT):new Vector(n.left+S/2,n.top+n.height-C/2),this.topLeftBorderBox=o>0||i>0?getCurvePoints(n.left,n.top,o,i,CORNER.TOP_LEFT):new Vector(n.left,n.top),this.topRightBorderBox=s>0||c>0?getCurvePoints(n.left+m,n.top,s,c,CORNER.TOP_RIGHT):new Vector(n.left+n.width,n.top),this.bottomRightBorderBox=u>0||d>0?getCurvePoints(n.left+E,n.top+_,u,d,CORNER.BOTTOM_RIGHT):new Vector(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=p>0||h>0?getCurvePoints(n.left,n.top+v,p,h,CORNER.BOTTOM_LEFT):new Vector(n.left,n.top+n.height),this.topLeftPaddingBox=o>0||i>0?getCurvePoints(n.left+S,n.top+y,Math.max(0,o-S),Math.max(0,i-y),CORNER.TOP_LEFT):new Vector(n.left+S,n.top+y),this.topRightPaddingBox=s>0||c>0?getCurvePoints(n.left+Math.min(m,n.width-b),n.top+y,m>n.width+b?0:Math.max(0,s-b),Math.max(0,c-y),CORNER.TOP_RIGHT):new Vector(n.left+n.width-b,n.top+y),this.bottomRightPaddingBox=u>0||d>0?getCurvePoints(n.left+Math.min(E,n.width-S),n.top+Math.min(_,n.height-C),Math.max(0,u-b),Math.max(0,d-C),CORNER.BOTTOM_RIGHT):new Vector(n.left+n.width-b,n.top+n.height-C),this.bottomLeftPaddingBox=p>0||h>0?getCurvePoints(n.left+S,n.top+Math.min(v,n.height-C),Math.max(0,p-S),Math.max(0,h-C),CORNER.BOTTOM_LEFT):new Vector(n.left+S,n.top+n.height-C),this.topLeftContentBox=o>0||i>0?getCurvePoints(n.left+S+R,n.top+y+w,Math.max(0,o-(S+R)),Math.max(0,i-(y+w)),CORNER.TOP_LEFT):new Vector(n.left+S+R,n.top+y+w),this.topRightContentBox=s>0||c>0?getCurvePoints(n.left+Math.min(m,n.width+S+R),n.top+y+w,m>n.width+S+R?0:s-S+R,c-(y+w),CORNER.TOP_RIGHT):new Vector(n.left+n.width-(b+T),n.top+y+w),this.bottomRightContentBox=u>0||d>0?getCurvePoints(n.left+Math.min(E,n.width-(S+R)),n.top+Math.min(_,n.height+y+w),Math.max(0,u-(b+T)),d-(C+I),CORNER.BOTTOM_RIGHT):new Vector(n.left+n.width-(b+T),n.top+n.height-(C+I)),this.bottomLeftContentBox=p>0||h>0?getCurvePoints(n.left+S+R,n.top+v,Math.max(0,p-(S+R)),h-(C+I),CORNER.BOTTOM_LEFT):new Vector(n.left+S+R,n.top+n.height-(C+I))}}(),CORNER,CORNER2;CORNER2=CORNER||(CORNER={}),CORNER2[CORNER2.TOP_LEFT=0]="TOP_LEFT",CORNER2[CORNER2.TOP_RIGHT=1]="TOP_RIGHT",CORNER2[CORNER2.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",CORNER2[CORNER2.BOTTOM_LEFT=3]="BOTTOM_LEFT";var getCurvePoints=function(e,t,n,r,o){var i=(Math.sqrt(2)-1)/3*4,a=n*i,s=r*i,c=e+n,l=t+r;switch(o){case CORNER.TOP_LEFT:return new BezierCurve(new Vector(e,l),new Vector(e,l-s),new Vector(c-a,t),new Vector(c,t));case CORNER.TOP_RIGHT:return new BezierCurve(new Vector(e,t),new Vector(e+a,t),new Vector(c,l-s),new Vector(c,l));case CORNER.BOTTOM_RIGHT:return new BezierCurve(new Vector(c,t),new Vector(c,t+s),new Vector(e+a,l),new Vector(e,l));case CORNER.BOTTOM_LEFT:default:return new BezierCurve(new Vector(c,l),new Vector(c-a,l),new Vector(e,t+s),new Vector(e,t))}},calculateBorderBoxPath=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},calculateContentBoxPath=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},calculatePaddingBoxPath=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},TransformEffect=function(){return function(e,t,n){this.offsetX=e,this.offsetY=t,this.matrix=n,this.type=0,this.target=6}}(),ClipEffect=function(){return function(e,t){this.path=e,this.target=t,this.type=1}}(),OpacityEffect=function(){return function(e){this.opacity=e,this.type=2,this.target=6}}(),isTransformEffect=function(e){return 0===e.type},isClipEffect=function(e){return 1===e.type},isOpacityEffect=function(e){return 2===e.type},equalPath=function(e,t){return e.length===t.length&&e.some((function(e,n){return e===t[n]}))},transformPath=function(e,t,n,r,o){return e.map((function(e,i){switch(i){case 0:return e.add(t,n);case 1:return e.add(t+r,n);case 2:return e.add(t+r,n+o);case 3:return e.add(t,n+o)}return e}))},StackingContext=function(){return function(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}}(),ElementPaint=function(){function e(e,t){if(this.container=e,this.parent=t,this.effects=[],this.curves=new BoundCurves(this.container),this.container.styles.opacity<1&&this.effects.push(new OpacityEffect(this.container.styles.opacity)),null!==this.container.styles.transform){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,r=this.container.bounds.top+this.container.styles.transformOrigin[1].number,o=this.container.styles.transform;this.effects.push(new TransformEffect(n,r,o))}if(0!==this.container.styles.overflowX){var i=calculateBorderBoxPath(this.curves),a=calculatePaddingBoxPath(this.curves);equalPath(i,a)?this.effects.push(new ClipEffect(i,6)):(this.effects.push(new ClipEffect(i,2)),this.effects.push(new ClipEffect(a,4)))}}return e.prototype.getEffects=function(e){for(var t=-1===[2,3].indexOf(this.container.styles.position),n=this.parent,r=this.effects.slice(0);n;){var o=n.effects.filter((function(e){return!isClipEffect(e)}));if(t||0!==n.container.styles.position||!n.parent){if(r.unshift.apply(r,o),t=-1===[2,3].indexOf(n.container.styles.position),0!==n.container.styles.overflowX){var i=calculateBorderBoxPath(n.curves),a=calculatePaddingBoxPath(n.curves);equalPath(i,a)||r.unshift(new ClipEffect(a,6))}}else r.unshift.apply(r,o);n=n.parent}return r.filter((function(t){return contains(t.target,e)}))},e}(),parseStackTree=function(e,t,n,r){e.container.elements.forEach((function(o){var i=contains(o.flags,4),a=contains(o.flags,2),s=new ElementPaint(o,e);contains(o.styles.display,2048)&&r.push(s);var c=contains(o.flags,8)?[]:r;if(i||a){var l=i||o.styles.isPositioned()?n:t,u=new StackingContext(s);if(o.styles.isPositioned()||o.styles.opacity<1||o.styles.isTransformed()){var d=o.styles.zIndex.order;if(d<0){var A=0;l.negativeZIndex.some((function(e,t){return d>e.element.container.styles.zIndex.order?(A=t,!1):A>0})),l.negativeZIndex.splice(A,0,u)}else if(d>0){var p=0;l.positiveZIndex.some((function(e,t){return d>=e.element.container.styles.zIndex.order?(p=t+1,!1):p>0})),l.positiveZIndex.splice(p,0,u)}else l.zeroOrAutoZIndexOrTransformedOrOpacity.push(u)}else o.styles.isFloating()?l.nonPositionedFloats.push(u):l.nonPositionedInlineLevel.push(u);parseStackTree(s,u,i?u:n,c)}else o.styles.isInlineLevel()?t.inlineLevel.push(s):t.nonInlineLevel.push(s),parseStackTree(s,t,n,c);contains(o.flags,8)&&processListItems(o,c)}))},processListItems=function(e,t){for(var n=e instanceof OLElementContainer?e.start:1,r=e instanceof OLElementContainer&&e.reversed,o=0;o<t.length;o++){var i=t[o];i.container instanceof LIElementContainer&&"number"==typeof i.container.value&&0!==i.container.value&&(n=i.container.value),i.listValue=createCounterText(n,i.container.styles.listStyleType,!0),n+=r?-1:1}},parseStackingContexts=function(e){var t=new ElementPaint(e,null),n=new StackingContext(t),r=[];return parseStackTree(t,n,n,r),processListItems(t.container,r),n},parsePathForBorder=function(e,t){switch(t){case 0:return createPathFromCurves(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return createPathFromCurves(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return createPathFromCurves(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);default:return createPathFromCurves(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},parsePathForBorderDoubleOuter=function(e,t){switch(t){case 0:return createPathFromCurves(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return createPathFromCurves(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return createPathFromCurves(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);default:return createPathFromCurves(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},parsePathForBorderDoubleInner=function(e,t){switch(t){case 0:return createPathFromCurves(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return createPathFromCurves(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return createPathFromCurves(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);default:return createPathFromCurves(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},parsePathForBorderStroke=function(e,t){switch(t){case 0:return createStrokePathFromCurves(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return createStrokePathFromCurves(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return createStrokePathFromCurves(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);default:return createStrokePathFromCurves(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},createStrokePathFromCurves=function(e,t){var n=[];return isBezierCurve(e)?n.push(e.subdivide(.5,!1)):n.push(e),isBezierCurve(t)?n.push(t.subdivide(.5,!0)):n.push(t),n},createPathFromCurves=function(e,t,n,r){var o=[];return isBezierCurve(e)?o.push(e.subdivide(.5,!1)):o.push(e),isBezierCurve(n)?o.push(n.subdivide(.5,!0)):o.push(n),isBezierCurve(r)?o.push(r.subdivide(.5,!0).reverse()):o.push(r),isBezierCurve(t)?o.push(t.subdivide(.5,!1).reverse()):o.push(t),o},paddingBox=function(e){var t=e.bounds,n=e.styles;return t.add(n.borderLeftWidth,n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth),-(n.borderTopWidth+n.borderBottomWidth))},contentBox=function(e){var t=e.styles,n=e.bounds,r=getAbsoluteValue(t.paddingLeft,n.width),o=getAbsoluteValue(t.paddingRight,n.width),i=getAbsoluteValue(t.paddingTop,n.width),a=getAbsoluteValue(t.paddingBottom,n.width);return n.add(r+t.borderLeftWidth,i+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+r+o),-(t.borderTopWidth+t.borderBottomWidth+i+a))},calculateBackgroundPositioningArea=function(e,t){return 0===e?t.bounds:2===e?contentBox(t):paddingBox(t)},calculateBackgroundPaintingArea=function(e,t){return 0===e?t.bounds:2===e?contentBox(t):paddingBox(t)},calculateBackgroundRendering=function(e,t,n){var r=calculateBackgroundPositioningArea(getBackgroundValueForIndex(e.styles.backgroundOrigin,t),e),o=calculateBackgroundPaintingArea(getBackgroundValueForIndex(e.styles.backgroundClip,t),e),i=calculateBackgroundSize(getBackgroundValueForIndex(e.styles.backgroundSize,t),n,r),a=i[0],s=i[1],c=getAbsoluteValueForTuple(getBackgroundValueForIndex(e.styles.backgroundPosition,t),r.width-a,r.height-s);return[calculateBackgroundRepeatPath(getBackgroundValueForIndex(e.styles.backgroundRepeat,t),c,i,r,o),Math.round(r.left+c[0]),Math.round(r.top+c[1]),a,s]},isAuto=function(e){return isIdentToken(e)&&e.value===BACKGROUND_SIZE.AUTO},hasIntrinsicValue=function(e){return"number"==typeof e},calculateBackgroundSize=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=e[0],s=e[1];if(!a)return[0,0];if(isLengthPercentage(a)&&s&&isLengthPercentage(s))return[getAbsoluteValue(a,n.width),getAbsoluteValue(s,n.height)];var c=hasIntrinsicValue(i);if(isIdentToken(a)&&(a.value===BACKGROUND_SIZE.CONTAIN||a.value===BACKGROUND_SIZE.COVER))return hasIntrinsicValue(i)?n.width/n.height<i!=(a.value===BACKGROUND_SIZE.COVER)?[n.width,n.width/i]:[n.height*i,n.height]:[n.width,n.height];var l=hasIntrinsicValue(r),u=hasIntrinsicValue(o),d=l||u;if(isAuto(a)&&(!s||isAuto(s)))return l&&u?[r,o]:c||d?d&&c?[l?r:o*i,u?o:r/i]:[l?r:n.width,u?o:n.height]:[n.width,n.height];if(c){var A=0,p=0;return isLengthPercentage(a)?A=getAbsoluteValue(a,n.width):isLengthPercentage(s)&&(p=getAbsoluteValue(s,n.height)),isAuto(a)?A=p*i:s&&!isAuto(s)||(p=A/i),[A,p]}var h=null,f=null;if(isLengthPercentage(a)?h=getAbsoluteValue(a,n.width):s&&isLengthPercentage(s)&&(f=getAbsoluteValue(s,n.height)),null===h||s&&!isAuto(s)||(f=l&&u?h/r*o:n.height),null!==f&&isAuto(a)&&(h=l&&u?f/o*r:n.width),null!==h&&null!==f)return[h,f];throw new Error("Unable to calculate background-size for element")},getBackgroundValueForIndex=function(e,t){var n=e[t];return void 0===n?e[0]:n},calculateBackgroundRepeatPath=function(e,t,n,r,o){var i=t[0],a=t[1],s=n[0],c=n[1];switch(e){case 2:return[new Vector(Math.round(r.left),Math.round(r.top+a)),new Vector(Math.round(r.left+r.width),Math.round(r.top+a)),new Vector(Math.round(r.left+r.width),Math.round(c+r.top+a)),new Vector(Math.round(r.left),Math.round(c+r.top+a))];case 3:return[new Vector(Math.round(r.left+i),Math.round(r.top)),new Vector(Math.round(r.left+i+s),Math.round(r.top)),new Vector(Math.round(r.left+i+s),Math.round(r.height+r.top)),new Vector(Math.round(r.left+i),Math.round(r.height+r.top))];case 1:return[new Vector(Math.round(r.left+i),Math.round(r.top+a)),new Vector(Math.round(r.left+i+s),Math.round(r.top+a)),new Vector(Math.round(r.left+i+s),Math.round(r.top+a+c)),new Vector(Math.round(r.left+i),Math.round(r.top+a+c))];default:return[new Vector(Math.round(o.left),Math.round(o.top)),new Vector(Math.round(o.left+o.width),Math.round(o.top)),new Vector(Math.round(o.left+o.width),Math.round(o.height+o.top)),new Vector(Math.round(o.left),Math.round(o.height+o.top))]}},SMALL_IMAGE="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",SAMPLE_TEXT="Hidden Text",FontMetrics=function(){function e(e){this._data={},this._document=e}return e.prototype.parseMetrics=function(e,t){var n=this._document.createElement("div"),r=this._document.createElement("img"),o=this._document.createElement("span"),i=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=t,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",i.appendChild(n),r.src=SMALL_IMAGE,r.width=1,r.height=1,r.style.margin="0",r.style.padding="0",r.style.verticalAlign="baseline",o.style.fontFamily=e,o.style.fontSize=t,o.style.margin="0",o.style.padding="0",o.appendChild(this._document.createTextNode(SAMPLE_TEXT)),n.appendChild(o),n.appendChild(r);var a=r.offsetTop-o.offsetTop+2;n.removeChild(o),n.appendChild(this._document.createTextNode(SAMPLE_TEXT)),n.style.lineHeight="normal",r.style.verticalAlign="super";var s=r.offsetTop-n.offsetTop+2;return i.removeChild(n),{baseline:a,middle:s}},e.prototype.getMetrics=function(e,t){var n=e+" "+t;return void 0===this._data[n]&&(this._data[n]=this.parseMetrics(e,t)),this._data[n]},e}(),Renderer=function(){return function(e,t){this.context=e,this.options=t}}(),MASK_OFFSET=1e4,CanvasRenderer=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r._activeEffects=[],r.canvas=n.canvas?n.canvas:document.createElement("canvas"),r.ctx=r.canvas.getContext("2d"),n.canvas||(r.canvas.width=Math.floor(n.width*n.scale),r.canvas.height=Math.floor(n.height*n.scale),r.canvas.style.width=n.width+"px",r.canvas.style.height=n.height+"px"),r.fontMetrics=new FontMetrics(document),r.ctx.scale(r.options.scale,r.options.scale),r.ctx.translate(-n.x,-n.y),r.ctx.textBaseline="bottom",r._activeEffects=[],r.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),r}return __extends(t,e),t.prototype.applyEffects=function(e){for(var t=this;this._activeEffects.length;)this.popEffect();e.forEach((function(e){return t.applyEffect(e)}))},t.prototype.applyEffect=function(e){this.ctx.save(),isOpacityEffect(e)&&(this.ctx.globalAlpha=e.opacity),isTransformEffect(e)&&(this.ctx.translate(e.offsetX,e.offsetY),this.ctx.transform(e.matrix[0],e.matrix[1],e.matrix[2],e.matrix[3],e.matrix[4],e.matrix[5]),this.ctx.translate(-e.offsetX,-e.offsetY)),isClipEffect(e)&&(this.path(e.path),this.ctx.clip()),this._activeEffects.push(e)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){switch(t.label){case 0:return e.element.container.styles.isVisible()?[4,this.renderStackContent(e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.renderNode=function(e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){switch(t.label){case 0:return contains(e.container.flags,16),e.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(e)]:[3,3];case 1:return t.sent(),[4,this.renderNodeContent(e)];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))},t.prototype.renderTextWithLetterSpacing=function(e,t,n){var r=this;0===t?this.ctx.fillText(e.text,e.bounds.left,e.bounds.top+n):segmentGraphemes(e.text).reduce((function(t,o){return r.ctx.fillText(o,t,e.bounds.top+n),t+r.ctx.measureText(o).width}),e.bounds.left)},t.prototype.createFontStyle=function(e){var t=e.fontVariant.filter((function(e){return"normal"===e||"small-caps"===e})).join(""),n=fixIOSSystemFonts(e.fontFamily).join(", "),r=isDimensionToken(e.fontSize)?""+e.fontSize.number+e.fontSize.unit:e.fontSize.number+"px";return[[e.fontStyle,t,e.fontWeight,r,n].join(" "),n,r]},t.prototype.renderTextNode=function(e,t){return __awaiter(this,void 0,void 0,(function(){var n,r,o,i,a,s,c,l,u=this;return __generator(this,(function(d){return n=this.createFontStyle(t),r=n[0],o=n[1],i=n[2],this.ctx.font=r,this.ctx.direction=1===t.direction?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",a=this.fontMetrics.getMetrics(o,i),s=a.baseline,c=a.middle,l=t.paintOrder,e.textBounds.forEach((function(e){l.forEach((function(n){switch(n){case 0:u.ctx.fillStyle=asString(t.color),u.renderTextWithLetterSpacing(e,t.letterSpacing,s);var r=t.textShadow;r.length&&e.text.trim().length&&(r.slice(0).reverse().forEach((function(n){u.ctx.shadowColor=asString(n.color),u.ctx.shadowOffsetX=n.offsetX.number*u.options.scale,u.ctx.shadowOffsetY=n.offsetY.number*u.options.scale,u.ctx.shadowBlur=n.blur.number,u.renderTextWithLetterSpacing(e,t.letterSpacing,s)})),u.ctx.shadowColor="",u.ctx.shadowOffsetX=0,u.ctx.shadowOffsetY=0,u.ctx.shadowBlur=0),t.textDecorationLine.length&&(u.ctx.fillStyle=asString(t.textDecorationColor||t.color),t.textDecorationLine.forEach((function(t){switch(t){case 1:u.ctx.fillRect(e.bounds.left,Math.round(e.bounds.top+s),e.bounds.width,1);break;case 2:u.ctx.fillRect(e.bounds.left,Math.round(e.bounds.top),e.bounds.width,1);break;case 3:u.ctx.fillRect(e.bounds.left,Math.ceil(e.bounds.top+c),e.bounds.width,1)}})));break;case 1:t.webkitTextStrokeWidth&&e.text.trim().length&&(u.ctx.strokeStyle=asString(t.webkitTextStrokeColor),u.ctx.lineWidth=t.webkitTextStrokeWidth,u.ctx.lineJoin=window.chrome?"miter":"round",u.ctx.strokeText(e.text,e.bounds.left,e.bounds.top+s)),u.ctx.strokeStyle="",u.ctx.lineWidth=0,u.ctx.lineJoin="miter"}}))})),[2]}))}))},t.prototype.renderReplacedElement=function(e,t,n){if(n&&e.intrinsicWidth>0&&e.intrinsicHeight>0){var r=contentBox(e),o=calculatePaddingBoxPath(t);this.path(o),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(n,0,0,e.intrinsicWidth,e.intrinsicHeight,r.left,r.top,r.width,r.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(e){return __awaiter(this,void 0,void 0,(function(){var n,r,o,i,a,s,c,l,u,d,A,p,h,f,g,m,_,E;return __generator(this,(function(v){switch(v.label){case 0:this.applyEffects(e.getEffects(4)),n=e.container,r=e.curves,o=n.styles,i=0,a=n.textNodes,v.label=1;case 1:return i<a.length?(s=a[i],[4,this.renderTextNode(s,o)]):[3,4];case 2:v.sent(),v.label=3;case 3:return i++,[3,1];case 4:if(!(n instanceof ImageElementContainer))return[3,8];v.label=5;case 5:return v.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return g=v.sent(),this.renderReplacedElement(n,r,g),[3,8];case 7:return v.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof CanvasElementContainer&&this.renderReplacedElement(n,r,n.canvas),!(n instanceof SVGElementContainer))return[3,12];v.label=9;case 9:return v.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return g=v.sent(),this.renderReplacedElement(n,r,g),[3,12];case 11:return v.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof IFrameElementContainer&&n.tree?[4,new t(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}).render(n.tree)]:[3,14];case 13:c=v.sent(),n.width&&n.height&&this.ctx.drawImage(c,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),v.label=14;case 14:if(n instanceof InputElementContainer&&(l=Math.min(n.bounds.width,n.bounds.height),n.type===CHECKBOX?n.checked&&(this.ctx.save(),this.path([new Vector(n.bounds.left+.39363*l,n.bounds.top+.79*l),new Vector(n.bounds.left+.16*l,n.bounds.top+.5549*l),new Vector(n.bounds.left+.27347*l,n.bounds.top+.44071*l),new Vector(n.bounds.left+.39694*l,n.bounds.top+.5649*l),new Vector(n.bounds.left+.72983*l,n.bounds.top+.23*l),new Vector(n.bounds.left+.84*l,n.bounds.top+.34085*l),new Vector(n.bounds.left+.39363*l,n.bounds.top+.79*l)]),this.ctx.fillStyle=asString(INPUT_COLOR),this.ctx.fill(),this.ctx.restore()):n.type===RADIO&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+l/2,n.bounds.top+l/2,l/4,0,2*Math.PI,!0),this.ctx.fillStyle=asString(INPUT_COLOR),this.ctx.fill(),this.ctx.restore())),isTextInputElement(n)&&n.value.length){switch(u=this.createFontStyle(o),_=u[0],d=u[1],A=this.fontMetrics.getMetrics(_,d).baseline,this.ctx.font=_,this.ctx.fillStyle=asString(o.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=canvasTextAlign(n.styles.textAlign),E=contentBox(n),p=0,n.styles.textAlign){case 1:p+=E.width/2;break;case 2:p+=E.width}h=E.add(p,0,0,-E.height/2+1),this.ctx.save(),this.path([new Vector(E.left,E.top),new Vector(E.left+E.width,E.top),new Vector(E.left+E.width,E.top+E.height),new Vector(E.left,E.top+E.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new TextBounds(n.value,h),o.letterSpacing,A),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!contains(n.styles.display,2048))return[3,20];if(null===n.styles.listStyleImage)return[3,19];if(0!==(f=n.styles.listStyleImage).type)return[3,18];g=void 0,m=f.url,v.label=15;case 15:return v.trys.push([15,17,,18]),[4,this.context.cache.match(m)];case 16:return g=v.sent(),this.ctx.drawImage(g,n.bounds.left-(g.width+10),n.bounds.top),[3,18];case 17:return v.sent(),this.context.logger.error("Error loading list-style-image "+m),[3,18];case 18:return[3,20];case 19:e.listValue&&-1!==n.styles.listStyleType&&(_=this.createFontStyle(o)[0],this.ctx.font=_,this.ctx.fillStyle=asString(o.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",E=new Bounds(n.bounds.left,n.bounds.top+getAbsoluteValue(n.styles.paddingTop,n.bounds.width),n.bounds.width,computeLineHeight(o.lineHeight,o.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new TextBounds(e.listValue,E),o.letterSpacing,computeLineHeight(o.lineHeight,o.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),v.label=20;case 20:return[2]}}))}))},t.prototype.renderStackContent=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n,r,o,i,a,s,c,l,u,d,A,p,h,f;return __generator(this,(function(g){switch(g.label){case 0:return contains(e.element.container.flags,16),[4,this.renderNodeBackgroundAndBorders(e.element)];case 1:g.sent(),t=0,n=e.negativeZIndex,g.label=2;case 2:return t<n.length?(f=n[t],[4,this.renderStack(f)]):[3,5];case 3:g.sent(),g.label=4;case 4:return t++,[3,2];case 5:return[4,this.renderNodeContent(e.element)];case 6:g.sent(),r=0,o=e.nonInlineLevel,g.label=7;case 7:return r<o.length?(f=o[r],[4,this.renderNode(f)]):[3,10];case 8:g.sent(),g.label=9;case 9:return r++,[3,7];case 10:i=0,a=e.nonPositionedFloats,g.label=11;case 11:return i<a.length?(f=a[i],[4,this.renderStack(f)]):[3,14];case 12:g.sent(),g.label=13;case 13:return i++,[3,11];case 14:s=0,c=e.nonPositionedInlineLevel,g.label=15;case 15:return s<c.length?(f=c[s],[4,this.renderStack(f)]):[3,18];case 16:g.sent(),g.label=17;case 17:return s++,[3,15];case 18:l=0,u=e.inlineLevel,g.label=19;case 19:return l<u.length?(f=u[l],[4,this.renderNode(f)]):[3,22];case 20:g.sent(),g.label=21;case 21:return l++,[3,19];case 22:d=0,A=e.zeroOrAutoZIndexOrTransformedOrOpacity,g.label=23;case 23:return d<A.length?(f=A[d],[4,this.renderStack(f)]):[3,26];case 24:g.sent(),g.label=25;case 25:return d++,[3,23];case 26:p=0,h=e.positiveZIndex,g.label=27;case 27:return p<h.length?(f=h[p],[4,this.renderStack(f)]):[3,30];case 28:g.sent(),g.label=29;case 29:return p++,[3,27];case 30:return[2]}}))}))},t.prototype.mask=function(e){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(e.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(e){this.ctx.beginPath(),this.formatPath(e),this.ctx.closePath()},t.prototype.formatPath=function(e){var t=this;e.forEach((function(e,n){var r=isBezierCurve(e)?e.start:e;0===n?t.ctx.moveTo(r.x,r.y):t.ctx.lineTo(r.x,r.y),isBezierCurve(e)&&t.ctx.bezierCurveTo(e.startControl.x,e.startControl.y,e.endControl.x,e.endControl.y,e.end.x,e.end.y)}))},t.prototype.renderRepeat=function(e,t,n,r){this.path(e),this.ctx.fillStyle=t,this.ctx.translate(n,r),this.ctx.fill(),this.ctx.translate(-n,-r)},t.prototype.resizeImage=function(e,t,n){var r;if(e.width===t&&e.height===n)return e;var o=(null!==(r=this.canvas.ownerDocument)&&void 0!==r?r:document).createElement("canvas");return o.width=Math.max(1,t),o.height=Math.max(1,n),o.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,t,n),o},t.prototype.renderBackgroundImage=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n,r,o,i,a;return __generator(this,(function(s){switch(s.label){case 0:t=e.styles.backgroundImage.length-1,n=function(n){var o,i,a,s,c,l,u,d,A,p,h,f,g,m,_,E,v,y,b,C,S,w,T,I,R,O,N,k,P,D,L;return __generator(this,(function(B){switch(B.label){case 0:if(0!==n.type)return[3,5];o=void 0,i=n.url,B.label=1;case 1:return B.trys.push([1,3,,4]),[4,r.context.cache.match(i)];case 2:return o=B.sent(),[3,4];case 3:return B.sent(),r.context.logger.error("Error loading background-image "+i),[3,4];case 4:return o&&(a=calculateBackgroundRendering(e,t,[o.width,o.height,o.width/o.height]),E=a[0],w=a[1],T=a[2],b=a[3],C=a[4],m=r.ctx.createPattern(r.resizeImage(o,b,C),"repeat"),r.renderRepeat(E,m,w,T)),[3,6];case 5:isLinearGradient(n)?(s=calculateBackgroundRendering(e,t,[null,null,null]),E=s[0],w=s[1],T=s[2],b=s[3],C=s[4],c=calculateGradientDirection(n.angle,b,C),l=c[0],u=c[1],d=c[2],A=c[3],p=c[4],(h=document.createElement("canvas")).width=b,h.height=C,f=h.getContext("2d"),g=f.createLinearGradient(u,A,d,p),processColorStops(n.stops,l).forEach((function(e){return g.addColorStop(e.stop,asString(e.color))})),f.fillStyle=g,f.fillRect(0,0,b,C),b>0&&C>0&&(m=r.ctx.createPattern(h,"repeat"),r.renderRepeat(E,m,w,T))):isRadialGradient(n)&&(_=calculateBackgroundRendering(e,t,[null,null,null]),E=_[0],v=_[1],y=_[2],b=_[3],C=_[4],S=0===n.position.length?[FIFTY_PERCENT]:n.position,w=getAbsoluteValue(S[0],b),T=getAbsoluteValue(S[S.length-1],C),I=calculateRadius(n,w,T,b,C),R=I[0],O=I[1],R>0&&O>0&&(N=r.ctx.createRadialGradient(v+w,y+T,0,v+w,y+T,R),processColorStops(n.stops,2*R).forEach((function(e){return N.addColorStop(e.stop,asString(e.color))})),r.path(E),r.ctx.fillStyle=N,R!==O?(k=e.bounds.left+.5*e.bounds.width,P=e.bounds.top+.5*e.bounds.height,L=1/(D=O/R),r.ctx.save(),r.ctx.translate(k,P),r.ctx.transform(1,0,0,D,0,0),r.ctx.translate(-k,-P),r.ctx.fillRect(v,L*(y-P)+P,b,C*L),r.ctx.restore()):r.ctx.fill())),B.label=6;case 6:return t--,[2]}}))},r=this,o=0,i=e.styles.backgroundImage.slice(0).reverse(),s.label=1;case 1:return o<i.length?(a=i[o],[5,n(a)]):[3,4];case 2:s.sent(),s.label=3;case 3:return o++,[3,1];case 4:return[2]}}))}))},t.prototype.renderSolidBorder=function(e,t,n){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(r){return this.path(parsePathForBorder(n,t)),this.ctx.fillStyle=asString(e),this.ctx.fill(),[2]}))}))},t.prototype.renderDoubleBorder=function(e,t,n,r){return __awaiter(this,void 0,void 0,(function(){var o,i;return __generator(this,(function(a){switch(a.label){case 0:return t<3?[4,this.renderSolidBorder(e,n,r)]:[3,2];case 1:return a.sent(),[2];case 2:return o=parsePathForBorderDoubleOuter(r,n),this.path(o),this.ctx.fillStyle=asString(e),this.ctx.fill(),i=parsePathForBorderDoubleInner(r,n),this.path(i),this.ctx.fill(),[2]}}))}))},t.prototype.renderNodeBackgroundAndBorders=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n,r,o,i,a,s,c,l=this;return __generator(this,(function(u){switch(u.label){case 0:return this.applyEffects(e.getEffects(2)),t=e.container.styles,n=!isTransparent(t.backgroundColor)||t.backgroundImage.length,r=[{style:t.borderTopStyle,color:t.borderTopColor,width:t.borderTopWidth},{style:t.borderRightStyle,color:t.borderRightColor,width:t.borderRightWidth},{style:t.borderBottomStyle,color:t.borderBottomColor,width:t.borderBottomWidth},{style:t.borderLeftStyle,color:t.borderLeftColor,width:t.borderLeftWidth}],o=calculateBackgroundCurvedPaintingArea(getBackgroundValueForIndex(t.backgroundClip,0),e.curves),n||t.boxShadow.length?(this.ctx.save(),this.path(o),this.ctx.clip(),isTransparent(t.backgroundColor)||(this.ctx.fillStyle=asString(t.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(e.container)]):[3,2];case 1:u.sent(),this.ctx.restore(),t.boxShadow.slice(0).reverse().forEach((function(t){l.ctx.save();var n=calculateBorderBoxPath(e.curves),r=t.inset?0:MASK_OFFSET,o=transformPath(n,-r+(t.inset?1:-1)*t.spread.number,(t.inset?1:-1)*t.spread.number,t.spread.number*(t.inset?-2:2),t.spread.number*(t.inset?-2:2));t.inset?(l.path(n),l.ctx.clip(),l.mask(o)):(l.mask(n),l.ctx.clip(),l.path(o)),l.ctx.shadowOffsetX=t.offsetX.number+r,l.ctx.shadowOffsetY=t.offsetY.number,l.ctx.shadowColor=asString(t.color),l.ctx.shadowBlur=t.blur.number,l.ctx.fillStyle=t.inset?asString(t.color):"rgba(0,0,0,1)",l.ctx.fill(),l.ctx.restore()})),u.label=2;case 2:i=0,a=0,s=r,u.label=3;case 3:return a<s.length?0!==(c=s[a]).style&&!isTransparent(c.color)&&c.width>0?2!==c.style?[3,5]:[4,this.renderDashedDottedBorder(c.color,c.width,i,e.curves,2)]:[3,11]:[3,13];case 4:return u.sent(),[3,11];case 5:return 3!==c.style?[3,7]:[4,this.renderDashedDottedBorder(c.color,c.width,i,e.curves,3)];case 6:return u.sent(),[3,11];case 7:return 4!==c.style?[3,9]:[4,this.renderDoubleBorder(c.color,c.width,i,e.curves)];case 8:return u.sent(),[3,11];case 9:return[4,this.renderSolidBorder(c.color,i,e.curves)];case 10:u.sent(),u.label=11;case 11:i++,u.label=12;case 12:return a++,[3,3];case 13:return[2]}}))}))},t.prototype.renderDashedDottedBorder=function(e,t,n,r,o){return __awaiter(this,void 0,void 0,(function(){var i,a,s,c,l,u,d,A,p,h,f,g,m,_,E,v;return __generator(this,(function(y){return this.ctx.save(),i=parsePathForBorderStroke(r,n),a=parsePathForBorder(r,n),2===o&&(this.path(a),this.ctx.clip()),isBezierCurve(a[0])?(s=a[0].start.x,c=a[0].start.y):(s=a[0].x,c=a[0].y),isBezierCurve(a[1])?(l=a[1].end.x,u=a[1].end.y):(l=a[1].x,u=a[1].y),d=0===n||2===n?Math.abs(s-l):Math.abs(c-u),this.ctx.beginPath(),3===o?this.formatPath(i):this.formatPath(a.slice(0,2)),A=t<3?3*t:2*t,p=t<3?2*t:t,3===o&&(A=t,p=t),h=!0,d<=2*A?h=!1:d<=2*A+p?(A*=f=d/(2*A+p),p*=f):(g=Math.floor((d+p)/(A+p)),m=(d-g*A)/(g-1),p=(_=(d-(g+1)*A)/g)<=0||Math.abs(p-m)<Math.abs(p-_)?m:_),h&&(3===o?this.ctx.setLineDash([0,A+p]):this.ctx.setLineDash([A,p])),3===o?(this.ctx.lineCap="round",this.ctx.lineWidth=t):this.ctx.lineWidth=2*t+1.1,this.ctx.strokeStyle=asString(e),this.ctx.stroke(),this.ctx.setLineDash([]),2===o&&(isBezierCurve(a[0])&&(E=a[3],v=a[0],this.ctx.beginPath(),this.formatPath([new Vector(E.end.x,E.end.y),new Vector(v.start.x,v.start.y)]),this.ctx.stroke()),isBezierCurve(a[1])&&(E=a[1],v=a[2],this.ctx.beginPath(),this.formatPath([new Vector(E.end.x,E.end.y),new Vector(v.start.x,v.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]}))}))},t.prototype.render=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=asString(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),t=parseStackingContexts(e),[4,this.renderStack(t)];case 1:return n.sent(),this.applyEffects([]),[2,this.canvas]}}))}))},t}(Renderer),isTextInputElement=function(e){return e instanceof TextareaElementContainer||(e instanceof SelectElementContainer||e instanceof InputElementContainer&&e.type!==RADIO&&e.type!==CHECKBOX)},calculateBackgroundCurvedPaintingArea=function(e,t){switch(e){case 0:return calculateBorderBoxPath(t);case 2:return calculateContentBoxPath(t);default:return calculatePaddingBoxPath(t)}},canvasTextAlign=function(e){switch(e){case 1:return"center";case 2:return"right";default:return"left"}},iOSBrokenFonts=["-apple-system","system-ui"],fixIOSSystemFonts=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter((function(e){return-1===iOSBrokenFonts.indexOf(e)})):e},ForeignObjectRenderer=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.canvas=n.canvas?n.canvas:document.createElement("canvas"),r.ctx=r.canvas.getContext("2d"),r.options=n,r.canvas.width=Math.floor(n.width*n.scale),r.canvas.height=Math.floor(n.height*n.scale),r.canvas.style.width=n.width+"px",r.canvas.style.height=n.height+"px",r.ctx.scale(r.options.scale,r.options.scale),r.ctx.translate(-n.x,-n.y),r.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),r}return __extends(t,e),t.prototype.render=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n;return __generator(this,(function(r){switch(r.label){case 0:return t=createForeignObjectSVG(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,e),[4,loadSerializedSVG(t)];case 1:return n=r.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=asString(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(n,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}}))}))},t}(Renderer),loadSerializedSVG=function(e){return new Promise((function(t,n){var r=new Image;r.onload=function(){t(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(e))}))},Logger=function(){function e(e){var t=e.id,n=e.enabled;this.id=t,this.enabled=n,this.start=Date.now()}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.debug?console.debug.apply(console,__spreadArray([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&"undefined"!=typeof window&&window.console&&"function"==typeof console.info&&console.info.apply(console,__spreadArray([this.id,this.getTime()+"ms"],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.warn?console.warn.apply(console,__spreadArray([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.error?console.error.apply(console,__spreadArray([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.instances={},e}(),Context=function(){function e(t,n){var r;this.windowBounds=n,this.instanceName="#"+e.instanceCount++,this.logger=new Logger({id:this.instanceName,enabled:t.logging}),this.cache=null!==(r=t.cache)&&void 0!==r?r:new Cache(this,t)}return e.instanceCount=1,e}(),html2canvas=function(e,t){return void 0===t&&(t={}),renderElement(e,t)};"undefined"!=typeof window&&CacheStorage.setContext(window);var renderElement=function(e,t){return __awaiter(void 0,void 0,void 0,(function(){var n,r,o,i,a,s,c,l,u,d,A,p,h,f,g,m,_,E,v,y,b,C,S,w,T,I,R,O,N,k,P,D,L,B,U,M,x,F;return __generator(this,(function($){switch($.label){case 0:if(!e||"object"!=typeof e)return[2,Promise.reject("Invalid element provided as first argument")];if(!(n=e.ownerDocument))throw new Error("Element is not attached to a Document");if(!(r=n.defaultView))throw new Error("Document is not attached to a Window");return o={allowTaint:null!==(C=t.allowTaint)&&void 0!==C&&C,imageTimeout:null!==(S=t.imageTimeout)&&void 0!==S?S:15e3,proxy:t.proxy,useCORS:null!==(w=t.useCORS)&&void 0!==w&&w},i=__assign({logging:null===(T=t.logging)||void 0===T||T,cache:t.cache},o),a={windowWidth:null!==(I=t.windowWidth)&&void 0!==I?I:r.innerWidth,windowHeight:null!==(R=t.windowHeight)&&void 0!==R?R:r.innerHeight,scrollX:null!==(O=t.scrollX)&&void 0!==O?O:r.pageXOffset,scrollY:null!==(N=t.scrollY)&&void 0!==N?N:r.pageYOffset},s=new Bounds(a.scrollX,a.scrollY,a.windowWidth,a.windowHeight),c=new Context(i,s),l=null!==(k=t.foreignObjectRendering)&&void 0!==k&&k,u={allowTaint:null!==(P=t.allowTaint)&&void 0!==P&&P,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:l,copyStyles:l},c.logger.debug("Starting document clone with size "+s.width+"x"+s.height+" scrolled to "+-s.left+","+-s.top),d=new DocumentCloner(c,e,u),(A=d.clonedReferenceElement)?[4,d.toIFrame(n,s)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return p=$.sent(),h=isBodyElement(A)||isHTMLElement(A)?parseDocumentSize(A.ownerDocument):parseBounds(c,A),f=h.width,g=h.height,m=h.left,_=h.top,E=parseBackgroundColor(c,A,t.backgroundColor),v={canvas:t.canvas,backgroundColor:E,scale:null!==(L=null!==(D=t.scale)&&void 0!==D?D:r.devicePixelRatio)&&void 0!==L?L:1,x:(null!==(B=t.x)&&void 0!==B?B:0)+m,y:(null!==(U=t.y)&&void 0!==U?U:0)+_,width:null!==(M=t.width)&&void 0!==M?M:Math.ceil(f),height:null!==(x=t.height)&&void 0!==x?x:Math.ceil(g)},l?(c.logger.debug("Document cloned, using foreign object rendering"),[4,new ForeignObjectRenderer(c,v).render(A)]):[3,3];case 2:return y=$.sent(),[3,5];case 3:return c.logger.debug("Document cloned, element located at "+m+","+_+" with size "+f+"x"+g+" using computed rendering"),c.logger.debug("Starting DOM parsing"),b=parseTree(c,A),E===b.styles.backgroundColor&&(b.styles.backgroundColor=COLORS.TRANSPARENT),c.logger.debug("Starting renderer for element at "+v.x+","+v.y+" with size "+v.width+"x"+v.height),[4,new CanvasRenderer(c,v).render(b)];case 4:y=$.sent(),$.label=5;case 5:return(null===(F=t.removeContainer)||void 0===F||F)&&(DocumentCloner.destroy(p)||c.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),c.logger.debug("Finished rendering"),[2,y]}}))}))},parseBackgroundColor=function(e,t,n){var r=t.ownerDocument,o=r.documentElement?parseColor(e,getComputedStyle(r.documentElement).backgroundColor):COLORS.TRANSPARENT,i=r.body?parseColor(e,getComputedStyle(r.body).backgroundColor):COLORS.TRANSPARENT,a="string"==typeof n?parseColor(e,n):null===n?COLORS.TRANSPARENT:4294967295;return t===r.documentElement?isTransparent(o)?isTransparent(i)?a:i:o:a};const _sfc_main$3={__name:"modal-guest-pwd-tip",props:["username","pwd","alwaysDownload"],emits:["close"],setup(e,{emit:t}){const n=e,r=ref(n.username),o=ref(n.pwd);let i=n.alwaysDownload;const a=t,s=()=>{console.log(" "),i&&c(),a("close")},c=()=>{try{showLoadingContent(lanKey.downloadTaskTip.tr),setTimeout((()=>{hideLoading()}),2e3);const e=document.getElementById("save-area");document.createElement("canvas");html2canvas(e).then((function(e){var t=e.toDataURL("image/png");binDownload(t,`${gAppName}_account_`+n.username+".png",!1),i=!1}))}catch(e){showNotificationError$1({content:lanKey.operateFail.tr})}};return(e,t)=>{const n=index$g,i=index$i,a=Input;return openBlock(),createBlock(n,{style:{display:"flex","flex-direction":"column"}},{default:withCtx((()=>[createVNode(n,{class:"content"},{default:withCtx((()=>[createVNode(n,{id:"save-area",class:"input-area"},{default:withCtx((()=>[createVNode(n,{style:{display:"flex","justify-content":"center","align-items":"center"}},{default:withCtx((()=>[createVNode(n,{class:"home_logo_logo",style:{height:"170rpx",width:"170rpx"}})])),_:1}),createVNode(i,null,{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(lanKey).account.tr),1)])),_:1}),createVNode(n,{class:"input-content"},{default:withCtx((()=>[createVNode(a,{type:"text",disabled:"",name:"username",autocomplete:"username",modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=e=>r.value=e)},null,8,["modelValue"])])),_:1}),createVNode(i,null,{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(lanKey).password.tr),1)])),_:1}),createVNode(n,{class:"input-content"},{default:withCtx((()=>[unref(isFlutterWebApp)?(openBlock(),createBlock(a,{key:1,type:"text",disabled:"",modelValue:o.value,"onUpdate:modelValue":t[1]||(t[1]=e=>o.value=e)},null,8,["modelValue"])):(openBlock(),createBlock(i,{key:0},{default:withCtx((()=>[createTextVNode(toDisplayString$1(o.value),1)])),_:1}))])),_:1}),unref(isFlutterWebApp)?(openBlock(),createBlock(n,{key:0,style:{opacity:"0",height:"50rpx"}})):createCommentVNode("",!0),withDirectives(createVNode(n,{class:"input-content"},{default:withCtx((()=>[createVNode(a,{type:"password",name:"password",autocomplete:"current-password",modelValue:o.value,"onUpdate:modelValue":t[2]||(t[2]=e=>o.value=e)},null,8,["modelValue"])])),_:1},512),[[vShow,!1]])])),_:1}),createVNode(i,{class:"txt-tip"},{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(lanKey).saveAccountTip.tr),1)])),_:1}),createVNode(n,{onClick:c,class:"action-area"},{default:withCtx((()=>[createVNode(n,{class:"download"},{default:withCtx((()=>[createVNode(n,{class:"download-icon"}),createVNode(i,null,{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(lanKey).saveAccount.tr),1)])),_:1})])),_:1})])),_:1})])),_:1}),createVNode(n,{class:"close-tip"},{default:withCtx((()=>[createVNode(n,{onClick:s,class:"close-tip-icon"})])),_:1})])),_:1})}}},ModalGuestPwdTip=_export_sfc(_sfc_main$3,[["__scopeId","data-v-793594dd"]]),_sfc_main$2={__name:"modal-iphone-pwa-guide",emits:["close"],setup(e,{emit:t}){const n=t,r=()=>{n("close")};return(e,t)=>{const n=index$g,o=index$i,i=ScrollView;return openBlock(),createBlock(i,{class:"scroll","scroll-y":""},{default:withCtx((()=>[createVNode(n,{class:"nav-area"},{default:withCtx((()=>[createVNode(n,{onClick:r,class:"close"})])),_:1}),createVNode(n,{class:"content"},{default:withCtx((()=>[createVNode(n,{class:"home_logo",style:{"align-self":"self-start","margin-inline-start":"58rpx","margin-top":"80rpx"}},{default:withCtx((()=>[createVNode(n,{class:"home_logo_logo"}),createVNode(n,{class:"home_logo_logo_text_black"})])),_:1}),createVNode(o,{class:"add-tip"},{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(lanKey).pwa_iphone_tip.trArg(unref(gAppName))),1)])),_:1}),createVNode(o,null,{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(lanKey).pwa_iphone_tip_2.tr),1)])),_:1}),createVNode(n,{class:"guide-1"}),createVNode(o,null,{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(lanKey).pwa_iphone_tip_3.tr),1)])),_:1}),createVNode(n,{class:"guide-2"},{default:withCtx((()=>[createVNode(n,{class:"add-location"},{default:withCtx((()=>[createVNode(n,null,{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(lanKey).pwa_iphone_tip_4.tr),1)])),_:1}),createVNode(n,{class:"add-icon"})])),_:1})])),_:1})])),_:1})])),_:1})}}},ModaliPhonePwaGuide=_export_sfc(_sfc_main$2,[["__scopeId","data-v-19249905"]]),_sfc_main$1={__name:"modal-media-unavailable-tip",emits:["close"],setup(e,{emit:t}){const n=t,r=()=>n("close"),o=useAppDataStore().$onAction((({name:e})=>{"remoteInvitationReceived"==e&&(console.log(" "),r())}));return onUnmounted((()=>{console.log(" "),o()})),(e,t)=>{const n=index$g,o=index$i;return openBlock(),createBlock(n,{class:"loginBack modal-gradient"},{default:withCtx((()=>[createVNode(n,{class:"top-img"}),createVNode(o,{class:"text-content"},{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(lanKey).notSupportGuide.tr),1)])),_:1}),createVNode(n,{class:"loginBtnArea"},{default:withCtx((()=>[createVNode(n,{class:"loginBtn",onClick:unref(openGooglePlay)},{default:withCtx((()=>[createVNode(n,{class:"googlePlayIcon"}),createVNode(o,null,{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(lanKey).googlePlay.tr),1)])),_:1})])),_:1},8,["onClick"]),createVNode(n,{class:"loginBtn",style:{"box-sizing":"border-box",border:"2rpx solid #FFFFFF80","background-color":"transparent",color:"white"},onClick:r},{default:withCtx((()=>[createVNode(o,null,{default:withCtx((()=>[createTextVNode(toDisplayString$1(unref(lanKey).confirm.tr),1)])),_:1})])),_:1})])),_:1}),createVNode(n,{class:"close-out",onClick:r},{default:withCtx((()=>[createVNode(n,{class:"close"})])),_:1})])),_:1})}}},ModalMediaUnavaliableTip=_export_sfc(_sfc_main$1,[["__scopeId","data-v-e072a9f0"]]);var AgoraRTC_NProduction={exports:{}};AgoraRTC_NProduction.exports=function(){function e(e,t){return t.forEach((function(t){t&&"string"!=typeof t&&!Array.isArray(t)&&Object.keys(t).forEach((function(n){if("default"!==n&&!(n in e)){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}}))})),Object.freeze(e)}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==commonjsGlobal?commonjsGlobal:"undefined"!=typeof self?self:{};function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var r=function(e){try{return!!e()}catch(t){return!0}},o=!r((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),i=o,a=Function.prototype,s=a.call,c=i&&a.bind.bind(s,s),l=i?c:function(e){return function(){return s.apply(e,arguments)}},u=l({}.isPrototypeOf),d=function(e){return e&&e.Math==Math&&e},A=d("object"==typeof globalThis&&globalThis)||d("object"==typeof window&&window)||d("object"==typeof self&&self)||d("object"==typeof t&&t)||function(){return this}()||t||Function("return this")(),p=o,h=Function.prototype,f=h.apply,g=h.call,m="object"==typeof Reflect&&Reflect.apply||(p?g.bind(f):function(){return g.apply(f,arguments)}),_=l,E=_({}.toString),v=_("".slice),y=function(e){return v(E(e),8,-1)},b=y,C=l,S=function(e){if("Function"===b(e))return C(e)},w="object"==typeof document&&document.all,T={all:w,IS_HTMLDDA:void 0===w&&void 0!==w},I=T.all,R=T.IS_HTMLDDA?function(e){return"function"==typeof e||e===I}:function(e){return"function"==typeof e},O={},N=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),k=o,P=Function.prototype.call,D=k?P.bind(P):function(){return P.apply(P,arguments)},L={},B={}.propertyIsEnumerable,U=Object.getOwnPropertyDescriptor,M=U&&!B.call({1:2},1);L.f=M?function(e){var t=U(this,e);return!!t&&t.enumerable}:B;var x,F,$=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},V=r,H=y,j=Object,Q=l("".split),G=V((function(){return!j("z").propertyIsEnumerable(0)}))?function(e){return"String"==H(e)?Q(e,""):j(e)}:j,K=function(e){return null==e},W=K,q=TypeError,z=function(e){if(W(e))throw q("Can't call method on "+e);return e},Y=G,J=z,X=function(e){return Y(J(e))},Z=R,ee=T.all,te=T.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:Z(e)||e===ee}:function(e){return"object"==typeof e?null!==e:Z(e)},ne={},re=ne,oe=A,ie=R,ae=function(e){return ie(e)?e:void 0},se=function(e,t){return arguments.length<2?ae(re[e])||ae(oe[e]):re[e]&&re[e][t]||oe[e]&&oe[e][t]},ce="undefined"!=typeof navigator&&String(navigator.userAgent)||"",le=A,ue=ce,de=le.process,Ae=le.Deno,pe=de&&de.versions||Ae&&Ae.version,he=pe&&pe.v8;he&&(F=(x=he.split("."))[0]>0&&x[0]<4?1:+(x[0]+x[1])),!F&&ue&&(!(x=ue.match(/Edge\/(\d+)/))||x[1]>=74)&&(x=ue.match(/Chrome\/(\d+)/))&&(F=+x[1]);var fe=F,ge=fe,me=r,_e=A.String,Ee=!!Object.getOwnPropertySymbols&&!me((function(){var e=Symbol();return!_e(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&ge&&ge<41})),ve=Ee&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,ye=se,be=R,Ce=u,Se=Object,we=ve?function(e){return"symbol"==typeof e}:function(e){var t=ye("Symbol");return be(t)&&Ce(t.prototype,Se(e))},Te=String,Ie=function(e){try{return Te(e)}catch(t){return"Object"}},Re=R,Oe=Ie,Ne=TypeError,ke=function(e){if(Re(e))return e;throw Ne(Oe(e)+" is not a function")},Pe=ke,De=K,Le=function(e,t){var n=e[t];return De(n)?void 0:Pe(n)},Be=D,Ue=R,Me=te,xe=TypeError,Fe={exports:{}},$e=A,Ve=Object.defineProperty,He=function(e,t){try{Ve($e,e,{value:t,configurable:!0,writable:!0})}catch(n){$e[e]=t}return t},je="__core-js_shared__",Qe=A[je]||He(je,{}),Ge=Qe;(Fe.exports=function(e,t){return Ge[e]||(Ge[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.31.1",mode:"pure",copyright:" 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.31.1/LICENSE",source:"https://github.com/zloirock/core-js"});var Ke=Fe.exports,We=z,qe=Object,ze=function(e){return qe(We(e))},Ye=ze,Je=l({}.hasOwnProperty),Xe=Object.hasOwn||function(e,t){return Je(Ye(e),t)},Ze=l,et=0,tt=Math.random(),nt=Ze(1..toString),rt=function(e){return"Symbol("+(void 0===e?"":e)+")_"+nt(++et+tt,36)},ot=Ke,it=Xe,at=rt,st=Ee,ct=ve,lt=A.Symbol,ut=ot("wks"),dt=ct?lt.for||lt:lt&&lt.withoutSetter||at,At=function(e){return it(ut,e)||(ut[e]=st&&it(lt,e)?lt[e]:dt("Symbol."+e)),ut[e]},pt=D,ht=te,ft=we,gt=Le,mt=function(e,t){var n,r;if(Ue(n=e.toString)&&!Me(r=Be(n,e)))return r;if(Ue(n=e.valueOf)&&!Me(r=Be(n,e)))return r;throw xe("Can't convert object to primitive value")},_t=TypeError,Et=At("toPrimitive"),vt=function(e,t){if(!ht(e)||ft(e))return e;var n,r=gt(e,Et);if(r){if(n=pt(r,e,t),!ht(n)||ft(n))return n;throw _t("Can't convert object to primitive value")}return mt(e)},yt=we,bt=function(e){var t=vt(e,"string");return yt(t)?t:t+""},Ct=te,St=A.document,wt=Ct(St)&&Ct(St.createElement),Tt=function(e){return wt?St.createElement(e):{}},It=Tt,Rt=!N&&!r((function(){return 7!=Object.defineProperty(It("div"),"a",{get:function(){return 7}}).a})),Ot=N,Nt=D,kt=L,Pt=$,Dt=X,Lt=bt,Bt=Xe,Ut=Rt,Mt=Object.getOwnPropertyDescriptor;O.f=Ot?Mt:function(e,t){if(e=Dt(e),t=Lt(t),Ut)try{return Mt(e,t)}catch(n){}if(Bt(e,t))return Pt(!Nt(kt.f,e,t),e[t])};var xt=r,Ft=R,$t=/#|\.prototype\./,Vt=function(e,t){var n=jt[Ht(e)];return n==Gt||n!=Qt&&(Ft(t)?xt(t):!!t)},Ht=Vt.normalize=function(e){return String(e).replace($t,".").toLowerCase()},jt=Vt.data={},Qt=Vt.NATIVE="N",Gt=Vt.POLYFILL="P",Kt=Vt,Wt=ke,qt=o,zt=S(S.bind),Yt=function(e,t){return Wt(e),void 0===t?e:qt?zt(e,t):function(){return e.apply(t,arguments)}},Jt={},Xt=N&&r((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),Zt=te,en=String,tn=TypeError,nn=function(e){if(Zt(e))return e;throw tn(en(e)+" is not an object")},rn=N,on=Rt,an=Xt,sn=nn,cn=bt,ln=TypeError,un=Object.defineProperty,dn=Object.getOwnPropertyDescriptor,An="enumerable",pn="configurable",hn="writable";Jt.f=rn?an?function(e,t,n){if(sn(e),t=cn(t),sn(n),"function"==typeof e&&"prototype"===t&&"value"in n&&hn in n&&!n[hn]){var r=dn(e,t);r&&r[hn]&&(e[t]=n.value,n={configurable:pn in n?n[pn]:r[pn],enumerable:An in n?n[An]:r[An],writable:!1})}return un(e,t,n)}:un:function(e,t,n){if(sn(e),t=cn(t),sn(n),on)try{return un(e,t,n)}catch(r){}if("get"in n||"set"in n)throw ln("Accessors not supported");return"value"in n&&(e[t]=n.value),e};var fn=Jt,gn=$,mn=N?function(e,t,n){return fn.f(e,t,gn(1,n))}:function(e,t,n){return e[t]=n,e},_n=A,En=m,vn=S,yn=R,bn=O.f,Cn=Kt,Sn=ne,wn=Yt,Tn=mn,In=Xe,Rn=function(e){var t=function(n,r,o){if(this instanceof t){switch(arguments.length){case 0:return new e;case 1:return new e(n);case 2:return new e(n,r)}return new e(n,r,o)}return En(e,this,arguments)};return t.prototype=e.prototype,t},On=function(e,t){var n,r,o,i,a,s,c,l,u,d=e.target,A=e.global,p=e.stat,h=e.proto,f=A?_n:p?_n[d]:(_n[d]||{}).prototype,g=A?Sn:Sn[d]||Tn(Sn,d,{})[d],m=g.prototype;for(i in t)r=!(n=Cn(A?i:d+(p?".":"#")+i,e.forced))&&f&&In(f,i),s=g[i],r&&(c=e.dontCallGetSet?(u=bn(f,i))&&u.value:f[i]),a=r&&c?c:t[i],r&&typeof s==typeof a||(l=e.bind&&r?wn(a,_n):e.wrap&&r?Rn(a):h&&yn(a)?vn(a):a,(e.sham||a&&a.sham||s&&s.sham)&&Tn(l,"sham",!0),Tn(g,i,l),h&&(In(Sn,o=d+"Prototype")||Tn(Sn,o,{}),Tn(Sn[o],i,a),e.real&&m&&(n||!m[i])&&Tn(m,i,a)))},Nn=Math.ceil,kn=Math.floor,Pn=Math.trunc||function(e){var t=+e;return(t>0?kn:Nn)(t)},Dn=function(e){var t=+e;return t!=t||0===t?0:Pn(t)},Ln=Dn,Bn=Math.max,Un=Math.min,Mn=function(e,t){var n=Ln(e);return n<0?Bn(n+t,0):Un(n,t)},xn=Dn,Fn=Math.min,$n=function(e){return e>0?Fn(xn(e),9007199254740991):0},Vn=$n,Hn=function(e){return Vn(e.length)},jn=X,Qn=Mn,Gn=Hn,Kn=function(e){return function(t,n,r){var o,i=jn(t),a=Gn(i),s=Qn(r,a);if(e&&n!=n){for(;a>s;)if((o=i[s++])!=o)return!0}else for(;a>s;s++)if((e||s in i)&&i[s]===n)return e||s||0;return!e&&-1}},Wn={includes:Kn(!0),indexOf:Kn(!1)},qn=Wn.includes;On({target:"Array",proto:!0,forced:r((function(){return!Array(1).includes()}))},{includes:function(e){return qn(this,e,arguments.length>1?arguments[1]:void 0)}});var zn=ne,Yn=function(e){return zn[e+"Prototype"]},Jn=Yn("Array").includes,Xn=te,Zn=y,er=At("match"),tr=function(e){var t;return Xn(e)&&(void 0!==(t=e[er])?!!t:"RegExp"==Zn(e))},nr=tr,rr=TypeError,or={};or[At("toStringTag")]="z";var ir="[object z]"===String(or),ar=ir,sr=R,cr=y,lr=At("toStringTag"),ur=Object,dr="Arguments"==cr(function(){return arguments}()),Ar=ar?cr:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=ur(e),lr))?n:dr?cr(t):"Object"==(r=cr(t))&&sr(t.callee)?"Arguments":r},pr=Ar,hr=String,fr=function(e){if("Symbol"===pr(e))throw TypeError("Cannot convert a Symbol value to a string");return hr(e)},gr=At("match"),mr=On,_r=function(e){if(nr(e))throw rr("The method doesn't accept regular expressions");return e},Er=z,vr=fr,yr=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[gr]=!1,"/./"[e](t)}catch(r){}}return!1},br=l("".indexOf);mr({target:"String",proto:!0,forced:!yr("includes")},{includes:function(e){return!!~br(vr(Er(this)),vr(_r(e)),arguments.length>1?arguments[1]:void 0)}});var Cr=Yn("String").includes,Sr=u,wr=Jn,Tr=Cr,Ir=Array.prototype,Rr=String.prototype,Or=n((function(e){var t=e.includes;return e===Ir||Sr(Ir,e)&&t===Ir.includes?wr:"string"==typeof e||e===Rr||Sr(Rr,e)&&t===Rr.includes?Tr:t})),Nr=ke,kr=ze,Pr=G,Dr=Hn,Lr=TypeError,Br=function(e){return function(t,n,r,o){Nr(n);var i=kr(t),a=Pr(i),s=Dr(i),c=e?s-1:0,l=e?-1:1;if(r<2)for(;;){if(c in a){o=a[c],c+=l;break}if(c+=l,e?c<0:s<=c)throw Lr("Reduce of empty array with no initial value")}for(;e?c>=0:s>c;c+=l)c in a&&(o=n(o,a[c],c,i));return o}},Ur={left:Br(!1),right:Br(!0)},Mr=r,xr=function(e,t){var n=[][e];return!!n&&Mr((function(){n.call(null,t||function(){return 1},1)}))},Fr="undefined"!=typeof process&&"process"==y(process),$r=Ur.left;On({target:"Array",proto:!0,forced:!Fr&&fe>79&&fe<83||!xr("reduce")},{reduce:function(e){var t=arguments.length;return $r(this,e,t,t>1?arguments[1]:void 0)}});var Vr=Yn("Array").reduce,Hr=u,jr=Vr,Qr=Array.prototype,Gr=function(e){var t=e.reduce;return e===Qr||Hr(Qr,e)&&t===Qr.reduce?jr:t},Kr=n(Gr);let Wr=!0,qr=!0;function zr(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function Yr(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,o=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return o.apply(this,arguments);const i=e=>{const t=n(e);t&&(r.handleEvent?r.handleEvent(t):r(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(r,i),o.apply(this,[e,i])};const i=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return i.apply(this,arguments);if(!this._eventMap[t].has(n))return i.apply(this,arguments);const r=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,i.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}function Jr(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(Wr=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function Xr(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(qr=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function Zr(){if("object"==typeof window){if(Wr)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function eo(e,t){qr&&console.warn(e+" is deprecated, please use "+t+" instead.")}function to(e){return"[object Object]"===Object.prototype.toString.call(e)}function no(e){var t;return to(e)?Kr(t=Object.keys(e)).call(t,(function(t,n){const r=to(e[n]),o=r?no(e[n]):e[n],i=r&&!Object.keys(o).length;return void 0===o||i?t:Object.assign(t,{[n]:o})}),{}):e}function ro(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),Object.keys(t).forEach((r=>{r.endsWith("Id")?ro(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach((t=>{ro(e,e.get(t),n)}))})))}function oo(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",o=new Map;if(null===t)return o;const i=[];return e.forEach((e=>{"track"===e.type&&e.trackIdentifier===t.id&&i.push(e)})),i.forEach((t=>{e.forEach((n=>{n.type===r&&n.trackId===t.id&&ro(e,n,o)}))})),o}var io=rt,ao=Ke("keys"),so=function(e){return ao[e]||(ao[e]=io(e))},co=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),lo=Xe,uo=R,Ao=ze,po=co,ho=so("IE_PROTO"),fo=Object,go=fo.prototype,mo=po?fo.getPrototypeOf:function(e){var t=Ao(e);if(lo(t,ho))return t[ho];var n=t.constructor;return uo(n)&&t instanceof n?n.prototype:t instanceof fo?go:null},_o=l,Eo=ke,vo=R,yo=String,bo=TypeError,Co=function(e,t,n){try{return _o(Eo(Object.getOwnPropertyDescriptor(e,t)[n]))}catch(r){}},So=nn,wo=function(e){if("object"==typeof e||vo(e))return e;throw bo("Can't set "+yo(e)+" as a prototype")},To=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Co(Object.prototype,"__proto__","set"))(n,[]),t=n instanceof Array}catch(r){}return function(n,r){return So(n),wo(r),t?e(n,r):n.__proto__=r,n}}():void 0),Io={},Ro={},Oo=Xe,No=X,ko=Wn.indexOf,Po=Ro,Do=l([].push),Lo=function(e,t){var n,r=No(e),o=0,i=[];for(n in r)!Oo(Po,n)&&Oo(r,n)&&Do(i,n);for(;t.length>o;)Oo(r,n=t[o++])&&(~ko(i,n)||Do(i,n));return i},Bo=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Uo=Lo,Mo=Bo.concat("length","prototype");Io.f=Object.getOwnPropertyNames||function(e){return Uo(e,Mo)};var xo={};xo.f=Object.getOwnPropertySymbols;var Fo=se,$o=Io,Vo=xo,Ho=nn,jo=l([].concat),Qo=Fo("Reflect","ownKeys")||function(e){var t=$o.f(Ho(e)),n=Vo.f;return n?jo(t,n(e)):t},Go=Xe,Ko=Qo,Wo=O,qo=Jt,zo={},Yo=Lo,Jo=Bo,Xo=Object.keys||function(e){return Yo(e,Jo)},Zo=N,ei=Xt,ti=Jt,ni=nn,ri=X,oi=Xo;zo.f=Zo&&!ei?Object.defineProperties:function(e,t){ni(e);for(var n,r=ri(t),o=oi(t),i=o.length,a=0;i>a;)ti.f(e,n=o[a++],r[n]);return e};var ii,ai=se("document","documentElement"),si=nn,ci=zo,li=Bo,ui=Ro,di=ai,Ai=Tt,pi="prototype",hi="script",fi=so("IE_PROTO"),gi=function(){},mi=function(e){return"<"+hi+">"+e+"</"+hi+">"},_i=function(e){e.write(mi("")),e.close();var t=e.parentWindow.Object;return e=null,t},Ei=function(){try{ii=new ActiveXObject("htmlfile")}catch(o){}var e,t,n;Ei="undefined"!=typeof document?document.domain&&ii?_i(ii):(t=Ai("iframe"),n="java"+hi+":",t.style.display="none",di.appendChild(t),t.src=String(n),(e=t.contentWindow.document).open(),e.write(mi("document.F=Object")),e.close(),e.F):_i(ii);for(var r=li.length;r--;)delete Ei[pi][li[r]];return Ei()};ui[fi]=!0;var vi=Object.create||function(e,t){var n;return null!==e?(gi[pi]=si(e),n=new gi,gi[pi]=null,n[fi]=e):n=Ei(),void 0===t?n:ci.f(n,t)},yi=te,bi=mn,Ci=Error,Si=l("".replace),wi=String(Ci("zxcasd").stack),Ti=/\n\s*at [^:]*:[^\n]*/,Ii=Ti.test(wi),Ri=$,Oi=!r((function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",Ri(1,7)),7!==e.stack)})),Ni=mn,ki=function(e,t){if(Ii&&"string"==typeof e&&!Ci.prepareStackTrace)for(;t--;)e=Si(e,Ti,"");return e},Pi=Oi,Di=Error.captureStackTrace,Li={},Bi=Li,Ui=At("iterator"),Mi=Array.prototype,xi=function(e){return void 0!==e&&(Bi.Array===e||Mi[Ui]===e)},Fi=Ar,$i=Le,Vi=K,Hi=Li,ji=At("iterator"),Qi=function(e){if(!Vi(e))return $i(e,ji)||$i(e,"@@iterator")||Hi[Fi(e)]},Gi=D,Ki=ke,Wi=nn,qi=Ie,zi=Qi,Yi=TypeError,Ji=function(e,t){var n=arguments.length<2?zi(e):t;if(Ki(n))return Wi(Gi(n,e));throw Yi(qi(e)+" is not iterable")},Xi=D,Zi=nn,ea=Le,ta=function(e,t,n){var r,o;Zi(e);try{if(!(r=ea(e,"return"))){if("throw"===t)throw n;return n}r=Xi(r,e)}catch(i){o=!0,r=i}if("throw"===t)throw n;if(o)throw r;return Zi(r),n},na=Yt,ra=D,oa=nn,ia=Ie,aa=xi,sa=Hn,ca=u,la=Ji,ua=Qi,da=ta,Aa=TypeError,pa=function(e,t){this.stopped=e,this.result=t},ha=pa.prototype,fa=function(e,t,n){var r,o,i,a,s,c,l,u=n&&n.that,d=!(!n||!n.AS_ENTRIES),A=!(!n||!n.IS_RECORD),p=!(!n||!n.IS_ITERATOR),h=!(!n||!n.INTERRUPTED),f=na(t,u),g=function(e){return r&&da(r,"normal",e),new pa(!0,e)},m=function(e){return d?(oa(e),h?f(e[0],e[1],g):f(e[0],e[1])):h?f(e,g):f(e)};if(A)r=e.iterator;else if(p)r=e;else{if(!(o=ua(e)))throw Aa(ia(e)+" is not iterable");if(aa(o)){for(i=0,a=sa(e);a>i;i++)if((s=m(e[i]))&&ca(ha,s))return s;return new pa(!1)}r=la(e,o)}for(c=A?e.next:r.next;!(l=ra(c,r)).done;){try{s=m(l.value)}catch(_){da(r,"throw",_)}if("object"==typeof s&&s&&ca(ha,s))return s}return new pa(!1)},ga=fr,ma=On,_a=u,Ea=mo,va=To,ya=function(e,t,n){for(var r=Ko(t),o=qo.f,i=Wo.f,a=0;a<r.length;a++){var s=r[a];Go(e,s)||n&&Go(n,s)||o(e,s,i(t,s))}},ba=vi,Ca=mn,Sa=$,wa=function(e,t){yi(t)&&"cause"in t&&bi(e,"cause",t.cause)},Ta=function(e,t,n,r){Pi&&(Di?Di(e,t):Ni(e,"stack",ki(n,r)))},Ia=fa,Ra=function(e,t){return void 0===e?arguments.length<2?"":t:ga(e)},Oa=At("toStringTag"),Na=Error,ka=[].push,Pa=function(e,t){var n,r=_a(Da,this);va?n=va(Na(),r?Ea(this):Da):(n=r?this:ba(Da),Ca(n,Oa,"Error")),void 0!==t&&Ca(n,"message",Ra(t)),Ta(n,Pa,n.stack,1),arguments.length>2&&wa(n,arguments[2]);var o=[];return Ia(e,ka,{that:o}),Ca(n,"errors",o),n};va?va(Pa,Na):ya(Pa,Na,{name:!0});var Da=Pa.prototype=ba(Na.prototype,{constructor:Sa(1,Pa),message:Sa(1,""),name:Sa(1,"AggregateError")});ma({global:!0,constructor:!0,arity:2},{AggregateError:Pa});var La,Ba,Ua,Ma=R,xa=A.WeakMap,Fa=Ma(xa)&&/native code/.test(String(xa)),$a=A,Va=te,Ha=mn,ja=Xe,Qa=Qe,Ga=so,Ka=Ro,Wa="Object already initialized",qa=$a.TypeError,za=$a.WeakMap;if(Fa||Qa.state){var Ya=Qa.state||(Qa.state=new za);Ya.get=Ya.get,Ya.has=Ya.has,Ya.set=Ya.set,La=function(e,t){if(Ya.has(e))throw qa(Wa);return t.facade=e,Ya.set(e,t),t},Ba=function(e){return Ya.get(e)||{}},Ua=function(e){return Ya.has(e)}}else{var Ja=Ga("state");Ka[Ja]=!0,La=function(e,t){if(ja(e,Ja))throw qa(Wa);return t.facade=e,Ha(e,Ja,t),t},Ba=function(e){return ja(e,Ja)?e[Ja]:{}},Ua=function(e){return ja(e,Ja)}}var Xa,Za,es,ts={set:La,get:Ba,has:Ua,enforce:function(e){return Ua(e)?Ba(e):La(e,{})},getterFor:function(e){return function(t){var n;if(!Va(t)||(n=Ba(t)).type!==e)throw qa("Incompatible receiver, "+e+" required");return n}}},ns=N,rs=Xe,os=Function.prototype,is=ns&&Object.getOwnPropertyDescriptor,as=rs(os,"name"),ss={EXISTS:as,PROPER:as&&"something"===function(){}.name,CONFIGURABLE:as&&(!ns||ns&&is(os,"name").configurable)},cs=mn,ls=function(e,t,n,r){return r&&r.enumerable?e[t]=n:cs(e,t,n),e},us=r,ds=R,As=te,ps=vi,hs=mo,fs=ls,gs=At("iterator"),ms=!1;[].keys&&("next"in(es=[].keys())?(Za=hs(hs(es)))!==Object.prototype&&(Xa=Za):ms=!0);var _s=!As(Xa)||us((function(){var e={};return Xa[gs].call(e)!==e}));ds((Xa=_s?{}:ps(Xa))[gs])||fs(Xa,gs,(function(){return this}));var Es={IteratorPrototype:Xa,BUGGY_SAFARI_ITERATORS:ms},vs=Ar,ys=ir?{}.toString:function(){return"[object "+vs(this)+"]"},bs=ir,Cs=Jt.f,Ss=mn,ws=Xe,Ts=ys,Is=At("toStringTag"),Rs=function(e,t,n,r){if(e){var o=n?e:e.prototype;ws(o,Is)||Cs(o,Is,{configurable:!0,value:t}),r&&!bs&&Ss(o,"toString",Ts)}},Os=Es.IteratorPrototype,Ns=vi,ks=$,Ps=Rs,Ds=Li,Ls=function(){return this},Bs=function(e,t,n,r){var o=t+" Iterator";return e.prototype=Ns(Os,{next:ks(+!r,n)}),Ps(e,o,!1,!0),Ds[o]=Ls,e},Us=On,Ms=D,xs=Bs,Fs=mo,$s=Rs,Vs=ls,Hs=Li,js=Es,Qs=ss.PROPER,Gs=js.BUGGY_SAFARI_ITERATORS,Ks=At("iterator"),Ws="keys",qs="values",zs="entries",Ys=function(){return this},Js=function(e,t,n,r,o,i,a){xs(n,t,r);var s,c,l,u=function(e){if(e===o&&f)return f;if(!Gs&&e in p)return p[e];switch(e){case Ws:case qs:case zs:return function(){return new n(this,e)}}return function(){return new n(this)}},d=t+" Iterator",A=!1,p=e.prototype,h=p[Ks]||p["@@iterator"]||o&&p[o],f=!Gs&&h||u(o),g="Array"==t&&p.entries||h;if(g&&(s=Fs(g.call(new e)))!==Object.prototype&&s.next&&($s(s,d,!0,!0),Hs[d]=Ys),Qs&&o==qs&&h&&h.name!==qs&&(A=!0,f=function(){return Ms(h,this)}),o)if(c={values:u(qs),keys:i?f:u(Ws),entries:u(zs)},a)for(l in c)(Gs||A||!(l in p))&&Vs(p,l,c[l]);else Us({target:t,proto:!0,forced:Gs||A},c);return a&&p[Ks]!==f&&Vs(p,Ks,f,{name:o}),Hs[t]=f,c},Xs=function(e,t){return{value:e,done:t}},Zs=X,ec=Li,tc=ts;Jt.f;var nc=Js,rc=Xs,oc="Array Iterator",ic=tc.set,ac=tc.getterFor(oc);nc(Array,"Array",(function(e,t){ic(this,{type:oc,target:Zs(e),index:0,kind:t})}),(function(){var e=ac(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,rc(void 0,!0)):rc("keys"==n?r:"values"==n?t[r]:[r,t[r]],!1)}),"values"),ec.Arguments=ec.Array;var sc=Jt,cc=function(e,t,n){return sc.f(e,t,n)},lc=se,uc=cc,dc=N,Ac=At("species"),pc=u,hc=TypeError,fc=function(e,t){if(pc(t,e))return e;throw hc("Incorrect invocation")},gc=R,mc=Qe,_c=l(Function.toString);gc(mc.inspectSource)||(mc.inspectSource=function(e){return _c(e)});var Ec=mc.inspectSource,vc=l,yc=r,bc=R,Cc=Ar,Sc=Ec,wc=function(){},Tc=[],Ic=se("Reflect","construct"),Rc=/^\s*(?:class|function)\b/,Oc=vc(Rc.exec),Nc=!Rc.exec(wc),kc=function(e){if(!bc(e))return!1;try{return Ic(wc,Tc,e),!0}catch(t){return!1}},Pc=function(e){if(!bc(e))return!1;switch(Cc(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Nc||!!Oc(Rc,Sc(e))}catch(t){return!0}};Pc.sham=!0;var Dc,Lc,Bc,Uc,Mc=!Ic||yc((function(){var e;return kc(kc.call)||!kc(Object)||!kc((function(){e=!0}))||e}))?Pc:kc,xc=Mc,Fc=Ie,$c=TypeError,Vc=nn,Hc=function(e){if(xc(e))return e;throw $c(Fc(e)+" is not a constructor")},jc=K,Qc=At("species"),Gc=function(e,t){var n,r=Vc(e).constructor;return void 0===r||jc(n=Vc(r)[Qc])?t:Hc(n)},Kc=l([].slice),Wc=TypeError,qc=function(e,t){if(e<t)throw Wc("Not enough arguments");return e},zc=/(?:ipad|iphone|ipod).*applewebkit/i.test(ce),Yc=A,Jc=m,Xc=Yt,Zc=R,el=Xe,tl=r,nl=ai,rl=Kc,ol=Tt,il=qc,al=zc,sl=Fr,cl=Yc.setImmediate,ll=Yc.clearImmediate,ul=Yc.process,dl=Yc.Dispatch,Al=Yc.Function,pl=Yc.MessageChannel,hl=Yc.String,fl=0,gl={},ml="onreadystatechange";tl((function(){Dc=Yc.location}));var _l=function(e){if(el(gl,e)){var t=gl[e];delete gl[e],t()}},El=function(e){return function(){_l(e)}},vl=function(e){_l(e.data)},yl=function(e){Yc.postMessage(hl(e),Dc.protocol+"//"+Dc.host)};cl&&ll||(cl=function(e){il(arguments.length,1);var t=Zc(e)?e:Al(e),n=rl(arguments,1);return gl[++fl]=function(){Jc(t,void 0,n)},Lc(fl),fl},ll=function(e){delete gl[e]},sl?Lc=function(e){ul.nextTick(El(e))}:dl&&dl.now?Lc=function(e){dl.now(El(e))}:pl&&!al?(Uc=(Bc=new pl).port2,Bc.port1.onmessage=vl,Lc=Xc(Uc.postMessage,Uc)):Yc.addEventListener&&Zc(Yc.postMessage)&&!Yc.importScripts&&Dc&&"file:"!==Dc.protocol&&!tl(yl)?(Lc=yl,Yc.addEventListener("message",vl,!1)):Lc=ml in ol("script")?function(e){nl.appendChild(ol("script"))[ml]=function(){nl.removeChild(this),_l(e)}}:function(e){setTimeout(El(e),0)});var bl={set:cl,clear:ll},Cl=function(){this.head=null,this.tail=null};Cl.prototype={add:function(e){var t={item:e,next:null},n=this.tail;n?n.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return null===(this.head=e.next)&&(this.tail=null),e.item}};var Sl,wl,Tl,Il,Rl,Ol=Cl,Nl=/ipad|iphone|ipod/i.test(ce)&&"undefined"!=typeof Pebble,kl=/web0s(?!.*chrome)/i.test(ce),Pl=A,Dl=Yt,Ll=O.f,Bl=bl.set,Ul=Ol,Ml=zc,xl=Nl,Fl=kl,$l=Fr,Vl=Pl.MutationObserver||Pl.WebKitMutationObserver,Hl=Pl.document,jl=Pl.process,Ql=Pl.Promise,Gl=Ll(Pl,"queueMicrotask"),Kl=Gl&&Gl.value;if(!Kl){var Wl=new Ul,ql=function(){var e,t;for($l&&(e=jl.domain)&&e.exit();t=Wl.get();)try{t()}catch(n){throw Wl.head&&Sl(),n}e&&e.enter()};Ml||$l||Fl||!Vl||!Hl?!xl&&Ql&&Ql.resolve?((Il=Ql.resolve(void 0)).constructor=Ql,Rl=Dl(Il.then,Il),Sl=function(){Rl(ql)}):$l?Sl=function(){jl.nextTick(ql)}:(Bl=Dl(Bl,Pl),Sl=function(){Bl(ql)}):(wl=!0,Tl=Hl.createTextNode(""),new Vl(ql).observe(Tl,{characterData:!0}),Sl=function(){Tl.data=wl=!wl}),Kl=function(e){Wl.head||Sl(),Wl.add(e)}}var zl=Kl,Yl=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}},Jl=A.Promise,Xl="object"==typeof Deno&&Deno&&"object"==typeof Deno.version,Zl=!Xl&&!Fr&&"object"==typeof window&&"object"==typeof document,eu=A,tu=Jl,nu=R,ru=Kt,ou=Ec,iu=At,au=Zl,su=Xl,cu=fe,lu=tu&&tu.prototype,uu=iu("species"),du=!1,Au=nu(eu.PromiseRejectionEvent),pu={CONSTRUCTOR:ru("Promise",(function(){var e=ou(tu),t=e!==String(tu);if(!t&&66===cu)return!0;if(!lu.catch||!lu.finally)return!0;if(!cu||cu<51||!/native code/.test(e)){var n=new tu((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))};if((n.constructor={})[uu]=r,!(du=n.then((function(){}))instanceof r))return!0}return!t&&(au||su)&&!Au})),REJECTION_EVENT:Au,SUBCLASSING:du},hu={},fu=ke,gu=TypeError,mu=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw gu("Bad Promise constructor");t=e,n=r})),this.resolve=fu(t),this.reject=fu(n)};hu.f=function(e){return new mu(e)};var _u,Eu,vu=On,yu=Fr,bu=A,Cu=D,Su=ls,wu=Rs,Tu=function(e){var t=lc(e);dc&&t&&!t[Ac]&&uc(t,Ac,{configurable:!0,get:function(){return this}})},Iu=ke,Ru=R,Ou=te,Nu=fc,ku=Gc,Pu=bl.set,Du=zl,Lu=function(e,t){try{1==arguments.length?console.error(e):console.error(e,t)}catch(n){}},Bu=Yl,Uu=Ol,Mu=ts,xu=Jl,Fu=pu,$u=hu,Vu="Promise",Hu=Fu.CONSTRUCTOR,ju=Fu.REJECTION_EVENT,Qu=Mu.getterFor(Vu),Gu=Mu.set,Ku=xu&&xu.prototype,Wu=xu,qu=Ku,zu=bu.TypeError,Yu=bu.document,Ju=bu.process,Xu=$u.f,Zu=Xu,ed=!!(Yu&&Yu.createEvent&&bu.dispatchEvent),td="unhandledrejection",nd=function(e){var t;return!(!Ou(e)||!Ru(t=e.then))&&t},rd=function(e,t){var n,r,o,i=t.value,a=1==t.state,s=a?e.ok:e.fail,c=e.resolve,l=e.reject,u=e.domain;try{s?(a||(2===t.rejection&&cd(t),t.rejection=1),!0===s?n=i:(u&&u.enter(),n=s(i),u&&(u.exit(),o=!0)),n===e.promise?l(zu("Promise-chain cycle")):(r=nd(n))?Cu(r,n,c,l):c(n)):l(i)}catch(d){u&&!o&&u.exit(),l(d)}},od=function(e,t){e.notified||(e.notified=!0,Du((function(){for(var n,r=e.reactions;n=r.get();)rd(n,e);e.notified=!1,t&&!e.rejection&&ad(e)})))},id=function(e,t,n){var r,o;ed?((r=Yu.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),bu.dispatchEvent(r)):r={promise:t,reason:n},!ju&&(o=bu["on"+e])?o(r):e===td&&Lu("Unhandled promise rejection",n)},ad=function(e){Cu(Pu,bu,(function(){var t,n=e.facade,r=e.value;if(sd(e)&&(t=Bu((function(){yu?Ju.emit("unhandledRejection",r,n):id(td,n,r)})),e.rejection=yu||sd(e)?2:1,t.error))throw t.value}))},sd=function(e){return 1!==e.rejection&&!e.parent},cd=function(e){Cu(Pu,bu,(function(){var t=e.facade;yu?Ju.emit("rejectionHandled",t):id("rejectionhandled",t,e.value)}))},ld=function(e,t,n){return function(r){e(t,r,n)}},ud=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,od(e,!0))},dd=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw zu("Promise can't be resolved itself");var r=nd(t);r?Du((function(){var n={done:!1};try{Cu(r,t,ld(dd,n,e),ld(ud,n,e))}catch(o){ud(n,o,e)}})):(e.value=t,e.state=1,od(e,!1))}catch(o){ud({done:!1},o,e)}}};Hu&&(qu=(Wu=function(e){Nu(this,qu),Iu(e),Cu(_u,this);var t=Qu(this);try{e(ld(dd,t),ld(ud,t))}catch(n){ud(t,n)}}).prototype,(_u=function(e){Gu(this,{type:Vu,done:!1,notified:!1,parent:!1,reactions:new Uu,rejection:!1,state:0,value:void 0})}).prototype=Su(qu,"then",(function(e,t){var n=Qu(this),r=Xu(ku(this,Wu));return n.parent=!0,r.ok=!Ru(e)||e,r.fail=Ru(t)&&t,r.domain=yu?Ju.domain:void 0,0==n.state?n.reactions.add(r):Du((function(){rd(r,n)})),r.promise})),Eu=function(){var e=new _u,t=Qu(e);this.promise=e,this.resolve=ld(dd,t),this.reject=ld(ud,t)},$u.f=Xu=function(e){return e===Wu||void 0===e?new Eu(e):Zu(e)}),vu({global:!0,constructor:!0,wrap:!0,forced:Hu},{Promise:Wu}),wu(Wu,Vu,!1,!0),Tu(Vu);var Ad=At("iterator"),pd=!1;try{var hd=0,fd={next:function(){return{done:!!hd++}},return:function(){pd=!0}};fd[Ad]=function(){return this},Array.from(fd,(function(){throw 2}))}catch(mp){}var gd=Jl,md=function(e,t){if(!pd)return!1;var n=!1;try{var r={};r[Ad]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(o){}return n},_d=pu.CONSTRUCTOR||!md((function(e){gd.all(e).then(void 0,(function(){}))})),Ed=D,vd=ke,yd=hu,bd=Yl,Cd=fa;On({target:"Promise",stat:!0,forced:_d},{all:function(e){var t=this,n=yd.f(t),r=n.resolve,o=n.reject,i=bd((function(){var n=vd(t.resolve),i=[],a=0,s=1;Cd(e,(function(e){var c=a++,l=!1;s++,Ed(n,t,e).then((function(e){l||(l=!0,i[c]=e,--s||r(i))}),o)})),--s||r(i)}));return i.error&&o(i.value),n.promise}});var Sd=On,wd=pu.CONSTRUCTOR;Jl&&Jl.prototype,Sd({target:"Promise",proto:!0,forced:wd,real:!0},{catch:function(e){return this.then(void 0,e)}});var Td=D,Id=ke,Rd=hu,Od=Yl,Nd=fa;On({target:"Promise",stat:!0,forced:_d},{race:function(e){var t=this,n=Rd.f(t),r=n.reject,o=Od((function(){var o=Id(t.resolve);Nd(e,(function(e){Td(o,t,e).then(n.resolve,r)}))}));return o.error&&r(o.value),n.promise}});var kd=D,Pd=hu;On({target:"Promise",stat:!0,forced:pu.CONSTRUCTOR},{reject:function(e){var t=Pd.f(this);return kd(t.reject,void 0,e),t.promise}});var Dd=nn,Ld=te,Bd=hu,Ud=function(e,t){if(Dd(e),Ld(t)&&t.constructor===e)return t;var n=Bd.f(e);return(0,n.resolve)(t),n.promise},Md=On,xd=Jl,Fd=pu.CONSTRUCTOR,$d=Ud,Vd=se("Promise"),Hd=!Fd;Md({target:"Promise",stat:!0,forced:!0},{resolve:function(e){return $d(Hd&&this===Vd?xd:this,e)}});var jd=D,Qd=ke,Gd=hu,Kd=Yl,Wd=fa;On({target:"Promise",stat:!0,forced:_d},{allSettled:function(e){var t=this,n=Gd.f(t),r=n.resolve,o=n.reject,i=Kd((function(){var n=Qd(t.resolve),o=[],i=0,a=1;Wd(e,(function(e){var s=i++,c=!1;a++,jd(n,t,e).then((function(e){c||(c=!0,o[s]={status:"fulfilled",value:e},--a||r(o))}),(function(e){c||(c=!0,o[s]={status:"rejected",reason:e},--a||r(o))}))})),--a||r(o)}));return i.error&&o(i.value),n.promise}});var qd=D,zd=ke,Yd=se,Jd=hu,Xd=Yl,Zd=fa,eA="No one promise resolved";On({target:"Promise",stat:!0,forced:_d},{any:function(e){var t=this,n=Yd("AggregateError"),r=Jd.f(t),o=r.resolve,i=r.reject,a=Xd((function(){var r=zd(t.resolve),a=[],s=0,c=1,l=!1;Zd(e,(function(e){var u=s++,d=!1;c++,qd(r,t,e).then((function(e){d||l||(l=!0,o(e))}),(function(e){d||l||(d=!0,a[u]=e,--c||i(new n(a,eA)))}))})),--c||i(new n(a,eA))}));return a.error&&i(a.value),r.promise}});var tA=On,nA=Jl,rA=r,oA=se,iA=R,aA=Gc,sA=Ud,cA=nA&&nA.prototype;tA({target:"Promise",proto:!0,real:!0,forced:!!nA&&rA((function(){cA.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=aA(this,oA("Promise")),n=iA(e);return this.then(n?function(n){return sA(t,e()).then((function(){return n}))}:e,n?function(n){return sA(t,e()).then((function(){throw n}))}:e)}});var lA=l,uA=Dn,dA=fr,AA=z,pA=lA("".charAt),hA=lA("".charCodeAt),fA=lA("".slice),gA=function(e){return function(t,n){var r,o,i=dA(AA(t)),a=uA(n),s=i.length;return a<0||a>=s?e?"":void 0:(r=hA(i,a))<55296||r>56319||a+1===s||(o=hA(i,a+1))<56320||o>57343?e?pA(i,a):r:e?fA(i,a,a+2):o-56320+(r-55296<<10)+65536}},mA={codeAt:gA(!1),charAt:gA(!0)},_A=mA.charAt,EA=fr,vA=ts,yA=Js,bA=Xs,CA="String Iterator",SA=vA.set,wA=vA.getterFor(CA);yA(String,"String",(function(e){SA(this,{type:CA,string:EA(e),index:0})}),(function(){var e,t=wA(this),n=t.string,r=t.index;return r>=n.length?bA(void 0,!0):(e=_A(n,r),t.index+=e.length,bA(e,!1))}));var TA=ne.Promise,IA={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},RA=A,OA=Ar,NA=mn,kA=Li,PA=At("toStringTag");for(var DA in IA){var LA=RA[DA],BA=LA&&LA.prototype;BA&&OA(BA)!==PA&&NA(BA,PA,DA),kA[DA]=kA.Array}var UA=TA,MA=n(UA);const xA=Zr;function FA(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const r=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;const t={};return Object.keys(e).forEach((n=>{if("require"===n||"advanced"===n||"mediaSource"===n)return;const r="object"==typeof e[n]?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);const o=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];let e={};"number"==typeof r.ideal?(e[o("min",n)]=r.ideal,t.optional.push(e),e={},e[o("max",n)]=r.ideal,t.optional.push(e)):(e[o("",n)]=r.ideal,t.optional.push(e))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[o("",n)]=r.exact):["min","max"].forEach((e=>{void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[o(e,n)]=r[e])}))})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},o=function(e,o){if(t.version>=61)return o(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"==typeof e.audio){const t=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};t((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),t(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=r(e.audio)}if(e&&"object"==typeof e.video){let i=e.video.facingMode;i=i&&("object"==typeof i?i:{ideal:i});const a=t.version<66;if(i&&("user"===i.exact||"environment"===i.exact||"user"===i.ideal||"environment"===i.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||a)){let t;if(delete e.video.facingMode,"environment"===i.exact||"environment"===i.ideal?t=["back","rear"]:"user"!==i.exact&&"user"!==i.ideal||(t=["front"]),t)return n.mediaDevices.enumerateDevices().then((n=>{let a=(n=n.filter((e=>"videoinput"===e.kind))).find((e=>t.some((t=>{var n;return Or(n=e.label.toLowerCase()).call(n,t)}))));return!a&&n.length&&Or(t).call(t,"back")&&(a=n[n.length-1]),a&&(e.video.deviceId=i.exact?{exact:a.deviceId}:{ideal:a.deviceId}),e.video=r(e.video),xA("chrome: "+JSON.stringify(e)),o(e)}))}e.video=r(e.video)}return xA("chrome: "+JSON.stringify(e)),o(e)},i=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(n.getUserMedia=function(e,t,r){o(e,(e=>{n.webkitGetUserMedia(e,t,(e=>{r&&r(i(e))}))}))}.bind(n),n.mediaDevices.getUserMedia){const e=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(t){return o(t,(t=>e(t).then((e=>{if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach((e=>{e.stop()})),new DOMException("","NotFoundError");return e}),(e=>MA.reject(i(e))))))}}}function $A(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function VA(e){if("object"==typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener("addtrack",(n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===n.track.id)):{track:n.track};const o=new Event("track");o.track=n.track,o.receiver=r,o.transceiver={receiver:r},o.streams=[t.stream],this.dispatchEvent(o)})),t.stream.getTracks().forEach((n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===n.id)):{track:n};const o=new Event("track");o.track=n,o.receiver=r,o.transceiver={receiver:r},o.streams=[t.stream],this.dispatchEvent(o)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else Yr(e,"track",(e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e)))}function HA(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){let o=n.apply(this,arguments);return o||(o=t(this,e),this._senders.push(o)),o};const r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){r.apply(this,arguments);const t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._senders=this._senders||[],n.apply(this,[e]),e.getTracks().forEach((e=>{this._senders.push(t(this,e))}))};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._senders=this._senders||[],r.apply(this,[e]),e.getTracks().forEach((e=>{const t=this._senders.find((t=>t.track===e));t&&this._senders.splice(this._senders.indexOf(t),1)}))}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function jA(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,n,r]=arguments;if(arguments.length>0&&"function"==typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof e))return t.apply(this,[]);const o=function(e){const t={};return e.result().forEach((e=>{const n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((t=>{n[t]=e.stat(t)})),t[n.id]=n})),t},i=function(e){return new Map(Object.keys(e).map((t=>[t,e[t]])))};if(arguments.length>=2){const r=function(e){n(i(o(e)))};return t.apply(this,[r,e])}return new MA(((e,n)=>{t.apply(this,[function(t){e(i(o(t)))},n])})).then(n,r)}}function QA(e){if(!("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>oo(t,e.track,!0)))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),Yr(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>oo(t,e.track,!1)))}}if(!("getStats"in e.RTCRtpSender.prototype)||!("getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const e=arguments[0];let t,n,r;return this.getSenders().forEach((n=>{n.track===e&&(t?r=!0:t=n)})),this.getReceivers().forEach((t=>(t.track===e&&(n?r=!0:n=t),t.track===e))),r||t&&n?MA.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():n?n.getStats():MA.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function GA(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((e=>this._shimmedLocalStreams[e][0]))};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")}));const t=this.getSenders();n.apply(this,arguments);const r=this.getSenders().filter((e=>-1===t.indexOf(e)));this._shimmedLocalStreams[e.id]=[e].concat(r)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};const o=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((t=>{const n=this._shimmedLocalStreams[t].indexOf(e);-1!==n&&this._shimmedLocalStreams[t].splice(n,1),1===this._shimmedLocalStreams[t].length&&delete this._shimmedLocalStreams[t]})),o.apply(this,arguments)}}function KA(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return GA(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const e=n.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map((e=>this._reverseStreams[e.id]))};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){const n=new e.MediaStream(t.getTracks());this._streams[t.id]=n,this._reverseStreams[n.id]=t,t=n}r.apply(this,[t])};const o=e.RTCPeerConnection.prototype.removeStream;function i(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const r=e._reverseStreams[t],o=e._streams[r.id];n=n.replace(new RegExp(o.id,"g"),r.id)})),new RTCSessionDescription({type:t.type,sdp:n})}e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},o.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const r=[].slice.call(arguments,1);if(1!==r.length||!r[0].getTracks().find((e=>e===t)))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find((e=>e.track===t)))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const o=this._streams[n.id];if(o)o.addTrack(t),MA.resolve().then((()=>{this.dispatchEvent(new Event("negotiationneeded"))}));else{const r=new e.MediaStream([t]);this._streams[n.id]=r,this._reverseStreams[r.id]=n,this.addStream(r)}return this.getSenders().find((e=>e.track===t))},["createOffer","createAnswer"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){const e=arguments;return arguments.length&&"function"==typeof arguments[0]?n.apply(this,[t=>{const n=i(this,t);e[0].apply(null,[n])},t=>{e[1]&&e[1].apply(null,t)},arguments[2]]):n.apply(this,arguments).then((e=>i(this,e)))}};e.RTCPeerConnection.prototype[t]=r[t]}));const a=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const r=e._reverseStreams[t],o=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),o.id)})),new RTCSessionDescription({type:t.type,sdp:n})}(this,arguments[0]),a.apply(this,arguments)):a.apply(this,arguments)};const s=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const e=s.get.apply(this);return""===e.type?e:i(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let t;this._streams=this._streams||{},Object.keys(this._streams).forEach((n=>{this._streams[n].getTracks().find((t=>e.track===t))&&(t=this._streams[n])})),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function WA(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=r[t]}))}function qA(e,t){Yr(e,"negotiationneeded",(e=>{const n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e}))}var zA=Object.freeze({__proto__:null,fixNegotiationNeeded:qA,shimAddTrackRemoveTrack:KA,shimAddTrackRemoveTrackWithNative:GA,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then((t=>{const r=n.video&&n.video.width,o=n.video&&n.video.height,i=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:i||3}},r&&(n.video.mandatory.maxWidth=r),o&&(n.video.mandatory.maxHeight=o),e.navigator.mediaDevices.getUserMedia(n)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))},shimGetSendersWithDtmf:HA,shimGetStats:jA,shimGetUserMedia:FA,shimMediaStream:$A,shimOnTrack:VA,shimPeerConnection:WA,shimSenderReceiverGetStats:QA});function YA(e,t){const n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,r){eo("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,r)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const e=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},t=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(n){return"object"==typeof n&&"object"==typeof n.audio&&(n=JSON.parse(JSON.stringify(n)),e(n.audio,"autoGainControl","mozAutoGainControl"),e(n.audio,"noiseSuppression","mozNoiseSuppression")),t(n)},r&&r.prototype.getSettings){const t=r.prototype.getSettings;r.prototype.getSettings=function(){const n=t.apply(this,arguments);return e(n,"mozAutoGainControl","autoGainControl"),e(n,"mozNoiseSuppression","noiseSuppression"),n}}if(r&&r.prototype.applyConstraints){const t=r.prototype.applyConstraints;r.prototype.applyConstraints=function(n){return"audio"===this.kind&&"object"==typeof n&&(n=JSON.parse(JSON.stringify(n)),e(n,"autoGainControl","mozAutoGainControl"),e(n,"noiseSuppression","mozNoiseSuppression")),t.apply(this,[n])}}}}function JA(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function XA(e,t){if("object"!=typeof e||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=r[t]}));const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,o,i]=arguments;return r.apply(this,[e||null]).then((e=>{if(t.version<53&&!o)try{e.forEach((e=>{e.type=n[e.type]||e.type}))}catch(r){if("TypeError"!==r.name)throw r;e.forEach(((t,r)=>{e.set(r,Object.assign({},t,{type:n[t.type]||t.type}))}))}return e})).then(o,i)}}function ZA(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):MA.resolve(new Map)}}function ep(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),Yr(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function tp(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){eo("removeStream","removeTrack"),this.getSenders().forEach((t=>{var n;t.track&&Or(n=e.getTracks()).call(n,t.track)&&this.removeTrack(t)}))})}function np(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function rp(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let e=arguments[1]&&arguments[1].sendEncodings;void 0===e&&(e=[]),e=[...e];const n=e.length>0;n&&e.forEach((e=>{if("rid"in e&&!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));const r=t.apply(this,arguments);if(n){const{sender:t}=r,n=t.getParameters();(!("encodings"in n)||1===n.encodings.length&&0===Object.keys(n.encodings[0]).length)&&(n.encodings=e,t.sendEncodings=e,this.setParametersPromises.push(t.setParameters(n).then((()=>{delete t.sendEncodings})).catch((()=>{delete t.sendEncodings}))))}return r})}function op(e){if("object"!=typeof e||!e.RTCRtpSender)return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}function ip(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?MA.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}function ap(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?MA.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}var sp=Object.freeze({__proto__:null,shimAddTransceiver:rp,shimCreateAnswer:ap,shimCreateOffer:ip,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){const e=new DOMException("getDisplayMedia without video constraints is undefined");return e.name="NotFoundError",e.code=8,MA.reject(e)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})},shimGetParameters:op,shimGetUserMedia:YA,shimOnTrack:JA,shimPeerConnection:XA,shimRTCDataChannel:np,shimReceiverGetStats:ep,shimRemoveStream:tp,shimSenderGetStats:ZA});function cp(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var n;this._localStreams||(this._localStreams=[]),Or(n=this._localStreams).call(n,e)||this._localStreams.push(e),e.getAudioTracks().forEach((n=>t.call(this,n,e))),e.getVideoTracks().forEach((n=>t.call(this,n,e)))},e.RTCPeerConnection.prototype.addTrack=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r&&r.forEach((e=>{var t;this._localStreams?Or(t=this._localStreams).call(t,e)||this._localStreams.push(e):this._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(e);if(-1===t)return;this._localStreams.splice(t,1);const n=e.getTracks();this.getSenders().forEach((e=>{Or(n).call(n,e.track)&&this.removeTrack(e)}))})}}function lp(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=e=>{e.streams.forEach((e=>{var t;if(this._remoteStreams||(this._remoteStreams=[]),Or(t=this._remoteStreams).call(t,e))return;this._remoteStreams.push(e);const n=new Event("addstream");n.stream=e,this.dispatchEvent(n)}))})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((t=>{if(e._remoteStreams||(e._remoteStreams=[]),e._remoteStreams.indexOf(t)>=0)return;e._remoteStreams.push(t);const n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}))}),t.apply(e,arguments)}}}function up(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,o=t.setLocalDescription,i=t.setRemoteDescription,a=t.addIceCandidate;t.createOffer=function(e,t){const r=arguments.length>=2?arguments[2]:arguments[0],o=n.apply(this,[r]);return t?(o.then(e,t),MA.resolve()):o},t.createAnswer=function(e,t){const n=arguments.length>=2?arguments[2]:arguments[0],o=r.apply(this,[n]);return t?(o.then(e,t),MA.resolve()):o};let s=function(e,t,n){const r=o.apply(this,[e]);return n?(r.then(t,n),MA.resolve()):r};t.setLocalDescription=s,s=function(e,t,n){const r=i.apply(this,[e]);return n?(r.then(t,n),MA.resolve()):r},t.setRemoteDescription=s,s=function(e,t,n){const r=a.apply(this,[e]);return n?(r.then(t,n),MA.resolve()):r},t.addIceCandidate=s}function dp(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const e=t.mediaDevices,n=e.getUserMedia.bind(e);t.mediaDevices.getUserMedia=e=>n(Ap(e))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t))}function Ap(e){return e&&void 0!==e.video?Object.assign({},e,{video:no(e.video)}):e}function pp(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){const t=[];for(let n=0;n<e.iceServers.length;n++){let r=e.iceServers[n];!r.hasOwnProperty("urls")&&r.hasOwnProperty("url")?(eo("RTCIceServer.url","RTCIceServer.urls"),r=JSON.parse(JSON.stringify(r)),r.urls=r.url,delete r.url,t.push(r)):t.push(e.iceServers[n])}e.iceServers=t}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}function hp(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function fp(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);const t=this.getTransceivers().find((e=>"audio"===e.receiver.track.kind));!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio",{direction:"recvonly"}),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);const n=this.getTransceivers().find((e=>"video"===e.receiver.track.kind));!1===e.offerToReceiveVideo&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveVideo||n||this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function gp(e){"object"!=typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var mp,_p=Object.freeze({__proto__:null,shimAudioContext:gp,shimCallbacksAPI:up,shimConstraints:Ap,shimCreateOfferLegacy:fp,shimGetUserMedia:dp,shimLocalStreamsAPI:cp,shimRTCIceServerUrls:pp,shimRemoteStreamsAPI:lp,shimTrackEventTransceiver:hp}),Ep="\t\n\v\f\r \u2028\u2029\ufeff",vp=z,yp=fr,bp=Ep,Cp=l("".replace),Sp=RegExp("^["+bp+"]+"),wp=RegExp("(^|[^"+bp+"])["+bp+"]+$"),Tp=function(e){return function(t){var n=yp(vp(t));return 1&e&&(n=Cp(n,Sp,"")),2&e&&(n=Cp(n,wp,"$1")),n}},Ip={start:Tp(1),end:Tp(2),trim:Tp(3)},Rp=ss.PROPER,Op=r,Np=Ep,kp=Ip.trim;On({target:"String",proto:!0,forced:(mp="trim",Op((function(){return!!Np[mp]()||""!==""[mp]()||Rp&&Np[mp].name!==mp})))},{trim:function(){return kp(this)}});var Pp=Yn("String").trim,Dp=u,Lp=Pp,Bp=String.prototype,Up=n((function(e){var t=e.trim;return"string"==typeof e||e===Bp||Dp(Bp,e)&&t===Bp.trim?Lp:t})),Mp={exports:{}};!function(e){const t={generateIdentifier:function(){return Math.random().toString(36).substring(2,12)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split("\n").map((e=>e.trim()))},t.splitSections=function(e){return e.split("\nm=").map(((e,t)=>(t>0?"m="+e:e).trim()+"\r\n"))},t.getDescription=function(e){const n=t.splitSections(e);return n&&n[0]},t.getMediaSections=function(e){const n=t.splitSections(e);return n.shift(),n},t.matchPrefix=function(e,n){return t.splitLines(e).filter((e=>0===e.indexOf(n)))},t.parseCandidate=function(e){let t;t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" ");const n={foundation:t[0],component:{1:"rtp",2:"rtcp"}[t[1]]||t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]};for(let r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:void 0===n[t[r]]&&(n[t[r]]=t[r+1])}return n},t.writeCandidate=function(e){const t=[];t.push(e.foundation);const n=e.component;"rtp"===n?t.push(1):"rtcp"===n?t.push(2):t.push(n),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);const r=e.type;return t.push("typ"),t.push(r),"host"!==r&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substring(14).split(" ")},t.parseRtpMap=function(e){let t=e.substring(9).split(" ");const n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},t.writeRtpMap=function(e){let t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);const n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},t.parseExtmap=function(e){const t=e.substring(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1],attributes:t.slice(2).join(" ")}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+(e.attributes?" "+e.attributes:"")+"\r\n"},t.parseFmtp=function(e){const t={};let n;const r=e.substring(e.indexOf(" ")+1).split(";");for(let o=0;o<r.length;o++)n=r[o].trim().split("="),t[n[0].trim()]=n[1];return t},t.writeFmtp=function(e){let t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){const r=[];Object.keys(e.parameters).forEach((t=>{void 0!==e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)})),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){const t=e.substring(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){let t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((e=>{t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},t.parseSsrcMedia=function(e){const t=e.indexOf(" "),n={ssrc:parseInt(e.substring(7,t),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substring(t+1,r),n.value=e.substring(r+1)):n.attribute=e.substring(t+1),n},t.parseSsrcGroup=function(e){const t=e.substring(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((e=>parseInt(e,10)))}},t.getMid=function(e){const n=t.matchPrefix(e,"a=mid:")[0];if(n)return n.substring(6)},t.parseFingerprint=function(e){const t=e.substring(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1].toUpperCase()}},t.getDtlsParameters=function(e,n){return{role:"auto",fingerprints:t.matchPrefix(e+n,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){let n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((e=>{n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},t.parseCryptoLine=function(e){const t=e.substring(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;const t=e.substring(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},t.getCryptoParameters=function(e,n){return t.matchPrefix(e+n,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(e,n){const r=t.matchPrefix(e+n,"a=ice-ufrag:")[0],o=t.matchPrefix(e+n,"a=ice-pwd:")[0];return r&&o?{usernameFragment:r.substring(12),password:o.substring(10)}:null},t.writeIceParameters=function(e){let t="a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n";return e.iceLite&&(t+="a=ice-lite\r\n"),t},t.parseRtpParameters=function(e){const n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=t.splitLines(e)[0].split(" ");n.profile=r[2];for(let i=3;i<r.length;i++){const o=r[i],a=t.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(a){const r=t.parseRtpMap(a),i=t.matchPrefix(e,"a=fmtp:"+o+" ");switch(r.parameters=i.length?t.parseFmtp(i[0]):{},r.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+o+" ").map(t.parseRtcpFb),n.codecs.push(r),r.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(r.name.toUpperCase())}}}t.matchPrefix(e,"a=extmap:").forEach((e=>{n.headerExtensions.push(t.parseExtmap(e))}));const o=t.matchPrefix(e,"a=rtcp-fb:* ").map(t.parseRtcpFb);return n.codecs.forEach((e=>{o.forEach((t=>{e.rtcpFeedback.find((e=>e.type===t.type&&e.parameter===t.parameter))||e.rtcpFeedback.push(t)}))})),n},t.writeRtpDescription=function(e,n){let r="";r+="m="+e+" ",r+=n.codecs.length>0?"9":"0",r+=" "+(n.profile||"UDP/TLS/RTP/SAVPF")+" ",r+=n.codecs.map((e=>void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType)).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",n.codecs.forEach((e=>{r+=t.writeRtpMap(e),r+=t.writeFmtp(e),r+=t.writeRtcpFb(e)}));let o=0;return n.codecs.forEach((e=>{e.maxptime>o&&(o=e.maxptime)})),o>0&&(r+="a=maxptime:"+o+"\r\n"),n.headerExtensions&&n.headerExtensions.forEach((e=>{r+=t.writeExtmap(e)})),r},t.parseRtpEncodingParameters=function(e){const n=[],r=t.parseRtpParameters(e),o=-1!==r.fecMechanisms.indexOf("RED"),i=-1!==r.fecMechanisms.indexOf("ULPFEC"),a=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"cname"===e.attribute)),s=a.length>0&&a[0].ssrc;let c;const l=t.matchPrefix(e,"a=ssrc-group:FID").map((e=>e.substring(17).split(" ").map((e=>parseInt(e,10)))));l.length>0&&l[0].length>1&&l[0][0]===s&&(c=l[0][1]),r.codecs.forEach((e=>{if("RTX"===e.name.toUpperCase()&&e.parameters.apt){let t={ssrc:s,codecPayloadType:parseInt(e.parameters.apt,10)};s&&c&&(t.rtx={ssrc:c}),n.push(t),o&&(t=JSON.parse(JSON.stringify(t)),t.fec={ssrc:s,mechanism:i?"red+ulpfec":"red"},n.push(t))}})),0===n.length&&s&&n.push({ssrc:s});let u=t.matchPrefix(e,"b=");return u.length&&(u=0===u[0].indexOf("b=TIAS:")?parseInt(u[0].substring(7),10):0===u[0].indexOf("b=AS:")?1e3*parseInt(u[0].substring(5),10)*.95-16e3:void 0,n.forEach((e=>{e.maxBitrate=u}))),n},t.parseRtcpParameters=function(e){const n={},r=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"cname"===e.attribute))[0];r&&(n.cname=r.value,n.ssrc=r.ssrc);const o=t.matchPrefix(e,"a=rtcp-rsize");n.reducedSize=o.length>0,n.compound=0===o.length;const i=t.matchPrefix(e,"a=rtcp-mux");return n.mux=i.length>0,n},t.writeRtcpParameters=function(e){let t="";return e.reducedSize&&(t+="a=rtcp-rsize\r\n"),e.mux&&(t+="a=rtcp-mux\r\n"),void 0!==e.ssrc&&e.cname&&(t+="a=ssrc:"+e.ssrc+" cname:"+e.cname+"\r\n"),t},t.parseMsid=function(e){let n;const r=t.matchPrefix(e,"a=msid:");if(1===r.length)return n=r[0].substring(7).split(" "),{stream:n[0],track:n[1]};const o=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"msid"===e.attribute));return o.length>0?(n=o[0].value.split(" "),{stream:n[0],track:n[1]}):void 0},t.parseSctpDescription=function(e){const n=t.parseMLine(e),r=t.matchPrefix(e,"a=max-message-size:");let o;r.length>0&&(o=parseInt(r[0].substring(19),10)),isNaN(o)&&(o=65536);const i=t.matchPrefix(e,"a=sctp-port:");if(i.length>0)return{port:parseInt(i[0].substring(12),10),protocol:n.fmt,maxMessageSize:o};const a=t.matchPrefix(e,"a=sctpmap:");if(a.length>0){const e=a[0].substring(10).split(" ");return{port:parseInt(e[0],10),protocol:e[1],maxMessageSize:o}}},t.writeSctpDescription=function(e,t){let n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(e,n,r){let o;const i=void 0!==n?n:2;return o=e||t.generateSessionId(),"v=0\r\no="+(r||"thisisadapterortc")+" "+o+" "+i+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.getDirection=function(e,n){const r=t.splitLines(e);for(let t=0;t<r.length;t++)switch(r[t]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[t].substring(2)}return n?t.getDirection(n):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substring(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){const n=t.splitLines(e)[0].substring(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},t.parseOLine=function(e){const n=t.matchPrefix(e,"o=")[0].substring(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},t.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;const n=t.splitLines(e);for(let t=0;t<n.length;t++)if(n[t].length<2||"="!==n[t].charAt(1))return!1;return!0},e.exports=t}(Mp);var xp=Mp.exports,Fp=n(xp),$p=e({__proto__:null,default:Fp},[xp]);function Vp(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){const n=new t(e),r=Fp.parseCandidate(e.candidate),o=Object.assign(n,r);return o.toJSON=function(){return{candidate:o.candidate,sdpMid:o.sdpMid,sdpMLineIndex:o.sdpMLineIndex,usernameFragment:o.usernameFragment}},o}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,Yr(e,"icecandidate",(t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t)))}function Hp(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||Yr(e,"icecandidate",(e=>{if(e.candidate){const t=Fp.parseCandidate(e.candidate.candidate);"relay"===t.type&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[t.priority>>24])}return e}))}function jp(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const n=function(e){if(!e||!e.sdp)return!1;const t=Fp.splitSections(e.sdp);return t.shift(),t.some((e=>{const t=Fp.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))},r=function(e){const t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;const n=parseInt(t[1],10);return n!=n?-1:n},o=function(e){let n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n},i=function(e,n){let r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);const o=Fp.matchPrefix(e.sdp,"a=max-message-size:");return o.length>0?r=parseInt(o[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(r=2147483637),r},a=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){const{sdpSemantics:e}=this.getConfiguration();"plan-b"===e&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const e=r(arguments[0]),t=o(e),n=i(arguments[0],e);let a;a=0===t&&0===n?Number.POSITIVE_INFINITY:0===t||0===n?Math.max(t,n):Math.min(t,n);const s={};Object.defineProperty(s,"maxMessageSize",{get:()=>a}),this._sctp=s}return a.apply(this,arguments)}}function Qp(e){if(!e.RTCPeerConnection||!("createDataChannel"in e.RTCPeerConnection.prototype))return;function t(e,t){const n=e.send;e.send=function(){const r=arguments[0],o=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&o>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const e=n.apply(this,arguments);return t(e,this),e},Yr(e,"datachannel",(e=>(t(e.channel,e.target),e)))}function Gp(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((e=>{const n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{const t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;const n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}}))}function Kp(e,t){if(!e.RTCPeerConnection)return;if("chrome"===t.browser&&t.version>=71)return;if("safari"===t.browser&&t.version>=605)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){const n=t.sdp.split("\n").filter((e=>"a=extmap-allow-mixed"!==Up(e).call(e))).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:n}):t.sdp=n}return n.apply(this,arguments)}}function Wp(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?MA.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),MA.resolve())})}function qp(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype.setLocalDescription;n&&0!==n.length&&(e.RTCPeerConnection.prototype.setLocalDescription=function(){let e=arguments[0]||{};if("object"!=typeof e||e.type&&e.sdp)return n.apply(this,arguments);if(e={type:e.type,sdp:e.sdp},!e.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":e.type="offer";break;default:e.type="answer"}return e.sdp||"offer"!==e.type&&"answer"!==e.type?n.apply(this,[e]):("offer"===e.type?this.createOffer:this.createAnswer).apply(this).then((e=>n.apply(this,[e])))})}var zp=Object.freeze({__proto__:null,removeExtmapAllowMixed:Kp,shimAddIceCandidateNullOrEmpty:Wp,shimConnectionState:Gp,shimMaxMessageSize:jp,shimParameterlessSetLocalDescription:qp,shimRTCIceCandidate:Vp,shimRTCIceCandidateRelayProtocol:Hp,shimSendThrowTypeError:Qp});!function(){let{window:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const n=Zr,r=function(e){const t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.mozGetUserMedia)t.browser="firefox",t.version=zr(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=zr(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=zr(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}(e),o={browserDetails:r,commonShim:zp,extractVersion:zr,disableLog:Jr,disableWarnings:Xr,sdp:$p};switch(r.browser){case"chrome":if(!zA||!WA||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),o;if(null===r.version)return n("Chrome shim can not determine version, not shimming."),o;n("adapter.js shimming chrome."),o.browserShim=zA,Wp(e,r),qp(e),FA(e,r),$A(e),WA(e,r),VA(e),KA(e,r),HA(e),jA(e),QA(e),qA(e,r),Vp(e),Hp(e),Gp(e),jp(e,r),Qp(e),Kp(e,r);break;case"firefox":if(!sp||!XA||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),o;n("adapter.js shimming firefox."),o.browserShim=sp,Wp(e,r),qp(e),YA(e,r),XA(e,r),JA(e),tp(e),ZA(e),ep(e),np(e),rp(e),op(e),ip(e),ap(e),Vp(e),Gp(e),jp(e,r),Qp(e);break;case"safari":if(!_p||!t.shimSafari)return n("Safari shim is not included in this adapter release."),o;n("adapter.js shimming safari."),o.browserShim=_p,Wp(e,r),qp(e),pp(e),fp(e),up(e),cp(e),lp(e),hp(e),dp(e),gp(e),Vp(e),Hp(e),jp(e,r),Qp(e),Kp(e,r);break;default:n("Unsupported browser!")}}({window:"undefined"==typeof window?void 0:window});var Yp=Yn("Array").keys,Jp=Ar,Xp=Xe,Zp=u,eh=Yp,th=Array.prototype,nh={DOMTokenList:!0,NodeList:!0},rh=n((function(e){var t=e.keys;return e===th||Zp(th,e)&&t===th.keys||Xp(nh,Jp(e))?eh:t})),oh=Ie,ih=TypeError,ah=bt,sh=Jt,ch=$,lh=function(e,t,n){var r=ah(t);r in e?sh.f(e,r,ch(0,n)):e[r]=n},uh=Mn,dh=Hn,Ah=lh,ph=Array,hh=Math.max,fh=function(e,t,n){for(var r=dh(e),o=uh(t,r),i=uh(void 0===n?r:n,r),a=ph(hh(i-o,0)),s=0;o<i;o++,s++)Ah(a,s,e[o]);return a.length=s,a},gh=fh,mh=Math.floor,_h=function(e,t){var n=e.length,r=mh(n/2);return n<8?Eh(e,t):vh(e,_h(gh(e,0,r),t),_h(gh(e,r),t),t)},Eh=function(e,t){for(var n,r,o=e.length,i=1;i<o;){for(r=i,n=e[i];r&&t(e[r-1],n)>0;)e[r]=e[--r];r!==i++&&(e[r]=n)}return e},vh=function(e,t,n,r){for(var o=t.length,i=n.length,a=0,s=0;a<o||s<i;)e[a+s]=a<o&&s<i?r(t[a],n[s])<=0?t[a++]:n[s++]:a<o?t[a++]:n[s++];return e},yh=_h,bh=ce.match(/firefox\/(\d+)/i),Ch=!!bh&&+bh[1],Sh=/MSIE|Trident/.test(ce),wh=ce.match(/AppleWebKit\/(\d+)\./),Th=!!wh&&+wh[1],Ih=On,Rh=l,Oh=ke,Nh=ze,kh=Hn,Ph=function(e,t){if(!delete e[t])throw ih("Cannot delete property "+oh(t)+" of "+oh(e))},Dh=fr,Lh=r,Bh=yh,Uh=xr,Mh=Ch,xh=Sh,Fh=fe,$h=Th,Vh=[],Hh=Rh(Vh.sort),jh=Rh(Vh.push),Qh=Lh((function(){Vh.sort(void 0)})),Gh=Lh((function(){Vh.sort(null)})),Kh=Uh("sort"),Wh=!Lh((function(){if(Fh)return Fh<70;if(!(Mh&&Mh>3)){if(xh)return!0;if($h)return $h<603;var e,t,n,r,o="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)Vh.push({k:t+r,v:n})}for(Vh.sort((function(e,t){return t.v-e.v})),r=0;r<Vh.length;r++)t=Vh[r].k.charAt(0),o.charAt(o.length-1)!==t&&(o+=t);return"DGBEFHACIJK"!==o}}));Ih({target:"Array",proto:!0,forced:Qh||!Gh||!Kh||!Wh},{sort:function(e){void 0!==e&&Oh(e);var t=Nh(this);if(Wh)return void 0===e?Hh(t):Hh(t,e);var n,r,o=[],i=kh(t);for(r=0;r<i;r++)r in t&&jh(o,t[r]);for(Bh(o,function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:Dh(t)>Dh(n)?1:-1}}(e)),n=kh(o),r=0;r<n;)t[r]=o[r++];for(;r<i;)Ph(t,r++);return t}});var qh=Yn("Array").sort,zh=u,Yh=qh,Jh=Array.prototype,Xh=n((function(e){var t=e.sort;return e===Jh||zh(Jh,e)&&t===Jh.sort?Yh:t})),Zh={exports:{}};!function(e,n){!function(t,r){var o="function",i="undefined",a="object",s="string",c="major",l="model",u="name",d="type",A="vendor",p="version",h="architecture",f="console",g="mobile",m="tablet",_="smarttv",E="wearable",v="embedded",y="Amazon",b="Apple",C="ASUS",S="BlackBerry",w="Browser",T="Chrome",I="Firefox",R="Google",O="Huawei",N="LG",k="Microsoft",P="Motorola",D="Opera",L="Samsung",B="Sharp",U="Sony",M="Xiaomi",x="Zebra",F="Facebook",$="Chromium OS",V="Mac OS",H=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},j=function(e,t){return typeof e===s&&-1!==Q(t).indexOf(Q(e))},Q=function(e){return e.toLowerCase()},G=function(e,t){if(typeof e===s)return e=e.replace(/^\s\s*/,""),typeof t===i?e:e.substring(0,350)},K=function(e,t){for(var n,i,s,c,l,u,d=0;d<t.length&&!l;){var A=t[d],p=t[d+1];for(n=i=0;n<A.length&&!l&&A[n];)if(l=A[n++].exec(e))for(s=0;s<p.length;s++)u=l[++i],typeof(c=p[s])===a&&c.length>0?2===c.length?typeof c[1]==o?this[c[0]]=c[1].call(this,u):this[c[0]]=c[1]:3===c.length?typeof c[1]!==o||c[1].exec&&c[1].test?this[c[0]]=u?u.replace(c[1],c[2]):r:this[c[0]]=u?c[1].call(this,u,c[2]):r:4===c.length&&(this[c[0]]=u?c[3].call(this,u.replace(c[1],c[2])):r):this[c]=u||r;d+=2}},W=function(e,t){for(var n in t)if(typeof t[n]===a&&t[n].length>0){for(var o=0;o<t[n].length;o++)if(j(t[n][o],e))return"?"===n?r:n}else if(j(t[n],e))return"?"===n?r:n;return e},q={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},z={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[p,[u,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[p,[u,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[u,p],[/opios[\/ ]+([\w\.]+)/i],[p,[u,D+" Mini"]],[/\bopr\/([\w\.]+)/i],[p,[u,D]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[u,p],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[p,[u,"UC"+w]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[p,[u,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[p,[u,"WeChat"]],[/konqueror\/([\w\.]+)/i],[p,[u,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[p,[u,"IE"]],[/yabrowser\/([\w\.]+)/i],[p,[u,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[u,/(.+)/,"$1 Secure "+w],p],[/\bfocus\/([\w\.]+)/i],[p,[u,I+" Focus"]],[/\bopt\/([\w\.]+)/i],[p,[u,D+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[p,[u,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[p,[u,"Dolphin"]],[/coast\/([\w\.]+)/i],[p,[u,D+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[p,[u,"MIUI "+w]],[/fxios\/([-\w\.]+)/i],[p,[u,I]],[/\bqihu|(qi?ho?o?|360)browser/i],[[u,"360 "+w]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[u,/(.+)/,"$1 "+w],p],[/(comodo_dragon)\/([\w\.]+)/i],[[u,/_/g," "],p],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[u,p],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[u],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[u,F],p],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[u,p],[/\bgsa\/([\w\.]+) .*safari\//i],[p,[u,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[p,[u,T+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[u,T+" WebView"],p],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[p,[u,"Android "+w]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[u,p],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[p,[u,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[p,u],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[u,[p,W,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[u,p],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[u,"Netscape"],p],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[p,[u,I+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[u,p],[/(cobalt)\/([\w\.]+)/i],[u,[p,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[h,"amd64"]],[/(ia32(?=;))/i],[[h,Q]],[/((?:i[346]|x)86)[;\)]/i],[[h,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[h,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[h,"armhf"]],[/windows (ce|mobile); ppc;/i],[[h,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[h,/ower/,"",Q]],[/(sun4\w)[;\)]/i],[[h,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[h,Q]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[l,[A,L],[d,m]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[l,[A,L],[d,g]],[/\((ip(?:hone|od)[\w ]*);/i],[l,[A,b],[d,g]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[l,[A,b],[d,m]],[/(macintosh);/i],[l,[A,b]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[l,[A,B],[d,g]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[l,[A,O],[d,m]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[l,[A,O],[d,g]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[l,/_/g," "],[A,M],[d,g]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[l,/_/g," "],[A,M],[d,m]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[l,[A,"OPPO"],[d,g]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[l,[A,"Vivo"],[d,g]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[l,[A,"Realme"],[d,g]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[l,[A,P],[d,g]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[l,[A,P],[d,m]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[l,[A,N],[d,m]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[l,[A,N],[d,g]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[l,[A,"Lenovo"],[d,m]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[l,/_/g," "],[A,"Nokia"],[d,g]],[/(pixel c)\b/i],[l,[A,R],[d,m]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[l,[A,R],[d,g]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[l,[A,U],[d,g]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[l,"Xperia Tablet"],[A,U],[d,m]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[l,[A,"OnePlus"],[d,g]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[l,[A,y],[d,m]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[l,/(.+)/g,"Fire Phone $1"],[A,y],[d,g]],[/(playbook);[-\w\),; ]+(rim)/i],[l,A,[d,m]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[l,[A,S],[d,g]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[l,[A,C],[d,m]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[l,[A,C],[d,g]],[/(nexus 9)/i],[l,[A,"HTC"],[d,m]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[A,[l,/_/g," "],[d,g]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[l,[A,"Acer"],[d,m]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[l,[A,"Meizu"],[d,g]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[A,l,[d,g]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[A,l,[d,m]],[/(surface duo)/i],[l,[A,k],[d,m]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[l,[A,"Fairphone"],[d,g]],[/(u304aa)/i],[l,[A,"AT&T"],[d,g]],[/\bsie-(\w*)/i],[l,[A,"Siemens"],[d,g]],[/\b(rct\w+) b/i],[l,[A,"RCA"],[d,m]],[/\b(venue[\d ]{2,7}) b/i],[l,[A,"Dell"],[d,m]],[/\b(q(?:mv|ta)\w+) b/i],[l,[A,"Verizon"],[d,m]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[l,[A,"Barnes & Noble"],[d,m]],[/\b(tm\d{3}\w+) b/i],[l,[A,"NuVision"],[d,m]],[/\b(k88) b/i],[l,[A,"ZTE"],[d,m]],[/\b(nx\d{3}j) b/i],[l,[A,"ZTE"],[d,g]],[/\b(gen\d{3}) b.+49h/i],[l,[A,"Swiss"],[d,g]],[/\b(zur\d{3}) b/i],[l,[A,"Swiss"],[d,m]],[/\b((zeki)?tb.*\b) b/i],[l,[A,"Zeki"],[d,m]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[A,"Dragon Touch"],l,[d,m]],[/\b(ns-?\w{0,9}) b/i],[l,[A,"Insignia"],[d,m]],[/\b((nxa|next)-?\w{0,9}) b/i],[l,[A,"NextBook"],[d,m]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[A,"Voice"],l,[d,g]],[/\b(lvtel\-)?(v1[12]) b/i],[[A,"LvTel"],l,[d,g]],[/\b(ph-1) /i],[l,[A,"Essential"],[d,g]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[l,[A,"Envizen"],[d,m]],[/\b(trio[-\w\. ]+) b/i],[l,[A,"MachSpeed"],[d,m]],[/\btu_(1491) b/i],[l,[A,"Rotor"],[d,m]],[/(shield[\w ]+) b/i],[l,[A,"Nvidia"],[d,m]],[/(sprint) (\w+)/i],[A,l,[d,g]],[/(kin\.[onetw]{3})/i],[[l,/\./g," "],[A,k],[d,g]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[l,[A,x],[d,m]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[l,[A,x],[d,g]],[/smart-tv.+(samsung)/i],[A,[d,_]],[/hbbtv.+maple;(\d+)/i],[[l,/^/,"SmartTV"],[A,L],[d,_]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[A,N],[d,_]],[/(apple) ?tv/i],[A,[l,b+" TV"],[d,_]],[/crkey/i],[[l,T+"cast"],[A,R],[d,_]],[/droid.+aft(\w)( bui|\))/i],[l,[A,y],[d,_]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[l,[A,B],[d,_]],[/(bravia[\w ]+)( bui|\))/i],[l,[A,U],[d,_]],[/(mitv-\w{5}) bui/i],[l,[A,M],[d,_]],[/Hbbtv.*(technisat) (.*);/i],[A,l,[d,_]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[A,G],[l,G],[d,_]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[d,_]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[A,l,[d,f]],[/droid.+; (shield) bui/i],[l,[A,"Nvidia"],[d,f]],[/(playstation [345portablevi]+)/i],[l,[A,U],[d,f]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[l,[A,k],[d,f]],[/((pebble))app/i],[A,l,[d,E]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[l,[A,b],[d,E]],[/droid.+; (glass) \d/i],[l,[A,R],[d,E]],[/droid.+; (wt63?0{2,3})\)/i],[l,[A,x],[d,E]],[/(quest( 2| pro)?)/i],[l,[A,F],[d,E]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[A,[d,v]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[l,[d,g]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[l,[d,m]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[d,m]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[d,g]],[/(android[-\w\. ]{0,9});.+buil/i],[l,[A,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[p,[u,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[p,[u,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[u,p],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[p,u]],os:[[/microsoft (windows) (vista|xp)/i],[u,p],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[u,[p,W,q]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[u,"Windows"],[p,W,q]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[p,/_/g,"."],[u,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[u,V],[p,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[p,u],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[u,p],[/\(bb(10);/i],[p,[u,S]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[p,[u,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[p,[u,I+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[p,[u,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[p,[u,"watchOS"]],[/crkey\/([\d\.]+)/i],[p,[u,T+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[u,$],p],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[u,p],[/(sunos) ?([\w\.\d]*)/i],[[u,"Solaris"],p],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[u,p]]},Y=function(e,n){if(typeof e===a&&(n=e,e=r),!(this instanceof Y))return new Y(e,n).getResult();var f=typeof t!==i&&t.navigator?t.navigator:r,_=e||(f&&f.userAgent?f.userAgent:""),E=f&&f.userAgentData?f.userAgentData:r,v=n?function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n}(z,n):z;return this.getBrowser=function(){var e,t={};return t[u]=r,t[p]=r,K.call(t,_,v.browser),t[c]=typeof(e=t[p])===s?e.replace(/[^\d\.]/g,"").split(".")[0]:r,f&&f.brave&&typeof f.brave.isBrave==o&&(t[u]="Brave"),t},this.getCPU=function(){var e={};return e[h]=r,K.call(e,_,v.cpu),e},this.getDevice=function(){var e={};return e[A]=r,e[l]=r,e[d]=r,K.call(e,_,v.device),!e[d]&&E&&E.mobile&&(e[d]=g),"Macintosh"==e[l]&&f&&typeof f.standalone!==i&&f.maxTouchPoints&&f.maxTouchPoints>2&&(e[l]="iPad",e[d]=m),e},this.getEngine=function(){var e={};return e[u]=r,e[p]=r,K.call(e,_,v.engine),e},this.getOS=function(){var e={};return e[u]=r,e[p]=r,K.call(e,_,v.os),!e[u]&&E&&"Unknown"!=E.platform&&(e[u]=E.platform.replace(/chrome os/i,$).replace(/macos/i,V)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return _},this.setUA=function(e){return _=typeof e===s&&e.length>350?G(e,350):e,this},this.setUA(_),this};Y.VERSION="0.7.34",Y.BROWSER=H([u,p,c]),Y.CPU=H([h]),Y.DEVICE=H([l,A,d,f,g,_,m,E,v]),Y.ENGINE=Y.OS=H([u,p]),e.exports&&(n=e.exports=Y),n.UAParser=Y;var J=typeof t!==i&&(t.jQuery||t.Zepto);if(J&&!J.ua){var X=new Y;J.ua=X.getResult(),J.ua.get=function(){return X.getUA()},J.ua.set=function(e){X.setUA(e);var t=X.getResult();for(var n in t)J.ua[n]=t[n]}}}("object"==typeof window?window:t)}(Zh,Zh.exports);var ef=n(Zh.exports),tf=Ar,nf=Xe,rf=K,of=Li,af=At("iterator"),sf=Object,cf=n((function(e){if(rf(e))return!1;var t=sf(e);return void 0!==t[af]||"@@iterator"in t||nf(of,tf(t))})),lf=A;On({global:!0,forced:lf.globalThis!==lf},{globalThis:lf});var uf=n(A),df=bl.clear;On({global:!0,bind:!0,enumerable:!0,forced:A.clearImmediate!==df},{clearImmediate:df});var Af="function"==typeof Bun&&Bun&&"string"==typeof Bun.version,pf=A,hf=m,ff=R,gf=Af,mf=ce,_f=Kc,Ef=qc,vf=pf.Function,yf=/MSIE .\./.test(mf)||gf&&function(){var e=pf.Bun.version.split(".");return e.length<3||0==e[0]&&(e[1]<3||3==e[1]&&0==e[2])}(),bf=On,Cf=A,Sf=bl.set,wf=function(e,t){var n=1;return yf?function(t,r){var o=Ef(arguments.length,1)>n,i=ff(t)?t:vf(t),a=o?_f(arguments,n):[];return e(o?function(){hf(i,this,a)}:i)}:e},Tf=Cf.setImmediate?wf(Sf):Sf;bf({global:!0,bind:!0,enumerable:!0,forced:Cf.setImmediate!==Tf},{setImmediate:Tf});var If=n(ne.setImmediate),Rf=On,Of=zl,Nf=ke,kf=qc,Pf=Fr,Df=A.process;Rf({global:!0,enumerable:!0,dontCallGetSet:!0},{queueMicrotask:function(e){kf(arguments.length,1),Nf(e);var t=Pf&&Df.domain;Of(t?t.bind(e):e)}});var Lf=n(ne.queueMicrotask);function Bf(e,t){return function(){return e.apply(t,arguments)}}const{toString:Uf}=Object.prototype,{getPrototypeOf:Mf}=Object,xf=(Ff=Object.create(null),e=>{const t=Uf.call(e);return Ff[t]||(Ff[t]=t.slice(8,-1).toLowerCase())});var Ff;const $f=e=>(e=e.toLowerCase(),t=>xf(t)===e),Vf=e=>t=>typeof t===e,{isArray:Hf}=Array,jf=Vf("undefined"),Qf=$f("ArrayBuffer"),Gf=Vf("string"),Kf=Vf("function"),Wf=Vf("number"),qf=e=>null!==e&&"object"==typeof e,zf=e=>{if("object"!==xf(e))return!1;const t=Mf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||cf(e))},Yf=$f("Date"),Jf=$f("File"),Xf=$f("Blob"),Zf=$f("FileList"),eg=$f("URLSearchParams"),[tg,ng,rg,og]=["ReadableStream","Request","Response","Headers"].map($f);function ig(e,t){let n,r,{allOwnKeys:o=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!=e)if("object"!=typeof e&&(e=[e]),Hf(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{const r=o?Object.getOwnPropertyNames(e):Object.keys(e),i=r.length;let a;for(n=0;n<i;n++)a=r[n],t.call(null,e[a],a,e)}}function ag(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,o=n.length;for(;o-- >0;)if(r=n[o],t===r.toLowerCase())return r;return null}const sg=void 0!==uf?uf:"undefined"!=typeof self?self:"undefined"!=typeof window?window:commonjsGlobal,cg=e=>!jf(e)&&e!==sg,lg=(ug="undefined"!=typeof Uint8Array&&Mf(Uint8Array),e=>ug&&e instanceof ug);var ug;const dg=$f("HTMLFormElement"),Ag=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),pg=$f("RegExp"),hg=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};ig(n,((n,o)=>{let i;!1!==(i=t(n,o,e))&&(r[o]=i||n)})),Object.defineProperties(e,r)},fg="abcdefghijklmnopqrstuvwxyz",gg="0123456789",mg={DIGIT:gg,ALPHA:fg,ALPHA_DIGIT:fg+fg.toUpperCase()+gg},_g=$f("AsyncFunction"),Eg=(vg="function"==typeof If,yg=Kf(sg.postMessage),vg?If:yg?(bg="axios@".concat(Math.random()),Cg=[],sg.addEventListener("message",(e=>{let{source:t,data:n}=e;t===sg&&n===bg&&Cg.length&&Cg.shift()()}),!1),e=>{Cg.push(e),sg.postMessage(bg,"*")}):e=>setTimeout(e));var vg,yg,bg,Cg;const Sg=void 0!==Lf?Lf.bind(sg):"undefined"!=typeof process&&process.nextTick||Eg;var wg={isArray:Hf,isArrayBuffer:Qf,isBuffer:function(e){return null!==e&&!jf(e)&&null!==e.constructor&&!jf(e.constructor)&&Kf(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||Kf(e.append)&&("formdata"===(t=xf(e))||"object"===t&&Kf(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Qf(e.buffer),t},isString:Gf,isNumber:Wf,isBoolean:e=>!0===e||!1===e,isObject:qf,isPlainObject:zf,isReadableStream:tg,isRequest:ng,isResponse:rg,isHeaders:og,isUndefined:jf,isDate:Yf,isFile:Jf,isBlob:Xf,isRegExp:pg,isFunction:Kf,isStream:e=>qf(e)&&Kf(e.pipe),isURLSearchParams:eg,isTypedArray:lg,isFileList:Zf,forEach:ig,merge:function e(){const{caseless:t}=cg(this)&&this||{},n={},r=(r,o)=>{const i=t&&ag(n,o)||o;zf(n[i])&&zf(r)?n[i]=e(n[i],r):zf(r)?n[i]=e({},r):Hf(r)?n[i]=r.slice():n[i]=r};for(let o=0,i=arguments.length;o<i;o++)arguments[o]&&ig(arguments[o],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return ig(t,((t,r)=>{n&&Kf(t)?e[r]=Bf(t,n):e[r]=t}),{allOwnKeys:r}),e},trim:e=>Up(e)?Up(e).call(e):e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let o,i,a;const s={};if(t=t||{},null==e)return t;do{for(o=Object.getOwnPropertyNames(e),i=o.length;i-- >0;)a=o[i],r&&!r(a,e,t)||s[a]||(t[a]=e[a],s[a]=!0);e=!1!==n&&Mf(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:xf,kindOfTest:$f,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(Hf(e))return e;let t=e.length;if(!Wf(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:dg,hasOwnProperty:Ag,hasOwnProp:Ag,reduceDescriptors:hg,freezeMethods:e=>{hg(e,((t,n)=>{if(Kf(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];Kf(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return Hf(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:ag,global:sg,isContextDefined:cg,ALPHABET:mg,generateString:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mg.ALPHA_DIGIT,n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&Kf(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(qf(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const o=Hf(e)?[]:{};return ig(e,((e,t)=>{const i=n(e,r+1);!jf(i)&&(o[t]=i)})),t[r]=void 0,o}}return e};return n(e,0)},isAsyncFn:_g,isThenable:e=>e&&(qf(e)||Kf(e))&&Kf(e.then)&&Kf(e.catch),setImmediate:Eg,asap:Sg};function Tg(e,t,n,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),o&&(this.response=o,this.status=o.status?o.status:null)}wg.inherits(Tg,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:wg.toJSONObject(this.config),code:this.code,status:this.status}}});const Ig=Tg.prototype,Rg={};function Og(e){return wg.isPlainObject(e)||wg.isArray(e)}function Ng(e){return wg.endsWith(e,"[]")?e.slice(0,-2):e}function kg(e,t,n){return e?e.concat(t).map((function(e,t){return e=Ng(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{Rg[e]={value:e}})),Object.defineProperties(Tg,Rg),Object.defineProperty(Ig,"isAxiosError",{value:!0}),Tg.from=(e,t,n,r,o,i)=>{const a=Object.create(Ig);return wg.toFlatObject(e,a,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),Tg.call(a,e.message,t,n,r,o),a.cause=e,a.name=e.name,i&&Object.assign(a,i),a};const Pg=wg.toFlatObject(wg,{},null,(function(e){return/^is[A-Z]/.test(e)}));function Dg(e,t,n){if(!wg.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=wg.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!wg.isUndefined(t[e])}))).metaTokens,o=n.visitor||l,i=n.dots,a=n.indexes,s=(n.Blob||"undefined"!=typeof Blob&&Blob)&&wg.isSpecCompliantForm(t);if(!wg.isFunction(o))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(wg.isDate(e))return e.toISOString();if(!s&&wg.isBlob(e))throw new Tg("Blob is not supported. Use a Buffer instead.");return wg.isArrayBuffer(e)||wg.isTypedArray(e)?s&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function l(e,n,o){let s=e;if(e&&!o&&"object"==typeof e)if(wg.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(wg.isArray(e)&&(l=e,wg.isArray(l)&&!l.some(Og))||(wg.isFileList(e)||wg.endsWith(n,"[]"))&&(s=wg.toArray(e)))return n=Ng(n),s.forEach((function(e,r){!wg.isUndefined(e)&&null!==e&&t.append(!0===a?kg([n],r,i):null===a?n:n+"[]",c(e))})),!1;var l;return!!Og(e)||(t.append(kg(o,n,i),c(e)),!1)}const u=[],d=Object.assign(Pg,{defaultVisitor:l,convertValue:c,isVisitable:Og});if(!wg.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!wg.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),wg.forEach(n,(function(n,i){!0===(!(wg.isUndefined(n)||null===n)&&o.call(t,n,wg.isString(i)?Up(i).call(i):i,r,d))&&e(n,r?r.concat(i):[i])})),u.pop()}}(e),t}function Lg(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function Bg(e,t){this._pairs=[],e&&Dg(e,this,t)}const Ug=Bg.prototype;function Mg(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function xg(e,t,n){if(!t)return e;const r=n&&n.encode||Mg,o=n&&n.serialize;let i;if(i=o?o(t,n):wg.isURLSearchParams(t)?t.toString():new Bg(t,n).toString(r),i){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}Ug.append=function(e,t){this._pairs.push([e,t])},Ug.toString=function(e){const t=e?function(t){return e.call(this,t,Lg)}:Lg;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};var Fg=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){wg.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},$g={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Vg={exports:{}},Hg=On,jg=N,Qg=Jt.f;Hg({target:"Object",stat:!0,forced:Object.defineProperty!==Qg,sham:!jg},{defineProperty:Qg});var Gg=ne.Object,Kg=Vg.exports=function(e,t,n){return Gg.defineProperty(e,t,n)};Gg.defineProperty.sham&&(Kg.sham=!0);var Wg=n(Vg.exports),qg=y,zg=Array.isArray||function(e){return"Array"==qg(e)},Yg=TypeError,Jg=zg,Xg=Mc,Zg=te,em=At("species"),tm=Array,nm=function(e){var t;return Jg(e)&&(t=e.constructor,(Xg(t)&&(t===tm||Jg(t.prototype))||Zg(t)&&null===(t=t[em]))&&(t=void 0)),void 0===t?tm:t},rm=function(e,t){return new(nm(e))(0===t?0:t)},om=r,im=fe,am=At("species"),sm=function(e){return im>=51||!om((function(){var t=[];return(t.constructor={})[am]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},cm=On,lm=r,um=zg,dm=te,Am=ze,pm=Hn,hm=function(e){if(e>9007199254740991)throw Yg("Maximum allowed index exceeded");return e},fm=lh,gm=rm,mm=sm,_m=fe,Em=At("isConcatSpreadable"),vm=_m>=51||!lm((function(){var e=[];return e[Em]=!1,e.concat()[0]!==e})),ym=function(e){if(!dm(e))return!1;var t=e[Em];return void 0!==t?!!t:um(e)};cm({target:"Array",proto:!0,arity:1,forced:!vm||!mm("concat")},{concat:function(e){var t,n,r,o,i,a=Am(this),s=gm(a,0),c=0;for(t=-1,r=arguments.length;t<r;t++)if(ym(i=-1===t?a:arguments[t]))for(o=pm(i),hm(c+o),n=0;n<o;n++,c++)n in i&&fm(s,c,i[n]);else hm(c+1),fm(s,c++,i);return s.length=c,s}});var bm={},Cm=y,Sm=X,wm=Io.f,Tm=fh,Im="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];bm.f=function(e){return Im&&"Window"==Cm(e)?function(e){try{return wm(e)}catch(t){return Tm(Im)}}(e):wm(Sm(e))};var Rm={},Om=At;Rm.f=Om;var Nm=ne,km=Xe,Pm=Rm,Dm=Jt.f,Lm=function(e){var t=Nm.Symbol||(Nm.Symbol={});km(t,e)||Dm(t,e,{value:Pm.f(e)})},Bm=D,Um=se,Mm=At,xm=ls,Fm=function(){var e=Um("Symbol"),t=e&&e.prototype,n=t&&t.valueOf,r=Mm("toPrimitive");t&&!t[r]&&xm(t,r,(function(e){return Bm(n,this)}),{arity:1})},$m=Yt,Vm=G,Hm=ze,jm=Hn,Qm=rm,Gm=l([].push),Km=function(e){var t=1==e,n=2==e,r=3==e,o=4==e,i=6==e,a=7==e,s=5==e||i;return function(c,l,u,d){for(var A,p,h=Hm(c),f=Vm(h),g=$m(l,u),m=jm(f),_=0,E=d||Qm,v=t?E(c,m):n||a?E(c,0):void 0;m>_;_++)if((s||_ in f)&&(p=g(A=f[_],_,h),e))if(t)v[_]=p;else if(p)switch(e){case 3:return!0;case 5:return A;case 6:return _;case 2:Gm(v,A)}else switch(e){case 4:return!1;case 7:Gm(v,A)}return i?-1:r||o?o:v}},Wm={forEach:Km(0),map:Km(1),filter:Km(2),some:Km(3),every:Km(4),find:Km(5),findIndex:Km(6),filterReject:Km(7)},qm=On,zm=A,Ym=D,Jm=l,Xm=N,Zm=Ee,e_=r,t_=Xe,n_=u,r_=nn,o_=X,i_=bt,a_=fr,s_=$,c_=vi,l_=Xo,u_=Io,d_=bm,A_=xo,p_=O,h_=Jt,f_=zo,g_=L,m_=ls,__=cc,E_=Ke,v_=Ro,y_=rt,b_=At,C_=Rm,S_=Lm,w_=Fm,T_=Rs,I_=ts,R_=Wm.forEach,O_=so("hidden"),N_="Symbol",k_="prototype",P_=I_.set,D_=I_.getterFor(N_),L_=Object[k_],B_=zm.Symbol,U_=B_&&B_[k_],M_=zm.TypeError,x_=zm.QObject,F_=p_.f,$_=h_.f,V_=d_.f,H_=g_.f,j_=Jm([].push),Q_=E_("symbols"),G_=E_("op-symbols"),K_=E_("wks"),W_=!x_||!x_[k_]||!x_[k_].findChild,q_=Xm&&e_((function(){return 7!=c_($_({},"a",{get:function(){return $_(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=F_(L_,t);r&&delete L_[t],$_(e,t,n),r&&e!==L_&&$_(L_,t,r)}:$_,z_=function(e,t){var n=Q_[e]=c_(U_);return P_(n,{type:N_,tag:e,description:t}),Xm||(n.description=t),n},Y_=function(e,t,n){e===L_&&Y_(G_,t,n),r_(e);var r=i_(t);return r_(n),t_(Q_,r)?(n.enumerable?(t_(e,O_)&&e[O_][r]&&(e[O_][r]=!1),n=c_(n,{enumerable:s_(0,!1)})):(t_(e,O_)||$_(e,O_,s_(1,{})),e[O_][r]=!0),q_(e,r,n)):$_(e,r,n)},J_=function(e,t){r_(e);var n=o_(t),r=l_(n).concat(tE(n));return R_(r,(function(t){Xm&&!Ym(X_,n,t)||Y_(e,t,n[t])})),e},X_=function(e){var t=i_(e),n=Ym(H_,this,t);return!(this===L_&&t_(Q_,t)&&!t_(G_,t))&&(!(n||!t_(this,t)||!t_(Q_,t)||t_(this,O_)&&this[O_][t])||n)},Z_=function(e,t){var n=o_(e),r=i_(t);if(n!==L_||!t_(Q_,r)||t_(G_,r)){var o=F_(n,r);return!o||!t_(Q_,r)||t_(n,O_)&&n[O_][r]||(o.enumerable=!0),o}},eE=function(e){var t=V_(o_(e)),n=[];return R_(t,(function(e){t_(Q_,e)||t_(v_,e)||j_(n,e)})),n},tE=function(e){var t=e===L_,n=V_(t?G_:o_(e)),r=[];return R_(n,(function(e){!t_(Q_,e)||t&&!t_(L_,e)||j_(r,Q_[e])})),r};Zm||(B_=function(){if(n_(U_,this))throw M_("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?a_(arguments[0]):void 0,t=y_(e),n=function(e){this===L_&&Ym(n,G_,e),t_(this,O_)&&t_(this[O_],t)&&(this[O_][t]=!1),q_(this,t,s_(1,e))};return Xm&&W_&&q_(L_,t,{configurable:!0,set:n}),z_(t,e)},m_(U_=B_[k_],"toString",(function(){return D_(this).tag})),m_(B_,"withoutSetter",(function(e){return z_(y_(e),e)})),g_.f=X_,h_.f=Y_,f_.f=J_,p_.f=Z_,u_.f=d_.f=eE,A_.f=tE,C_.f=function(e){return z_(b_(e),e)},Xm&&__(U_,"description",{configurable:!0,get:function(){return D_(this).description}})),qm({global:!0,constructor:!0,wrap:!0,forced:!Zm,sham:!Zm},{Symbol:B_}),R_(l_(K_),(function(e){S_(e)})),qm({target:N_,stat:!0,forced:!Zm},{useSetter:function(){W_=!0},useSimple:function(){W_=!1}}),qm({target:"Object",stat:!0,forced:!Zm,sham:!Xm},{create:function(e,t){return void 0===t?c_(e):J_(c_(e),t)},defineProperty:Y_,defineProperties:J_,getOwnPropertyDescriptor:Z_}),qm({target:"Object",stat:!0,forced:!Zm},{getOwnPropertyNames:eE}),w_(),T_(B_,N_),v_[O_]=!0;var nE=Ee&&!!Symbol.for&&!!Symbol.keyFor,rE=On,oE=se,iE=Xe,aE=fr,sE=Ke,cE=nE,lE=sE("string-to-symbol-registry"),uE=sE("symbol-to-string-registry");rE({target:"Symbol",stat:!0,forced:!cE},{for:function(e){var t=aE(e);if(iE(lE,t))return lE[t];var n=oE("Symbol")(t);return lE[t]=n,uE[n]=t,n}});var dE=On,AE=Xe,pE=we,hE=Ie,fE=nE,gE=Ke("symbol-to-string-registry");dE({target:"Symbol",stat:!0,forced:!fE},{keyFor:function(e){if(!pE(e))throw TypeError(hE(e)+" is not a symbol");if(AE(gE,e))return gE[e]}});var mE=zg,_E=R,EE=y,vE=fr,yE=l([].push),bE=On,CE=se,SE=m,wE=D,TE=l,IE=r,RE=R,OE=we,NE=Kc,kE=function(e){if(_E(e))return e;if(mE(e)){for(var t=e.length,n=[],r=0;r<t;r++){var o=e[r];"string"==typeof o?yE(n,o):"number"!=typeof o&&"Number"!=EE(o)&&"String"!=EE(o)||yE(n,vE(o))}var i=n.length,a=!0;return function(e,t){if(a)return a=!1,t;if(mE(this))return t;for(var r=0;r<i;r++)if(n[r]===e)return t}}},PE=Ee,DE=String,LE=CE("JSON","stringify"),BE=TE(/./.exec),UE=TE("".charAt),ME=TE("".charCodeAt),xE=TE("".replace),FE=TE(1..toString),$E=/[\uD800-\uDFFF]/g,VE=/^[\uD800-\uDBFF]$/,HE=/^[\uDC00-\uDFFF]$/,jE=!PE||IE((function(){var e=CE("Symbol")();return"[null]"!=LE([e])||"{}"!=LE({a:e})||"{}"!=LE(Object(e))})),QE=IE((function(){return'"\\udf06\\ud834"'!==LE("\udf06\ud834")||'"\\udead"'!==LE("\udead")})),GE=function(e,t){var n=NE(arguments),r=kE(t);if(RE(r)||void 0!==e&&!OE(e))return n[1]=function(e,t){if(RE(r)&&(t=wE(r,this,DE(e),t)),!OE(t))return t},SE(LE,null,n)},KE=function(e,t,n){var r=UE(n,t-1),o=UE(n,t+1);return BE(VE,e)&&!BE(HE,o)||BE(HE,e)&&!BE(VE,r)?"\\u"+FE(ME(e,0),16):e};LE&&bE({target:"JSON",stat:!0,arity:3,forced:jE||QE},{stringify:function(e,t,n){var r=NE(arguments),o=SE(jE?GE:LE,null,r);return QE&&"string"==typeof o?xE(o,$E,KE):o}});var WE=xo,qE=ze;On({target:"Object",stat:!0,forced:!Ee||r((function(){WE.f(1)}))},{getOwnPropertySymbols:function(e){var t=WE.f;return t?t(qE(e)):[]}}),Lm("asyncIterator"),Lm("hasInstance"),Lm("isConcatSpreadable"),Lm("iterator"),Lm("match"),Lm("matchAll"),Lm("replace"),Lm("search"),Lm("species"),Lm("split");var zE=Fm;Lm("toPrimitive"),zE();var YE=se,JE=Rs;Lm("toStringTag"),JE(YE("Symbol"),"Symbol"),Lm("unscopables"),Rs(A.JSON,"JSON",!0);var XE=ne.Symbol,ZE=At,ev=Jt.f,tv=ZE("metadata"),nv=Function.prototype;void 0===nv[tv]&&ev(nv,tv,{value:null}),Lm("dispose"),Lm("metadata");var rv=XE;Lm("asyncDispose");var ov=l,iv=se("Symbol"),av=iv.keyFor,sv=ov(iv.prototype.valueOf),cv=iv.isRegisteredSymbol||function(e){try{return void 0!==av(sv(e))}catch(t){return!1}};On({target:"Symbol",stat:!0},{isRegisteredSymbol:cv});for(var lv=Ke,uv=se,dv=l,Av=we,pv=At,hv=uv("Symbol"),fv=hv.isWellKnownSymbol,gv=uv("Object","getOwnPropertyNames"),mv=dv(hv.prototype.valueOf),_v=lv("wks"),Ev=0,vv=gv(hv),yv=vv.length;Ev<yv;Ev++)try{var bv=vv[Ev];Av(hv[bv])&&pv(bv)}catch(mp){}var Cv=function(e){if(fv&&fv(e))return!0;try{for(var t=mv(e),n=0,r=gv(_v),o=r.length;n<o;n++)if(_v[r[n]]==t)return!0}catch(i){}return!1};On({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:Cv}),Lm("matcher"),Lm("observable"),On({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:cv}),On({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:Cv}),Lm("metadataKey"),Lm("patternMatch"),Lm("replaceAll");var Sv=n(rv),wv=n(Rm.f("iterator"));function Tv(e){return(Tv="function"==typeof Sv&&"symbol"==typeof wv?function(e){return typeof e}:function(e){return e&&"function"==typeof Sv&&e.constructor===Sv&&e!==Sv.prototype?"symbol":typeof e})(e)}var Iv=n(Rm.f("toPrimitive"));function Rv(e){var t=function(e,t){if("object"!==Tv(e)||null===e)return e;var n=e[Iv];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Tv(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Tv(t)?t:String(t)}function Ov(e,t,n){return(t=Rv(t))in e?Wg(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Nv=r,kv=At("iterator"),Pv=!Nv((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n=new URLSearchParams("a=1&a=2"),r="";return e.pathname="c%20d",t.forEach((function(e,n){t.delete("b"),r+=n+e})),n.delete("a",2),!e.toJSON||!n.has("a",1)||n.has("a",2)||!t.size&&!0||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[kv]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://").host||"#%D0%B1"!==new URL("http://a#").hash||"a1c3"!==r||"x"!==new URL("http://x",void 0).host})),Dv=ls,Lv=On,Bv=A,Uv=D,Mv=l,xv=N,Fv=Pv,$v=ls,Vv=cc,Hv=function(e,t,n){for(var r in t)n&&n.unsafe&&e[r]?e[r]=t[r]:Dv(e,r,t[r],n);return e},jv=Rs,Qv=Bs,Gv=ts,Kv=fc,Wv=R,qv=Xe,zv=Yt,Yv=Ar,Jv=nn,Xv=te,Zv=fr,ey=vi,ty=$,ny=Ji,ry=Qi,oy=qc,iy=yh,ay=At("iterator"),sy="URLSearchParams",cy=sy+"Iterator",ly=Gv.set,uy=Gv.getterFor(sy),dy=Gv.getterFor(cy),Ay=Object.getOwnPropertyDescriptor,py=function(e){if(!xv)return Bv[e];var t=Ay(Bv,e);return t&&t.value},hy=py("fetch"),fy=py("Request"),gy=py("Headers"),my=fy&&fy.prototype,_y=gy&&gy.prototype,Ey=Bv.RegExp,vy=Bv.TypeError,yy=Bv.decodeURIComponent,by=Bv.encodeURIComponent,Cy=Mv("".charAt),Sy=Mv([].join),wy=Mv([].push),Ty=Mv("".replace),Iy=Mv([].shift),Ry=Mv([].splice),Oy=Mv("".split),Ny=Mv("".slice),ky=/\+/g,Py=Array(4),Dy=function(e){return Py[e-1]||(Py[e-1]=Ey("((?:%[\\da-f]{2}){"+e+"})","gi"))},Ly=function(e){try{return yy(e)}catch(t){return e}},By=function(e){var t=Ty(e,ky," "),n=4;try{return yy(t)}catch(r){for(;n;)t=Ty(t,Dy(n--),Ly);return t}},Uy=/[!'()~]|%20/g,My={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},xy=function(e){return My[e]},Fy=function(e){return Ty(by(e),Uy,xy)},$y=Qv((function(e,t){ly(this,{type:cy,iterator:ny(uy(e).entries),kind:t})}),"Iterator",(function(){var e=dy(this),t=e.kind,n=e.iterator.next(),r=n.value;return n.done||(n.value="keys"===t?r.key:"values"===t?r.value:[r.key,r.value]),n}),!0),Vy=function(e){this.entries=[],this.url=null,void 0!==e&&(Xv(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===Cy(e,0)?Ny(e,1):e:Zv(e)))};Vy.prototype={type:sy,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,n,r,o,i,a,s,c=ry(e);if(c)for(n=(t=ny(e,c)).next;!(r=Uv(n,t)).done;){if(i=(o=ny(Jv(r.value))).next,(a=Uv(i,o)).done||(s=Uv(i,o)).done||!Uv(i,o).done)throw vy("Expected sequence with length 2");wy(this.entries,{key:Zv(a.value),value:Zv(s.value)})}else for(var l in e)qv(e,l)&&wy(this.entries,{key:l,value:Zv(e[l])})},parseQuery:function(e){if(e)for(var t,n,r=Oy(e,"&"),o=0;o<r.length;)(t=r[o++]).length&&(n=Oy(t,"="),wy(this.entries,{key:By(Iy(n)),value:By(Sy(n,"="))}))},serialize:function(){for(var e,t=this.entries,n=[],r=0;r<t.length;)e=t[r++],wy(n,Fy(e.key)+"="+Fy(e.value));return Sy(n,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var Hy=function(){Kv(this,jy);var e=ly(this,new Vy(arguments.length>0?arguments[0]:void 0));xv||(this.size=e.entries.length)},jy=Hy.prototype;if(Hv(jy,{append:function(e,t){var n=uy(this);oy(arguments.length,2),wy(n.entries,{key:Zv(e),value:Zv(t)}),xv||this.length++,n.updateURL()},delete:function(e){for(var t=uy(this),n=oy(arguments.length,1),r=t.entries,o=Zv(e),i=n<2?void 0:arguments[1],a=void 0===i?i:Zv(i),s=0;s<r.length;){var c=r[s];if(c.key!==o||void 0!==a&&c.value!==a)s++;else if(Ry(r,s,1),void 0!==a)break}xv||(this.size=r.length),t.updateURL()},get:function(e){var t=uy(this).entries;oy(arguments.length,1);for(var n=Zv(e),r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){var t=uy(this).entries;oy(arguments.length,1);for(var n=Zv(e),r=[],o=0;o<t.length;o++)t[o].key===n&&wy(r,t[o].value);return r},has:function(e){for(var t=uy(this).entries,n=oy(arguments.length,1),r=Zv(e),o=n<2?void 0:arguments[1],i=void 0===o?o:Zv(o),a=0;a<t.length;){var s=t[a++];if(s.key===r&&(void 0===i||s.value===i))return!0}return!1},set:function(e,t){var n=uy(this);oy(arguments.length,1);for(var r,o=n.entries,i=!1,a=Zv(e),s=Zv(t),c=0;c<o.length;c++)(r=o[c]).key===a&&(i?Ry(o,c--,1):(i=!0,r.value=s));i||wy(o,{key:a,value:s}),xv||(this.size=o.length),n.updateURL()},sort:function(){var e=uy(this);iy(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){for(var t,n=uy(this).entries,r=zv(e,arguments.length>1?arguments[1]:void 0),o=0;o<n.length;)r((t=n[o++]).value,t.key,this)},keys:function(){return new $y(this,"keys")},values:function(){return new $y(this,"values")},entries:function(){return new $y(this,"entries")}},{enumerable:!0}),$v(jy,ay,jy.entries,{name:"entries"}),$v(jy,"toString",(function(){return uy(this).serialize()}),{enumerable:!0}),xv&&Vv(jy,"size",{get:function(){return uy(this).entries.length},configurable:!0,enumerable:!0}),jv(Hy,sy),Lv({global:!0,constructor:!0,forced:!Fv},{URLSearchParams:Hy}),!Fv&&Wv(gy)){var Qy=Mv(_y.has),Gy=Mv(_y.set),Ky=function(e){if(Xv(e)){var t,n=e.body;if(Yv(n)===sy)return t=e.headers?new gy(e.headers):new gy,Qy(t,"content-type")||Gy(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),ey(e,{body:ty(0,Zv(n)),headers:ty(0,t)})}return e};if(Wv(hy)&&Lv({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return hy(e,arguments.length>1?Ky(arguments[1]):{})}}),Wv(fy)){var Wy=function(e){return Kv(this,my),new fy(e,arguments.length>1?Ky(arguments[1]):{})};my.constructor=Wy,Wy.prototype=my,Lv({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:Wy})}}var qy={URLSearchParams:Hy,getState:uy},zy=n(ne.URLSearchParams),Yy={isBrowser:!0,classes:{URLSearchParams:void 0!==zy?zy:Bg,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]};const Jy="undefined"!=typeof window&&"undefined"!=typeof document,Xy="object"==typeof navigator&&navigator||void 0,Zy=Jy&&(!Xy||["ReactNative","NativeScript","NS"].indexOf(Xy.product)<0),eb="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,tb=Jy&&window.location.href||"http://localhost";function nb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nb(Object(n),!0).forEach((function(t){Ov(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nb(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ob=rb(rb({},Object.freeze({__proto__:null,hasBrowserEnv:Jy,hasStandardBrowserEnv:Zy,hasStandardBrowserWebWorkerEnv:eb,navigator:Xy,origin:tb})),Yy),ib=nn,ab=D,sb=Xe,cb=u,lb=function(){var e=ib(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t},ub=RegExp.prototype,db=function(e){var t=e.flags;return void 0!==t||"flags"in ub||sb(e,"flags")||!cb(ub,e)?t:ab(lb,e)},Ab=mA.charAt,pb=D,hb=nn,fb=R,gb=y,mb=/./.exec,_b=TypeError,Eb=On,vb=D,yb=S,bb=Bs,Cb=Xs,Sb=z,wb=$n,Tb=fr,Ib=nn,Rb=K,Ob=y,Nb=tr,kb=db,Pb=Le,Db=r,Lb=Gc,Bb=function(e,t,n){return t+(n?Ab(e,t).length:1)},Ub=function(e,t){var n=e.exec;if(fb(n)){var r=pb(n,e,t);return null!==r&&hb(r),r}if("RegExp"===gb(e))return pb(mb,e,t);throw _b("RegExp#exec called on incompatible receiver")},Mb=ts,xb=At("matchAll"),Fb="RegExp String",$b=Fb+" Iterator",Vb=Mb.set,Hb=Mb.getterFor($b),jb=TypeError,Qb=yb("".indexOf),Gb=yb("".matchAll),Kb=!!Gb&&!Db((function(){Gb("a",/./)})),Wb=bb((function(e,t,n,r){Vb(this,{type:$b,regexp:e,string:t,global:n,unicode:r,done:!1})}),Fb,(function(){var e=Hb(this);if(e.done)return Cb(void 0,!0);var t=e.regexp,n=e.string,r=Ub(t,n);return null===r?(e.done=!0,Cb(void 0,!0)):e.global?(""===Tb(r[0])&&(t.lastIndex=Bb(n,wb(t.lastIndex),e.unicode)),Cb(r,!1)):(e.done=!0,Cb(r,!1))})),qb=function(e){var t,n,r,o=Ib(this),i=Tb(e),a=Lb(o,RegExp),s=Tb(kb(o));return t=new a(a===RegExp?o.source:o,s),n=!!~Qb(s,"g"),r=!!~Qb(s,"u"),t.lastIndex=wb(o.lastIndex),new Wb(t,i,n,r)};Eb({target:"String",proto:!0,forced:Kb},{matchAll:function(e){var t,n,r,o,i=Sb(this);if(Rb(e)){if(Kb)return Gb(i,e)}else{if(Nb(e)&&(t=Tb(Sb(kb(e))),!~Qb(t,"g")))throw jb("`.matchAll` does not allow non-global regexes");if(Kb)return Gb(i,e);if(void 0===(r=Pb(e,xb))&&"RegExp"==Ob(e)&&(r=qb),r)return vb(r,e,i)}return n=Tb(i),o=new RegExp(e,"g"),vb(qb,o,n)}});var zb=Yn("String").matchAll,Yb=u,Jb=zb,Xb=String.prototype,Zb=n((function(e){var t=e.matchAll;return"string"==typeof e||e===Xb||Yb(Xb,e)&&t===Xb.matchAll?Jb:t}));function eC(e){function t(e,n,r,o){let i=e[o++];if("__proto__"===i)return!0;const a=Number.isFinite(+i),s=o>=e.length;return i=!i&&wg.isArray(r)?r.length:i,s?(wg.hasOwnProp(r,i)?r[i]=[r[i],n]:r[i]=n,!a):(r[i]&&wg.isObject(r[i])||(r[i]=[]),t(e,n,r[i],o)&&wg.isArray(r[i])&&(r[i]=function(e){const t={},n=Object.keys(e);let r;const o=n.length;let i;for(r=0;r<o;r++)i=n[r],t[i]=e[i];return t}(r[i])),!a)}if(wg.isFormData(e)&&wg.isFunction(e.entries)){const n={};return wg.forEachEntry(e,((e,r)=>{var o;t((o=e,Zb(wg).call(wg,/\w+|\[(\w*)]/g,o).map((e=>"[]"===e[0]?"":e[1]||e[0]))),r,n,0)})),n}return null}const tC={transitional:$g,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,o=wg.isObject(e);if(o&&wg.isHTMLForm(e)&&(e=new FormData(e)),wg.isFormData(e))return r?JSON.stringify(eC(e)):e;if(wg.isArrayBuffer(e)||wg.isBuffer(e)||wg.isStream(e)||wg.isFile(e)||wg.isBlob(e)||wg.isReadableStream(e))return e;if(wg.isArrayBufferView(e))return e.buffer;if(wg.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let i;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return(a=e,s=this.formSerializer,Dg(a,new ob.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return ob.isNode&&wg.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},s))).toString();if((i=wg.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Dg(i?{"files[]":e}:e,t&&new t,this.formSerializer)}}var a,s;return o||r?(t.setContentType("application/json",!1),function(e,t){if(wg.isString(e))try{return(t||JSON.parse)(e),Up(wg).call(wg,e)}catch(n){if("SyntaxError"!==n.name)throw n}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||tC.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(wg.isResponse(e)||wg.isReadableStream(e))return e;if(e&&wg.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(o){if(n){if("SyntaxError"===o.name)throw Tg.from(o,Tg.ERR_BAD_RESPONSE,this,null,this.response);throw o}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ob.classes.FormData,Blob:ob.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};wg.forEach(["delete","get","head","post","put","patch"],(e=>{tC.headers[e]={}}));var nC=tC;const rC=wg.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),oC=Symbol("internals");function iC(e){var t;return e&&Up(t=String(e)).call(t).toLowerCase()}function aC(e){return!1===e||null==e?e:wg.isArray(e)?e.map(aC):String(e)}function sC(e,t,n,r,o){return wg.isFunction(r)?r.call(this,t,n):(o&&(t=n),wg.isString(t)?wg.isString(r)?-1!==t.indexOf(r):wg.isRegExp(r)?r.test(t):void 0:void 0)}class cC{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function o(e,t,n){const o=iC(t);if(!o)throw new Error("header name must be a non-empty string");const i=wg.findKey(r,o);(!i||void 0===r[i]||!0===n||void 0===n&&!1!==r[i])&&(r[i||t]=aC(e))}const i=(e,t)=>wg.forEach(e,((e,n)=>o(e,n,t)));if(wg.isPlainObject(e)||e instanceof this.constructor)i(e,t);else if(wg.isString(e)&&(e=Up(e).call(e))&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(Up(a=e).call(a)))i((e=>{const t={};let n,r,o;return e&&e.split("\n").forEach((function(e){var i,a;o=e.indexOf(":"),n=Up(i=e.substring(0,o)).call(i).toLowerCase(),r=Up(a=e.substring(o+1)).call(a),!n||t[n]&&rC[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t);else if(wg.isHeaders(e))for(const[s,c]of e.entries())o(c,s,n);else null!=e&&o(t,e,n);var a;return this}get(e,t){if(e=iC(e)){const n=wg.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(wg.isFunction(t))return t.call(this,e,n);if(wg.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=iC(e)){const n=wg.findKey(this,e);return!(!n||void 0===this[n]||t&&!sC(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function o(e){if(e=iC(e)){const o=wg.findKey(n,e);!o||t&&!sC(0,n[o],o,t)||(delete n[o],r=!0)}}return wg.isArray(e)?e.forEach(o):o(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const o=t[n];e&&!sC(0,this[o],o,e,!0)||(delete this[o],r=!0)}return r}normalize(e){const t=this,n={};return wg.forEach(this,((r,o)=>{var i;const a=wg.findKey(n,o);if(a)return t[a]=aC(r),void delete t[o];const s=e?Up(c=o).call(c).toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n)):Up(i=String(o)).call(i);var c;s!==o&&delete t[o],t[s]=aC(r),n[s]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return wg.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&wg.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[oC]=this[oC]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=iC(e);t[r]||(function(e,t){const n=wg.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,o){return this[r].call(this,t,e,n,o)},configurable:!0})}))}(n,e),t[r]=!0)}return wg.isArray(e)?e.forEach(r):r(e),this}}cC.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),wg.reduceDescriptors(cC.prototype,((e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}})),wg.freezeMethods(cC);var lC=cC;function uC(e,t){const n=this||nC,r=t||n,o=lC.from(r.headers);let i=r.data;return wg.forEach(e,(function(e){i=e.call(n,i,o.normalize(),t?t.status:void 0)})),o.normalize(),i}function dC(e){return!(!e||!e.__CANCEL__)}function AC(e,t,n){Tg.call(this,null==e?"canceled":e,Tg.ERR_CANCELED,t,n),this.name="CanceledError"}function pC(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new Tg("Request failed with status code "+n.status,[Tg.ERR_BAD_REQUEST,Tg.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}wg.inherits(AC,Tg,{__CANCEL__:!0});const hC=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=0;const o=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let o,i=0,a=0;return t=void 0!==t?t:1e3,function(s){const c=Date.now(),l=r[a];o||(o=c),n[i]=s,r[i]=c;let u=a,d=0;for(;u!==i;)d+=n[u++],u%=e;if(i=(i+1)%e,i===a&&(a=(a+1)%e),c-o<t)return;const A=l&&c-l;return A?Math.round(1e3*d/A):void 0}}(50,250);return function(e,t){let n,r,o=0,i=1e3/t;const a=function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();o=i,n=null,r&&(clearTimeout(r),r=null),e.apply(null,t)};return[function(){const e=Date.now(),t=e-o;for(var s=arguments.length,c=new Array(s),l=0;l<s;l++)c[l]=arguments[l];t>=i?a(c,e):(n=c,r||(r=setTimeout((()=>{r=null,a(n)}),i-t)))},()=>n&&a(n)]}((n=>{const i=n.loaded,a=n.lengthComputable?n.total:void 0,s=i-r,c=o(s);r=i,e({loaded:i,total:a,progress:a?i/a:void 0,bytes:s,rate:c||void 0,estimated:c&&a&&i<=a?(a-i)/c:void 0,event:n,lengthComputable:null!=a,[t?"download":"upload"]:!0})}),n)},fC=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},gC=e=>function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return wg.asap((()=>e(...n)))};var mC=ob.hasStandardBrowserEnv?function(){const e=ob.navigator&&/(msie|trident)/i.test(ob.navigator.userAgent),t=document.createElement("a");let n;function r(n){let r=n;return e&&(t.setAttribute("href",r),r=t.href),t.setAttribute("href",r),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=r(window.location.href),function(e){const t=wg.isString(e)?r(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0},_C=ob.hasStandardBrowserEnv?{write(e,t,n,r,o,i){const a=[e+"="+encodeURIComponent(t)];wg.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),wg.isString(r)&&a.push("path="+r),wg.isString(o)&&a.push("domain="+o),!0===i&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function EC(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}function vC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const yC=e=>e instanceof lC?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vC(Object(n),!0).forEach((function(t){Ov(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e):e;function bC(e,t){t=t||{};const n={};function r(e,t,n){return wg.isPlainObject(e)&&wg.isPlainObject(t)?wg.merge.call({caseless:n},e,t):wg.isPlainObject(t)?wg.merge({},t):wg.isArray(t)?t.slice():t}function o(e,t,n){return wg.isUndefined(t)?wg.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function i(e,t){if(!wg.isUndefined(t))return r(void 0,t)}function a(e,t){return wg.isUndefined(t)?wg.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function s(n,o,i){return i in t?r(n,o):i in e?r(void 0,n):void 0}const c={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:(e,t)=>o(yC(e),yC(t),!0)};return wg.forEach(Object.keys(Object.assign({},e,t)),(function(r){const i=c[r]||o,a=i(e[r],t[r],r);wg.isUndefined(a)&&i!==s||(n[r]=a)})),n}var CC=e=>{const t=bC({},e);let n,{data:r,withXSRFToken:o,xsrfHeaderName:i,xsrfCookieName:a,headers:s,auth:c}=t;if(t.headers=s=lC.from(s),t.url=xg(EC(t.baseURL,t.url),e.params,e.paramsSerializer),c&&s.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),wg.isFormData(r))if(ob.hasStandardBrowserEnv||ob.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if(!1!==(n=s.getContentType())){const[e,...t]=n?n.split(";").map((e=>Up(e).call(e))).filter(Boolean):[];s.setContentType([e||"multipart/form-data",...t].join("; "))}if(ob.hasStandardBrowserEnv&&(o&&wg.isFunction(o)&&(o=o(t)),o||!1!==o&&mC(t.url))){const e=i&&a&&_C.read(a);e&&s.set(i,e)}return t},SC="undefined"!=typeof XMLHttpRequest&&function(e){return new MA((function(t,n){const r=CC(e);let o=r.data;const i=lC.from(r.headers).normalize();let a,s,c,l,u,{responseType:d,onUploadProgress:A,onDownloadProgress:p}=r;function h(){l&&l(),u&&u(),r.cancelToken&&r.cancelToken.unsubscribe(a),r.signal&&r.signal.removeEventListener("abort",a)}let f=new XMLHttpRequest;function g(){if(!f)return;const r=lC.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders());pC((function(e){t(e),h()}),(function(e){n(e),h()}),{data:d&&"text"!==d&&"json"!==d?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:r,config:e,request:f}),f=null}f.open(r.method.toUpperCase(),r.url,!0),f.timeout=r.timeout,"onloadend"in f?f.onloadend=g:f.onreadystatechange=function(){f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))&&setTimeout(g)},f.onabort=function(){f&&(n(new Tg("Request aborted",Tg.ECONNABORTED,e,f)),f=null)},f.onerror=function(){n(new Tg("Network Error",Tg.ERR_NETWORK,e,f)),f=null},f.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const o=r.transitional||$g;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new Tg(t,o.clarifyTimeoutError?Tg.ETIMEDOUT:Tg.ECONNABORTED,e,f)),f=null},void 0===o&&i.setContentType(null),"setRequestHeader"in f&&wg.forEach(i.toJSON(),(function(e,t){f.setRequestHeader(t,e)})),wg.isUndefined(r.withCredentials)||(f.withCredentials=!!r.withCredentials),d&&"json"!==d&&(f.responseType=r.responseType),p&&([c,u]=hC(p,!0),f.addEventListener("progress",c)),A&&f.upload&&([s,l]=hC(A),f.upload.addEventListener("progress",s),f.upload.addEventListener("loadend",l)),(r.cancelToken||r.signal)&&(a=t=>{f&&(n(!t||t.type?new AC(null,e,f):t),f.abort(),f=null)},r.cancelToken&&r.cancelToken.subscribe(a),r.signal&&(r.signal.aborted?a():r.signal.addEventListener("abort",a)));const m=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);m&&-1===ob.protocols.indexOf(m)?n(new Tg("Unsupported protocol "+m+":",Tg.ERR_BAD_REQUEST,e)):f.send(o||null)}))},wC=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const o=function(e){if(!n){n=!0,a();const t=e instanceof Error?e:this.reason;r.abort(t instanceof Tg?t:new AC(t instanceof Error?t.message:t))}};let i=t&&setTimeout((()=>{i=null,o(new Tg("timeout ".concat(t," of ms exceeded"),Tg.ETIMEDOUT))}),t);const a=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(o):e.removeEventListener("abort",o)})),e=null)};e.forEach((e=>e.addEventListener("abort",o)));const{signal:s}=r;return s.unsubscribe=()=>wg.asap(a),s}},TC=UA,IC=hu;On({target:"Promise",stat:!0,forced:!0},{withResolvers:function(){var e=IC.f(this);return{promise:e.promise,resolve:e.resolve,reject:e.reject}}});var RC=hu,OC=Yl;On({target:"Promise",stat:!0,forced:!0},{try:function(e){var t=RC.f(this),n=OC(e);return(n.error?t.reject:t.resolve)(n.value),t.promise}});var NC=n(TC),kC=Rm.f("asyncIterator"),PC=n(kC);function DC(e,t){this.v=e,this.k=t}function LC(e){var t,n;function r(t,n){try{var i=e[t](n),a=i.value,s=a instanceof DC;NC.resolve(s?a.v:a).then((function(n){if(s){var c="return"===t?"return":"next";if(!a.k||n.done)return r(c,n);n=e[c](n).value}o(i.done?"return":"normal",n)}),(function(e){r("throw",e)}))}catch(c){o("throw",c)}}function o(e,o){switch(e){case"return":t.resolve({value:o,done:!0});break;case"throw":t.reject(o);break;default:t.resolve({value:o,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,o){return new NC((function(i,a){var s={key:e,arg:o,resolve:i,reject:a,next:null};n?n=n.next=s:(t=n=s,r(e,o))}))},"function"!=typeof e.return&&(this.return=void 0)}function BC(e){return function(){return new LC(e.apply(this,arguments))}}function UC(e){return new DC(e,0)}function MC(e){var t={},n=!1;function r(t,r){return n=!0,{done:!1,value:new DC(r=new NC((function(n){n(e[t](r))})),1)}}return t[void 0!==Sv&&wv||"@@iterator"]=function(){return this},t.next=function(e){return n?(n=!1,e):r("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return r("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return n?(n=!1,e):r("return",e)}),t}LC.prototype["function"==typeof Sv&&PC||"@@asyncIterator"]=function(){return this},LC.prototype.next=function(e){return this._invoke("next",e)},LC.prototype.throw=function(e){return this._invoke("throw",e)},LC.prototype.return=function(e){return this._invoke("return",e)};var xC=n(kC);function FC(e){var t,n,r,o=2;for("undefined"!=typeof Symbol&&(n=xC,r=Symbol.iterator);o--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new $C(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function $C(e){function t(e){if(Object(e)!==e)return MA.reject(new TypeError(e+" is not an object."));var t=e.done;return MA.resolve(e.value).then((function(e){return{value:e,done:t}}))}return($C=function(e){this.s=e,this.n=e.next}).prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?MA.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?MA.reject(e):t(n.apply(this.s,arguments))}},new $C(e)}const VC=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,o=0;for(;o<n;)r=o+t,yield e.slice(o,r),o=r},HC=function(){var e=BC((function*(e,t){var n,r=!1,o=!1;try{for(var i,a=FC(jC(e));r=!(i=yield UC(a.next())).done;r=!1){const e=i.value;yield*MC(FC(VC(e,t)))}}catch(s){o=!0,n=s}finally{try{r&&null!=a.return&&(yield UC(a.return()))}finally{if(o)throw n}}}));return function(t,n){return e.apply(this,arguments)}}(),jC=function(){var e=BC((function*(e){if(e[xC])return void(yield*MC(FC(e)));const t=e.getReader();try{for(;;){const{done:e,value:n}=yield UC(t.read());if(e)break;yield n}}finally{yield UC(t.cancel())}}));return function(t){return e.apply(this,arguments)}}(),QC=(e,t,n,r)=>{const o=HC(e,t);let i,a=0,s=e=>{i||(i=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await o.next();if(t)return s(),void e.close();let i=r.byteLength;if(n){let e=a+=i;n(e)}e.enqueue(new Uint8Array(r))}catch(t){throw s(t),t}},cancel:e=>(s(e),o.return())},{highWaterMark:2})};function GC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function KC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?GC(Object(n),!0).forEach((function(t){Ov(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const WC="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,qC=WC&&"function"==typeof ReadableStream,zC=WC&&("function"==typeof TextEncoder?(YC=new TextEncoder,e=>YC.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var YC;const JC=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!!e(...n)}catch(o){return!1}},XC=qC&&JC((()=>{let e=!1;const t=new Request(ob.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),ZC=qC&&JC((()=>wg.isReadableStream(new Response("").body))),eS={stream:ZC&&(e=>e.body)};var tS;WC&&(tS=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!eS[e]&&(eS[e]=wg.isFunction(tS[e])?t=>t[e]():(t,n)=>{throw new Tg("Response type '".concat(e,"' is not supported"),Tg.ERR_NOT_SUPPORT,n)})})));const nS=async(e,t)=>{const n=wg.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(wg.isBlob(e))return e.size;if(wg.isSpecCompliantForm(e)){const t=new Request(ob.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return wg.isArrayBufferView(e)||wg.isArrayBuffer(e)?e.byteLength:(wg.isURLSearchParams(e)&&(e+=""),wg.isString(e)?(await zC(e)).byteLength:void 0)})(t):n},rS={http:null,xhr:SC,fetch:WC&&(async e=>{let{url:t,method:n,data:r,signal:o,cancelToken:i,timeout:a,onDownloadProgress:s,onUploadProgress:c,responseType:l,headers:u,withCredentials:d="same-origin",fetchOptions:A}=CC(e);l=l?(l+"").toLowerCase():"text";let p,h=wC([o,i&&i.toAbortSignal()],a);const f=h&&h.unsubscribe&&(()=>{h.unsubscribe()});let g;try{if(c&&XC&&"get"!==n&&"head"!==n&&0!==(g=await nS(u,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});if(wg.isFormData(r)&&(e=n.headers.get("content-type"))&&u.setContentType(e),n.body){const[e,t]=fC(g,hC(gC(c)));r=QC(n.body,65536,e,t)}}wg.isString(d)||(d=d?"include":"omit");const o="credentials"in Request.prototype;p=new Request(t,KC(KC({},A),{},{signal:h,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:o?d:void 0}));let i=await fetch(p);const a=ZC&&("stream"===l||"response"===l);if(ZC&&(s||a&&f)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=i[t]}));const t=wg.toFiniteNumber(i.headers.get("content-length")),[n,r]=s&&fC(t,hC(gC(s),!0))||[];i=new Response(QC(i.body,65536,n,(()=>{r&&r(),f&&f()})),e)}l=l||"text";let m=await eS[wg.findKey(eS,l)||"text"](i,e);return!a&&f&&f(),await new MA(((t,n)=>{pC(t,n,{data:m,headers:lC.from(i.headers),status:i.status,statusText:i.statusText,config:e,request:p})}))}catch(m){if(f&&f(),m&&"TypeError"===m.name&&/fetch/i.test(m.message))throw Object.assign(new Tg("Network Error",Tg.ERR_NETWORK,e,p),{cause:m.cause||m});throw Tg.from(m,m&&m.code,e,p)}})};wg.forEach(rS,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}}));const oS=e=>"- ".concat(e),iS=e=>wg.isFunction(e)||null===e||!1===e;var aS={getAdapter:e=>{e=wg.isArray(e)?e:[e];const{length:t}=e;let n,r;const o={};for(let i=0;i<t;i++){let t;if(n=e[i],r=n,!iS(n)&&(r=rS[(t=String(n)).toLowerCase()],void 0===r))throw new Tg("Unknown adapter '".concat(t,"'"));if(r)break;o[t||"#"+i]=r}if(!r){const e=Object.entries(o).map((e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")}));throw new Tg("There is no suitable adapter to dispatch the request "+(t?e.length>1?"since :\n"+e.map(oS).join("\n"):" "+oS(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return r},adapters:rS};function sS(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new AC(null,e)}function cS(e){return sS(e),e.headers=lC.from(e.headers),e.data=uC.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),aS.getAdapter(e.adapter||nC.adapter)(e).then((function(t){return sS(e),t.data=uC.call(e,e.transformResponse,t),t.headers=lC.from(t.headers),t}),(function(t){return dC(t)||(sS(e),t&&t.response&&(t.response.data=uC.call(e,e.transformResponse,t.response),t.response.headers=lC.from(t.response.headers))),MA.reject(t)}))}const lS="1.7.7",uS={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{uS[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const dS={};uS.transitional=function(e,t,n){function r(e,t){return"[Axios v"+lS+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,o,i)=>{if(!1===e)throw new Tg(r(o," has been removed"+(t?" in "+t:"")),Tg.ERR_DEPRECATED);return t&&!dS[o]&&(dS[o]=!0,console.warn(r(o," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,o,i)}};var AS={assertOptions:function(e,t,n){if("object"!=typeof e)throw new Tg("options must be an object",Tg.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let o=r.length;for(;o-- >0;){const i=r[o],a=t[i];if(a){const t=e[i],n=void 0===t||a(t,i,e);if(!0!==n)throw new Tg("option "+i+" must be "+n,Tg.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new Tg("Unknown option "+i,Tg.ERR_BAD_OPTION)}},validators:uS};const pS=AS.validators;let hS=class{constructor(e){this.defaults=e,this.interceptors={request:new Fg,response:new Fg}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e;Error.captureStackTrace?Error.captureStackTrace(e={}):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(r){}}throw n}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=bC(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:o}=t;void 0!==n&&AS.assertOptions(n,{silentJSONParsing:pS.transitional(pS.boolean),forcedJSONParsing:pS.transitional(pS.boolean),clarifyTimeoutError:pS.transitional(pS.boolean)},!1),null!=r&&(wg.isFunction(r)?t.paramsSerializer={serialize:r}:AS.assertOptions(r,{encode:pS.function,serialize:pS.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i=o&&wg.merge(o.common,o[t.method]);o&&wg.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete o[e]})),t.headers=lC.concat(i,o);const a=[];let s=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(s=s&&e.synchronous,a.unshift(e.fulfilled,e.rejected))}));const c=[];let l;this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));let u,d=0;if(!s){const e=[cS.bind(this),void 0];for(e.unshift.apply(e,a),e.push.apply(e,c),u=e.length,l=MA.resolve(t);d<u;)l=l.then(e[d++],e[d++]);return l}u=a.length;let A=t;for(d=0;d<u;){const e=a[d++],t=a[d++];try{A=e(A)}catch(p){t.call(this,p);break}}try{l=cS.call(this,A)}catch(h){return MA.reject(h)}for(d=0,u=c.length;d<u;)l=l.then(c[d++],c[d++]);return l}getUri(e){return xg(EC((e=bC(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}};wg.forEach(["delete","get","head","options"],(function(e){hS.prototype[e]=function(t,n){return this.request(bC(n||{},{method:e,url:t,data:(n||{}).data}))}})),wg.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,o){return this.request(bC(o||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}hS.prototype[e]=t(),hS.prototype[e+"Form"]=t(!0)}));var fS=hS;class gS{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new MA((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new MA((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,o){n.reason||(n.reason=new AC(e,r,o),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new gS((function(t){e=t})),cancel:e}}}var mS=gS;const _S={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(_S).forEach((e=>{let[t,n]=e;_S[n]=t}));var ES=_S;const vS=function e(t){const n=new fS(t),r=Bf(fS.prototype.request,n);return wg.extend(r,fS.prototype,n,{allOwnKeys:!0}),wg.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(bC(t,n))},r}(nC);vS.Axios=fS,vS.CanceledError=AC,vS.CancelToken=mS,vS.isCancel=dC,vS.VERSION=lS,vS.toFormData=Dg,vS.AxiosError=Tg,vS.Cancel=vS.CanceledError,vS.all=function(e){return MA.all(e)},vS.spread=function(e){return function(t){return e.apply(null,t)}},vS.isAxiosError=function(e){return wg.isObject(e)&&!0===e.isAxiosError},vS.mergeConfig=bC,vS.AxiosHeaders=lC,vS.formToJSON=e=>eC(wg.isHTMLForm(e)?new FormData(e):e),vS.getAdapter=aS.getAdapter,vS.HttpStatusCode=ES,vS.default=vS;var yS=vS;const bS=()=>{};function CS(){const e={promise:void 0,isResolved:!1,isRejected:!1,isFinished:!1,resolve:void 0,reject:void 0,cancel:bS};return e.promise=new MA(((t,n)=>{e.resolve=n=>{e.isFinished||(e.isResolved=!0,e.isFinished=!0,t(n),e.value=n)},e.reject=t=>{e.isFinished||(e.isRejected=!0,e.isFinished=!0,n(t))}})),e}const SS=new Map,wS=new Map,TS=new Map;let IS=function(e){return e.WIN_10="Windows 10",e.WIN_81="Windows 8.1",e.WIN_8="Windows 8",e.WIN_7="Windows 7",e.WIN_VISTA="Windows Vista",e.WIN_SERVER_2003="Windows Server 2003",e.WIN_XP="Windows XP",e.WIN_2000="Windows 2000",e.ANDROID="Android",e.HARMONY_OS="HarmonyOS",e.OPEN_BSD="Open BSD",e.SUN_OS="Sun OS",e.LINUX="Linux",e.IOS="iOS",e.MAC_OS="Mac OS",e.CHROMIUM_OS="Chromium OS",e.QNX="QNX",e.UNIX="UNIX",e.BEOS="BeOS",e.OS_2="OS/2",e.SEARCH_BOT="Search Bot",e}({}),RS=function(e){return e.CHROME="Chrome",e.SAFARI="Safari",e.EDGE="Edge",e.FIREFOX="Firefox",e.OPERA="OPR",e.QQ="QQBrowser",e.WECHAT="MicroMessenger",e}({});const OS=new ef;let NS=OS.getResult(),kS=null;function PS(e){if(!kS){NS=OS.getResult();const e=function(e){if("Blink"===e.engine.name&&"WeChat"!==e.browser.name)return RS.CHROME;switch(e.browser.name){case"Chrome Headless":case"Chrome":case"Chromium":return RS.CHROME;case"Safari":case"Mobile Safari":return RS.SAFARI;case"Edge":return RS.EDGE;case"Firefox":return RS.FIREFOX;case"QQ":case"QQBrowser":return RS.QQ;case"Opera":return RS.OPERA;case"WeChat":return RS.WECHAT;default:return e.browser.name||""}}(NS),n=DS(NS),r="Windows"===(t=NS).os.name?t.os.version?t.os.name+" "+t.os.version:t.os.name:t.os.name||"",o=NS.os.version,i=DS(NS,!1),a=NS.device.type;if(!(e&&n&&r&&o))return{name:e,version:n,os:r,osVersion:o,browserVersion:i,deviceType:a};kS={name:e,version:n,os:r,osVersion:o,browserVersion:i,deviceType:a}}var t;return kS}function DS(e){let t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t="Blink"===e.engine.name?e.engine.version||"":e.browser.version||"",n?t.split(".")[0]:t}function LS(){return PS().os}function BS(){const e=PS();return"".concat(e.os," ").concat(e.osVersion)}function US(){const e=PS();return!!("WebKit"===NS.engine.name&&e.os===IS.MAC_OS&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0&&e.name!==RS.SAFARI||VS()&&e.name!==RS.SAFARI)}function MS(){return PS().name===RS.CHROME}function xS(){return PS().name===RS.SAFARI}function FS(){return PS().name===RS.EDGE}function $S(){return PS().name===RS.FIREFOX}function VS(){return PS().os===IS.IOS}function HS(e){const t=PS();return!(t.name!==RS.CHROME||!t.osVersion)&&Number(t.version)>=e}function jS(e){const t=PS();return!(t.name!==RS.CHROME||!t.osVersion)&&Number(t.version)<e}function QS(e){const t=PS();return!(t.name!==RS.EDGE||!t.osVersion)&&Number(t.version)>=e}function GS(e){const t=PS();return!(t.name!==RS.SAFARI||!t.osVersion)&&Number(t.version)>=e}function KS(e,t,n){const r=PS();if(r.os!==IS.IOS||!r.osVersion)return!1;const o=r.osVersion.split(".");return t&&Number(o[0])===e&&Number(o[1])<t||Number(o[0])<e}function WS(e,t,n){const r=PS();if(r.name!==RS.SAFARI||!r.osVersion||!r.browserVersion)return!1;const o=r.browserVersion.split(".");return t&&Number(o[0])===e&&Number(o[1])<t||Number(o[0])<e}function qS(e){const t=PS();return!(t.name!==RS.OPERA||!t.osVersion)&&Number(t.version)>=e}function zS(){const e=PS();if(e.os!==IS.IOS||!e.osVersion)return!1;const t=e.osVersion.split(".");return Number(t[0])<14||14===Number(t[0])&&Number(t[1])<=6}function YS(){const e=PS();if(e.os!==IS.IOS||!e.osVersion)return!1;const t=e.osVersion.split(".");return 15===Number(t[0])}function JS(){const e=PS();if(e.os!==IS.IOS||!e.osVersion)return!1;const t=e.osVersion.split(".");return 16===Number(t[0])}function XS(){const e=PS();if(e.os!==IS.IOS||!e.osVersion)return!1;const t=e.osVersion.split(".");return 15===Number(t[0])&&Number(t[1])>=1}function ZS(){return xS()&&navigator.maxTouchPoints>0}function ew(){return PS().name===RS.WECHAT}function tw(){return window.navigator.appVersion&&null!==window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<=35}function nw(){const e=LS();return function(){const{deviceType:e}=PS();return"mobile"===e||"tablet"===e}()||e===IS.ANDROID||e===IS.IOS||e===IS.HARMONY_OS}function rw(){const e=PS();return e.name!==RS.EDGE&&e.name!==RS.SAFARI&&!!navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]./i)}function ow(){return LS()===IS.ANDROID}function iw(){const e=PS();return ow()&&(e.name===RS.CHROME||e.name===RS.WECHAT||/chrome|chromium/i.test(navigator.userAgent))}function aw(e,t,n){return(t="symbol"==typeof(r=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t))?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e;var r}function sw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sw(Object(n),!0).forEach((function(t){aw(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let lw=function(e){return e.UNEXPECTED_ERROR="UNEXPECTED_ERROR",e.UNEXPECTED_RESPONSE="UNEXPECTED_RESPONSE",e.TIMEOUT="TIMEOUT",e.INVALID_PARAMS="INVALID_PARAMS",e.NOT_READABLE="NOT_READABLE",e.NOT_SUPPORTED="NOT_SUPPORTED",e.INVALID_OPERATION="INVALID_OPERATION",e.OPERATION_ABORTED="OPERATION_ABORTED",e.WEB_SECURITY_RESTRICT="WEB_SECURITY_RESTRICT",e.EXCHANGE_SDP_FAILED="EXCHANGE_SDP_FAILED",e.ADD_CANDIDATE_FAILED="ADD_CANDIDATE_FAILED",e.DATACHANNEL_FAILED="DATACHANNEL_FAILED",e.NETWORK_ERROR="NETWORK_ERROR",e.NETWORK_TIMEOUT="NETWORK_TIMEOUT",e.NETWORK_RESPONSE_ERROR="NETWORK_RESPONSE_ERROR",e.API_INVOKE_TIMEOUT="API_INVOKE_TIMEOUT",e.ENUMERATE_DEVICES_FAILED="ENUMERATE_DEVICES_FAILED",e.DEVICE_NOT_FOUND="DEVICE_NOT_FOUND",e.ELECTRON_IS_NULL="ELECTRON_IS_NULL",e.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR="ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR",e.CHROME_PLUGIN_NO_RESPONSE="CHROME_PLUGIN_NO_RESPONSE",e.CHROME_PLUGIN_NOT_INSTALL="CHROME_PLUGIN_NOT_INSTALL",e.MEDIA_OPTION_INVALID="MEDIA_OPTION_INVALID",e.PERMISSION_DENIED="PERMISSION_DENIED",e.CONSTRAINT_NOT_SATISFIED="CONSTRAINT_NOT_SATISFIED",e.TRACK_IS_DISABLED="TRACK_IS_DISABLED",e.GET_VIDEO_ELEMENT_VISIBLE_ERROR="GET_VIDEO_ELEMENT_VISIBLE_ERROR",e.SHARE_AUDIO_NOT_ALLOWED="SHARE_AUDIO_NOT_ALLOWED",e.LOW_STREAM_ENCODING_ERROR="LOW_STREAM_ENCODING_ERROR",e.SET_ENCODING_PARAMETER_ERROR="SET_ENCODING_PARAMETER_ERROR",e.TRACK_STATE_UNREACHABLE="TRACK_STATE_UNREACHABLE",e.INVALID_UINT_UID_FROM_STRING_UID="INVALID_UINT_UID_FROM_STRING_UID",e.CAN_NOT_GET_PROXY_SERVER="CAN_NOT_GET_PROXY_SERVER",e.CAN_NOT_GET_GATEWAY_SERVER="CAN_NOT_GET_GATEWAY_SERVER",e.VOID_GATEWAY_ADDRESS="VOID_GATEWAY_ADDRESS",e.UID_CONFLICT="UID_CONFLICT",e.MULTI_UNILBS_RESPONSE_ERROR="MULTI_UNILBS_RESPONSE_ERROR",e.UPDATE_TICKET_FAILED="UPDATE_TICKET_FAILED",e.INVALID_LOCAL_TRACK="INVALID_LOCAL_TRACK",e.INVALID_TRACK="INVALID_TRACK",e.SENDER_NOT_FOUND="SENDER_NOT_FOUND",e.CREATE_OFFER_FAILED="CREATE_OFFER_FAILED",e.SET_ANSWER_FAILED="SET_ANSWER_FAILED",e.ICE_FAILED="ICE_FAILED",e.PC_CLOSED="PC_CLOSED",e.SENDER_REPLACE_FAILED="SENDER_REPLACE_FAILED",e.GET_LOCAL_CAPABILITIES_FAILED="GET_LOCAL_CAPABILITIES_FAILED",e.GET_LOCAL_CONNECTION_PARAMS_FAILED="GET_LOCAL_CONNECTION_PARAMS_FAILED",e.SUBSCRIBE_FAILED="SUBSCRIBE_FAILED",e.UNSUBSCRIBE_FAILED="UNSUBSCRIBE_FAILED",e.GATEWAY_P2P_LOST="GATEWAY_P2P_LOST",e.NO_ICE_CANDIDATE="NO_ICE_CANDIDATE",e.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS="CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS",e.EXIST_DISABLED_VIDEO_TRACK="EXIST_DISABLED_VIDEO_TRACK",e.INVALID_REMOTE_USER="INVALID_REMOTE_USER",e.REMOTE_USER_IS_NOT_PUBLISHED="REMOTE_USER_IS_NOT_PUBLISHED",e.CUSTOM_REPORT_SEND_FAILED="CUSTOM_REPORT_SEND_FAILED",e.CUSTOM_REPORT_FREQUENCY_TOO_HIGH="CUSTOM_REPORT_FREQUENCY_TOO_HIGH",e.FETCH_AUDIO_FILE_FAILED="FETCH_AUDIO_FILE_FAILED",e.READ_LOCAL_AUDIO_FILE_ERROR="READ_LOCAL_AUDIO_FILE_ERROR",e.DECODE_AUDIO_FILE_FAILED="DECODE_AUDIO_FILE_FAILED",e.WS_ABORT="WS_ABORT",e.WS_DISCONNECT="WS_DISCONNECT",e.WS_ERR="WS_ERR",e.EXTERNAL_SIGNAL_ABORT="EXTERNAL_SIGNAL_ABORT",e.LIVE_STREAMING_TASK_CONFLICT="LIVE_STREAMING_TASK_CONFLICT",e.LIVE_STREAMING_INVALID_ARGUMENT="LIVE_STREAMING_INVALID_ARGUMENT",e.LIVE_STREAMING_INTERNAL_SERVER_ERROR="LIVE_STREAMING_INTERNAL_SERVER_ERROR",e.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED="LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED",e.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED="LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED",e.LIVE_STREAMING_CDN_ERROR="LIVE_STREAMING_CDN_ERROR",e.LIVE_STREAMING_INVALID_RAW_STREAM="LIVE_STREAMING_INVALID_RAW_STREAM",e.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT="LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT",e.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE="LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE",e.LIVE_STREAMING_WARN_FREQUENT_REQUEST="LIVE_STREAMING_WARN_FREQUENT_REQUEST",e.WEBGL_INTERNAL_ERROR="WEBGL_INTERNAL_ERROR",e.BEAUTY_PROCESSOR_INTERNAL_ERROR="BEAUTY_PROCESSOR_INTERNAL_ERROR",e.CROSS_CHANNEL_WAIT_STATUS_ERROR="CROSS_CHANNEL_WAIT_STATUS_ERROR",e.CROSS_CHANNEL_FAILED_JOIN_SRC="CROSS_CHANNEL_FAILED_JOIN_SEC",e.CROSS_CHANNEL_FAILED_JOIN_DEST="CROSS_CHANNEL_FAILED_JOIN_DEST",e.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST="CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST",e.CROSS_CHANNEL_SERVER_ERROR_RESPONSE="CROSS_CHANNEL_SERVER_ERROR_RESPONSE",e.METADATA_OUT_OF_RANGE="METADATA_OUT_OF_RANGE",e.LOCAL_AEC_ERROR="LOCAL_AEC_ERROR",e.INVALID_PLUGIN="INVALID_PLUGIN",e.DISCONNECT_P2P="DISCONNECT_P2P",e.CONVERTING_IMAGEDATA_TO_BLOB_FAILED="CONVERTING_IMAGEDATA_TO_BLOB_FAILED",e.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED="CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED",e.INIT_DATACHANNEL_TIMEOUT="INIT_DATACHANNEL_TIMEOUT",e.CREATE_DATACHANNEL_ERROR="CREATE_DATACHANNEL_ERROR",e.DATACHANNEL_CONNECTION_TIMEOUT="DATACHANNEL_CONNECTION_TIMEOUT",e.PROHIBITED_OPERATION="PROHIBITED_OPERATION",e.IMAGE_MODERATION_UPLOAD_FAILED="IMAGE_MODERATION_UPLOAD_FAILED",e.P2P_MESSAGE_FAILED="P2P_MESSAGE_FAILED",e}({}),uw=class extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;super(t),aw(this,"code",void 0),aw(this,"message",void 0),aw(this,"data",void 0),aw(this,"name","AgoraRTCException"),this.code=e,this.message="AgoraRTCError ".concat(this.code,": ").concat(t),this.data=n}toString(){return this.data?"".concat(this.message,"\ndata: ").concat(JSON.stringify(this.data)):this.message}print(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"error",t=arguments.length>1?arguments[1]:void 0;return"error"===e&&(t||console).error(this.toString()),"warning"===e&&(t||console).warn(this.toString()),this}throw(e){throw this.print("error",e),this}};function dw(e,t){if("boolean"!=typeof e)throw new uw(lw.INVALID_PARAMS,"Invalid ".concat(t,": The value is of the boolean type."))}function Aw(e,t,n){if(!Or(n).call(n,e))throw new uw(lw.INVALID_PARAMS,"".concat(t," can only be set as ").concat(JSON.stringify(n)))}function pw(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e4;if(e<n||e>r||(!(arguments.length>4&&void 0!==arguments[4])||arguments[4])&&("number"!=typeof(o=e)||o%1!=0))throw new uw(lw.INVALID_PARAMS,"invalid ".concat(t,": the value range is [").concat(n,", ").concat(r,"]. integer only"));var o}function hw(e,t){if("number"!=typeof e){if(!(e.min||e.max||e.ideal||e.exact))throw new uw(lw.INVALID_PARAMS,"".concat(t," is not a valid ConstrainLong"));void 0!==e.min&&pw(e.min,"".concat(t,".min"),0,1/0),void 0!==e.max&&pw(e.max,"".concat(t,".max"),1,1/0),void 0!==e.exact&&pw(e.exact,"".concat(t,".exact"),1,1/0),void 0!==e.ideal&&pw(e.ideal,"".concat(t,".ideal"),1,1/0)}else pw(e,t,1,1/0)}function fw(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:255,o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(null==e)throw new uw(lw.INVALID_PARAMS,"".concat(t||"param"," cannot be empty"));if(!_w(e,n,r,o))throw new uw(lw.INVALID_PARAMS,"Invalid ".concat(t||"string param",": Length of the string: [").concat(n,",").concat(r,"].").concat(o?" ASCII characters only.":""))}function gw(e,t){if(!Array.isArray(e))throw new uw(lw.INVALID_PARAMS,"".concat(t," should be an array"))}function mw(e){return null==e}function _w(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:255,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return"string"==typeof e&&e.length<=n&&e.length>=t&&(!r||function(e){if("string"!=typeof e)return!1;for(let t=0;t<e.length;t+=1){const n=e.charCodeAt(t);if(n<0||n>255)return!1}return!0}(e))}var Ew=function(e){return e.COVERED="COVERED",e.POSITION="POSITION",e.SIZE="SIZE",e.STYLE="STYLE",e}(Ew||{}),vw=function(e){return e.UNMOUNTED="UNMOUNTED",e.INVALID_HTML_ELEMENT="INVALID_HTML_ELEMENT",e}(vw||{});const yw=new class{constructor(){aw(this,"_clientSize",null),aw(this,"getClientWidth",(()=>document.documentElement?document.documentElement.clientWidth:document.body.clientWidth)),aw(this,"getClientHeight",(()=>document.documentElement?document.documentElement.clientHeight:document.body.clientHeight)),aw(this,"getStyle",(e=>window.getComputedStyle(e,null))),aw(this,"checkCssVisibleProperty",(e=>{var t;let n=!0;const r=this.getStyle(e),{display:o,visibility:i,opacity:a,filter:s}=r;return("none"===o||Or(t=["hidden","collapse"]).call(t,i)||Number(a)<.1)&&(n=!1),!!n&&(s&&s.split(" ").filter((e=>{var t;const n=e.split("(")[0];return Or(t=["brightness","blur","opacity"]).call(t,n)})).map((e=>{const[t,n]=e.split(/\(|\)/);return[t,Number(n.match(/^[0-9\.]+/))]})).forEach((e=>{const[t,r]=e;switch(t){case"brightness":(r<.1||r>3)&&(n=!1);break;case"blur":r>3&&(n=!1);break;case"opacity":r<.1&&(n=!1)}})),n)})),aw(this,"checkPropertyUpToAllParentNodes",((e,t)=>{let n=!0,r=!0;const o=e=>t(e);let i=e;for(;i&&r;)o(i)||(n=!1,r=!1),i=i.parentElement,i||(r=!1);return n})),aw(this,"checkActualCssVisibleIncludeInherit",(e=>this.checkPropertyUpToAllParentNodes(e,this.checkCssVisibleProperty))),aw(this,"getSizeAboutClient",(e=>{const{width:t,height:n,left:r,right:o,top:i,bottom:a}=e.getBoundingClientRect(),s=this.getClientWidth(),c=this.getClientHeight();return{width:t,height:n,left:r,right:o,top:i,bottom:a,clientWidth:s,clientHeight:c,clientMin:Math.min(s,c)}})),aw(this,"checkActualSize",(()=>{const{width:e,height:t,clientMin:n}=this._clientSize;return this.checkSizeIsVisible(e,t,n)})),aw(this,"elementFromPoint",((e,t)=>document.elementFromPoint?document.elementFromPoint(e,t):null)),aw(this,"checkCoverForAPoint",((e,t,n)=>{const r=this.elementFromPoint(e,t);return null!==r&&r!==n})),aw(this,"getPointPositionList",(()=>{const{width:e,height:t,left:n,top:r}=this._clientSize,o=e/6,i=t/6,a=[],s=10**6;for(let c=0;c<5;c++)for(let e=0;e<5;e++){const t=(n*s+(0===c?.1:4===c?(o*c*s-1e5)/s:o*c)*s)/s,l=(r*s+(0===e?.1:4===e?(i*e*s-1e5)/s:i*e)*s)/s;a.push({x:t,y:l})}return[...a]})),aw(this,"checkElementCover",(e=>this.getPointPositionList().map((t=>this.checkCoverForAPoint(t.x,t.y,e))).filter((e=>!!e)).length>6)),aw(this,"checkSizeIsVisible",((e,t,n)=>(e>50||n/e<=10)&&(t>50||n/t<=10))),aw(this,"checkSizeOfPartInClient",(()=>{const{left:e,right:t,top:n,bottom:r,clientHeight:o,clientWidth:i,clientMin:a}=this._clientSize;let s,c,l,u;if(e<0)s=0;else{if(!(e<i))return!1;s=e}if(t<0)return!1;if(c=t<i?t:i,n<0)l=0;else{if(!(n<o))return!1;l=n}if(r<0)return!1;u=r<o?r:o;const d=c-s,A=u-l;return this.checkSizeIsVisible(d,A,a)})),aw(this,"returnHiddenResult",(e=>(this._clientSize=null,{visible:!1,reason:e}))),aw(this,"checkOneElementVisible",(e=>{if(e instanceof HTMLElement){if(this.checkElementIsMountedOnDom(e)){if(this.checkActualCssVisibleIncludeInherit(e)){if(this._clientSize=this.getSizeAboutClient(e),this.checkElementCover(e))return this.returnHiddenResult(Ew.COVERED);{const e=this.checkActualSize(),t=this.checkSizeOfPartInClient();return e&&!t?this.returnHiddenResult(Ew.POSITION):e?(this._clientSize=null,{visible:!0}):this.returnHiddenResult(Ew.SIZE)}}return this.returnHiddenResult(Ew.STYLE)}return this.returnHiddenResult(vw.UNMOUNTED)}return this.returnHiddenResult(vw.INVALID_HTML_ELEMENT)})),aw(this,"checkElementIsMountedOnDom",(e=>this.checkPropertyUpToAllParentNodes(e,(e=>"HTML"!==e.nodeName.toUpperCase()?null!==e.parentElement:!!document.documentElement))))}};function bw(e){return(new TextEncoder).encode(e)}const Cw=function(e,t){const n=new Uint8Array(e.byteLength+t.byteLength);return n.set(new Uint8Array(e),0),n.set(new Uint8Array(t),e.byteLength),n},Sw=async e=>function(e,t){let n="";return new Uint8Array(e).forEach((e=>{n+=e.toString(t).padStart(2,"0")})),n}(await crypto.subtle.digest("SHA-256",bw(e)),16);class ww{constructor(){aw(this,"_events",{}),aw(this,"addListener",this.on)}getListeners(e){return this._events[e]?this._events[e].map((e=>e.listener)):[]}on(e,t){this._events[e]||(this._events[e]=[]);const n=this._events[e];-1===this._indexOfListener(n,t)&&n.push({listener:t,once:!1})}once(e,t){this._events[e]||(this._events[e]=[]);const n=this._events[e];-1===this._indexOfListener(n,t)&&n.push({listener:t,once:!0})}off(e,t){if(!this._events[e])return;const n=this._events[e],r=this._indexOfListener(n,t);-1!==r&&n.splice(r,1),0===this._events[e].length&&delete this._events[e]}removeAllListeners(e){e?delete this._events[e]:this._events={}}emit(e){this._events[e]||(this._events[e]=[]);const t=this._events[e].map((e=>e));for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];for(let i=0;i<t.length;i+=1){const n=t[i];n.once&&this.off(e,n.listener),n.listener.apply(this,r||[])}}safeEmit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];[...this._events[e]||[]].forEach((t=>{t.once&&this.off(e,t.listener);try{t.listener.apply(this,n)}catch(r){console.error("safeEmit event:".concat(e," error ").concat(null==r?void 0:r.toString()))}}))}_indexOfListener(e,t){let n=e.length;for(;n--;)if(e[n].listener===t)return n;return-1}}let Tw=null;function Iw(){if(Tw)return Tw;if(window.electron)return Tw=window.electron;if(!window.require)return null;try{return Tw=window.require("electron"),Tw}catch(mp){return null}}let Rw=function(e){return e.CREATE_CLIENT="createClient",e.CHECK_SYSTEM_REQUIREMENTS="checkSystemRequirements",e.SET_AREA="setArea",e.PRELOAD="PRELOAD",e.CHECK_VIDEO_TRACK_IS_ACTIVE="checkVideoTrackIsActive",e.CHECK_AUDIO_TRACK_IS_ACTIVE="checkAudioTrackIsActive",e.CREATE_MIC_AUDIO_TRACK="createMicrophoneAudioTrack",e.CREATE_CUSTOM_AUDIO_TRACK="createCustomAudioTrack",e.CREATE_BUFFER_AUDIO_TRACK="createBufferSourceAudioTrack",e.CREATE_CAM_VIDEO_TRACK="createCameraVideoTrack",e.CREATE_CUSTOM_VIDEO_TRACK="createCustomVideoTrack",e.CREATE_MIC_AND_CAM_TRACKS="createMicrophoneAndCameraTracks",e.CREATE_SCREEN_VIDEO_TRACK="createScreenVideoTrack",e.SET_ENCRYPTION_CONFIG="Client.setEncryptionConfig",e.START_PROXY_SERVER="Client.startProxyServer",e.STOP_PROXY_SERVER="Client.stopProxyServer",e.SET_PROXY_SERVER="Client.setProxyServer",e.SET_TURN_SERVER="Client.setTurnServer",e.SET_CLIENT_ROLE="Client.setClientRole",e.SET_LOW_STREAM_PARAMETER="Client.setLowStreamParameter",e.ENABLE_DUAL_STREAM="Client.enableDualStream",e.DISABLE_DUAL_STREAM="Client.disableDualStream",e.JOIN="Client.join",e.LEAVE="Client.leave",e.PUBLISH="Client.publish",e.UNPUBLISH="Client.unpublish",e.SUBSCRIBE="Client.subscribe",e.MASS_SUBSCRIBE="Client.massSubscribe",e.MASS_UNSUBSCRIBE="Client.massUnsubscribe",e.UNSUBSCRIBE="Client.unsubscribe",e.RENEW_TOKEN="Client.renewToken",e.SET_REMOTE_VIDEO_STREAM_TYPE="Client.setRemoteVideoStreamType",e.SET_STREAM_FALLBACK_OPTION="Client.setStreamFallbackOption",e.ENABLE_AUDIO_VOLUME_INDICATOR="Client.enableAudioVolumeIndicator",e.SEND_CUSTOM_REPORT_MESSAGE="Client.sendCustomReportMessage",e.INSPECT_VIDEO_CONTENT="Client.inspectVideoContent",e.STOP_INSPECT_VIDEO_CONTENT="Client.stopInspectVideoContent",e.JOIN_FALLBACK_TO_PROXY="Client._joinFallbackToProxy",e.ON_LIVE_STREAM_WARNING="Client.onLiveStreamWarning",e.ON_LIVE_STREAM_ERROR="Client.onLiveStreamingError",e.START_LIVE_STREAMING="Client.startLiveStreaming",e.SET_LIVE_TRANSCODING="Client.setLiveTranscoding",e.STOP_LIVE_STREAMING="Client.stopLiveStreaming",e.START_CHANNEL_MEDIA_RELAY="Client.startChannelMediaRelay",e.UPDATE_CHANNEL_MEDIA_RELAY="Client.updateChannelMediaRelay",e.STOP_CHANNEL_MEDIA_RELAY="Client.stopChannelMediaRelay",e.REQUEST_CONFIG_DISTRIBUTE="_config-distribute-request",e.SET_CONFIG_DISTRIBUTE="_configDistribute",e.LOCAL_TRACK_SET_MUTED="LocalTrack.setMute",e.LOCAL_AUDIO_TRACK_PLAY="LocalAudioTrack.play",e.LOCAL_AUDIO_TRACK_PLAY_IN_ELEMENT="LocalAudioTrack.playInElement",e.LOCAL_AUDIO_TRACK_STOP="LocalAudioTrack.stop",e.LOCAL_AUDIO_TRACK_SET_VOLUME="LocalAudioTrack.setVolume",e.MIC_AUDIO_TRACK_SET_DEVICE="MicrophoneAudioTrack.setDevice",e.BUFFER_AUDIO_TRACK_START="BufferSourceAudioTrack.startProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_STOP="BufferSourceAudioTrack.stopProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_PAUSE="BufferSourceAudioTrack.pauseProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_RESUME="BufferSourceAudioTrack.resumeProcessAudioBuffer",e.BUFFER_AUDIO_TRACK_SEEK="BufferSourceAudioTrack.seekAudioBuffer",e.LOCAL_VIDEO_TRACK_PLAY="LocalVideoTrack.play",e.LOCAL_VIDEO_TRACK_STOP="LocalVideoTrack.stop",e.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE="LocalVideoTrack.getVideoElementVisibleStatus",e.LOCAL_VIDEO_TRACK_BEAUTY="LocalVideoTrack.setBeautyEffect",e.LOCAL_VIDEO_SEND_SEI_DATA="LocalVideoTrack.sendSeiData",e.CAM_VIDEO_TRACK_SET_DEVICE="CameraVideoTrack.setDevice",e.CAM_VIDEO_TRACK_SET_ENCODER_CONFIG="CameraVideoTrack.setEncoderConfiguration",e.REMOTE_VIDEO_TRACK_PLAY="RemoteVideoTrack.play",e.REMOTE_VIDEO_TRACK_STOP="RemoteVideoTrack.stop",e.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE="RemoteVideoTrack.getVideoElementVisibleStatus",e.REMOTE_AUDIO_TRACK_PLAY="RemoteAudioTrack.play",e.REMOTE_AUDIO_TRACK_STOP="RemoteAudioTrack.stop",e.REMOTE_AUDIO_SET_VOLUME="RemoteAudioTrack.setVolume",e.REMOTE_AUDIO_SET_OUTPUT_DEVICE="RemoteAudioTrack.setOutputDevice",e.GET_MEDIA_STREAM_TRACK="Track.getMediaStreamTrack",e.STREAM_TYPE_CHANGE="streamTypeChange",e.CONNECTION_STATE_CHANGE="connectionStateChange",e.LOAD_CONFIG_FROM_LOCALSTORAGE="loadConfigFromLocalStorage",e.IMAGE_MODERATION_UPLOAD="imageModerationUpload",e}({}),Ow=function(e){return e.TRACER="tracer",e}({});function Nw(e){return pw(e.timeout,"config.timeout",0,1e5),pw(e.timeoutFactor,"config.timeoutFactor",0,100,!1),pw(e.maxRetryCount,"config.maxRetryConfig",0,1/0),pw(e.maxRetryTimeout,"config.maxRetryTimeout",0,1/0),!0}let kw=function(e){return e[e.AUDIENCE_LEVEL_LOW_LATENCY=1]="AUDIENCE_LEVEL_LOW_LATENCY",e[e.AUDIENCE_LEVEL_ULTRA_LOW_LATENCY=2]="AUDIENCE_LEVEL_ULTRA_LOW_LATENCY",e[e.AUDIENCE_LEVEL_SYNC_LATENCY=3]="AUDIENCE_LEVEL_SYNC_LATENCY",e}({}),Pw=function(e){return e.LEAVE="LEAVE",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.UID_BANNED="UID_BANNED",e.FALLBACK="FALLBACK",e.IP_BANNED="IP_BANNED",e.CHANNEL_BANNED="CHANNEL_BANNED",e.LICENSE_MISSING="LICENSE_MISSING",e.LICENSE_EXPIRED="LICENSE_EXPIRED",e.LICENSE_MINUTES_EXCEEDED="LICENSE_MINUTES_EXCEEDED",e.LICENSE_PERIOD_INVALID="LICENSE_PERIOD_INVALID",e.LICENSE_MULTIPLE_SDK_SERVICE="LICENSE_MULTIPLE_SDK_SERVICE",e.LICENSE_ILLEGAL="LICENSE_ILLEGAL",e.TOKEN_EXPIRE="TOKEN_EXPIRE",e}({});function Dw(e){if(!Array.isArray(e)||e.length<1)return!1;try{e.forEach((e=>{if(!e.urls)throw Error()}))}catch(t){return!1}return!0}function Lw(e){return fw(e.turnServerURL,"turnServerURL"),fw(e.username,"username"),fw(e.password,"password"),e.udpport&&pw(e.udpport,"udpport",1,99999,!0),e.forceturn&&dw(e.forceturn,"forceturn"),e.security&&dw(e.security,"security"),e.tcpport&&pw(e.tcpport,"tcpport",1,99999,!0),!0}function Bw(e){return void 0!==e.level&&Aw(e.level,"level",[1,2,3]),void 0!==e.delay&&pw(e.delay,"delay",0,3e3,!0),!0}let Uw=function(e){return e.CONNECTION_STATE_CHANGE="connection-state-change",e.MEDIA_RECONNECT_START="media-reconnect-start",e.MEDIA_RECONNECT_END="media-reconnect-end",e.IS_USING_CLOUD_PROXY="is-using-cloud-proxy",e.USER_JOINED="user-joined",e.USER_LEAVED="user-left",e.USER_PUBLISHED="user-published",e.USER_UNPUBLISHED="user-unpublished",e.USER_INFO_UPDATED="user-info-updated",e.CLIENT_BANNED="client-banned",e.CHANNEL_MEDIA_RELAY_STATE="channel-media-relay-state",e.CHANNEL_MEDIA_RELAY_EVENT="channel-media-relay-event",e.VOLUME_INDICATOR="volume-indicator",e.CRYPT_ERROR="crypt-error",e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="token-privilege-will-expire",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="token-privilege-did-expire",e.NETWORK_QUALITY="network-quality",e.STREAM_TYPE_CHANGED="stream-type-changed",e.STREAM_FALLBACK="stream-fallback",e.RECEIVE_METADATA="receive-metadata",e.STREAM_MESSAGE="stream-message",e.LIVE_STREAMING_ERROR="live-streaming-error",e.LIVE_STREAMING_WARNING="live-streaming-warning",e.EXCEPTION="exception",e.ERROR="error",e.P2P_LOST="p2p_lost",e.JOIN_FALLBACK_TO_PROXY="join-fallback-to-proxy",e.CHANNEL_FALLBACK_TO_WEBSOCKET="channel-fallback-to-websocket",e.MEDIA_CONNECTION_TYPE_CHANGE="media-connection-type-change",e.PUBLISHED_USER_LIST="published-user-list",e.CONTENT_INSPECT_CONNECTION_STATE_CHANGE="content-inspect-connection-state-change",e.CONTENT_INSPECT_ERROR="content-inspect-error",e.CONTENT_INSPECT_RESULT="content-inspect-result",e.IMAGE_MODERATION_CONNECTION_STATE_CHANGE="image-moderation-connection-state-change",e}({}),Mw=function(e){return e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.MULTI_IP="MULTI_IP",e.TIMEOUT="TIMEOUT",e.OFFLINE="OFFLINE",e.LEAVE="LEAVE",e.P2P_FAILED="P2P_FAILED",e.FALLBACK="FALLBACK",e}({}),xw=function(e){return e.ONLINE="ONLINE",e.OFFLINE="OFFLINE",e}({}),Fw=function(e){return e.NETWORK_STATE_CHANGE="NETWORK_STATE_CHANGE",e.ONLINE="ONLINE",e.OFFLINE="OFFLINE",e}({});function $w(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return 0===e.getListeners(t).length?MA.reject(new uw(lw.UNEXPECTED_ERROR,"can not emit promise")):new MA(((n,o)=>{e.emit(t,...r,n,o)}))}function Vw(e,t){if(0===e.getListeners(t).length)return MA.resolve();for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return $w(e,t,...r)}function Hw(e,t){if(0===e.getListeners(t).length)return null;for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return jw(e,t,...r)}function jw(e,t){let n=null,r=null;for(var o=arguments.length,i=new Array(o>2?o-2:0),a=2;a<o;a++)i[a-2]=arguments[a];if(e.emit(t,...i,(e=>{n=e}),(e=>{r=e})),null!==r)throw r;if(null===n)throw new uw(lw.UNEXPECTED_ERROR,"handler is not sync");return n}const Qw=new class extends ww{set networkState(e){this.emit(Fw.NETWORK_STATE_CHANGE,e,this._networkState),e===xw.ONLINE?this.emit(Fw.ONLINE):e===xw.OFFLINE&&(this.onlineWaiter=new MA((e=>{this.once(Fw.ONLINE,(()=>{this.onlineWaiter=void 0,e(xw.ONLINE)}))})),this.emit(Fw.OFFLINE)),this._networkState=e}get networkState(){return this._networkState}get isOnline(){return this._networkState===xw.ONLINE}constructor(){super(),aw(this,"_moduleName","network-indicator"),aw(this,"_networkState",xw.ONLINE),aw(this,"onlineWaiter",void 0),window.addEventListener("online",(()=>{this.networkState=xw.ONLINE})),window.addEventListener("offline",(()=>{this.networkState=xw.OFFLINE}))}};function Gw(e,t){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}function Kw(e){const t=[];return e.forEach((e=>{-1===t.indexOf(e)&&t.push(e)})),t}function Ww(e){void 0!==MA?MA.resolve().then(e):setTimeout(e,0)}function qw(e){return JSON.parse(JSON.stringify(e))}function zw(e){try{return qw(e)}catch(t){return e}}const Yw={};function Jw(e,t){Yw[t]||(Yw[t]=!0,e())}function Xw(e){const t=window.atob(e),n=new Uint8Array(new ArrayBuffer(t.length));for(let r=0;r<t.length;r+=1)n[r]=t.charCodeAt(r);return n}function Zw(e){let t="";for(let n=0;n<e.length;n+=1)t+=String.fromCharCode(e[n]);return window.btoa(t)}function eT(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,n=(new TextEncoder).encode(e);if(n.length>t)n=n.slice(0,t);else if(n.length<t){const e=new Uint8Array(t);e.set(n),n=e}return n}function tT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Kr(t).call(t,((e,t)=>e+t.length),0),o=new Uint8Array(new ArrayBuffer(r));let i=0;return t.forEach((e=>{o.set(e,i),i+=e.length})),o}function nT(e){return window.TextEncoder?(new TextEncoder).encode(e).length:e.length}function rT(e){let t=0;return(/DingTalk/i.test(navigator.userAgent)||/AliApp/i.test(navigator.userAgent))&&e.realFormData&&(e=e.realFormData),e.forEach((e=>{t+="string"==typeof e?nT(e):e.size})),t+138}function oT(e){const t=new uw(lw.TIMEOUT,"timeout");return new MA(((n,r)=>{window.setTimeout((()=>r(t)),e)}))}function iT(e){return new MA((t=>{window.setTimeout(t,e)}))}function aT(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,t=arguments.length>1?arguments[1]:void 0;const n=Math.random().toString(16).substr(2,e).toLowerCase();return n.length===e?"".concat(t).concat(n):"".concat(t).concat(n)+aT(e-n.length,"")}function sT(){return aT(32,"").toUpperCase()}const cT=()=>{},lT=new class{constructor(){aw(this,"fnMap",new Map)}throttleByKey(e,t,n,r){for(var o=arguments.length,i=new Array(o>4?o-4:0),a=4;a<o;a++)i[a-4]=arguments[a];if(this.fnMap.has(t)){const o=this.fnMap.get(t);if(o.threshold!==n){o.fn(...o.args),clearTimeout(o.timer);const a=window.setTimeout((()=>{const e=this.fnMap.get(t);e&&e.fn(...e.args),this.fnMap.delete(t)}),n);this.fnMap.set(t,{fn:e,threshold:n,timer:a,args:i,skipFn:r})}else o.skipFn&&o.skipFn(...o.args),this.fnMap.set(t,cw(cw({},o),{},{fn:e,args:i,skipFn:r}))}else{const o=window.setTimeout((()=>{const e=this.fnMap.get(t);e&&e.fn(...e.args),this.fnMap.delete(t)}),n);this.fnMap.set(t,{fn:e,threshold:n,timer:o,args:i,skipFn:r})}}},uT=lT.throttleByKey.bind(lT);function dT(e){return"object"==typeof e&&null!==e&&!(e instanceof RegExp)}function AT(e,t){if(!dT(e)||!dT(t))return t;if(Array.isArray(e)&&!Array.isArray(t)||!Array.isArray(e)&&Array.isArray(t))return t;if(Array.isArray(t)&&Array.isArray(e)){const n=[...e];for(let r=0;r<t.length;r++)n[r]=AT(e[r],t[r]);return n}{const n=cw({},e);for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(Object.prototype.hasOwnProperty.call(e,r)?n[r]=AT(e[r],t[r]):n[r]=t[r]);return n}}function pT(e,t){let n=[0];if(n=new Array(t).fill(0),0===e)return n;let r=0;for(;e>0&&(n[r]=255&e,e>>=8,r++,r!==t););return n}function hT(e){return"number"==typeof e?e:e.exact||e.ideal||e.max||e.min||0}function fT(e){const t="0123456789abcdef";function n(e){let n,r="";for(n=0;n<=3;n++)r+=t.charAt(e>>8*n+4&15)+t.charAt(e>>8*n&15);return r}function r(e,t){const n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function o(e,t,n,o,i,a){return r((s=r(r(t,e),r(o,a)))<<(c=i)|s>>>32-c,n);var s,c}function i(e,t,n,r,i,a,s){return o(t&n|~t&r,e,t,i,a,s)}function a(e,t,n,r,i,a,s){return o(t&r|n&~r,e,t,i,a,s)}function s(e,t,n,r,i,a,s){return o(t^n^r,e,t,i,a,s)}function c(e,t,n,r,i,a,s){return o(n^(t|~r),e,t,i,a,s)}const l=function(e){let t;const n=1+(e.length+8>>6),r=new Array(16*n);for(t=0;t<16*n;t++)r[t]=0;for(t=0;t<e.length;t++)r[t>>2]|=e.charCodeAt(t)<<t%4*8;return r[t>>2]|=128<<t%4*8,r[16*n-2]=8*e.length,r}(e);let u,d,A,p,h,f=1732584193,g=-271733879,m=-1732584194,_=271733878;for(u=0;u<l.length;u+=16)d=f,A=g,p=m,h=_,f=i(f,g,m,_,l[u+0],7,-680876936),_=i(_,f,g,m,l[u+1],12,-389564586),m=i(m,_,f,g,l[u+2],17,606105819),g=i(g,m,_,f,l[u+3],22,-1044525330),f=i(f,g,m,_,l[u+4],7,-176418897),_=i(_,f,g,m,l[u+5],12,1200080426),m=i(m,_,f,g,l[u+6],17,-1473231341),g=i(g,m,_,f,l[u+7],22,-45705983),f=i(f,g,m,_,l[u+8],7,1770035416),_=i(_,f,g,m,l[u+9],12,-1958414417),m=i(m,_,f,g,l[u+10],17,-42063),g=i(g,m,_,f,l[u+11],22,-1990404162),f=i(f,g,m,_,l[u+12],7,1804603682),_=i(_,f,g,m,l[u+13],12,-40341101),m=i(m,_,f,g,l[u+14],17,-1502002290),g=i(g,m,_,f,l[u+15],22,1236535329),f=a(f,g,m,_,l[u+1],5,-165796510),_=a(_,f,g,m,l[u+6],9,-1069501632),m=a(m,_,f,g,l[u+11],14,643717713),g=a(g,m,_,f,l[u+0],20,-373897302),f=a(f,g,m,_,l[u+5],5,-701558691),_=a(_,f,g,m,l[u+10],9,38016083),m=a(m,_,f,g,l[u+15],14,-660478335),g=a(g,m,_,f,l[u+4],20,-405537848),f=a(f,g,m,_,l[u+9],5,568446438),_=a(_,f,g,m,l[u+14],9,-1019803690),m=a(m,_,f,g,l[u+3],14,-187363961),g=a(g,m,_,f,l[u+8],20,1163531501),f=a(f,g,m,_,l[u+13],5,-1444681467),_=a(_,f,g,m,l[u+2],9,-51403784),m=a(m,_,f,g,l[u+7],14,1735328473),g=a(g,m,_,f,l[u+12],20,-1926607734),f=s(f,g,m,_,l[u+5],4,-378558),_=s(_,f,g,m,l[u+8],11,-2022574463),m=s(m,_,f,g,l[u+11],16,1839030562),g=s(g,m,_,f,l[u+14],23,-35309556),f=s(f,g,m,_,l[u+1],4,-1530992060),_=s(_,f,g,m,l[u+4],11,1272893353),m=s(m,_,f,g,l[u+7],16,-155497632),g=s(g,m,_,f,l[u+10],23,-1094730640),f=s(f,g,m,_,l[u+13],4,681279174),_=s(_,f,g,m,l[u+0],11,-358537222),m=s(m,_,f,g,l[u+3],16,-722521979),g=s(g,m,_,f,l[u+6],23,76029189),f=s(f,g,m,_,l[u+9],4,-640364487),_=s(_,f,g,m,l[u+12],11,-421815835),m=s(m,_,f,g,l[u+15],16,530742520),g=s(g,m,_,f,l[u+2],23,-995338651),f=c(f,g,m,_,l[u+0],6,-198630844),_=c(_,f,g,m,l[u+7],10,1126891415),m=c(m,_,f,g,l[u+14],15,-1416354905),g=c(g,m,_,f,l[u+5],21,-57434055),f=c(f,g,m,_,l[u+12],6,1700485571),_=c(_,f,g,m,l[u+3],10,-1894986606),m=c(m,_,f,g,l[u+10],15,-1051523),g=c(g,m,_,f,l[u+1],21,-2054922799),f=c(f,g,m,_,l[u+8],6,1873313359),_=c(_,f,g,m,l[u+15],10,-30611744),m=c(m,_,f,g,l[u+6],15,-1560198380),g=c(g,m,_,f,l[u+13],21,1309151649),f=c(f,g,m,_,l[u+4],6,-145523070),_=c(_,f,g,m,l[u+11],10,-1120210379),m=c(m,_,f,g,l[u+2],15,718787259),g=c(g,m,_,f,l[u+9],21,-343485551),f=r(f,d),g=r(g,A),m=r(m,p),_=r(_,h);return n(f)+n(g)+n(m)+n(_)}let gT=1,mT=console,_T=class{static setLogger(e){mT=e}constructor(e,t){aw(this,"id",void 0),aw(this,"lockingPromise",MA.resolve()),aw(this,"locks",0),aw(this,"name",""),aw(this,"lockId",void 0),this.lockId=gT++,e&&(this.name=e),t&&(this.id=t),this.logger("created")}logger(e,t){const n=(this.id?"[".concat(this.id,"]"):"")+"[lock-".concat(this.name,"-").concat(this.lockId,"]"),r="created"===e?"is ".concat(e,"."):"is ".concat(e,", current queue ").concat(this.locks,". ").concat(null!=t?t:"");mT.debug("".concat(n," ").concat(r))}setId(e){this.id=e}get isLocked(){return this.locks>0}lock(e){let t;this.locks+=1,this.logger("locked",e);const n=new MA((n=>{t=()=>{this.locks-=1,this.logger("unlocked",e),n()}})),r=this.lockingPromise.then((()=>t));return this.lockingPromise=this.lockingPromise.then((()=>n)),r}};function ET(e,t){return function(n,r,o){const i=o.value;if("function"!=typeof i)throw new Error("Cannot use mutex on object property.");return o.value=async function(){const n=this[t];if(!n)throw new Error("mutex property key ".concat(t," doesn't exist on ").concat(e));const o=await n.lock("From ".concat(e,".").concat(r));try{for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return await i.apply(this,s)}finally{o()}},o}}const vT={timeout:500,timeoutFactor:1.5,maxRetryCount:1/0,maxRetryTimeout:1e4};function yT(e,t){const n=Math.floor(t.timeout*Math.pow(t.timeoutFactor,e));return Math.min(t.maxRetryTimeout,n)}function bT(e,t,n,r){const o=Object.assign({},vT,r);let i=o.timeout;const a=async()=>{var e;await(e=i,new MA((t=>{window.setTimeout(t,e)}))),i*=o.timeoutFactor,i=Math.min(o.maxRetryTimeout,i)};let s=!1;const c=new MA((async(r,i)=>{t=t||(()=>!1),n=n||(()=>!0);for(let l=0;l<o.maxRetryCount;l+=1){if(s)return i(new uw(lw.OPERATION_ABORTED));try{const n=await e();if(!t(n,l))return r(n);if(l+1===o.maxRetryCount)return r(n);await a()}catch(c){if(!n(c,l))return i(c);if(l+1===o.maxRetryCount)return i(c);await a()}}}));return c.cancel=()=>s=!0,c}class CT{constructor(e){aw(this,"input",[]),aw(this,"size",void 0),this.size=e}add(e){this.input.push(e),this.input.length>this.size&&this.input.splice(0,1)}mean(){var e;return 0===this.input.length?0:Kr(e=this.input).call(e,((e,t)=>e+t))/this.input.length}}let ST,wT=0,TT=0;function IT(e,t,n,r){return new MA(((r,o)=>{t.responseType=t.responseType||"json",t.data&&!n?(t.data=JSON.stringify(t.data),wT+=nT(t.data)):n&&(t.data.size?wT+=t.data.size:t.data instanceof FormData?wT+=rT(t.data):wT+=nT(JSON.stringify(t.data))),t.headers=t.headers||{},t.headers["Content-Type"]=t.headers["Content-Type"]||"application/json",t.method="POST",t.url=e,yS.request(t).then((e=>{"string"==typeof e.data?TT+=nT(e.data):e.data instanceof ArrayBuffer||e.data instanceof Uint8Array?TT+=e.data.byteLength:TT+=nT(JSON.stringify(e.data)),r(e.data)})).catch((e=>{yS.isCancel(e)?o(new uw(lw.OPERATION_ABORTED,"cancel token canceled")):"ECONNABORTED"===e.code?o(new uw(lw.NETWORK_TIMEOUT,e.message)):e.response?o(new uw(lw.NETWORK_RESPONSE_ERROR,e.response.status)):o(new uw(lw.NETWORK_ERROR,e.message))}))}))}async function RT(e,t){const n=new Blob([t.data],{type:"buffer"});return await IT(e,cw(cw({},t),{},{data:n,headers:{"Content-Type":"application/octet-stream"}}),!0)}const OT=()=>void 0!==window.isSecureContext,NT=function(e){if(e.match(/[0-9]+\.[0-9]+\.[0-9]+$/))return e;const t=e.match(/([0-9]+\.[0-9]+\.[0-9]+)\-([0-9]+)/);if(t&&t[1]&&t[2]){const e=t[1],n=t[2];return"".concat(e,".").concat(n)}return"4.0.0.999"}("4.22.2"),kT=function(){try{return!0===JSON.parse("true")}catch(mp){return!0}}();let PT=function(e){return e.Default="default",e.Auto="auto",e.Relay="relay",e.SdRtn="sd-rtn",e}({});const DT=function(){const e="us".concat("erna","me"),t="pa".concat("sswo","rd"),n=["t","s","t"];n.splice(1,0,"e");const r=n.join(""),o=[];for(let s=0;s<6;s++)o.push("1");const i=o.join(""),a={};return a[e]=r,a[t]=i,Object.assign(a,{turnServerURL:"",tcpport:3433,udpport:3478,forceturn:!1})}();window.DEFAULT_TURN_CONFIG=DT;const LT={MIN_FRAME_RATE:1,MAX_FRAME_RATE:30,MAX_THRESHOLD_FRAMERATE:30,BITRATE_MIN_THRESHOLD:100,BITRATE_MAX_THRESHOLD:100,MAX_SCALE:5,BWE_SCALE_UP_THRESHOLD:.6,BWE_SCALE_DOWN_THRESHOLD:.6,PERF_SCALE_UP_THRESHOLD:.7,PERF_SCALE_DOWN_THRESHOLD:.6,MOTION_RESOLUTION_FACTOR:.8,MOTION_BITRATE_FACTOR:.6,DETAIL_FRAMERATE_FACTOR:.8,DETAIL_BITRATE_FACTOR:.6,BALANCE_RESOLUTION_FACTOR:.9,BALANCE_FRAMERATE_FACTOR:.9,BALANCE_BITRATE_FACTOR:.6,OVERUSE_TIMES_THRESHOLD:10,UNDERUSE_TIMES_THRESHOLD:40},BT="v4.22.2-0-g4caa29bb(10/28/2024, 2:37:34 PM)",UT=cw(cw({PROCESS_ID:"",ENCRYPT_AES:!0,AREAS:["CHINA","GLOBAL"],WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io","webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io","webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-web-2.ap.sd-rtn.com","cds-ap-web-3.agora.io","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-web-2.ap.sd-rtn.com","sua-ap-web-3.agora.io","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-ap-web-1.agora.io","uap-web-2.ap.sd-rtn.com","uap-ap-web-3.agora.io","uap-web-4.ap.sd-rtn.com"],LOG_UPLOAD_SERVER:"logservice.agora.io",EVENT_REPORT_DOMAIN:"statscollector-1.agora.io",EVENT_REPORT_BACKUP_DOMAIN:"web-2.statscollector.sd-rtn.com",ENABLE_EVENT_REPORT:!0,GATEWAY_ADDRESS:[],GATEWAY_WSS_ADDRESS:"",LIVE_STREAMING_ADDRESS:"",HTTP_CONNECT_TIMEOUT:5e3,SIGNAL_REQUEST_TIMEOUT:1e4,REPORT_STATS:!0,UPLOAD_LOG:!1,NOT_REPORT_EVENT:[],PING_PONG_TIME_OUT:10,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:3e3,CONFIG_DISTRIBUTE_INTERVAL:3e5,ENABLE_CONFIG_DISTRIBUTE:!0,CANDIDATE_TIMEOUT:5e3,SHOW_REPORT_INVOKER_LOG:!1,SHOW_REPORT_USER_INVOKER_LOG:!0,JOIN_EXTEND:"",PUB_EXTEND:"",SUB_EXTEND:"",FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,MAX_UPLOAD_CACHE:50,UPLOAD_CACHE_INTERVAL:2e3,AJAX_REQUEST_CONCURRENT:3,REPORT_APP_SCENARIO:void 0,GATEWAY_DOMAINS:["edge.agora.io","edge.sd-rtn.com"],CONNECT_GATEWAY_WITHOUT_DOMAIN:!1,WORKER_DOMAIN:"edge.agora.io",TURN_DOMAIN:"edge.agora.io",EVENT_REPORT_RETRY:!0,CHROME_FORCE_PLAN_B:!1,AUDIO_SOURCE_VOLUME_UPDATE_INTERVAL:400,AUDIO_SOURCE_AVG_VOLUME_DURATION:3e3,AUDIO_VOLUME_INDICATION_INTERVAL:2e3,VOLUME_VOICE_WEIGHT:10,GET_VOLUME_OF_MUTED_AUDIO_TRACK:!1,STATS_UPDATE_INTERVAL:250,NORMAL_EVENT_QUEUE_CAPACITY:100,CUSTOM_REPORT:!0,CUSTOM_REPORT_LIMIT:20,PROXY_SERVER_TYPE2:"webnginx-proxy.agora.io",PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com","webrtc-cloud-proxy.agora.io"],CUSTOM_PUB_ANSWER_MODIFIER:null,CUSTOM_SUB_ANSWER_MODIFIER:null,CUSTOM_PUB_OFFER_MODIFIER:null,CUSTOM_SUB_OFFER_MODIFIER:null,DSCP_TYPE:"high",REMOVE_NEW_CODECS:!0,FRAGEMENT_LENGTH:3,WEBSOCKET_COMPRESS:!1,SIMULCAST:!1,PRELOAD_MEDIA_COUNT:0,CHECK_VIDEO_VISIBLE_INTERVAL:3e4,CHECK_LOCAL_STATS_INTERVAL:250,PROFILE_SWITCH_INTERVAL:2e3,UNSUPPORTED_VIDEO_CODEC:[],ENUMERATE_DEVICES_INTERVAL:!1,ENUMERATE_DEVICES_INTERVAL_TIME:1e4,USE_NEW_TOKEN:!1,CLOSE_AFB_FOR_LOCAL_AP:!0,JOIN_MAX_CONCURRENCY:6,JOIN_WITH_FALLBACK_SIGNAL_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY:!0,JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE:!1,JOIN_GATEWAY_TRY_443PORT_DURATION:2e3,JOIN_GATEWAY_USE_443PORT_ONLY:!1,JOIN_GATEWAY_USE_DUAL_DOMAIN:!0,JOIN_GATEWAY_FALLBACK_PORT:443,USE_TURN_SERVER_OF_GATEWAY:!1,H264_PROFILE_LEVEL_ID:"",USE_NEW_LOG:!1,LOG_VERSION:3,MEDIA_DEVICE_CONSTRAINTS:null,ENCRYPT_PROXY_USERNAME_AND_PSW:!0,SDP_LOGGING:!1,CSP_DETECTED_HOSTNAME_LIST:["agora.io","sd-rtn.com"],REMOTE_AUDIO_TRACK_USES_WEB_AUDIO:!1,LOCAL_AUDIO_TRACK_USES_WEB_AUDIO:!1,BITRATE_ADAPTER_TYPE:"STANDARD_BITRATE",AI_DENOISER_PARAMETERS:{excludedLinks:[]},ADJUST_3A_FROM_PLUGINS:!0,RAISE_H264_BASELINE_PRIORITY:!0,FILTER_SEND_H264_BASELINE:!1,FIRST_H264_PROFILE_LEVEL_ID:"42001f",FIRST_PACKETIZATION_MODE:"",X_GOOGLE_START_BITRATE:void 0,NEW_REPORT_SERVER:!1,NEW_REPORT_SERVER_DOMAINS:["data-reporting.agora.io","data-reporting.agora.io"],VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT:3e5,VIDEO_INSPECT_INTERVAL_MINIMUM:1e3,VIDEO_INSPECT_QUALITY_RATIO:.9,VIDEO_INSPECT_WORKER_MANAGER_HOST:"edge.agora.io",VIDEO_INSPECT_WORKER_MANAGER_PORT:"",VIDEO_INSPECT_WORKER_PORT:"",SHOW_VIDEO_INSPECT_WORKER_MESSAGE:!1,STATS_COLLECTOR_PORT:443,FORCE_TURN_TCP:!1,WEBAUDIO_INIT_OPTIONS:void 0,FILTER_VIDEO_FEC:!0,FILTER_AUDIO_FEC:!1,CHROME_DUAL_STREAM_USE_ENCODING:!0,DISABLE_DUAL_STREAM_USE_ENCODING:!1,EXTENSION_USAGE_UPLOAD_INTERVAL:1e4,ICE_RESTART:!0,ICE_RESTART_INTERVAL:1e4,NEW_ICE_RESTART:!1,TRANSMITTER_INITIAL_RTT:30,TRANSMITTER_INITIAL_RTO:30,TRANSMITTER_MAX_BATCH_ACK_COUNT:2,TRANSMITTER_MAX_RTO:500,DATACHANNEL_COMPRESS:!1,FINGERPRINT:null,DC_JOIN_WITH_FAILBACK:5e3,ENABLE_VIDEO_FRAME_CALLBACK:!0,VIDEO_FREEZE_DURATION:500,SPATIALIZER_PARAMETERS:{},UPLOAD_LOG_INTERVAL:3e3,UPLOAD_LOG_REQUEST_RETRY_INTERVAL:2e3,UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL:2e4,UPLOAD_LOG_TRY_INTERVAL_WHILE_OFF:5e3,UPLOAD_LOG_RETRY_INTERVAL_V1:1e4,UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1:200,UPLOAD_LOG_LENGTH_EACH_TIME:10,APP_TYPE:0,DISABLE_WEBAUDIO:!1,CHANNEL_MEDIA_RELAY_SERVERS:void 0,KEEP_LAST_FRAME:!0,FORWARD_P2P_CREATION:!0,SYNC_GROUP:!0,BLOCK_LOCAL_CLIENT:!1,AP_AREA:!0,ENABLE_ENCODED_TRANSFORM:!1,ENABLE_VIDEO_SEI:!1,IMAGE_MODERATION_WORKER_HOST:"edge.agora.io",IMAGE_MODERATION_WORKER_MESSAGE_LENGTH_LIMIT:3e5,IMAGE_MODERATION_INTERVAL_MINIMUM:1e3,SHOW_IMAGE_MODERATION_WORKER_MESSAGE:!1,IMAGE_MODERATION_QUALITY_RATIO:.9,IMAGE_MODERATION_UPLOAD_REPORT_INTERVAL:5e3,SHOW_GLOBAL_CLIENT_LIST:!1,DATASTREAM_MAX_RETRANSMITS:10,TCP_CANDIDATE_ONLY:!1,EXTERNAL_SIGNAL_REQUEST_TIMEOUT:3e3,SHOW_P2P_LOG:!1,MAX_P2P_TIMEOUT:3e4,P2P_TOKEN_INTERVAL:1e3,SHOW_DATASTREAM2_LOG:!1,RESTRICTION_SET_PLAYBACK_DEVICE:!0,USE_PURE_ENCRYPTION_MASTER_KEY:!1,ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,FILEPATH_LENMAX:255,DUALSTREAM_OPERATION_CHECK:!0,MEDIA_ELEMENT_EXISTS_DEPTH:3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,STATS_FILTER:{transportId:!0,googTrackId:!0},FILTER_VIDEO_CODEC:[],USE_NEW_NETWORK_CONFIG:!1,AUTO_RESET_AUDIO_ROUTE:!1,PLUGIN_INFO:[],OVERUSE_DETECTOR_PARAMS:LT,ENABLE_AG_ADAPTATION:!0,FORCE_AG_HIGH_FRAMERATE:!1,FORCE_SUPPORT_AG_ADAPTATION:!1,CUSTOM_ADAPTATION_DEFAULT_MODE:"",ENCODER_CONFIG_LIMIT:{},CAMERA_CAPTURE_CONFIG:void 0,HIDE_NO_POSTER:!1,AP_CACHE_NUM:10,AP_UPDATE_INTERVAL:12e4,AP_CACHE_LIFETIME:12e4,MAX_PRELOAD_ASYNC_LENGTH:3,ENABLE_PRELOAD:!0,DISABLE_SCREEN_SHARE_REMB:!1},{ENABLE_PUBLISHED_USER_LIST:!0,MAX_SUBSCRIPTION:50,SUBSCRIBE_AUDIO_FILTER_TOPN:void 0,ENABLE_PUBLISH_AUDIO_FILTER:void 0,ENABLE_USER_LICENSE_CHECK:!0,USE_PUB_RTX:!0,USE_SUB_RTX:!0,DISABLE_FEC:void 0,ENABLE_NTP_REPORT:!1,ENABLE_INSTANT_VIDEO:!1,ENABLE_DATASTREAM_2:!1,ENABLE_USER_AUTO_REBALANCE_CHECK:!0,USE_XR:!0,ENABLE_LOSSBASED_BWE:!0,ENABLE_AUT_CC:!1,ENABLE_CC_FALLBACK:void 0,ENABLE_PREALLOC_PC:!1,SUBSCRIBE_TWCC:!0,PUBLISH_TWCC:!1,ENABLE_SVC:!1,ENABLE_SVC_DEFAULT_CODECS:["H264","VP8","VP9","AV1"],SVC:[],ENABLE_FULL_LINK_AV_SYNC:!1,SVC_MODE:null,PRE_SUB_NUM:2,ENABLE_PRE_SUB:!1,ENABLE_AUT_FEEDBACK:!1}),{},{USE_CANDIDATE_FROM_AP_DETAIL:!1,AP_REQUEST_DETAIL:void 0,COMPATIBLE_SDP_EXTENSION:["gdpr_forbidden"]});function MT(e,t,n){var r,o,i;Or(r=Object.keys(UT)).call(r,e)&&(!n&&Or(o=Object.keys(FT)).call(o,e)||(UT[e]=t,"ENABLE_VIDEO_SEI"===e&&!0===t&&(UT.ENABLE_ENCODED_TRANSFORM=!0),"USE_NEW_NETWORK_CONFIG"===e&&t&&(i=!!t,UT.USE_NEW_NETWORK_CONFIG=i,i&&(UT.WEBCS_DOMAIN=["webrtc2-2.ap.sd-rtn.com"],UT.WEBCS_DOMAIN_BACKUP_LIST=["webrtc2-4.ap.sd-rtn.com"],UT.CDS_AP=["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],UT.ACCOUNT_REGISTER=["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],UT.EVENT_REPORT_DOMAIN="web-2.statscollector.sd-rtn.com",UT.EVENT_REPORT_BACKUP_DOMAIN="statscollector-1.agora.io",UT.GATEWAY_DOMAINS=["edge.sd-rtn.com"])),"ENABLE_PRE_SUB"===e&&t&&(UT.ENABLE_INSTANT_VIDEO=!0,UT.ENABLE_PREALLOC_PC=!0),"ENABLE_SVC"===e&&t&&(UT.ENABLE_AUT_CC=!0)))}function xT(e){return UT[e]}kT||(UT.WEBCS_DOMAIN=["ap-web-1-oversea.agora.io","ap-web-1-north-america.agora.io"],UT.WEBCS_DOMAIN_BACKUP_LIST=["ap-web-2-oversea.agora.io","ap-web-2-north-america.agora.io"],UT.PROXY_CS=["proxy-ap-web-oversea.agora.io","proxy-ap-web-america.agora.io"],UT.CDS_AP=["cds-ap-web-oversea.agora.io","cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],UT.ACCOUNT_REGISTER=["sua-ap-web-oversea.agora.io","sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UT.UAP_AP=["uap-ap-web-oversea.agora.io","uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],UT.LOG_UPLOAD_SERVER="logservice-oversea.agora.io",UT.EVENT_REPORT_DOMAIN="statscollector-1-oversea.agora.io",UT.EVENT_REPORT_BACKUP_DOMAIN="statscollector-2-oversea.agora.io",UT.PROXY_SERVER_TYPE3="webrtc-cloud-proxy.agora.io",UT.AREAS=["NORTH_AMERICA","OVERSEA"]);const FT={};var $T=function(e){return e.SET_SESSION_ID="SET_SESSION_ID",e.SET_P2P_ID="SET_P2P_id",e.SET_DC_ID="SET_DC_id",e.SET_UID="SET_UID",e.SET_INT_UID="SET_INT_UID",e.SET_PUB_ID="SET_PUB_ID",e.SET_CLOUD_PROXY_SERVER_MODE="SET_CLOUD_PROXY_SERVER_MODE",e.KEY_METRIC_CLIENT_CREATED="KEY_METRIC_CLIENT_CREATED",e.KEY_METRIC_JOIN_START="KEY_METRIC_JOIN_START",e.AVOID_JOIN_START="AVOID_JOIN_START",e.KEY_METRIC_JOIN_END="KEY_METRIC_JOIN_END",e.KEY_METRIC_REQUEST_AP_START="KEY_METRIC_REQUEST_AP_START",e.KEY_METRIC_REQUEST_AP_END="KEY_METRIC_REQUEST_AP_END",e.KEY_METRIC_JOIN_GATEWAY_START="KEY_METRIC_JOIN_GATEWAY_START",e.KEY_METRIC_JOIN_GATEWAY_END="KEY_METRIC_JOIN_GATEWAY_END",e.KEY_METRIC_PEER_CONNECTION_START="KEY_METRIC_PEER_CONNECTION_START",e.KEY_METRIC_PEER_CONNECTION_END="KEY_METRIC_PEER_CONNECTION_END",e.KEY_METRIC_DESCRIPTION_START="KEY_METRIC_DESCRIPTION_START",e.KEY_METRIC_ICE_CONNECTION_END="KEY_METRIC_ICE_CONNECTION_END",e.KEY_METRIC_SIGNAL_CHANNEL_OPEN="KEY_METRIC_SIGNAL_CHANNEL_OPEN",e.KEY_METRIC_PUBLISH="KEY_METRIC_PUBLISH",e.KEY_METRIC_SUBSCRIBE="KEY_METRIC_SUBSCRIBE",e.RECORD_JOIN_CHANNEL_SERVICE="RECORD_JOIN_CHANNEL_SERVICE",e.RESET_JOIN_CHANNEL_SERVICE_RECORDS="RESET_JOIN_CHANNEL_SERVICE_RECORDS",e.RESET_KEY_METRICS="RESET_KEY_METRICS",e.SET_USE_P2P="SET_USE_P2P",e.SET_TRANSPORT_TYPE="SET_TRANSPORT_TYPE",e}($T||{});class VT{constructor(e,t,n,r){aw(this,"state",void 0),this.state={codec:e,audioCodec:t,mode:n,clientId:r,sessionId:null,p2pId:0,dcId:0,pubId:0,subId:0,avoidJoinStart:0,keyMetrics:{publish:[],subscribe:[]},joinChannelServiceRecords:[],cloudProxyServerMode:"disabled",useP2P:!1,p2pTransport:PT.Default}}dispatch(e){this.state=function(e,t){switch(t.type){case $T.SET_SESSION_ID:return cw(cw({},e),{},{sessionId:t.sessionId});case $T.SET_P2P_ID:return cw(cw({},e),{},{p2pId:t.p2pId});case $T.SET_UID:return cw(cw({},e),{},{uid:t.uid});case $T.SET_INT_UID:return cw(cw({},e),{},{intUid:t.intUid});case $T.SET_PUB_ID:return cw(cw({},e),{},{pubId:t.pubId});case $T.KEY_METRIC_CLIENT_CREATED:return cw(cw({},e),{},{keyMetrics:cw(cw({},e.keyMetrics),{},{clientCreated:t.metric})});case $T.KEY_METRIC_JOIN_START:return cw(cw({},e),{},{keyMetrics:cw(cw({},e.keyMetrics),{},{joinStart:t.metric})});case $T.AVOID_JOIN_START:return cw(cw({},e),{},{avoidJoinStart:t.avoidJoinStart});case $T.KEY_METRIC_JOIN_END:return cw(cw({},e),{},{keyMetrics:cw(cw({},e.keyMetrics),{},{joinEnd:t.metric})});case $T.KEY_METRIC_REQUEST_AP_START:return cw(cw({},e),{},{keyMetrics:cw(cw({},e.keyMetrics),{},{requestAPStart:t.metric})});case $T.KEY_METRIC_REQUEST_AP_END:return cw(cw({},e),{},{keyMetrics:cw(cw({},e.keyMetrics),{},{requestAPEnd:t.metric})});case $T.KEY_METRIC_JOIN_GATEWAY_START:return cw(cw({},e),{},{keyMetrics:cw(cw({},e.keyMetrics),{},{joinGatewayStart:t.metric})});case $T.KEY_METRIC_JOIN_GATEWAY_END:return cw(cw({},e),{},{keyMetrics:cw(cw({},e.keyMetrics),{},{joinGatewayEnd:t.metric})});case $T.KEY_METRIC_PEER_CONNECTION_START:return cw(cw({},e),{},{keyMetrics:cw(cw({},e.keyMetrics),{},{peerConnectionStart:t.metric})});case $T.KEY_METRIC_PEER_CONNECTION_END:return cw(cw({},e),{},{keyMetrics:cw(cw({},e.keyMetrics),{},{peerConnectionEnd:t.metric})});case $T.KEY_METRIC_DESCRIPTION_START:return cw(cw({},e),{},{keyMetrics:cw(cw({},e.keyMetrics),{},{descriptionStart:t.metric})});case $T.KEY_METRIC_SIGNAL_CHANNEL_OPEN:return cw(cw({},e),{},{keyMetrics:cw(cw({},e.keyMetrics),{},{signalChannelOpen:t.metric})});case $T.KEY_METRIC_ICE_CONNECTION_END:return cw(cw({},e),{},{keyMetrics:cw(cw({},e.keyMetrics),{},{iceConnectionEnd:t.metric})});case $T.KEY_METRIC_PUBLISH:{const n=e.keyMetrics.publish,r=n.findIndex((e=>e.trackId===t.metric.trackId));return-1!==r?(n[r]=cw(cw({},n[r]),t.metric),cw(cw({},e),{},{keyMetrics:cw(cw({},e.keyMetrics),{},{publish:[...n]})})):cw(cw({},e),{},{keyMetrics:cw(cw({},e.keyMetrics),{},{publish:[...e.keyMetrics.publish,t.metric]})})}case $T.KEY_METRIC_SUBSCRIBE:{const n=e.keyMetrics.subscribe,r=n.findIndex((e=>e.userId===t.metric.userId&&e.type===t.metric.type));return-1!==r?(n[r]=cw(cw({},n[r]),t.metric),cw(cw({},e),{},{keyMetrics:cw(cw({},e.keyMetrics),{},{subscribe:[...n]})})):cw(cw({},e),{},{keyMetrics:cw(cw({},e.keyMetrics),{},{subscribe:[...e.keyMetrics.subscribe,t.metric]})})}case $T.SET_CLOUD_PROXY_SERVER_MODE:return e.cloudProxyServerMode=t.mode,e;case $T.RECORD_JOIN_CHANNEL_SERVICE:return"number"!=typeof t.index?e.joinChannelServiceRecords=[...e.joinChannelServiceRecords,t.record]:(e.joinChannelServiceRecords[t.index]=cw(cw({},e.joinChannelServiceRecords[t.index]),t.record),e.joinChannelServiceRecords=[...e.joinChannelServiceRecords]),e;case $T.RESET_JOIN_CHANNEL_SERVICE_RECORDS:return e.joinChannelServiceRecords=[],e;case $T.RESET_KEY_METRICS:return e.keyMetrics={publish:[],subscribe:[]},e;case $T.SET_USE_P2P:return cw(cw({},e),{},{useP2P:t.val});case $T.SET_TRANSPORT_TYPE:return cw(cw({},e),{},{p2pTransport:t.val});default:return e}}(this.state,e)}set sessionId(e){this.dispatch({type:$T.SET_SESSION_ID,sessionId:e})}get sessionId(){return this.state.sessionId}set codec(e){this.state.codec=e}get codec(){return this.state.codec}get mode(){return this.state.mode}get audioCodec(){return this.state.audioCodec}get clientId(){return this.state.clientId}set p2pId(e){this.dispatch({type:$T.SET_P2P_ID,p2pId:e})}get p2pId(){return this.state.p2pId}set dcId(e){this.dispatch({type:$T.SET_DC_ID,dcId:e})}get dcId(){return this.state.dcId}set uid(e){this.dispatch({type:$T.SET_UID,uid:e})}get uid(){return this.state.uid}set intUid(e){this.dispatch({type:$T.SET_INT_UID,intUid:e})}get intUid(){return this.state.intUid}set pubId(e){this.dispatch({type:$T.SET_PUB_ID,pubId:e})}get pubId(){return this.state.pubId}set cloudProxyServerMode(e){this.dispatch({type:$T.SET_CLOUD_PROXY_SERVER_MODE,mode:e})}get cloudProxyServerMode(){return this.state.cloudProxyServerMode}set useP2P(e){this.dispatch({type:$T.SET_USE_P2P,val:e})}get useP2P(){return this.state.useP2P}set p2pTransport(e){this.dispatch({type:$T.SET_TRANSPORT_TYPE,val:e})}get p2pTransport(){return this.state.p2pTransport}clientCreated(){this.dispatch({type:$T.KEY_METRIC_CLIENT_CREATED,metric:Date.now()})}joinStart(){this.dispatch({type:$T.KEY_METRIC_JOIN_START,metric:Date.now()})}joinEnd(){this.dispatch({type:$T.KEY_METRIC_JOIN_END,metric:Date.now()})}requestAPStart(){this.dispatch({type:$T.KEY_METRIC_REQUEST_AP_START,metric:Date.now()})}requestAPEnd(){this.dispatch({type:$T.KEY_METRIC_REQUEST_AP_END,metric:Date.now()})}joinGatewayStart(){this.dispatch({type:$T.KEY_METRIC_JOIN_GATEWAY_START,metric:Date.now()})}joinGatewayEnd(){this.dispatch({type:$T.KEY_METRIC_JOIN_GATEWAY_END,metric:Date.now()})}peerConnectionStart(){this.dispatch({type:$T.KEY_METRIC_PEER_CONNECTION_START,metric:Date.now()})}peerConnectionEnd(){this.dispatch({type:$T.KEY_METRIC_PEER_CONNECTION_END,metric:Date.now()})}descriptionStart(){this.dispatch({type:$T.KEY_METRIC_DESCRIPTION_START,metric:Date.now()})}signalChannelOpen(){this.dispatch({type:$T.KEY_METRIC_SIGNAL_CHANNEL_OPEN,metric:Date.now()})}iceConnectionEnd(){this.dispatch({type:$T.KEY_METRIC_ICE_CONNECTION_END,metric:Date.now()})}publish(e,t,n,r){this.dispatch({type:$T.KEY_METRIC_PUBLISH,metric:cw(cw({trackId:e,type:t},n&&{publishStart:n}),r&&{publishEnd:r})})}subscribe(e,t,n,r,o,i,a){this.dispatch({type:$T.KEY_METRIC_SUBSCRIBE,metric:cw(cw(cw(cw(cw({userId:e,type:t},n&&{subscribeStart:n}),r&&{subscribeEnd:r}),o&&{firstFrame:o}),i&&{streamAdded:i}),a&&{firstDecoded:a})})}massSubscribe(e,t,n,r){e.forEach((e=>{this.dispatch({type:$T.KEY_METRIC_SUBSCRIBE,metric:cw(cw(cw({userId:e.userId,type:e.type},t&&{subscribeStart:t}),n&&{subscribeEnd:n}),r&&{firstFrame:r})})}))}get keyMetrics(){return this.state.keyMetrics}recordJoinChannelService(e,t){"gateway"===e.service&&Array.isArray(e.urls)&&(e.urls=e.urls.map((e=>e.replace(/(\d+)-\d+-\d+-(\d+)/,"$1-*-*-$2"))));try{return"number"!=typeof t?(this.dispatch({type:$T.RECORD_JOIN_CHANNEL_SERVICE,record:cw(cw({},e),{},{sessionId:this.sessionId,cloudProxyMode:this.cloudProxyServerMode,uid:this.uid})}),this.state.joinChannelServiceRecords.length-1):(t<0||t>=this.state.joinChannelServiceRecords.length||this.dispatch({type:$T.RECORD_JOIN_CHANNEL_SERVICE,record:e,index:t}),t)}catch(n){return 0}}resetJoinChannelServiceRecords(){this.dispatch({type:$T.RESET_JOIN_CHANNEL_SERVICE_RECORDS})}resetKeyMetrics(){this.dispatch({type:$T.RESET_KEY_METRICS})}get joinChannelServiceRecords(){try{return this.state.joinChannelServiceRecords}catch(mp){return[]}}get avoidJoinStart(){return this.state.avoidJoinStart}set avoidJoinStart(e){this.dispatch({type:$T.AVOID_JOIN_START,avoidJoinStart:e})}}let HT=function(e){return e.h264="h264",e.h265="h265",e.vp8="vp8",e.vp9="vp9",e.av1="av1",e}({});!function(e){e.opus="opus",e.pcma="pcma",e.pcmu="pcmu",e.g722="g722"}({});const jT=128,QT=96,GT=1e3,KT=10;let WT=0;function qT(e,t,n){return(t="symbol"==typeof(r=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t))?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e;var r}function zT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function YT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zT(Object(n),!0).forEach((function(t){qT(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const JT=new class extends ww{constructor(){super(...arguments),qT(this,"currentUploadLogID",0)}reportLogUploadError(e){const{errorRange:t}=e;t[t.length-1]&&t[t.length-1]>this.currentUploadLogID&&(this.currentUploadLogID=t[t.length-1],this.emit("REPORT_LOG_UPLOAD",e))}};class XT{constructor(e){qT(this,"logger",void 0),qT(this,"prefixLists",[]),this.logger=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.debug(...this.prefixLists,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.info(...this.prefixLists,...t)}warning(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.warning(...this.prefixLists,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.error(...this.prefixLists,...t)}prefix(e){return this.prefixLists.push(e),this}popPrefix(){return this.prefixLists.pop(),this}}function ZT(){const e=new Date;return e.toTimeString().split(" ")[0]+":"+e.getMilliseconds()}function eI(){const e=new Date,t=/((\d+:){2}\d+)/.exec((new Date).toUTCString());return t?(null==t?void 0:t[0])+":"+e.getUTCMilliseconds():e.toTimeString().split(" ")[0]+":"+e.getMilliseconds()}const tI={DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4},nI=Date.now(),rI=e=>{for(const t in tI)if(Object.prototype.hasOwnProperty.call(tI,t)&&tI[t]===e)return t;return"DEFAULT"},oI=new class{constructor(){qT(this,"proxyServerURL",void 0),qT(this,"logLevel",tI.DEBUG),qT(this,"uploadState","collecting"),qT(this,"uploadLogWaitingList",[]),qT(this,"uploadLogUploadingList",[]),qT(this,"uploadErrorCount",0),qT(this,"currentLogID",0),qT(this,"url",void 0),qT(this,"extLog",((e,t)=>{this.appendLogToWaitingList(e,...t)}))}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=[tI.DEBUG].concat(t);this.log.apply(this,r)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=[tI.INFO].concat(t);this.log.apply(this,r)}warning(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=[tI.WARNING].concat(t);this.log.apply(this,r)}warn(){this.warning(...arguments)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=[tI.ERROR].concat(t);this.log.apply(this,r)}upload(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=[tI.DEBUG].concat(t);this.uploadLog.apply(this,r)}setLogLevel(e){e=Math.min(Math.max(0,e),4),this.logLevel=e}enableLogUpload(){MT("UPLOAD_LOG",!0)}disableLogUpload(){MT("UPLOAD_LOG",!1),this.uploadLogUploadingList=[],this.uploadLogWaitingList=[]}setProxyServer(e){this.proxyServerURL=e}prefix(e){return new XT(this).prefix(e)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(Date.now()-nI<100)return void setTimeout((()=>{this.log(...t)}),Date.now()-nI);const r=Math.max(0,Math.min(4,t[0]));if(t[0]=ZT()+" Agora-SDK [".concat(rI(r),"]:"),this.appendLogToWaitingList(r,...t),r<this.logLevel)return;const o=ZT()+" %cAgora-SDK [".concat(rI(r),"]:");let i=[];if(!xT("USE_NEW_LOG"))switch(r){case tI.DEBUG:i=[o,"color: #64B5F6;"].concat(t.slice(1)),console.log.apply(console,i);break;case tI.INFO:i=[o,"color: #1E88E5; font-weight: bold;"].concat(t.slice(1)),console.log.apply(console,i);break;case tI.WARNING:i=[o,"color: #FB8C00; font-weight: bold;"].concat(t.slice(1)),console.warn.apply(console,i);break;case tI.ERROR:i=[o,"color: #B00020; font-weight: bold;"].concat(t.slice(1)),console.error.apply(console,i)}}uploadLog(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(Date.now()-nI<100)return void setTimeout((()=>{this.uploadLog(...t)}),Date.now()-nI);const r=Math.max(0,Math.min(4,t[0]));t[0]=ZT()+" Agora-SDK [".concat(rI(r),"]:"),this.appendLogToWaitingList(r,...t)}appendLogToWaitingList(e){if(!xT("UPLOAD_LOG"))return;for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Array.isArray(n[0])?n[0][0]=eI()+" Agora-SDK [".concat(rI(e),"]:"):n[0]=eI()+" Agora-SDK [".concat(rI(e),"]:");let o="";n.forEach((e=>{"object"==typeof e&&(e=JSON.stringify(e)),o+="".concat(e," ")})),this.uploadLogWaitingList.push({payload_str:o,log_level:e,log_item_id:this.currentLogID++}),"uploading"===this.uploadState&&0===this.uploadLogUploadingList.length&&this.uploadLogInterval()}startUpload(){this.uploadState="uploading",0===this.uploadLogUploadingList.length&&this.uploadLogInterval()}async uploadLogs(){const e=this.uploadLogUploadingList,t={sdk_version:NT,process_id:xT("PROCESS_ID"),payload:JSON.stringify(e)};return bT((async()=>{const e=await yS.post(this.url||(this.proxyServerURL?"https://".concat(this.proxyServerURL,"/ls/?h=").concat(xT("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v1"):"https://".concat(xT("LOG_UPLOAD_SERVER"),"/upload/v1")),t,{responseType:"text"});if("OK"!==e.data){const t=new Error("unexpected upload log response");throw t.response=e,t}}),(()=>(this.uploadLogUploadingList=[],!1)),(t=>{const n={status:-1,message:t.message,errorRange:e.map((e=>e.log_item_id))};return t.response?(n.status=t.response.status,n.data=t.response.data,n.headers=t.response.headers):t.request&&(n.status=t.request.status),JT.reportLogUploadError(n),!0}),{timeout:xT("UPLOAD_LOG_REQUEST_RETRY_INTERVAL"),maxRetryTimeout:xT("UPLOAD_LOG_REQUEST_MAX_RETRY_INTERVAL")})}uploadLogInterval(){0===this.uploadLogUploadingList.length&&0===this.uploadLogWaitingList.length||(0===this.uploadLogUploadingList.length&&(this.uploadLogUploadingList=this.uploadLogWaitingList.splice(0,xT("UPLOAD_LOG_LENGTH_EACH_TIME"))),this.uploadLogs().then((()=>{this.uploadErrorCount=0,this.uploadLogWaitingList.length>0&&window.setTimeout((()=>this.uploadLogInterval()),xT("UPLOAD_LOG_INTERVAL"))})).catch((e=>{this.uploadErrorCount+=1,this.uploadErrorCount<2?window.setTimeout((()=>this.uploadLogInterval()),xT("UPLOAD_LOG_TWICE_RETRY_INTERVAL_V1")):window.setTimeout((()=>this.uploadLogInterval()),xT("UPLOAD_LOG_RETRY_INTERVAL_V1"))})))}};var iI;function aI(e){return fw(e.reportId,"params.reportId",0,100,!1),fw(e.category,"params.category",0,100,!1),fw(e.event,"params.event",0,100,!1),fw(e.label,"params.label",0,100,!1),pw(e.value,"params.value",Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,!1),!0}(iI={}).FREE="free",iI.UPLOADING="uploading",function(e){e[e.MISC=0]="MISC",e[e.INTERNAL_EVENT=1]="INTERNAL_EVENT",e[e.PUBLIC_EVENT=2]="PUBLIC_EVENT",e[e.WEB_EVENT=3]="WEB_EVENT",e[e.INTERNAL_API=4]="INTERNAL_API",e[e.WEB_API=5]="WEB_API",e[e.PUBLIC_API=6]="PUBLIC_API"}({});const sI={sid:"",lts:0,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0};let cI=function(e){return e.PUBLISH="publish",e.SUBSCRIBE="subscribe",e.WS_COMPRESSOR_INIT="ws_compressor_init",e.SESSION_INIT="session_init",e.JOIN_CHOOSE_SERVER="join_choose_server",e.REQ_USER_ACCOUNT="req_user_account",e.JOIN_GATEWAY="join_gateway",e.REJOIN_GATEWAY="rejoin_gateway",e.STREAM_SWITCH="stream_switch",e.REQUEST_PROXY_WORKER_MANAGER="request_proxy_worker_manager",e.REQUEST_PROXY_APPCENTER="request_proxy_appcenter",e.FIRST_VIDEO_RECEIVED="first_video_received",e.FIRST_AUDIO_RECEIVED="first_audio_received",e.FIRST_VIDEO_DECODE="first_video_decode",e.FIRST_AUDIO_DECODE="first_audio_decode",e.ON_ADD_AUDIO_STREAM="on_add_audio_stream",e.ON_ADD_VIDEO_STREAM="on_add_video_stream",e.ON_UPDATE_STREAM="on_update_stream",e.ON_REMOVE_STREAM="on_remove_stream",e.USER_ANALYTICS="req_user_analytics",e.PC_STATS="pc_stats",e.UPDATE_REMOTE_RTPCAPABILITIES="update_remote_rtpCapabilities",e}({}),lI=function(e){return e.SESSION="io.agora.pb.Wrtc.Session",e.JOIN_CHOOSE_SERVER="io.agora.pb.Wrtc.JoinChooseServer",e.REQ_USER_ACCOUNT="io.agora.pb.Wrtc.ReqUserAccount",e.JOIN_GATEWAY="io.agora.pb.Wrtc.JoinGateway",e.RE_JOIN_GATEWAY="io.agora.pb.Wrtc.ReJoinGateway",e.PUBLISH="io.agora.pb.Wrtc.Publish",e.SUBSCRIBE="io.agora.pb.Wrtc.Subscribe",e.WS_COMPRESSOR_INIT="io.agora.pb.Wrtc.WsCompressorInit",e.STREAM_SWITCH="io.agora.pb.Wrtc.StreamSwitch",e.AUDIO_SENDING_STOPPED="io.agora.pb.Wrtc.AudioSendingStopped",e.VIDEO_SENDING_STOPPED="io.agora.pb.Wrtc.VideoSendingStopped",e.REQUEST_PROXY_APPCENTER="io.agora.pb.Wrtc.RequestProxyAppCenter",e.REQUEST_PROXY_WORKER_MANAGER="io.agora.pb.Wrtc.RequestProxyWorkerManager",e.API_INVOKE="io.agora.pb.Wrtc.ApiInvoke",e.FIRST_VIDEO_RECEIVED="io.agora.pb.Wrtc.FirstVideoReceived",e.FIRST_AUDIO_RECEIVED="io.agora.pb.Wrtc.FirstAudioReceived",e.FIRST_VIDEO_DECODE="io.agora.pb.Wrtc.FirstVideoDecode",e.FIRST_AUDIO_DECODE="io.agora.pb.Wrtc.FirstAudioDecode",e.ON_ADD_AUDIO_STREAM="io.agora.pb.Wrtc.OnAddAudioStream",e.ON_ADD_VIDEO_STREAM="io.agora.pb.Wrtc.OnAddVideoStream",e.ON_UPDATE_STREAM="io.agora.pb.Wrtc.OnUpdateStream",e.ON_REMOVE_STREAM="io.agora.pb.Wrtc.OnRemoveStream",e.JOIN_CHANNEL_TIMEOUT="io.agora.pb.Wrtc.JoinChannelTimeout",e.PEER_PUBLISH_STATUS="io.agora.pb.Wrtc.PeerPublishStatus",e.WORKER_EVENT="io.agora.pb.Wrtc.WorkerEvent",e.AP_WORKER_EVENT="io.agora.pb.Wrtc.APWorkerEvent",e.JOIN_WEB_PROXY_AP="io.agora.pb.Wrtc.JoinWebProxyAP",e.WEBSOCKET_QUIT="io.agora.pb.Wrtc.WebSocketQuit",e.USER_ANALYTICS="io.agora.pb.Wrtc.UserAnalytics",e.AUTOPLAY_FAILED="io.agora.pb.Wrtc.AutoplayFailed",e.PC_STATS="io.agora.pb.Wrtc.PCStats",e.UPDATE_REMOTE_RTPCAPABILITIES="io.agora.pb.Wrtc.UpdateRemoteRTPCapabilities",e}({});!function(e){e[e.WORKER_EVENT=156]="WORKER_EVENT",e[e.AP_WORKER_EVENT=160]="AP_WORKER_EVENT"}({});let uI=function(e){return e[e.SESSION=26]="SESSION",e[e.JOIN_CHOOSE_SERVER=27]="JOIN_CHOOSE_SERVER",e[e.REQ_USER_ACCOUNT=196]="REQ_USER_ACCOUNT",e[e.JOIN_GATEWAY=28]="JOIN_GATEWAY",e[e.PUBLISH=30]="PUBLISH",e[e.SUBSCRIBE=29]="SUBSCRIBE",e[e.WS_COMPRESSOR_INIT=9430]="WS_COMPRESSOR_INIT",e[e.STREAM_SWITCH=32]="STREAM_SWITCH",e[e.AUDIO_SENDING_STOPPED=33]="AUDIO_SENDING_STOPPED",e[e.VIDEO_SENDING_STOPPED=34]="VIDEO_SENDING_STOPPED",e[e.REQUEST_PROXY_APPCENTER=35]="REQUEST_PROXY_APPCENTER",e[e.REQUEST_PROXY_WORKER_MANAGER=36]="REQUEST_PROXY_WORKER_MANAGER",e[e.API_INVOKE=41]="API_INVOKE",e[e.FIRST_VIDEO_RECEIVED=348]="FIRST_VIDEO_RECEIVED",e[e.FIRST_AUDIO_RECEIVED=349]="FIRST_AUDIO_RECEIVED",e[e.FIRST_VIDEO_DECODE=350]="FIRST_VIDEO_DECODE",e[e.FIRST_AUDIO_DECODE=351]="FIRST_AUDIO_DECODE",e[e.ON_ADD_AUDIO_STREAM=352]="ON_ADD_AUDIO_STREAM",e[e.ON_ADD_VIDEO_STREAM=353]="ON_ADD_VIDEO_STREAM",e[e.ON_UPDATE_STREAM=356]="ON_UPDATE_STREAM",e[e.ON_REMOVE_STREAM=355]="ON_REMOVE_STREAM",e[e.JOIN_CHANNEL_TIMEOUT=407]="JOIN_CHANNEL_TIMEOUT",e[e.PEER_PUBLISH_STATUS=408]="PEER_PUBLISH_STATUS",e[e.WORKER_EVENT=156]="WORKER_EVENT",e[e.AP_WORKER_EVENT=160]="AP_WORKER_EVENT",e[e.JOIN_WEB_PROXY_AP=700]="JOIN_WEB_PROXY_AP",e[e.WEBSOCKET_QUIT=671]="WEBSOCKET_QUIT",e[e.USER_ANALYTICS=1e4]="USER_ANALYTICS",e[e.AUTOPLAY_FAILED=9178]="AUTOPLAY_FAILED",e}({});function dI(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,n,r){const o=r.value;if("function"==typeof o){const i=e.className||t.__className__||("AgoraRTCClient"===t.constructor.name?"Client":t.constructor.name);r.value=function(){for(var t,r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];let c=a;if(e.argsMap)try{c=e.argsMap(this,...a)}catch(u){oI.warning(u),c=[]}try{JSON.stringify(c)}catch(u){oI.warning("arguments for method ".concat(i,".").concat(String(n)," not serializable for apiInvoke.")),c=[]}const l=(e.report||AI).reportApiInvoke(this._sessionId||null,{id:this._clientId||(null===(t=this.store)||void 0===t?void 0:t.clientId)||this._ID,name:"".concat(i,".").concat(String(n)),options:c,tag:Ow.TRACER,reportResult:e.reportResult},e.throttleTime);try{const t=o.apply(this,a);return t instanceof MA?t.then((t=>(l.onSuccess(e.reportResult&&t),t))).catch((e=>{throw l.onError(e),e})):(l.onSuccess(e.reportResult&&t),t)}catch(u){throw l.onError(u),u}}}return r}}const AI=new class{constructor(){qT(this,"baseInfoMap",new Map),qT(this,"proxyServer",void 0),qT(this,"eventUploadTimer",void 0),qT(this,"setSessionIdTimer",void 0),qT(this,"url",void 0),qT(this,"sids",new Set),qT(this,"backupUrl",void 0),qT(this,"_appId",void 0),qT(this,"keyEventUploadPendingItems",[]),qT(this,"normalEventUploadPendingItems",[]),qT(this,"apiInvokeUploadPendingItems",[]),qT(this,"apiInvokeCount",0),qT(this,"apiInvokeLoggedCount",0),qT(this,"ltsList",[]),qT(this,"lastSendNormalEventTime",Date.now()),qT(this,"customReportCounterTimer",void 0),qT(this,"customReportCount",0),qT(this,"extApiInvoke",(async e=>{for(const t of e){const e=YT(YT({},t),{},{sid:null,invokeId:++this.apiInvokeCount,tag:Ow.TRACER});this.sendApiInvoke(e)}})),this.eventUploadTimer=window.setInterval(this.doSend.bind(this),xT("EVENT_REPORT_SEND_INTERVAL")),this.setSessionIdTimer=window.setInterval(this.appendSessionId.bind(this),xT("EVENT_REPORT_SEND_INTERVAL"))}getBaseInfoBySessionId(e){return this.baseInfoMap.get(e)}setAppId(e){this._appId=e}reportApiInvoke(e,t,n){t.timeout=t.timeout||6e4,t.reportResult=void 0===t.reportResult||t.reportResult;const r=Date.now();this.apiInvokeCount+=1;const o=this.apiInvokeCount,i=!!xT("SHOW_REPORT_INVOKER_LOG"),a=!!xT("SHOW_REPORT_USER_INVOKER_LOG"),s=i||a&&t.id;s&&(this.apiInvokeLoggedCount+=1);const c=this.apiInvokeLoggedCount;function l(e,n){if(s){let r="[apiInvoke-".concat(c,"]");t.id&&(r+="[".concat(t.id,"]")),t.name&&(r+="[".concat(t.name,"]")),oI.info("".concat(r," ").concat(e),"start"===e?t.options:n||"")}}const u=()=>({tag:t.tag,invokeId:o,sid:e,name:t.name,apiInvokeTime:r,options:t.options,states:t.states||null});l("start");let d=!1;iT(t.timeout).then((()=>{d||(this.sendApiInvoke(YT(YT({},u()),{},{error:lw.API_INVOKE_TIMEOUT,success:!1})),l("timeout"))}));const A=new uw(lw.UNEXPECTED_ERROR,"".concat(t.name,": this api invoke is end"));return{onSuccess:e=>{const r=()=>{if(d)throw A;return d=!0,this.sendApiInvoke(YT(YT({},u()),{},{success:!0},t.reportResult&&{result:e})),l("onSuccess"),e};return n?uT(r,t.name+"Success",n,(()=>d=!0)):r()},onError:e=>{const r=()=>{if(d)throw e;d=!0,this.sendApiInvoke(YT(YT({},u()),{},{success:!1,error:e})),l("onFailure",e.toString())};return n?uT(r,t.name+"Error",n,(()=>d=!0)):r()}}}sessionInit(e,t){if(this.baseInfoMap.has(e))return;const n=Date.now(),r=this.createBaseInfo(e,n);r.cname=t.cname;const o=Object.assign({},{willUploadConsoleLog:xT("UPLOAD_LOG"),maxTouchPoints:navigator.maxTouchPoints,areaVersion:kT?"global":"oversea",areas:xT("AREAS")&&xT("AREAS").join(",")},t.extend),{stringUid:i,channelProfile:a,channelMode:s,isABTestSuccess:c,lsid:l,clientRole:u}=t,d=Date.now(),A=YT(YT({},r),{},{eventType:cI.SESSION_INIT,appid:t.appid,browser:navigator.userAgent,buildFormat:t.buildFormat,build:BT,lts:d,elapse:d-n,extend:JSON.stringify(o),mode:t.mode,process:xT("PROCESS_ID"),appType:xT("APP_TYPE"),success:!0,version:NT,stringUid:i,channelProfile:a,channelMode:s,isABTestSuccess:c,lsid:l,clientType:Or(p=window.navigator.userAgent).call(p,"AgoraWebView")?42:20,clientRole:u,serviceId:xT("PROCESS_ID"),extensionID:xT("PLUGIN_INFO").join(",")||""});var p;this.send({type:lI.SESSION,data:A},!0)}joinChooseServer(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,o=Date.now(),i=YT(YT({},r),{},{eventType:cI.JOIN_CHOOSE_SERVER,lts:o,eventElapse:t.elapse||o-t.lts,chooseServerAddr:t.csAddr,errorCode:t.ec,elapse:o-n.startTime,success:t.succ,chooseServerAddrList:JSON.stringify(t.serverList),uid:t.uid?parseInt(t.uid):null,cid:t.cid?parseInt(t.cid):null,chooseServerIp:t.csIp||"",opid:t.opid,unilbsServerIds:t.unilbsServerIds,extend:t.extend||void 0,isHttp3:t.isHttp3,corssRegionTagReq:t.corssRegionTagReq||void 0,corssRegionTagRes:t.corssRegionTagRes||void 0});this.send({type:lI.JOIN_CHOOSE_SERVER,data:i},!0)}reqUserAccount(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,o=Date.now(),i=YT(YT({},r),{},{eventType:cI.REQ_USER_ACCOUNT,lts:o,success:t.success,serverAddress:t.serverAddr,stringUid:t.stringUid,uid:t.uid,errorCode:t.errorCode,elapse:t.elapse||o-n.startTime,eventElapse:o-t.lts,extend:JSON.stringify(t.extend)});this.send({type:lI.REQ_USER_ACCOUNT,data:i},!0)}joinGateway(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info;t.vid&&(r.vid=t.vid),r.uid=t.uid,r.cid=t.cid;const o=Date.now(),{firstSuccess:i,avoidJoinStartTime:a}=t,s=o-(i&&a?a:n.startTime),c=YT(YT({},r),{},{eventType:cI.JOIN_GATEWAY,lts:o,gatewayAddr:t.addr,success:t.succ,errorCode:t.ec,errorMsg:t.errorMsg||"",elapse:s,eventElapse:o-t.lts,firstSuccess:i,signalChannel:t.signalChannel,preload:t.preload?1:0});t.succ&&(n.lastJoinSuccessTime=o),this.send({type:lI.JOIN_GATEWAY,data:c},!0)}joinChannelTimeout(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=Date.now(),o=YT(YT({},n.info),{},{lts:r,timeout:t,elapse:r-n.startTime});this.send({type:lI.JOIN_CHANNEL_TIMEOUT,data:o},!0)}publish(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,o=Date.now(),i=YT(YT({},r),{},{eventType:cI.PUBLISH,lts:o,eventElapse:t.eventElapse,elapse:o-n.startTime,success:t.succ,errorCode:t.ec,videoName:t.videoName,audioName:t.audioName,screenName:t.screenName,screenshare:t.screenshare,audio:t.audio,video:t.video,p2pid:t.p2pid,publishRequestid:t.publishRequestid});this.send({type:lI.PUBLISH,data:i},!0)}subscribe(e,t,n){const r=this.baseInfoMap.get(e);if(!r)return;const o=r.info,i=Date.now(),a=YT(YT({},o),{},{eventType:cI.SUBSCRIBE,lts:i,eventElapse:t.eventElapse,elapse:i-r.startTime,success:t.succ,errorCode:t.ec,video:t.video,audio:t.audio,subscribeRequestid:t.subscribeRequestid,p2pid:t.p2pid,preSsrc:t.preSsrc?1:0},n&&{extend:JSON.stringify({isMassSubscribe:!0})});"string"==typeof t.peerid?a.peerSuid=t.peerid:a.peer=t.peerid,this.send({type:lI.SUBSCRIBE,data:a},!0)}wsCompressorInit(e){var t;const n=[...rh(t=this.baseInfoMap).call(t)],r=n.length?n[0]:"UnableToGetSid",o=this.baseInfoMap.get(r);if(!o)return;const i=o.info,a=Date.now(),s=YT(YT({},i),{},{eventType:cI.WS_COMPRESSOR_INIT,lts:a,eventElapse:e.eventElapse,elapse:a-o.startTime,status:e.status?1:2});this.send({type:lI.WS_COMPRESSOR_INIT,data:s},!0)}firstRemoteVideoDecode(e,t,n,r){const o=this.baseInfoMap.get(e);if(!o)return;const i=o.info,a=Date.now(),s=YT(YT(YT({},i),r),{},{elapse:a-o.startTime,eventType:t,lts:a,firstDecodeFrame:Math.max((r.firstFrame||a)-o.startTime,0),apEnd:Math.max(r.apEnd-o.startTime,0),apStart:Math.max(r.apStart-o.startTime,0),joinGwEnd:Math.max(r.joinGwEnd-o.startTime,0),joinGwStart:Math.max(r.joinGwStart-o.startTime,0),pcEnd:Math.max(r.pcEnd-o.startTime,0),pcStart:Math.max(r.pcStart-o.startTime,0),subscriberEnd:Math.max(r.subscriberEnd-o.startTime,0),subscriberStart:Math.max(r.subscriberStart-o.startTime,0),videoAddNotify:Math.max(r.videoAddNotify-o.startTime,0)});this.send({type:n,data:s},!0)}firstRemoteFrame(e,t,n,r){const o=this.baseInfoMap.get(e);if(!o)return;const i=o.info,a=Date.now(),s=YT(YT(YT({},i),r),{},{elapse:a-o.startTime,eventType:t,lts:a});this.send({type:n,data:s},!0)}pcStats(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,o=Date.now(),i=YT(YT(YT({},r),t),{},{vid:void 0===r.vid?0:Number(r.vid),elapse:o-n.startTime,eventType:cI.PC_STATS,lts:o,preallocation:t.preallocation?1:0});this.send({type:lI.PC_STATS,data:i},!0)}updateRemoteRTPCapabilities(e,t){if(e){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,o=Date.now(),i=YT(YT(YT({},r),t),{},{vid:void 0===r.vid?0:Number(r.vid),eventType:cI.UPDATE_REMOTE_RTPCAPABILITIES,lts:o});this.send({type:lI.UPDATE_REMOTE_RTPCAPABILITIES,data:i},!0)}}onGatewayStream(e,t,n,r){const o=this.baseInfoMap.get(e);if(!o)return;const i=o.info,a=Date.now(),s=YT(YT(YT({},i),r),{},{eventType:t,lts:a});this.send({type:n,data:s},!0)}streamSwitch(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,o=Date.now(),i=YT(YT({},r),{},{eventType:cI.STREAM_SWITCH,lts:o,isDual:t.isdual,elapse:o-n.startTime,success:t.succ});this.send({type:lI.STREAM_SWITCH,data:i},!0)}requestProxyAppCenter(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,o=Date.now(),i=YT(YT({},r),{},{eventType:cI.REQUEST_PROXY_APPCENTER,lts:o,eventElapse:o-t.lts,elapse:o-n.startTime,APAddr:t.APAddr,workerManagerList:t.workerManagerList,response:t.response,errorCode:t.ec,success:t.succ});this.send({type:lI.REQUEST_PROXY_APPCENTER,data:i},!0)}requestProxyWorkerManager(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,o=Date.now(),i=YT(YT({},r),{},{eventType:cI.REQUEST_PROXY_WORKER_MANAGER,lts:o,eventElapse:o-t.lts,elapse:o-n.startTime,workerManagerAddr:t.workerManagerAddr,response:t.response,errorCode:t.ec,success:t.succ});this.send({type:lI.REQUEST_PROXY_WORKER_MANAGER,data:i},!0)}setProxyServer(e){this.proxyServer=e,e?oI.debug("reportProxyServerurl: ".concat(e)):oI.debug("disable reportProxyServerurl: ".concat(e))}peerPublishStatus(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,o=Date.now(),i=YT(YT({},r),{},{subscribeElapse:t.subscribeElapse,peer:t.peer,peerPublishDuration:Math.max(t.audioPublishDuration,t.videoPublishDuration),audiotag:t.audioPublishDuration>0?1:-1,videotag:t.videoPublishDuration>0?1:-1,lts:o,elapse:o-n.startTime,joinChannelSuccessElapse:o-(n.lastJoinSuccessTime||o),peerPublishDurationVideo:t.videoPublishDuration,peerPublishDurationAudio:t.audioPublishDuration});this.send({type:lI.PEER_PUBLISH_STATUS,data:i},!0)}workerEvent(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,o=Date.now();(function(e,t,n){const r=e[t];if(!r||"string"!=typeof r)return[e];e[t]="";const o=nT(JSON.stringify(e));let i=0;const a=[];let s=0;for(let c=0;c<r.length;c++)s+=r.charCodeAt(c)<=127?1:3,s<=n-o||(a[a.length]=cw(cw({},e),{},{[t]:r.substring(i,c)}),i=c,s=r.charCodeAt(c)<=127?1:3);return i!==r.length-1&&(a[a.length]=cw(cw({},e),{},{[t]:r.substring(i)})),a})(YT(YT(YT({},r),t),{},{elapse:o-n.startTime,lts:o,productType:"WebRTC"}),"payload",1300).forEach((e=>this.send({type:lI.WORKER_EVENT,data:e},!0)))}apworkerEvent(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,o=Date.now(),i=YT(YT(YT({},r),t),{},{elapse:o-n.startTime,lts:o});this.send({type:lI.AP_WORKER_EVENT,data:i},!0)}joinWebProxyAP(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,o=Date.now(),i=YT(YT(YT({},r),t),{},{elapse:o-n.startTime,lts:o,extend:t.extend||void 0});this.send({type:lI.JOIN_WEB_PROXY_AP,data:i},!0)}WebSocketQuit(e,t){const n=this.baseInfoMap.get(e);if(!n)return;const r=n.info,o=Date.now(),i=YT(YT(YT({},r),t),{},{elapse:o-n.startTime,lts:o});this.send({type:lI.WEBSOCKET_QUIT,data:i},!0)}async sendCustomReportMessage(e,t){if(this.customReportCount+=t.length,this.customReportCount>xT("CUSTOM_REPORT_LIMIT"))throw new uw(lw.CUSTOM_REPORT_FREQUENCY_TOO_HIGH);this.customReportCounterTimer||(this.customReportCounterTimer=window.setInterval((()=>{this.customReportCount=0}),5e3));const n=Date.now(),r=t.map((t=>({type:lI.USER_ANALYTICS,data:YT(YT({sid:e},t),{},{lts:n})})));try{xT("NEW_REPORT_SERVER")?await this.postDataToStatsCollector2(r):await this.postDataToStatsCollector(r)}catch(o){throw oI.error("send custom report message failed",o.toString()),new uw(lw.CUSTOM_REPORT_SEND_FAILED,o.message)}}sendApiInvoke(e){const t=xT("NOT_REPORT_EVENT");if(e.tag&&Or(t)&&Or(t).call(t,e.tag))return!1;if(null===e.sid)return this.apiInvokeUploadPendingItems.push(e),!1;const n=this.baseInfoMap.get(e.sid);if(!n)return this.apiInvokeUploadPendingItems.push(e),!1;const{cname:r,uid:o,cid:i}=n.info;let a;if(e.lts=e.lts||Date.now(),e.error)if(e.error instanceof uw){const{code:t,message:n}=e.error;a=t||n||e.error.toString()}else a=e.error.toString();const s={invokeId:e.invokeId,sid:e.sid,cname:r,cid:i,uid:o,lts:e.lts,success:e.success,elapse:e.lts-n.startTime,execElapse:e.lts-e.apiInvokeTime,apiName:e.name,options:e.options?JSON.stringify(e.options):void 0,execStates:e.states?JSON.stringify(e.states):void 0,execResult:e.result?JSON.stringify(e.result):void 0,errorCode:e.error?a:void 0,errorMsg:e.error?JSON.stringify(e.error):void 0};return this.send({type:lI.API_INVOKE,data:s},!1),!0}addSid(e){this.sids.add(e)}removeSid(e){this.sids.delete(e)}appendSessionId(){const e=this.apiInvokeUploadPendingItems;if(0===e.length)return;const t=Array.from(this.sids).find((e=>null!==e));t&&e.forEach((e=>{e&&(e.sid=t,this.sendApiInvoke(Object.assign({},e)))})),e.length=0}send(e,t){if(t)return this.keyEventUploadPendingItems.push(e),void this.sendItems(this.keyEventUploadPendingItems,!0);this.normalEventUploadPendingItems.push(e),this.normalEventUploadPendingItems.length>xT("NORMAL_EVENT_QUEUE_CAPACITY")&&this.normalEventUploadPendingItems.splice(0,1),this.normalEventUploadPendingItems.length>=10&&this.sendItems(this.normalEventUploadPendingItems,!1)}doSend(){this.keyEventUploadPendingItems.length>0&&this.sendItems(this.keyEventUploadPendingItems,!0),this.normalEventUploadPendingItems.length>0&&Date.now()-this.lastSendNormalEventTime>=5e3&&this.sendItems(this.normalEventUploadPendingItems,!1)}sendItems(e,t){const n=[],r=[];for(;e.length;){const t=e.shift();n.length<20?n.push(t):r.push(t)}e.push(...r);for(const i of[...n]){var o;-1!==this.ltsList.indexOf(i.data.lts)?(i.data.lts=this.ltsList[this.ltsList.length-1]+1,this.ltsList.push(i.data.lts)):(this.ltsList.push(i.data.lts),Xh(o=this.ltsList).call(o,((e,t)=>e-t)))}return t||(this.lastSendNormalEventTime=Date.now()),xT("ENABLE_EVENT_REPORT")?(n.length&&(xT("NEW_REPORT_SERVER")?this.postDataToStatsCollector2(n):this.postDataToStatsCollector(n)).catch((e=>n=>{xT("EVENT_REPORT_RETRY")&&(t?this.keyEventUploadPendingItems=this.keyEventUploadPendingItems.concat(e):(this.normalEventUploadPendingItems=this.normalEventUploadPendingItems.concat(e),this.normalEventUploadPendingItems.length>xT("NORMAL_EVENT_QUEUE_CAPACITY")&&(this.normalEventUploadPendingItems.splice(0,this.normalEventUploadPendingItems.length-xT("NORMAL_EVENT_QUEUE_CAPACITY")),oI.warning("report: drop normal events"))))})(n)),e):e}async postDataToStatsCollector2(e){Qw.networkState===xw.OFFLINE&&await MA.race([Qw.onlineWaiter,iT(2*vT.maxRetryTimeout)]);const t=e=>{let t=new Uint8Array;return e.forEach((e=>{const n=bw(JSON.stringify(e.data)),r=new ArrayBuffer(5),o=(e=>{let t=0;return Object.entries(lI).forEach((n=>{let[r,o]=n;o===e.type&&(t=uI[r])})),t})(e),i=new DataView(r);i.setUint16(0,n.byteLength,!0),i.setUint8(2,255&o),i.setUint8(3,o>>>8&255),i.setUint8(4,o>>>16&255),t=Cw(t,new Uint8Array(r)),t=Cw(t,n)})),t},n="event";let r=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(xT("NEW_REPORT_SERVER_DOMAINS")[0],"&p=443&d=").concat(n):"https://".concat(xT("NEW_REPORT_SERVER_DOMAINS")[0],"/").concat(n);for(let i=0;i<2;i+=1){1===i&&(r=this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(xT("NEW_REPORT_SERVER_DOMAINS")[1],"&p=443&d=").concat(n):"https://".concat(xT("NEW_REPORT_SERVER_DOMAINS")[1],"/").concat(n));try{await IT(r,{timeout:1e4,data:t(e),headers:YT(YT({biz:"webrtc",sendts:Math.round(Date.now()/1e3),debug:"false"},this._appId&&{appid:this._appId}),{},{"Content-Type":"application/octet-stream"})},!0)}catch(o){if(1===i)throw o;continue}return}}async postDataToStatsCollector(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n={msgType:"EventMessages",sentTs:Math.round(Date.now()/1e3),payloads:e.map((e=>JSON.stringify(e))),vid:(e=>{const t=e&&e.data.sid&&this.baseInfoMap.get(e.data.sid);return t&&t.info.vid&&+t.info.vid||0})(e[0])};Qw.networkState===xw.OFFLINE&&await MA.race([Qw.onlineWaiter,iT(2*vT.maxRetryTimeout)]);const r=t?"/events/proto-raws":"/events/messages";let o=this.url||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(xT("EVENT_REPORT_DOMAIN"),"&p=").concat(xT("STATS_COLLECTOR_PORT"),"&d=").concat(r):"https://".concat(xT("EVENT_REPORT_DOMAIN"),":").concat(xT("STATS_COLLECTOR_PORT")).concat(r));for(let a=0;a<2;a+=1){1===a&&(o=this.backupUrl||(this.proxyServer?"https://".concat(this.proxyServer,"/rs/?h=").concat(xT("EVENT_REPORT_BACKUP_DOMAIN"),"&p=").concat(xT("STATS_COLLECTOR_PORT"),"&d=").concat(r):"https://".concat(xT("EVENT_REPORT_BACKUP_DOMAIN"),":").concat(xT("STATS_COLLECTOR_PORT")).concat(r)));try{t?await RT(o,{timeout:1e4,data:n}):await IT(o,{timeout:1e4,data:n})}catch(i){if(1===a)throw i;continue}return}}createBaseInfo(e,t){const n=Object.assign({},sI);return n.sid=e,this.baseInfoMap.set(e,{info:n,startTime:t}),n}reportResourceTiming(e,t){const n=performance.getEntriesByName(e),r=n[n.length-1];r&&this.reportApiInvoke(t,{name:"Client.resourceTiming",options:r,tag:Ow.TRACER}).onSuccess()}};JT.on("REPORT_LOG_UPLOAD",(e=>{e.networkState=Qw.networkState,AI.reportApiInvoke(null,{name:"logUploadError",options:e,tag:Ow.TRACER}).onSuccess("logUploadError")}));class pI extends uw{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",arguments.length>2?arguments[2]:void 0),qT(this,"name","AgoraRTCException")}print(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"error";return super.print(e,oI)}throw(){super.throw(oI)}}const hI=["CHINA","GLOBAL"],fI=[[0,1,2,3,4,5,5],[0,2,2,3,4,5,5],[0,3,3,3,4,5,5],[0,4,4,4,4,5,5],[0,5,5,5,5,5,5]],gI=[];function mI(e,t){return!!t&&gI.some((n=>n.uid===e&&n.channelName===t))}var _I=Wm.forEach,EI=xr("forEach")?[].forEach:function(e){return _I(this,e,arguments.length>1?arguments[1]:void 0)};On({target:"Array",proto:!0,forced:[].forEach!=EI},{forEach:EI});var vI=Yn("Array").forEach,yI=Ar,bI=Xe,CI=u,SI=vI,wI=Array.prototype,TI={DOMTokenList:!0,NodeList:!0},II=n((function(e){var t=e.forEach;return e===wI||CI(wI,e)&&t===wI.forEach||bI(TI,yI(e))?SI:t})),RI=ze,OI=Xo;On({target:"Object",stat:!0,forced:r((function(){OI(1)}))},{keys:function(e){return OI(RI(e))}});var NI=n(ne.Object.keys),kI=n(Gr),PI=On,DI=zg,LI=l([].reverse),BI=[1,2];PI({target:"Array",proto:!0,forced:String(BI)===String(BI.reverse())},{reverse:function(){return DI(this)&&(this.length=this.length),LI(this)}});var UI=Yn("Array").reverse,MI=u,xI=UI,FI=Array.prototype,$I=function(e){var t=e.reverse;return e===FI||MI(FI,e)&&t===FI.reverse?xI:t},VI=n($I),HI=On,jI=zg,QI=Mc,GI=te,KI=Mn,WI=Hn,qI=X,zI=lh,YI=At,JI=Kc,XI=sm("slice"),ZI=YI("species"),eR=Array,tR=Math.max;HI({target:"Array",proto:!0,forced:!XI},{slice:function(e,t){var n,r,o,i=qI(this),a=WI(i),s=KI(e,a),c=KI(void 0===t?a:t,a);if(jI(i)&&(n=i.constructor,(QI(n)&&(n===eR||jI(n.prototype))||GI(n)&&null===(n=n[ZI]))&&(n=void 0),n===eR||void 0===n))return JI(i,s,c);for(r=new(void 0===n?eR:n)(tR(c-s,0)),o=0;s<c;s++,o++)s in i&&zI(r,o,i[s]);return r.length=o,r}});var nR=Yn("Array").slice,rR=u,oR=nR,iR=Array.prototype,aR=n((function(e){var t=e.slice;return e===iR||rR(iR,e)&&t===iR.slice?oR:t}));function sR(e,t,n,r,o){var i,a,s,c={};return II(i=NI(r)).call(i,(function(e){c[e]=r[e]})),c.enumerable=!!c.enumerable,c.configurable=!!c.configurable,("value"in c||c.initializer)&&(c.writable=!0),c=kI(a=VI(s=aR(n).call(n)).call(s)).call(a,(function(n,r){return r(e,t,n)||n}),c),o&&void 0!==c.initializer&&(c.value=c.initializer?c.initializer.call(o):void 0,c.initializer=void 0),void 0===c.initializer&&(Wg(e,t,c),c=null),c}let cR=function(e){return e.L1T1="L1T1",e.L1T2="L1T2",e.L1T3="L1T3",e.L1T3_KEY="L1T3_KEY",e.L2T1_KEY="L2T1_KEY",e.L2T2_KEY="L2T2_KEY",e.L2T3_KEY="L2T3_KEY",e.L3T1_KEY="L3T1_KEY",e.L3T2_KEY="L3T2_KEY",e.L3T3_KEY="L3T3_KEY",e}({}),lR=function(e){return e.CERTIFICATE="certificate",e.CODEC="codec",e.CANDIDATE_PAIR="candidate-pair",e.LOCAL_CANDIDATE="local-candidate",e.REMOTE_CANDIDATE="remote-candidate",e.INBOUND="inbound-rtp",e.TRACK="track",e.OUTBOUND="outbound-rtp",e.PC="peer-connection",e.REMOTE_INBOUND="remote-inbound-rtp",e.REMOTE_OUTBOUND="remote-outbound-rtp",e.TRANSPORT="transport",e.CSRC="csrc",e.DATA_CHANNEL="data-channel",e.STREAM="stream",e.SENDER="sender",e.RECEIVER="receiver",e}({}),uR=function(e){return e[e.ACCESS_POINT=101]="ACCESS_POINT",e[e.UNILBS=201]="UNILBS",e[e.STRING_UID_ALLOCATOR=901]="STRING_UID_ALLOCATOR",e}({}),dR=function(e){return e[e.IIIEGAL_APPID=1]="IIIEGAL_APPID",e[e.IIIEGAL_UID=2]="IIIEGAL_UID",e[e.INTERNAL_ERROR=3]="INTERNAL_ERROR",e}({}),AR=function(e){return e[e.INVALID_VENDOR_KEY=5]="INVALID_VENDOR_KEY",e[e.INVALID_CHANNEL_NAME=7]="INVALID_CHANNEL_NAME",e[e.INTERNAL_ERROR=8]="INTERNAL_ERROR",e[e.NO_AUTHORIZED=9]="NO_AUTHORIZED",e[e.DYNAMIC_KEY_TIMEOUT=10]="DYNAMIC_KEY_TIMEOUT",e[e.NO_ACTIVE_STATUS=11]="NO_ACTIVE_STATUS",e[e.DYNAMIC_KEY_EXPIRED=13]="DYNAMIC_KEY_EXPIRED",e[e.STATIC_USE_DYNAMIC_KEY=14]="STATIC_USE_DYNAMIC_KEY",e[e.DYNAMIC_USE_STATIC_KEY=15]="DYNAMIC_USE_STATIC_KEY",e[e.USER_OVERLOAD=16]="USER_OVERLOAD",e[e.FORBIDDEN_REGION=18]="FORBIDDEN_REGION",e[e.CANNOT_MEET_AREA_DEMAND=19]="CANNOT_MEET_AREA_DEMAND",e}({}),pR=function(e){return e[e.NO_FLAG_SET=100]="NO_FLAG_SET",e[e.FLAG_SET_BUT_EMPTY=101]="FLAG_SET_BUT_EMPTY",e[e.INVALID_FALG_SET=102]="INVALID_FALG_SET",e[e.FLAG_SET_BUT_NO_RE=103]="FLAG_SET_BUT_NO_RE",e[e.INVALID_SERVICE_ID=104]="INVALID_SERVICE_ID",e[e.NO_SERVICE_AVAILABLE=200]="NO_SERVICE_AVAILABLE",e[e.NO_SERVICE_AVAILABLE_P2P=201]="NO_SERVICE_AVAILABLE_P2P",e[e.NO_SERVICE_AVAILABLE_VOICE=202]="NO_SERVICE_AVAILABLE_VOICE",e[e.NO_SERVICE_AVAILABLE_WEBRTC=203]="NO_SERVICE_AVAILABLE_WEBRTC",e[e.NO_SERVICE_AVAILABLE_CDS=204]="NO_SERVICE_AVAILABLE_CDS",e[e.NO_SERVICE_AVAILABLE_CDN=205]="NO_SERVICE_AVAILABLE_CDN",e[e.NO_SERVICE_AVAILABLE_TDS=206]="NO_SERVICE_AVAILABLE_TDS",e[e.NO_SERVICE_AVAILABLE_REPORT=207]="NO_SERVICE_AVAILABLE_REPORT",e[e.NO_SERVICE_AVAILABLE_APP_CENTER=208]="NO_SERVICE_AVAILABLE_APP_CENTER",e[e.NO_SERVICE_AVAILABLE_ENV0=209]="NO_SERVICE_AVAILABLE_ENV0",e[e.NO_SERVICE_AVAILABLE_VOET=210]="NO_SERVICE_AVAILABLE_VOET",e[e.NO_SERVICE_AVAILABLE_STRING_UID=211]="NO_SERVICE_AVAILABLE_STRING_UID",e[e.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS=212]="NO_SERVICE_AVAILABLE_WEBRTC_UNILBS",e[e.NO_SERVICE_AVAILABLE_UNILBS_FLV=213]="NO_SERVICE_AVAILABLE_UNILBS_FLV",e}({}),hR=function(e){return e[e.K_TIMESTAMP_EXPIRED=2]="K_TIMESTAMP_EXPIRED",e[e.K_CHANNEL_PERMISSION_INVALID=3]="K_CHANNEL_PERMISSION_INVALID",e[e.K_CERTIFICATE_INVALID=4]="K_CERTIFICATE_INVALID",e[e.K_CHANNEL_NAME_EMPTY=5]="K_CHANNEL_NAME_EMPTY",e[e.K_CHANNEL_NOT_FOUND=6]="K_CHANNEL_NOT_FOUND",e[e.K_TICKET_INVALID=7]="K_TICKET_INVALID",e[e.K_CHANNEL_CONFLICTED=8]="K_CHANNEL_CONFLICTED",e[e.K_SERVICE_NOT_READY=9]="K_SERVICE_NOT_READY",e[e.K_SERVICE_TOO_HEAVY=10]="K_SERVICE_TOO_HEAVY",e[e.K_UID_BANNED=14]="K_UID_BANNED",e[e.K_IP_BANNED=15]="K_IP_BANNED",e[e.K_CHANNEL_BANNED=16]="K_CHANNEL_BANNED",e[e.K_AUTO_REBALANCE=28]="K_AUTO_REBALANCE",e[e.WARN_NO_AVAILABLE_CHANNEL=103]="WARN_NO_AVAILABLE_CHANNEL",e[e.WARN_LOOKUP_CHANNEL_TIMEOUT=104]="WARN_LOOKUP_CHANNEL_TIMEOUT",e[e.WARN_LOOKUP_CHANNEL_REJECTED=105]="WARN_LOOKUP_CHANNEL_REJECTED",e[e.WARN_OPEN_CHANNEL_TIMEOUT=106]="WARN_OPEN_CHANNEL_TIMEOUT",e[e.WARN_OPEN_CHANNEL_REJECTED=107]="WARN_OPEN_CHANNEL_REJECTED",e[e.WARN_REQUEST_DEFERRED=108]="WARN_REQUEST_DEFERRED",e[e.ERR_DYNAMIC_KEY_TIMEOUT=109]="ERR_DYNAMIC_KEY_TIMEOUT",e[e.ERR_NO_AUTHORIZED=110]="ERR_NO_AUTHORIZED",e[e.ERR_VOM_SERVICE_UNAVAILABLE=111]="ERR_VOM_SERVICE_UNAVAILABLE",e[e.ERR_NO_CHANNEL_AVAILABLE_CODE=112]="ERR_NO_CHANNEL_AVAILABLE_CODE",e[e.ERR_MASTER_VOCS_UNAVAILABLE=114]="ERR_MASTER_VOCS_UNAVAILABLE",e[e.ERR_INTERNAL_ERROR=115]="ERR_INTERNAL_ERROR",e[e.ERR_NO_ACTIVE_STATUS=116]="ERR_NO_ACTIVE_STATUS",e[e.ERR_INVALID_UID=117]="ERR_INVALID_UID",e[e.ERR_DYNAMIC_KEY_EXPIRED=118]="ERR_DYNAMIC_KEY_EXPIRED",e[e.ERR_STATIC_USE_DYANMIC_KE=119]="ERR_STATIC_USE_DYANMIC_KE",e[e.ERR_DYNAMIC_USE_STATIC_KE=120]="ERR_DYNAMIC_USE_STATIC_KE",e[e.ERR_NO_VOCS_AVAILABLE=2e3]="ERR_NO_VOCS_AVAILABLE",e[e.ERR_NO_VOS_AVAILABLE=2001]="ERR_NO_VOS_AVAILABLE",e[e.ERR_JOIN_CHANNEL_TIMEOUT=2002]="ERR_JOIN_CHANNEL_TIMEOUT",e[e.ERR_REPEAT_JOIN_CHANNEL=2003]="ERR_REPEAT_JOIN_CHANNEL",e[e.ERR_JOIN_BY_MULTI_IP=2004]="ERR_JOIN_BY_MULTI_IP",e[e.ERR_NOT_JOINED=2011]="ERR_NOT_JOINED",e[e.ERR_REPEAT_JOIN_REQUEST=2012]="ERR_REPEAT_JOIN_REQUEST",e[e.ERR_INVALID_VENDOR_KEY=2013]="ERR_INVALID_VENDOR_KEY",e[e.ERR_INVALID_CHANNEL_NAME=2014]="ERR_INVALID_CHANNEL_NAME",e[e.ERR_INVALID_STRINGUID=2015]="ERR_INVALID_STRINGUID",e[e.ERR_TOO_MANY_USERS=2016]="ERR_TOO_MANY_USERS",e[e.ERR_SET_CLIENT_ROLE_TIMEOUT=2017]="ERR_SET_CLIENT_ROLE_TIMEOUT",e[e.ERR_SET_CLIENT_ROLE_NO_PERMISSION=2018]="ERR_SET_CLIENT_ROLE_NO_PERMISSION",e[e.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE=2019]="ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",e[e.ERR_PUBLISH_REQUEST_INVALID=2020]="ERR_PUBLISH_REQUEST_INVALID",e[e.ERR_SUBSCRIBE_REQUEST_INVALID=2021]="ERR_SUBSCRIBE_REQUEST_INVALID",e[e.ERR_NOT_SUPPORTED_MESSAGE=2022]="ERR_NOT_SUPPORTED_MESSAGE",e[e.ERR_ILLEAGAL_PLUGIN=2023]="ERR_ILLEAGAL_PLUGIN",e[e.ERR_REJOIN_TOKEN_INVALID=2024]="ERR_REJOIN_TOKEN_INVALID",e[e.ERR_REJOIN_USER_NOT_JOINED=2025]="ERR_REJOIN_USER_NOT_JOINED",e[e.ERR_INVALID_OPTIONAL_INFO=2027]="ERR_INVALID_OPTIONAL_INFO",e[e.ILLEGAL_AES_PASSWORD=2028]="ILLEGAL_AES_PASSWORD",e[e.ILLEGAL_CLIENT_ROLE_LEVEL=2029]="ILLEGAL_CLIENT_ROLE_LEVEL",e[e.ERR_TOO_MANY_BROADCASTERS=2031]="ERR_TOO_MANY_BROADCASTERS",e[e.ERR_TOO_MANY_SUBSCRIBERS=2032]="ERR_TOO_MANY_SUBSCRIBERS",e[e.ERR_LICENSE_MISSING=32769]="ERR_LICENSE_MISSING",e[e.ERR_LICENSE_EXPIRED=32771]="ERR_LICENSE_EXPIRED",e[e.ERR_LICENSE_MINUTES_EXCEEDED=32773]="ERR_LICENSE_MINUTES_EXCEEDED",e[e.ERR_LICENSE_PERIOD_INVALID=32774]="ERR_LICENSE_PERIOD_INVALID",e[e.ERR_LICENSE_MULTIPLE_SDK_SERVICE=32778]="ERR_LICENSE_MULTIPLE_SDK_SERVICE",e[e.ERR_LICENSE_ILLEGAL=32783]="ERR_LICENSE_ILLEGAL",e[e.ERR_TEST_RECOVER=9e3]="ERR_TEST_RECOVER",e[e.ERR_TEST_TRYNEXT=9001]="ERR_TEST_TRYNEXT",e[e.ERR_TEST_RETRY=9002]="ERR_TEST_RETRY",e}({}),fR=function(e){return e.CONNECTING="connecting",e.CONNECTED="connected",e.RECONNECTING="reconnecting",e.CLOSED="closed",e}({}),gR=function(e){return e.WS_CONNECTED="ws_connected",e.WS_RECONNECTING="ws_reconnecting",e.WS_CLOSED="ws_closed",e.WS_RECONNECT_CREATE_CONNECTION="ws_reconnect_create_connection",e.ON_BINARY_DATA="on_binary_data",e.REQUEST_RECOVER="request_recover",e.REQUEST_JOIN_INFO="request_join_info",e.REQUEST_REJOIN_INFO="req_rejoin_info",e.IS_P2P_DISCONNECTED="is_p2p_dis",e.DISCONNECT_P2P="dis_p2p",e.ABORT_P2P_EXECUTION="abort_p2p_execution",e.NEED_RENEW_SESSION="need-sid",e.REPORT_JOIN_GATEWAY="report_join_gateway",e.REQUEST_TIMEOUT="request_timeout",e.REQUEST_SUCCESS="request_success",e.JOIN_RESPONSE="join_response",e.PRE_CONNECT_PC="pre_connect_pc",e.P2P_CONNECTION="p2p_connection",e.P2P_REMOTE_CANDIDATE_UPDATE="p2p_remote_candidate_update",e.P2P_SUBSCRIBE="p2p_subscribe",e.P2P_UNSUBSCRIBE="p2p_unsubscribe",e.P2P_EXCHANGE_SDP="p2p_exchange_sdp",e.P2P_ON_ADD_VIDEO_STREAM="p2p_on_add_video_stream",e.P2P_ON_ADD_AUDIO_STREAM="p2p_on_add_audio_stream",e.RECOVER_NOTIFICATION="recover_notification",e}({}),mR=function(e){return e.PING="ping",e.PING_BACK="ping_back",e.JOIN="join_v3",e.REJOIN="rejoin_v3",e.LEAVE="leave",e.SET_CLIENT_ROLE="set_client_role",e.PUBLISH="publish",e.PUBLISH_DATASTREAM="publish_datastream",e.UNPUBLISH="unpublish",e.UNPUBLISH_DATASTREAM="unpublish_datastream",e.SUBSCRIBE="subscribe",e.PRE_SUBSCRIBE="pre_subscribe",e.SUBSCRIBE_DATASTREAM="subscribe_datastream",e.SUBSCRIBE_STREAMS="subscribe_streams",e.UNSUBSCRIBE="unsubscribe",e.UNSUBSCRIBE_DATASTREAM="unsubscribe_datastream",e.UNSUBSCRIBE_STREAMS="unsubscribe_streams",e.SUBSCRIBE_CHANGE="subscribe_change",e.TRAFFIC_STATS="traffic_stats",e.RENEW_TOKEN="renew_token",e.SWITCH_VIDEO_STREAM="switch_video_stream",e.DEFAULT_VIDEO_STREAM="default_video_stream",e.SET_FALLBACK_OPTION="set_fallback_option",e.GATEWAY_INFO="gateway_info",e.CONTROL="control",e.SEND_METADATA="send_metadata",e.DATA_STREAM="data_stream",e.PICK_SVC_LAYER="pick_svc_layer",e.RESTART_ICE="restart_ice",e.CONNECT_PC="connect_pc",e.SET_VIDEO_PROFILE="set_video_profile",e.SET_PARAMETER="set_parameter",e.SET_RTM2_FLAG="set_rtm2_flag",e}({}),_R=function(e){return e.WRTC_STATS="wrtc_stats",e.WS_INFLATE_DATA_LENGTH="ws_inflate_data_length",e.DENOISER_STATS="denoiser_stats",e.EXTENSION_USAGE_STATS="extension_usage_stats",e}({}),ER=function(e){return e.ON_USER_ONLINE="on_user_online",e.ON_USER_OFFLINE="on_user_offline",e.ON_STREAM_FALLBACK_UPDATE="on_stream_fallback_update",e.ON_PUBLISH_STREAM="on_publish_stream",e.ON_UPLINK_STATS="on_uplink_stats",e.ON_P2P_LOST="on_p2p_lost",e.ON_REMOVE_STREAM="on_remove_stream",e.ON_ADD_AUDIO_STREAM="on_add_audio_stream",e.ON_ADD_VIDEO_STREAM="on_add_video_stream",e.ON_TOKEN_PRIVILEGE_WILL_EXPIRE="on_token_privilege_will_expire",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="on_token_privilege_did_expire",e.ON_USER_BANNED="on_user_banned",e.ON_USER_LICENSE_BANNED="on_user_license_banned",e.ON_NOTIFICATION="on_notification",e.ON_CRYPT_ERROR="on_crypt_error",e.MUTE_AUDIO="mute_audio",e.MUTE_VIDEO="mute_video",e.UNMUTE_AUDIO="unmute_audio",e.UNMUTE_VIDEO="unmute_video",e.ON_P2P_OK="on_p2p_ok",e.RECEIVE_METADATA="receive_metadata",e.ON_DATA_STREAM="on_data_stream",e.ON_RTP_CAPABILITY_CHANGE="on_rtp_capability_change",e.ON_REMOTE_DATASTREAM_UPDATE="on_remote_datastream_update",e.ON_REMOTE_FULL_DATASTREAM_INFO="on_remote_full_datastream_info",e.ENABLE_LOCAL_VIDEO="enable_local_video",e.DISABLE_LOCAL_VIDEO="disable_local_video",e.ENABLE_LOCAL_AUDIO="enable_local_audio",e.DISABLE_LOCAL_AUDIO="disable_local_audio",e.ON_PUBLISHED_USER_LIST="on_published_user_list",e}({}),vR=function(e){return e.SEND_ONLY="SEND_ONLY",e.RECEIVE_ONLY="RECEIVE_ONLY",e}({}),yR=function(e){return e.CONNECTED="websocket:connected",e.RECONNECTING="websocket:reconnecting",e.WILL_RECONNECT="websocket:will_reconnect",e.CLOSED="websocket:closed",e.FAILED="websocket:failed",e.ON_MESSAGE="websocket:on_message",e.REQUEST_NEW_URLS="websocket:request_new_urls",e.RECONNECT_CREATE_CONNECTION="websocket:reconnect_create_connection",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="websocket:on_token_privilege_did_expire",e}({});function bR(e){if("string"!=typeof e||!/^[a-zA-Z0-9 \!\#\$\%\&\(\)\+\-\:\;\<\=\.\>\?\@\[\]\^\_\{\}\|\~\,]{1,64}$/.test(e))throw oI.error("Invalid Channel Name ".concat(e)),new pI(lw.INVALID_PARAMS,"The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,")}function CR(e){if(!("number"==typeof(t=e)&&Math.floor(t)===t&&0<=t&&t<=4294967295||_w(e,1,255)))throw new pI(lw.INVALID_PARAMS,"[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]");var t;"string"==typeof e&&oI.warn("You input a string as the user ID, to ensure better end-user experience, Agora highly suggests not using a string as the user ID.")}let SR=function(e){return e.TRANSCODE="mix_streaming",e.RAW="raw_streaming",e}({});const wR={alpha:1,height:640,width:360,x:0,y:0,zOrder:0,audioChannel:0},TR={x:0,y:0,width:160,height:160,zOrder:255,alpha:1};function IR(e,t){fw(e.url,"".concat(t,".url"),1,1e3,!1),mw(e.x)||pw(e.x,"".concat(t,".x"),0,1e4),mw(e.y)||pw(e.y,"".concat(t,".y"),0,1e4),mw(e.width)||pw(e.width,"".concat(t,".width"),0,1e4),mw(e.height)||pw(e.height,"".concat(t,".height"),0,1e4),mw(e.zOrder)||pw(e.zOrder,"".concat(t,".zOrder"),0,255),mw(e.alpha)||pw(e.alpha,"".concat(t,".alpha"),0,1,!1)}const RR={audioBitrate:48,audioChannels:1,audioSampleRate:48e3,backgroundColor:0,height:360,lowLatency:!1,videoBitrate:400,videoCodecProfile:100,videoCodecType:1,videoFrameRate:15,videoGop:30,width:640,images:[],userConfigs:[],userConfigExtraInfo:""};let OR=function(e){return e.WARNING="@live_uap-warning",e.ERROR="@line_uap-error",e.PUBLISH_STREAM_STATUS="@live_uap-publish-status",e.WORKER_STATUS="@live_uap-worker-status",e.REQUEST_NEW_ADDRESS="@live_uap-request-address",e}({}),NR=function(e){return e.REQUEST_WORKER_MANAGER_LIST="@live_req_worker_manager",e}({}),kR=function(e){return e[e.LIVE_STREAM_RESPONSE_SUCCEED=200]="LIVE_STREAM_RESPONSE_SUCCEED",e[e.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM=454]="LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM",e[e.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR=450]="LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_BAD_STREAM=451]="LIVE_STREAM_RESPONSE_BAD_STREAM",e[e.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR=400]="LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR",e[e.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST=404]="LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST",e[e.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED=456]="LIVE_STREAM_RESPONSE_NOT_AUTHORIZED",e[e.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE=457]="LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE",e[e.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN=429]="LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN",e[e.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH=452]="LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH",e[e.LIVE_STREAM_RESPONSE_NOT_SUPPORTED=453]="LIVE_STREAM_RESPONSE_NOT_SUPPORTED",e[e.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM=455]="LIVE_STREAM_RESPONSE_MAX_STREAM_NUM",e[e.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR=500]="LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR",e[e.LIVE_STREAM_RESPONSE_WORKER_LOST=501]="LIVE_STREAM_RESPONSE_WORKER_LOST",e[e.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT=502]="LIVE_STREAM_RESPONSE_RESOURCE_LIMIT",e[e.LIVE_STREAM_RESPONSE_WORKER_QUIT=503]="LIVE_STREAM_RESPONSE_WORKER_QUIT",e[e.ERROR_FAIL_SEND_MESSAGE=504]="ERROR_FAIL_SEND_MESSAGE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE=30]="PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT=31]="PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT",e[e.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH=32]="PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH",e[e.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN=33]="PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN",e}({});function PR(e){if(!e.channelName)throw new pI(lw.INVALID_PARAMS,"invalid channelName in info");if("number"!=typeof e.uid)throw new pI(lw.INVALID_PARAMS,"invalid uid in info, uid must be a number");return e.token&&fw(e.token,"info.token",1,2047),CR(e.uid),bR(e.channelName),!0}let DR=function(e){return e[e.SetSdkProfile=0]="SetSdkProfile",e[e.SetSourceChannel=1]="SetSourceChannel",e[e.SetSourceUserId=2]="SetSourceUserId",e[e.SetDestChannel=3]="SetDestChannel",e[e.StartPacketTransfer=4]="StartPacketTransfer",e[e.StopPacketTransfer=5]="StopPacketTransfer",e[e.UpdateDestChannel=6]="UpdateDestChannel",e[e.Reconnect=7]="Reconnect",e[e.SetVideoProfile=8]="SetVideoProfile",e}({}),LR=function(e){return e.NETWORK_DISCONNECTED="NETWORK_DISCONNECTED",e.NETWORK_CONNECTED="NETWORK_CONNECTED",e.PACKET_JOINED_SRC_CHANNEL="PACKET_JOINED_SRC_CHANNEL",e.PACKET_JOINED_DEST_CHANNEL="PACKET_JOINED_DEST_CHANNEL",e.PACKET_SENT_TO_DEST_CHANNEL="PACKET_SENT_TO_DEST_CHANNEL",e.PACKET_RECEIVED_VIDEO_FROM_SRC="PACKET_RECEIVED_VIDEO_FROM_SRC",e.PACKET_RECEIVED_AUDIO_FROM_SRC="PACKET_RECEIVED_AUDIO_FROM_SRC",e.PACKET_UPDATE_DEST_CHANNEL="PACKET_UPDATE_DEST_CHANNEL",e.PACKET_UPDATE_DEST_CHANNEL_REFUSED="PACKET_UPDATE_DEST_CHANNEL_REFUSED",e.PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE="PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE",e}({}),BR=function(e){return e.RELAY_STATE_IDLE="RELAY_STATE_IDLE",e.RELAY_STATE_CONNECTING="RELAY_STATE_CONNECTING",e.RELAY_STATE_RUNNING="RELAY_STATE_RUNNING",e.RELAY_STATE_FAILURE="RELAY_STATE_FAILURE",e}({}),UR=function(e){return e.RELAY_OK="RELAY_OK",e.SERVER_CONNECTION_LOST="SERVER_CONNECTION_LOST",e.SRC_TOKEN_EXPIRED="SRC_TOKEN_EXPIRED",e.DEST_TOKEN_EXPIRED="DEST_TOKEN_EXPIRED",e}({}),MR=function(e){return e.High="high",e.Low="low",e.Audio="audio",e.Screen="screen",e.ScreenLow="screen_low",e}({}),xR=function(e){return e.DISCONNECT="disconnect",e.CONNECTION_STATE_CHANGE="connection-state-change",e.NETWORK_QUALITY="network-quality",e.STREAM_TYPE_CHANGE="stream-type-change",e.IS_P2P_DISCONNECTED="is-p2p-dis",e.DISCONNECT_P2P="dis-p2p",e.REQUEST_NEW_GATEWAY_LIST="req-gate-url",e.NEED_RENEW_SESSION="need-sid",e.REQUEST_P2P_CONNECTION_PARAMS="request-p2p-connection-params",e.JOIN_RESPONSE="join-response",e.RESET_CONNECTION_EVENTS="reset-connection-events",e.PRE_CONNECT_PC="pre-connect_pc",e}({}),FR=function(e){return e.P2P_DISCONNECTED="P2P_DISCONNECTED",e.A_ROUND_WS_FAILED="A_ROUND_WS_FAILED",e.TIMEOUT="TIMEOUT",e.UNKNOWN_REASON="UNKNOWN_REASON",e}({}),$R=function(e){return e[e.Nothing=0]="Nothing",e[e.Audio=1]="Audio",e[e.LwoVideo=2]="LwoVideo",e[e.Video=4]="Video",e[e.Data=8]="Data",e[e.DataStream0=256]="DataStream0",e[e.DataStream1=512]="DataStream1",e[e.DataStream2=1024]="DataStream2",e[e.DataStream3=2048]="DataStream3",e[e.DataStream4=4096]="DataStream4",e[e.DataStream5=8192]="DataStream5",e[e.DataStream6=16384]="DataStream6",e[e.DataStream7=32768]="DataStream7",e}({}),VR=function(e){return e.CHINA="CHINA",e.ASIA="ASIA",e.NORTH_AMERICA="NORTH_AMERICA",e.EUROPE="EUROPE",e.JAPAN="JAPAN",e.INDIA="INDIA",e.KOREA="KOREA",e.HKMC="HKMC",e.US="US",e.OCEANIA="OCEANIA",e.SOUTH_AMERICA="SOUTH_AMERICA",e.AFRICA="AFRICA",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL",e.EXTENSIONS="EXTENSIONS",e}({});const HR=[VR.AFRICA,VR.ASIA,VR.CHINA,VR.EUROPE,VR.GLOBAL,VR.INDIA,VR.JAPAN,VR.NORTH_AMERICA,VR.OCEANIA,VR.OVERSEA,VR.SOUTH_AMERICA];let jR=function(e){return e.CHINA="CN",e.ASIA="AS",e.NORTH_AMERICA="NA",e.EUROPE="EU",e.JAPAN="JP",e.INDIA="IN",e.KOREA="KR",e.HKMC="HK",e.US="US",e.OCEANIA="OC",e.SOUTH_AMERICA="SA",e.AFRICA="AF",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL",e.EXTENSIONS="GLOBAL",e}({});const QR={CHINA:{},ASIA:{CODE:jR.ASIA,WEBCS_DOMAIN:["ap-web-1-asia.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-asia.agora.io"],PROXY_CS:["proxy-ap-web-asia.agora.io"],CDS_AP:["cds-ap-web-asia.agora.io","cds-ap-web-asia2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-asia.agora.io","sua-ap-web-asia2.agora.io"],UAP_AP:["uap-ap-web-asia.agora.io","uap-ap-web-asia2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],PROXY_SERVER_TYPE3:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]},NORTH_AMERICA:{CODE:jR.NORTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-north-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-north-america.agora.io"],PROXY_CS:["proxy-ap-web-america.agora.io"],CDS_AP:["cds-ap-web-america.agora.io","cds-ap-web-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-america.agora.io","sua-ap-web-america2.agora.io"],UAP_AP:["uap-ap-web-america.agora.io","uap-ap-web-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],PROXY_SERVER_TYPE3:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]},EUROPE:{CODE:jR.EUROPE,WEBCS_DOMAIN:["ap-web-1-europe.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-europe.agora.io"],PROXY_CS:["proxy-ap-web-europe.agora.io"],CDS_AP:["cds-ap-web-europe.agora.io","cds-ap-web-europe2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-europe.agora.io","sua-ap-web-europe.agora.io"],UAP_AP:["uap-ap-web-europe.agora.io","uap-ap-web-europe2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],PROXY_SERVER_TYPE3:["europe.webrtc-cloud-proxy.sd-rtn.com"]},JAPAN:{CODE:jR.JAPAN,WEBCS_DOMAIN:["ap-web-1-japan.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-japan.agora.io"],PROXY_CS:["proxy-ap-web-japan.agora.io"],CDS_AP:["cds-ap-web-japan.agora.io","cds-ap-web-japan2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-japan.agora.io","sua-ap-web-japan2.agora.io"],UAP_AP:["uap-ap-web-japan.agora.io","uap-ap-web-japan2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],PROXY_SERVER_TYPE3:["japan.webrtc-cloud-proxy.sd-rtn.com"]},INDIA:{CODE:jR.INDIA,WEBCS_DOMAIN:["ap-web-1-india.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-india.agora.io"],PROXY_CS:["proxy-ap-web-india.agora.io"],CDS_AP:["cds-ap-web-india.agora.io","cds-ap-web-india2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-india.agora.io","sua-ap-web-india2.agora.io"],UAP_AP:["uap-ap-web-india.agora.io","uap-ap-web-india2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],PROXY_SERVER_TYPE3:["india.webrtc-cloud-proxy.sd-rtn.com"]},KOREA:{CODE:jR.KOREA,WEBCS_DOMAIN:["ap-web-1-korea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-korea.agora.io"],PROXY_CS:["proxy-ap-web-korea.agora.io"],CDS_AP:["cds-ap-web-korea.agora.io","cds-ap-web-korea2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-korea.agora.io","sua-ap-web-korea2.agora.io"],UAP_AP:["uap-ap-web-korea.agora.io","uap-ap-web-korea2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-korea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-korea.agora.io"],LOG_UPLOAD_SERVER:["logservice-korea.agora.io"],PROXY_SERVER_TYPE3:["korea.webrtc-cloud-proxy.sd-rtn.com"]},HKMC:{CODE:jR.HKMC,WEBCS_DOMAIN:["ap-web-1-hkmc.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-hkmc.agora.io"],PROXY_CS:["proxy-ap-web-hkmc.agora.io"],CDS_AP:["cds-ap-web-hkmc.agora.io","cds-ap-web-hkmc2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-hkmc.agora.io","sua-ap-web-hkmc2.agora.io"],UAP_AP:["uap-ap-web-hkmc.agora.io","uap-ap-web-hkmc2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-hkmc.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-hkmc.agora.io"],LOG_UPLOAD_SERVER:["logservice-hkmc.agora.io"],PROXY_SERVER_TYPE3:["hkmc.webrtc-cloud-proxy.sd-rtn.com"]},US:{CODE:jR.US,WEBCS_DOMAIN:["ap-web-1-us.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-us.agora.io"],PROXY_CS:["proxy-ap-web-us.agora.io"],CDS_AP:["cds-ap-web-us.agora.io","cds-ap-web-us2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-us.agora.io","sua-ap-web-us2.agora.io"],UAP_AP:["uap-ap-web-us.agora.io","uap-ap-web-us2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-us.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-us.agora.io"],LOG_UPLOAD_SERVER:["logservice-us.agora.io"],PROXY_SERVER_TYPE3:["us.webrtc-cloud-proxy.sd-rtn.com"]},OVERSEA:{CODE:jR.OVERSEA,WEBCS_DOMAIN:["ap-web-1-oversea.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oversea.agora.io"],PROXY_CS:["proxy-ap-web-oversea.agora.io"],CDS_AP:["cds-ap-web-oversea.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oversea.agora.io"],UAP_AP:["uap-ap-web-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.agora.io"]},GLOBAL:{CODE:jR.GLOBAL,WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-3.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-3.agora.io"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-3.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2.agora.io"],LOG_UPLOAD_SERVER:["logservice.agora.io"],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy.sd-rtn.com"]},OCEANIA:{CODE:jR.OCEANIA,WEBCS_DOMAIN:["ap-web-1-oceania.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-oceania.agora.io"],PROXY_CS:["proxy-ap-web-oceania.agora.io"],CDS_AP:["cds-ap-web-oceania.agora.io","cds-ap-web-oceania2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-oceania.agora.io","sua-ap-web-oceania2.agora.io"],UAP_AP:["uap-ap-web-oceania.agora.io","uap-ap-web-oceania2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],PROXY_SERVER_TYPE3:["oceania.webrtc-cloud-proxy.sd-rtn.com"]},SOUTH_AMERICA:{CODE:jR.SOUTH_AMERICA,WEBCS_DOMAIN:["ap-web-1-south-america.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-south-america.agora.io"],PROXY_CS:["proxy-ap-web-south-america.agora.io"],CDS_AP:["cds-ap-web-south-america.agora.io","cds-ap-web-south-america2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-south-america.agora.io","sua-ap-web-south-america2.agora.io"],UAP_AP:["uap-ap-web-south-america.agora.io","uap-ap-web-south-america2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],PROXY_SERVER_TYPE3:["south-america.webrtc-cloud-proxy.sd-rtn.com"]},AFRICA:{CODE:jR.AFRICA,WEBCS_DOMAIN:["ap-web-1-africa.agora.io"],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-africa.agora.io"],PROXY_CS:["proxy-ap-web-africa.agora.io"],CDS_AP:["cds-ap-web-africa.agora.io","cds-ap-web-africa2.agora.io"],ACCOUNT_REGISTER:["sua-ap-web-africa.agora.io","sua-ap-web-africa2.agora.io"],UAP_AP:["uap-ap-web-africa.agora.io","uap-ap-web-africa2.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],PROXY_SERVER_TYPE3:["africa.webrtc-cloud-proxy.sd-rtn.com"]},EXTENSIONS:{}};kT&&(QR.CHINA={CODE:jR.CHINA,WEBCS_DOMAIN:["webrtc2-2.ap.sd-rtn.com"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-4.ap.sd-rtn.com"],PROXY_CS:["proxy-web.ap.sd-rtn.com"],CDS_AP:["cds-web-2.ap.sd-rtn.com","cds-web-4.ap.sd-rtn.com"],ACCOUNT_REGISTER:["sua-web-2.ap.sd-rtn.com","sua-web-4.ap.sd-rtn.com"],UAP_AP:["uap-web-2.ap.sd-rtn.com","uap-web-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],PROXY_SERVER_TYPE3:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]});let GR=function(e){return e.UPDATE_BITRATE_LIMIT="update_bitrate_limit",e}({});class KR extends ww{constructor(e,t){super(),Ov(this,"onICEConnectionStateChange",void 0),Ov(this,"onConnectionStateChange",void 0),Ov(this,"onDTLSTransportStateChange",void 0),Ov(this,"onDTLSTransportError",void 0),Ov(this,"onICETransportStateChange",void 0),Ov(this,"onFirstAudioReceived",void 0),Ov(this,"onFirstVideoReceived",void 0),Ov(this,"onFirstAudioDecoded",void 0),Ov(this,"onFirstVideoDecoded",void 0),Ov(this,"onFirstVideoDecodedTimeout",void 0),Ov(this,"onSelectedLocalCandidateChanged",void 0),Ov(this,"onSelectedRemoteCandidateChanged",void 0),Ov(this,"getLocalVideoStats",void 0)}}class WR extends KR{constructor(e,t){super(e,t),Ov(this,"establishPromise",void 0)}}let qR=function(e){return e.VIDEO="video",e.AUDIO="audio",e}({}),zR=function(e){return e[e.UDP=0]="UDP",e[e.TCP=1]="TCP",e[e.RELAY=2]="RELAY",e}({}),YR=function(e){return e[e.FIRST_CONNECTION=0]="FIRST_CONNECTION",e[e.TCP_RESTART=1]="TCP_RESTART",e[e.RELAY_RESTART=2]="RELAY_RESTART",e[e.OLD_FIRST_CONNECTION=10]="OLD_FIRST_CONNECTION",e[e.OLD_RESTART=11]="OLD_RESTART",e[e.DISCONNECTED_OR_FAILED=20]="DISCONNECTED_OR_FAILED",e}({}),JR=function(e){return e.LocalVideoTrack="videoTrack",e.LocalAudioTrack="audioTrack",e.LocalVideoLowTrack="videoLowTrack",e}({}),XR=function(e){return e.New="new",e.Connected="connected",e.Reconnecting="reconnecting",e.Disconnected="disconnected",e}({}),ZR=function(e){return e.StateChange="stateChange",e.IceConnectionStateChange="iceConnectionStateChange",e.RequestMuteLocal="requestMuteLocal",e.RequestUnmuteLocal="requestUnmuteLocal",e.RequestRePublish="requestRePublish",e.RequestRePublishDataChannel="requestRePublishDataChannel",e.RequestReSubscribe="requestReSubscribe",e.RequestUploadStats="requestUploadStats",e.RequestUpload="requestUpload",e.MediaReconnectStart="MediaReconnectStart",e.MediaReconnectEnd="MediaReconnectEnd",e.NeedSignalRTT="NeedSignalRTT",e.RequestRestartICE="RequestRestartIce",e.PeerConnectionStateChange="PeerConnectionStateChange",e.RequestReconnect="RequestReconnect",e.RequestReconnectPC="RequestReconnectPC",e.RequestUnpublishForReconnectPC="RequestUnpublishForReconnectPC",e.P2PLost="P2PLost",e.UpdateVideoEncoder="UpdateVideoEncoder",e.ConnectionTypeChange="ConnectionTypeChange",e.RequestLowStreamParameter="RequestLowStreamParameter",e.QueryClientConnectionState="QueryClientConnectionState",e.LocalCandidate="LocalCandidate",e.RequestP2PMuteLocal="requestP2PMuteLocal",e.RequestP2PUnPublish="RequestP2PUnPublish",e.RequestP2PUnmuteRemote="RequestP2PUnmuteRemote",e.RequestP2PMuteRemote="RequestP2PMuteRemote",e.RequestP2PRestartICE="RequestP2PRestartICE",e}({}),eO=function(e){return e.CONNECTING="CONNECTING",e.RECONNECTING="RECONNECTING",e.CONNECTED="CONNECTED",e.CLOSED="CLOSED",e}({}),tO=function(e){return e[e.CONNECT_AP=0]="CONNECT_AP",e[e.AP_CONNECTED=1]="AP_CONNECTED",e[e.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",e[e.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",e[e.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",e[e.CONNECT_WORKER=5]="CONNECT_WORKER",e[e.WORKER_CONNECTED=6]="WORKER_CONNECTED",e[e.CLOSED=7]="CLOSED",e}({}),nO=function(e){return e.CONNECTION_STATE_CHANGE="connection-state-change",e.STATE_CHANGE="state-change",e.INSPECT_RESULT="inspect-result",e.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",e.REQUEST_NEW_WORKER_URL="request-new-worker-url",e}({}),rO=function(e){return e.CONNECTED="transmitter:connected",e.RECONNECTING="transmitter:reconnecting",e.WILL_RECONNECT="transmitter:will_reconnect",e.CLOSED="transmitter:closed",e.FAILED="transmitter:failed",e.ON_MESSAGE="transmitter:on_message",e.REQUEST_NEW_URLS="transmitter:request_new_urls",e.RECONNECT_CREATE_CONNECTION="transmitter:reconnect_create_connection",e.ON_TOKEN_PRIVILEGE_DID_EXPIRE="transmitter:on_token_privilege_did_expire",e.TO_CONNECT_DATACHANNEL="transmitter:to_connect_datachannel",e.FAILBACK="transmitter:failback",e.PRE_CONNECT_PC="transmitter:pre_connect_pc",e}({}),oO=function(e){return e.CAMERA_CHANGED="camera-changed",e.MICROPHONE_CHANGED="microphone-changed",e.PLAYBACK_DEVICE_CHANGED="playback-device-changed",e.AUDIO_AUTOPLAY_FAILED="audio-autoplay-failed",e.AUTOPLAY_FAILED="autoplay-failed",e.AUDIO_CONTEXT_STATE_CHANGED="audio-context-state-changed",e.SECURITY_POLICY_VIOLATION="security-policy-violation",e}({}),iO=function(e){return e.CONNECTING="CONNECTING",e.RECONNECTING="RECONNECTING",e.CONNECTED="CONNECTED",e.CLOSED="CLOSED",e}({}),aO=function(e){return e.CONNECTION_STATE_CHANGE="connection-state-change",e.STATE_CHANGE="state-change",e.INSPECT_RESULT="inspect-result",e.CLIENT_LOCAL_VIDEO_TRACK="client-local-video-track",e.REQUEST_NEW_WORKER_URL="request-new-worker-url",e}({}),sO=function(e){return e[e.CONNECT_AP=0]="CONNECT_AP",e[e.AP_CONNECTED=1]="AP_CONNECTED",e[e.CONNECT_WORKER_MANAGER=2]="CONNECT_WORKER_MANAGER",e[e.WORKER_MANAGER_CONNECTED=3]="WORKER_MANAGER_CONNECTED",e[e.GET_WORKER_MANAGER_RESPONSE=4]="GET_WORKER_MANAGER_RESPONSE",e[e.CONNECT_WORKER=5]="CONNECT_WORKER",e[e.WORKER_CONNECTED=6]="WORKER_CONNECTED",e[e.CLOSED=7]="CLOSED",e}({}),cO=function(e){return e.CALL="call",e.CANDIDATE="candidate",e.PUBLISH="publish",e.UNPUBLISH="unpublish",e.CONTROL="control",e.RESTART_ICE="restart_ice",e.ACK="ack",e.RESPONSE="response",e.JOIN="join",e.CHECK="check",e}({}),lO=function(e){return e.ABORT="abort",e}({}),uO=function(e){return e.MUTE_LOCAL_AUDIO="mute_local_audio",e.MUTE_LOCAL_VIDEO="mute_local_video",e.UNMUTE_LOCAL_AUDIO="unmute_local_audio",e.UNMUTE_LOCAL_VIDEO="unmute_local_video",e}({}),dO=function(e){return e.P2P_TOKEN_TIMEOUT="p2p_token_timeout",e.P2P_TOKEN_CHANGED="p2p_token_changed",e}({});const AO={[uR.ACCESS_POINT]:{[pR.NO_FLAG_SET]:{desc:"flag is zero",retry:!1},[pR.FLAG_SET_BUT_EMPTY]:{desc:"flag is empty",retry:!1},[pR.INVALID_FALG_SET]:{desc:"invalid flag",retry:!1},[pR.FLAG_SET_BUT_NO_RE]:{desc:"flag set unilbs but no request",retry:!1},[pR.INVALID_SERVICE_ID]:{desc:"invalid service id",retry:!1},[pR.NO_SERVICE_AVAILABLE]:{desc:"no service available",retry:!0},[pR.NO_SERVICE_AVAILABLE_P2P]:{desc:"no unilbs p2p service available",retry:!0},[pR.NO_SERVICE_AVAILABLE_VOICE]:{desc:"no unilbs voice service available",retry:!0},[pR.NO_SERVICE_AVAILABLE_WEBRTC]:{desc:"no unilbs webrtc service available",retry:!0},[pR.NO_SERVICE_AVAILABLE_CDS]:{desc:"no cds service available",retry:!0},[pR.NO_SERVICE_AVAILABLE_CDN]:{desc:"no cdn dispatcher service available",retry:!0},[pR.NO_SERVICE_AVAILABLE_TDS]:{desc:"no tds service available",retry:!0},[pR.NO_SERVICE_AVAILABLE_REPORT]:{desc:"no unilbs report service available",retry:!0},[pR.NO_SERVICE_AVAILABLE_APP_CENTER]:{desc:"no app center service available",retry:!0},[pR.NO_SERVICE_AVAILABLE_ENV0]:{desc:"no unilbs sig env0 service available",retry:!0},[pR.NO_SERVICE_AVAILABLE_VOET]:{desc:"no unilbs voet service available",retry:!0},[pR.NO_SERVICE_AVAILABLE_STRING_UID]:{desc:"no string uid service available",retry:!0},[pR.NO_SERVICE_AVAILABLE_WEBRTC_UNILBS]:{desc:"no webrtc unilbs service available",retry:!0}},[uR.UNILBS]:{[AR.INVALID_VENDOR_KEY]:{desc:"invalid vendor key, can not find appid",retry:!1},[AR.INVALID_CHANNEL_NAME]:{desc:"invalid channel name",retry:!1},[AR.INTERNAL_ERROR]:{desc:"unilbs internal error",retry:!1},[AR.NO_AUTHORIZED]:{desc:"invalid token, authorized failed",retry:!1},[AR.DYNAMIC_KEY_TIMEOUT]:{desc:"dynamic key or token timeout",retry:!1},[AR.NO_ACTIVE_STATUS]:{desc:"no active status",retry:!1},[AR.DYNAMIC_KEY_EXPIRED]:{desc:"dynamic key expired",retry:!1},[AR.STATIC_USE_DYNAMIC_KEY]:{desc:"static use dynamic key",retry:!1},[AR.DYNAMIC_USE_STATIC_KEY]:{desc:"dynamic use static key",retry:!1},[AR.USER_OVERLOAD]:{desc:"amount of users over load",retry:!1},[AR.FORBIDDEN_REGION]:{desc:"the request is forbidden in this area",retry:!1},[AR.CANNOT_MEET_AREA_DEMAND]:{desc:"unable to allocate services in this area",retry:!1}},[uR.STRING_UID_ALLOCATOR]:{[dR.IIIEGAL_APPID]:{desc:"invalid appid",retry:!1},[dR.IIIEGAL_UID]:{desc:"invalid string uid",retry:!1},[dR.INTERNAL_ERROR]:{desc:"string uid allocator internal error",retry:!0}}};function pO(e){const t=AO[Math.floor(e/1e4)];if(!t)return{desc:"unknown error",retry:!1};const n=t[e%1e4];if(!n){if(Math.floor(e/1e4)===uR.ACCESS_POINT){const t=e%1e4;if("1"===t.toString()[0])return{desc:e.toString(),retry:!1};if("2"===t.toString()[0])return{desc:e.toString(),retry:!0}}return{desc:"unknown error",retry:!1}}return n}const hO={[hR.K_TIMESTAMP_EXPIRED]:{desc:"K_TIMESTAMP_EXPIRED",action:"failed"},[hR.K_CHANNEL_PERMISSION_INVALID]:{desc:"K_CHANNEL_PERMISSION_INVALID",action:"failed"},[hR.K_CERTIFICATE_INVALID]:{desc:"K_CERTIFICATE_INVALID",action:"failed"},[hR.K_CHANNEL_NAME_EMPTY]:{desc:"K_CHANNEL_NAME_EMPTY",action:"failed"},[hR.K_CHANNEL_NOT_FOUND]:{desc:"K_CHANNEL_NOT_FOUND",action:"failed"},[hR.K_TICKET_INVALID]:{desc:"K_TICKET_INVALID",action:"failed"},[hR.K_CHANNEL_CONFLICTED]:{desc:"K_CHANNEL_CONFLICTED",action:"failed"},[hR.K_SERVICE_NOT_READY]:{desc:"K_SERVICE_NOT_READY",action:"tryNext"},[hR.K_SERVICE_TOO_HEAVY]:{desc:"K_SERVICE_TOO_HEAVY",action:"tryNext"},[hR.K_UID_BANNED]:{desc:"K_UID_BANNED",action:"failed"},[hR.K_IP_BANNED]:{desc:"K_IP_BANNED",action:"failed"},[hR.K_AUTO_REBALANCE]:{desc:"k_AUTO_REBALANCE",action:"recover"},[hR.ERR_INVALID_VENDOR_KEY]:{desc:"ERR_INVALID_VENDOR_KEY",action:"failed"},[hR.ERR_INVALID_CHANNEL_NAME]:{desc:"ERR_INVALID_CHANNEL_NAME",action:"failed"},[hR.WARN_NO_AVAILABLE_CHANNEL]:{desc:"WARN_NO_AVAILABLE_CHANNEL",action:"failed"},[hR.WARN_LOOKUP_CHANNEL_TIMEOUT]:{desc:"WARN_LOOKUP_CHANNEL_TIMEOUT",action:"tryNext"},[hR.WARN_LOOKUP_CHANNEL_REJECTED]:{desc:"WARN_LOOKUP_CHANNEL_REJECTED",action:"failed"},[hR.WARN_OPEN_CHANNEL_TIMEOUT]:{desc:"WARN_OPEN_CHANNEL_TIMEOUT",action:"tryNext"},[hR.WARN_OPEN_CHANNEL_REJECTED]:{desc:"WARN_OPEN_CHANNEL_REJECTED",action:"failed"},[hR.WARN_REQUEST_DEFERRED]:{desc:"WARN_REQUEST_DEFERRED",action:"failed"},[hR.ERR_DYNAMIC_KEY_TIMEOUT]:{desc:"ERR_DYNAMIC_KEY_TIMEOUT",action:"failed"},[hR.ERR_NO_AUTHORIZED]:{desc:"ERR_NO_AUTHORIZED",action:"failed"},[hR.ERR_VOM_SERVICE_UNAVAILABLE]:{desc:"ERR_VOM_SERVICE_UNAVAILABLE",action:"tryNext"},[hR.ERR_NO_CHANNEL_AVAILABLE_CODE]:{desc:"ERR_NO_CHANNEL_AVAILABLE_CODE",action:"failed"},[hR.ERR_MASTER_VOCS_UNAVAILABLE]:{desc:"ERR_MASTER_VOCS_UNAVAILABLE",action:"tryNext"},[hR.ERR_INTERNAL_ERROR]:{desc:"ERR_INTERNAL_ERROR",action:"tryNext"},[hR.ERR_NO_ACTIVE_STATUS]:{desc:"ERR_NO_ACTIVE_STATUS",action:"failed"},[hR.ERR_INVALID_UID]:{desc:"ERR_INVALID_UID",action:"failed"},[hR.ERR_DYNAMIC_KEY_EXPIRED]:{desc:"ERR_DYNAMIC_KEY_EXPIRED",action:"failed"},[hR.ERR_STATIC_USE_DYANMIC_KE]:{desc:"ERR_STATIC_USE_DYANMIC_KE",action:"failed"},[hR.ERR_DYNAMIC_USE_STATIC_KE]:{desc:"ERR_DYNAMIC_USE_STATIC_KE",action:"failed"},[hR.ERR_NO_VOCS_AVAILABLE]:{desc:"ERR_NO_VOCS_AVAILABLE",action:"tryNext"},[hR.ERR_NO_VOS_AVAILABLE]:{desc:"ERR_NO_VOS_AVAILABLE",action:"tryNext"},[hR.ERR_JOIN_CHANNEL_TIMEOUT]:{desc:"ERR_JOIN_CHANNEL_TIMEOUT",action:"tryNext"},[hR.ERR_JOIN_BY_MULTI_IP]:{desc:"ERR_JOIN_BY_MULTI_IP",action:"recover"},[hR.ERR_NOT_JOINED]:{desc:"ERR_NOT_JOINED",action:"failed"},[hR.ERR_REPEAT_JOIN_REQUEST]:{desc:"ERR_REPEAT_JOIN_REQUEST",action:"quit"},[hR.ERR_REPEAT_JOIN_CHANNEL]:{desc:"ERR_REPEAT_JOIN_CHANNEL",action:"quit"},[hR.ERR_INVALID_STRINGUID]:{desc:"ERR_INVALID_STRINGUID",action:"failed"},[hR.ERR_TOO_MANY_USERS]:{desc:"ERR_TOO_MANY_USERS",action:"tryNext"},[hR.ERR_SET_CLIENT_ROLE_TIMEOUT]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[hR.ERR_SET_CLIENT_ROLE_NO_PERMISSION]:{desc:"ERR_SET_CLIENT_ROLE_TIMEOUT",action:"failed"},[hR.ERR_SET_CLIENT_ROLE_ALREADY_IN_USE]:{desc:"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",action:"success"},[hR.ERR_PUBLISH_REQUEST_INVALID]:{desc:"ERR_PUBLISH_REQUEST_INVALID",action:"failed"},[hR.ERR_SUBSCRIBE_REQUEST_INVALID]:{desc:"ERR_SUBSCRIBE_REQUEST_INVALID",action:"failed"},[hR.ERR_NOT_SUPPORTED_MESSAGE]:{desc:"ERR_NOT_SUPPORTED_MESSAGE",action:"failed"},[hR.ERR_ILLEAGAL_PLUGIN]:{desc:"ERR_ILLEAGAL_PLUGIN",action:"failed"},[hR.ILLEGAL_CLIENT_ROLE_LEVEL]:{desc:"ILLEGAL_CLIENT_ROLE_LEVEL",action:"failed"},[hR.ERR_REJOIN_TOKEN_INVALID]:{desc:"ERR_REJOIN_TOKEN_INVALID",action:"failed"},[hR.ERR_REJOIN_USER_NOT_JOINED]:{desc:"ERR_REJOIN_NOT_JOINED",action:"failed"},[hR.ERR_INVALID_OPTIONAL_INFO]:{desc:"ERR_INVALID_OPTIONAL_INFO",action:"quit"},[hR.ERR_TEST_RECOVER]:{desc:"ERR_TEST_RECOVER",action:"recover"},[hR.ERR_TEST_TRYNEXT]:{desc:"ERR_TEST_TRYNEXT",action:"recover"},[hR.ERR_TEST_RETRY]:{desc:"ERR_TEST_RETRY",action:"recover"},[hR.ILLEGAL_AES_PASSWORD]:{desc:"ERR_TEST_RETRY",action:"failed"},[hR.ERR_TOO_MANY_BROADCASTERS]:{desc:"ERR_TOO_MANY_BROADCASTERS",action:"failed"},[hR.ERR_TOO_MANY_SUBSCRIBERS]:{desc:"ERR_TOO_MANY_SUBSCRIBERS",action:"failed"},[hR.ERR_LICENSE_ILLEGAL]:{desc:"ERR_LICENSE_ILLEGAL",action:"quit"},[hR.ERR_LICENSE_MISSING]:{desc:"ERR_LICENSE_MISSING",action:"quit"},[hR.ERR_LICENSE_EXPIRED]:{desc:"ERR_LICENSE_EXPIRED",action:"quit"},[hR.ERR_LICENSE_MINUTES_EXCEEDED]:{desc:"ERR_LICENSE_MINUTES_EXCEEDED",action:"quit"},[hR.ERR_LICENSE_PERIOD_INVALID]:{desc:"ERR_LICENSE_PERIOD_INVALID",action:"quit"},[hR.ERR_LICENSE_MULTIPLE_SDK_SERVICE]:{desc:"ERR_LICENSE_MULTIPLE_SDK_SERVICE",action:"quit"}};function fO(e){return hO[e]||{desc:"UNKNOWN_ERROR_".concat(e),action:"failed"}}function gO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gO(Object(n),!0).forEach((function(t){Ov(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _O(e){return e.every((e=>e.readyState===WebSocket.CLOSED||e.readyState===WebSocket.CLOSING))}function EO(e,t){if("string"==typeof e)return e;const{proxy:n,host:r,port:o}=e;if(t){const e=xT("JOIN_GATEWAY_FALLBACK_PORT")||443;return 443===e?"wss://".concat(r,"/ws/?p=").concat(Number(o)+150):"wss://".concat(r,":").concat(e,"/ws/?p=").concat(Number(o)+150)}return n?"wss://".concat(n,"/ws/?h=").concat(r,"&p=").concat(o):"wss://".concat(r,":").concat(o)}const vO=/wss:\/\/(.+)\/ws\/\?h=(.+)&p=([0-9]+)\/?/,yO=/wss:\/\/(.+)\/ws\/\?p=([0-9]+)\/?/,bO=/wss:\/\/(.+):([0-9]+)\/?/,CO=/wss:\/\/(.[^\/]+)\/?/;let SO=0;class wO{constructor(e,t){Ov(this,"id",0),Ov(this,"store",void 0),Ov(this,"recordIndex",void 0),Ov(this,"websockets",[]),Ov(this,"try443PortDuration",2e3),Ov(this,"forceCloseWSDuration",5e3),Ov(this,"try443PortTimeout",null),Ov(this,"forceCloseTimeout",null),Ov(this,"isTry443PortFailed",!1),Ov(this,"isNormalPortFailed",!1),Ov(this,"useDoubleDomain",!1),Ov(this,"useProxy",!1),Ov(this,"startTime",Date.now()),this.id=++SO,this.try443PortDuration=xT("JOIN_GATEWAY_TRY_443PORT_DURATION")||2e3,this.forceCloseWSDuration=e||5e3,this.store=t}closeAllWebsockets(){this.websockets.forEach((e=>{e.onopen=null,e.onclose=null,e.onmessage=null,e.close()})),this.websockets.length=0}clearTimeout(){this.forceCloseTimeout&&clearTimeout(this.forceCloseTimeout),this.try443PortTimeout&&clearTimeout(this.try443PortTimeout)}logger(){var e;const t=Date.now()-this.startTime;for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];oI.debug("[choose-best-ws ".concat(null===(e=this.store)||void 0===e?void 0:e.clientId," ").concat(this.id,"] ").concat(t,"ms:"),...r)}createWebSocket(e,t,n){this.logger("createWebSocket:",e,{isTry443Port:t,hasTimeoutDetection:n});const r=xT("GATEWAY_DOMAINS"),o=Date.now(),i=[],a=r.find((t=>{var n;return Or(n=e.host).call(n,t)}));a||(this.useDoubleDomain=!1);const s=[];if(this.useDoubleDomain)r.forEach((n=>{s.push(EO(mO(mO({},e),{},{host:e.host.replace(a,n)}),t))}));else{const n=mO({},e);if(t&&a){const e=r.find((e=>e!==a));e&&(n.host=n.host.replace(a,e))}s.push(EO(n,t))}try{s.forEach((e=>{const t=new WebSocket(e);t.binaryType="arraybuffer",i.push(t),this.logger("ws is connecting:",t.url)}))}catch(l){if(this.logger("ws create failed"),i.forEach((e=>e.close())),i.length=0,this.useDoubleDomain)return this.useDoubleDomain=!1,this.createWebSocket(e,t,n);if(!t&&443!==Number(e.port))return this.createWebSocket(e,!0,n);throw new pI(lw.WS_ERR,"init websocket failed! Error: ".concat(l.toString()))}const c=CS();return this.store&&this.store.recordJoinChannelService({urls:i.map((e=>e.url)),service:"gateway"},this.recordIndex),i.forEach((e=>{e.onopen=()=>{this.logger("onopen: ws ".concat(e.url," open cost ").concat(Date.now()-o,"ms")),this.websockets.forEach((t=>{t!==e&&(t.onopen=null,t.onclose=null,t.onmessage=null,t.close(),this.logger("close backup websocket: ".concat(t.url)))})),this.websockets.length=0,c.resolve(e)},e.onclose=n=>{this.logger("onclose: ws ".concat(e.url," closed cost ").concat(Date.now()-o,"ms state: ").concat(e.readyState)),t?this.isTry443PortFailed=_O(i):this.isNormalPortFailed=_O(i),this.logger("443: ".concat(this.useProxy?"not try":this.isTry443PortFailed?"failed":"trying"," 47xx: ").concat(this.isNormalPortFailed?"failed":"trying")),(t&&this.isTry443PortFailed||!t&&(this.isTry443PortFailed||this.useProxy)&&this.isNormalPortFailed)&&(this.logger("onclose: all websocket is closed, ".concat(n.reason)),c.reject({code:n.code,reason:FR.A_ROUND_WS_FAILED}))},e.onmessage=t=>this.logger("".concat(e.url," onmessage: ").concat(t.data))})),this.websockets.push(...i),n||(()=>{const n=()=>{this.logger("5s timeout close un-opens, isWebsocket created: ",c.isResolved),this.websockets.forEach((e=>e.readyState!==WebSocket.OPEN&&e.close()))};if(t||this.useProxy)return this.logger("add 5s timeout at ".concat(t?"try-443":"proxy"," condition")),this.forceCloseTimeout=window.setTimeout(n,this.forceCloseWSDuration);this.try443PortTimeout=window.setTimeout((()=>{if(this.logger("2s timeout, isWebsocket created: ",c.isResolved),c.isResolved)return n();PS().os===IS.MAC_OS&&$S()&&n(),this.createWebSocket(e,!0,!0).then((e=>c.resolve(e))).catch((e=>{this.isNormalPortFailed&&c.reject(e),this.logger("try 443 port to create ws failed")})),this.forceCloseTimeout=window.setTimeout(n,this.forceCloseWSDuration)}),this.try443PortDuration)})(),c.promise}chooseBestWebsocket(e,t,n,r){return this.useDoubleDomain=!!t,"string"==typeof e&&(e=function(e){let t,n,r;return[,t,n,r]=e.match(vO)||[],t||([,n,r]=e.match(yO)||[]),n&&r||([,n,r]=e.match(bO)||[]),n&&r||([,n]=e.match(CO)||[]),n||oI.warning("un-destructible url: ",e),{proxy:t,host:n,port:r||"443"}}(e)),this.recordIndex=r,this.useProxy=!!e.proxy,n&&this.useProxy&&(oI.warn("cannot use 443 only when use proxy"),n=!1),this.createWebSocket(e,!!n,!1).finally((()=>this.clearTimeout()))}}function TO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}class IO extends ww{get url(){return this.websocket&&this.websocket.url||null}get reconnectMode(){return this._reconnectMode}set reconnectMode(e){var t;Or(t=["tryNext","recover"]).call(t,e)&&this.resetReconnectCount(e),this._reconnectMode=e}get state(){return this._state}set state(e){e!==this._state&&(this._state=e,"reconnecting"===this._state?this.emit(yR.RECONNECTING,this.reconnectReason):"connected"===this._state?this.emit(yR.CONNECTED):"closed"===this._state?this.emit(yR.CLOSED):"failed"===this._state&&this.emit(yR.FAILED))}resetReconnectCount(e){oI.debug("websocket reset reconnect count, reason: "+e),this.reconnectCount=0}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5?arguments[5]:void 0;super(),Ov(this,"connectionID",0),Ov(this,"currentURLIndex",0),Ov(this,"urls",[]),Ov(this,"_reconnectMode","tryNext"),Ov(this,"reconnectReason",void 0),Ov(this,"_initMutex",void 0),Ov(this,"name",void 0),Ov(this,"_state","closed"),Ov(this,"reconnectInterrupter",void 0),Ov(this,"websocket",void 0),Ov(this,"retryConfig",void 0),Ov(this,"reconnectCount",0),Ov(this,"forceCloseTimeout",5e3),Ov(this,"onlineReconnectListener",void 0),Ov(this,"useCompress",void 0),Ov(this,"tryDoubleDomain",!1),Ov(this,"use443PortOnly",!1),Ov(this,"wsInflateLength",0),Ov(this,"wsDeflateLength",0),Ov(this,"closeEstablishingWs",(()=>{})),Ov(this,"store",void 0),Ov(this,"joinGatewayRecordIndex",void 0),this.store=i,this.name=e,this.retryConfig=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?TO(Object(n),!0).forEach((function(t){Ov(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t),this.useCompress=n,this.tryDoubleDomain=r,this.use443PortOnly=o,this._initMutex=new _T("websocket",i?i.clientId:void 0);const{timeout:a,timeoutFactor:s}=t,c=Math.max(300,Math.floor(3*a/5)),l=Math.max(1.2,Math.floor(8*s)/10);xw.ONLINE&&(this.retryConfig.timeout=c,this.retryConfig.timeoutFactor=l),Qw.on(Fw.NETWORK_STATE_CHANGE,((e,t)=>{e!==t&&(this.resetReconnectCount("network state change: ".concat(t," -> ").concat(e)),e===xw.ONLINE?(this.retryConfig.timeout=c,this.retryConfig.timeoutFactor=l):(this.retryConfig.timeout=a,this.retryConfig.timeoutFactor=s))}))}getConnection(){return this.websocket||void 0}async init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const n=await this._initMutex.lock();this.forceCloseTimeout=t,this.urls=e,this.state="connecting";try{const e=CS(),t=this.urls[this.currentURLIndex];xT("ENABLE_PREALLOC_PC")&&this.emit(rO.PRE_CONNECT_PC),this.createWebSocketConnection(t).then(e.resolve).catch(e.reject),this.once(yR.CLOSED,(()=>{e.reject(new uw(lw.WS_DISCONNECT))})),this.once(yR.CONNECTED,e.resolve),await e.promise}catch(r){}finally{n()}}close(e,t){if(this.currentURLIndex=0,this.resetReconnectCount("close"),this.reconnectInterrupter&&this.reconnectInterrupter(),this.websocket){this.websocket.onclose=null,this.websocket.onopen=null,this.websocket.onmessage=null;const e=this.websocket;t?setTimeout((()=>e.close()),500):e.close(),this.websocket=void 0}this.state=e?"failed":"closed",this.closeEstablishingWs&&this.closeEstablishingWs()}reconnect(e,t){if(!this.websocket)return void oI.warning("[".concat(this.name,"] can not reconnect, no websocket"));void 0!==e&&(this.reconnectMode=e),oI.debug("[".concat(this.name,"] reconnect is triggered initiative")),"number"==typeof this.joinGatewayRecordIndex&&this.store&&this.store.recordJoinChannelService({status:"error",errors:[new Error(t)]},this.joinGatewayRecordIndex);const n=this.websocket.onclose;this.websocket.onclose=null,this.websocket.close(),n&&n.bind(this.websocket)({code:9999,reason:t})}sendMessage(e){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this.websocket||this.websocket.readyState!==WebSocket.OPEN)throw new uw(lw.WS_ABORT,"websocket is not ready");try{t||(e=JSON.stringify(e)),this.websocket.send(e)}catch(n){throw new uw(lw.WS_ERR,"send websocket message error"+n.toString())}}setWsInflateData(e){this.wsDeflateLength=this.wsDeflateLength+e.originLength,this.wsInflateLength=this.wsInflateLength+e.compressedLength}getWsInflateData(){const e=this.wsInflateLength,t=this.wsDeflateLength;return this.clearWsInflateData(),{wsInflateLength:e,wsDeflateLength:t}}clearWsInflateData(){this.wsInflateLength=0,this.wsDeflateLength=0}async createWebSocketConnection(e){var t;const n=CS();this.connectionID+=1,this.joinGatewayRecordIndex=void 0;const r=e=>{var t;null===(t=this.store)||void 0===t||t.signalChannelOpen(),oI.debug("[".concat(this.name,"] websocket opened:"),e),this.reconnectMode="retry",this.state="connected",this.resetReconnectCount("opened"),n.resolve()},o=async e=>{var t;if(oI.debug("[".concat(this.name,"] websocket close ").concat(null===(t=this.websocket)||void 0===t?void 0:t.url,", code: ").concat(e.code,", reason: ").concat(e.reason,", current mode: ").concat(this.reconnectMode)),this.reconnectCount>=this.retryConfig.maxRetryCount)n.reject(new uw(lw.WS_DISCONNECT,"websocket close: ".concat(e.code))),this.close();else{"connected"===this.state&&(this.reconnectReason=e.reason,this.state="reconnecting");const t=Hw(this,yR.WILL_RECONNECT,this.reconnectMode,e.reason)||this.reconnectMode,r=await this.reconnectWithAction(t);if("closed"===this.state)return void oI.debug("[".concat(this.connectionID,"] ws is closed, no need to reconnect"));if(!r)return n.reject(new uw(lw.WS_DISCONNECT,"websocket reconnect failed: ".concat(e.code))),this.close(!0);n.resolve()}},i=e=>{this.emit(yR.ON_MESSAGE,e)},a=e=>{oI.warn("[".concat(this.connectionID,"] ws open error ").concat(e))};this.websocket&&(this.websocket.onclose=null,this.websocket.close()),xT("GATEWAY_WSS_ADDRESS")&&this.name.startsWith("gateway")&&(e=xT("GATEWAY_WSS_ADDRESS")),oI.debug("[".concat(this.name,"] start connect, url:"),e);const s=null===(t=this.store)||void 0===t?void 0:t.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"gateway"});try{var c;const t=await this.chooseBestWebsocketConnection(e);this.websocket=t,r&&r(this.websocket.url),this.websocket.onclose=o,this.websocket.onmessage=i,this.websocket.onerror=a,null===(c=this.store)||void 0===c||c.recordJoinChannelService({endTs:Date.now(),status:"success"},s),this.joinGatewayRecordIndex=s}catch(l){const e="closed"===this.state,t=l instanceof uw,r=t&&l.code===lw.WS_ABORT,i=t&&l.code===lw.WS_ERR,a=t?l.message:l&&(l.reason||l.toString());oI.warning("[choose-best-ws] chooseBestWebsocket error: ".concat(a)),this.store&&this.store.recordJoinChannelService({endTs:Date.now(),status:r?"aborted":"error",errors:[l]},s),e||i?(n.reject(e?new uw(lw.WS_DISCONNECT,"websocket is closed: ".concat(a)):new uw(lw.WS_ERR,"init websocket failed: ".concat(a))),i&&oI.error("[".concat(this.name,"] init websocket failed: ").concat(a))):o&&o(l)}return n.promise}async reconnectWithAction(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.reconnectCount>=this.retryConfig.maxRetryCount)return!1;if(0===this.urls.length)return!1;if("closed"===this.state)return!1;oI.warning("[choose-best-ws] action: =>",e),this.onlineReconnectListener||Qw.isOnline||!Qw.onlineWaiter||(this.onlineReconnectListener=Qw.onlineWaiter.then((()=>{this.onlineReconnectListener=void 0})));let n=!0;if(this.reconnectInterrupter=()=>n=!1,t){const t=yT(this.reconnectCount,this.retryConfig);oI.debug("[".concat(this.name,"] wait ").concat(t,"ms to reconnect websocket, mode: ").concat(e)),await MA.race([iT(t),this.onlineReconnectListener||new MA((()=>{}))])}if("closed"===this._state||!n)return!1;this.reconnectCount+=1;const r=async(e,t)=>{this.emit(yR.RECONNECT_CREATE_CONNECTION,t),await this.createWebSocketConnection(e)};try{if("retry"===e)await r(this.urls[this.currentURLIndex],e);else if("tryNext"===e){if(this.currentURLIndex+=1,this.currentURLIndex>=this.urls.length)return this.reconnectWithAction("recover",!1);oI.debug("[".concat(this.name,"] websocket url length: ").concat(this.urls.length," current index: ").concat(this.currentURLIndex)),await r(this.urls[this.currentURLIndex],e)}else"recover"===e&&(oI.debug("[".concat(this.name,"] request new urls")),this.resetReconnectCount("recover mode"),this.urls=await $w(this,yR.REQUEST_NEW_URLS),this.currentURLIndex=0,await r(this.urls[this.currentURLIndex],e))}catch(i){var o;oI.error("[".concat(this.name,"] reconnect failed ").concat(i&&i.toString()));const n=null==i||null===(o=i.data)||void 0===o?void 0:o.desc;return Array.isArray(n)&&Or(n).call(n,"dynamic key expired")?(this.emit(yR.ON_TOKEN_PRIVILEGE_DID_EXPIRE),!1):this.reconnectWithAction(e,t)}return!0}}class RO extends IO{constructor(e,t){super(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4],arguments.length>5?arguments[5]:void 0)}async chooseBestWebsocketConnection(e,t){const n=CS(),r=(o=this.forceCloseTimeout,i=this.store,new wO(o,i));var o,i;this.closeEstablishingWs=()=>{oI.debug("[choose-best-ws] close establishing websockets"),r.closeAllWebsockets(),n.reject(new uw(lw.WS_ABORT,"choose best websocket aborted"))};const a=xT("GATEWAY_DOMAINS");return oI.debug("[choose-best-ws] currentDomain: ",e,", domains: ",a,"total: ".concat(this.urls.length),"current: ".concat(this.currentURLIndex+1)),r.chooseBestWebsocket(e,this.tryDoubleDomain,this.use443PortOnly,t).then(n.resolve).catch(n.reject),n.promise.finally((()=>{this.closeEstablishingWs=void 0}))}}class OO extends IO{constructor(e,t){super(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4],arguments.length>5?arguments[5]:void 0)}async chooseBestWebsocketConnection(e,t){return new MA(((n,r)=>{let o=!1;const i=[];this.closeEstablishingWs=()=>{oI.debug("[choose-best-ws] close establishing websockets"),i.forEach((e=>{e.onclose=null,e.onopen=null,e.onmessage=null,e.close()})),r(new uw(lw.WS_ABORT,"choose best websocket aborted"))};const a=xT("GATEWAY_DOMAINS");let s;const c=e.indexOf("?h="),l=a.find((t=>-1!==c?Or(e).call(e,t,c):Or(e).call(e,t)));oI.debug("[choose-best-ws] currentDomain: ",l,", domains: ",a);let u=!this.tryDoubleDomain||!l;if(!u&&l){var d;const A=Date.now();try{a.forEach((t=>{const n=-1===c?e.replace(l,t):e.substr(0,c)+e.substr(c).replace(l,t),r=new WebSocket(n);r.binaryType="arraybuffer",i.push(r),oI.debug("[choose-best-ws] ws is connecting:",r.url)}))}catch(p){for(oI.debug("[choose-best-ws] ws create failed, fallback to single url"),i.forEach((e=>e.close()));i.length;)i.pop();u=!0}null===(d=this.store)||void 0===d||d.recordJoinChannelService({urls:i.map((e=>e.url)),service:"gateway"},t),i.forEach((e=>{e.onopen=()=>{if(o)return;const t=Date.now()-A;oI.debug("[choose-best-ws] ws open cost ".concat(t,"ms")),i.filter((t=>t!==e)).forEach((e=>{oI.debug("[choose-best-ws]close backup websocket: ".concat(e.url)),e.close()})),o=!0,n(e)},e.onclose=e=>{s=e,o||i.find((e=>!(e.readyState===WebSocket.CLOSED||e.readyState===WebSocket.CLOSING)))||(oI.debug("[choose-best-ws] all websocket is closed"),o=!0,r(s))},e.onmessage=t=>{oI.debug("[choose-best-ws]".concat(e.url," onmessage: ").concat(t.data))}})),iT(this.forceCloseTimeout).then((()=>{i.forEach((e=>{e.readyState!==WebSocket.OPEN&&e.close()}))}))}if(u){var A;let o;oI.debug("[choose-best-ws] use single url: ",e),null===(A=this.store)||void 0===A||A.recordJoinChannelService({urls:[e],service:"gateway"},t);try{o=new WebSocket(e),i.push(o),o.binaryType="arraybuffer"}catch(p){const e=new uw(lw.WS_ERR,"init websocket failed! Error: ".concat(p.toString()));return oI.error("[".concat(this.name,"]").concat(e)),void r(e)}o.onopen=()=>{n(o)},o.onclose=e=>{r(e)},o.onmessage=e=>{oI.debug("[choose-best-ws]".concat(o.url," onmessage: ").concat(e.data))},iT(this.forceCloseTimeout).then((()=>{o&&o.readyState!==WebSocket.OPEN&&o.close()}))}})).then((e=>(this.closeEstablishingWs=void 0,e))).catch((e=>{throw this.closeEstablishingWs=void 0,e}))}}class NO extends ww{get connectionState(){return this._connectionState}set connectionState(e){e!==this._connectionState&&(this._connectionState=e,e===fR.CONNECTED?this.emit(gR.WS_CONNECTED):e===fR.RECONNECTING?this.emit(gR.WS_RECONNECTING,this._websocketReconnectReason):e===fR.CLOSED&&this.emit(gR.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket&&this.websocket.url||null}get rtt(){return this.rttRolling.mean()}constructor(e,t){super(),Ov(this,"_disconnectedReason",void 0),Ov(this,"_websocketReconnectReason",void 0),Ov(this,"_connectionState",fR.CLOSED),Ov(this,"reconnectToken",void 0),Ov(this,"websocket",void 0),Ov(this,"openConnectionTime",void 0),Ov(this,"clientId",void 0),Ov(this,"lastMsgTime",Date.now()),Ov(this,"uploadCache",[]),Ov(this,"uploadCacheInterval",void 0),Ov(this,"rttRolling",new CT(5)),Ov(this,"pingpongTimer",void 0),Ov(this,"wsInflateDataTimer",void 0),Ov(this,"pingpongTimeoutCount",0),Ov(this,"joinResponse",void 0),Ov(this,"multiIpOption",void 0),Ov(this,"initError",void 0),Ov(this,"spec",void 0),Ov(this,"store",void 0),Ov(this,"onWebsocketMessage",(e=>{if(e.data instanceof ArrayBuffer)return void this.emit(gR.ON_BINARY_DATA,e.data);const t=JSON.parse(e.data);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(t,"_id")){const e="res-@".concat(t._id);this.emit(e,t._result,t._message)}else if(Object.prototype.hasOwnProperty.call(t,"_type")){if(this.emit(t._type,t._message),t._type===ER.ON_NOTIFICATION&&this.handleNotification(t._message),t._type===ER.ON_USER_BANNED)switch(t._message.error_code){case 14:this.close(Pw.UID_BANNED);break;case 15:this.close(Pw.IP_BANNED);break;case 16:this.close(Pw.CHANNEL_BANNED)}if(t._type===ER.ON_USER_LICENSE_BANNED)switch(t._message.error_code){case hR.ERR_LICENSE_MISSING:this.close(Pw.LICENSE_MISSING);break;case hR.ERR_LICENSE_EXPIRED:this.close(Pw.LICENSE_EXPIRED);break;case hR.ERR_LICENSE_MINUTES_EXCEEDED:this.close(Pw.LICENSE_MINUTES_EXCEEDED);break;case hR.ERR_LICENSE_PERIOD_INVALID:this.close(Pw.LICENSE_PERIOD_INVALID);break;case hR.ERR_LICENSE_MULTIPLE_SDK_SERVICE:this.close(Pw.LICENSE_MULTIPLE_SDK_SERVICE);break;case hR.ERR_LICENSE_ILLEGAL:this.close(Pw.LICENSE_ILLEGAL);break;default:this.close()}}})),this.clientId=e.clientId,this.spec=e,this.store=t,this.websocket=new RO("gateway-".concat(this.clientId),this.spec.retryConfig,!0,xT("JOIN_GATEWAY_USE_DUAL_DOMAIN"),xT("JOIN_GATEWAY_USE_443PORT_ONLY"),t),this.handleWebsocketEvents(),window.addEventListener("offline",(()=>{this.connectionState===fR.CONNECTED&&this.reconnect("retry",Mw.OFFLINE)}))}async request(e,t,n,r){const o=aT(6,""),i={_id:o,_type:e,_message:t},a=this.websocket.connectionID,s=()=>new MA(((t,n)=>{if(this.connectionState===fR.CONNECTED)return t();const r=()=>{this.off(gR.WS_CLOSED,o),t()},o=()=>{this.off(gR.WS_CONNECTED,r),n(new pI(lw.WS_ABORT))};this.once(gR.WS_CONNECTED,r),this.once(gR.WS_CLOSED,o),e!==mR.PUBLISH&&e!==mR.PUBLISH_DATASTREAM&&e!==mR.SUBSCRIBE&&e!==mR.SUBSCRIBE_DATASTREAM&&e!==mR.UNSUBSCRIBE&&e!==mR.UNSUBSCRIBE_DATASTREAM&&e!==mR.UNPUBLISH&&e!==mR.UNPUBLISH_DATASTREAM&&e!==mR.CONTROL&&e!==mR.RESTART_ICE||this.once(gR.DISCONNECT_P2P,(()=>{n(new pI(lw.DISCONNECT_P2P))})),e!==mR.PUBLISH&&e!==mR.RESTART_ICE||this.once(gR.ABORT_P2P_EXECUTION,(()=>{n(new pI(lw.DISCONNECT_P2P))}))}));if(this.connectionState!==fR.CONNECTING&&this.connectionState!==fR.RECONNECTING||e===mR.JOIN||e===mR.REJOIN||await s(),this.websocket.sendMessage(i,!0),r)return;const c=new MA(((n,r)=>{let i=!1;const s=(r,o)=>{i=!0,n({isSuccess:"success"===r,message:o||{}}),this.off(gR.WS_CLOSED,c),this.off(gR.WS_RECONNECTING,c),this.emit(gR.REQUEST_SUCCESS,e,t)};this.once("res-@".concat(o),s);const c=()=>{r(new pI(lw.WS_ABORT,"type: ".concat(e))),this.off(gR.WS_CLOSED,c),this.off(gR.WS_RECONNECTING,c),this.off("res-@".concat(o),s)};this.once(gR.WS_CLOSED,c),this.once(gR.WS_RECONNECTING,c),iT(xT("SIGNAL_REQUEST_TIMEOUT")).then((()=>{this.websocket.connectionID!==a||i||(oI.warning("[".concat(this.clientId,"] ws request timeout, type: ").concat(e)),this.emit(gR.REQUEST_TIMEOUT,e,t))}))}));let l=null;try{l=await c}catch(p){if(this.connectionState===fR.CLOSED||e===mR.LEAVE)throw new pI(lw.WS_ABORT);return!this.spec.forceWaitGatewayResponse||n?p.throw():e===mR.JOIN||e===mR.REJOIN?null:(await s(),await this.request(e,t))}if(l.isSuccess)return l.message;const u=Number(l.message.error_code||l.message.code),d=fO(u),A=new pI(lw.UNEXPECTED_RESPONSE,"".concat(d.desc,": ").concat(l.message.error_str),{code:u,data:l.message,desc:d.desc});return"success"===d.action?l.message:(oI.warning("[".concat(this.clientId,"] [").concat(this.websocket.connectionID,"] unexpected response from type ").concat(e,", error_code: ").concat(u,", message: ").concat(d.desc,", action: ").concat(d.action)),u===hR.ERR_TOO_MANY_BROADCASTERS?e===mR.JOIN||e===mR.REJOIN?(this.initError=A,this.close(),A.throw()):A.throw():"failed"===d.action?A.throw():"quit"===d.action?(this.initError=A,this.close(),A.throw()):(u===hR.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=l.message.option,oI.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",Mw.MULTI_IP)):this.reconnect(d.action,Mw.SERVER_ERROR),e===mR.JOIN||e===mR.REJOIN?null:await this.request(e,t)))}waitMessage(e,t){return new MA((n=>{const r=o=>{(!t||t(o))&&(this.off(e,r),n(o))};this.on(e,r)}))}uploadWRTCStats(e){if(!this.store.sessionId)return void oI.warn("[".concat(this.clientId,"] no session id when upload wrtc stats"));const t={lts:Date.now(),sid:this.store.sessionId,uid:this.store.intUid,stats:e};this.upload(_R.WRTC_STATS,t)}upload(e,t){const n={_type:e,_message:t};try{this.websocket.sendMessage(n)}catch(r){const e=xT("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(n),this.uploadCache.length>e&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval((()=>{if(this.connectionState!==fR.CONNECTED)return;const e=this.uploadCache.splice(0,1)[0];0===this.uploadCache.length&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(e._type,e._message)}),xT("UPLOAD_CACHE_INTERVAL")||2e3))}}send(e,t){const n={_type:e,_message:t};this.websocket.sendMessage(n)}init(e,t){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new MA(((t,n)=>{this.once(gR.WS_CONNECTED,(()=>t(this.joinResponse))),this.once(gR.WS_CLOSED,(()=>n(this.initError||new pI(lw.WS_ABORT)))),this.connectionState=fR.CONNECTING,this.websocket.init(e).catch(n),this.wsInflateDataTimer&&window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=window.setInterval((()=>{this.handleWsInflateData()}),2e4)}))}close(e){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.wsInflateDataTimer&&(this.handleWsInflateData(),window.clearInterval(this.wsInflateDataTimer),this.wsInflateDataTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._disconnectedReason=e||Pw.LEAVE,this.connectionState=fR.CLOSED,oI.debug("[".concat(this.clientId,"] ")+"will close websocket in signal"),this.websocket.close()}async join(){if(!this.joinResponse){this.emit(gR.ABORT_P2P_EXECUTION);const e=await $w(this,gR.REQUEST_JOIN_INFO),t=await this.request(mR.JOIN,e);if(!t)return this.emit(gR.REPORT_JOIN_GATEWAY,FR.TIMEOUT,this.url||""),!1;this.joinResponse=t,this.emit(gR.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=fR.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}async rejoin(){if(!this.reconnectToken)throw new pI(lw.UNEXPECTED_ERROR,"can not rejoin, no rejoin token");const e=jw(this,gR.REQUEST_REJOIN_INFO);e.token=this.reconnectToken;const t=await this.request(mR.REJOIN,e);return!!t&&(this.connectionState=fR.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),t.peers&&t.peers.forEach((e=>{this.emit(ER.ON_USER_ONLINE,{uid:e.uid}),e.audio&&this.emit(ER.ON_ADD_AUDIO_STREAM,{uid:e.uid,uint_id:e.uint_id,audio:!0,ssrcId:e.audio_ssrc}),e.video&&this.emit(ER.ON_ADD_VIDEO_STREAM,{uid:e.uid,uint_id:e.uint_id,video:!0,ssrcId:e.video_ssrc}),e.audio_mute?this.emit(ER.MUTE_AUDIO,{uid:e.uid}):this.emit(ER.UNMUTE_AUDIO,{uid:e.uid}),e.video_mute?this.emit(ER.MUTE_VIDEO,{uid:e.uid}):this.emit(ER.UNMUTE_VIDEO,{uid:e.uid}),e.audio_enable_local?this.emit(ER.ENABLE_LOCAL_AUDIO,{uid:e.uid}):this.emit(ER.DISABLE_LOCAL_AUDIO,{uid:e.uid}),e.video_enable_local?this.emit(ER.ENABLE_LOCAL_VIDEO,{uid:e.uid}):this.emit(ER.DISABLE_LOCAL_VIDEO,{uid:e.uid}),e.audio||e.video||this.emit(ER.ON_REMOVE_STREAM,{uid:e.uid,uint_id:e.uint_id})})),!0)}reconnect(e,t){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(e,t)}handleNotification(e){oI.debug("[".concat(this.clientId,"] receive notification: "),e);const t=fO(e.code);if(28===e.code&&"detail"in e&&(oI.info("[".concat(this.clientId,"] receive recover notification: "),e.detail),this.emit(gR.RECOVER_NOTIFICATION,e.detail)),"success"!==t.action){if("failed"!==t.action)return"quit"===t.action?("ERR_REPEAT_JOIN_CHANNEL"===t.desc&&this.close(Pw.UID_BANNED),void this.close()):void this.reconnect(t.action,Mw.SERVER_ERROR);oI.error("[".concat(this.clientId,"] ignore error: "),t.desc)}}handlePingPong(){if(!this.websocket||"connected"!==this.websocket.state)return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const e=xT("PING_PONG_TIME_OUT"),t=Date.now();this.pingpongTimeoutCount>=e&&(oI.warning("[".concat(this.clientId,"] PING-PONG Timeout. Last Socket Message: ").concat(t-this.lastMsgTime,"ms")),t-this.lastMsgTime>xT("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",Mw.TIMEOUT):this.request(mR.PING,void 0,!0).then((()=>{this.pingpongTimeoutCount=0;const e=Date.now()-t;this.rttRolling.add(e),xT("REPORT_STATS")&&this.send(mR.PING_BACK,{pingpongElapse:e})})).catch((e=>{}))}handleWsInflateData(){const{wsInflateLength:e,wsDeflateLength:t}=this.websocket.getWsInflateData();0!==e&&0!==t&&this.upload(_R.WS_INFLATE_DATA_LENGTH,{ws_deflate_length:t,ws_inflate_length:e})}handleWebsocketEvents(){this.websocket.on(yR.RECONNECT_CREATE_CONNECTION,(e=>{this.emit(gR.WS_RECONNECT_CREATE_CONNECTION,e)})),this.websocket.on(yR.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(yR.CLOSED,(()=>{this.connectionState=fR.CLOSED})),this.websocket.on(yR.FAILED,(()=>{this._disconnectedReason=Pw.NETWORK_ERROR,this.connectionState=fR.CLOSED})),this.websocket.on(yR.RECONNECTING,(e=>{this._websocketReconnectReason=e,this.joinResponse=void 0,this.connectionState===fR.CONNECTED?this.connectionState=fR.RECONNECTING:this.connectionState=fR.CONNECTING})),this.websocket.on(yR.WILL_RECONNECT,((e,t,n)=>{const r=jw(this,gR.IS_P2P_DISCONNECTED),o=r||"retry"!==e;r&&"retry"===e&&(oI.debug("".concat(this.clientId," reconnect mode is retry, but p2p lost, change to tryNext")),e="tryNext",t=FR.P2P_DISCONNECTED),o&&(oI.debug("".concat(this.clientId," will renewSession, reconnect mode: ").concat(e)),this.emit(gR.REPORT_JOIN_GATEWAY,t||FR.UNKNOWN_REASON,this.url||""),this.reconnectToken=void 0,this.emit(gR.DISCONNECT_P2P)),n(e)})),this.websocket.on(yR.CONNECTED,(()=>{this.openConnectionTime=Date.now(),this.reconnectToken?this.rejoin().catch((e=>{oI.warning("[".concat(this.clientId,"] rejoin failed ").concat(e)),this.reconnect("tryNext",Mw.SERVER_ERROR)})):this.join().catch((e=>{if(this.emit(gR.REPORT_JOIN_GATEWAY,e,this.url||""),e instanceof pI){if(e.code===lw.UNEXPECTED_RESPONSE&&e.data.code===hR.ERR_NO_AUTHORIZED)return this.initError=new pI(lw.CAN_NOT_GET_GATEWAY_SERVER,"AgoraRTCError CAN_NOT_GET_GATEWAY_SERVER: dynamic key expired"),oI.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",Mw.SERVER_ERROR);oI.error("[".concat(this.clientId,"] join gateway request failed"),e.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",Mw.SERVER_ERROR):(this.initError=e,this.close())}}))})),this.websocket.on(yR.REQUEST_NEW_URLS,((e,t)=>{$w(this,gR.REQUEST_RECOVER,this.multiIpOption).then(e).catch(t)})),this.websocket.on(yR.ON_TOKEN_PRIVILEGE_DID_EXPIRE,(()=>{this.emit(ER.ON_TOKEN_PRIVILEGE_DID_EXPIRE)})),this.websocket.on(rO.PRE_CONNECT_PC,(()=>{this.emit(gR.PRE_CONNECT_PC)}))}}let kO=function(e){return e[e.CHOOSE_SERVER=11]="CHOOSE_SERVER",e[e.CLOUD_PROXY=18]="CLOUD_PROXY",e[e.CLOUD_PROXY_5=20]="CLOUD_PROXY_5",e[e.CLOUD_PROXY_FALLBACK=26]="CLOUD_PROXY_FALLBACK",e}({});function PO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function DO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?PO(Object(n),!0).forEach((function(t){Ov(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function LO(e){return e.match(/^[\.\:\d]+$/)?"".concat(e.replace(/[^\d]/g,"-"),".").concat(xT("TURN_DOMAIN")):(oI.debug("Cannot recognized as ip address: ".concat(e,", use as host")),e)}function BO(e,t){e.addresses||(e.addresses=[]);const n=function(e,t){if(xT("CONNECT_GATEWAY_WITHOUT_DOMAIN"))return e.map((e=>{let{ip:t,port:n}=e;return{address:"".concat(t,":").concat(n)}}));const n=xT("GATEWAY_DOMAINS");let r=n[1]&&Or(t).call(t,n[1])?1:0;return e.map((e=>{let{domain_prefix:t,port:o,ip:i}=e;if(t)return{address:"".concat(t,".").concat(n[r++%n.length],":").concat(o)};const a=/^[\.\:\d]+$/.test(i),s=a?"".concat(i.replace(/[^\d]/g,"-"),".").concat(n[r++%n.length],":").concat(o):"".concat(i,":").concat(o);return a||oI.debug("Cannot recognized as ip address: ".concat(i,", use as host")),{ip:i,port:o,address:s}}))}(e.addresses,t),r=Array.isArray(e.detail)&&e.detail[18];if(r&&"string"==typeof r){const e=r.split(";");for(let t=0;t<e.length;t++){var o;const r=Up(o=e[t]).call(o);n[t]&&r&&(n[t].ip6=r)}}const i=e.detail&&e.detail.candidate;let a;if(i){const[e,t]=i.split(":");e&&t&&(a={port:Number(t),ip:e,address:"".concat(e,":").concat(t)})}return{gatewayAddrs:n,apGatewayAddress:a,uid:e.uid,cid:e.cid,cert:e.cert,vid:e.detail&&e.detail[8],uni_lbs_ip:e.detail&&e.detail[1],res:e,csIp:e.detail&&e.detail[502]}}function UO(e){return"number"==typeof e?e:e.exact||e.ideal||e.max||e.min||0}function MO(e){const t=e._encoderConfig;if(!t)return{};const n={resolution:t.width&&t.height?"".concat(UO(t.width),"x").concat(UO(t.height)):void 0,maxVideoBW:t.bitrateMax,minVideoBW:t.bitrateMin};return"number"==typeof t.frameRate?(n.maxFrameRate=t.frameRate,n.minFrameRate=t.frameRate):t.frameRate&&(n.maxFrameRate=t.frameRate.max||t.frameRate.ideal||t.frameRate.exact||t.frameRate.min,n.minFrameRate=t.frameRate.min||t.frameRate.ideal||t.frameRate.exact||t.frameRate.max),n}function xO(e){return e>=0&&e<.17?1:e>=.17&&e<.36?2:e>=.36&&e<.59?3:e>=.59&&e<=1?4:e>1?5:0}function FO(e,t){let n,r,o;switch(t){case kO.CHOOSE_SERVER:r=4096,o="choose server";break;case kO.CLOUD_PROXY:r=1048576,o="proxy";break;case kO.CLOUD_PROXY_5:r=4194304,o="proxy5";break;case kO.CLOUD_PROXY_FALLBACK:r=4194310,o="proxy fallback";break;default:throw new pI(lw.UNEXPECTED_ERROR,"multi unlibs response transformer get unknown service id",{csIp:e.detail&&e.detail[502],retry:!1})}if(e.response_body.forEach((t=>{t.buffer&&t.buffer.flag===r&&(n={code:t.buffer.code,addresses:(t.buffer.edges_services||[]).map((e=>DO(DO({},e),{},{ticket:t.buffer.cert}))),server_ts:e.enter_ts,uid:t.buffer.uid,cid:t.buffer.cid,cname:t.buffer.cname,detail:DO(DO({},t.buffer.detail),e.detail),flag:t.buffer.flag,opid:e.opid,cert:t.buffer.cert})})),!n)throw new pI(lw.MULTI_UNILBS_RESPONSE_ERROR,"cannot parse response ".concat(o," from multi unilbs response"),{csIp:e.detail&&e.detail[502]});return n}async function $O(e,t){return await MA.all(e.addresses.map((async e=>({address:LO(e.ip),tcpport:e.port,udpport:e.port,username:t&&xT("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?t.toString():DT.username,password:t&&xT("ENCRYPT_PROXY_USERNAME_AND_PSW")&&window.isSecureContext?await Sw(t.toString()):DT.password}))))}function VO(e,t){const n=t.getMediaStreamTrack(!0).getSettings(),r=t.videoHeight||n.height,o=t.videoWidth||n.width;return r&&o?Math.max(Math.min(r,o)/Math.min(UO(e.height),UO(e.width)),1):(oI.warning("can't get ori-track's height, default scale down 4 times for low stream"),4)}function HO(e){let{candidateType:t,relayProtocol:n,type:r,address:o,port:i,protocol:a}=e;const s={candidateType:t,relayProtocol:n,protocol:a};if("local-candidate"!==r){const e=o.split(".");e.length>=4&&(e[1]="*",e[2]="*"),s.address=e.join("."),s.port=i}return s}var jO,QO=n($I),GO=Yn("Array").values,KO=Ar,WO=Xe,qO=u,zO=GO,YO=Array.prototype,JO={DOMTokenList:!0,NodeList:!0},XO=n((function(e){var t=e.values;return e===YO||qO(YO,e)&&t===YO.values||WO(JO,KO(e))?zO:t})),ZO=N,eN=l,tN=D,nN=r,rN=Xo,oN=xo,iN=L,aN=ze,sN=G,cN=Object.assign,lN=Object.defineProperty,uN=eN([].concat),dN=!cN||nN((function(){if(ZO&&1!==cN({b:1},cN(lN({},"a",{enumerable:!0,get:function(){lN(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=cN({},e)[n]||rN(cN({},t)).join("")!=r}))?function(e,t){for(var n=aN(e),r=arguments.length,o=1,i=oN.f,a=iN.f;r>o;)for(var s,c=sN(arguments[o++]),l=i?uN(rN(c),i(c)):rN(c),u=l.length,d=0;u>d;)s=l[d++],ZO&&!tN(a,c,s)||(n[s]=c[s]);return n}:cN,AN=nn,pN=ta,hN=Yt,fN=D,gN=ze,mN=function(e,t,n,r){try{return r?t(AN(n)[0],n[1]):t(n)}catch(o){pN(e,"throw",o)}},_N=xi,EN=Mc,vN=Hn,yN=lh,bN=Ji,CN=Qi,SN=Array,wN=l,TN=2147483647,IN=/[^\0-\u007E]/,RN=/[.\u3002\uFF0E\uFF61]/g,ON="Overflow: input needs wider integers to process",NN=RangeError,kN=wN(RN.exec),PN=Math.floor,DN=String.fromCharCode,LN=wN("".charCodeAt),BN=wN([].join),UN=wN([].push),MN=wN("".replace),xN=wN("".split),FN=wN("".toLowerCase),$N=function(e){return e+22+75*(e<26)},VN=function(e,t,n){var r=0;for(e=n?PN(e/700):e>>1,e+=PN(e/t);e>455;)e=PN(e/35),r+=36;return PN(r+36*e/(e+38))},HN=function(e){var t,n,r=[],o=(e=function(e){for(var t=[],n=0,r=e.length;n<r;){var o=LN(e,n++);if(o>=55296&&o<=56319&&n<r){var i=LN(e,n++);56320==(64512&i)?UN(t,((1023&o)<<10)+(1023&i)+65536):(UN(t,o),n--)}else UN(t,o)}return t}(e)).length,i=128,a=0,s=72;for(t=0;t<e.length;t++)(n=e[t])<128&&UN(r,DN(n));var c=r.length,l=c;for(c&&UN(r,"-");l<o;){var u=TN;for(t=0;t<e.length;t++)(n=e[t])>=i&&n<u&&(u=n);var d=l+1;if(u-i>PN((TN-a)/d))throw NN(ON);for(a+=(u-i)*d,i=u,t=0;t<e.length;t++){if((n=e[t])<i&&++a>TN)throw NN(ON);if(n==i){for(var A=a,p=36;;){var h=p<=s?1:p>=s+26?26:p-s;if(A<h)break;var f=A-h,g=36-h;UN(r,DN($N(h+f%g))),A=PN(f/g),p+=36}UN(r,DN($N(A))),s=VN(a,d,l==c),a=0,l++}}a++,i++}return BN(r,"")},jN=On,QN=N,GN=Pv,KN=A,WN=Yt,qN=l,zN=ls,YN=cc,JN=fc,XN=Xe,ZN=dN,ek=function(e){var t=gN(e),n=EN(this),r=arguments.length,o=r>1?arguments[1]:void 0,i=void 0!==o;i&&(o=hN(o,r>2?arguments[2]:void 0));var a,s,c,l,u,d,A=CN(t),p=0;if(!A||this===SN&&_N(A))for(a=vN(t),s=n?new this(a):SN(a);a>p;p++)d=i?o(t[p],p):t[p],yN(s,p,d);else for(u=(l=bN(t,A)).next,s=n?new this:[];!(c=fN(u,l)).done;p++)d=i?mN(l,o,[c.value,p],!0):c.value,yN(s,p,d);return s.length=p,s},tk=fh,nk=mA.codeAt,rk=function(e){var t,n,r=[],o=xN(MN(FN(e),RN,"."),".");for(t=0;t<o.length;t++)n=o[t],UN(r,kN(IN,n)?"xn--"+HN(n):n);return BN(r,".")},ok=fr,ik=Rs,ak=qc,sk=qy,ck=ts,lk=ck.set,uk=ck.getterFor("URL"),dk=sk.URLSearchParams,Ak=sk.getState,pk=KN.URL,hk=KN.TypeError,fk=KN.parseInt,gk=Math.floor,mk=Math.pow,_k=qN("".charAt),Ek=qN(/./.exec),vk=qN([].join),yk=qN(1..toString),bk=qN([].pop),Ck=qN([].push),Sk=qN("".replace),wk=qN([].shift),Tk=qN("".split),Ik=qN("".slice),Rk=qN("".toLowerCase),Ok=qN([].unshift),Nk="Invalid scheme",kk="Invalid host",Pk="Invalid port",Dk=/[a-z]/i,Lk=/[\d+-.a-z]/i,Bk=/\d/,Uk=/^0x/i,Mk=/^[0-7]+$/,xk=/^\d+$/,Fk=/^[\da-f]+$/i,$k=/[\0\t\n\r #%/:<>?@[\\\]^|]/,Vk=/[\0\t\n\r #/:<>?@[\\\]^|]/,Hk=/^[\u0000-\u0020]+/,jk=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,Qk=/[\t\n\r]/g,Gk=function(e){var t,n,r,o;if("number"==typeof e){for(t=[],n=0;n<4;n++)Ok(t,e%256),e=gk(e/256);return vk(t,".")}if("object"==typeof e){for(t="",r=function(e){for(var t=null,n=1,r=null,o=0,i=0;i<8;i++)0!==e[i]?(o>n&&(t=r,n=o),r=null,o=0):(null===r&&(r=i),++o);return o>n&&(t=r,n=o),t}(e),n=0;n<8;n++)o&&0===e[n]||(o&&(o=!1),r===n?(t+=n?":":"::",o=!0):(t+=yk(e[n],16),n<7&&(t+=":")));return"["+t+"]"}return e},Kk={},Wk=ZN({},Kk,{" ":1,'"':1,"<":1,">":1,"`":1}),qk=ZN({},Wk,{"#":1,"?":1,"{":1,"}":1}),zk=ZN({},qk,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Yk=function(e,t){var n=nk(e,0);return n>32&&n<127&&!XN(t,e)?e:encodeURIComponent(e)},Jk={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Xk=function(e,t){var n;return 2==e.length&&Ek(Dk,_k(e,0))&&(":"==(n=_k(e,1))||!t&&"|"==n)},Zk=function(e){var t;return e.length>1&&Xk(Ik(e,0,2))&&(2==e.length||"/"===(t=_k(e,2))||"\\"===t||"?"===t||"#"===t)},eP=function(e){return"."===e||"%2e"===Rk(e)},tP={},nP={},rP={},oP={},iP={},aP={},sP={},cP={},lP={},uP={},dP={},AP={},pP={},hP={},fP={},gP={},mP={},_P={},EP={},vP={},yP={},bP=function(e,t,n){var r,o,i,a=ok(e);if(t){if(o=this.parse(a))throw hk(o);this.searchParams=null}else{if(void 0!==n&&(r=new bP(n,!0)),o=this.parse(a,null,r))throw hk(o);(i=Ak(new dk)).bindURL(this),this.searchParams=i}};bP.prototype={type:"URL",parse:function(e,t,n){var r,o,i,a,s,c=this,l=t||tP,u=0,d="",A=!1,p=!1,h=!1;for(e=ok(e),t||(c.scheme="",c.username="",c.password="",c.host=null,c.port=null,c.path=[],c.query=null,c.fragment=null,c.cannotBeABaseURL=!1,e=Sk(e,Hk,""),e=Sk(e,jk,"$1")),e=Sk(e,Qk,""),r=ek(e);u<=r.length;){switch(o=r[u],l){case tP:if(!o||!Ek(Dk,o)){if(t)return Nk;l=rP;continue}d+=Rk(o),l=nP;break;case nP:if(o&&(Ek(Lk,o)||"+"==o||"-"==o||"."==o))d+=Rk(o);else{if(":"!=o){if(t)return Nk;d="",l=rP,u=0;continue}if(t&&(c.isSpecial()!=XN(Jk,d)||"file"==d&&(c.includesCredentials()||null!==c.port)||"file"==c.scheme&&!c.host))return;if(c.scheme=d,t)return void(c.isSpecial()&&Jk[c.scheme]==c.port&&(c.port=null));d="","file"==c.scheme?l=hP:c.isSpecial()&&n&&n.scheme==c.scheme?l=oP:c.isSpecial()?l=cP:"/"==r[u+1]?(l=iP,u++):(c.cannotBeABaseURL=!0,Ck(c.path,""),l=EP)}break;case rP:if(!n||n.cannotBeABaseURL&&"#"!=o)return Nk;if(n.cannotBeABaseURL&&"#"==o){c.scheme=n.scheme,c.path=tk(n.path),c.query=n.query,c.fragment="",c.cannotBeABaseURL=!0,l=yP;break}l="file"==n.scheme?hP:aP;continue;case oP:if("/"!=o||"/"!=r[u+1]){l=aP;continue}l=lP,u++;break;case iP:if("/"==o){l=uP;break}l=_P;continue;case aP:if(c.scheme=n.scheme,o==jO)c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=tk(n.path),c.query=n.query;else if("/"==o||"\\"==o&&c.isSpecial())l=sP;else if("?"==o)c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=tk(n.path),c.query="",l=vP;else{if("#"!=o){c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=tk(n.path),c.path.length--,l=_P;continue}c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,c.path=tk(n.path),c.query=n.query,c.fragment="",l=yP}break;case sP:if(!c.isSpecial()||"/"!=o&&"\\"!=o){if("/"!=o){c.username=n.username,c.password=n.password,c.host=n.host,c.port=n.port,l=_P;continue}l=uP}else l=lP;break;case cP:if(l=lP,"/"!=o||"/"!=_k(d,u+1))continue;u++;break;case lP:if("/"!=o&&"\\"!=o){l=uP;continue}break;case uP:if("@"==o){A&&(d="%40"+d),A=!0,i=ek(d);for(var f=0;f<i.length;f++){var g=i[f];if(":"!=g||h){var m=Yk(g,zk);h?c.password+=m:c.username+=m}else h=!0}d=""}else if(o==jO||"/"==o||"?"==o||"#"==o||"\\"==o&&c.isSpecial()){if(A&&""==d)return"Invalid authority";u-=ek(d).length+1,d="",l=dP}else d+=o;break;case dP:case AP:if(t&&"file"==c.scheme){l=gP;continue}if(":"!=o||p){if(o==jO||"/"==o||"?"==o||"#"==o||"\\"==o&&c.isSpecial()){if(c.isSpecial()&&""==d)return kk;if(t&&""==d&&(c.includesCredentials()||null!==c.port))return;if(a=c.parseHost(d))return a;if(d="",l=mP,t)return;continue}"["==o?p=!0:"]"==o&&(p=!1),d+=o}else{if(""==d)return kk;if(a=c.parseHost(d))return a;if(d="",l=pP,t==AP)return}break;case pP:if(!Ek(Bk,o)){if(o==jO||"/"==o||"?"==o||"#"==o||"\\"==o&&c.isSpecial()||t){if(""!=d){var _=fk(d,10);if(_>65535)return Pk;c.port=c.isSpecial()&&_===Jk[c.scheme]?null:_,d=""}if(t)return;l=mP;continue}return Pk}d+=o;break;case hP:if(c.scheme="file","/"==o||"\\"==o)l=fP;else{if(!n||"file"!=n.scheme){l=_P;continue}if(o==jO)c.host=n.host,c.path=tk(n.path),c.query=n.query;else if("?"==o)c.host=n.host,c.path=tk(n.path),c.query="",l=vP;else{if("#"!=o){Zk(vk(tk(r,u),""))||(c.host=n.host,c.path=tk(n.path),c.shortenPath()),l=_P;continue}c.host=n.host,c.path=tk(n.path),c.query=n.query,c.fragment="",l=yP}}break;case fP:if("/"==o||"\\"==o){l=gP;break}n&&"file"==n.scheme&&!Zk(vk(tk(r,u),""))&&(Xk(n.path[0],!0)?Ck(c.path,n.path[0]):c.host=n.host),l=_P;continue;case gP:if(o==jO||"/"==o||"\\"==o||"?"==o||"#"==o){if(!t&&Xk(d))l=_P;else if(""==d){if(c.host="",t)return;l=mP}else{if(a=c.parseHost(d))return a;if("localhost"==c.host&&(c.host=""),t)return;d="",l=mP}continue}d+=o;break;case mP:if(c.isSpecial()){if(l=_P,"/"!=o&&"\\"!=o)continue}else if(t||"?"!=o)if(t||"#"!=o){if(o!=jO&&(l=_P,"/"!=o))continue}else c.fragment="",l=yP;else c.query="",l=vP;break;case _P:if(o==jO||"/"==o||"\\"==o&&c.isSpecial()||!t&&("?"==o||"#"==o)){if(".."===(s=Rk(s=d))||"%2e."===s||".%2e"===s||"%2e%2e"===s?(c.shortenPath(),"/"==o||"\\"==o&&c.isSpecial()||Ck(c.path,"")):eP(d)?"/"==o||"\\"==o&&c.isSpecial()||Ck(c.path,""):("file"==c.scheme&&!c.path.length&&Xk(d)&&(c.host&&(c.host=""),d=_k(d,0)+":"),Ck(c.path,d)),d="","file"==c.scheme&&(o==jO||"?"==o||"#"==o))for(;c.path.length>1&&""===c.path[0];)wk(c.path);"?"==o?(c.query="",l=vP):"#"==o&&(c.fragment="",l=yP)}else d+=Yk(o,qk);break;case EP:"?"==o?(c.query="",l=vP):"#"==o?(c.fragment="",l=yP):o!=jO&&(c.path[0]+=Yk(o,Kk));break;case vP:t||"#"!=o?o!=jO&&("'"==o&&c.isSpecial()?c.query+="%27":c.query+="#"==o?"%23":Yk(o,Kk)):(c.fragment="",l=yP);break;case yP:o!=jO&&(c.fragment+=Yk(o,Wk))}u++}},parseHost:function(e){var t,n,r;if("["==_k(e,0)){if("]"!=_k(e,e.length-1))return kk;if(!(t=function(e){var t,n,r,o,i,a,s,c=[0,0,0,0,0,0,0,0],l=0,u=null,d=0,A=function(){return _k(e,d)};if(":"==A()){if(":"!=_k(e,1))return;d+=2,u=++l}for(;A();){if(8==l)return;if(":"!=A()){for(t=n=0;n<4&&Ek(Fk,A());)t=16*t+fk(A(),16),d++,n++;if("."==A()){if(0==n)return;if(d-=n,l>6)return;for(r=0;A();){if(o=null,r>0){if(!("."==A()&&r<4))return;d++}if(!Ek(Bk,A()))return;for(;Ek(Bk,A());){if(i=fk(A(),10),null===o)o=i;else{if(0==o)return;o=10*o+i}if(o>255)return;d++}c[l]=256*c[l]+o,2!=++r&&4!=r||l++}if(4!=r)return;break}if(":"==A()){if(d++,!A())return}else if(A())return;c[l++]=t}else{if(null!==u)return;d++,u=++l}}if(null!==u)for(a=l-u,l=7;0!=l&&a>0;)s=c[l],c[l--]=c[u+a-1],c[u+--a]=s;else if(8!=l)return;return c}(Ik(e,1,-1))))return kk;this.host=t}else if(this.isSpecial()){if(e=rk(e),Ek($k,e))return kk;if(null===(t=function(e){var t,n,r,o,i,a,s,c=Tk(e,".");if(c.length&&""==c[c.length-1]&&c.length--,(t=c.length)>4)return e;for(n=[],r=0;r<t;r++){if(""==(o=c[r]))return e;if(i=10,o.length>1&&"0"==_k(o,0)&&(i=Ek(Uk,o)?16:8,o=Ik(o,8==i?1:2)),""===o)a=0;else{if(!Ek(10==i?xk:8==i?Mk:Fk,o))return e;a=fk(o,i)}Ck(n,a)}for(r=0;r<t;r++)if(a=n[r],r==t-1){if(a>=mk(256,5-t))return null}else if(a>255)return null;for(s=bk(n),r=0;r<n.length;r++)s+=n[r]*mk(256,3-r);return s}(e)))return kk;this.host=t}else{if(Ek(Vk,e))return kk;for(t="",n=ek(e),r=0;r<n.length;r++)t+=Yk(n[r],Kk);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return XN(Jk,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||"file"==this.scheme&&1==t&&Xk(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,n=e.username,r=e.password,o=e.host,i=e.port,a=e.path,s=e.query,c=e.fragment,l=t+":";return null!==o?(l+="//",e.includesCredentials()&&(l+=n+(r?":"+r:"")+"@"),l+=Gk(o),null!==i&&(l+=":"+i)):"file"==t&&(l+="//"),l+=e.cannotBeABaseURL?a[0]:a.length?"/"+vk(a,"/"):"",null!==s&&(l+="?"+s),null!==c&&(l+="#"+c),l},setHref:function(e){var t=this.parse(e);if(t)throw hk(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"==e)try{return new CP(e.path[0]).origin}catch(n){return"null"}return"file"!=e&&this.isSpecial()?e+"://"+Gk(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(ok(e)+":",tP)},getUsername:function(){return this.username},setUsername:function(e){var t=ek(ok(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<t.length;n++)this.username+=Yk(t[n],zk)}},getPassword:function(){return this.password},setPassword:function(e){var t=ek(ok(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<t.length;n++)this.password+=Yk(t[n],zk)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?Gk(e):Gk(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,dP)},getHostname:function(){var e=this.host;return null===e?"":Gk(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,AP)},getPort:function(){var e=this.port;return null===e?"":ok(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(""==(e=ok(e))?this.port=null:this.parse(e,pP))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+vk(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,mP))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){""==(e=ok(e))?this.query=null:("?"==_k(e,0)&&(e=Ik(e,1)),this.query="",this.parse(e,vP)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){""!=(e=ok(e))?("#"==_k(e,0)&&(e=Ik(e,1)),this.fragment="",this.parse(e,yP)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var CP=function(e){var t=JN(this,SP),n=ak(arguments.length,1)>1?arguments[1]:void 0,r=lk(t,new bP(e,!1,n));QN||(t.href=r.serialize(),t.origin=r.getOrigin(),t.protocol=r.getProtocol(),t.username=r.getUsername(),t.password=r.getPassword(),t.host=r.getHost(),t.hostname=r.getHostname(),t.port=r.getPort(),t.pathname=r.getPathname(),t.search=r.getSearch(),t.searchParams=r.getSearchParams(),t.hash=r.getHash())},SP=CP.prototype,wP=function(e,t){return{get:function(){return uk(this)[e]()},set:t&&function(e){return uk(this)[t](e)},configurable:!0,enumerable:!0}};if(QN&&(YN(SP,"href",wP("serialize","setHref")),YN(SP,"origin",wP("getOrigin")),YN(SP,"protocol",wP("getProtocol","setProtocol")),YN(SP,"username",wP("getUsername","setUsername")),YN(SP,"password",wP("getPassword","setPassword")),YN(SP,"host",wP("getHost","setHost")),YN(SP,"hostname",wP("getHostname","setHostname")),YN(SP,"port",wP("getPort","setPort")),YN(SP,"pathname",wP("getPathname","setPathname")),YN(SP,"search",wP("getSearch","setSearch")),YN(SP,"searchParams",wP("getSearchParams")),YN(SP,"hash",wP("getHash","setHash"))),zN(SP,"toJSON",(function(){return uk(this).serialize()}),{enumerable:!0}),zN(SP,"toString",(function(){return uk(this).serialize()}),{enumerable:!0}),pk){var TP=pk.createObjectURL,IP=pk.revokeObjectURL;TP&&zN(CP,"createObjectURL",WN(TP,pk)),IP&&zN(CP,"revokeObjectURL",WN(IP,pk))}ik(CP,"URL"),jN({global:!0,constructor:!0,forced:!GN,sham:!QN},{URL:CP});var RP=On,OP=r,NP=qc,kP=fr,PP=Pv,DP=se("URL");RP({target:"URL",stat:!0,forced:!(PP&&OP((function(){DP.canParse()})))},{canParse:function(e){var t=NP(arguments.length,1),n=kP(e),r=t<2||void 0===arguments[1]?void 0:kP(arguments[1]);try{return!!new DP(n,r)}catch(o){return!1}}});var LP=n(ne.URL);const BP={getDisplayMedia:!1,getStreamFromExtension:!1,supportUnifiedPlan:!1,supportMinBitrate:!1,supportSetRtpSenderParameters:!1,supportDualStream:!0,webAudioMediaStreamDest:!1,supportReplaceTrack:!1,supportWebGL:!1,webAudioWithAEC:!1,supportRequestFrame:!1,supportShareAudio:!1,supportDualStreamEncoding:!1,supportDataChannel:!1,supportPCSetConfiguration:!1,supportWebRTCEncodedTransform:!1,supportWebRTCInsertableStream:!1,supportRequestVideoFrameCallback:!1,supportWebCrypto:!1};function UP(){return BP}function MP(){return"setSinkId"in HTMLAudioElement.prototype&&(!xT("RESTRICTION_SET_PLAYBACK_DEVICE")||(MS()||FS())&&!nw())}function xP(){return!BP.supportUnifiedPlan||xT("CHROME_FORCE_PLAN_B")&&rw()}let FP=function(e){return e.IOS_15_16_INTERRUPTION_START="ios15_16-interruption-start",e.IOS_15_16_INTERRUPTION_END="ios15_16-interruption-end",e.IOS_INTERRUPTION_START="ios-interruption-start",e.IOS_INTERRUPTION_END="ios-interruption-end",e.STATE_CHANGE="state-change",e}({});function $P(e,t,n){return{sampleRate:e,stereo:t,bitrate:n}}function VP(e,t,n,r,o){return{width:e,height:t,frameRate:n,bitrateMin:r,bitrateMax:o}}function HP(e,t,n,r,o){return{width:{max:e},height:{max:t},frameRate:n,bitrateMin:r,bitrateMax:o}}function jP(e,t){return{numSpatialLayers:e,numTemporalLayers:t}}const QP={"90p":VP(160,90),"90p_1":VP(160,90),"120p":VP(160,120,15,30,65),"120p_1":VP(160,120,15,30,65),"120p_3":VP(120,120,15,30,50),"120p_4":VP(212,120),"180p":VP(320,180,15,30,140),"180p_1":VP(320,180,15,30,140),"180p_3":VP(180,180,15,30,100),"180p_4":VP(240,180,15,30,120),"240p":VP(320,240,15,40,200),"240p_1":VP(320,240,15,40,200),"240p_3":VP(240,240,15,40,140),"240p_4":VP(424,240,15,40,220),"360p":VP(640,360,15,80,400),"360p_1":VP(640,360,15,80,400),"360p_3":VP(360,360,15,80,260),"360p_4":VP(640,360,30,80,600),"360p_6":VP(360,360,30,80,400),"360p_7":VP(480,360,15,80,320),"360p_8":VP(480,360,30,80,490),"360p_9":VP(640,360,15,80,800),"360p_10":VP(640,360,24,80,800),"360p_11":VP(640,360,24,80,1e3),"480p":VP(640,480,15,100,500),"480p_1":VP(640,480,15,100,500),"480p_2":VP(640,480,30,100,1e3),"480p_3":VP(480,480,15,100,400),"480p_4":VP(640,480,30,100,750),"480p_6":VP(480,480,30,100,600),"480p_8":VP(848,480,15,100,610),"480p_9":VP(848,480,30,100,930),"480p_10":VP(640,480,10,100,400),"720p":VP(1280,720,15,120,1130),"720p_auto":VP(1280,720,30,900,3e3),"720p_1":VP(1280,720,15,120,1130),"720p_2":VP(1280,720,30,120,2e3),"720p_3":VP(1280,720,30,120,1710),"720p_5":VP(960,720,15,120,910),"720p_6":VP(960,720,30,120,1380),"1080p":VP(1920,1080,15,120,2080),"1080p_1":VP(1920,1080,15,120,2080),"1080p_2":VP(1920,1080,30,120,3e3),"1080p_3":VP(1920,1080,30,120,3150),"1080p_5":VP(1920,1080,60,120,4780),"1440p":VP(2560,1440,30,120,4850),"1440p_1":VP(2560,1440,30,120,4850),"1440p_2":VP(2560,1440,60,120,7350),"4k":VP(3840,2160,30,120,8910),"4k_1":VP(3840,2160,30,120,8910),"4k_3":VP(3840,2160,60,120,13500)},GP={"480p":HP(640,480,5),"480p_1":HP(640,480,5),"480p_2":HP(640,480,30),"480p_3":HP(640,480,15),"720p":HP(1280,720,5),"720p_auto":VP(1280,720,30,900,3e3),"720p_1":HP(1280,720,5),"720p_2":HP(1280,720,30),"720p_3":HP(1280,720,15),"1080p":HP(1920,1080,5),"1080p_1":HP(1920,1080,5),"1080p_2":HP(1920,1080,30),"1080p_3":HP(1920,1080,15)},KP={"1SL1TL":jP(1,1),"3SL3TL":jP(3,3),"2SL3TL":jP(2,3)};function WP(e){return e||(e="480p_1"),"string"==typeof e?Object.assign({},QP[e]):e}function qP(e){return"string"==typeof e?Object.assign({},GP[e]):e}function zP(e){return"string"==typeof e?Object.assign({},KP[e]):e}const YP={speech_low_quality:$P(16e3,!1),speech_standard:$P(32e3,!1,18),music_standard:$P(48e3,!1),standard_stereo:$P(48e3,!0,56),high_quality:$P(48e3,!1,128),high_quality_stereo:$P(48e3,!0,192)};function JP(e){return"string"==typeof e?Object.assign({},YP[e]):e}const XP=[];function ZP(e){return Aw(e,"mediaSource",["screen","window","application"]),!0}let eD=function(e){return e.NEED_RENEGOTIATE="@need_renegotiate",e.NEED_REPLACE_TRACK="@need_replace_track",e.NEED_REPLACE_MIXING_TRACK="@need_replace_mixing_track",e.NEED_CLOSE="@need_close",e.NEED_ENABLE_TRACK="@need_enable_track",e.NEED_DISABLE_TRACK="@need_disable_track",e.NEED_SESSION_ID="@need_sid",e.SET_OPTIMIZATION_MODE="@set_optimization_mode",e.GET_STATS="@get_stats",e.GET_RTC_STATS="@get_rtc_stats",e.GET_LOW_VIDEO_TRACK="@get_low_video_track",e.NEED_RESET_REMOTE_SDP="@need_reset_remote_sdp",e.NEED_UPDATE_VIDEO_ENCODER="@need_update_video_encoder",e.NEED_UPDATE_VIDEO_SEND_PARAMETERS="@need_update_video_send_parameters",e.NEED_MUTE_TRACK="@need_mute_track",e.NEED_UNMUTE_TRACK="@need_unmute_track",e}({}),tD=function(e){return e.SCREEN_TRACK="screen_track",e.CUSTOM_TRACK="custome_track",e.LOW_STREAM="low_stream",e.SCREEN_LOW_TRACK="screen_low_track",e}({}),nD=function(e){return e[e.HIGH_STREAM=0]="HIGH_STREAM",e[e.LOW_STREAM=1]="LOW_STREAM",e}({}),rD=function(e){return e[e.HIGH_STREAM=0]="HIGH_STREAM",e[e.LOW_STREAM=1]="LOW_STREAM",e[e.HIGH_STREAM_LAYER1=4]="HIGH_STREAM_LAYER1",e[e.HIGH_STREAM_LAYER2=5]="HIGH_STREAM_LAYER2",e[e.HIGH_STREAM_LAYER3=6]="HIGH_STREAM_LAYER3",e[e.HIGH_STREAM_LAYER4=7]="HIGH_STREAM_LAYER4",e[e.HIGH_STREAM_LAYER5=8]="HIGH_STREAM_LAYER5",e[e.HIGH_STREAM_LAYER6=9]="HIGH_STREAM_LAYER6",e}({}),oD=function(e){return e[e.DISABLE=0]="DISABLE",e[e.LOW_STREAM=1]="LOW_STREAM",e[e.AUDIO_ONLY=2]="AUDIO_ONLY",e[e.HIGH_STREAM_LAYER1=3]="HIGH_STREAM_LAYER1",e[e.HIGH_STREAM_LAYER2=4]="HIGH_STREAM_LAYER2",e[e.HIGH_STREAM_LAYER3=5]="HIGH_STREAM_LAYER3",e[e.HIGH_STREAM_LAYER4=6]="HIGH_STREAM_LAYER4",e[e.HIGH_STREAM_LAYER5=7]="HIGH_STREAM_LAYER5",e[e.HIGH_STREAM_LAYER6=8]="HIGH_STREAM_LAYER6",e}({}),iD=function(e){return e.TRANSCEIVER_UPDATED="transceiver-updated",e.SEI_TO_SEND="sei-to-send",e.SEI_RECEIVED="sei-received",e.TRACK_UPDATED="track-updated",e}({}),aD=function(e){return e.SOURCE_STATE_CHANGE="source-state-change",e.TRACK_ENDED="track-ended",e.BEAUTY_EFFECT_OVERLOAD="beauty-effect-overload",e.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status",e.CLOSED="closed",e}({}),sD=function(e){return e.FIRST_FRAME_DECODED="first-frame-decoded",e.VIDEO_ELEMENT_VISIBLE_STATUS="video-element-visible-status",e.VIDEO_STATE_CHANGED="video-state-changed",e}({}),cD=function(e){return e.AUDIO="audio",e.VIDEO="video",e.DATA="data",e}({}),lD=function(e){return e.AUDIO_SOURCE_STATE_CHANGE="audio_source_state_change",e.RECEIVE_TRACK_BUFFER="receive_track_buffer",e.ON_AUDIO_BUFFER="on_audio_buffer",e.UPDATE_SOURCE="update_source",e}({});const uD={sendVolumeLevel:0,sendBitrate:0,sendBytes:0,sendPackets:0,sendPacketsLost:0,sendJitterMs:0,sendRttMs:0,currentPacketLossRate:0},dD={sendBytes:0,sendBitrate:0,sendPackets:0,sendPacketsLost:0,sendJitterMs:0,sendRttMs:0,sendResolutionHeight:0,sendResolutionWidth:0,captureResolutionHeight:0,captureResolutionWidth:0,targetSendBitrate:0,totalDuration:0,totalFreezeTime:0,currentPacketLossRate:0},AD={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveLevel:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receivePacketsDiscarded:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1},pD={uplinkNetworkQuality:0,downlinkNetworkQuality:0},hD={transportDelay:0,end2EndDelay:0,receiveBitrate:0,receiveBytes:0,receiveDelay:0,receivePackets:0,receivePacketsLost:0,receiveResolutionHeight:0,receiveResolutionWidth:0,totalDuration:0,totalFreezeTime:0,freezeRate:0,packetLossRate:0,currentPacketLossRate:0,publishDuration:-1};let fD=function(e){return e.ON_TRACK="on_track",e.ON_NODE="on_node",e}({}),gD=function(e){return e.REQUEST_UPDATE_CONSTRAINTS="request_update_constraints",e.REQUEST_CONSTRAINTS="request_constraints",e}({}),mD=function(e){return e.IDLE="IDLE",e.INITING="INITING",e.INITEND="INITEND",e}({}),_D=function(e){return e.STATE_CHANGE="state_change",e.RECORDING_DEVICE_CHANGED="recordingDeviceChanged",e.PLAYOUT_DEVICE_CHANGED="playoutDeviceChanged",e.CAMERA_DEVICE_CHANGED="cameraDeviceChanged",e}({}),ED=function(e){return e.NONE="none",e.INIT="init",e.CANPLAY="canplay",e.PLAYING="playing",e.PAUSED="paused",e.SUSPEND="suspend",e.STALLED="stalled",e.WAITING="waiting",e.ERROR="error",e.DESTROYED="destroyed",e.ABORT="abort",e.ENDED="ended",e.EMPTIED="emptied",e.LOADEDDATA="loadeddata",e}({}),vD=function(e){return e[e.VideoStateStopped=0]="VideoStateStopped",e[e.VideoStateStarting=1]="VideoStateStarting",e[e.VideoStateDecoding=2]="VideoStateDecoding",e[e.VideoStateFrozen=3]="VideoStateFrozen",e}({});const yD={uninit:100,none:110,init:120,loadeddata:130,canplay:200,playing:210,paused:220,suspend:300,stalled:310,waiting:320,error:330,destroyed:340,abort:350,ended:360,emptied:370};let bD=function(e){return e.OPEN="open",e.MESSAGE="message",e.CLOSE="close",e.CLOSING="closing",e.ERROR="error",e}({});function CD(e,t,n,r,o){var i,a,s={};return Object.keys(r).forEach((function(e){s[e]=r[e]})),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=Kr(i=QO(a=n.slice()).call(a)).call(i,(function(n,r){return r(e,t,n)||n}),s),o&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(o):void 0,s.initializer=void 0),void 0===s.initializer&&(Object.defineProperty(e,t,s),s=null),s}function SD(e,t,n){return(t="symbol"==typeof(r=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t))?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e;var r}function wD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function TD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wD(Object(n),!0).forEach((function(t){SD(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wD(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class ID extends ww{set _mediaStreamTrack(e){e!==this.mediaStreamTrack&&(this.safeEmit(iD.TRACK_UPDATED,e),this.mediaStreamTrack=e)}get _mediaStreamTrack(){return this.mediaStreamTrack}constructor(e,t){var n;super(),SD(this,"trackMediaType",void 0),SD(this,"_ID",void 0),SD(this,"_rtpTransceiver",void 0),SD(this,"_lowRtpTransceiver",void 0),SD(this,"_hints",[]),SD(this,"_isClosed",!1),SD(this,"_originMediaStreamTrack",void 0),SD(this,"mediaStreamTrack",void 0),SD(this,"_external",{}),this._ID=t||aT(8,"track-"),this._originMediaStreamTrack=e,this.mediaStreamTrack=e,n=this,Or(XP).call(XP,n)||XP.push(n)}toString(){return this._ID}getTrackId(){return this._ID}getMediaStreamTrack(e){return e||Jw((()=>{var e;AI.reportApiInvoke(null,{name:Rw.GET_MEDIA_STREAM_TRACK,options:[],tag:Ow.TRACER}).onSuccess((null===(e=this._mediaStreamTrack)||void 0===e?void 0:e.label)||"")}),this.mediaStreamTrack.id||this.getTrackId()),this._mediaStreamTrack}getRTCRtpTransceiver(e){return e===nD.LOW_STREAM?this._lowRtpTransceiver:this._rtpTransceiver}getMediaStreamTrackSettings(){return this.getMediaStreamTrack(!0).getSettings()}close(){this._isClosed=!0,this._lowRtpTransceiver=void 0,this._rtpTransceiver=void 0,function(e){const t=XP.indexOf(e);-1!==t&&XP.splice(t,1)}(this),this.emit(aD.CLOSED),this.removeAllListeners(iD.SEI_RECEIVED)}_updateRtpTransceiver(e,t){if(t===nD.LOW_STREAM){if(this._lowRtpTransceiver===e)return;this._lowRtpTransceiver=e}else{if(this._rtpTransceiver===e)return;this._rtpTransceiver=e}this.emit(iD.TRANSCEIVER_UPDATED,e,t)}}class RD extends ID{get isExternalTrack(){return this._isExternalTrack}get muted(){return this._muted}get enabled(){return this._enabled}get processorContext(){return this._processorContext}constructor(e,t){super(e,t),SD(this,"_enabled",!0),SD(this,"_muted",!1),SD(this,"_isExternalTrack",!1),SD(this,"_isClosed",!1),SD(this,"_enabledMutex",void 0),SD(this,"processor",void 0),SD(this,"_processorContext",void 0),SD(this,"_handleTrackEnded",(()=>{this.onTrackEnded()})),this._enabledMutex=new _T("".concat(this.getTrackId())),e.addEventListener("ended",this._handleTrackEnded)}getTrackLabel(){var e,t;return null!==(e=null===(t=this._originMediaStreamTrack)||void 0===t?void 0:t.label)&&void 0!==e?e:""}close(){this._isClosed||(this.stop(),this._originMediaStreamTrack.stop(),this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack.stop(),this._mediaStreamTrack=null),this._originMediaStreamTrack=null,this._enabledMutex=null,oI.debug("[".concat(this.getTrackId(),"] close")),this.emit(eD.NEED_CLOSE),super.close())}async _updateOriginMediaStreamTrack(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._isExternalTrack=n,e!==this._originMediaStreamTrack&&(this._originMediaStreamTrack&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),t&&this._originMediaStreamTrack.stop()),e.addEventListener("ended",this._handleTrackEnded),this._originMediaStreamTrack=e,this._muted&&(this._originMediaStreamTrack.enabled=!1),this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Vw(this,eD.NEED_REPLACE_TRACK,this),this.processor&&this._processorContext&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this._processorContext}))}_getDefaultPlayerConfig(){return{}}onTrackEnded(){oI.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(aD.TRACK_ENDED)}stateCheck(e,t){if(oI.debug("check track state, [muted: ".concat(this._muted,", enabled: ").concat(this._enabled,"] to [").concat(e,": ").concat(t,"]")),dw(t,e),this._enabled&&this._muted&&"enabled"===e&&!1===t)throw new uw(lw.TRACK_STATE_UNREACHABLE,"cannot set enabled while the track is muted").print("error",oI);if(!this._enabled&&!this._muted&&"muted"===e&&!0===t)throw new uw(lw.TRACK_STATE_UNREACHABLE,"cannot set muted while the track is disabled").print("error",oI)}getProcessorStats(){return this._processorContext&&this._processorContext.gatherStats()||[]}getProcessorUsage(){return this._processorContext?this._processorContext.gatherUsage():MA.resolve([])}}const OD=window.AudioContext||window.webkitAudioContext;let ND=null;const kD=new class extends ww{constructor(){super(...arguments),SD(this,"prevState",void 0),SD(this,"curState",void 0),SD(this,"currentTime",void 0),SD(this,"currentTimeStuckAt",void 0),SD(this,"interruptDetectorTrack",void 0),SD(this,"onLocalAudioTrackMute",(()=>{oI.info("ios15-interruption-start"),this.emit(FP.IOS_15_16_INTERRUPTION_START)})),SD(this,"onLocalAudioTrackUnmute",(async()=>{oI.info("ios15-interruption-end"),"running"!==this.curState||this.duringInterruption?oI.info("ios15-interruption-end-canceled"):(ND&&await ND.suspend(),this.emit(FP.IOS_15_16_INTERRUPTION_END))}))}get duringInterruption(){return"running"===this.prevState&&"interrupted"===this.curState}bindInterruptDetectorTrack(e){oI.debug("webaudio bindInterruptDetectorTrack ".concat(e.getTrackId())),this.interruptDetectorTrack||(this.interruptDetectorTrack=e,this.interruptDetectorTrack._mediaStreamTrack.onmute=this.onLocalAudioTrackMute,this.interruptDetectorTrack._mediaStreamTrack.onunmute=this.onLocalAudioTrackUnmute)}unbindInterruptDetectorTrack(e){oI.debug("webaudio unbindInterruptDetectorTrack ".concat(e.getTrackId())),this.interruptDetectorTrack&&this.interruptDetectorTrack===e&&(this.interruptDetectorTrack._mediaStreamTrack&&(this.interruptDetectorTrack._mediaStreamTrack.onmute=null,this.interruptDetectorTrack._mediaStreamTrack.onunmute=null),this.interruptDetectorTrack=void 0)}};function PD(){if(!ND){if(function(){if(!OD)return void oI.error("your browser is not support web audio");oI.info("create audio context");const e=TD({},xT("WEBAUDIO_INIT_OPTIONS"));oI.debug("audio context init option:",JSON.stringify(e)),ND=new OD(e),kD.curState=ND.state,ND.onstatechange=()=>{kD.prevState=kD.curState,kD.curState=ND?ND.state:void 0;const{prevState:e,curState:t}=kD,n="running"===t,r="interrupted"===t,o="running"===e,i="suspended"===e,a="interrupted"===e,s=PS().osVersion;(VS()||ZS())&&o&&r&&(oI.info("ios".concat(s,"-interruption-start")),kD.emit(FP.IOS_INTERRUPTION_START)),(VS()||ZS())&&(i||a)&&n&&(oI.info("ios".concat(s,"-interruption-end")),kD.emit(FP.IOS_INTERRUPTION_END)),e!==t&&kD.emit(FP.STATE_CHANGE,t,e)},setInterval((()=>{var e;const t=null===(e=ND)||void 0===e?void 0:e.currentTime;kD.currentTime!==t?(kD.currentTimeStuckAt&&(oI.debug("AudioContext current time resume at ".concat(t)),kD.currentTimeStuckAt=void 0),kD.currentTime=t):(t!==kD.currentTimeStuckAt&&(AI.reportApiInvoke(null,{name:"WEB_AUDIO_CURRENT_TIME_STUCK",options:{currentTime:t},tag:Ow.TRACER}).onSuccess(),oI.warning("AudioContext current time stuck at ".concat(t))),kD.currentTimeStuckAt=t)}),5e3),async function(e){const t=["click","contextmenu","auxclick","dblclick","mousedown","mouseup","touchend","keydown","keyup"];let n,r=!1,o=!1,i=!1;function a(t){"running"===e.state?s(!1):VS()||ZS()?"suspended"===e.state&&(s(!0),t&&e.resume().then(c,c)):"closed"!==e.state&&(s(!0),t&&e.resume().then(c,c))}function s(e){if(r!==e){r=e;for(let n=0,r=t;n<r.length;n+=1){const t=r[n];e?window.addEventListener(t,l,{capture:!0,passive:!0}):window.removeEventListener(t,l,{capture:!0,passive:!0})}}}function c(){a(!1)}function l(){a(!0)}function u(e){if(!i)if(n.paused)if(e){let e;d(!1),i=!0;try{e=n.play(),e?e.then(A,A):(n.addEventListener("playing",A),n.addEventListener("abort",A),n.addEventListener("error",A))}catch(t){A()}}else d(!0);else d(!1)}function d(e){if(o!==e){o=e;for(let n=0,r=t;n<r.length;n++){const t=r[n];e?window.addEventListener(t,p,{capture:!0,passive:!0}):window.removeEventListener(t,p,{capture:!0,passive:!0})}}}function A(){n.removeEventListener("playing",A),n.removeEventListener("abort",A),n.removeEventListener("error",A),i=!1,u(!1)}function p(){u(!0)}if(VS()){const t=e.createMediaStreamDestination(),r=document.createElement("div");r.innerHTML="<audio x-webkit-airplay='deny'></audio>",n=r.children.item(0),n.controls=!1,n.disableRemotePlayback=!0,n.preload="auto",n.srcObject=t.stream,u(!0)}kD.on(FP.STATE_CHANGE,(function(){a(!0)})),a(!1)}(ND)}(),!ND)throw new uw(lw.NOT_SUPPORTED,"can not create audio context");return ND}return ND}function DD(e){if(function(){if(null!==LD)return LD;const e=PD(),t=e.createBufferSource(),n=e.createGain(),r=e.createGain();t.connect(n),t.connect(r),t.disconnect(n);let o=!1;try{t.disconnect(n)}catch(i){o=!0}return t.disconnect(),LD=o,o}())return;const t=e.connect,n=e.disconnect;e.connect=(n,r,o)=>{var i;return e._inputNodes||(e._inputNodes=[]),Or(i=e._inputNodes).call(i,n)||(n instanceof AudioNode?(e._inputNodes.push(n),t.call(e,n,r,o)):t.call(e,n,r)),e},e.disconnect=(r,o,i)=>{n.call(e),r?Gw(e._inputNodes,r):e._inputNodes=[];for(const n of e._inputNodes)t.call(e,n)}}let LD=null;function BD(e,t){let n=!1;const r=1/t;if(xT("DISABLE_WEBAUDIO")){const t=window.setInterval((()=>{n?window.clearInterval(t):e(performance.now()/1e3)}),1e3*r)}else{const t=PD();let o=t.createGain();o.gain.value=0,o.connect(t.destination);const i=()=>{if(n)return void(o=null);const a=t.createOscillator();a.onended=i,a.connect(o),a.start(0),a.stop(t.currentTime+r),e(t.currentTime)};i()}return()=>{n=!0}}class UD{constructor(){SD(this,"context",void 0),SD(this,"analyserNode",void 0),SD(this,"sourceNode",void 0),this.context=PD(),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4}updateSource(e){if(e!==this.sourceNode){if(this.sourceNode)try{this.sourceNode.disconnect(this.analyserNode)}catch(t){}this.sourceNode=e,null==e||e.connect(this.analyserNode)}}getVolumeLevel(){if(!this.sourceNode)return 0;if(!this.context||VS()||ZS()||"running"!==this.context.state&&this.context.resume(),!this.analyserNode)return 0;const e=new Float32Array(this.analyserNode.fftSize);if(this.analyserNode.getFloatTimeDomainData)this.analyserNode.getFloatTimeDomainData(e);else{const t=new Uint8Array(this.analyserNode.fftSize);this.analyserNode.getByteTimeDomainData(t);for(let n=0;n<e.length;++n)e[n]=t[n]/128-1}const t=Kr(e).call(e,((e,t)=>e+t*t),0)/e.length;return Math.max(10*Math.log10(t)+100,0)/100}getAnalyserNode(){return this.analyserNode}rebuildAnalyser(){try{var e,t;null===(e=this.sourceNode)||void 0===e||e.disconnect(this.analyserNode),this.analyserNode=this.context.createAnalyser(),this.analyserNode.fftSize=2048,this.analyserNode.smoothingTimeConstant=.4,null===(t=this.sourceNode)||void 0===t||t.connect(this.analyserNode)}catch(n){oI.warning("rebuild analyser node failed.")}}destroy(){this.updateSource(void 0)}}class MD extends ww{get processSourceNode(){return this.sourceNode}set processedNode(e){var t;if(!this.isDestroyed&&this._processedNode!==e){try{var n;null===(n=this.sourceNode)||void 0===n||n.disconnect(this.outputNode)}catch(r){}null===(t=this._processedNode)||void 0===t||t.disconnect(),this._processedNode=e,this.connect()}}get processedNode(){return this._processedNode}constructor(){super(),SD(this,"outputNode",void 0),SD(this,"outputTrack",void 0),SD(this,"isPlayed",!1),SD(this,"sourceNode",void 0),SD(this,"context",void 0),SD(this,"audioBufferNode",void 0),SD(this,"destNode",void 0),SD(this,"audioOutputLevel",0),SD(this,"volumeLevelAnalyser",void 0),SD(this,"_processedNode",void 0),SD(this,"playNode",void 0),SD(this,"isDestroyed",!1),SD(this,"onNoAudioInput",void 0),SD(this,"isNoAudioInput",!1),SD(this,"_noAudioInputCount",0),this.context=PD(),this.playNode=this.context.destination,this.outputNode=this.context.createGain(),DD(this.outputNode),this.volumeLevelAnalyser=new UD}startGetAudioBuffer(e){this.audioBufferNode||(this.audioBufferNode=this.context.createScriptProcessor(e),this.outputNode.connect(this.audioBufferNode),this.audioBufferNode.connect(this.context.destination),this.audioBufferNode.onaudioprocess=e=>{this.emit(lD.ON_AUDIO_BUFFER,function(e){for(let t=0;t<e.outputBuffer.numberOfChannels;t+=1){const n=e.outputBuffer.getChannelData(t);for(let e=0;e<n.length;e+=1)n[e]=0}return e.inputBuffer}(e))})}stopGetAudioBuffer(){this.audioBufferNode&&(this.audioBufferNode.onaudioprocess=null,this.outputNode.disconnect(this.audioBufferNode),this.audioBufferNode=void 0)}createOutputTrack(){if(!UP().webAudioMediaStreamDest)throw new uw(lw.NOT_SUPPORTED,"your browser is not support audio processor");return this.destNode&&this.outputTrack||(this.destNode=this.context.createMediaStreamDestination(),this.outputNode.connect(this.destNode),this.outputTrack=this.destNode.stream.getAudioTracks()[0]),this.outputTrack}play(e){"running"!==this.context.state&&Ww((()=>{kD.emit("autoplay-failed")})),this.isPlayed=!0,this.playNode=e||this.context.destination,this.outputNode.connect(this.playNode)}stop(){if(this.isPlayed)try{this.outputNode.disconnect(this.playNode)}catch(mp){}this.isPlayed=!1}getAccurateVolumeLevel(){return this.volumeLevelAnalyser.getVolumeLevel()}async checkHasAudioInput(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(e>5)return this.isNoAudioInput=!0,this.onNoAudioInput&&this.onNoAudioInput(),!1;VS()||ZS()?"suspended"===this.context.state&&this.context.resume():"running"!==this.context.state&&this.context.resume();const t=this.volumeLevelAnalyser.getAnalyserNode();let n;t.getFloatTimeDomainData?(n=new Float32Array(t.fftSize),t.getFloatTimeDomainData(n)):(n=new Uint8Array(t.fftSize),t.getByteTimeDomainData(n));let r=!1;for(let o=0;o<n.length;o++)0!==n[o]&&(r=!0);return r?(this.isNoAudioInput=!1,!0):(await iT(200),await this.checkHasAudioInput(e?e+1:1)&&r)}getAudioVolume(){return this.outputNode.gain.value}setVolume(e){this.outputNode.gain.setValueAtTime(e,this.context.currentTime)}destroy(){this.disconnect(),this.stop(),this.isDestroyed=!0,this.onNoAudioInput=void 0}disconnect(){var e,t;null===(e=this.processedNode)||void 0===e||e.disconnect(),null===(t=this.sourceNode)||void 0===t||t.disconnect(),this.outputNode&&this.outputNode.disconnect()}connect(){var e;this.processedNode?null===(e=this.processedNode)||void 0===e||e.connect(this.outputNode):this.sourceNode&&this.sourceNode.connect(this.outputNode),this.volumeLevelAnalyser.updateSource(this.outputNode)}}class xD extends MD{get isFreeze(){return!1}constructor(e,t,n){var r;if(super(),SD(this,"sourceNode",void 0),SD(this,"track",void 0),SD(this,"clonedTrack",void 0),SD(this,"audioElement",void 0),SD(this,"isCurrentTrackCloned",!1),SD(this,"isRemoteTrack",!1),SD(this,"originVolumeLevelAnalyser",void 0),SD(this,"rebuildWebAudio",(async()=>{if(oI.debug("ready to rebuild web audio, state:",this.context.state),this.isNoAudioInput&&await this.checkHasAudioInput(),!this.isNoAudioInput||this.isDestroyed)return document.body.removeEventListener("click",this.rebuildWebAudio,!0),void oI.debug("rebuild web audio success, current volume status",this.getAccurateVolumeLevel());this.context.resume().then((()=>oI.info("resume success"))),oI.debug("rebuild web audio because of ios 12 bugs"),this.disconnect();const e=this.track;this.track=this.track.clone(),this.isCurrentTrackCloned?e.stop():this.isCurrentTrackCloned=!0;const t=new MediaStream([this.track]);this.sourceNode=this.context.createMediaStreamSource(t),DD(this.sourceNode),this.volumeLevelAnalyser.rebuildAnalyser();const n=this.outputNode.gain.value;this.outputNode=this.context.createGain(),this.outputNode.gain.setValueAtTime(n,this.context.currentTime),DD(this.outputNode),this.emit(lD.UPDATE_SOURCE),this.connect(),this.audioElement.srcObject=t,this.isPlayed&&this.play(this.playNode),this.checkHasAudioInput()})),"audio"!==e.kind)throw new uw(lw.UNEXPECTED_ERROR);this.track=e;const o=new MediaStream([this.track]);if(this.isRemoteTrack=!!t,this.sourceNode=this.context.createMediaStreamSource(o),DD(this.sourceNode),n){const e=n.clone();e.enabled=!0,this.clonedTrack=e,oI.debug("create an unmuted track ".concat(e.id," from the original track ").concat(n.id," to get the volume"));const t=this.context.createMediaStreamSource(new MediaStream([e]));DD(t),this.originVolumeLevelAnalyser=new UD,this.originVolumeLevelAnalyser.updateSource(t)}this.connect(),this.audioElement=document.createElement("audio"),this.audioElement.srcObject=o;const i=PS();t&&i.os===IS.IOS&&Number(null===(r=i.osVersion)||void 0===r?void 0:r.split(".")[0])<15&&(kD.on(FP.STATE_CHANGE,(()=>{"suspended"===this.context.state?document.body.addEventListener("click",this.rebuildWebAudio,!0):"running"===this.context.state&&this.rebuildWebAudio()})),this.checkHasAudioInput().then((e=>{e||document.body.addEventListener("click",this.rebuildWebAudio,!0)})))}updateTrack(e){this.sourceNode.disconnect(),this.track=e,this.isCurrentTrackCloned=!1;const t=new MediaStream([e]);this.sourceNode=this.context.createMediaStreamSource(t),DD(this.sourceNode),this.processedNode||this.sourceNode.connect(this.outputNode),this.emit(lD.UPDATE_SOURCE),this.audioElement.srcObject=t}destroy(){var e;this.audioElement.srcObject=null,this.audioElement.remove(),kD.off("state-change",this.rebuildWebAudio),null===(e=this.originVolumeLevelAnalyser)||void 0===e||e.destroy(),this.clonedTrack=void 0,super.destroy()}createMediaStreamSourceNode(e){return this.context.createMediaStreamSource(new MediaStream([e]))}updateOriginTrack(e){const t=e.clone();t.enabled=!0,this.clonedTrack&&(this.clonedTrack.stop(),this.clonedTrack=t),oI.debug("create an unmuted track ".concat(t.id," from the original track ").concat(e.id," to get the volume"));const n=this.context.createMediaStreamSource(new MediaStream([t]));DD(n),this.originVolumeLevelAnalyser&&this.originVolumeLevelAnalyser.updateSource(n)}getOriginVolumeLevel(){return this.originVolumeLevelAnalyser?this.originVolumeLevelAnalyser.getVolumeLevel():this.getAccurateVolumeLevel()}}async function FD(e,t,n){const r=(e,t)=>e?"number"!=typeof e?e.max||e.exact||e.ideal||e.min||t:e:t,o={audio:!!n&&{mandatory:{chromeMediaSource:"desktop"}},video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e,maxHeight:r(t.height,1080),maxWidth:r(t.width,1920)}}};return t.frameRate&&"number"!=typeof t.frameRate?(o.video.mandatory.maxFrameRate=t.frameRate.max,o.video.mandatory.minFrameRate=t.frameRate.min):"number"==typeof t.frameRate&&(o.video.mandatory.maxFrameRate=t.frameRate),await navigator.mediaDevices.getUserMedia(o)}async function $D(e,t){const n=await VD(e.mediaSource),{sourceId:r,audio:o}=await function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new MA(((n,r)=>{const o=document.createElement("div");o.innerText="share screen",o.setAttribute("style","text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;");const i=document.createElement("div");i.setAttribute("style","width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;");const a=document.createElement("div");a.innerText="Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.",a.setAttribute("style","height: 12%;");const s=document.createElement("div");s.setAttribute("style","width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;");const c=document.createElement("div");c.setAttribute("style","display: flex; justify-content: space-between; padding: 16px 0;");const l=document.createElement("button");l.innerHTML="cancel",l.setAttribute("style","width: 85px;"),l.onclick=()=>{document.body.removeChild(A);const e=new Error("NotAllowedError");e.name="NotAllowedError",r(e)};let u=t;const d=document.createElement("div");if(t){const e=document.createElement("input");e.setAttribute("type","checkbox");const t=document.createElement("span");e.setAttribute("style","margin-right: 6px;"),t.innerText="Share audio",e.checked=u,e.onchange=()=>{u=e.checked},d.appendChild(e),d.appendChild(t)}c.appendChild(d),c.appendChild(l),i.appendChild(a),i.appendChild(s),i.appendChild(c);const A=document.createElement("div");A.setAttribute("style","position: fixed; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);"),A.appendChild(o),A.appendChild(i),document.body.appendChild(A),e.map((e=>{if(e.id){const r=document.createElement("div");r.setAttribute("style","width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;");let o=e.thumbnail;try{const{width:e}=o.getSize();e>1920&&(o=o.resize({width:1920}))}catch(t){throw t&&t.message.startsWith("Illegal invocation")&&console.error("Operate thumbnail error, please try to set contextIsolation: false. (https://github.com/electron/electron/issues/34953)"),t}r.innerHTML='<div style="height: 120px; display: table-cell; vertical-align: middle;"><img style="width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);" src='+o.toDataURL()+' /></div><span style="\theight: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">'+e.name.replace(/[\u00A0-\u9999<>\&]/g,(function(e){return"&#"+e.charCodeAt(0)+";"}))+"</span>",r.onclick=()=>{document.body.removeChild(A),n({sourceId:e.id,audio:u})},s.appendChild(r)}}))}))}(n,t);return await FD(r,e,o)}async function VD(e){let t=["window","screen"];"application"!==e&&"window"!==e||(t=["window"]),"screen"===e&&(t=["screen"]);const n=Iw();if(!n)throw console.error("failed to fetch electron, please mount it to window"),new uw(lw.ELECTRON_IS_NULL);let r=null;try{var o;r=(null===(o=n.desktopCapturer)||void 0===o?void 0:o.getSources({types:t}))||n.ipcRenderer.invoke("DESKTOP_CAPTURER_GET_SOURCES",{types:t})}catch(i){r=null}r&&r.then||(r=new MA(((e,r)=>{n.desktopCapturer.getSources({types:t},((t,n)=>{t?r(t):e(n)}))})));try{return await r}catch(i){throw new uw(lw.ELECTRON_DESKTOP_CAPTURER_GET_SOURCES_ERROR,i.toString())}}const HD=new _T("safari");let jD=!1,QD=!1;async function GD(e,t){let n=0,r=null;for(;n<2;)try{r=await KD(e,t,n>0);break}catch(o){if(o instanceof uw)throw oI.error("[".concat(t,"] ").concat(o.toString())),o;const e=WD(o.name||o.code||o,o.message);if(e.code===lw.MEDIA_OPTION_INVALID){oI.debug("[".concat(t,"] detect media option invalid, retry")),n+=1,await iT(500);continue}throw oI.error("[".concat(t,"] ").concat(e.toString())),e}if(!r)throw new uw(lw.UNEXPECTED_ERROR,"can not find stream after getUserMedia");return r}async function KD(e,t,n){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new uw(lw.NOT_SUPPORTED,"can not find getUserMedia");n&&(e.video&&(delete e.video.width,delete e.video.height),e.screen&&(delete e.screen.width,delete e.screen.height));const r=UP(),o=new MediaStream;if(e.audioSource&&o.addTrack(e.audioSource),e.videoSource&&o.addTrack(e.videoSource),!e.audio&&!e.video&&!e.screen)return oI.debug("Using Video Source/ Audio Source"),o;if(e.screen)if(Iw())e.screen.sourceId?qD(o,await FD(e.screen.sourceId,e.screen,!!e.screenAudio)):qD(o,await $D(e.screen,!!e.screenAudio));else if(MS()&&e.screen.extensionId&&e.screen.mandatory){if(!r.getStreamFromExtension)throw new uw(lw.NOT_SUPPORTED,"This browser does not support screen sharing");oI.debug("[".concat(t,'] Screen access on chrome stable, looking for extension"'));const n=await(a=e.screen.extensionId,s=t,new MA(((e,t)=>{try{chrome.runtime.sendMessage(a,{getStream:!0},(n=>{if(!n||!n.streamId)return oI.error("[".concat(s,"] No response from Chrome Plugin. Plugin not installed properly"),n),void t(new uw(lw.CHROME_PLUGIN_NO_RESPONSE,"No response from Chrome Plugin. Plugin not installed properly"));e(n.streamId)}))}catch(n){oI.error("[".concat(s,"] AgoraRTC screensharing plugin is not accessible(").concat(a,")"),n.toString()),t(new uw(lw.CHROME_PLUGIN_NOT_INSTALL))}})));e.screen.mandatory.chromeMediaSourceId=n,qD(o,await navigator.mediaDevices.getUserMedia({video:{mandatory:e.screen.mandatory}}))}else if(r.getDisplayMedia){var i;e.screen.mediaSource&&ZP(e.screen.mediaSource);const n={width:e.screen.width,height:e.screen.height,frameRate:e.screen.frameRate,displaySurface:null!==(i=e.screen.displaySurface)&&void 0!==i?i:"screen"===e.screen.mediaSource?"monitor":e.screen.mediaSource},{selfBrowserSurface:r,surfaceSwitching:a,systemAudio:s}=e.screen,c={selfBrowserSurface:r,surfaceSwitching:a,systemAudio:s};!r&&delete c.selfBrowserSurface,!a&&delete c.surfaceSwitching,!s&&delete c.systemAudio,oI.debug("[".concat(t,"] getDisplayMedia:"),JSON.stringify({video:n,audio:e.screenAudio,controls:c})),qD(o,await navigator.mediaDevices.getDisplayMedia(TD({video:n,audio:e.screenAudio},c)))}else{if(!$S())throw oI.error("[".concat(t,"] This browser does not support screenSharing")),new uw(lw.NOT_SUPPORTED,"This browser does not support screen sharing");{e.screen.mediaSource&&ZP(e.screen.mediaSource);const n={video:{mediaSource:e.screen.mediaSource,width:e.screen.width,height:e.screen.height,frameRate:e.screen.frameRate}};oI.debug("[".concat(t,"] getUserMedia: ").concat(JSON.stringify(n))),qD(o,await navigator.mediaDevices.getUserMedia(n))}}var a,s;if(!e.video&&!e.audio)return o;let c={video:e.video,audio:e.audio},l=xT("MEDIA_DEVICE_CONSTRAINTS");if(l)try{"string"==typeof l&&(l=JSON.parse(l)),c=AT(c,l)}catch(A){}oI.debug("[".concat(t,"] GetUserMedia"),JSON.stringify(c)),PS();let u,d=null;(xS()||VS()||US())&&(d=await HD.lock());try{u=await navigator.mediaDevices.getUserMedia(c)}catch(A){throw d&&d(),A}return c.audio&&(jD=!0),c.video&&(QD=!0),qD(o,u),d&&d(),o}function WD(e,t){switch(e){case"Starting video failed":case"OverconstrainedError":case"TrackStartError":return new uw(lw.MEDIA_OPTION_INVALID,"".concat(e,": ").concat(t));case"NotFoundError":case"DevicesNotFoundError":return new uw(lw.DEVICE_NOT_FOUND,"".concat(e,": ").concat(t));case"NotSupportedError":return new uw(lw.NOT_SUPPORTED,"".concat(e,": ").concat(t));case"NotReadableError":return new uw(lw.NOT_READABLE,"".concat(e,": ").concat(t));case"InvalidStateError":case"NotAllowedError":case"PERMISSION_DENIED":case"PermissionDeniedError":return new uw(lw.PERMISSION_DENIED,"".concat(e,": ").concat(t));case"ConstraintNotSatisfiedError":return new uw(lw.CONSTRAINT_NOT_SATISFIED,"".concat(e,": ").concat(t));default:return oI.error("getUserMedia unexpected error",e),new uw(lw.UNEXPECTED_ERROR,"".concat(e,": ").concat(t))}}function qD(e,t){const n=e.getVideoTracks()[0],r=e.getAudioTracks()[0],o=t.getVideoTracks()[0],i=t.getAudioTracks()[0];i&&(r&&e.removeTrack(r),e.addTrack(i)),o&&(n&&e.removeTrack(n),e.addTrack(o))}const zD=new class extends ww{get state(){return this._state}set state(e){e!==this._state&&(this.emit(_D.STATE_CHANGE,e),this._state=e)}constructor(){super(),SD(this,"_state",mD.IDLE),SD(this,"isAccessMicrophonePermission",!1),SD(this,"isAccessCameraPermission",!1),SD(this,"lastAccessMicrophonePermission",!1),SD(this,"lastAccessCameraPermission",!1),SD(this,"checkdeviceMatched",!1),SD(this,"deviceInfoMap",new Map),this.init().then((()=>{navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",this.updateDevicesInfo.bind(this)),window.setInterval((()=>{(xT("ENUMERATE_DEVICES_INTERVAL")||(ow()||LS()===IS.HARMONY_OS)&&rw())&&this.updateDevicesInfo()}),xT("ENUMERATE_DEVICES_INTERVAL_TIME"))})).catch((e=>oI.error(e.toString())))}async enumerateDevices(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return new uw(lw.NOT_SUPPORTED,"enumerateDevices() not supported.").throw();const r=await navigator.mediaDevices.enumerateDevices(),o=this.checkMediaDeviceInfoIsOk(r);let i=!this.isAccessMicrophonePermission&&e,a=!this.isAccessCameraPermission&&t;o.audio&&(i=!1),o.video&&(a=!1);let s=null,c=null,l=null;if(!n&&(i||a)){if(HD.isLocked&&(oI.debug("[device manager] wait GUM lock"),(await HD.lock())(),oI.debug("[device manager] GUM unlock")),jD&&(i=!1,this.isAccessMicrophonePermission=!0),QD&&(a=!1,this.isAccessCameraPermission=!0),oI.debug("[device manager] check media device permissions",e,t,i,a),i&&a){try{l=await navigator.mediaDevices.getUserMedia({audio:!0,video:!0})}catch(u){const e=WD(u.name||u.code||u,u.message);if(e.code===lw.PERMISSION_DENIED)throw e;oI.warning("getUserMedia failed in getDevices",e)}this.isAccessCameraPermission=!0,this.isAccessMicrophonePermission=!0}else if(i){try{s=await navigator.mediaDevices.getUserMedia({audio:e})}catch(u){const e=WD(u.name||u.code||u,u.message);if(e.code===lw.PERMISSION_DENIED)throw e;oI.warning("getUserMedia failed in getDevices",e)}this.isAccessMicrophonePermission=!0}else if(a){try{c=await navigator.mediaDevices.getUserMedia({video:t})}catch(u){const e=WD(u.name||u.code||u,u.message);if(e.code===lw.PERMISSION_DENIED)throw e;oI.warning("getUserMedia failed in getDevices",e)}this.isAccessCameraPermission=!0}oI.debug("[device manager] mic permission",e,"cam permission",t)}try{const e=await navigator.mediaDevices.enumerateDevices();return s&&s.getTracks().forEach((e=>e.stop())),c&&c.getTracks().forEach((e=>e.stop())),l&&l.getTracks().forEach((e=>e.stop())),s=null,c=null,l=null,e}catch(u){return s&&s.getTracks().forEach((e=>e.stop())),c&&c.getTracks().forEach((e=>e.stop())),l&&l.getTracks().forEach((e=>e.stop())),s=null,c=null,l=null,new uw(lw.ENUMERATE_DEVICES_FAILED,u.toString()).throw()}}async getRecordingDevices(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(await this.enumerateDevices(!0,!1,e)).filter((e=>"audioinput"===e.kind))}async getCamerasDevices(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(await this.enumerateDevices(!1,!0,e)).filter((e=>"videoinput"===e.kind))}async getSpeakers(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(await this.enumerateDevices(!0,!1,e)).filter((e=>"audiooutput"===e.kind))}searchDeviceIdByName(e){let t=null;return this.deviceInfoMap.forEach((n=>{n.device.label===e&&(t=n.device.deviceId)})),t}async getDeviceById(e){const t=(await this.enumerateDevices(!0,!0,!0)).find((t=>t.deviceId===e));if(!t)throw new uw(lw.DEVICE_NOT_FOUND,"deviceId: ".concat(e));return t}async init(){this.state=mD.INITING;try{await this.updateDevicesInfo(),this.state=mD.INITEND}catch(mp){throw oI.warning("Device Detection functionality cannot start properly.",mp.toString()),this.state=mD.IDLE,("boolean"==typeof isSecureContext?isSecureContext:"https:"===location.protocol||"file:"===location.protocol||"localhost"===location.hostname||"127.0.0.1"===location.hostname||"::1"===location.hostname)||new uw(lw.WEB_SECURITY_RESTRICT,"Your context is limited by web security, please try using https protocol or localhost.").throw(),mp}}async updateDevicesInfo(){const e=await this.enumerateDevices(!0,!0,!0),t=Date.now(),n=[];if(e[0]&&e[0].label&&!1===this.checkdeviceMatched){this.checkdeviceMatched=!0;const t=e.find((e=>"audioinput"===e.kind&&"default"===e.deviceId)),n=e.find((e=>"audiooutput"===e.kind&&"default"===e.deviceId));t&&n?n.groupId===t.groupId?oI.debug("[device-check] default input ".concat(t.label," and output ").concat(n.label," is the same group")):oI.debug("[device-check] default input ".concat(t.label," and output ").concat(n.label," is not the same group")):oI.debug("[device-check] default input or output not found")}const r=this.checkMediaDeviceInfoIsOk(e);if(e.forEach((e=>{if(!e.deviceId)return;const r=this.deviceInfoMap.get("".concat(e.kind,"_").concat(e.deviceId));if("ACTIVE"!==(r?r.state:"INACTIVE")){const r={initAt:t,updateAt:t,device:e,state:"ACTIVE"};this.deviceInfoMap.set("".concat(e.kind,"_").concat(e.deviceId),r),n.push(r)}r&&(r.updateAt=t)})),this.deviceInfoMap.forEach(((e,r)=>{"ACTIVE"===e.state&&e.updateAt!==t&&(e.state="INACTIVE",n.push(e))})),this.state!==mD.INITEND)return r.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),void(r.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0));n.forEach((e=>{switch(e.device.kind){case"audioinput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(_D.RECORDING_DEVICE_CHANGED,e);break;case"videoinput":this.lastAccessCameraPermission&&this.isAccessCameraPermission&&this.emit(_D.CAMERA_DEVICE_CHANGED,e);break;case"audiooutput":this.lastAccessMicrophonePermission&&this.isAccessMicrophonePermission&&this.emit(_D.PLAYOUT_DEVICE_CHANGED,e)}})),r.audio&&(this.lastAccessMicrophonePermission=!0,this.isAccessMicrophonePermission=!0),r.video&&(this.lastAccessCameraPermission=!0,this.isAccessCameraPermission=!0)}checkMediaDeviceInfoIsOk(e){const t=e.filter((e=>"audioinput"===e.kind)),n=e.filter((e=>"videoinput"===e.kind)),r={audio:!1,video:!1};for(const o of t)if(o.label&&o.deviceId){r.audio=!0;break}for(const o of n)if(o.label&&o.deviceId){r.video=!0;break}return r}};let YD=!1;const JD=new class extends ww{constructor(){super(...arguments),SD(this,"onAutoplayFailed",void 0),SD(this,"onAudioAutoplayFailed",void 0)}};function XD(){if(PS(),!YD){const e=t=>{t.preventDefault(),YD=!1,iw()?document.body.removeEventListener("click",e,!0):(document.body.removeEventListener("touchstart",e,!0),document.body.removeEventListener("mousedown",e,!0))};YD=!0,iw()?document.body.addEventListener("click",e,!0):(document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0)),oI.info("detect media autoplay failed, document: https://docs.agora.io/cn/Voice/autoplay_policy_web_ng?platform=Web"),JD.onAutoplayFailed?JD.onAutoplayFailed():JD.onAudioAutoplayFailed?oI.warning("AgoraRTC.onAudioAutoplayFailed has been deprecated in favor of AgoraRTC.onAutoplayFailed.\n\n  Please refer to the Agora document to migrate the newer API, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web ."):oI.warning("We have detected a media autoplay failed event, and found out that you haven't implemented AgoraRTC.onAutoplayFailed callback yet.\n\n  It will cause audio/video element not playing automatically on some browsers without user interaction, possibly hurting user experiences.\n\n  Please refer to the Agora document to properly handle autoplay failed event, https://docs.agora.io/en/Voice/autoplay_policy_web_ng?platform=Web ."),JD.emit("autoplay-failed")}}function ZD(e,t,n,r){if(!e)return;const o=AI.getBaseInfoBySessionId(e);if(!o)return;const i=o.info,a=Date.now(),s=TD(TD({},i),{},{vid:void 0===i.vid?0:Number(i.vid),lts:a,elapse:a-o.startTime,cbRegistered:JD.onAutoplayFailed||JD.onAudioAutoplayFailed?1:-1,errorMsg:n,mediaType:t,trackId:r,extend:void 0});AI.send({type:lI.AUTOPLAY_FAILED,data:s},!0)}const eL=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","error"],tL=new class{constructor(){SD(this,"onAutoplayFailed",void 0),SD(this,"elementMap",new Map),SD(this,"elementStateMap",new Map),SD(this,"elementsNeedToResume",[]),SD(this,"sinkIdMap",new Map),SD(this,"autoResumeAfterInterruption",(e=>{Array.from(this.elementMap.entries()).forEach((t=>{let[n,r]=t;const o=this.elementStateMap.get(n),i=r.srcObject.getAudioTracks()[0],a=i&&i.readyState;if(oI.debug("resume after interrupted, ele: ".concat(o," audio: ").concat(a," ").concat(e)),"live"===a){if(e)return r.pause(),void r.play();if("running"===kD.curState)return YS()?(r.pause(),void r.play()):void(o&&"paused"===o&&r.play())}}))})),SD(this,"autoResumeAfterInterruptionOnIOS15_16",(()=>{Array.from(this.elementMap.entries()).forEach((e=>{let[t,n]=e;const r=n.srcObject.getAudioTracks()[0];r&&"live"===r.readyState&&(oI.debug("auto resume after interruption inside autoResumeAfterInterruptionOnIOS15"),n.pause(),n.play())}))})),this.autoResumeAudioElement(),kD.on(FP.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),kD.on(FP.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16),kD.on(FP.STATE_CHANGE,(()=>{VS()&&"suspended"===kD.prevState&&"running"===kD.curState&&this.autoResumeAfterInterruption()}))}async setSinkID(e,t){const n=this.elementMap.get(e);if(this.sinkIdMap.set(e,t),n)try{await n.setSinkId(t)}catch(r){throw new uw(lw.PERMISSION_DENIED,"can not set sink id: "+r.toString())}}play(e,t,n,r){if(this.elementMap.has(t))return;const o=document.createElement("audio");o.autoplay=!0,o.srcObject=new MediaStream([e]),this.bindAudioElementEvents(t,o),this.elementMap.set(t,o),this.elementStateMap.set(t,ED.INIT),this.setVolume(t,n);const i=this.sinkIdMap.get(t);if(i)try{o.setSinkId(i).catch((e=>{oI.warning("[".concat(t,"] set sink id failed"),e.toString())}))}catch(s){oI.warning("[".concat(t,"] set sink id failed"),s.toString())}const a=o.play();a&&a.then&&a.catch((e=>{r&&ZD(r,"audio",e.message,t),oI.warning("audio element play warning",e.toString()),this.elementMap.has(t)&&"NotAllowedError"===e.name&&(oI.warning("detected audio element autoplay failed"),this.elementsNeedToResume.push(o),Ww((()=>{this.onAutoplayFailed&&this.onAutoplayFailed(),XD()})))}))}updateTrack(e,t){const n=this.elementMap.get(e);n&&(n.srcObject=new MediaStream([t]))}isPlaying(e){return this.elementMap.has(e)&&"playing"===this.elementStateMap.get(e)}setVolume(e,t){const n=this.elementMap.get(e);n&&(t=Math.max(0,Math.min(100,t)),n.volume=t/100)}stop(e){const t=this.elementMap.get(e);if(this.sinkIdMap.delete(e),!t)return;const n=this.elementsNeedToResume.indexOf(t);this.elementsNeedToResume.splice(n,1),t.srcObject=null,t.remove(),this.elementMap.delete(e),this.elementStateMap.delete(e)}bindAudioElementEvents(e,t){eL.forEach((n=>{t.addEventListener(n,(n=>{const r=this.elementStateMap.get(e),o="pause"===n.type?"paused":n.type;if(oI.debug("[".concat(e,"] audio-element-status change ").concat(r," => ").concat(o)),"error"===n.type){const n=null==t?void 0:t.error;n&&oI.error("[".concat(e,"] media error, code: ").concat(n.code,", message: ").concat(n.message))}this.elementStateMap.set(e,o)}))}))}getPlayerState(e){return this.elementStateMap.get(e)||"uninit"}autoResumeAudioElement(){const e=()=>{this.elementsNeedToResume.forEach((e=>{e.play().then((e=>{oI.debug("Auto resume audio element success")})).catch((e=>{oI.warning("Auto resume audio element failed!",e)}))})),this.elementsNeedToResume=[]};new MA((e=>{document.body?e():window.addEventListener("load",(()=>e()))})).then((()=>{iw()?document.body.addEventListener("click",e,!0):(document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0))}))}};function nL(){return function(e,t,n){const r=n.value;return"function"==typeof r&&(n.value=function(){this._isClosed&&new uw(lw.INVALID_OPERATION,"[".concat(this.getTrackId(),"] cannot operate a closed track")).print("warning",oI);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const o=r.apply(this,t);return o instanceof MA?new MA(((e,t)=>{o.then(e).catch(t)})):o}),n}}class rL extends ww{constructor(e){super(),SD(this,"name","VideoProcessorDestination"),SD(this,"ID","0"),SD(this,"_source",void 0),SD(this,"videoContext",void 0),SD(this,"inputTrack",void 0),this.videoContext=e}get kind(){return"video"}get enabled(){return!0}pipe(){throw new uw(lw.NOT_SUPPORTED,"VideoProcessor cannot pipe to any other Processor")}unpipe(){throw new uw(lw.NOT_SUPPORTED,"VideoProcessor cannot unpipe to any other Processor")}enable(){}disable(){}updateInput(e){if(e.context!==this.videoContext)throw new Error("ProcessorContext passed to VideoTrack.processorDestination doesn't match it's belonging VideoTrack's context.\nProbably you are making pipeline like this:\nvideoTrack1.pipe(processor).pipe(videoTrack2.processorDestination).");e.track&&e.track!==this.inputTrack&&(this.videoContext.chained=!0,this.inputTrack=e.track,this.emit(fD.ON_TRACK,e.track))}reset(){this.inputTrack=void 0,this.videoContext.chained=!1,this.emit(fD.ON_TRACK,void 0)}}class oL extends ww{set chained(e){this._chained=e}get chained(){return this._chained}constructor(e,t){super(),SD(this,"constraintsMap",new Map),SD(this,"statsRegistry",[]),SD(this,"usageRegistry",[]),SD(this,"trackId",void 0),SD(this,"direction",void 0),SD(this,"_chained",!1),this.trackId=e,this.direction=t}async getConstraints(){return await $w(this,gD.REQUEST_CONSTRAINTS)}async requestApplyConstraints(e,t){var n;return oI.info("processor ".concat(t.name," requestApplyConstraints for ").concat(this.trackId)),e&&this.constraintsMap.set(t,e),Vw(this,gD.REQUEST_UPDATE_CONSTRAINTS,Array.from(XO(n=this.constraintsMap).call(n)))}async requestRevertConstraints(e){var t;if(this.constraintsMap.has(e))return oI.info("processor ".concat(e.name," requestRevertConstraints for ").concat(this.trackId)),this.constraintsMap.delete(e),Vw(this,gD.REQUEST_UPDATE_CONSTRAINTS,Array.from(XO(t=this.constraintsMap).call(t)))}registerStats(e,t,n){this.statsRegistry.find((n=>n.processorID===e.ID&&n.processorName===e.name&&n.type===t))||this.statsRegistry.push({processorName:e.name,processorID:e.ID,type:t,cb:n})}unregisterStats(e,t){const n=this.statsRegistry.findIndex((n=>n.processorID===e.ID&&n.processorName===e.name&&n.type===t));-1!==n&&this.statsRegistry.splice(n,1)}gatherStats(){const e=[];for(const{processorID:n,processorName:r,type:o,cb:i}of this.statsRegistry)try{const t=i();e.push({processorID:n,processorName:r,type:o,stats:t})}catch(t){oI.error(new uw(lw.UNEXPECTED_ERROR,t.message))}return e}registerUsage(e,t){this.usageRegistry.find((t=>t.processorID===e.ID&&t.processorName===e.name))||this.usageRegistry.push({processorID:e.ID,processorName:e.name,cb:t})}unregisterUsage(e){const t=this.usageRegistry.findIndex((t=>t.processorID===e.ID&&t.processorName===e.name));-1!==t&&this.usageRegistry.splice(t,1)}async gatherUsage(){const e=[];if(!this.chained)return[];for(const{cb:n}of this.usageRegistry)try{let t=n();t instanceof MA&&(t=await t),e.push(TD(TD({},t),{},{direction:this.direction}))}catch(t){oI.error("gather extension usage error",t)}return e}getDirection(){return this.direction}}class iL extends ww{constructor(e){super(),SD(this,"name","AudioProcessorDestination"),SD(this,"ID","0"),SD(this,"inputTrack",void 0),SD(this,"inputNode",void 0),SD(this,"audioProcessorContext",void 0),SD(this,"_source",void 0),this.audioProcessorContext=e}get kind(){return"audio"}get enabled(){return!0}pipe(){throw new uw(lw.NOT_SUPPORTED,"AudioProcessorDestination cannot pipe to any other Processor")}unpipe(){throw new uw(lw.NOT_SUPPORTED,"AudioProcessor cannot unpipe to any other Processor")}enable(){}disable(){}reset(){this.inputTrack=void 0,this.inputNode=void 0,this.audioProcessorContext.chained=!1,this.emit(fD.ON_TRACK,void 0),this.emit(fD.ON_NODE,void 0)}updateInput(e){if(e.context!==this.audioProcessorContext)throw new Error("ProcessorContext passed to AudioTrack.processorDestination doesn't match it's belonging AudioTrack's context.\n        Probably you are making pipeline like this: audioTrack1.pipe(processor).pipe(audioTrack2.processorDestination).");e.track&&this.inputTrack!==e.track&&(this.audioProcessorContext.chained=!0,this.inputTrack=e.track,this.emit(fD.ON_TRACK,this.inputTrack)),e.node&&this.inputNode!==e.node&&(this.audioProcessorContext.chained=!0,this.inputNode=e.node,this.emit(fD.ON_NODE,this.inputNode))}}class aL extends ww{set chained(e){this._chained=e}get chained(){return this._chained}constructor(e,t,n){super(),SD(this,"constraintsMap",new Map),SD(this,"statsRegistry",[]),SD(this,"audioContext",void 0),SD(this,"trackId",void 0),SD(this,"direction",void 0),SD(this,"usageRegistry",[]),SD(this,"_chained",!1),this.audioContext=e,this.trackId=t,this.direction=n}async getConstraints(){return $w(this,gD.REQUEST_CONSTRAINTS)}getAudioContext(){return this.audioContext}async requestApplyConstraints(e,t){var n;return oI.info("processor ".concat(t.name," requestApplyConstraints for ").concat(this.trackId)),e&&this.constraintsMap.set(t,e),Vw(this,gD.REQUEST_UPDATE_CONSTRAINTS,Array.from(XO(n=this.constraintsMap).call(n)))}async requestRevertConstraints(e){var t;if(this.constraintsMap.has(e))return this.constraintsMap.delete(e),Vw(this,gD.REQUEST_UPDATE_CONSTRAINTS,Array.from(XO(t=this.constraintsMap).call(t)))}registerStats(e,t,n){this.statsRegistry.find((n=>n.processorID===e.ID&&n.processorName===e.name&&n.type===t))||this.statsRegistry.push({processorName:e.name,processorID:e.ID,type:t,cb:n})}unregisterStats(e,t){const n=this.statsRegistry.findIndex((n=>n.processorID===e.ID&&n.processorName===e.name&&n.type===t));-1!==n&&this.statsRegistry.splice(n,1)}gatherStats(){const e=[];for(const{processorID:n,processorName:r,type:o,cb:i}of this.statsRegistry)try{const t=i();e.push({processorID:n,processorName:r,type:o,stats:t})}catch(t){oI.error(new uw(lw.UNEXPECTED_ERROR,t.message))}return e}registerUsage(e,t){this.usageRegistry.find((t=>t.processorID===e.ID&&t.processorName===e.name))||this.usageRegistry.push({processorID:e.ID,processorName:e.name,cb:t})}unregisterUsage(e){const t=this.usageRegistry.findIndex((t=>t.processorID===e.ID&&t.processorName===e.name));-1!==t&&this.usageRegistry.splice(t,1)}async gatherUsage(){const e=[];if(!this.chained)return[];for(const{cb:n}of this.usageRegistry)try{let t=n();t instanceof MA&&(t=await t),e.push(TD(TD({},t),{},{direction:this.direction}))}catch(t){oI.error("gather extension usage error",t)}return e}getDirection(){return this.direction}}class sL extends ww{get isPlayed(){return!0}get isFreeze(){return!1}constructor(){super(),SD(this,"context",void 0),SD(this,"processSourceNode",void 0),SD(this,"outputTrack",void 0),SD(this,"processedNode",void 0),SD(this,"clonedTrack",void 0),SD(this,"outputNode",void 0),this.outputNode=new cL}setVolume(){}createOutputTrack(){throw new uw(lw.NOT_SUPPORTED,"can not create output MediaStreamTrack when WebAudio disabled")}getOriginVolumeLevel(){return 0}getAccurateVolumeLevel(){return 0}stopGetAudioBuffer(){}startGetAudioBuffer(){}play(){}stop(){}destroy(){}updateTrack(){}updateOriginTrack(){}createMediaStreamSourceNode(){}}class cL{disconnect(){}connect(){}}function lL(e){return new MA(((t,n)=>{let r=!1;const o=document.createElement("video");o.setAttribute("autoplay",""),o.setAttribute("muted",""),o.muted=!0,o.autoplay=!0,o.setAttribute("playsinline",""),o.setAttribute("style","position: fixed; top: 0; left: 0; width: 1px; height: 1px"),document.body.appendChild(o);const i=VS()?"canplay":"playing";o.addEventListener(i,(()=>{const e=o.videoWidth,n=o.videoHeight;!e&&$S()||(r=!0,o.srcObject=null,o.remove(),t([e,n]))})),o.srcObject=new MediaStream([e]),o.play().catch(cT),setTimeout((()=>{r||(o.srcObject=null,o.remove(),t([o.videoWidth,o.videoHeight]))}),4e3)}))}function uL(e){const t={};e.facingMode&&(t.facingMode=e.facingMode),e.cameraId&&(t.deviceId={exact:e.cameraId});const n=WP(e.encoderConfig);return null!=n.width&&(t.width=n.width),null!=n.height&&(t.height=n.height),!tw()&&n.frameRate&&(t.frameRate=n.frameRate),FS()&&"object"==typeof t.frameRate&&(t.frameRate.max=60),$S()&&(t.frameRate={ideal:30,max:30}),t}function dL(e){const t={};return tw()||(void 0!==e.AGC&&(t.autoGainControl=e.AGC),void 0!==e.AEC&&(t.echoCancellation=e.AEC),void 0!==e.ANS&&(t.noiseSuppression=e.ANS,MS()&&e.ANS&&(t.googHighpassFilter=e.ANS))),t}function AL(e){const t=dL(e);if(e.encoderConfig){const n=JP(e.encoderConfig);t.channelCount=n.stereo?2:1,t.sampleRate=n.sampleRate,t.sampleSize=n.sampleSize}return e.microphoneId&&(t.deviceId={exact:e.microphoneId}),ow()&&(t.sampleRate=void 0),t}const pL=e=>{const t=e._encoderConfig;if(!t)return;const{frameRate:n,width:r,height:o}=e.getMediaStreamTrackSettings();let{frameRate:i=n,width:a=r,height:s=o}=t;if(!i||!a||!s)return;a=hT(a),s=hT(s),i=hT(i);const{max:c,min:l}=function(e,t,n){const r=200*Math.pow(n/15,.6)*Math.pow(e*t/640/360,.75);return{min:Math.floor(r),max:Math.floor(4*r)}}(a,s,i),{bitrateMax:u,bitrateMin:d}=t||{};u||oI.debug("calculate bitrate: [w: ".concat(a,", h: ").concat(s,", fps: ").concat(i,"] => [brMax: ").concat(u,", brMin: ").concat(d,"]"));const{maxFramerate:A}=xT("ENCODER_CONFIG_LIMIT");return A&&"number"==typeof A&&(i=Math.min(i,A)),{frameRate:i,bitrateMax:u||c,bitrateMin:d||l,scaleResolutionDownBy:1,scale:0}},hL=async(e,t,n)=>await(async(e,t,n)=>{const r=function(e){const t=[];for(let n=0;n<e.length;n+=2)t.push(parseInt(e.slice(n,n+2),16));return Uint8Array.from(t)}(fT(""+t+n)).slice(0,16),o=r.slice(0,12),i=await window.crypto.subtle.importKey("raw",r,"AES-GCM",!0,["encrypt"]);return new Uint8Array(await window.crypto.subtle.encrypt({name:"AES-GCM",iv:o},i,e))})(e.buffer,t,n),fL=e=>{const t=document.createElement("canvas");return t.width=2,t.height=2,new MA(((n,r)=>{t.toBlob((async e=>{if(t.remove(),e){const r=await gL(e);n({buffer:r,width:t.width,height:t.height})}else r(new uw(lw.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))}),e,1)}))},gL=async e=>{const t=await e.arrayBuffer();return new Uint8Array(t)};var mL,_L,EL,vL,yL,bL,CL,SL,wL,TL,IL,RL,OL,NL,kL,PL,DL,LL,BL,UL,ML,xL,FL,$L,VL,HL,jL,QL,GL,KL,WL,qL,zL,YL,JL,XL,ZL,eB,tB,nB;let rB=(mL=dI({argsMap:(e,t)=>[e.getTrackId(),t],throttleTime:300}),_L=dI({argsMap:(e,t)=>[e.getTrackId(),t]}),EL=nL(),vL=ET("LocalAudioTrack","_enabledMutex"),yL=dI({argsMap:(e,t)=>[e.getTrackId(),t]}),bL=nL(),CL=ET("LocalAudioTrack","_enabledMutex"),SL=dI({argsMap:(e,t)=>[e.getTrackId(),t]}),wL=nL(),TL=nL(),IL=nL(),RL=dI({argsMap:e=>[e.getTrackId()]}),OL=nL(),NL=dI({argsMap:e=>[e.getTrackId()]}),kL=nL(),PL=dI({argsMap:e=>[e.getTrackId()]}),DL=dI({argsMap:(e,t)=>[e.getTrackId(),t.name]}),LL=dI({argsMap:e=>[e.getTrackId()]}),CD((BL=class extends RD{get _source(){return this.initWebAudio()}set _source(e){this._trackSource=e}get processorContext(){return this._processorContext||(this._processorContext=this.initProcessor().processorContext),this._processorContext}get processorDestination(){return this._processorDestination||(this._processorDestination=this.initProcessor().processorDestination),this._processorDestination}get isPlaying(){return this._useAudioElement?tL.isPlaying(this.getTrackId()):this._source.isPlayed}get __className__(){return"LocalAudioTrack"}constructor(e,t,n,r){super(e,n),SD(this,"trackMediaType",cD.AUDIO),SD(this,"_encoderConfig",void 0),SD(this,"_trackSource",void 0),SD(this,"_enabled",!0),SD(this,"_volume",100),SD(this,"_useAudioElement",!0),SD(this,"_bypassWebAudio",!1),SD(this,"processor",void 0),SD(this,"_processorContext",void 0),SD(this,"_processorDestination",void 0),SD(this,"_getOriginVolumeLevel",void 0),this._encoderConfig=t,this._getOriginVolumeLevel=!!r,this._trackSource=new sL,xT("DISABLE_WEBAUDIO")&&(this._bypassWebAudio=!0),xT("LOCAL_AUDIO_TRACK_USES_WEB_AUDIO")&&(this._useAudioElement=!1),xS()&&!ND?setTimeout((()=>this.initWebAudio())):this.initWebAudio()}setVolume(e){pw(e,"volume",0,1e3),this._volume=e,this._source.setVolume(e/100),this._useAudioElement&&tL.setVolume(this.getTrackId(),e);try{if(this._bypassWebAudio)return void oI.debug("[".concat(this.getTrackId(),"] setVolume returned because no pass through WebAudio."));const e=this._source.createOutputTrack();this._mediaStreamTrack!==e&&(this._mediaStreamTrack=e,Vw(this,eD.NEED_REPLACE_TRACK,this).then((()=>{oI.debug("[".concat(this.getTrackId(),"] replace web audio track success"))})).catch((e=>{oI.warning("[".concat(this.getTrackId(),"] replace web audio track failed"),e)})))}catch(t){}}getVolumeLevel(){return this._muted&&this.enabled&&this._getOriginVolumeLevel?this._source.getOriginVolumeLevel():this._source.getAccurateVolumeLevel()}async setPlaybackDevice(e){if(!this._useAudioElement||!MP())throw new uw(lw.NOT_SUPPORTED,"your browser does not support setting the audio output device");await tL.setSinkID(this.getTrackId(),e)}async setEnabled(e,t,n){return this._setEnabled(e,t,n)}async _setEnabled(e,t,n){if(!n){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(oI.info("[".concat(this.getTrackId(),"] start setEnabled"),e),e){this._originMediaStreamTrack.enabled=!0;try{n||(this._enabled=!0),await Vw(this,eD.NEED_ENABLE_TRACK,this),oI.info("[".concat(this.getTrackId(),"] setEnabled to ").concat(e," success"))}catch(r){throw n||(this._enabled=!1),oI.error("[".concat(this.getTrackId(),"] setEnabled to true error"),r.toString()),r}}else{this._originMediaStreamTrack.enabled=!1,n||(this._enabled=!1);try{await Vw(this,eD.NEED_DISABLE_TRACK,this)}catch(r){throw n||(this._enabled=!0),oI.error("[".concat(this.getTrackId(),"] setEnabled to false error"),r.toString()),r}}}async setMuted(e){e!==this._muted&&(this.stateCheck("muted",e),this._muted=e,this._originMediaStreamTrack.enabled=!e,oI.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(e)),e?await Vw(this,eD.NEED_MUTE_TRACK,this):await Vw(this,eD.NEED_UNMUTE_TRACK,this))}getStats(){return Jw((()=>{oI.warning("[deprecated] LocalAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalAudioStats instead")}),"localAudioTrackGetStatsWarning"),Hw(this,eD.GET_STATS)||TD({},uD)}setAudioFrameCallback(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4096;if(!e)return this._source.removeAllListeners(lD.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(t),this._source.removeAllListeners(lD.ON_AUDIO_BUFFER),this._source.on(lD.ON_AUDIO_BUFFER,(t=>e(t)))}play(){oI.debug("[".concat(this.getTrackId(),"] start audio playback")),this._useAudioElement?(oI.debug("[".concat(this.getTrackId(),"] start audio playback in element")),tL.play(this._mediaStreamTrack,this.getTrackId(),this._volume)):this._source.play()}stop(){oI.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._useAudioElement?tL.stop(this.getTrackId()):this._source.stop()}close(){super.close(),this._processorDestination&&this.unbindProcessorDestinationEvents(this._processorDestination),this._processorContext&&this.unbindProcessorContextEvents(this._processorContext),this.unpipe(),this._processorDestination&&this._processorDestination._source&&this._processorDestination._source.unpipe(),this._source.destroy()}_updatePlayerSource(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];oI.debug("[".concat(this.getTrackId(),"] update player source track")),e&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&tL.updateTrack(this.getTrackId(),this._mediaStreamTrack)}async _updateOriginMediaStreamTrack(e,t){this._originMediaStreamTrack!==e&&(this._originMediaStreamTrack&&(this._originMediaStreamTrack.removeEventListener("ended",this._handleTrackEnded),t&&this._originMediaStreamTrack.stop()),e.addEventListener("ended",this._handleTrackEnded),this._originMediaStreamTrack=e,this._muted&&(this._originMediaStreamTrack.enabled=!1),this.processor&&this._processorContext&&this.processor.updateInput({track:e,context:this._processorContext}),this._mediaStreamTrack!==this._source.outputTrack?(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Vw(this,eD.NEED_REPLACE_TRACK,this)):this._source.updateTrack(this._originMediaStreamTrack),this._getOriginVolumeLevel&&this._source.updateOriginTrack(e))}renewMediaStreamTrack(e){return MA.resolve(void 0)}pipe(e){if(this._bypassWebAudio)throw new uw(lw.INVALID_OPERATION,"Can not process AudioTrack when bypassWebAudio set to true.");if(this.processor===e)return e;if(e._source)throw new uw(lw.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),e}unpipe(){var e;if(!this.processor)return;const t=this.processor;null===(e=this._source.processSourceNode)||void 0===e||e.disconnect(),this.processor._source=!1,this.processor=void 0,t.reset()}bindProcessorDestinationEvents(e){e.on(fD.ON_TRACK,(async e=>{e?e!==this._mediaStreamTrack&&(this._mediaStreamTrack=e,this._updatePlayerSource(!1),this._source.processedNode=this._source.createMediaStreamSourceNode(e),await Vw(this,eD.NEED_REPLACE_TRACK,this)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Vw(this,eD.NEED_REPLACE_TRACK,this))})),e.on(fD.ON_NODE,(e=>{this._source.processedNode=e}))}unbindProcessorDestinationEvents(e){e.removeAllListeners(fD.ON_TRACK),e.removeAllListeners(fD.ON_NODE)}bindProcessorContextEvents(e){e.on(gD.REQUEST_CONSTRAINTS,(async e=>{e(this._originMediaStreamTrack.getSettings())}))}unbindProcessorContextEvents(e){e.removeAllListeners(gD.REQUEST_CONSTRAINTS)}initWebAudio(){return this._trackSource instanceof sL&&(this._trackSource=new xD(this._mediaStreamTrack,!1,this._getOriginVolumeLevel?this._mediaStreamTrack:void 0)),this._trackSource}initProcessor(){const e=new aL(this._source.context,this.getTrackId(),"local"),t=new iL(e);return this._processorContext=e,this._processorDestination=t,this.bindProcessorContextEvents(e),this.bindProcessorDestinationEvents(t),this._source.on(lD.UPDATE_SOURCE,(()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:e})})),this._useAudioElement&&(this._useAudioElement=!1,this.isPlaying&&(tL.stop(this.getTrackId()),this._source.play()),Vw(this,eD.NEED_REPLACE_MIXING_TRACK,this).then((()=>{oI.debug("[".concat(this.getTrackId(),"] replace from origin track to web audio track success"))})).catch((e=>{oI.warning("[".concat(this.getTrackId(),"] replace from origin track to web audio track failed"),e)}))),{processorContext:e,processorDestination:t}}}).prototype,"setVolume",[mL],Object.getOwnPropertyDescriptor(BL.prototype,"setVolume"),BL.prototype),CD(BL.prototype,"setPlaybackDevice",[_L,EL],Object.getOwnPropertyDescriptor(BL.prototype,"setPlaybackDevice"),BL.prototype),CD(BL.prototype,"setEnabled",[vL,yL,bL],Object.getOwnPropertyDescriptor(BL.prototype,"setEnabled"),BL.prototype),CD(BL.prototype,"setMuted",[CL,SL,wL],Object.getOwnPropertyDescriptor(BL.prototype,"setMuted"),BL.prototype),CD(BL.prototype,"getStats",[TL],Object.getOwnPropertyDescriptor(BL.prototype,"getStats"),BL.prototype),CD(BL.prototype,"setAudioFrameCallback",[IL],Object.getOwnPropertyDescriptor(BL.prototype,"setAudioFrameCallback"),BL.prototype),CD(BL.prototype,"play",[RL,OL],Object.getOwnPropertyDescriptor(BL.prototype,"play"),BL.prototype),CD(BL.prototype,"stop",[NL,kL],Object.getOwnPropertyDescriptor(BL.prototype,"stop"),BL.prototype),CD(BL.prototype,"close",[PL],Object.getOwnPropertyDescriptor(BL.prototype,"close"),BL.prototype),CD(BL.prototype,"pipe",[DL],Object.getOwnPropertyDescriptor(BL.prototype,"pipe"),BL.prototype),CD(BL.prototype,"unpipe",[LL],Object.getOwnPropertyDescriptor(BL.prototype,"unpipe"),BL.prototype),BL),oB=(UL=dI({argsMap:(e,t)=>[e.getTrackId(),t]}),ML=nL(),xL=ET("MicrophoneAudioTrack","_enabledMutex"),FL=dI({argsMap:(e,t,n)=>[e.getTrackId(),t,n]}),$L=nL(),VL=dI({argsMap:e=>[e.getTrackId()]}),CD((HL=class extends rB{get __className__(){return"MicrophoneAudioTrack"}constructor(e,t,n,r){super(e,t.encoderConfig?JP(t.encoderConfig):{},r,xT("GET_VOLUME_OF_MUTED_AUDIO_TRACK")),SD(this,"_config",void 0),SD(this,"_deviceName","default"),SD(this,"_constraints",void 0),SD(this,"_originalConstraints",void 0),SD(this,"_enabled",!0),this._config=t,this._constraints=n,this._originalConstraints=n,this._deviceName=e.label,"boolean"==typeof t.bypassWebAudio&&(this._bypassWebAudio=t.bypassWebAudio),(YS()||JS())&&kD.bindInterruptDetectorTrack(this)}async setDevice(e){if(oI.info("[".concat(this.getTrackId(),"] start set device to ").concat(e)),this._enabled)try{const n=await zD.getDeviceById(e),r={};r.audio=TD({},this._constraints),r.audio.deviceId={exact:e},this._originMediaStreamTrack.stop();let o=null;try{o=await GD(r,this.getTrackId())}catch(t){throw oI.error("[".concat(this.getTrackId(),"] setDevice failed"),t.toString()),o=await GD({audio:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(o.getAudioTracks()[0],!1),t}await this._updateOriginMediaStreamTrack(o.getAudioTracks()[0],!1),this._deviceName=n.label,this._config.microphoneId=e,this._constraints.deviceId={exact:e}}catch(t){throw oI.error("[".concat(this.getTrackId(),"] setDevice error"),t.toString()),t}else try{const t=await zD.getDeviceById(e);this._deviceName=t.label,this._config.microphoneId=e,this._constraints.deviceId={exact:e}}catch(t){throw oI.error("[".concat(this.getTrackId(),"] setDevice error"),t.toString()),t}oI.info("[".concat(this.getTrackId(),"] set device to ").concat(e," success"))}async setEnabled(e,t,n){if(t)return oI.debug("[".concat(this.getTrackId(),"] setEnabled false (do not close microphone)")),await super._setEnabled(e);if(!n){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(oI.info("[".concat(this.getTrackId(),"] start setEnabled"),e),xT("AUTO_RESET_AUDIO_ROUTE")&&(VS()||ZS())){const t=navigator.audioSession;t&&(e||(t.type="playback"),t.type="auto")}if(!e){var r;this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop(),null===(r=this._source.clonedTrack)||void 0===r||r.stop(),n||(this._enabled=!1);try{await Vw(this,eD.NEED_DISABLE_TRACK,this)}catch(a){throw oI.error("[".concat(this.getTrackId(),"] setEnabled false failed"),a.toString()),a}return}const o=TD({},this._constraints),i=zD.searchDeviceIdByName(this._deviceName);i&&!o.deviceId&&(o.deviceId=i);try{n||(this._enabled=!0);const e=await GD({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(e.getAudioTracks()[0],!1),await Vw(this,eD.NEED_ENABLE_TRACK,this)}catch(a){throw n||(this._enabled=!1),oI.error("[".concat(this.getTrackId(),"] setEnabled true failed"),a.toString()),a}oI.info("[".concat(this.getTrackId(),"] setEnabled success"))}close(){super.close(),(YS()||JS())&&kD.unbindInterruptDetectorTrack(this)}onTrackEnded(){if((VS()||ZS())&&this._enabled&&!this._isClosed&&kD.duringInterruption){const e=async()=>{kD.off(FP.IOS_INTERRUPTION_END,e),this._enabled&&!this._isClosed&&(oI.debug("[".concat(this.getTrackId(),"] try capture microphone media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};kD.on(FP.IOS_INTERRUPTION_END,e)}else oI.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(aD.TRACK_ENDED)}async renewMediaStreamTrack(e){const t=e||this._constraints,n=zD.searchDeviceIdByName(this._deviceName);if(n&&!t.deviceId&&(t.deviceId=n),this._constraints=t,this._enabled){this._originMediaStreamTrack.stop();const e=await GD({audio:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(e.getAudioTracks()[0],!0)}}bindProcessorContextEvents(e){super.bindProcessorContextEvents(e),e.on(gD.REQUEST_UPDATE_CONSTRAINTS,(async(e,t,n)=>{try{const n=Object.assign({},this._originalConstraints,...e);await this.renewMediaStreamTrack(n),t()}catch(r){n(r)}}))}unbindProcessorContextEvents(e){super.unbindProcessorContextEvents(e),e.removeAllListeners(gD.REQUEST_UPDATE_CONSTRAINTS)}}).prototype,"setDevice",[UL,ML],Object.getOwnPropertyDescriptor(HL.prototype,"setDevice"),HL.prototype),CD(HL.prototype,"setEnabled",[xL,FL,$L],Object.getOwnPropertyDescriptor(HL.prototype,"setEnabled"),HL.prototype),CD(HL.prototype,"close",[VL],Object.getOwnPropertyDescriptor(HL.prototype,"close"),HL.prototype),HL),iB=(jL=dI({argsMap:(e,t)=>[e.getTrackId(),t,e.duration]}),QL=nL(),GL=dI({argsMap:e=>[e.getTrackId()]}),KL=nL(),WL=dI({argsMap:e=>[e.getTrackId()]}),qL=nL(),zL=dI({argsMap:e=>[e.getTrackId()]}),YL=nL(),JL=dI({argsMap:e=>[e.getTrackId()]}),XL=nL(),ZL=dI({argsMap:e=>[e.getTrackId()]}),eB=dI({argsMap:e=>[e.getTrackId()]}),tB=nL(),CD((nB=class extends rB{get __className__(){return"BufferSourceAudioTrack"}constructor(e,t,n,r){super(t.createOutputTrack(),n,r),SD(this,"source",void 0),SD(this,"_bufferSource",void 0),this._useAudioElement=!1,this.source=e,this._bufferSource=t,this._bufferSource.on(lD.AUDIO_SOURCE_STATE_CHANGE,(e=>{this.safeEmit(aD.SOURCE_STATE_CHANGE,e)}));try{this._mediaStreamTrack=this._source.createOutputTrack()}catch(o){}}get currentState(){return this._bufferSource.currentState}get duration(){return this._bufferSource.duration}get playbackSpeed(){return this._bufferSource.playbackSpeed}getCurrentTime(){return this._bufferSource.currentTime}startProcessAudioBuffer(e){e&&this._bufferSource.updateOptions(e),this._bufferSource.startProcessAudioBuffer()}pauseProcessAudioBuffer(){this._bufferSource.pauseProcessAudioBuffer()}seekAudioBuffer(e){this._bufferSource.seekAudioBuffer(e)}resumeProcessAudioBuffer(){this._bufferSource.resumeProcessAudioBuffer()}stopProcessAudioBuffer(){this._bufferSource.stopProcessAudioBuffer()}close(){this.source=null,this._bufferSource.destroy(),super.close()}setAudioBufferPlaybackSpeed(e){pw(e,"speed",0),this._bufferSource.setAudioBufferPlaybackSpeed(e)}}).prototype,"startProcessAudioBuffer",[jL,QL],Object.getOwnPropertyDescriptor(nB.prototype,"startProcessAudioBuffer"),nB.prototype),CD(nB.prototype,"pauseProcessAudioBuffer",[GL,KL],Object.getOwnPropertyDescriptor(nB.prototype,"pauseProcessAudioBuffer"),nB.prototype),CD(nB.prototype,"seekAudioBuffer",[WL,qL],Object.getOwnPropertyDescriptor(nB.prototype,"seekAudioBuffer"),nB.prototype),CD(nB.prototype,"resumeProcessAudioBuffer",[zL,YL],Object.getOwnPropertyDescriptor(nB.prototype,"resumeProcessAudioBuffer"),nB.prototype),CD(nB.prototype,"stopProcessAudioBuffer",[JL,XL],Object.getOwnPropertyDescriptor(nB.prototype,"stopProcessAudioBuffer"),nB.prototype),CD(nB.prototype,"close",[ZL],Object.getOwnPropertyDescriptor(nB.prototype,"close"),nB.prototype),CD(nB.prototype,"setAudioBufferPlaybackSpeed",[eB,tB],Object.getOwnPropertyDescriptor(nB.prototype,"setAudioBufferPlaybackSpeed"),nB.prototype),nB);class aB extends rB{get __className__(){return"MixingAudioTrack"}get isActive(){for(const e of this.trackList)if(e._enabled&&!e._isClosed&&!e.muted)return!0;return!1}constructor(){const e=PD().createMediaStreamDestination();super(e.stream.getAudioTracks()[0],void 0,aT(8,"track-mix-")),SD(this,"trackList",void 0),SD(this,"destNode",void 0),this._useAudioElement=!1;try{this._mediaStreamTrack=this._source.createOutputTrack()}catch(t){}this.destNode=e,this.trackList=[]}hasAudioTrack(e){return-1!==this.trackList.indexOf(e)}addAudioTrack(e){-1===this.trackList.indexOf(e)?(oI.debug("add ".concat(e.getTrackId()," to mixing track")),e._source.outputNode.connect(this.destNode),this.trackList.push(e),this.updateEncoderConfig()):oI.debug("track ".concat(e.getTrackId()," is already added"))}removeAudioTrack(e){if(-1!==this.trackList.indexOf(e)){oI.debug("remove ".concat(e.getTrackId()," from mixing track"));try{e._source.outputNode.disconnect(this.destNode)}catch(t){}Gw(this.trackList,e),this.updateEncoderConfig()}}updateEncoderConfig(){const e={};this.trackList.forEach((t=>{t._encoderConfig&&((t._encoderConfig.bitrate||0)>(e.bitrate||0)&&(e.bitrate=t._encoderConfig.bitrate),(t._encoderConfig.sampleRate||0)>(e.sampleRate||0)&&(e.sampleRate=t._encoderConfig.sampleRate),(t._encoderConfig.sampleSize||0)>(e.sampleSize||0)&&(e.sampleSize=t._encoderConfig.sampleSize),t._encoderConfig.stereo&&(e.stereo=!0))})),this._encoderConfig=e}_updateRtpTransceiver(e){this._rtpTransceiver!==e&&(this._rtpTransceiver=e,this.trackList.forEach((t=>{t instanceof aB?t.emit(iD.TRANSCEIVER_UPDATED,e):t._updateRtpTransceiver(e)})))}}class sB extends MD{set currentState(e){e!==this._currentState&&(this._currentState=e,this.safeEmit(lD.AUDIO_SOURCE_STATE_CHANGE,this._currentState))}get currentState(){return this._currentState}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),SD(this,"audioBuffer",void 0),SD(this,"sourceNode",void 0),SD(this,"startPlayTime",0),SD(this,"startPlayOffset",0),SD(this,"pausePlayTime",0),SD(this,"options",void 0),SD(this,"currentLoopCount",0),SD(this,"currentPlaybackSpeed",100),SD(this,"_currentState","stopped"),this.audioBuffer=e,this.options=t,this.startPlayOffset=this.options.startPlayTime||0}createWebAudioDiagram(){return this.context.createGain()}get duration(){return this.audioBuffer?this.audioBuffer.duration:0}get playbackSpeed(){return this.currentPlaybackSpeed}get currentTime(){return this.audioBuffer?"stopped"===this.currentState?0:"paused"===this.currentState?this.pausePlayTime:((this.context.currentTime-this.startPlayTime)*(this.playbackSpeed/100)+this.startPlayOffset)%this.audioBuffer.duration:0}updateOptions(e){"stopped"===this.currentState?(this.options=e,this.startPlayOffset=this.options.startPlayTime||0):oI.warning("can not set audio source options")}startProcessAudioBuffer(){this.sourceNode&&this.stopProcessAudioBuffer(),this.sourceNode=this.createSourceNode(),this.startSourceNode(),this.currentState="playing"}pauseProcessAudioBuffer(){this.sourceNode&&"playing"===this.currentState&&(this.pausePlayTime=this.currentTime,this.sourceNode.onended=null,this.sourceNode.stop(),this.sourceNode.buffer=null,this.sourceNode=this.createSourceNode(),this.currentState="paused")}seekAudioBuffer(e){this.sourceNode&&(this.sourceNode.onended=null,"playing"===this.currentState&&this.sourceNode.stop(),this.sourceNode=this.createSourceNode(),"playing"===this.currentState?(this.startPlayOffset=e,this.startSourceNode()):"paused"===this.currentState&&(this.pausePlayTime=e))}resumeProcessAudioBuffer(){"paused"===this.currentState&&this.sourceNode&&(this.startPlayOffset=this.pausePlayTime,this.pausePlayTime=0,this.startSourceNode(),this.currentState="playing")}stopProcessAudioBuffer(){if(this.sourceNode){this.sourceNode.onended=null;try{this.sourceNode.stop()}catch(mp){}this.reset()}}destroy(){this.audioBuffer=null,super.destroy()}setAudioBufferPlaybackSpeed(e){this.sourceNode&&("playing"===this.currentState&&(this.startPlayOffset=this.currentTime,this.startPlayTime=this.context.currentTime),this.sourceNode.playbackRate.value=e/100),this.currentPlaybackSpeed=e}startSourceNode(){this.sourceNode&&this.sourceNode.buffer&&(this.sourceNode.start(0,this.startPlayOffset),this.startPlayTime=this.context.currentTime,this.sourceNode.onended=this.handleSourceNodeEnded.bind(this))}createSourceNode(){const e=this.context.createBufferSource();return e.buffer=this.audioBuffer,e.loop=!!this.options.loop,e.connect(this.outputNode),e.playbackRate.value=this.currentPlaybackSpeed/100,e}handleSourceNodeEnded(){if(this.currentLoopCount+=1,this.options.cycle&&this.options.cycle>this.currentLoopCount)return this.startPlayOffset=0,this.sourceNode=void 0,void this.startProcessAudioBuffer();this.reset()}reset(){this.startPlayOffset=this.options.startPlayTime||0,this.currentState="stopped",this.sourceNode&&(this.sourceNode.disconnect(),this.sourceNode=void 0),this.currentLoopCount=0}}const cB=new Map;class lB{get rendFrameRate(){if(this.renderStats&&this.renderStats.curTs!==this.renderStats.lastTs){const e=this.renderStats.curTs-this.renderStats.lastTs,t=(this.renderStats.renderNum-this.renderStats.lastRenderNum)/e;return this.renderStats.lastRenderNum=this.renderStats.renderNum,this.renderStats.lastTs=this.renderStats.curTs,t}return 0}get videoElementStatus(){return this._videoElementStatus}set videoElementStatus(e){e!==this._videoElementStatus&&(oI.debug("[".concat(this.trackId,"] video-element-status change ").concat(this._videoElementStatus," => ").concat(e)),this._videoElementStatus=e)}get videoState(){return this._videoState}set videoState(e){var t;e!==this._videoState&&(this._videoState=e,null===(t=this.onVideoStateChanged)||void 0===t||t.call(this,this.videoState))}constructor(e){SD(this,"trackId",void 0),SD(this,"config",void 0),SD(this,"onFirstVideoFrameDecoded",void 0),SD(this,"onVideoStateChanged",void 0),SD(this,"freezeTimeCounterList",[]),SD(this,"renderFreezeAccTime",0),SD(this,"isKeepLastFrame",!1),SD(this,"timeUpdatedCount",0),SD(this,"freezeTime",0),SD(this,"playbackTime",0),SD(this,"lastTimeUpdatedTime",0),SD(this,"autoplayFailed",!1),SD(this,"videoTrack",void 0),SD(this,"videoElement",void 0),SD(this,"cacheVideoElement",void 0),SD(this,"renderStats",void 0),SD(this,"_videoState",vD.VideoStateStopped),SD(this,"videoElementCheckInterval",void 0),SD(this,"videoElementFreezeTimeout",void 0),SD(this,"_videoElementStatus",ED.NONE),SD(this,"isGettingVideoDimensions",!1),SD(this,"startGetVideoDimensions",(()=>{const e=()=>{if(this.isGettingVideoDimensions=!0,this.videoElement.videoWidth*this.videoElement.videoHeight>4)return oI.debug("[".concat(this.trackId,"] current video dimensions:"),this.videoElement.videoWidth,this.videoElement.videoHeight),void(this.isGettingVideoDimensions=!1);setTimeout(e,500)};!this.isGettingVideoDimensions&&e()})),SD(this,"autoResumeAfterInterruption",(()=>{this.videoTrack&&"live"===this.videoTrack.readyState&&"running"===kD.curState&&(oI.debug("[track-".concat(this.trackId,"] video element paused, auto resume for ").concat(BS())),XS()?(this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):(this.videoElement.pause(),this.videoElement.play()))})),SD(this,"handleVideoEvents",(e=>{switch(e.type){case"play":case"playing":this.startGetVideoDimensions(),this.videoElementStatus=ED.PLAYING;break;case"loadeddata":if(this.videoState=vD.VideoStateStarting,this.onFirstVideoFrameDecoded&&this.onFirstVideoFrameDecoded(),this.cacheVideoElement){try{this.cacheVideoElement.srcObject=null,this.cacheVideoElement.remove()}catch(t){}this.cacheVideoElement=void 0}break;case"canplay":this.videoElementStatus=ED.CANPLAY;break;case"stalled":this.videoElementStatus=ED.STALLED;break;case"suspend":this.videoElementStatus=ED.SUSPEND;break;case"pause":this.videoElementStatus=ED.PAUSED,VS()||ZS()||xS()&&this.autoplayFailed||!this.videoTrack||"live"!==this.videoTrack.readyState||(oI.debug("[track-".concat(this.trackId,"] video element paused, auto resume")),this.videoElement.play());break;case"waiting":this.videoElementStatus=ED.WAITING;break;case"abort":this.videoElementStatus=ED.ABORT;break;case"ended":this.videoElementStatus=ED.ENDED;break;case"emptied":this.videoElementStatus=ED.EMPTIED;break;case"error":{const e=this.videoElement.error;e&&(this.videoElementStatus=ED.ERROR,oI.error("[".concat(this.trackId,"] media error: ").concat(e.message," (").concat(e.code,")")));break}case"timeupdate":{const e=performance.now();if(this.timeUpdatedCount+=1,this.timeUpdatedCount<10)return void(this.lastTimeUpdatedTime=e);const t=e-this.lastTimeUpdatedTime,n=this.lastTimeUpdatedTime;if(this.lastTimeUpdatedTime=e,uU.lastVisibleTime<uU.lastHiddenTime||n<uU.lastHiddenTime||n<uU.lastVisibleTime)return;for(t>xT("VIDEO_FREEZE_DURATION")&&(this.freezeTime+=t),this.playbackTime+=t;this.playbackTime>=6e3;){this.playbackTime-=6e3;const e=Math.min(6e3,this.freezeTime);this.freezeTimeCounterList.push(e),this.freezeTime=Math.max(0,this.freezeTime-6e3)}break}}})),SD(this,"autoResumeAfterInterruptionOnIOS15_16",(()=>{this.videoTrack&&"live"===this.videoTrack.readyState&&(oI.debug("[track-".concat(this.trackId,"] video element paused, auto resume for ").concat(BS())),XS()?(this.videoElement.srcObject=null,this.videoElement.srcObject=new MediaStream([this.videoTrack]),this.videoElement.play()):(this.videoElement.pause(),this.videoElement.play()))})),this.trackId=e.trackId,this.config=e,e.element instanceof HTMLVideoElement?this.videoElement=e.element:this.videoElement=document.createElement("video"),kD.on(FP.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),kD.on(FP.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16)}getVideoElement(){return this.videoElement}getContainerElement(){var e;return null!==(e=this.videoElement.parentElement)&&void 0!==e?e:void 0}updateConfig(e){this.config=e,this.trackId=e.trackId,e.element!==this.videoElement&&(this.destroy(),this.videoElement=e.element),this.videoTrack&&this.initVideoElement()}updateVideoTrack(e){this.videoTrack!==e&&(this.videoTrack=e,this.initVideoElement())}play(e){const t=this.videoElement.play();t&&t.catch&&t.catch((t=>{e&&ZD(e,"video",t.message,this.trackId),"NotAllowedError"===t.name?(oI.warning("detected video element autoplay failed",t),this.autoplayFailed=!0,this.handleAutoPlayFailed()):oI.warning("[".concat(this.trackId,"] play warning: "),t)}));const n=PS();if(("Safari"===n.name&&15===Number(n.version)||YS())&&t&&t.then){const e=()=>{this.config.mirror&&(this.videoElement.style.transform="rotateY(180deg)")};t.then(e).catch(e)}}getCurrentFrame(){const e=document.createElement("canvas");e.width=this.videoElement.videoWidth,e.height=this.videoElement.videoHeight;const t=e.getContext("2d");if(!t)return oI.error("create canvas context failed!"),new ImageData(2,2);t.drawImage(this.videoElement,0,0,e.width,e.height);const n=t.getImageData(0,0,e.width,e.height);return e.remove(),n}async getCurrentFrameToUint8Array(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=document.createElement("canvas");n.width=this.videoElement.videoWidth,n.height=this.videoElement.videoHeight;const r=n.getContext("2d");return r?(r.drawImage(this.videoElement,0,0,n.width,n.height),new MA(((r,o)=>{n.toBlob((async e=>{if(n.remove(),e){const t=await gL(e);r({buffer:t,width:n.width,height:n.height})}else o(new uw(lw.CONVERTING_VIDEO_FRAME_TO_BLOB_FAILED))}),e,t<0?.1:t>1?1:t)}))):await fL(e)}destroy(){this.renderStats=void 0,kD.off(FP.IOS_INTERRUPTION_END,this.autoResumeAfterInterruption),kD.off(FP.IOS_15_16_INTERRUPTION_END,this.autoResumeAfterInterruptionOnIOS15_16),this.videoElement.srcObject=null,this.resetVideoElement(),this.freezeTimeCounterList=[],this.videoState=vD.VideoStateStopped}initVideoElement(){if(this.videoElementStatus=ED.INIT,!this.videoElementCheckInterval&&(uB.forEach((e=>{this.videoElement.addEventListener(e,this.handleVideoEvents)})),this.videoElementCheckInterval=window.setInterval((()=>{var e;(e=this.videoElement)!==document.body&&document.body.contains(e)||(this.videoElementStatus=ED.DESTROYED)}),1e3),xT("ENABLE_VIDEO_FRAME_CALLBACK"))){var e,t;let n;const r=()=>{"visible"===document.visibilityState&&(document.removeEventListener("visibilitychange",r),this.videoElementFreezeTimeout=window.setTimeout(o,xT("VIDEO_FREEZE_DURATION")))},o=()=>{this.videoElementFreezeTimeout=void 0,this.videoState===vD.VideoStateDecoding&&("visible"===document.visibilityState?this.videoState=vD.VideoStateFrozen:document.addEventListener("visibilitychange",r))},i=(e,t)=>{if(this.videoElementStatus===ED.PLAYING){if(this.renderStats?(this.renderStats.renderNum++,this.renderStats.curTs=t.mediaTime):this.renderStats={lastTs:t.mediaTime,curTs:t.mediaTime,lastRenderNum:0,renderNum:0},n){const e=t.presentationTime-n.presentationTime;this.videoState===vD.VideoStateStarting&&(this.videoState=vD.VideoStateDecoding),this.videoState===vD.VideoStateDecoding&&this.onVideoStateChanged&&(this.videoElementFreezeTimeout&&window.clearTimeout(this.videoElementFreezeTimeout),this.videoElementFreezeTimeout=window.setTimeout(o,xT("VIDEO_FREEZE_DURATION"))),e<xT("VIDEO_FREEZE_DURATION")&&this.videoState===vD.VideoStateFrozen&&(this.videoState=vD.VideoStateDecoding),e>xT("VIDEO_FREEZE_DURATION")&&uU.lastVisibleTime>=uU.lastHiddenTime&&n.timestamp>uU.lastVisibleTime&&n.timestamp>uU.lastHiddenTime&&(this.renderFreezeAccTime+=e)}n=TD(TD({},t),{},{timestamp:e})}var r,a;xT("ENABLE_VIDEO_FRAME_CALLBACK")&&(null===(r=(a=this.videoElement).requestVideoFrameCallback)||void 0===r||r.call(a,i))};null===(e=(t=this.videoElement).requestVideoFrameCallback)||void 0===e||e.call(t,i)}this.videoElement.controls=!1,this.videoElement.setAttribute("playsinline",""),ow()&&!xT("HIDE_NO_POSTER")&&(this.videoElement.poster="noposter");const n=PS();"Safari"===n.name&&15===Number(n.version)||YS()||!this.config.mirror||(this.videoElement.style.transform="rotateY(180deg)"),this.config.fit?this.videoElement.style.objectFit=this.config.fit:this.videoElement.style.objectFit="cover",this.videoElement.setAttribute("muted",""),this.videoElement.muted=!0,this.videoElement.srcObject&&this.videoElement.srcObject instanceof MediaStream?this.videoElement.srcObject.getVideoTracks()[0]!==this.videoTrack&&(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,$S()&&this.videoElement.load()):(this.videoElement.srcObject=this.videoTrack?new MediaStream([this.videoTrack]):null,$S()&&this.videoElement.load());const r=this.videoElement.play();void 0!==r&&r.catch((e=>{oI.debug("[".concat(this.trackId,"] playback interrupted"),e.toString())}))}resetVideoElement(){uB.forEach((e=>{this.videoElement&&this.videoElement.removeEventListener(e,this.handleVideoEvents)})),this.videoElementCheckInterval&&(window.clearInterval(this.videoElementCheckInterval),this.videoElementCheckInterval=void 0),this.videoElementStatus=ED.NONE}handleAutoPlayFailed(){const e=t=>{t.preventDefault(),this.videoElement.play().then((()=>{oI.debug("[".concat(this.trackId,"] Video element for trackId:").concat(this.trackId," autoplay resumed."))})).catch((e=>{oI.error(e)})),this.autoplayFailed=!1,iw()?document.body.removeEventListener("click",e,!0):(document.body.removeEventListener("touchstart",e,!0),document.body.removeEventListener("mousedown",e,!0))};iw()?document.body.addEventListener("click",e,!0):(document.body.addEventListener("touchstart",e,!0),document.body.addEventListener("mousedown",e,!0)),XD()}}const uB=["play","playing","loadeddata","canplay","pause","stalled","suspend","waiting","abort","emptied","ended","timeupdate","error"];class dB extends lB{constructor(e){super(e),SD(this,"container",void 0),SD(this,"slot",void 0),this.slot=e.element,this.updateConfig(e)}updateConfig(e){this.config=e,this.trackId=e.trackId;const t=e.element;t!==this.slot&&(this.destroy(),this.slot=t),this.createElements()}updateVideoTrack(e){this.videoTrack!==e&&(this.videoTrack=e,this.createElements())}play(e){var t;null!==(t=this.container)&&void 0!==t&&t.contains(this.videoElement)&&super.play(e)}getCurrentFrame(){var e;return null!==(e=this.container)&&void 0!==e&&e.contains(this.videoElement)?super.getCurrentFrame():new ImageData(2,2)}async getCurrentFrameToUint8Array(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return null!==(t=this.container)&&void 0!==t&&t.contains(this.videoElement)?await super.getCurrentFrameToUint8Array(e,n):await fL(e)}destroy(){if(super.destroy(),this.videoElement.remove(),this.videoElement=document.createElement("video"),this.container){try{this.container.remove(),this.slot.removeChild(this.container)}catch(mp){}this.container=void 0}}createElements(){this.container||(this.container=document.createElement("div")),this.container.id="agora-video-player-".concat(this.trackId),this.container.style.width="100%",this.container.style.height="100%",this.container.style.position="relative",this.container.style.overflow="hidden",this.videoTrack?(this.container.style.backgroundColor="black",xT("KEEP_LAST_FRAME")&&this.isKeepLastFrame&&this.videoElement.paused&&this.resetVideoElement(),this.mountedVideoElement()):this.unmountedVideoElement(),this.slot.appendChild(this.container)}mountedVideoElement(){var e;!this.container||null!==(e=this.container)&&void 0!==e&&e.contains(this.videoElement)||this.container.appendChild(this.videoElement),super.initVideoElement(),this.videoElement.id="video_".concat(this.trackId),this.videoElement.className="agora_video_player",this.videoElement.style.width="100%",this.videoElement.style.height="100%",this.videoElement.style.position="absolute",this.videoElement.style.left="0",this.videoElement.style.top="0"}unmountedVideoElement(){var e;if(null!==(e=this.container)&&void 0!==e&&e.contains(this.videoElement)){super.resetVideoElement();try{this.container&&this.container.removeChild(this.videoElement)}catch(t){}this.videoElement=document.createElement("video")}}resetVideoElement(){var e;null!==(e=this.container)&&void 0!==e&&e.contains(this.videoElement)&&(super.resetVideoElement(),this.cacheVideoElement=this.videoElement,this.videoElement=document.createElement("video"))}getContainerElement(){return this.container}}var AB,pB,hB,fB,gB,mB,_B,EB,vB,yB,bB,CB,SB,wB,TB,IB,RB,OB,NB,kB,PB,DB,LB,BB,UB,MB,xB,FB,$B,VB,HB,jB,QB,GB;let KB=(AB=dI({argsMap:(e,t,n)=>[e.getTrackId(),"string"==typeof t?t:t instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement",n]}),pB=nL(),hB=dI({argsMap:e=>[e.getTrackId()]}),fB=ET("LocalVideoTrack","_enabledMutex"),gB=dI({argsMap:(e,t)=>[e.getTrackId(),t]}),mB=nL(),_B=ET("LocalVideoTrack","_enabledMutex"),EB=dI({argsMap:(e,t)=>[e.getTrackId(),t]}),vB=nL(),yB=dI({argsMap:(e,t)=>[e.getTrackId(),t]}),bB=nL(),CB=nL(),SB=dI({argsMap:(e,t,n)=>[e.getTrackId(),t,n]}),wB=nL(),TB=nL(),IB=nL(),RB=nL(),OB=nL(),NB=nL(),kB=nL(),PB=dI({argsMap:(e,t)=>[e.getTrackId(),t.name]}),DB=dI({argsMap:e=>[e.getTrackId()]}),LB=dI({argsMap:e=>[e.getTrackId()]}),BB=dI({argsMap:(e,t,n)=>[e.getTrackId(),t.label,n]}),UB=class e extends RD{get videoHeight(){if(xS()){const{height:e}=this._mediaStreamTrack.getSettings();return this._videoHeight=e,this._videoHeight}return this._videoHeight}get videoWidth(){if(xS()){const{width:e}=this._mediaStreamTrack.getSettings();return this._videoWidth=e,this._videoWidth}return this._videoWidth}get isPlaying(){return!(!this._player||this._player.videoElementStatus!==ED.PLAYING)}get processorDestination(){return this._processorDestination}get processorContext(){return this._processorContext}set processorContext(e){this._processorContext=e}get __className__(){return"LocalVideoTrack"}constructor(e,t,n,r,o,i){if(super(e,o),SD(this,"trackMediaType",cD.VIDEO),SD(this,"_player",void 0),SD(this,"isUseScaleResolutionDownBy",!1),SD(this,"_videoVisibleTimer",null),SD(this,"_previousVideoVisibleStatus",void 0),SD(this,"_clearPreviousVideoVisibleStatus",(()=>this._previousVideoVisibleStatus=void 0)),SD(this,"_encoderConfig",void 0),SD(this,"_scalabilityMode",{numSpatialLayers:1,numTemporalLayers:1}),SD(this,"_optimizationMode",void 0),SD(this,"_videoHeight",void 0),SD(this,"_videoWidth",void 0),SD(this,"_forceBitrateLimit",void 0),SD(this,"_enabled",!0),SD(this,"_processorDestination",void 0),SD(this,"_processorContext",void 0),xS()){const{width:t,height:n}=e.getSettings();this._videoWidth=t,this._videoHeight=n}else this.updateMediaStreamTrackResolution();if(this._encoderConfig=t,this._scalabilityMode=n,this._optimizationMode=r,this._hints=i||[],-1===this._hints.indexOf(tD.SCREEN_TRACK))this.updateBitrateFromProfile();else if(function(e,t){const n=PS();return!(n.name!==e||!n.osVersion)&&Number(n.version)===t}(RS.CHROME,115)&&-1!==LS().indexOf("Windows")){const t=function(e){if("VideoFrame"in window&&"TransformStream"in window&&UP().supportWebRTCInsertableStream){const t=new MediaStreamTrackProcessor(e),n=new MediaStreamTrackGenerator({kind:"video"});let r,o,i=Date.now();const a=()=>{s&&(clearInterval(s),s=void 0),r&&(r.close(),r=void 0),e.stop(),o=void 0,n.removeEventListener("ended",a)};let s=window.setInterval((()=>{if(o&&r&&Date.now()-i>1e3)try{"live"===n.readyState?o.enqueue(r.clone()):a()}catch(e){a()}}),1e3);const c=new TransformStream({transform:(e,t)=>{"live"===n.readyState?(o=t,i=Date.now(),void 0===r?(r=e,t.enqueue(e.clone())):(t.enqueue(r),r=e)):e.close()}});return n.addEventListener("ended",a),t.readable.pipeThrough(c).pipeTo(n.writable),n}}(e);t&&(oI.info("local screen video track begin to inject frame"),this._mediaStreamTrack=t)}t&&-1!==this._hints.indexOf(tD.CUSTOM_TRACK)&&this.setEncoderConfiguration(t),this._processorContext=new oL(this.getTrackId(),"local"),this._processorDestination=new rL(this.processorContext),this.bindProcessorDestinationEvents()}play(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof e){const t=document.getElementById(e);t?e=t:(oI.warning("[".concat(this.getTrackId(),'] can not find "#').concat(e,'" element, use document.body')),e=document.body)}oI.debug("[".concat(this.getTrackId(),"] start video playback in ").concat(e instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement"),JSON.stringify(t));const n=TD(TD(TD({},this._getDefaultPlayerConfig()),t),{},{trackId:this.getTrackId(),element:e});this._player?this._player.updateConfig(n):(e instanceof HTMLVideoElement?this._player=new lB(n):this._player=new dB(n),this._player.updateVideoTrack(this._mediaStreamTrack)),this._player.play(),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval((()=>{try{const e=this.getVideoElementVisibleStatus();this.safeEmit(aD.VIDEO_ELEMENT_VISIBLE_STATUS,e)}catch(e){}}),xT("CHECK_VIDEO_VISIBLE_INTERVAL"))}stop(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,oI.debug("[".concat(this.getTrackId(),"] stop video playback")))}async setEnabled(e,t){if(!t){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(oI.info("[".concat(this.getTrackId(),"] start setEnabled"),e),!e){this._originMediaStreamTrack.enabled=!1;try{await Vw(this,eD.NEED_DISABLE_TRACK,this)}catch(n){throw oI.error("[".concat(this.getTrackId(),"] setEnabled to false error"),n.toString()),n}return t||(this._enabled=!1),void oI.info("[".concat(this.getTrackId(),"] setEnabled to false success"))}this._originMediaStreamTrack.enabled=!0;try{await Vw(this,eD.NEED_ENABLE_TRACK,this)}catch(n){throw oI.error("[".concat(this.getTrackId(),"] setEnabled to true error"),n.toString()),n}oI.info("[".concat(this.getTrackId(),"] setEnabled to true success")),t||(this._enabled=!0)}async setMuted(e){e!==this._muted&&(this.stateCheck("muted",e),this._muted=e,this._originMediaStreamTrack.enabled=!e,oI.debug("[".concat(this.getTrackId(),"] start set muted: ").concat(e)),e?await Vw(this,eD.NEED_MUTE_TRACK,this):await Vw(this,eD.NEED_UNMUTE_TRACK,this))}async setEncoderConfiguration(e,t){if(!this._enabled)throw new uw(lw.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");if(e=WP(e),this._forceBitrateLimit&&(e.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:e.bitrateMax,e.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:e.bitrateMin),e.width||e.height||e.frameRate){const t=uL({encoderConfig:e});(xS()||VS()||ZS())&&(t.deviceId=void 0),oI.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(e),JSON.stringify(t));try{await this._originMediaStreamTrack.applyConstraints(t),this.updateMediaStreamTrackResolution()}catch(n){const e=new uw(lw.UNEXPECTED_ERROR,n.toString());throw oI.error("[".concat(this.getTrackId(),"] applyConstraints error"),e.toString()),e}}this._encoderConfig=e,-1===this._hints.indexOf(tD.SCREEN_TRACK)&&this.updateBitrateFromProfile();try{await Vw(this,eD.NEED_UPDATE_VIDEO_ENCODER,this)}catch(n){return n.throw(oI)}}getStats(){return Jw((()=>{oI.warning("[deprecated] LocalVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getLocalVideoStats instead")}),"localVideoTrackGetStatsWarning"),Hw(this,eD.GET_STATS)||TD({},dD)}async setBeautyEffect(e){oI.error("LocalVideoTrack.setBeautyEffect was deprecated, please migrate to agora-extension-beauty-effect")}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}async getCurrentFrameImage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._player?this._player.getCurrentFrameToUint8Array(e,t):await fL(e)}async setBitrateLimit(e){if(oI.debug("[".concat(this.getTrackId(),"] set bitrate limit, ").concat(JSON.stringify(e))),e){this._forceBitrateLimit=e,this._encoderConfig&&(this._encoderConfig.bitrateMax?this._encoderConfig.bitrateMax=this._encoderConfig.bitrateMax<e.max_bitrate?this._encoderConfig.bitrateMax:e.max_bitrate:this._encoderConfig.bitrateMax=e.max_bitrate,this._encoderConfig.bitrateMin,this._encoderConfig.bitrateMin=e.min_bitrate);try{await Vw(this,eD.NEED_UPDATE_VIDEO_ENCODER,this)}catch(t){return t.throw(oI)}}}async setOptimizationMode(e){if("motion"!==e&&"detail"!==e&&"balanced"!==e)return void oI.error(lw.INVALID_PARAMS,"optimization mode must be motion, detail or balanced");const t=this._optimizationMode;try{this._optimizationMode=e,await Vw(this,eD.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this)}catch(n){throw this._optimizationMode=t,oI.error("[".concat(this.getTrackId(),"] set optimization mode failed"),n.toString()),n}oI.info("[".concat(this.getTrackId(),"] set optimization mode success (").concat(e,")"))}setScalabiltyMode(e){if(1===e.numSpatialLayers&&1!==e.numTemporalLayers)return oI.error(lw.INVALID_PARAMS,"scalability mode currently not supported, no SVC."),void(this._scalabilityMode={numSpatialLayers:1,numTemporalLayers:1});this._scalabilityMode=e,oI.info("[".concat(this.getTrackId(),"] set scalability mode success (").concat(e,")"))}updateMediaStreamTrackResolution(){lL(this._originMediaStreamTrack).then((e=>{let[t,n]=e;this._videoHeight=n,this._videoWidth=t})).catch(cT)}_updatePlayerSource(){this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}_getDefaultPlayerConfig(){return{fit:"contain"}}async setSenderConfiguration(e){if(!this._enabled)throw new uw(lw.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");oI.debug("[".concat(this.getTrackId(),"] setSenderConfiguration applyConstraints"),JSON.stringify(e)),e=WP(e),this._forceBitrateLimit&&(e.bitrateMax=this._forceBitrateLimit.max_bitrate?this._forceBitrateLimit.max_bitrate:e.bitrateMax,e.bitrateMin=this._forceBitrateLimit.min_bitrate?this._forceBitrateLimit.min_bitrate:e.bitrateMin),this._encoderConfig=e,-1===this._hints.indexOf(tD.SCREEN_TRACK)&&this.updateBitrateFromProfile();try{await Vw(this,eD.NEED_UPDATE_VIDEO_ENCODER,this)}catch(t){return t.throw(oI)}}updateBitrateFromProfile(){if(!this._encoderConfig)return;const{width:e,height:t,frameRate:n}=this.getMediaStreamTrackSettings();if(!e||!t||!n)return;const{bitrateMax:r,bitrateMin:o}=this._encoderConfig;if(null==o||null==r){const{max:i,min:a}=function(e,t,n,r,o){const i=xT("BITRATE_ADAPTER_TYPE");if("DEFAULT_BITRATE"===i)return{min:r,max:o};if(void 0===o){var a;const s=Math.floor(200*Math.pow(n/15,.6)*Math.pow(e*t/640/360,.75));o="STANDARD_BITRATE"===i?4*s:2*s,r=null!==(a=r)&&void 0!==a?a:s}else{var s;r=null!==(s=r)&&void 0!==s?s:Math.floor(o/10)}return{min:r,max:o}}(e,t,n,o,r);this._encoderConfig.bitrateMin=a,this._encoderConfig.bitrateMax=i,oI.debug("[".concat(this.getTrackId(),"] update bitrate from profile, [w: ").concat(e,", h: ").concat(t,", fps: ").concat(n,"] => [brMax: ").concat(i,", brMin: ").concat(a,"]"))}}getVideoElementVisibleStatus(){try{var e,t;const n=null==this||null===(e=this._player)||void 0===e?void 0:e.getContainerElement(),r={track:this,element:null==this||null===(t=this._player)||void 0===t?void 0:t.getVideoElement(),slot:null==n?void 0:n.parentElement},{element:o,slot:i}=r;if(this.isPlaying&&o instanceof HTMLVideoElement&&i instanceof HTMLElement){const e=yw.checkOneElementVisible(o),t=Object.assign({},e);if(t.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=t.visible;const e=AI.reportApiInvoke(null,{tag:Ow.TRACER,name:Rw.LOCAL_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});t.visible?e.onSuccess("Video is visible"):e.onSuccess("Invisible because of ".concat(t.reason))}return t}return}catch(n){throw new uw(lw.GET_VIDEO_ELEMENT_VISIBLE_ERROR,n.message)}}async renewMediaStreamTrack(e){}pipe(e){if(this.processor===e)return e;if(e._source)throw new uw(lw.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),e}unpipe(){if(!this.processor)return;const e=this.processor;this.processor._source=void 0,this.processor=void 0,e.reset()}close(){super.close(),this.unbindProcessorDestinationEvents(),this.unbindProcessorContextEvents(),this.unpipe(),this.processorDestination._source&&this.processorDestination._source.unpipe()}clone(t){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this._encoderConfig;t&&(r=TD(TD({},r),WP(t))),r=zw(r);const o=aT(8,"track-video-cloned-"),i=new e(n?this._mediaStreamTrack.clone():this._mediaStreamTrack,r,zw(this._scalabilityMode),this._optimizationMode,o,zw(this._hints));return t&&r&&i.setEncoderConfiguration(r),oI.debug("clone video track from ".concat(this.getTrackId()," to ").concat(o,", clone ").concat(n)),i}async replaceTrack(e,t){if(!(e instanceof MediaStreamTrack))throw new uw(lw.INVALID_PARAMS,"track should be an instance of MediaStreamTrack");if("video"!==e.kind)throw new uw(lw.INVALID_PARAMS,"track should be a video MediaStreamTrack");await this._updateOriginMediaStreamTrack(e,t,!0),this.updateMediaStreamTrackResolution()}sendSeiData(e){if(Jw((()=>{AI.reportApiInvoke(null,{name:Rw.LOCAL_VIDEO_SEND_SEI_DATA,options:[],tag:Ow.TRACER}).onSuccess("")}),this._mediaStreamTrack.id||this.getTrackId()),!xT("ENABLE_VIDEO_SEI")||!xT("ENABLE_ENCODED_TRANSFORM"))return void oI.warning('To send/receive SEI, please call AgoraRTC.setParameter("ENABLE_VIDEO_SEI", true) before instantiate IAgoraRtcClient');if(e instanceof Uint8Array==0)return new uw(lw.INVALID_PARAMS,"Invalid argument type, ILocalVideoTrack.sendSeiData() only accept Uint8Array argument.").throw();const t=this.getRTCRtpTransceiver();if(!t)return void oI.warning("Video track is not published, SEI can not be send");const n=t.sender.getParameters();if(0===n.codecs.length)return;const r=n.codecs[0].mimeType.toLocaleLowerCase();"video/h264"===r?this.safeEmit("sei-to-send",e):oI.warning("SEI is not supported by ".concat(r))}bindProcessorDestinationEvents(){this.processorDestination.on(fD.ON_TRACK,(async e=>{e?e!==this._mediaStreamTrack&&(this._mediaStreamTrack=e,this._updatePlayerSource(),await Vw(this,eD.NEED_REPLACE_TRACK,this)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource(),await Vw(this,eD.NEED_REPLACE_TRACK,this))}))}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(fD.ON_TRACK)}unbindProcessorContextEvents(){this.processorContext.removeAllListeners(gD.REQUEST_UPDATE_CONSTRAINTS),this.processorContext.removeAllListeners(gD.REQUEST_CONSTRAINTS)}},CD(UB.prototype,"play",[AB,pB],Object.getOwnPropertyDescriptor(UB.prototype,"play"),UB.prototype),CD(UB.prototype,"stop",[hB],Object.getOwnPropertyDescriptor(UB.prototype,"stop"),UB.prototype),CD(UB.prototype,"setEnabled",[fB,gB,mB],Object.getOwnPropertyDescriptor(UB.prototype,"setEnabled"),UB.prototype),CD(UB.prototype,"setMuted",[_B,EB,vB],Object.getOwnPropertyDescriptor(UB.prototype,"setMuted"),UB.prototype),CD(UB.prototype,"setEncoderConfiguration",[yB,bB],Object.getOwnPropertyDescriptor(UB.prototype,"setEncoderConfiguration"),UB.prototype),CD(UB.prototype,"getStats",[CB],Object.getOwnPropertyDescriptor(UB.prototype,"getStats"),UB.prototype),CD(UB.prototype,"setBeautyEffect",[SB,wB],Object.getOwnPropertyDescriptor(UB.prototype,"setBeautyEffect"),UB.prototype),CD(UB.prototype,"getCurrentFrameData",[TB],Object.getOwnPropertyDescriptor(UB.prototype,"getCurrentFrameData"),UB.prototype),CD(UB.prototype,"getCurrentFrameImage",[IB],Object.getOwnPropertyDescriptor(UB.prototype,"getCurrentFrameImage"),UB.prototype),CD(UB.prototype,"setBitrateLimit",[RB],Object.getOwnPropertyDescriptor(UB.prototype,"setBitrateLimit"),UB.prototype),CD(UB.prototype,"setOptimizationMode",[OB],Object.getOwnPropertyDescriptor(UB.prototype,"setOptimizationMode"),UB.prototype),CD(UB.prototype,"setScalabiltyMode",[NB],Object.getOwnPropertyDescriptor(UB.prototype,"setScalabiltyMode"),UB.prototype),CD(UB.prototype,"updateMediaStreamTrackResolution",[kB],Object.getOwnPropertyDescriptor(UB.prototype,"updateMediaStreamTrackResolution"),UB.prototype),CD(UB.prototype,"pipe",[PB],Object.getOwnPropertyDescriptor(UB.prototype,"pipe"),UB.prototype),CD(UB.prototype,"unpipe",[DB],Object.getOwnPropertyDescriptor(UB.prototype,"unpipe"),UB.prototype),CD(UB.prototype,"close",[LB],Object.getOwnPropertyDescriptor(UB.prototype,"close"),UB.prototype),CD(UB.prototype,"replaceTrack",[BB],Object.getOwnPropertyDescriptor(UB.prototype,"replaceTrack"),UB.prototype),UB),WB=(MB=dI({argsMap:(e,t)=>[e.getTrackId(),t]}),xB=nL(),FB=ET("CameraVideoTrack","_enabledMutex"),$B=dI({argsMap:(e,t)=>[e.getTrackId(),t]}),VB=nL(),HB=dI({argsMap:(e,t)=>[e.getTrackId(),t]}),jB=nL(),QB=dI({argsMap:e=>[e.getTrackId()]}),GB=class e extends KB{get __className__(){return"CameraVideoTrack"}constructor(e,t,n,r,o,i){super(e,WP(t.encoderConfig),r,o,i),SD(this,"_config",void 0),SD(this,"_originalConstraints",void 0),SD(this,"_constraints",void 0),SD(this,"_enabled",!0),SD(this,"_deviceName","default"),SD(this,"tryResumeVideoForIOS15_16WeChat",(async()=>{(YS()||JS())&&!function(){const e=PS();if(e.os!==IS.IOS||!e.osVersion)return!1;const t=e.osVersion.split(".");return 15===Number(t[0])&&Number(t[1])>=2}()&&ew()&&this._enabled&&!this._isClosed&&(oI.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS 15 device on WeChat.")),await this.renewMediaStreamTrack())})),this._config=t,this._originalConstraints=n,this._constraints=n,this._deviceName=e.label,this._encoderConfig=WP(this._config.encoderConfig),kD.on(FP.IOS_15_16_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),kD.on(FP.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),this.bindProcessorContextEvents()}async setDevice(e){return"string"==typeof e?this._setDeviceById(e):e.deviceId?this._setDeviceById(e.deviceId):e.facingMode?this._setDeviceByFacingModel(e.facingMode):void 0}async _setDeviceById(e){if(oI.info("[".concat(this.getTrackId(),"] set device to ").concat(e)),this._enabled)try{const n=await zD.getDeviceById(e),r={};r.video=TD({},this._constraints),r.video.deviceId={exact:e},r.video.facingMode=void 0,this._originMediaStreamTrack.stop();let o=null;try{o=await GD(r,this.getTrackId())}catch(t){throw oI.error("[".concat(this.getTrackId(),"] setDevice failed"),t.toString()),o=await GD({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(o.getVideoTracks()[0],!1),t}await this._updateOriginMediaStreamTrack(o.getVideoTracks()[0],!1),this.updateMediaStreamTrackResolution(),this._deviceName=n.label,this._config.cameraId=e,this._constraints.deviceId={exact:e}}catch(t){throw oI.error("[".concat(this.getTrackId(),"] setDevice error"),t.toString()),t}else try{const t=await zD.getDeviceById(e);this._deviceName=t.label,this._config.cameraId=e,this._constraints.deviceId={exact:e}}catch(t){throw oI.error("[".concat(this.getTrackId(),"] setDevice error"),t.toString()),t}oI.info("[".concat(this.getTrackId(),"] setDevice success"))}async _setDeviceByFacingModel(e){oI.info("[".concat(this.getTrackId(),"] set facingMode ").concat(e));const t={video:TD(TD({},this._constraints),{},{deviceId:void 0,facingMode:{exact:e}})};if(this._enabled){this._originMediaStreamTrack.stop();let e=null;try{e=await GD(t,this.getTrackId())}catch(n){throw oI.error("[".concat(this.getTrackId(),"] setDeviceByFacingModel failed"),n.toString()),e=await GD({video:this._constraints},this.getTrackId()),await this._updateOriginMediaStreamTrack(e.getVideoTracks()[0],!1),n}await this._updateOriginMediaStreamTrack(e.getVideoTracks()[0],!1),this.updateMediaStreamTrackResolution()}this._deviceName="",this._config.facingMode=e,this._config.cameraId=void 0,this._constraints=TD({},t.video),oI.info("[".concat(this.getTrackId(),"] setDeviceByFacingModel success"))}async setEnabled(e,t){if(!t){if(e===this._enabled)return;this.stateCheck("enabled",e)}if(oI.info("[".concat(this.getTrackId(),"] start setEnabled"),e),e){try{if(this.isExternalTrack)this._originMediaStreamTrack.enabled=!0;else{const e=await GD({video:this._constraints},this.getTrackId());await this._updateOriginMediaStreamTrack(e.getVideoTracks()[0],!1)}await Vw(this,eD.NEED_ENABLE_TRACK,this)}catch(n){throw oI.error("[".concat(this.getTrackId(),"] setEnabled true error"),n.toString()),n}this.updateMediaStreamTrackResolution(),oI.info("[".concat(this.getTrackId(),"] setEnabled to true success")),t||(this._enabled=!0)}else{this.isExternalTrack?this._originMediaStreamTrack.enabled=!1:(this._originMediaStreamTrack.onended=null,this._originMediaStreamTrack.stop()),t||(this._enabled=!1);try{await Vw(this,eD.NEED_DISABLE_TRACK,this)}catch(n){throw oI.error("[".concat(this.getTrackId(),"] setEnabled to false error"),n.toString()),n}oI.info("[".concat(this.getTrackId(),"] setEnabled to false success"))}}async setEncoderConfiguration(e,t){if(!this._enabled)throw new uw(lw.TRACK_IS_DISABLED,"can not set encoder configuration when track is disabled");e=WP(e),this._forceBitrateLimit&&(e.bitrateMax=this._forceBitrateLimit.max_bitrate||e.bitrateMax,e.bitrateMin=this._forceBitrateLimit.min_bitrate||e.bitrateMin);const n=qw(this._config);n.encoderConfig=e;const r=uL(n);(xS()||VS()||ZS())&&(r.deviceId=void 0),oI.debug("[".concat(this.getTrackId(),"] setEncoderConfiguration applyConstraints"),JSON.stringify(e),JSON.stringify(r));try{await this._originMediaStreamTrack.applyConstraints(r),this.updateMediaStreamTrackResolution()}catch(o){const e=new uw(lw.UNEXPECTED_ERROR,o.toString());throw oI.error("[".concat(this.getTrackId(),"] applyConstraints error"),e.toString()),e}this._config=n,this._constraints=r,this._originalConstraints=r,this._encoderConfig=e,-1===this._hints.indexOf(tD.SCREEN_TRACK)&&this.updateBitrateFromProfile();try{await Vw(this,eD.NEED_UPDATE_VIDEO_ENCODER,this)}catch(o){return o.throw(oI)}}_getDefaultPlayerConfig(){return{mirror:!0,fit:"cover"}}onTrackEnded(){if((VS()||ZS())&&this._enabled&&!this._isClosed&&kD.duringInterruption){const e=async()=>{kD.off(FP.IOS_INTERRUPTION_END,e),this._enabled&&!this._isClosed&&(oI.debug("[".concat(this.getTrackId(),"] try capture camera media device for interrupted iOS device.")),await this.setEnabled(!1),await this.setEnabled(!0))};kD.on(FP.IOS_INTERRUPTION_END,e)}else oI.debug("[".concat(this.getTrackId(),"] track ended")),this.safeEmit(aD.TRACK_ENDED)}async renewMediaStreamTrack(e){const t=e||this._constraints,n=zD.searchDeviceIdByName(this._deviceName);if(n&&!t.deviceId&&(t.deviceId={exact:n}),this._enabled){const e=await GD({video:t},this.getTrackId());this._constraints=t,await this._updateOriginMediaStreamTrack(e.getVideoTracks()[0],!0),this.updateMediaStreamTrackResolution()}}close(){super.close(),kD.off(FP.IOS_15_16_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat),kD.off(FP.IOS_INTERRUPTION_END,this.tryResumeVideoForIOS15_16WeChat)}clone(t){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this._encoderConfig;t&&(r=TD(TD({},r),WP(t))),r=zw(r);const o=aT(8,"track-cam-cloned-"),i=new e(n?this._mediaStreamTrack.clone():this._mediaStreamTrack,zw(TD(TD({},this._config),{},{encoderConfig:r})),zw(this._constraints),zw(this._scalabilityMode),this._optimizationMode,o);return t&&r&&i.setEncoderConfiguration(r),oI.debug("clone track from ".concat(this.getTrackId()," to ").concat(o,", clone ").concat(n)),i}bindProcessorContextEvents(){this.processorContext.on(gD.REQUEST_UPDATE_CONSTRAINTS,(async(e,t,n)=>{try{const n=Object.assign({},this._originalConstraints,...e);await this.renewMediaStreamTrack(n),t()}catch(r){n(r)}})),this.processorContext.on(gD.REQUEST_CONSTRAINTS,(async e=>{e(this._originMediaStreamTrack.getSettings())}))}},CD(GB.prototype,"setDevice",[MB,xB],Object.getOwnPropertyDescriptor(GB.prototype,"setDevice"),GB.prototype),CD(GB.prototype,"setEnabled",[FB,$B,VB],Object.getOwnPropertyDescriptor(GB.prototype,"setEnabled"),GB.prototype),CD(GB.prototype,"setEncoderConfiguration",[HB,jB],Object.getOwnPropertyDescriptor(GB.prototype,"setEncoderConfiguration"),GB.prototype),CD(GB.prototype,"close",[QB],Object.getOwnPropertyDescriptor(GB.prototype,"close"),GB.prototype),GB);function qB(e,t,n,r){n.optimizationMode&&(r&&r.width&&r.height?(n.encoderConfig=TD(TD({},r),{},{bitrateMin:r.bitrateMin,bitrateMax:r.bitrateMax}),"motion"!==n.optimizationMode&&"detail"!==n.optimizationMode||(t.contentHint=n.optimizationMode,t.contentHint===n.optimizationMode?oI.debug("[".concat(e,"] set content hint to"),n.optimizationMode):oI.debug("[".concat(e,"] set content hint failed")))):oI.warning("[".concat(e,"] can not apply optimization mode bitrate config, no encoderConfig")))}var zB,YB,JB,XB,ZB,eU,tU,nU,rU,oU,iU,aU;class sU extends ID{getUserId(){return this._userId}constructor(e,t,n,r){super(e,"track-".concat(e.kind,"-").concat(t,"-").concat(r.clientId,"_").concat(aT(5,""))),SD(this,"_userId",void 0),SD(this,"_uintId",void 0),SD(this,"_isDestroyed",!1),SD(this,"store",void 0),SD(this,"processor",void 0),SD(this,"processorContext",void 0),this._userId=t,this._uintId=n,this.store=r}_updateOriginMediaStreamTrack(e){this._originMediaStreamTrack=e,this._mediaStreamTrack=e,this._updatePlayerSource(),this.processor&&this.processor.updateInput({track:this._originMediaStreamTrack,context:this.processorContext})}_destroy(){this._isDestroyed=!0,oI.info("[".concat(this.getTrackId(),"] is destroyed")),this.stop(),super.close()}getProcessorStats(){return this.processorContext.gatherStats()}getProcessorUsage(){return this.processorContext.gatherUsage()}}let cU=(zB=dI({argsMap:(e,t,n)=>[e.getTrackId(),"string"==typeof t?t:t instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement",n]}),YB=dI({argsMap:e=>[e.getTrackId()]}),JB=dI({argsMap:(e,t)=>[e.getTrackId(),t.name]}),XB=dI({argsMap:e=>[e.getTrackId()]}),CD((ZB=class extends sU{get isPlaying(){return!(!this._player||this._player.videoElementStatus!==ED.PLAYING)}get __className__(){return"RemoteVideoTrack"}constructor(e,t,n,r){super(e,t,n,r),SD(this,"_videoVisibleTimer",null),SD(this,"_previousVideoVisibleStatus",void 0),SD(this,"_clearPreviousVideoVisibleStatus",(()=>this._previousVideoVisibleStatus=void 0)),SD(this,"trackMediaType",cD.VIDEO),SD(this,"_videoWidth",void 0),SD(this,"_videoHeight",void 0),SD(this,"_player",void 0),SD(this,"processorDestination",void 0),SD(this,"processorContext",void 0),this.updateMediaStreamTrackResolution(),this.processorContext=new oL(this.getTrackId(),"remote"),this.processorDestination=new rL(this.processorContext),this.bindProcessorDestinationEvents()}getStats(){return Jw((()=>{oI.warning("[deprecated] RemoteVideoTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteVideoStats instead")}),"remoteVideoTrackGetStatsWarning"),Hw(this,eD.GET_STATS)||TD({},hD)}play(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof e){const t=document.getElementById(e);t?e=t:(oI.warning("[".concat(this.getTrackId(),'] can not find "#').concat(e,'" element, use document.body')),e=document.body)}oI.debug("[".concat(this.getTrackId(),"] start video playback in ").concat(e instanceof HTMLVideoElement?"HTMLVideoElement":"HTMLElement"),JSON.stringify(t));const n=TD(TD({fit:"cover"},t),{},{trackId:this.getTrackId(),element:e});this._player?this._player.updateConfig(n):(e instanceof HTMLVideoElement?this._player=new lB(n):this._player=new dB(n),this._player.updateVideoTrack(this._mediaStreamTrack),this._player.onFirstVideoFrameDecoded=()=>{this.store.subscribe(this.getUserId(),"video",void 0,void 0,Date.now()),this.safeEmit(sD.FIRST_FRAME_DECODED)},this._player.onVideoStateChanged=e=>{this.safeEmit(sD.VIDEO_STATE_CHANGED,e)}),this._player.play(this.store.sessionId||void 0),this._videoVisibleTimer&&window.clearInterval(this._videoVisibleTimer),this._clearPreviousVideoVisibleStatus(),this._videoVisibleTimer=window.setInterval((()=>{try{const e=this.getVideoElementVisibleStatus();this.safeEmit(sD.VIDEO_ELEMENT_VISIBLE_STATUS,e)}catch(e){}}),xT("CHECK_VIDEO_VISIBLE_INTERVAL"))}stop(){this._player&&(this._videoVisibleTimer&&(window.clearInterval(this._videoVisibleTimer),this._videoVisibleTimer=null),this._clearPreviousVideoVisibleStatus(),this._player.destroy(),this._player=void 0,oI.debug("[".concat(this.getTrackId(),"] stop video playback")))}getCurrentFrameData(){return this._player?this._player.getCurrentFrame():new ImageData(2,2)}updateMediaStreamTrackResolution(){lL(this._originMediaStreamTrack).then((e=>{let[t,n]=e;this._videoHeight=n,this._videoWidth=t})).catch(cT)}_updatePlayerSource(){oI.debug("[".concat(this.getTrackId(),"] update player source track")),this._player&&this._player.updateVideoTrack(this._mediaStreamTrack)}getVideoElementVisibleStatus(){try{var e,t;const n=null==this||null===(e=this._player)||void 0===e?void 0:e.getContainerElement(),r={track:this,element:null==this||null===(t=this._player)||void 0===t?void 0:t.getVideoElement(),slot:null==n?void 0:n.parentElement},{element:o,slot:i}=r;if(this.isPlaying&&o instanceof HTMLVideoElement&&i instanceof HTMLElement){const e=yw.checkOneElementVisible(o),t=Object.assign({},e);if(t.visible!==this._previousVideoVisibleStatus){this._previousVideoVisibleStatus=t.visible;const e=AI.reportApiInvoke(null,{tag:Ow.TRACER,name:Rw.REMOTE_VIDEO_TRACK_GET_VIDEO_VISIBLE,options:[this.getTrackId()]});t.visible?e.onSuccess("Video is visible"):e.onSuccess("Invisible because of ".concat(t.reason))}return t}return}catch(n){throw new uw(lw.GET_VIDEO_ELEMENT_VISIBLE_ERROR,n.message)}}pipe(e){if(this.processor===e)return e;if(e._source)throw new uw(lw.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,context:this.processorContext}),e}unpipe(){if(!this.processor)return;const e=this.processor;this.processor._source=void 0,this.processor=void 0,e.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(fD.ON_TRACK,(async e=>{e?e!==this._mediaStreamTrack&&(this._mediaStreamTrack=e,this._updatePlayerSource()):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource())}))}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(fD.ON_TRACK)}_destroy(){super._destroy(),this.unbindProcessorDestinationEvents()}_onSei(e){this.emit(iD.SEI_RECEIVED,e)}}).prototype,"play",[zB],Object.getOwnPropertyDescriptor(ZB.prototype,"play"),ZB.prototype),CD(ZB.prototype,"stop",[YB],Object.getOwnPropertyDescriptor(ZB.prototype,"stop"),ZB.prototype),CD(ZB.prototype,"pipe",[JB],Object.getOwnPropertyDescriptor(ZB.prototype,"pipe"),ZB.prototype),CD(ZB.prototype,"unpipe",[XB],Object.getOwnPropertyDescriptor(ZB.prototype,"unpipe"),ZB.prototype),ZB),lU=(eU=dI({argsMap:(e,t)=>[e.getTrackId(),t],throttleTime:300}),tU=dI({argsMap:(e,t)=>[e.getTrackId(),t]}),nU=dI({argsMap:e=>[e.getTrackId()]}),rU=dI({argsMap:e=>[e.getTrackId()]}),oU=dI({argsMap:(e,t)=>[e.getTrackId(),t.name]}),iU=dI({argsMap:e=>[e.getTrackId()]}),CD((aU=class extends sU{get isPlaying(){return this._useAudioElement?tL.isPlaying(this.getTrackId()):this._source.isPlayed}get __className__(){return"RemoteAudioTrack"}constructor(e,t,n,r){super(e,t,n,r),SD(this,"trackMediaType",cD.AUDIO),SD(this,"_source",void 0),SD(this,"_useAudioElement",!0),SD(this,"_volume",100),SD(this,"processorContext",void 0),SD(this,"processorDestination",void 0),SD(this,"_played",!1),SD(this,"_bypassWebAudio",!1),xT("DISABLE_WEBAUDIO")?(this._source=new sL,this._bypassWebAudio=!0,this._useAudioElement=!0):(this._source=new xD(e,!0),xT("REMOTE_AUDIO_TRACK_USES_WEB_AUDIO")&&(this._useAudioElement=!1)),this._source.once(lD.RECEIVE_TRACK_BUFFER,(()=>{this.safeEmit(sD.FIRST_FRAME_DECODED)})),this.processorContext=new aL(this._source.context,this.getTrackId(),"remote"),this.processorDestination=new iL(this.processorContext),this.bindProcessorDestinationEvents(),this._source.on(lD.UPDATE_SOURCE,(()=>{this.processor&&this.processor.updateInput({node:this._source.processSourceNode,context:this.processorContext})}))}setAudioFrameCallback(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4096;if(!e)return this._source.removeAllListeners(lD.ON_AUDIO_BUFFER),void this._source.stopGetAudioBuffer();this._source.startGetAudioBuffer(t),this._source.removeAllListeners(lD.ON_AUDIO_BUFFER),this._source.on(lD.ON_AUDIO_BUFFER,(t=>e(t)))}setVolume(e){this._volume=e,this._useAudioElement?tL.setVolume(this.getTrackId(),e):this._source.setVolume(e/100)}async setPlaybackDevice(e){if(!this._useAudioElement||!MP())throw new uw(lw.NOT_SUPPORTED,"your browser does not support setting the audio output device");await tL.setSinkID(this.getTrackId(),e)}getVolumeLevel(){return this._source.getAccurateVolumeLevel()}getStats(){return Jw((()=>{oI.warning("[deprecated] RemoteAudioTrack.getStats will be removed in the future, use AgoraRTCClient.getRemoteAudioStats instead")}),"remoteAudioTrackGetStatsWarning"),Hw(this,eD.GET_STATS)||TD({},AD)}play(){oI.debug("[".concat(this.getTrackId(),"] start audio playback")),this._played=!0,this._useAudioElement?(oI.debug("[".concat(this.getTrackId(),"] use audio element to play")),tL.play(this._mediaStreamTrack,this.getTrackId(),this._volume,this.store.sessionId||void 0)):this._source.play()}stop(){oI.debug("[".concat(this.getTrackId(),"] stop audio playback")),this._played=!1,this._useAudioElement?tL.stop(this.getTrackId()):this._source.stop()}_destroy(){super._destroy(),this._played=!1,this.unbindProcessorDestinationEvents(),this._source.destroy()}_isFreeze(){return this._source.isFreeze}_updatePlayerSource(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];oI.debug("[".concat(this.getTrackId(),"] update player source track")),e&&this._source.updateTrack(this._mediaStreamTrack),this._useAudioElement&&tL.updateTrack(this.getTrackId(),this._mediaStreamTrack)}pipe(e){if(this._bypassWebAudio)throw new uw(lw.NOT_SUPPORTED,"can not pipe extension when WebAudio disabled");if(this.processor===e)return e;if(e._source)throw new uw(lw.INVALID_OPERATION,"Processor ".concat(e.name," already piped, please call unpipe beforehand."));return this.unpipe(),this.processor=e,this.processor._source=this,e.updateInput({track:this._originMediaStreamTrack,node:this._source.processSourceNode,context:this.processorContext}),e}unpipe(){var e;if(this._bypassWebAudio)throw new uw(lw.NOT_SUPPORTED,"can not unpipe extension when WebAudio disabled");if(!this.processor)return;const t=this.processor;null===(e=this._source.processSourceNode)||void 0===e||e.disconnect(),this.processor._source=!1,this.processor=void 0,t.reset()}bindProcessorDestinationEvents(){this.processorDestination.on(fD.ON_TRACK,(async e=>{e?e!==this._mediaStreamTrack&&(this._mediaStreamTrack=e,this._updatePlayerSource(!1),this._source.processedNode=this._source.createMediaStreamSourceNode(e)):this._mediaStreamTrack!==this._originMediaStreamTrack&&(this._mediaStreamTrack=this._originMediaStreamTrack,this._updatePlayerSource())})),this.processorDestination.on(fD.ON_NODE,(e=>{this._source.processedNode=e;const t=!e;this._useAudioElement!==t&&(this._played?(this.stop(),this._useAudioElement=t,this.play()):this._useAudioElement=t)}))}unbindProcessorDestinationEvents(){this.processorDestination.removeAllListeners(fD.ON_TRACK),this.processorDestination.removeAllListeners(fD.ON_NODE)}}).prototype,"setVolume",[eU],Object.getOwnPropertyDescriptor(aU.prototype,"setVolume"),aU.prototype),CD(aU.prototype,"setPlaybackDevice",[tU],Object.getOwnPropertyDescriptor(aU.prototype,"setPlaybackDevice"),aU.prototype),CD(aU.prototype,"play",[nU],Object.getOwnPropertyDescriptor(aU.prototype,"play"),aU.prototype),CD(aU.prototype,"stop",[rU],Object.getOwnPropertyDescriptor(aU.prototype,"stop"),aU.prototype),CD(aU.prototype,"pipe",[oU],Object.getOwnPropertyDescriptor(aU.prototype,"pipe"),aU.prototype),CD(aU.prototype,"unpipe",[iU],Object.getOwnPropertyDescriptor(aU.prototype,"unpipe"),aU.prototype),aU);const uU=new class extends ww{get visibility(){return document.visibilityState}get lastHiddenTime(){return this._lastHiddenTime}get lastVisibleTime(){return this._lastVisibleTime}constructor(){super(),SD(this,"_lastHiddenTime",0),SD(this,"_lastVisibleTime",0),document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState?this._lastHiddenTime=performance.now():this._lastVisibleTime=performance.now(),oI.debug("current web page is ".concat(document.visibilityState)),this.emit("VISIBILITY_CHANGE",document.visibilityState)}))}};class dU extends ww{constructor(e,t){super(),SD(this,"trackMediaType",cD.DATA),SD(this,"_version",1),SD(this,"_type",3),SD(this,"_config",void 0),SD(this,"_originDataChannel",void 0),SD(this,"_dataStreamPacketHeader",new ArrayBuffer(4)),SD(this,"_dataStreamPacketHandler",{serialize:e=>e,deserialize:e=>e}),SD(this,"_datachannelEventMap",new Map),this._config=e,t&&(this._originDataChannel=t,this._bandDataChannelEvents(t)),this._initPacketHeader()}useDataStream(e){this._dataStreamPacketHandler=e}get id(){return this._config.id}get ordered(){return this._config.ordered}get maxRetransmits(){return xT("DATASTREAM_MAX_RETRANSMITS")}get metadata(){return this._config.metadata}get readyState(){var e,t;return null!==(e=null===(t=this._originDataChannel)||void 0===t?void 0:t.readyState)&&void 0!==e?e:"connecting"}get _originDataChannelId(){var e,t;return null!==(e=null===(t=this._originDataChannel)||void 0===t?void 0:t.id)&&void 0!==e?e:null}getChannelId(){return this.id}getConfig(){return this._config}_close(){this._originDataChannel&&(this._unbindDataChannelEvents(this._originDataChannel),this._originDataChannel=void 0)}async _waitTillOpen(){return new MA(((e,t)=>{if(this._originDataChannel){"open"===this._originDataChannel.readyState&&e();const n=setTimeout((()=>{var e;t(new uw(lw.DATACHANNEL_CONNECTION_TIMEOUT,"Cannot create datachannel, id: ".concat(null===(e=this._originDataChannel)||void 0===e?void 0:e.id)))}),1e4);this._originDataChannel.onopen=()=>{clearTimeout(n),this._originDataChannel&&this._bandDataChannelEvents(this._originDataChannel),e()},this._originDataChannel.onerror=()=>{throw clearTimeout(n),new uw(lw.DATACHANNEL_CONNECTION_TIMEOUT)}}else t(new uw(lw.DATACHANNEL_CONNECTION_TIMEOUT,"cannot find dataChannel"))}))}_updateOriginDataChannel(e){this._originDataChannel=e,this._bandDataChannelEvents(e)}_initPacketHeader(){const e=new DataView(this._dataStreamPacketHeader);e.setUint16(0,this._version),e.setUint8(2,this._type),e.setUint8(3,this._config.id)}_bandDataChannelEvents(e){this._unbindDataChannelEvents(e),[bD.OPEN,bD.CLOSE,bD.ERROR].forEach((t=>{const n=()=>{this.emit(t)};this._datachannelEventMap.set(t,n),e.addEventListener(t,n)}))}_unbindDataChannelEvents(e){Array.from(this._datachannelEventMap.entries()).forEach((t=>{let[n,r]=t;e.removeEventListener(n,r)})),this._datachannelEventMap.clear()}}class AU extends dU{constructor(e){super(e),SD(this,"_messageListener",void 0),this._messageListener=e=>{if(e.data.byteLength<this._dataStreamPacketHeader.byteLength)throw Error("invalid byteLength: the byte length must exceed "+this._dataStreamPacketHeader.byteLength);const t=e.data.slice(0,this._dataStreamPacketHeader.byteLength),n=new DataView(t).getUint8(3);if(n!==this.id)return void(xT("SHOW_DATASTREAM2_LOG")&&oI.debug("invalid datachannel id: ".concat(n," !== ").concat(this.id)));let r=e.data.slice(this._dataStreamPacketHeader.byteLength);r=this._dataStreamPacketHandler.deserialize(r),this.emit(bD.MESSAGE,r)}}_updateOriginDataChannel(e){super._updateOriginDataChannel(e),this._bandRemoteDataChannelEvents()}_close(){this._originDataChannel&&(this._originDataChannel.removeEventListener("message",this._messageListener),super._close())}_bandRemoteDataChannelEvents(){this._originDataChannel&&this._originDataChannel.addEventListener("message",this._messageListener)}}class pU extends dU{send(e){if(this._originDataChannel){let t=e;t=this._dataStreamPacketHandler.serialize(e);const n=new Uint8Array(this._dataStreamPacketHeader.byteLength+t.byteLength);n.set(new Uint8Array(this._dataStreamPacketHeader),0),n.set(new Uint8Array(t),this._dataStreamPacketHeader.byteLength),this._originDataChannel.send(n.buffer)}}}function hU(){const e=new Blob([atob("ZnVuY3Rpb24gZShlLHQsbil7bGV0IHI9bmV3IFVpbnQ4QXJyYXkoZSx0LG4pLGE9W10sbz0wO2Zvcig7YS5sZW5ndGg8bjspbyszPG4mJjA9PT1yW29dJiYwPT09cltvKzFdJiYzPT09cltvKzJdJiYoMD09PXJbbyszXXx8MT09PXJbbyszXXx8Mj09PXJbbyszXXx8Mz09PXJbbyszXSk/KGEucHVzaChyW29dLHJbbysxXSxyW28rM10pLG8rPTQpOihhLnB1c2gocltvXSksbysrKTtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkoYSl9ZnVuY3Rpb24gdChlLHQpe2NvbnN0IG49ZnVuY3Rpb24oZSl7Y29uc3QgdD1lLmxlbmd0aDtsZXQgbj1bXSxyPTA7Zm9yKDtyPHQ7KXIrMjx0JiYwPT09ZVtyXSYmMD09PWVbcisxXSYmKDA9PT1lW3IrMl18fDE9PT1lW3IrMl18fDI9PT1lW3IrMl18fDM9PT1lW3IrMl0pPyhuLnB1c2goZVtyXSxlW3IrMV0sMyxlW3IrMl0pLHIrPTMpOihuLnB1c2goZVtyXSkscisrKTtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkobil9KHQpLHI9bi5sZW5ndGgsYT1NYXRoLmZsb29yKHIvMjU1KSxvPXIlMjU1LHM9bmV3IFVpbnQ4QXJyYXkoNithKzErcitlLmJ5dGVMZW5ndGgpO3NbMF09MCxzWzFdPTAsc1syXT0wLHNbM109MSxzWzRdPTYsc1s1XT0xMDE7bGV0IGk9MDtmb3IoO2k8YTspc1s2K2ldPTI1NSxpKys7cmV0dXJuIHNbNitpXT1vLGkrKyxzLnNldChuLDYraSkscy5zZXQobmV3IFVpbnQ4QXJyYXkoZSksNitpK3IpLHMuYnVmZmVyfW5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiU2FmYXJpIik+LTEmJi0xPT09bmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJDaHJvbWUiKSYmKHNlbGYub25ydGN0cmFuc2Zvcm09bj0+e2NvbnN0IHI9bi50cmFuc2Zvcm1lcjtsZXQgYT1bXTtyLm9wdGlvbnMucG9ydC5vbm1lc3NhZ2U9ZT0+e2UuZGF0YS5zZWkmJmEucHVzaChlLmRhdGEuc2VpKX0sc2VsZi5wb3N0TWVzc2FnZSgic3RhcnRlZCIpO2NvbnN0IG89ci5yZWFkYWJsZS5nZXRSZWFkZXIoKSxzPXIud3JpdGFibGUuZ2V0V3JpdGVyKCk7InJ4Ij09PXIub3B0aW9ucy5uYW1lP2Z1bmN0aW9uIHQobil7by5yZWFkKCkudGhlbigocj0+e2lmKCFyLmRvbmUpe2lmKHIudmFsdWUgaW5zdGFuY2VvZiBSVENFbmNvZGVkVmlkZW9GcmFtZSl7Y29uc3QgdD1mdW5jdGlvbih0KXtjb25zdCBuPW5ldyBEYXRhVmlldyh0LmRhdGEpO2xldCByPTA7Zm9yKDtyKzQ8dC5kYXRhLmJ5dGVMZW5ndGg7KXtpZigwPT09bi5nZXRVaW50OChyKzApJiYwPT09bi5nZXRVaW50OChyKzEpJiYwPT09bi5nZXRVaW50OChyKzIpJiYxPT09bi5nZXRVaW50OChyKzMpJiY2PT09bi5nZXRVaW50OChyKzQpKXtsZXQgYT1yKzYsbz0wLHM9MDtmb3IoOzI1NT09PShzPW4uZ2V0VWludDgoYSsrKSk7KW8rPTI1NTtvKz1zO2NvbnN0IGk9ZSh0LmRhdGEsYSxvKTtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkoaSl9cisrfXJldHVybiBudWxsfShyLnZhbHVlKTt0JiZuLm9wdGlvbnMucG9ydC5wb3N0TWVzc2FnZSh7c2VpOnR9KX1zLndyaXRlKHIudmFsdWUpLG4ub3B0aW9ucy5wb3J0LnBvc3RNZXNzYWdlKHt0cmFuc2Zvcm1lZDohMH0pLHQobil9fSkpfShyKToidHgiPT09ci5vcHRpb25zLm5hbWUmJmZ1bmN0aW9uIGUobil7by5yZWFkKCkudGhlbigocj0+e2lmKCFyLmRvbmUpe2lmKHIudmFsdWUgaW5zdGFuY2VvZiBSVENFbmNvZGVkVmlkZW9GcmFtZSl7Y29uc3QgZT1hLnNoaWZ0KCk7ZSYmKHIudmFsdWUuZGF0YT10KHIudmFsdWUuZGF0YSxlKSl9cy53cml0ZShyLnZhbHVlKSxuLm9wdGlvbnMucG9ydC5wb3N0TWVzc2FnZSh7dHJhbnNmb3JtZWQ6ITB9KSxlKG4pfX0pKX0ocil9LHNlbGYucG9zdE1lc3NhZ2UoInJlZ2lzdGVyZWQiKSk7Cg==")],{type:"text/javascript"});return setTimeout((()=>LP.revokeObjectURL(e)),0),new Worker(LP.createObjectURL(e))}const fU=new Map,gU=new Map;function mU(e,t,n){let r=new Uint8Array(e,t,n),o=[],i=0;for(;o.length<n;)i+3<n&&0===r[i]&&0===r[i+1]&&3===r[i+2]&&(0===r[i+3]||1===r[i+3]||2===r[i+3]||3===r[i+3])?(o.push(r[i],r[i+1],r[i+3]),i+=4):(o.push(r[i]),i++);return new Uint8Array(o)}const _U=new Map;async function EU(e,t){if(!UP().supportWebRTCEncodedTransform)return void oI.warning("browser not support video encoded transform");if(_U.has(e))return;if(!e.track)return;const n={track:e.track};if(MS()){if(!e.createEncodedStreams)return void oI.warning("browser not support createEncodedStreams() API");let i=null;try{i=e.createEncodedStreams()}catch(o){return void oI.error("create video-encoded-streams error",o&&o.message)}let a=[];t.on("sei-to-send",(e=>{a.push(e)}));const s=new TransformStream({transform(t,o){n.controller||(n.controller=o),e.track&&e.track.id!==n.track.id&&(oI.debug("video track changed: ".concat(n.track.id," => ").concat(e.track.id)),n.track.removeEventListener("ended",r),n.track=e.track,n.track.addEventListener("ended",r));const i=a.shift();i&&(t.data=function(e,t){const n=function(e){const t=e.length;let n=[],r=0;for(;r<t;)r+2<t&&0===e[r]&&0===e[r+1]&&(0===e[r+2]||1===e[r+2]||2===e[r+2]||3===e[r+2])?(n.push(e[r],e[r+1],3,e[r+2]),r+=3):(n.push(e[r]),r++);return new Uint8Array(n)}(t),r=n.length,o=Math.floor(r/255),i=r%255,a=new Uint8Array(6+o+1+r+e.byteLength);a[0]=0,a[1]=0,a[2]=0,a[3]=1,a[4]=6,a[5]=101;let s=0;for(;s<o;)a[6+s]=255,s++;return a[6+s]=i,s++,a.set(n,6+s),a.set(new Uint8Array(e),6+s+r),a.buffer}(t.data,i)),o.enqueue(t)}});i.readable.pipeThrough(s).pipeTo(i.writable)}else{if(!xS())return;{if("undefined"==typeof RTCRtpScriptTransform)return void oI.warning("browser not support RTCRtpScriptTransform");const o=hU(),i=new MessageChannel;await new MA((e=>o.onmessage=t=>{"registered"===t.data&&e(void 0)}));const a=new RTCRtpScriptTransform(o,{name:"tx",port:i.port2},[i.port2]);e.transform=a,await new MA((e=>o.onmessage=t=>{"started"===t.data&&e(void 0)})),t.on("sei-to-send",(e=>{i.port1.postMessage({sei:e})})),i.port1.onmessage=t=>{var o;t.data.transformed&&e.track&&(null===(o=e.track)||void 0===o?void 0:o.id)!==n.track.id&&(oI.debug("video track changed: ".concat(n.track.id," => ").concat(e.track.id)),n.track.removeEventListener("ended",r),n.track=e.track,n.track.addEventListener("ended",r))},n.worker=o}}function r(){if(e.track){if(this.id!==e.track.id)return;e.track.removeEventListener("ended",r)}const t=_U.get(e);if(t){_U.delete(e);try{var n,i;null===(n=t.controller)||void 0===n||n.terminate(),null===(i=t.worker)||void 0===i||i.terminate()}catch(o){oI.warning(o&&o.message)}}}_U.set(e,n),e.track.addEventListener("ended",r)}const vU=new Map;!function(){const e=PS();BP.getDisplayMedia=!(!navigator.mediaDevices||!navigator.mediaDevices.getDisplayMedia),BP.getStreamFromExtension=e.name===RS.CHROME&&Number(e.version)>34,BP.supportUnifiedPlan=function(){if(!window.RTCRtpTransceiver)return!1;if(!("currentDirection"in RTCRtpTransceiver.prototype))return!1;const e=new RTCPeerConnection;let t=!1;try{e.addTransceiver("audio"),t=!0}catch(n){}return e.close(),t}(),BP.supportMinBitrate=e.name===RS.CHROME||e.name===RS.EDGE,BP.supportSetRtpSenderParameters=function(){const e=PS();return!!(window.RTCRtpSender&&window.RTCRtpSender.prototype.setParameters&&window.RTCRtpSender.prototype.getParameters)&&(!!rw()||!(!xS()&&!US())||e.name===RS.FIREFOX&&Number(e.version)>=64)}(),e.name===RS.SAFARI&&(Number(e.version)>=14?BP.supportDualStream=!0:BP.supportDualStream=!1),BP.webAudioMediaStreamDest=function(){const e=PS();return!(e.name===RS.SAFARI&&Number(e.version)<12)}(),BP.supportReplaceTrack=!!window.RTCRtpSender&&"function"==typeof RTCRtpSender.prototype.replaceTrack,BP.supportWebGL="undefined"!=typeof WebGLRenderingContext,BP.supportRequestFrame=!!window.CanvasCaptureMediaStreamTrack,rw()||(BP.webAudioWithAEC=!0),BP.supportShareAudio=function(){const e=PS();return(e.os===IS.WIN_10||e.os===IS.WIN_81||e.os===IS.WIN_7||e.os===IS.LINUX||e.os===IS.MAC_OS||e.os===IS.CHROMIUM_OS)&&e.name===RS.CHROME&&Number(e.version)>=74}(),BP.supportDataChannel=!!(HS(76)||function(e){const t=PS();return!(t.name!==RS.FIREFOX||!t.osVersion)&&Number(t.version)>=e}(68)||GS(14)),BP.supportPCSetConfiguration=function(){const e=window.RTCPeerConnection;return!$S()&&!!e&&e.prototype.setConfiguration instanceof Function}(),BP.supportWebRTCEncodedTransform=function(){const e=PS();return"Chrome"===e.name&&Number(e.version)>=86||"Safari"===e.name&&Number(e.version)>=15}(),BP.supportWebRTCInsertableStream=function(){const e=PS();return(e.name===RS.CHROME||e.name===RS.EDGE)&&Number(e.version)>=94&&"MediaStreamTrackGenerator"in window&&"MediaStreamTrackProcessor"in window}(),BP.supportRequestVideoFrameCallback="requestVideoFrameCallback"in HTMLVideoElement.prototype,BP.supportWebCrypto="undefined"!=typeof window&&void 0!==window.crypto&&void 0!==window.crypto.subtle,Ww((()=>{BP.supportDualStreamEncoding=function(){const e=PS();return!!xT("DISABLE_WEBAUDIO")||"Safari"===e.name&&Number(e.version)>=14||!!("Chrome"===e.name&&/Windows/i.test(e.os||"")&&Number(e.version)>=100&&xT("CHROME_DUAL_STREAM_USE_ENCODING"))}(),oI.debug("browser ua: ",navigator.userAgent),oI.info("browser info: ",e),oI.info("browser compatibility: ",BP)}))}();class yU extends ww{constructor(e,t){super(),Ov(this,"signal",void 0),Ov(this,"token",void 0),Ov(this,"tokenTimeout",void 0),Ov(this,"tokenInterval",void 0),Ov(this,"_sequence",0),Ov(this,"userMap",new Map),Ov(this,"encoder",new TextEncoder),this.signal=e,this.token=t;const n=()=>{this.signal.connectionState===fR.CONNECTED&&this.check(),0===this.userMap.size?this.tokenInterval=window.setTimeout(n,1e3):this.tokenInterval=window.setTimeout(n,3*xT("P2P_TOKEN_INTERVAL"))};n()}async send(e,t,n,r,o){var i,a,s;if(0===this.userMap.size)return;const c=Array.from(XO(i=this.userMap).call(i))[0].token;"string"!=typeof t&&(t=JSON.stringify(t)),r=null!==(a=r)&&void 0!==a?a:aT(6,""),o=null!==(s=o)&&void 0!==s?s:this._sequence++;const l={_id:r,_type:e,_seq:o,_message:t,token:"".concat(this.token,"_").concat(c)};xT("SHOW_P2P_LOG")&&oI.debug("send message",l,"noNeedResponse : ".concat(n)),this.splitMessage(JSON.stringify(l)).forEach((e=>{this.signal.request(mR.DATA_STREAM,{payload:Zw(this.encoder.encode(e))})}));const u=new MA(((t,o)=>{const i=window.setTimeout((()=>{this.off("res-@".concat(r,"_ack"),a),this.off("res-@".concat(r),c),this.off(lO.ABORT,s),oI.debug("[external-signal] request timeout, type: ".concat(e,", requestId: ").concat(r)),0===this.userMap.size?o(new uw(lw.INVALID_REMOTE_USER)):o(new uw(lw.TIMEOUT))}),xT("EXTERNAL_SIGNAL_REQUEST_TIMEOUT")),a=()=>{i&&window.clearTimeout(i),this.off(lO.ABORT,s),n&&t()},s=()=>{i&&window.clearTimeout(i),this.off("res-@".concat(r,"_ack"),a),this.off("res-@".concat(r),c),o(new uw(lw.EXTERNAL_SIGNAL_ABORT,"type: ".concat(e,", requestId: ").concat(r)))};this.once(lO.ABORT,s),this.once("res-@".concat(r,"_ack"),a);const c=(n,c)=>{u=!0,i&&window.clearTimeout(i),this.off("res-@".concat(r,"_ack"),a),this.off(lO.ABORT,s),"success"===n?t(c):o(new uw(lw.P2P_MESSAGE_FAILED,"request ".concat(e," failed, requestId: ").concat(r)))};let u=!1;n||(this.once("res-@".concat(r),c),iT(xT("SIGNAL_REQUEST_TIMEOUT")).then((()=>{u||oI.warning("external_signal request timeout, type: ".concat(e,", requestId: ").concat(r,", ").concat(l))})))}));try{return await u}catch(d){if(d.code===lw.TIMEOUT)return await this.send(e,t,n,r,o);throw d}}onMessage(e){var t;const{_uid:n}=e;let r,o=this.userMap.get(n);if(o)r=o.splitMessageMap;else{if(this.userMap.size>0||!("_type"in e)||e._type!==cO.CHECK)return;const{token:t}=e;r=new Map,o={uid:n,isStart:!0,token:t,splitMessageMap:r,nextExpectedSequenceNumber:0,receivedMessagesMap:new Map},this.userMap.set(n,o),this.signal.emit(ER.ON_USER_ONLINE,{uid:n}),this.handleUserOnline()}if("id"in e&&"total"in e){var i;const{id:t,total:o}=e,a=null!==(i=r.get(t))&&void 0!==i?i:[];if(a.push(e),r.has(t)||r.set(t,a),a.length!==o)return;{const o=Xh(a).call(a,((e,t)=>e.index-t.index)).map((e=>e.payload)).join("");r.delete(t),(e=JSON.parse(o))._uid=n}}const{_type:a,token:s}=e;if(Or(t=[cO.ACK,cO.CHECK]).call(t,a))return a===cO.CHECK&&this.handleCheckToken(o,s),void this.receiveMessage(e);s==="".concat(o.token,"_").concat(this.token)?this.handleReceivedMessage(e):oI.debug('Receive unexpected message", '.concat(s,", cur_token: ").concat(o.token,"_").concat(this.token),e)}check(){const e={_id:aT(6,""),token:this.token,_type:cO.CHECK};xT("SHOW_P2P_LOG")&&oI.debug("send message",e),this.signal.request(mR.DATA_STREAM,{payload:Zw(this.encoder.encode(JSON.stringify(e)))})}ack(e){const t={_id:e,_type:cO.ACK,token:this.token};xT("SHOW_P2P_LOG")&&oI.debug("send message",t),this.signal.request(mR.DATA_STREAM,{payload:Zw(this.encoder.encode(JSON.stringify(t)))})}response(e,t,n){this.send(cO.RESPONSE,JSON.stringify({success:!n,message:t}),!0,e)}handleReceivedMessage(e){const t=()=>{this.userMap.forEach((e=>{const{receivedMessagesMap:t,nextExpectedSequenceNumber:n}=e;for(;t.has(n);){const r=t.get(n);t.delete(n),this.receiveMessage(r),e.nextExpectedSequenceNumber++}}))};if(!e)return void t();const{_uid:n,_seq:r}=e,o=this.userMap.get(n),{receivedMessagesMap:i,isStart:a,nextExpectedSequenceNumber:s}=o;if(r<s)return this.ack(e._id),void oI.debug("[external-signal] receive old message, seq: ".concat(r,", ").concat(e._message));i.set(r,e),a&&r===s&&(this.receiveMessage(e),i.delete(s),o.nextExpectedSequenceNumber++,t())}receiveMessage(e){const{_id:t,_type:n,_message:r,_uid:o}=e;if(xT("SHOW_P2P_LOG")&&oI.debug("receive message",e),t){let i;switch(e._type!==cO.ACK&&(r&&(i=JSON.parse(r)),this.ack(e._id)),e._type){case cO.CANDIDATE:case cO.CONTROL:this.signal.emit(n,i,o);break;case cO.PUBLISH:case cO.UNPUBLISH:case cO.RESTART_ICE:case cO.CALL:i.uid=o,$w(this.signal,n,i).then((t=>{this.response(e._id,t)})).catch((()=>{this.response(e._id,void 0,!0)}));break;case cO.ACK:this.getListeners("res-@".concat(t,"_ack")).length>0&&this.emit("res-@".concat(t,"_ack"));break;case cO.RESPONSE:{const{success:e,message:n}=i;this.emit("res-@".concat(t),e?"success":"failed",n);break}}}}splitMessage(e){if(e.length<yU.MAX_MESSAGE_SIZE)return[e];const t=[],{remoteToken:n}=JSON.parse(e),r=aT(6,"");let o=0,i=800;const a=Math.ceil(e.length/i);for(;e.length>0;){o++;const s={id:r,index:o,total:a,payload:e.slice(0,i),token:"".concat(this.token,"_").concat(n)};JSON.stringify(s).length>yU.MAX_MESSAGE_SIZE?i-=50:(t.push(s),e=e.slice(i))}return t.map((e=>JSON.stringify(e)))}handleCheckToken(e,t){return e.token!==t?(oI.debug("token changed, from ".concat(e.token," to ").concat(t)),this.reset(e.uid,t),!1):(this.tokenTimeout&&(window.clearTimeout(this.tokenTimeout),this.tokenTimeout=void 0),this.tokenTimeout=window.setTimeout((()=>{oI.debug("token timeout, ".concat(t)),this.reset(e.uid)}),xT("MAX_P2P_TIMEOUT")),!0)}async handleUserOnline(){const e=await $w(this.signal,cO.CALL,void 0),t=await this.send(cO.CALL,e);this.signal.emit(gR.P2P_CONNECTION,t,!0)}async reset(e,t){const n=this.userMap.get(e);n&&(this.emit(lO.ABORT),this.signal.emit(ER.ON_USER_OFFLINE,{uid:n.uid,reason:dO.P2P_TOKEN_CHANGED}),this._sequence=0,this.userMap.clear(),t||(oI.debug("change local token from ".concat(t," to ").concat(t)),this.token=aT(6,"")))}clear(){this._sequence=0,this.userMap.clear(),this.tokenInterval&&window.clearTimeout(this.tokenInterval),this.tokenInterval=void 0,this.tokenTimeout&&window.clearTimeout(this.tokenTimeout),this.tokenTimeout=void 0,this.emit(lO.ABORT)}}Ov(yU,"MAX_SIZE",1),Ov(yU,"MAX_MESSAGE_SIZE",1024);class bU extends ww{get connectionState(){return this._connectionState}set connectionState(e){e!==this._connectionState&&(this._connectionState=e,e===fR.CONNECTED?this.emit(gR.WS_CONNECTED):e===fR.RECONNECTING?this.emit(gR.WS_RECONNECTING,this._websocketReconnectReason):e===fR.CLOSED&&this.emit(gR.WS_CLOSED,this._disconnectedReason))}get currentURLIndex(){return this.websocket.currentURLIndex}get url(){return this.websocket&&this.websocket.url||null}get rtt(){return this.rttRolling.mean()}constructor(e,t){super(),Ov(this,"_disconnectedReason",void 0),Ov(this,"_websocketReconnectReason",void 0),Ov(this,"_connectionState",fR.CLOSED),Ov(this,"reconnectToken",void 0),Ov(this,"p2pToken",void 0),Ov(this,"websocket",void 0),Ov(this,"openConnectionTime",void 0),Ov(this,"clientId",void 0),Ov(this,"lastMsgTime",Date.now()),Ov(this,"uploadCache",[]),Ov(this,"uploadCacheInterval",void 0),Ov(this,"rttRolling",new CT(5)),Ov(this,"pingpongTimer",void 0),Ov(this,"pingpongTimeoutCount",0),Ov(this,"joinResponse",void 0),Ov(this,"multiIpOption",void 0),Ov(this,"initError",void 0),Ov(this,"spec",void 0),Ov(this,"store",void 0),Ov(this,"_external_signal",void 0),Ov(this,"onWebsocketMessage",(e=>{if(e.data instanceof ArrayBuffer)return void this.emit(gR.ON_BINARY_DATA,e.data);const t=JSON.parse(e.data);if(this.lastMsgTime=Date.now(),Object.prototype.hasOwnProperty.call(t,"_id")){const e="res-@".concat(t._id);this.emit(e,t._result,t._message)}else if(Object.prototype.hasOwnProperty.call(t,"_type")){switch(t._type){case ER.ON_DATA_STREAM:return void this.handleDataStream(t._message);case ER.MUTE_AUDIO:case ER.MUTE_VIDEO:case ER.ON_P2P_LOST:case ER.ON_USER_ONLINE:return;case ER.ON_USER_OFFLINE:const{uid:e}=t._message;return oI.debug("[".concat(this.clientId,"] user-offline uid: ").concat(e)),void this._external_signal.reset(e)}if(this.emit(t._type,t._message),t._type===ER.ON_NOTIFICATION&&this.handleNotification(t._message),t._type===ER.ON_USER_BANNED)switch(t._message.error_code){case 14:this.close(Pw.UID_BANNED);break;case 15:this.close(Pw.IP_BANNED);break;case 16:this.close(Pw.CHANNEL_BANNED)}if(t._type===ER.ON_USER_LICENSE_BANNED)switch(t._message.error_code){case hR.ERR_LICENSE_MISSING:this.close(Pw.LICENSE_MISSING);break;case hR.ERR_LICENSE_EXPIRED:this.close(Pw.LICENSE_EXPIRED);break;case hR.ERR_LICENSE_MINUTES_EXCEEDED:this.close(Pw.LICENSE_MINUTES_EXCEEDED);break;case hR.ERR_LICENSE_PERIOD_INVALID:this.close(Pw.LICENSE_PERIOD_INVALID);break;case hR.ERR_LICENSE_MULTIPLE_SDK_SERVICE:this.close(Pw.LICENSE_MULTIPLE_SDK_SERVICE);break;case hR.ERR_LICENSE_ILLEGAL:this.close(Pw.LICENSE_ILLEGAL);break;default:this.close()}}})),this.clientId=e.clientId,this.spec=e,this.store=t,this.websocket=new RO("gateway-".concat(this.clientId),this.spec.retryConfig,!0,xT("JOIN_GATEWAY_USE_DUAL_DOMAIN"),xT("JOIN_GATEWAY_USE_443PORT_ONLY"),t),this.handleWebsocketEvents(),window.addEventListener("offline",(()=>{this.connectionState===fR.CONNECTED&&this.reconnect("retry",Mw.OFFLINE)})),this.p2pToken=aT(6,""),this._external_signal=new yU(this,this.p2pToken)}async request(e,t,n,r){const o=aT(6,""),i={_id:o,_type:e,_message:t},a=this.websocket.connectionID,s=()=>new MA(((e,t)=>{if(this.connectionState===fR.CONNECTED)return e();const n=()=>{this.off(gR.WS_CLOSED,r),e()},r=()=>{this.off(gR.WS_CONNECTED,n),t(new uw(lw.WS_ABORT))};this.once(gR.WS_CONNECTED,n),this.once(gR.WS_CLOSED,r)}));if(this.connectionState!==fR.CONNECTING&&this.connectionState!==fR.RECONNECTING||e===mR.JOIN||e===mR.REJOIN||await s(),this.websocket.sendMessage(i,!0),r)return;const c=new MA(((n,r)=>{let i=!1;const s=(r,o)=>{i=!0,n({isSuccess:"success"===r,message:o||{}}),this.off(gR.WS_CLOSED,c),this.off(gR.WS_RECONNECTING,c),this.emit(gR.REQUEST_SUCCESS,e,t)};this.once("res-@".concat(o),s);const c=()=>{r(new uw(lw.WS_ABORT,"type: ".concat(e))),this.off(gR.WS_CLOSED,c),this.off(gR.WS_RECONNECTING,c),this.off("res-@".concat(o),s)};this.once(gR.WS_CLOSED,c),this.once(gR.WS_RECONNECTING,c),iT(xT("SIGNAL_REQUEST_TIMEOUT")).then((()=>{this.websocket.connectionID!==a||i||(oI.warning("[".concat(this.clientId,"] ws request timeout, type: ").concat(e)),this.emit(gR.REQUEST_TIMEOUT,e,t))}))}));let l=null;try{l=await c}catch(p){if(this.connectionState===fR.CLOSED||e===mR.LEAVE)throw new uw(lw.WS_ABORT);return!this.spec.forceWaitGatewayResponse||n?p.throw():e===mR.JOIN||e===mR.REJOIN?null:(await s(),await this.request(e,t))}if(l.isSuccess)return l.message;const u=Number(l.message.error_code||l.message.code),d=fO(u),A=new uw(lw.UNEXPECTED_RESPONSE,"".concat(d.desc,": ").concat(l.message.error_str),{code:u,data:l.message,desc:d.desc});return"success"===d.action?l.message:(oI.warning("[".concat(this.clientId,"] [").concat(this.websocket.connectionID,"] unexpected response from type ").concat(e,", error_code: ").concat(u,", message: ").concat(d.desc,", action: ").concat(d.action)),u===hR.ERR_TOO_MANY_BROADCASTERS?e===mR.JOIN||e===mR.REJOIN?(this.initError=A,this.close(),A.throw()):A.throw():"failed"===d.action?A.throw():"quit"===d.action?(this.initError=A,this.close(),A.throw()):(u===hR.ERR_JOIN_BY_MULTI_IP?(this.multiIpOption=l.message.option,oI.warning("[".concat(this.clientId,"] detect multi ip, recover")),this.reconnect("recover",Mw.MULTI_IP)):this.reconnect(d.action,Mw.SERVER_ERROR),e===mR.JOIN||e===mR.REJOIN?null:await this.request(e,t)))}waitMessage(e,t){return new MA((n=>{const r=o=>{(!t||t(o))&&(this.off(e,r),n(o))};this.on(e,r)}))}uploadWRTCStats(e){if(!this.store.sessionId)return void oI.warn("[".concat(this.clientId,"] no session id when upload wrtc stats"));const t={lts:Date.now(),sid:this.store.sessionId,uid:this.store.intUid,stats:e};this.upload(_R.WRTC_STATS,t)}upload(e,t){const n={_type:e,_message:t};try{this.websocket.sendMessage(n)}catch(r){const e=xT("MAX_UPLOAD_CACHE")||50;this.uploadCache.push(n),this.uploadCache.length>e&&this.uploadCache.splice(0,1),this.uploadCache.length>0&&!this.uploadCacheInterval&&(this.uploadCacheInterval=window.setInterval((()=>{if(this.connectionState!==fR.CONNECTED)return;const e=this.uploadCache.splice(0,1)[0];0===this.uploadCache.length&&(window.clearInterval(this.uploadCacheInterval),this.uploadCacheInterval=void 0),this.upload(e._type,e._message)}),xT("UPLOAD_CACHE_INTERVAL")||2e3))}}send(e,t){const n={_type:e,_message:t};this.websocket.sendMessage(n)}async sendExtensionMessage(e,t,n){return await this._external_signal.send(e,t,n)}init(e){return this.initError=void 0,this.multiIpOption=void 0,this.joinResponse=void 0,this.reconnectToken=void 0,this.openConnectionTime=void 0,new MA(((t,n)=>{this.once(gR.WS_CONNECTED,(()=>t(this.joinResponse))),this.once(gR.WS_CLOSED,(()=>n(this.initError||new uw(lw.WS_ABORT)))),this.connectionState=fR.CONNECTING,this.websocket.init(e).catch(n)}))}close(e){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.reconnectToken=void 0,this.joinResponse=void 0,this._external_signal.clear(),this._disconnectedReason=e||Pw.LEAVE,this.connectionState=fR.CLOSED,oI.debug("[".concat(this.clientId,"] ")+"will close websocket in signal"),this.websocket.close(),this.p2pToken=aT(6,""),this._external_signal.clear(),this._external_signal=new yU(this,this.p2pToken)}async join(){if(!this.joinResponse){this.emit(gR.ABORT_P2P_EXECUTION);const e=await $w(this,gR.REQUEST_JOIN_INFO),t=await this.request(mR.JOIN,e);if(!t)return this.emit(gR.REPORT_JOIN_GATEWAY,lw.TIMEOUT,this.url||""),!1;this.joinResponse=t,this.emit(gR.JOIN_RESPONSE,this.joinResponse),this.reconnectToken=this.joinResponse.rejoin_token}return this.connectionState=fR.CONNECTED,this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval(this.handlePingPong.bind(this),3e3),!0}reconnect(e,t){this.pingpongTimer&&(this.pingpongTimeoutCount=0,window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0),this.websocket.reconnect(e,t)}handleDataStream(e){try{var t;const n=Xw(e.payload),r=(new TextDecoder).decode(n),o=JSON.parse(r);"total"in o&&"id"in o||Or(t=Object.values(cO)).call(t,o._type)?(o._uid=e.uid,this._external_signal.onMessage(o)):this.emit(ER.ON_DATA_STREAM,e)}catch(n){this.emit(ER.ON_DATA_STREAM,e)}}handleNotification(e){oI.debug("[".concat(this.clientId,"] receive notification: "),e);const t=fO(e.code);if("success"!==t.action){if("failed"!==t.action)return"quit"===t.action?("ERR_REPEAT_JOIN_CHANNEL"===t.desc&&this.close(Pw.UID_BANNED),void this.close()):void this.reconnect(t.action,Mw.SERVER_ERROR);oI.error("[".concat(this.clientId,"] ignore error: "),t.desc)}}handlePingPong(){if(!this.websocket||"connected"!==this.websocket.state)return;this.pingpongTimeoutCount>0&&this.rttRolling.add(3e3),this.pingpongTimeoutCount+=1;const e=xT("PING_PONG_TIME_OUT"),t=Date.now();this.pingpongTimeoutCount>=e&&(oI.warning("[".concat(this.clientId,"] PINGPONG Timeout. Last Socket Message: ").concat(t-this.lastMsgTime,"ms")),t-this.lastMsgTime>xT("WEBSOCKET_TIMEOUT_MIN"))?this.reconnect("retry",Mw.TIMEOUT):this.request(mR.PING,void 0,!0).then((()=>{this.pingpongTimeoutCount=0;const e=Date.now()-t;this.rttRolling.add(e),xT("REPORT_STATS")&&this.send(mR.PING_BACK,{pingpongElapse:e})})).catch((e=>{}))}handleWebsocketEvents(){this.websocket.on(yR.RECONNECT_CREATE_CONNECTION,(e=>{this.emit(gR.WS_RECONNECT_CREATE_CONNECTION,e)})),this.websocket.on(yR.ON_MESSAGE,this.onWebsocketMessage),this.websocket.on(yR.CLOSED,(()=>{this.connectionState=fR.CLOSED})),this.websocket.on(yR.FAILED,(()=>{this._disconnectedReason=Pw.NETWORK_ERROR,this.connectionState=fR.CLOSED})),this.websocket.on(yR.RECONNECTING,(e=>{this._websocketReconnectReason=e,this.joinResponse=void 0,this.connectionState===fR.CONNECTED?this.connectionState=fR.RECONNECTING:this.connectionState=fR.CONNECTING})),this.websocket.on(yR.WILL_RECONNECT,((e,t,n)=>{"retry"!==e?(oI.debug("".concat(this.clientId," websocket will_connect event, renewSession reconnectMode is ").concat(e)),this.reconnectToken=void 0):oI.debug("".concat(this.clientId," reconnect mode is retry, no need to renew session")),n(e)})),this.websocket.on(yR.CONNECTED,(()=>{this.openConnectionTime=Date.now(),this.join().catch((e=>{if(this.emit(gR.REPORT_JOIN_GATEWAY,e,this.url||""),e instanceof uw&&e.code===lw.UNEXPECTED_RESPONSE&&e.data.code===hR.ERR_NO_AUTHORIZED)return oI.warning("[".concat(this.clientId,"] reconnect no authorized, recover")),void this.reconnect("recover",Mw.SERVER_ERROR);oI.error("[".concat(this.clientId,"] join gateway request failed"),e.toString()),this.spec.forceWaitGatewayResponse?this.reconnect("tryNext",Mw.SERVER_ERROR):(this.initError=e,this.close())}))})),this.websocket.on(yR.REQUEST_NEW_URLS,((e,t)=>{$w(this,gR.REQUEST_RECOVER,this.multiIpOption).then(e).catch(t)})),this.websocket.on(yR.ON_TOKEN_PRIVILEGE_DID_EXPIRE,(()=>{this.emit(ER.ON_TOKEN_PRIVILEGE_DID_EXPIRE)}))}}var CU={exports:{}};!function(e){e.exports=(()=>{var e={8:(e,t,n)=>{n.r(t),n.d(t,{Parser:()=>C,Printer:()=>R,parse:()=>P,print:()=>D});const r="\n",o="".concat("\r").concat(r),i=" ";let a;function s(e){return e>="0"&&e<="9"}function c(e){return e>="!"&&e<="~"}function l(e){return c(e)||e>=""&&e<=""}function u(e){return"!"===e||e>="#"&&e<="'"||e>="*"&&e<="+"||e>="-"&&e<="."||e>="0"&&e<="9"||e>="A"&&e<="Z"||e>="^"&&e<="~"}function d(e){return e>="1"&&e<="9"}function A(e){return e>="A"&&e<="Z"||e>="a"&&e<="z"}function p(e){return"d"===e||"h"===e||"m"===e||"s"===e}function h(e){return e>""&&e<"\t"||e>"\v"&&e<"\f"||e>""&&e<""}function f(e){return A(e)||s(e)||"+"===e||"/"===e}function g(e){return s(e)||A(e)||"+"===e||"/"===e||"-"===e||"_"===e}function m(e){return A(e)||s(e)||"+"===e||"/"===e}function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y;(y=a||(a={})).VERSION="v",y.ORIGIN="o",y.SESSION_NAME="s",y.INFORMATION="i",y.URI="u",y.EMAIL="e",y.PHONE="p",y.CONNECTION="c",y.BANDWIDTH="b",y.TIME="t",y.REPEAT="r",y.ZONE_ADJUSTMENTS="z",y.KEY="k",y.ATTRIBUTE="a",y.MEDIA="m";class b{consumeText(e,t){let n=t;for(;n<e.length;){const t=e[n];if("\0"===t||"\r"===t||t===r)break;n+=1}if(n-t==0)throw new Error("Invalid text, at ".concat(e));return n}consumeUnicastAddress(e,t,n){return this.consumeTill(e,t,i)}consumeOneOrMore(e,t,n){let r=t;for(;n(e[r]);)r++;if(r-t==0)throw new Error("Invalid rule at ".concat(t,"."));return r}consumeSpace(e,t){if(e[t]===i)return t+1;throw new Error("Invalid space at ".concat(t,"."))}consumeIP4Address(e,t){let n=t;for(let r=0;r<4;r++)if(n=this.consumeDecimalUChar(e,n),3!==r){if("."!==e[n])throw new Error("Invalid IP4 address.");n++}return n}consumeDecimalUChar(e,t){let n=t;for(let o=0;o<3&&s(e[n]);o++,n++);if(n-t==0)throw new Error("Invalid decimal uchar.");const r=parseInt(e.slice(t,n));if(r>=0&&r<=255)return n;throw new Error("Invalid decimal uchar")}consumeIP6Address(e,t){let n=this.consumeHexpart(e,t);return":"===e[n]?(n+=1,n=this.consumeIP4Address(e,n),n):n}consumeHexpart(e,t){let n=t;if(":"===e[n]&&":"===e[n+1]){n+=2;try{n=this.consumeHexseq(e,n)}catch(r){}return n}if(n=this.consumeHexseq(e,n),":"===e[n]&&":"===e[n+1]){n+=2;try{n=this.consumeHexseq(e,n)}catch(r){}return n}return n}consumeHexseq(e,t){let n=t;for(;n=this.consumeHex4(e,n),":"===e[n]&&":"!==e[n+1];)n+=1;return n}consumeHex4(e,t){let n=0;for(;n<4;n++)if(!((r=e[t+n])>="0"&&r<="9"||r>="a"&&r<="f"||r>="A"&&r<="F")){if(0===n)throw new Error("Invalid hex 4");break}var r;return t+n}consumeFQDN(e,t){let n=t;for(;s(e[n])||A(e[n])||"-"===e[n]||"."===e[n];)n+=1;if(n-t<4)throw new Error("Invalid FQDN");return n}consumeExtnAddr(e,t){return this.consumeOneOrMore(e,t,l)}consumeMulticastAddress(e,t,n){switch(n){case"IP4":case"ip4":return this.consumeIP4MulticastAddress(e,t);case"IP6":case"ip6":return this.consumeIP6MulticastAddress(e,t);default:try{return this.consumeFQDN(e,t)}catch(r){return this.consumeExtnAddr(e,t)}}}consumeIP6MulticastAddress(e,t){const n=this.consumeHexpart(e,t);return"/"===e[n]?this.consumeInteger(e,n+1):n}consumeIP4MulticastAddress(e,t){let n=t+3;const r=e.slice(t,n),o=parseInt(r);if(o<224||o>239)throw new Error("Invalid IP4 multicast address, IPv4 multicast addresses may be in the range 224.0.0.0 to 239.255.255.255.");for(let i=0;i<3;i++){if("."!==e[n])throw new Error("Invalid IP4 multicast address.");n+=1,n=this.consumeDecimalUChar(e,n)}return"/"===e[n]&&(n+=1),n=this.consumeTTL(e,n),"/"===e[n]&&(n=this.consumeInteger(e,n)),n}consumeInteger(e,t){if(!d(e[t]))throw new Error("Invalid integer.");for(t+=1;s(e[t]);)t+=1;return t}consumeTTL(e,t){if("0"===e[t])return t+1;if(!d(e[t]))throw new Error("Invalid TTL.");t+=1;for(let n=0;n<2&&s(e[t]);n++)t+=1;return t}consumeToken(e,t){return this.consumeOneOrMore(e,t,u)}consumeTime(e,t){let n=t;if("0"===e[n])return n+1;for(d(e[n])&&(n+=1);s(e[n]);)n++;if(n-t<10)throw new Error("Invalid time");return n}consumeAddress(e,t){return this.consumeTill(e,t,i)}consumeTypedTime(e,t){let n=t;return n=this.consumeOneOrMore(e,n,s),p(e[n])?n+1:n}consumeRepeatInterval(e,t){if(!d(e[t]))throw new Error("Invalid repeat interval");for(t+=1;s(e[t]);)t+=1;return p(e[t])&&(t+=1),t}consumePort(e,t){return this.consumeOneOrMore(e,t,s)}consume(e,t,n){for(let r=0;r<n.length;r++){if(t+r>=e.length)throw new Error("consume exceeding value length");if(e[t+r]!==n[r])throw new Error("consume ".concat(n," failed at ").concat(r))}return t+n.length}consumeTill(e,t,n){let r=t;for(;r<e.length&&("string"!=typeof n||e[r]!==n)&&("function"!=typeof n||!n(e[r]));)r++;return r}}class C extends b{constructor(){super(),v(this,"records",[]),v(this,"currentLine",0)}parse(e){const t=this.probeEOL(e);this.records=e.split(t).filter((e=>!!Up(e).call(e))).map(this.parseLine),this.currentLine=0;const n=this.parseVersion(),r=this.parseOrigin(),o=this.parseSessionName(),i=this.parseInformation(),a=this.parseUri(),s=this.parseEmail(),c=this.parsePhone(),l=this.parseConnection(),u=this.parseBandWidth(),d=this.parseTimeFields(),A=this.parseKey(),p=this.parseSessionAttribute(),h=this.parseMediaDescription();if(this.currentLine!==this.records.length)throw new Error("parsing failed, non exhaustive sdp lines.");return{version:n,origin:r,sessionName:o,information:i,uri:a,emails:s,phones:c,connection:l,bandwidths:u,timeFields:d,key:A,attributes:p,mediaDescriptions:h}}getCurrentRecord(){const e=this.records[this.currentLine];if(!e)throw new Error("Record doesn't exit.");return e}probeEOL(e){for(let t=0;t<e.length;t++)if(e[t]===r)return"\r"===e[t-1]?o:r;throw new Error("Invalid newline character.")}parseLine(e,t){if(e.length<2)throw new Error("Invalid sdp line, sdp line should be of form <type>=<value>.");const n=e[0];if("="!==e[1])throw new Error('Invalid sdp line, <type> should be a single character followed by an "=" sign.');return{type:n,value:e.slice(2),line:t,cur:0}}parseSessionAttribute(){const e=new w;for(;this.currentLine<this.records.length;){const t=this.getCurrentRecord();if(t.type!==a.ATTRIBUTE)break;const n={attField:this.extractOneOrMore(t,(e=>u(e)&&":"!==e)),_cur:0};":"===t.value[t.cur]&&(t.cur+=1,n.attValue=this.extractOneOrMore(t,h)),e.parse(n),this.currentLine++}return e.digest()}parseMediaAttributes(e){const t=new T(e);for(;this.currentLine<this.records.length;){const e=this.getCurrentRecord();if(e.type!==a.ATTRIBUTE)break;const n={attField:this.extractOneOrMore(e,(e=>u(e)&&":"!==e)),_cur:0};":"===e.value[e.cur]&&(e.cur+=1,n.attValue=this.extractOneOrMore(e,h)),t.parse(n),this.currentLine++}return t.digest()}parseKey(){const e=this.getCurrentRecord();if(e.type===a.KEY){if("prompt"===e.value||"clear:"===e.value||"base64:"===e.value||"uri:"===e.value)return e.value;throw this.currentLine++,new Error("Invalid key.")}}parseZone(){const e=this.getCurrentRecord();if(e.type===a.ZONE_ADJUSTMENTS){const n=[];for(;;)try{const t=this.extract(e,this.consumeTime);this.consumeSpaceForRecord(e);let r=!1;"-"===e.value[e.cur]&&(r=!0,e.cur+=1);const o=this.extract(e,this.consumeTypedTime);n.push({time:t,typedTime:o,back:r})}catch(t){break}if(0===n.length)throw new Error("Invalid zone adjustments");return this.currentLine++,n}return[]}parseRepeat(){const e=[];for(;;){const t=this.getCurrentRecord();if(t.type!==a.REPEAT)break;{const n=this.extract(t,this.consumeRepeatInterval),r=this.parseTypedTime(t);e.push({repeatInterval:n,typedTimes:r}),this.currentLine++}}return e}parseTypedTime(e){const t=[];for(;;)try{this.consumeSpaceForRecord(e),t.push(this.extract(e,this.consumeTypedTime))}catch(n){break}if(0===t.length)throw new Error("Invalid typed time.");return t}parseTime(){const e=this.getCurrentRecord(),t=this.extract(e,this.consumeTime);this.consumeSpaceForRecord(e);const n=this.extract(e,this.consumeTime);return this.currentLine++,{startTime:t,stopTime:n}}parseBandWidth(){const e=[];for(;this.currentLine<this.records.length;){const t=this.getCurrentRecord();if(t.type!==a.BANDWIDTH)break;{const n=this.extractOneOrMore(t,u);if(":"!==t.value[t.cur])throw new Error("Invalid bandwidth field.");t.cur++;const r=this.extractOneOrMore(t,s);e.push({bwtype:n,bandwidth:r}),this.currentLine++}}return e}parseVersion(){const e=this.getCurrentRecord();if(e.type!==a.VERSION)throw new Error("first sdp record must be version");const t=e.value.slice(0,this.consumeOneOrMore(e.value,0,s));if(t.length!==e.value.length)throw new Error('invalid proto version, "v='.concat(e.value,'"'));return this.currentLine++,t}parseOrigin(){const e=this.getCurrentRecord();if(e.type!==a.ORIGIN)throw new Error("second line of sdp must be origin");const t=this.extractOneOrMore(e,l);this.consumeSpaceForRecord(e);const n=this.extractOneOrMore(e,s);this.consumeSpaceForRecord(e);const r=this.extractOneOrMore(e,s);this.consumeSpaceForRecord(e);const o=this.extractOneOrMore(e,u);this.consumeSpaceForRecord(e);const i=this.extractOneOrMore(e,u);this.consumeSpaceForRecord(e);const c=this.extract(e,this.consumeUnicastAddress);return this.currentLine++,{username:t,sessId:n,sessVersion:r,nettype:o,addrtype:i,unicastAddress:c}}parseSessionName(){const e=this.getCurrentRecord();if(e.type===a.SESSION_NAME){const t=this.extract(e,this.consumeText);return this.currentLine++,t}}parseInformation(){const e=this.getCurrentRecord();if(e.type!==a.INFORMATION)return;const t=this.extract(e,this.consumeText);return this.currentLine++,t}parseUri(){const e=this.getCurrentRecord();if(e.type===a.URI)return this.currentLine++,e.value}parseEmail(){const e=[];for(;;){const t=this.getCurrentRecord();if(t.type!==a.EMAIL)break;e.push(t.value),this.currentLine++}return e}parsePhone(){const e=[];for(;;){const t=this.getCurrentRecord();if(t.type!==a.PHONE)break;e.push(t.value),this.currentLine++}return e}parseConnection(){const e=this.getCurrentRecord();if(e.type===a.CONNECTION){const t=this.extractOneOrMore(e,u);this.consumeSpaceForRecord(e);const n=this.extractOneOrMore(e,u);this.consumeSpaceForRecord(e);const r=this.extract(e,this.consumeAddress);return this.currentLine++,{nettype:t,addrtype:n,address:r}}}parseMedia(){const e=this.getCurrentRecord(),t=this.extract(e,this.consumeToken);this.consumeSpaceForRecord(e);let n=this.extract(e,this.consumePort);"/"===e.value[e.cur]&&(e.cur+=1,n+=this.extract(e,this.consumeInteger)),this.consumeSpaceForRecord(e);const r=[];for(r.push(this.extract(e,this.consumeToken));"/"===e.value[e.cur];)e.cur+=1,r.push(this.extract(e,this.consumeToken));if(0===r.length)throw new Error("Invalid proto");const o=this.parseFmt(e);return this.currentLine++,{mediaType:t,port:n,protos:r,fmts:o}}parseTimeFields(){const e=[];for(;this.getCurrentRecord().type===a.TIME;){const t=this.parseTime(),n=this.parseRepeat(),r=this.parseZone();e.push({time:t,repeats:n,zones:r})}return e}parseMediaDescription(){const e=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===a.MEDIA;){const t=this.parseMedia(),n=this.parseInformation(),r=this.parseConnections(),o=this.parseBandWidth(),i=this.parseKey(),a=this.parseMediaAttributes(t);e.push({media:t,information:n,connections:r,bandwidths:o,key:i,attributes:a})}return e}parseConnections(){const e=[];for(;this.currentLine<this.records.length&&this.getCurrentRecord().type===a.CONNECTION;)e.push(this.parseConnection());return e}parseFmt(e){const t=[];for(;;)try{this.consumeSpaceForRecord(e),t.push(this.extract(e,this.consumeToken))}catch(n){break}if(0===t.length)throw new Error("Invalid fmts");return t}extract(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];const i=t.call(this,e.value,e.cur,...r),a=e.value.slice(e.cur,i);return e.cur=i,a}extractOneOrMore(e,t){const n=this.consumeOneOrMore(e.value,e.cur,t),r=e.value.slice(e.cur,n);return e.cur=n,r}consumeSpaceForRecord(e){if(e.value[e.cur]!==i)throw new Error("Invalid space at ".concat(e.cur,"."));e.cur+=1}}class S extends b{constructor(){super(...arguments),v(this,"attributes",void 0),v(this,"digested",!1)}extractOneOrMore(e,t,n){const r=this.consumeOneOrMore(e.attValue,e._cur,t),o=e.attValue.slice(e._cur,r),[i,a]=n||[];if("number"==typeof i&&o.length<i)throw new Error("error in length, should be more or equal than ".concat(i," characters."));if("number"==typeof a&&o.length>a)throw new Error("error in length, should be less or equal than ".concat(a," characters."));return e._cur=r,o}consumeAttributeSpace(e){if(e.attValue[e._cur]!==i)throw new Error("Invalid space at ".concat(e._cur,"."));e._cur+=1}extract(e,t){if(!e.attValue)throw new Error("Nothing to extract from attValue.");for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];const i=t.call(this,e.attValue,e._cur,...r),a=e.attValue.slice(e._cur,i);return e._cur=i,a}atEnd(e){if(!e.attValue)throw new Error;return e._cur>=e.attValue.length}peekChar(e){if(!e.attValue)throw new Error;return e.attValue[e._cur]}peek(e,t){if(!e.attValue)throw new Error;for(let n=0;n<t.length;n++)if(t[n]!==e.attValue[e._cur+n])return!1;return!0}parseIceUfrag(e){if(this.attributes.iceUfrag)throw new Error("Invalid ice-ufrag, should be only a single line if 'a=ice-ufrag'");this.attributes.iceUfrag=this.extractOneOrMore(e,f,[4,256])}parseIcePwd(e){if(this.attributes.icePwd)throw new Error("Invalid ice-pwd, should be only a single line if 'a=ice-pwd'");this.attributes.icePwd=this.extractOneOrMore(e,f,[22,256])}parseIceOptions(e){if(this.attributes.iceOptions)throw new Error("Invalid ice-options, should be only one 'ice-options' line");const t=[];for(;!this.atEnd(e);){t.push(this.extractOneOrMore(e,f));try{this.consumeAttributeSpace(e)}catch(n){if(this.atEnd(e))break;throw n}}this.attributes.iceOptions=t}parseFingerprint(e){const t=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e);const n=this.extract(e,this.consumeTill);this.attributes.fingerprints.push({hashFunction:t,fingerprint:n})}parseExtmap(e){const t=this.extractOneOrMore(e,s);let n;"/"===this.peekChar(e)&&(this.extract(e,this.consume,"/"),n=this.extract(e,this.consumeToken)),this.consumeAttributeSpace(e);const r=this.extract(e,this.consumeTill,i),o=E(E({entry:parseInt(t,10)},n&&{direction:n}),{},{extensionName:r});this.peekChar(e)===i&&(this.consumeAttributeSpace(e),o.extensionAttributes=this.extract(e,this.consumeTill)),this.attributes.extmaps.push(o)}parseSetup(e){if(this.attributes.setup)throw new Error("must only be one single 'a=setup' line.");const t=this.extract(e,this.consumeTill);if("active"!==t&&"passive"!==t&&"actpass"!==t&&"holdconn"!==t)throw new Error("role must be one of 'active', 'passive', 'actpass', 'holdconn'.");this.attributes.setup=t}}class w extends S{constructor(){super(...arguments),v(this,"attributes",{unrecognized:[],groups:[],extmaps:[],fingerprints:[],identities:[]})}parse(e){if(this.digested)throw new Error("already digested");try{switch(e.attField){case"group":this.parseGroup(e);break;case"ice-lite":this.parseIceLite();break;case"ice-ufrag":this.parseIceUfrag(e);break;case"ice-pwd":this.parseIcePwd(e);break;case"ice-options":this.parseIceOptions(e);break;case"fingerprint":this.parseFingerprint(e);break;case"setup":this.parseSetup(e);break;case"tls-id":this.parseTlsId(e);break;case"identity":this.parseIdentity(e);break;case"extmap":this.parseExtmap(e);break;case"msid-semantic":this.parseMsidSemantic(e);break;default:e.ignored=!0,this.attributes.unrecognized.push(e)}}catch(t){throw console.error("parsing session attribute ".concat(e.attField,' error, "a=').concat(e.attField,":").concat(e.attValue,'"')),t}if(!e.ignored&&e.attValue&&!this.atEnd(e))throw new Error("attribute parsing error")}digest(){return this.digested=!0,this.attributes}parseGroup(e){const t=this.extract(e,this.consumeToken),n=[];for(;!this.atEnd(e)&&this.peekChar(e)===i;)this.consumeAttributeSpace(e),n.push(this.extract(e,this.consumeToken));this.attributes.groups.push({semantic:t,identificationTag:n})}parseIceLite(){if(this.attributes.iceLite)throw new Error("Invalid ice-lite, should be only a single line of 'a=ice-lite'");this.attributes.iceLite=!0}parseTlsId(e){if(this.attributes.tlsId)throw new Error("must be only one tld-id line");this.attributes.tlsId=this.extractOneOrMore(e,g)}parseIdentity(e){const t=this.extractOneOrMore(e,m),n=[];for(;!this.atEnd(e)&&this.peekChar(e)===i;){this.consumeAttributeSpace(e);const t=this.extract(e,this.consumeToken);this.extract(e,this.consume,"=");const r=this.extractOneOrMore(e,(e=>e!==i&&h(e)));n.push({name:t,value:r})}this.attributes.identities.push({assertionValue:t,extensions:n})}parseMsidSemantic(e){this.peekChar(e)===i&&this.consumeAttributeSpace(e);const t={semantic:this.extract(e,this.consumeToken),identifierList:[]};for(;;){try{this.consumeAttributeSpace(e)}catch(n){break}if("*"===this.peekChar(e)){this.extract(e,this.consume,"*"),t.applyForAll=!0;break}{const n=this.extract(e,this.consumeTill,i);t.identifierList.push(n)}}this.attributes.msidSemantic=t}}class T extends S{constructor(e){super(),v(this,"attributes",void 0),-1!==e.protos.indexOf("RTP")||e.protos.indexOf("rtp"),this.attributes={unrecognized:[],candidates:[],extmaps:[],fingerprints:[],imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[]}}parse(e){if(this.digested)throw new Error("already digested");try{switch(e.attField){case"extmap":this.parseExtmap(e);break;case"setup":this.parseSetup(e);break;case"ice-ufrag":this.parseIceUfrag(e);break;case"ice-pwd":this.parseIcePwd(e);break;case"ice-options":this.parseIceOptions(e);break;case"candidate":this.parseCandidate(e);break;case"remote-candidate":this.parseRemoteCandidate(e);break;case"end-of-candidates":this.parseEndOfCandidates();break;case"fingerprint":this.parseFingerprint(e);break;case"rtpmap":this.parseRtpmap(e);break;case"ptime":this.parsePtime(e);break;case"maxptime":this.parseMaxPtime(e);break;case"sendrecv":case"recvonly":case"sendonly":case"inactive":this.parseDirection(e);break;case"ssrc":this.parseSSRC(e);break;case"fmtp":this.parseFmtp(e);break;case"rtcp-fb":this.parseRtcpFb(e);break;case"rtcp-mux":this.parseRTCPMux();break;case"rtcp-mux-only":this.parseRTCPMuxOnly();break;case"rtcp-rsize":this.parseRTCPRsize();break;case"rtcp":this.parseRTCP(e);break;case"mid":this.parseMid(e);break;case"msid":this.parseMsid(e);break;case"imageattr":this.parseImageAttr(e);break;case"rid":this.parseRid(e);break;case"simulcast":this.parseSimulcast(e);break;case"sctp-port":this.parseSctpPort(e);break;case"max-message-size":this.parseMaxMessageSize(e);break;case"ssrc-group":this.parseSSRCGroup(e);break;default:e.ignored=!0,this.attributes.unrecognized.push(e)}}catch(t){throw console.error("parsing media attribute ".concat(e.attField,' error, "a=').concat(e.attField,":").concat(e.attValue,'"')),t}if(!e.ignored&&e.attValue&&!this.atEnd(e))throw new Error("attribute parsing error")}parseCandidate(e){const t=this.extractOneOrMore(e,f,[1,32]);this.consumeAttributeSpace(e);const n=this.extractOneOrMore(e,s,[1,5]);this.consumeAttributeSpace(e);const r=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e);const o=this.extractOneOrMore(e,s,[1,10]);this.consumeAttributeSpace(e);const a=this.extract(e,this.consumeAddress);this.consumeAttributeSpace(e);const l=this.extract(e,this.consumePort);this.consumeAttributeSpace(e),this.extract(e,this.consume,"typ"),this.consumeAttributeSpace(e);const u={foundation:t,componentId:n,transport:r,priority:o,connectionAddress:a,port:l,type:this.extract(e,this.consumeToken),extension:{}};for(this.peek(e," raddr")&&(this.extract(e,this.consume," raddr"),this.consumeAttributeSpace(e),u.relAddr=this.extract(e,this.consumeAddress)),this.peek(e," rport")&&(this.extract(e,this.consume," rport"),this.consumeAttributeSpace(e),u.relPort=this.extract(e,this.consumePort));this.peekChar(e)===i;){this.consumeAttributeSpace(e);const t=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e),u.extension[t]=this.extractOneOrMore(e,c)}this.attributes.candidates.push(u)}parseRemoteCandidate(e){const t=[];for(;;){const r=this.extractOneOrMore(e,s,[1,5]);this.consumeAttributeSpace(e);const o=this.extract(e,this.consumeAddress);this.consumeAttributeSpace(e);const i=this.extract(e,this.consumePort);t.push({componentId:r,connectionAddress:o,port:i});try{this.consumeAttributeSpace(e)}catch(n){break}}this.attributes.remoteCandidatesList.push(t)}parseEndOfCandidates(){if(this.attributes.endOfCandidates)throw new Error("must be only one line of end-of-candidates");this.attributes.endOfCandidates=!0}parseRtpmap(e){const t=this.extract(e,this.consumeToken);this.consumeAttributeSpace(e);const n=this.extract(e,this.consumeTill,"/");this.extract(e,this.consume,"/");const r={encodingName:n,clockRate:this.extractOneOrMore(e,s)};this.atEnd(e)||"/"!==this.peekChar(e)||(this.extract(e,this.consume,"/"),r.encodingParameters=parseInt(this.extract(e,this.consumeTill),10));const o=this.attributes.payloads.find((e=>e.payloadType===parseInt(t,10)));o?o.rtpMap=r:this.attributes.payloads.push({payloadType:parseInt(t,10),rtpMap:r,rtcpFeedbacks:[]})}parsePtime(e){if(this.attributes.ptime)throw new Error("must be only one line of ptime");this.attributes.ptime=this.extract(e,this.consumeTill)}parseMaxPtime(e){if(this.attributes.maxPtime)throw new Error("must be only one line of ptime");this.attributes.maxPtime=this.extract(e,this.consumeTill)}parseDirection(e){if(this.attributes.direction)throw new Error("must be only one line of direction info");this.attributes.direction=e.attField}parseSSRC(e){const t=this.extractOneOrMore(e,s);this.consumeAttributeSpace(e);const n=this.extract(e,this.consumeTill,":");let r;":"===this.peekChar(e)&&(this.extract(e,this.consume,":"),r=this.extract(e,this.consumeTill));const o=this.attributes.ssrcs.find((e=>e.ssrcId===parseInt(t,10)));o?o.attributes[n]=r:this.attributes.ssrcs.push({ssrcId:parseInt(t,10),attributes:{[n]:r}})}parseFmtp(e){const t=this.extract(e,this.consumeTill,i);this.consumeAttributeSpace(e);const n=this.extract(e,this.consumeTill),r={};n.split(";").forEach((e=>{let[t,n]=e.split("=");t=Up(t).call(t);const o="string"==typeof n?Up(n).call(n):null;"string"==typeof t&&t.length>0&&(r[t]=o)}));const o=this.attributes.payloads.find((e=>e.payloadType===parseInt(t,10)));o?o.fmtp={parameters:r}:this.attributes.payloads.push({payloadType:parseInt(t,10),rtcpFeedbacks:[],fmtp:{parameters:r}})}parseFmtParameters(e){const t={},n=this.extract(e,this.consumeTill,"=");e._cur++;const r=this.extract(e,this.consumeTill,";");for(t[n]=r;";"===e.attValue[e._cur];){const n=this.extract(e,this.consumeTill,"=");e._cur++;const r=this.extract(e,this.consumeTill,";");t[n]=r}return t}parseRtcpFb(e){let t="";t="*"===this.peekChar(e)?this.extract(e,this.consume,"*"):this.extract(e,this.consumeTill,i),this.consumeAttributeSpace(e);const n=this.extract(e,this.consumeTill,i);let r;if("trr-int"===n)r={type:n,interval:this.extract(e,this.consumeTill)};else{const t={type:n};this.peekChar(e)===i&&(this.consumeAttributeSpace(e),t.parameter=this.extract(e,this.consumeToken),this.peekChar(e)===i&&(t.additional=this.extract(e,this.consumeTill))),r=t}if("*"===t)this.attributes.rtcpFeedbackWildcards.push(r);else{const e=this.attributes.payloads.find((e=>e.payloadType===parseInt(t,10)));e?e.rtcpFeedbacks.push(r):this.attributes.payloads.push({payloadType:parseInt(t,10),rtcpFeedbacks:[r]})}}parseRTCPMux(){if(this.attributes.rtcpMux)throw new Error("must be single line of rtcp-mux");this.attributes.rtcpMux=!0}parseRTCPMuxOnly(){if(this.attributes.rtcpMuxOnly)throw new Error("must be single line of rtcp-only");this.attributes.rtcpMuxOnly=!0}parseRTCPRsize(){if(this.attributes.rtcpRsize)throw new Error("must be single line of rtcp-rsize");this.attributes.rtcpRsize=!0}parseRTCP(e){if(this.attributes.rtcp)throw new Error("must be single line of rtcp");const t={port:this.extract(e,this.consumePort)};this.peekChar(e)===i&&(this.consumeAttributeSpace(e),t.netType=this.extractOneOrMore(e,u),this.consumeAttributeSpace(e),t.addressType=this.extractOneOrMore(e,u),this.consumeAttributeSpace(e),t.address=this.extract(e,this.consumeAddress)),this.attributes.rtcp=t}parseMsid(e){const t={id:this.extractOneOrMore(e,u,[1,64])};this.peekChar(e)===i&&(this.consumeAttributeSpace(e),t.appdata=this.extractOneOrMore(e,u,[1,64])),this.attributes.msids.push(t)}parseImageAttr(e){this.attributes.imageattr.push(e.attValue)}parseRid(e){const t=this.extractOneOrMore(e,(e=>A(e)||s(e)||"_"===e||"-"===e));this.consumeAttributeSpace(e);const n={id:t,direction:this.extract(e,this.consumeToken),params:[]};if(this.peekChar(e)===i){if(this.consumeAttributeSpace(e),this.peek(e,"pt=")){this.extract(e,this.consume,"pt=");const t=[];for(;;){const n=this.extract(e,this.consumeToken);t.push(n);try{this.extract(e,this.consume,",")}catch(r){break}}n.payloads=t,this.peekChar(e)===i&&this.extract(e,this.consume,i)}for(;;){const t=this.extract(e,this.consumeToken);switch(t){case"depend":{const r={type:t,rids:this.extract(e,this.consume,"=").split(",")};n.params.push(r);break}default:{const r={type:t};"="===this.peekChar(e)&&(this.extract(e,this.consume,"="),r.val=this.extract(e,this.consumeTill,";")),n.params.push(r)}}try{this.extract(e,this.consume,";")}catch(r){break}}}this.attributes.rids.push(n)}parseSimulcast(e){if(this.attributes.simulcast)throw new Error("must be single line of simulcast");this.attributes.simulcast=e.attValue,this.extract(e,this.consumeTill)}parseSctpPort(e){this.attributes.sctpPort=this.extractOneOrMore(e,s,[1,5])}parseMaxMessageSize(e){this.attributes.maxMessageSize=this.extractOneOrMore(e,s,[1,void 0])}digest(){return this.digested=!0,this.attributes}parseMid(e){this.attributes.mid=this.extract(e,this.consumeToken)}parseSSRCGroup(e){const t=this.extract(e,this.consumeToken),n=[];for(;;)try{this.consumeAttributeSpace(e);const t=this.extract(e,this.consumeInteger);n.push(parseInt(t,10))}catch(r){break}this.attributes.ssrcGroups.push({semantic:t,ssrcIds:n})}}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class R{constructor(){I(this,"eol",o)}print(e,t){let n="";return t&&(this.eol=t),n+=this.printVersion(e.version),n+=this.printOrigin(e.origin),n+=this.printSessionName(e.sessionName),n+=this.printInformation(e.information),n+=this.printUri(e.uri),n+=this.printEmail(e.emails),n+=this.printPhone(e.phones),n+=this.printConnection(e.connection),n+=this.printBandwidth(e.bandwidths),n+=this.printTimeFields(e.timeFields),n+=this.printKey(e.key),n+=this.printSessionAttributes(e.attributes),n+=this.printMediaDescription(e.mediaDescriptions),n}printVersion(e){return"v=".concat(e).concat(this.eol)}printOrigin(e){return"o=".concat(e.username," ").concat(e.sessId," ").concat(e.sessVersion," ").concat(e.nettype," ").concat(e.addrtype," ").concat(e.unicastAddress).concat(this.eol)}printSessionName(e){return e?"s=".concat(e).concat(this.eol):""}printInformation(e){return e?"i=".concat(e).concat(this.eol):""}printUri(e){return e?"u=".concat(e).concat(this.eol):""}printEmail(e){let t="";for(const n of e)t+="e=".concat(n).concat(this.eol);return t}printPhone(e){let t="";for(const n of e)t+="e=".concat(n).concat(this.eol);return t}printConnection(e){return e?"c=".concat(e.nettype," ").concat(e.addrtype," ").concat(e.address).concat(this.eol):""}printBandwidth(e){let t="";for(const n of e)t+="b=".concat(n.bwtype,":").concat(n.bandwidth).concat(this.eol);return t}printTimeFields(e){let t="";for(const n of e){t+="t=".concat(n.time.startTime," ").concat(n.time.startTime).concat(this.eol);for(const e of n.repeats)t+="r=".concat(e.repeatInterval," ").concat(e.typedTimes.join(" ")).concat(this.eol);n.zoneAdjustments&&(t+="z=",t+="z=".concat(n.zoneAdjustments.map((e=>"".concat(e.time," ").concat(e.back?"-":""," ").concat(e.typedTime))).join(" ")).concat(this.eol),t+=this.eol)}return t}printKey(e){return e?"k=".concat(e).concat(this.eol):""}printAttributes(e){let t="";for(const n of e)t+="a=".concat(n.attField).concat(n.attValue?":".concat(n.attValue):"").concat(this.eol);return t}printMediaDescription(e){let t="";for(const n of e)t+=this.printMedia(n.media),t+=this.printInformation(n.information),t+=this.printConnections(n.connections),t+=this.printBandwidth(n.bandwidths),t+=this.printKey(n.key),t+=this.printMediaAttributes(n);return t}printConnections(e){let t="";for(const n of e)t+=this.printConnection(n);return t}printMedia(e){return"m=".concat(e.mediaType," ").concat(e.port," ").concat(e.protos.join("/")," ").concat(e.fmts.join(" ")).concat(this.eol)}printSessionAttributes(e){return new N(this.eol).print(e)}printMediaAttributes(e){return new k(this.eol).print(e)}}class O{constructor(e){I(this,"eol",void 0),this.eol=e}printIceUfrag(e){return void 0===e?"":"a=ice-ufrag:".concat(e).concat(this.eol)}printIcePwd(e){return void 0===e?"":"a=ice-pwd:".concat(e).concat(this.eol)}printIceOptions(e){return void 0===e?"":"a=ice-options:".concat(e.join(i)).concat(this.eol)}printFingerprints(e){return e.length>0?e.map((e=>"a=fingerprint:".concat(e.hashFunction).concat(i).concat(e.fingerprint))).join(this.eol)+this.eol:""}printExtmap(e){return e.map((e=>"a=extmap:".concat(e.entry).concat(e.direction?"/".concat(e.direction):"").concat(i).concat(e.extensionName).concat(e.extensionAttributes?"".concat(i).concat(e.extensionAttributes):"").concat(this.eol))).join("")}printSetup(e){return void 0===e?"":"a=setup:".concat(e).concat(this.eol)}printUnrecognized(e){return e.map((e=>"a=".concat(e.attField).concat(e.attValue?":".concat(e.attValue):"").concat(this.eol))).join("")}}class N extends O{print(e){let t="";return t+=this.printGroups(e.groups),t+=this.printMsidSemantic(e.msidSemantic),t+=this.printIceLite(e.iceLite),t+=this.printIceUfrag(e.iceUfrag),t+=this.printIcePwd(e.icePwd),t+=this.printIceOptions(e.iceOptions),t+=this.printFingerprints(e.fingerprints),t+=this.printSetup(e.setup),t+=this.printTlsId(e.tlsId),t+=this.printIdentity(e.identities),t+=this.printExtmap(e.extmaps),t+=this.printUnrecognized(e.unrecognized),t}printGroups(e){let t="";return e.length>0&&(t+=e.map((e=>"a=group:".concat(e.semantic).concat(e.identificationTag.map((e=>"".concat(i).concat(e))).join("")).concat(this.eol))).join("")),t}printIceLite(e){return void 0===e?"":"a=ice-lite"+this.eol}printTlsId(e){return e?"a=tls-id:".concat(e).concat(this.eol):""}printIdentity(e){return 0===e.length?"":e.map((e=>"a=identity:".concat(e.assertionValue).concat(e.extensions.map((e=>"".concat(i).concat(e.name).concat(e.value?"=".concat(e.value):"")))))).join(this.eol)+this.eol}printMsidSemantic(e){if(!e)return"";let t="a=msid-semantic:".concat(e.semantic);return e.applyForAll?t+="".concat(i,"*"):e.identifierList.length>0&&(t+=e.identifierList.map((e=>"".concat(i).concat(e)))),t+this.eol}}class k extends O{print(e){const t=e.attributes;let n="";return n+=this.printRTCP(t.rtcp),n+=this.printIceUfrag(t.iceUfrag),n+=this.printIcePwd(t.icePwd),n+=this.printIceOptions(t.iceOptions),n+=this.printCandidates(t.candidates),n+=this.printRemoteCandidatesList(t.remoteCandidatesList),n+=this.printEndOfCandidates(t.endOfCandidates),n+=this.printFingerprints(t.fingerprints),n+=this.printSetup(t.setup),n+=this.printMid(t.mid),n+=this.printExtmap(t.extmaps),n+=this.printRTPRelated(t),n+=this.printPtime(t.ptime),n+=this.printMaxPtime(t.maxPtime),n+=this.printDirection(t.direction),n+=this.printSSRCGroups(t.ssrcGroups),n+=this.printSSRC(t.ssrcs),n+=this.printRTCPMux(t.rtcpMux),n+=this.printRTCPMuxOnly(t.rtcpMuxOnly),n+=this.printRTCPRsize(t.rtcpRsize),n+=this.printMSId(t.msids),n+=this.printImageattr(t.imageattr),n+=this.printRid(t.rids),n+=this.printSimulcast(t.simulcast),n+=this.printSCTPPort(t.sctpPort),n+=this.printMaxMessageSize(t.maxMessageSize),n+=this.printUnrecognized(t.unrecognized),n}printCandidates(e){return e.map((e=>"a=candidate:".concat(e.foundation).concat(i).concat(e.componentId).concat(i).concat(e.transport).concat(i).concat(e.priority).concat(i).concat(e.connectionAddress).concat(i).concat(e.port).concat(i,"typ").concat(i).concat(e.type).concat(e.relAddr?"".concat(i,"raddr").concat(i).concat(e.relAddr):"").concat(e.relPort?"".concat(i,"rport").concat(i).concat(e.relPort):"").concat(Object.keys(e.extension).map((t=>"".concat(i).concat(t).concat(i).concat(e.extension[t]))).join("")).concat(this.eol))).join("")}printRemoteCandidatesList(e){return e.map((e=>"a=remote-candidates:".concat(e.join(i)).concat(this.eol))).join("")}printEndOfCandidates(e){return void 0===e?"":"a=end-of-candidates"+this.eol}printRTPRelated(e){if(!e.payloads)return"";const t=e.payloads;let n="";n+=e.rtcpFeedbackWildcards.map((e=>this.printRTCPFeedback("*",e))).join("");for(const r of t)n+=this.printRtpMap(r.payloadType,r.rtpMap),n+=this.printFmtp(r.payloadType,r.fmtp),n+=r.rtcpFeedbacks.map((e=>this.printRTCPFeedback(r.payloadType,e))).join("");return n}printFmtp(e,t){if(!t)return"";const n=Object.keys(t.parameters);return 1===n.length&&null===t.parameters[n[0]]?"a=fmtp:".concat(e).concat(i).concat(n[0]).concat(this.eol):"a=fmtp:".concat(e).concat(i).concat(Object.keys(t.parameters).map((e=>"".concat(e,"=").concat(t.parameters[e]))).join(";")).concat(this.eol)}printRtpMap(e,t){return t?"a=rtpmap:".concat(e).concat(i).concat(t.encodingName,"/").concat(t.clockRate).concat(t.encodingParameters?"/".concat(t.encodingParameters):"").concat(this.eol):""}printRTCPFeedback(e,t){let n="a=rtcp-fb:".concat(e).concat(i),r=t;return"trr-int"===r.type?n+="ttr-int".concat(i).concat(r.interval):(n+="".concat(r.type),r.parameter&&(n+="".concat(i).concat(r.parameter),r.additional&&(n+="".concat(i).concat(r.additional)))),n+this.eol}printPtime(e){return void 0===e?"":"a=ptime:".concat(e).concat(this.eol)}printMaxPtime(e){return void 0===e?"":"a=maxptime:".concat(e).concat(this.eol)}printDirection(e){return void 0===e?"":"a=".concat(e).concat(this.eol)}printSSRC(e){return e.map((e=>Object.keys(e.attributes).map((t=>"a=ssrc:".concat(e.ssrcId.toString(10)).concat(i).concat(t).concat(e.attributes[t]?":".concat(e.attributes[t]):"").concat(this.eol))).join(""))).join("")}printRTCPMux(e){return void 0===e?"":"a=rtcp-mux".concat(this.eol)}printRTCPMuxOnly(e){return void 0===e?"":"a=rtcp-mux-only".concat(this.eol)}printRTCPRsize(e){return void 0===e?"":"a=rtcp-rsize".concat(this.eol)}printRTCP(e){if(void 0===e)return"";let t="a=rtcp:".concat(e.port);return e.netType&&(t+="".concat(i).concat(e.netType)),e.addressType&&(t+="".concat(i).concat(e.addressType)),e.address&&(t+="".concat(i).concat(e.address)),t+this.eol}printMSId(e){return e.map((e=>"a=msid:".concat(e.id).concat(e.appdata?"".concat(i).concat(e.appdata):"").concat(this.eol))).join("")}printImageattr(e){return e.map((e=>"a=imageattr:".concat(e).concat(this.eol))).join("")}printRid(e){return e.map((e=>{let t="a=rid:".concat(e.id).concat(i).concat(e.direction);return e.payloads&&(t+="".concat(i,"pt=").concat(e.payloads.join(","))),e.params.length>0&&(t+="".concat(i).concat(e.params.map((e=>"depend"===e.type?"depend=".concat(e.rids.join(",")):"".concat(e.type,"=").concat(e.val))).join(";"))),t+this.eol})).join("")}printSimulcast(e){return void 0===e?"":"a=simulcast:".concat(e).concat(this.eol)}printSCTPPort(e){return void 0===e?"":"a=sctp-port:".concat(e).concat(this.eol)}printMaxMessageSize(e){return void 0===e?"":"a=max-message-size:".concat(e).concat(this.eol)}printMid(e){return void 0===e?"":"a=mid:".concat(e).concat(this.eol)}printSSRCGroups(e){return e.map((e=>"a=ssrc-group:".concat(e.semantic).concat(e.ssrcIds.map((e=>"".concat(i).concat(e.toString(10)))).join("")).concat(this.eol))).join("")}}function P(e){return(new C).parse(e)}function D(e,t){return(new R).print(e,t)}}},t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}return n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(8)})()}(CU);var SU=CU.exports;function wU(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xT("SVC_MODE");if(xT("ENABLE_SVC"))return e in cR?e:cR.L1T3}const TU={[qR.VIDEO]:[{key:"abs-send-time",extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"},{key:"video-orientation",extensionName:"urn:3gpp:video-orientation"},{key:"draft-holmer-rmcat-transport-wide-cc-extensions-01",extensionName:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"},{key:"playout-delay",extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/playout-delay"},{key:"video-content-type",extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/video-content-type"},{key:"color-space",extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/color-space"},{key:"video-timing",extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/video-timing"}],[qR.AUDIO]:[{key:"ssrc-audio-level",extensionName:"urn:ietf:params:rtp-hdrext:ssrc-audio-level"},{key:"draft-holmer-rmcat-transport-wide-cc-extensions-01",extensionName:"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"},{key:"abs-send-time",extensionName:"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"}]};function IU(e,t,n){t.forEach((t=>{var r;const o=TU[e].find((e=>{var n;let{key:r}=e;return Or(n=t.extensionName).call(n,r)}));if(!o)return;const i=n.find((e=>{let{extensionName:t}=e;return Or(t).call(t,o.key)}));i&&Or(r=i.extensionName).call(r,"gdpr_forbidden")&&(t.extensionName=i.extensionName)}))}function RU(e,t){t.forEach((t=>{var n;const r=TU[e].find((e=>{var n;let{key:r}=e;return Or(n=t.extensionName).call(n,r)}));Or(n=t.extensionName).call(n,"gdpr_forbidden")&&r&&(t.extensionName=r.extensionName)}))}function OU(e){return"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===e||Or(e).call(e,"abs-send-time")}function NU(e){return"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===e||Or(e).call(e,"draft-holmer-rmcat-transport-wide-cc-extensions-01")}function kU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function PU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kU(Object(n),!0).forEach((function(t){Ov(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kU(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function DU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;const{filterRTX:o,filterVideoFec:i,filterAudioFec:a,filterAudioCodec:s,filterVideoCodec:c}=t,{useXR:l}=n;let u=[],d=[],A=[],p=[],h=!1,f=!1;if(SU.parse(e).mediaDescriptions.forEach((e=>{r&&r!==e.attributes.direction||("video"!==e.media.mediaType||h||(d=e.attributes.payloads,p=e.attributes.extmaps,h=!0),"audio"!==e.media.mediaType||f||(u=e.attributes.payloads,A=e.attributes.extmaps,f=!0))})),!p||0===d.length)throw new Error("Cannot get video capabilities from SDP.");if(!A||0===u.length)throw new Error("Cannot get audio capabilities from SDP.");if(d.forEach((e=>{var t;null!==(t=e.rtpMap)&&void 0!==t&&t.clockRate&&(e.rtpMap.clockRate=parseInt(e.rtpMap.clockRate)),l&&e.rtcpFeedbacks.push({type:"rrtr"})})),u.forEach((e=>{var t;null!==(t=e.rtpMap)&&void 0!==t&&t.clockRate&&(e.rtpMap.clockRate=parseInt(e.rtpMap.clockRate)),l&&e.rtcpFeedbacks.push({type:"rrtr"})})),o&&(u=u.filter((e=>{var t;return"rtx"!==(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())})),d=d.filter((e=>{var t;return"rtx"!==(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())}))),i&&(d=d.filter((e=>{var t;return!/(red)|(ulpfec)|(flexfec)/i.test((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName)||"")}))),a&&(u=u.filter((e=>{var t;return!/(red)|(ulpfec)|(flexfec)/i.test((null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName)||"")}))),s&&(null==s?void 0:s.length)>0&&(u=u.filter((e=>{var t;return Or(s).call(s,(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||"")}))),c&&(null==c?void 0:c.length)>0){const e=d.filter((e=>{var t;return Or(c).call(c,(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())||"")}));d=e.concat(o?[]:JU(e,d))}const g=xT("UNSUPPORTED_VIDEO_CODEC");return g&&g.length>0&&(d=d.filter((e=>!(e.rtpMap&&Or(g).call(g,e.rtpMap.encodingName.toLowerCase()))))),{audioCodecs:u,videoCodecs:d,audioExtensions:A,videoExtensions:p}}function LU(e){const t=SU.parse(e);let n,r;for(const o of t.mediaDescriptions){if(!n){const e=o.attributes.iceUfrag,t=o.attributes.icePwd;if(!e||!t)throw new Error("Cannot get iceUfrag or icePwd from SDP.");n={iceUfrag:e,icePwd:t}}if(!r){const e=o.attributes.fingerprints;e.length>0&&(r={fingerprints:e})}}if(!r&&t.attributes.fingerprints.length>0&&(r={fingerprints:t.attributes.fingerprints}),!r||!n)throw new Error("Cannot get iceParameters or dtlsParameters from SDP.");return{iceParameters:n,dtlsParameters:r}}function BU(e,t){const n=[],r=e.attributes.ssrcGroups.filter((e=>"FID"===e.semantic)),o=e.attributes.ssrcGroups.find((e=>"SIM"===e.semantic)),i=e.attributes.ssrcs;if(o)o.ssrcIds.forEach((e=>{var o;const i=null===(o=r.find((t=>t.ssrcIds[0]===e)))||void 0===o?void 0:o.ssrcIds[1];n.push({ssrcId:e,rtx:t?i:void 0})}));else if(r.length>0){const e=r[0].ssrcIds[0],o=r[0].ssrcIds[1];n.push({ssrcId:e,rtx:t?o:void 0})}else{if(0===i.length)throw new Error("No ssrcs found on local media description.");n.push({ssrcId:i[0].ssrcId})}return n}function UU(e,t,n){const{cname:r}=e;let o=[];t&&(o=MU(t)),0===o.length&&(o=e.iceParameters.candidates.map((e=>({foundation:e.foundation,componentId:"1",transport:e.protocol,priority:e.priority.toString(),connectionAddress:e.ip,port:e.port.toString(),type:e.type,extension:{}}))),oI.debug("Using candidates from gateway."));const i={fingerprints:e.dtlsParameters.fingerprints.map((e=>({hashFunction:e.algorithm,fingerprint:e.fingerprint})))},a={iceUfrag:e.iceParameters.iceUfrag,icePwd:e.iceParameters.icePwd};let s;switch(e.dtlsParameters.role){case"server":s="passive";break;case"client":s="active";break;case"auto":s="actpass"}const c=qU(e.rtpCapabilities),l=[];return Array.isArray(n)&&n.length>0&&n.forEach((e=>{l.push({kind:qR.VIDEO,ssrcId:e.v,rtx:e.v_rtx,mslabel:"".concat(e.v,"_").concat(e.a)},{kind:qR.AUDIO,ssrcId:e.a,mslabel:"".concat(e.v,"_").concat(e.a)})})),{dtlsParameters:i,iceParameters:a,candidates:o,rtpCapabilities:c,setup:s,cname:r,preSSRCs:l}}function MU(e){let t=[];return e.ip&&"number"==typeof e.port&&(t=[{foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:e.ip,port:e.port.toString(),type:"host",extension:{}}],oI.debug("Using remote candidate from AP ".concat(e.ip,":").concat(e.port)),e.ip6&&(t.push({foundation:"udpcandidate",componentId:"1",transport:"udp",priority:"2103266323",connectionAddress:e.ip6,port:e.port.toString(),type:"host",extension:{}}),oI.debug("Using IPV6 remote candidate from AP ".concat(e.ip6,":").concat(e.port)))),t}function xU(e,t,n){const r=[],o=[];return e.forEach((e=>{let{ssrcId:i,rtx:a}=e;const s=aT(8,"track-"),c={ssrcId:i,attributes:PU({label:s,mslabel:n=n||aT(10,""),msid:"".concat(n," ").concat(s)},t&&{cname:t})};if(r.push(c),void 0!==a){const e={ssrcId:a,attributes:PU({label:s,mslabel:n,msid:"".concat(n," ").concat(s)},t&&{cname:t})};r.push(e),o.push({semantic:"FID",ssrcIds:[i,a]})}})),e.length>1&&o.push({semantic:"SIM",ssrcIds:e.map((e=>{let{ssrcId:t}=e;return t}))}),{ssrcs:r,ssrcGroups:o}}function FU(e,t){t instanceof rB&&e.attributes.payloads.forEach((e=>{var n;const r=null===(n=e.rtpMap)||void 0===n?void 0:n.encodingName.toLowerCase();if(!r||-1===["opus","pcmu","pcma","g722"].indexOf(r))return;e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters.minptime="10",e.fmtp.parameters.useinbandfec="1";const o=t._encoderConfig;o&&"pcmu"!==r&&"pcma"!==r&&"g722"!==r&&(o.bitrate&&!$S()&&(e.fmtp.parameters.maxaveragebitrate="".concat(Math.floor(1e3*o.bitrate))),o.sampleRate&&(e.fmtp.parameters.maxplaybackrate="".concat(o.sampleRate),e.fmtp.parameters["sprop-maxcapturerate"]="".concat(o.sampleRate)),o.stereo&&(e.fmtp.parameters.stereo="1",e.fmtp.parameters["sprop-stereo"]="1"))}))}function $U(e){const t=e.attributes.unrecognized.findIndex((e=>"x-google-flag"===e.attField&&"conference"===e.attValue));-1!==t&&e.attributes.unrecognized.splice(t,1)}function VU(e,t){var n;if(!(t instanceof KB&&t._encoderConfig&&-1===t._hints.indexOf(tD.SCREEN_TRACK)))return;const r=t._encoderConfig;UP().supportMinBitrate&&r.bitrateMin&&e.attributes.payloads.forEach((e=>{var t,n;Or(t=["h264","h265","vp8","vp9","av1"]).call(t,(null===(n=e.rtpMap)||void 0===n?void 0:n.encodingName.toLowerCase())||"")&&(e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters["x-google-min-bitrate"]="".concat(r.bitrateMin))})),UP().supportMinBitrate&&!Or(n=t._hints).call(n,tD.LOW_STREAM)&&r.bitrateMax&&e.attributes.payloads.forEach((e=>{var t,n;Or(t=["h264","h265","vp8","vp9","av1"]).call(t,(null===(n=e.rtpMap)||void 0===n?void 0:n.encodingName.toLowerCase())||"")&&(e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters["x-google-start-bitrate"]="".concat(xT("X_GOOGLE_START_BITRATE")||Math.floor(r.bitrateMax)))}))}function HU(e){if("video"!==e.media.mediaType)return;const t=PS();if(t.name!==RS.SAFARI&&t.os!==IS.IOS)return;const n=e.attributes.extmaps.findIndex((e=>/video-orientation/g.test(e.extensionName)));-1!==n&&e.attributes.extmaps.splice(n,1)}function jU(e,t,n){if(!t)return;let r,o;if("video"===e.media.mediaType?(r=n.videoExtensions,o=n.videoCodecs):(r=n.audioExtensions,o=n.audioCodecs),!0===t.twcc){const t=r.find((e=>NU(e.extensionName)));if(t){const n=t.extensionName;e.attributes.extmaps.find((e=>NU(e.extensionName)))||e.attributes.extmaps.push({entry:t.entry,extensionName:n}),(i=o,e.attributes.payloads.filter((e=>!!i.find((t=>t.payloadType===e.payloadType&&!!t.rtcpFeedbacks.find((e=>"transport-cc"===e.type))))))).forEach((e=>{e.rtcpFeedbacks.find((e=>"transport-cc"===e.type))||e.rtcpFeedbacks.push({type:"transport-cc"})}))}}else if(!1===t.twcc){const t=e.attributes.extmaps.findIndex((e=>NU(e.extensionName)));-1!==t&&e.attributes.extmaps.splice(t,1),e.attributes.payloads.forEach((e=>{const t=e.rtcpFeedbacks.findIndex((e=>"transport-cc"===e.type));-1!==t&&e.rtcpFeedbacks.splice(t,1)}))}var i;if(!0===t.remb){const t=r.find((e=>OU(e.extensionName)));if(t){const n=t.extensionName;e.attributes.extmaps.find((e=>e.extensionName===n))||e.attributes.extmaps.push({entry:t.entry,extensionName:n});const r=function(e,t){return t.filter((t=>!!e.find((e=>e.payloadType===t.payloadType&&!!e.rtcpFeedbacks.find((e=>"goog-remb"===e.type))))))}(o,e.attributes.payloads);r.forEach((e=>{e.rtcpFeedbacks.find((e=>"goog-remb"===e.type))||e.rtcpFeedbacks.push({type:"goog-remb"})}))}}else if(!1===t.remb){const t=e.attributes.extmaps.findIndex((e=>OU(e.extensionName)));-1!==t&&e.attributes.extmaps.splice(t,1),e.attributes.payloads.forEach((e=>{const t=e.rtcpFeedbacks.findIndex((e=>"goog-remb"===e.type));-1!==t&&e.rtcpFeedbacks.splice(t,1)}))}}function QU(e,t,n){if($S())return;if("video"!==e.media.mediaType)return;if(!(t instanceof KB))return;if("vp9"!==n&&"vp8"!==n)return;if("vp8"===n&&!xT("SIMULCAST"))return;if("vp9"===n&&xT("ENABLE_SVC"))return;if(void 0===t._scalabilityMode||t._scalabilityMode.numSpatialLayers<=1)return;const r="vp8"===n?2:t._scalabilityMode.numSpatialLayers,o=e.attributes.ssrcs[0],i=e.attributes.ssrcGroups.find((e=>"FID"===e.semantic&&e.ssrcIds[0]===o.ssrcId)),a={semantic:"SIM",ssrcIds:[o.ssrcId]};for(let s=1;s<r;s++)e.attributes.ssrcs.push({ssrcId:o.ssrcId+s,attributes:qw(o.attributes)}),a.ssrcIds.push(o.ssrcId+s),i&&(e.attributes.ssrcs.push({ssrcId:i.ssrcIds[1]+s,attributes:qw(o.attributes)}),e.attributes.ssrcGroups.push({semantic:"FID",ssrcIds:[o.ssrcId+s,i.ssrcIds[1]+s]}));e.attributes.ssrcGroups.unshift(a)}async function GU(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=new RTCPeerConnection;n.addTransceiver("video",{direction:"sendonly"}),n.addTransceiver("audio",{direction:"sendonly"}),n.addTransceiver("video",{direction:"recvonly"}),n.addTransceiver("audio",{direction:"recvonly"});const r=(await n.createOffer()).sdp,{send:o,recv:i,sendrecv:a}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const r=DU(n,e,t,"sendonly"),o=DU(n,e,t,"recvonly"),i={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},a={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},s={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(WU(r,o,"videoExtensions",i,a,s),WU(r,o,"videoCodecs",i,a,s),WU(r,o,"audioExtensions",i,a,s),WU(r,o,"audioCodecs",i,a,s),xT("RAISE_H264_BASELINE_PRIORITY")){const e=[],t=[];s.videoCodecs.forEach(((n,r)=>{var o;if("h264"===(null===(o=n.rtpMap)||void 0===o?void 0:o.encodingName.toLocaleLowerCase())){var i,a;const o=s.videoCodecs[r+1],c=o&&nM(n,o),l=null===(i=n.fmtp)||void 0===i?void 0:i.parameters["profile-level-id"],u=null===(a=n.fmtp)||void 0===a?void 0:a.parameters["packetization-mode"];!l||l!==xT("FIRST_H264_PROFILE_LEVEL_ID")||xT("FIRST_PACKETIZATION_MODE")&&u!==xT("FIRST_PACKETIZATION_MODE")?c?t.push([n,o]):t.push([n]):c?e.push([n,o]):e.push([n])}})),e.length>0&&t.length>0&&(oI.debug("raising H264 baseline profile priority"),s.videoCodecs.forEach(((n,r)=>{var o;if("h264"===(null===(o=n.rtpMap)||void 0===o?void 0:o.encodingName.toLocaleLowerCase())){const o=nM(n,s.videoCodecs[r+1]),i=e.shift()||t.shift()||[];i.length>0&&(o?s.videoCodecs.splice(r,2,...i):s.videoCodecs.splice(r,1,...i))}})),a.videoCodecs=a.videoCodecs.filter((e=>{var t,n;return!("h264"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLocaleLowerCase())&&(null===(n=e.fmtp)||void 0===n?void 0:n.parameters["profile-level-id"])!==xT("FIRST_H264_PROFILE_LEVEL_ID"))})),xT("FILTER_SEND_H264_BASELINE")&&(i.videoCodecs=i.videoCodecs.filter((e=>{var t,n;return!("h264"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLocaleLowerCase())&&(null===(n=e.fmtp)||void 0===n?void 0:n.parameters["profile-level-id"])!==xT("FIRST_H264_PROFILE_LEVEL_ID"))}))))}return{send:i,recv:a,sendrecv:s}}(e,t,r);try{n.close()}catch(s){}return{send:o,recv:i,sendrecv:a}}function KU(){const e={audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},t=DU(arguments.length>2?arguments[2]:void 0,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},"recvonly"),n={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},r={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},o={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(WU(e,t,"videoExtensions",n,r,o),WU(e,t,"videoCodecs",n,r,o),WU(e,t,"audioExtensions",n,r,o),WU(e,t,"audioCodecs",n,r,o),xT("RAISE_H264_BASELINE_PRIORITY")){const e=o.videoCodecs.findIndex((e=>e.rtpMap&&"h264"===e.rtpMap.encodingName.toLocaleLowerCase()&&e.fmtp&&"42001f"===e.fmtp.parameters["profile-level-id"]));if(-1!==e){const t=o.videoCodecs.findIndex((e=>e.rtpMap&&"h264"===e.rtpMap.encodingName.toLocaleLowerCase()));if(t<e){oI.debug("raising H264 baseline profile priority");const n=o.videoCodecs[e];o.videoCodecs.splice(e,1),o.videoCodecs.splice(t,0,n)}-1!==t&&(r.videoCodecs=r.videoCodecs.filter((e=>!(e.rtpMap&&"h264"===e.rtpMap.encodingName.toLocaleLowerCase()&&e.fmtp&&"42001f"!==e.fmtp.parameters["profile-level-id"]))))}}return{send:n,recv:r,sendrecv:o}}function WU(e,t,n,r,o,i){if("videoExtensions"===n||"audioExtensions"===n){const a=[];return e[n].forEach((e=>{t[n].some(((t,n)=>{if(e.entry===t.entry&&e.extensionName===t.extensionName)return a.push(n),!0}))?i[n].push(e):r[n].push(e)})),void t[n].forEach(((e,t)=>{-1===a.indexOf(t)&&o[n].push(e)}))}if("videoCodecs"===n||"audioCodecs"===n){const a=[];return e[n].forEach((e=>{t[n].some(((t,n)=>{if(e.payloadType===t.payloadType&&JSON.stringify(e)===JSON.stringify(t))return a.push(n),!0}))?i[n].push(e):r[n].push(e)})),void t[n].forEach(((e,t)=>{-1===a.indexOf(t)&&o[n].push(e)}))}}function qU(e){const{send:t,recv:n,sendrecv:r}=e;if(!r){if(!t||!n)throw new Error("cannot merge rtp capabilities because one of send or recv is empty!");return{send:t,recv:n}}let o,i;return t?(o={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},o.audioCodecs=[...t.audioCodecs,...r.audioCodecs],o.videoCodecs=[...t.videoCodecs,...r.videoCodecs],o.audioExtensions=[...t.audioExtensions,...r.audioExtensions],o.videoExtensions=[...t.videoExtensions,...r.videoExtensions]):o=r,n?(i={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},i.audioCodecs=[...n.audioCodecs,...r.audioCodecs],i.videoCodecs=[...n.videoCodecs,...r.videoCodecs],i.audioExtensions=[...n.audioExtensions,...r.audioExtensions],i.videoExtensions=[...n.videoExtensions,...r.videoExtensions]):i=r,{send:o,recv:i}}function zU(e){"audio"===e.media.mediaType&&e.attributes.payloads.filter((e=>{var t;return"opus"===(null===(t=e.rtpMap)||void 0===t?void 0:t.encodingName.toLowerCase())})).forEach((e=>{e.fmtp||(e.fmtp={parameters:{}}),e.fmtp.parameters.stereo="1",e.fmtp.parameters["sprop-stereo"]="1"}))}function YU(e,t,n,r){let o=[];if(e===qR.VIDEO){if(xT("H264_PROFILE_LEVEL_ID")&&"h264"===r&&(o=t.videoCodecs.filter((e=>{var t;return Or(t=e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"").call(t,r)&&e&&e.fmtp&&e.fmtp.parameters["profile-level-id"]===xT("H264_PROFILE_LEVEL_ID")}))),!Array.isArray(o)||0===o.length){let e=[];const i=[],a=[],s=[];if(n.videoCodecs.forEach((t=>{const n=t.rtpMap&&t.rtpMap.encodingName.toLowerCase()||"";Or(n).call(n,r)?e.push(t):Or(n).call(n,"vp9")?i.push(t):Or(n).call(n,"vp8")?a.push(t):Or(n).call(n,"h264")&&s.push(t)})),0===e.length){let t="";0!==i.length?(e=i,t="vp9"):0!==a.length?(e=a,t="vp8"):0!==s.length&&(e=s,t="h264"),oI.warning("codec ".concat(r," not included in rtpCapabilities, fallback to default payloads: ").concat(t))}0!==e.length&&(o=t.videoCodecs.filter((t=>e.some((e=>e.payloadType===t.payloadType)))))}if(0===o.length&&(oI.warning("codec ".concat(r," not included in rtpCapabilities, fallback to default payloads: ").concat(t.videoCodecs[0].rtpMap&&t.videoCodecs[0].rtpMap.encodingName)),o=t.videoCodecs),xT("USE_PUB_RTX")||xT("USE_SUB_RTX")){const e=JU(o,t.videoCodecs);o=[...o,...e]}}else o=t.audioCodecs.filter((e=>{var t;return Or(t=e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"").call(t,r)})),0===o.length&&(oI.warning("codec ".concat(r," not included in rtpCapabilities, fallback to opus")),o=t.audioCodecs.filter((e=>{var t;return Or(t=e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"").call(t,"opus")})));return o}function JU(e,t){const n=e.map((e=>e.payloadType.toString()));return t.filter((e=>e.rtpMap&&"rtx"===e.rtpMap.encodingName&&e.fmtp&&e.fmtp.parameters.apt&&Or(n).call(n,e.fmtp&&e.fmtp.parameters.apt)))}async function XU(e,t,n){const r=t.toString(),o=eM(r,"offer","remote","exchangeSDP");await e.setRemoteDescription({type:"offer",sdp:r});const i=await e.createAnswer();if(!i.sdp)throw new Error("cannot get answer sdp");let a=i.sdp;a=ZU(a,n||{}),null==o||o(a||""),await e.setLocalDescription({type:"answer",sdp:a})}function ZU(e,t,n){const r=SU.parse(e),{useXR:o}=t;return r.mediaDescriptions.forEach((e=>{var t;e.attributes.mid&&(Array.isArray(n)&&!Or(n).call(n,e.attributes.mid)||("audio"===e.media.mediaType&&zU(e),o&&Or(t=["audio","video"]).call(t,e.media.mediaType)&&e.attributes.payloads.forEach((e=>{-1===e.rtcpFeedbacks.findIndex((e=>"rrtr"===e.type))&&e.rtcpFeedbacks.push({type:"rrtr"})}))))})),SU.print(r)}function eM(e,t,n,r){if(xT("SDP_LOGGING"))return oI.upload("exchanging ".concat(n," ").concat(t," SDP during P2PConnection.").concat(r,"\n"),e),"offer"===t?e=>{eM(e,"answer","local"===n?"remote":"local",r)}:void 0}function tM(e){const t=xT("COMPATIBLE_SDP_EXTENSION");return!!(Array.isArray(t)&&t.length>0)&&t.some((t=>Or(e).call(e,t)))}function nM(e,t){try{var n;return(null===(n=e.fmtp)||void 0===n?void 0:n.parameters.apt)===t.payloadType.toString()}catch(r){return!1}}function rM(e,t){return typeof xT(e)===t?xT(e):void 0}function oM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function iM(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oM(Object(n),!0).forEach((function(t){Ov(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oM(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const aM=new Map;class sM extends ww{get state(){return this._state}set state(e){if(e===this._state)return;const t=this._state;this._state=e,"DISCONNECTED"===e&&this._disconnectedReason?this.emit(xR.CONNECTION_STATE_CHANGE,e,t,this._disconnectedReason):this.emit(xR.CONNECTION_STATE_CHANGE,e,t)}get joinGatewayStartTime(){return this._joinGatewayStartTime}set joinGatewayStartTime(e){oI.debug("[".concat(this.store.clientId,"] set joinGatewayStartTime at ").concat(e)),this._joinGatewayStartTime=e}constructor(e,t){super(),Ov(this,"store",void 0),Ov(this,"joinInfo",void 0),Ov(this,"key",void 0),Ov(this,"ntpOffset",0),Ov(this,"signal",void 0),Ov(this,"role",void 0),Ov(this,"inChannelInfo",{joinAt:null,duration:0}),Ov(this,"spec",void 0),Ov(this,"_state","DISCONNECTED"),Ov(this,"_statsCollector",void 0),Ov(this,"_disconnectedReason",void 0),Ov(this,"isSignalRecover",!1),Ov(this,"hasChangeBGPAddress",!1),Ov(this,"trafficStatsInterval",void 0),Ov(this,"networkQualityInterval",void 0),Ov(this,"_joinGatewayStartTime",0),Ov(this,"_signalTimeout",!1),Ov(this,"_clientRoleOptions",void 0),Ov(this,"_isProactiveJoin",!1),this.store=e,this.spec=t,this.signal=this.store.useP2P?new bU(iM(iM({},t),{},{retryConfig:t.websocketRetryConfig}),e):new NO(iM(iM({},t),{},{retryConfig:t.websocketRetryConfig}),e),this._statsCollector=t.statsCollector,this.role=t.role||"audience",this._clientRoleOptions=t.clientRoleOptions,this.handleSignalEvents()}async join(e,t,n){this.store.joinGatewayStart(),"disabled"!==e.cloudProxyServer&&(this.hasChangeBGPAddress=!0);const r=Date.now();let o=aM.get(e.cname);if(o||(o=new Map,aM.set(e.cname,o)),this._isProactiveJoin=!0,o.has(e.uid)){const t=new pI(lw.UID_CONFLICT);throw AI.joinGateway(e.sid,{lts:r,succ:!1,ec:t.code,addr:null,uid:e.uid,cid:e.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!e.proxyServer,signalChannel:"0",preload:e.preload}),this._isProactiveJoin=!1,t}o.set(e.uid,!0),this.joinInfo=e,this.key=t;let i=0;this.joinGatewayStartTime=r;const a=e.proxyServer;try{oI.debug("[".concat(this.store.clientId,"] use websocket join uid ").concat(i));const t=e.gatewayAddrs.map((t=>{let{address:n}=t;const[r,o]=n.split(":"),i={host:r,port:o};return e.proxyServer&&(i.proxy=e.proxyServer),i}));i=(await this.signal.init(t,n)).uid,oI.debug("[".concat(this.store.clientId,"] websocket join uid ").concat(i," cost ").concat(Date.now()-this.joinGatewayStartTime))}catch(c){var s;throw oI.error("[".concat(this.store.clientId,"] User join failed"),c.toString()),AI.joinGateway(e.sid,{lts:r,succ:!1,ec:(null===(s=c.data)||void 0===s?void 0:s.desc)||c.code,errorMsg:c.message,addr:this.signal.url,uid:e.uid,cid:e.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!a,signalChannel:"0",preload:e.preload}),this._isProactiveJoin=!1,o.delete(e.uid),this.signal.close(),c}return this.state="CONNECTED",this.inChannelInfo.joinAt=Date.now(),oI.debug("[".concat(this.store.clientId,"] Connected to gateway server")),this.trafficStatsInterval=window.setInterval((()=>{this.updateTrafficStats().catch((e=>{oI.warning("[".concat(this.store.clientId,"] get traffic stats error"),e.toString())}))}),3e3),this.networkQualityInterval=window.setInterval((()=>{navigator&&void 0!==navigator.onLine&&!navigator.onLine?this.emit(xR.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6}):this._signalTimeout?this.emit(xR.NETWORK_QUALITY,{downlinkNetworkQuality:5,uplinkNetworkQuality:5}):"CONNECTED"===this.state&&this._statsCollector.trafficStats?this.emit(xR.NETWORK_QUALITY,{uplinkNetworkQuality:xO(this._statsCollector.trafficStats.B_unq),downlinkNetworkQuality:xO(this._statsCollector.trafficStats.B_dnq)}):this.emit(xR.NETWORK_QUALITY,{uplinkNetworkQuality:0,downlinkNetworkQuality:0})}),2e3),this.store.joinGatewayEnd(),i}async leave(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;if("DISCONNECTED"!==this.state){t!==Pw.FALLBACK&&(this.state="DISCONNECTING");try{e||this.signal.connectionState!==fR.CONNECTED||await(n=this.signal.request(mR.LEAVE,void 0,!0),r=3e3,r===1/0?n:MA.race([n,oT(r)]))}catch(n){oI.warning("[".concat(this.store.clientId,"] leave request failed, ignore"),n)}this.signal.close(t),t!==Pw.FALLBACK&&(this.state="DISCONNECTED"),this.reset()}var n,r}async publish(e,t,n){if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new pI(lw.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));const r={state:"offer",p2p_id:this.store.p2pId,ortc:t,mode:this.spec.mode,extend:xT("PUB_EXTEND"),twcc:!!xT("PUBLISH_TWCC"),rtx:!!xT("USE_PUB_RTX")};try{return(await this.signal.request(mR.PUBLISH,r,!0))._message}catch(o){if(n&&o.data&&o.data.code===hR.ERR_PUBLISH_REQUEST_INVALID)return oI.warning("[".concat(this.store.clientId,"] receive publish error code, retry"),o.toString()),await this.tryUnpubBeforeRepub(e,t),this.publish(e,t,!1);throw o}}async publishDataChannel(e,t,n){var r;if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new pI(lw.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));const o={stream_id:t.streamId,ordered:t.ordered?1:0,max_retrans_times:null!==(r=t.maxRetransmits)&&void 0!==r?r:10,channel_id:t.channelId,metadata:t.metadata};try{await this.signal.request(mR.PUBLISH_DATASTREAM,o,!0)}catch(i){if(n&&i.data&&i.data.code===hR.ERR_PUBLISH_REQUEST_INVALID)return oI.warning("[".concat(this.store.clientId,"] receive publish datachannels error code, retry"),i.toString()),await this.tryUnpubDataChannelBeforeRepub(e,t),this.publishDataChannel(e,t,!1);throw i}}async unpublish(e,t){try{if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new pI(lw.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await this.signal.request(mR.UNPUBLISH,{stream_id:t,ortc:e},!0)}catch(n){oI.warning("[".concat(this.store.clientId,"] unpublish warning: "),n)}}async unpublishDataChannel(e){try{if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new pI(lw.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await MA.all(e.map((e=>this.signal.request(mR.UNPUBLISH_DATASTREAM,{channel_id:e},!0))))}catch(t){oI.warning("unpublish datachannels warning: ",t)}}async presubscribe(e,t,n){if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new pI(lw.INVALID_OPERATION,"can not presubscribe when connection state is ".concat(this.state));const r={stream_id:e,stream_type:t,mode:this.spec.mode,codec:this.spec.codec,p2p_id:this.store.p2pId,twcc:!!xT("SUBSCRIBE_TWCC"),rtx:!!xT("USE_SUB_RTX")||void 0,extend:xT("SUB_EXTEND"),svc:Array.isArray(xT("SVC"))&&0!==xT("SVC").length?xT("SVC"):void 0};try{return await this.signal.request(mR.PRE_SUBSCRIBE,r,!0)}catch(o){if(n&&o.data&&o.data.code===hR.ERR_SUBSCRIBE_REQUEST_INVALID)return oI.warning("[".concat(this.store.clientId,"] pre-subscribe error, retry"),o.toString()),this.presubscribe(e,t,!1);throw o}}async subscribe(e,t,n){if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new pI(lw.INVALID_OPERATION,"can not subscribe when connection state is ".concat(this.state));const r={stream_id:e,stream_type:t.stream_type,mode:this.spec.mode,codec:this.spec.codec,p2p_id:this.store.p2pId,twcc:!!xT("SUBSCRIBE_TWCC"),rtx:!!xT("USE_SUB_RTX"),extend:xT("SUB_EXTEND"),ssrcId:t.ssrcId,svc:Array.isArray(xT("SVC"))&&0!==xT("SVC").length?xT("SVC"):void 0};try{return(await this.signal.request(mR.SUBSCRIBE,r,!0))._message}catch(o){if(n&&o.data&&o.data.code===hR.ERR_SUBSCRIBE_REQUEST_INVALID)return oI.warning("[".concat(this.store.clientId,"] receiver subscribe error code, retry"),o.toString()),await this.tryUnsubBeforeResub(e,t),await this.subscribe(e,t,!1);throw o}}async subscribeDataChannel(e,t,n){if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new pI(lw.INVALID_OPERATION,"can not subscribe datachannel when connection state is ".concat(this.state));const r={uid:e,stream_id:t.id,channel_id:t.datachannelId};try{return void(await this.signal.request(mR.SUBSCRIBE_DATASTREAM,r,!0))}catch(o){if(n&&o.data&&o.data.code===hR.ERR_SUBSCRIBE_REQUEST_INVALID)return oI.warning("[".concat(this.store.clientId,"] receiver subscribe datachannel error code, retry"),o.toString()),await this.tryUnsubDataChannelBeforeResub(e,t),await this.subscribeDataChannel(e,t,!1);throw o}}async subscribeAll(e,t){if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new pI(lw.INVALID_OPERATION,"can not massSubscribe when connection state is ".concat(this.state));const n={p2p_id:this.store.p2pId,users:e,dtx:!1,rtx:!!xT("USE_SUB_RTX"),twcc:!!xT("SUBSCRIBE_TWCC"),svc:Array.isArray(xT("SVC"))&&0!==xT("SVC").length?xT("SVC"):void 0};try{return await this.signal.request(mR.SUBSCRIBE_STREAMS,n,!0)}catch(r){if(t&&r.data&&r.data.code===hR.ERR_SUBSCRIBE_REQUEST_INVALID)return oI.warning("[".concat(this.store.clientId,"] receiver massSubscribe error code, retry"),r.toString()),await this.tryMassUnsubBeforeResub(e),await this.subscribeAll(e,!1);throw r}}async setVideoProfile(e){const t=function(e){if(!(e.bitrateMax&&e.bitrateMin&&e.frameRate&&e.height&&e.width))return;let t=e.frameRate,n=e.width,r=e.height,o=!0;return"number"!=typeof t&&(t=t.exact||t.ideal||t.max||t.min||0,t||(o=!1)),"number"!=typeof n&&(n=n.exact||n.ideal||n.max||n.min||0,n||(o=!1)),"number"!=typeof r&&(r=r.exact||r.ideal||r.max||r.min||0,t||(o=!1)),o?{stream_type:0,width:n,height:r,fps:t,start_bps:1e3*e.bitrateMax,min_bps:1e3*e.bitrateMin,target_bps:1e3*e.bitrateMax}:void 0}(e);if(t)return this.signal.request(mR.SET_VIDEO_PROFILE,t);oI.debug("[".concat(this.store.clientId,"] encoder config is not complete, do not report to gateway"))}async unsubscribe(e,t){try{await this.signal.request(mR.UNSUBSCRIBE,{p2p_id:this.store.p2pId,ortc:e,stream_id:t},!0)}catch(n){oI.warning("[".concat(this.store.clientId,"] unsubscribe warning: "),n)}}async unsubscribeDataChannel(e,t){try{if("CONNECTED"!==this.state&&"RECONNECTING"!==this.state)throw new pI(lw.INVALID_OPERATION,"can not publish when connection state is ".concat(this.state));await MA.all(e.map((e=>this.signal.request(mR.UNSUBSCRIBE_DATASTREAM,{stream_id:e,uid:t},!0))))}catch(n){oI.warning("unsubscribeDataChannel warning: ",n)}}async massUnsubscribe(e){try{await this.signal.request(mR.UNSUBSCRIBE_STREAMS,e,!0)}catch(t){oI.warning("[".concat(this.store.clientId,"] massUnsubscribeAll warning: "),t)}}async reconnectPC(e){const{iceParameters:t,dtlsParameters:n,rtpCapabilities:r}=e;return{gatewayEstablishParams:await this.signal.request(mR.CONNECT_PC,{p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:{iceParameters:t,dtlsParameters:n,rtpCapabilities:r}},!0),gatewayAddress:this.getCurrentGatewayAddress()}}getGatewayInfo(){return this.signal.request(mR.GATEWAY_INFO)}async renewToken(e){await this.signal.request(mR.RENEW_TOKEN,e),this.key=e.token}async setClientRole(e,t){if(t&&(this._clientRoleOptions=Object.assign({},t)),"CONNECTED"!==this.state)return void(this.role=e);let n,r=0;"audience"===e?this._clientRoleOptions&&this._clientRoleOptions.delay?(n=this._clientRoleOptions.delay,r=1):r=this._clientRoleOptions&&this._clientRoleOptions.level?this._clientRoleOptions.level:2:r=0,await this.signal.request(mR.SET_CLIENT_ROLE,{role:e,level:r,delay:n,client_ts:Date.now()}),this.role=e}async setRemoteVideoStreamType(e,t){await this.signal.request(mR.SWITCH_VIDEO_STREAM,{stream_id:e,stream_type:t})}async setDefaultRemoteVideoStreamType(e){await this.signal.request(mR.DEFAULT_VIDEO_STREAM,{stream_type:e})}async setStreamFallbackOption(e,t){await this.signal.request(mR.SET_FALLBACK_OPTION,{stream_id:e,fallback_type:t})}async pickSVCLayer(e,t){await this.signal.request(mR.PICK_SVC_LAYER,{stream_id:e,spatial_layer:t.spatialLayer,temporal_layer:t.temporalLayer})}async setRTM2Flag(e){await this.signal.request(mR.SET_RTM2_FLAG,{rtm2_flag:e})}async sendExtensionMessage(e,t,n){if(this.signal instanceof bU)return this.signal.sendExtensionMessage(e,t,n)}getInChannelInfo(){return this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt),iM({},this.inChannelInfo)}async getGatewayVersion(){return(await this.signal.request(mR.GATEWAY_INFO)).version}reset(){if(this.inChannelInfo.joinAt&&(this.inChannelInfo.duration=Date.now()-this.inChannelInfo.joinAt,this.inChannelInfo.joinAt=null),this.trafficStatsInterval&&(window.clearInterval(this.trafficStatsInterval),this.trafficStatsInterval=void 0),this.joinInfo){const e=aM.get(this.joinInfo.cname);e&&e.delete(this.joinInfo.uid)}this.joinInfo=void 0,this.key=void 0,this.networkQualityInterval&&(window.clearInterval(this.networkQualityInterval),this.networkQualityInterval=void 0)}updateTurnConfigFromSignal(){if(!this.joinInfo)return;const e=function(e){let t;return t=e.startsWith("dc")?e.match(/(dc\:\/\/)?([^:]+):(\d+)/):e.match(/(wss\:\/\/)?([^:]+):(\d+)/),t?{username:DT.username,password:DT.password,turnServerURL:t[2],tcpport:parseInt(t[3])+30,udpport:parseInt(t[3])+30,forceturn:!1}:null}(("disabled"===this.joinInfo.cloudProxyServer?this.signal.url:this.joinInfo.gatewayAddrs[this.signal.currentURLIndex].address)||"");this.joinInfo.turnServer.serversFromGateway=[],e&&"off"!==this.joinInfo.turnServer.mode&&"disabled"===this.joinInfo.cloudProxyServer&&this.joinInfo.turnServer.serversFromGateway.push(iM(iM({},DT),{},{turnServerURL:e.turnServerURL,tcpport:e.tcpport,udpport:e.udpport,username:this.joinInfo.uid.toString(),password:this.joinInfo.token}))}async updateTrafficStats(){if("CONNECTED"!==this.state)return;const e=await this.signal.request(mR.TRAFFIC_STATS,void 0,!0);e.timestamp=Date.now(),null!=e.ntp_offset&&(this.ntpOffset=e.ntp_offset),e.peer_delay.forEach((e=>{const t=this._statsCollector.trafficStats&&this._statsCollector.trafficStats.peer_delay.find((t=>t.peer_uid===e.peer_uid));t&&t.B_st!==e.B_st&&Ww((()=>{this.emit(xR.STREAM_TYPE_CHANGE,e.peer_uid,e.B_st)}))})),this._statsCollector.updateTrafficStats(e)}getJoinMessage(e){if(!this.joinInfo||!this.key)throw new pI(lw.UNEXPECTED_ERROR,"can not generate join message, no join info");const t=Object.assign({},this.joinInfo.apResponse);let n=xT("REPORT_APP_SCENARIO");if("string"!=typeof n)try{n=JSON.stringify(n)}catch(a){n=void 0}n&&n.length>128&&(n=void 0);const r=!($S()||jS(87)||xP())&&"boolean"==typeof xT("ENABLE_PRE_SUB")&&xT("ENABLE_PRE_SUB"),o=!xP()&&rM("ENABLE_PREALLOC_PC","boolean"),i=iM({license:this.joinInfo.license,p2p_id:this.store.p2pId,session_id:this.joinInfo.sid,app_id:this.joinInfo.appId,channel_key:this.key,channel_name:this.joinInfo.cname,sdk_version:NT,browser:navigator.userAgent,process_id:xT("PROCESS_ID"),mode:this.store.useP2P?"p2p":this.spec.mode,codec:this.spec.codec,role:this.role,has_changed_gateway:this.hasChangeBGPAddress,ap_response:t,extend:xT("JOIN_EXTEND"),details:{6:this.joinInfo.stringUid,cservice_map:"proxy3"===this.joinInfo.cloudProxyServer?"1":"proxy5"===this.joinInfo.cloudProxyServer?"2":void 0},features:{rejoin:!0},optionalInfo:this.joinInfo.optionalInfo,appScenario:n,attributes:{userAttributes:{enablePublishedUserList:xT("ENABLE_PUBLISHED_USER_LIST"),maxSubscription:xT("MAX_SUBSCRIPTION"),subscribeAudioFilterTopN:"number"==typeof xT("SUBSCRIBE_AUDIO_FILTER_TOPN")?xT("SUBSCRIBE_AUDIO_FILTER_TOPN"):void 0,enablePublishAudioFilter:"boolean"==typeof xT("ENABLE_PUBLISH_AUDIO_FILTER")?xT("ENABLE_PUBLISH_AUDIO_FILTER"):void 0,enableUserLicenseCheck:"boolean"==typeof xT("ENABLE_USER_LICENSE_CHECK")?xT("ENABLE_USER_LICENSE_CHECK"):void 0,enableRTX:!0===xT("USE_PUB_RTX")||!0===xT("USE_SUB_RTX")||void 0,disableFEC:xT("DISABLE_FEC"),enableNTPReport:!!xT("ENABLE_NTP_REPORT")||void 0,enableInstantVideo:!!xT("ENABLE_INSTANT_VIDEO")||void 0,enableFulllinkAvSync:!!xT("ENABLE_FULL_LINK_AV_SYNC")||void 0,enableDataStream2:rM("ENABLE_DATASTREAM_2","boolean"),enableAutFeedback:!!xT("ENABLE_AUT_FEEDBACK")||void 0,rtm2Flag:"number"==typeof this.joinInfo.rtmFlag?this.joinInfo.rtmFlag:void 0,enableUserAutoRebalanceCheck:!!xT("ENABLE_USER_AUTO_REBALANCE_CHECK"),enableXR:rM("USE_XR","boolean"),enableLossbasedBwe:rM("ENABLE_LOSSBASED_BWE","boolean"),enableAutCC:!!xT("ENABLE_AUT_CC")||void 0,enableCCFallback:rM("ENABLE_CC_FALLBACK","boolean"),enablePreallocPC:o,preSubNum:r?rM("PRE_SUB_NUM","number"):void 0,enablePubTWCC:rM("PUBLISH_TWCC","boolean"),enableSubTWCC:rM("SUBSCRIBE_TWCC","boolean"),enablePubRTX:rM("USE_PUB_RTX","boolean"),enableSubRTX:rM("USE_SUB_RTX","boolean"),enableSubSVC:xT("ENABLE_SVC")?xT("ENABLE_SVC_DEFAULT_CODECS"):Array.isArray(xT("SVC"))&&0!==xT("SVC").length?xT("SVC"):void 0}},join_ts:this.joinGatewayStartTime},e);return this.joinInfo.stringUid&&(i.string_uid=this.joinInfo.stringUid),this.joinInfo.aesmode&&this.joinInfo.aespassword&&(i.aes_mode=this.joinInfo.aesmode,xT("ENCRYPT_AES")?(i.aes_secret=this.joinInfo.aespassword,i.aes_encrypt=!0):i.aes_secret=this.joinInfo.aespassword,this.joinInfo.aessalt&&(i.aes_salt=this.joinInfo.aessalt)),t.addresses[this.signal.websocket.currentURLIndex]&&(i.ap_response.ticket=t.addresses[this.signal.websocket.currentURLIndex].ticket,delete t.addresses),void 0!==this.joinInfo.defaultVideoStream&&(i.default_video_stream=this.joinInfo.defaultVideoStream),i}getRejoinMessage(){if(!this.joinInfo)throw new pI(lw.UNEXPECTED_ERROR,"can not generate rejoin message, no join info");return{session_id:this.joinInfo.sid,channel_name:this.joinInfo.cname,cid:this.joinInfo.cid,uid:this.joinInfo.uid,vid:Number(this.joinInfo.vid)}}handleSignalEvents(){this.signal.on(gR.WS_RECONNECT_CREATE_CONNECTION,(e=>{this.joinGatewayStartTime=Date.now()})),this.signal.on(gR.WS_RECONNECTING,(e=>{this.joinInfo&&AI.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:e||Mw.NETWORK_ERROR}),this.joinInfo&&(this.state="RECONNECTING",AI.sessionInit(this.joinInfo.sid,{lts:(new Date).getTime(),extend:this.isSignalRecover?{recover:!0}:{rejoin:!0},cname:this.joinInfo.cname,appid:this.joinInfo.appId,mode:this.spec.mode,stringUid:this.joinInfo.stringUid,channelProfile:"live"===this.spec.mode?1:0,channelMode:0,lsid:this.joinInfo.sid,clientRole:"audience"===this.role?2:1,buildFormat:1}),this.isSignalRecover=!1,this.joinGatewayStartTime=Date.now())})),this.signal.on(gR.WS_CLOSED,(e=>{let t;switch(e){case Pw.LEAVE:t=Mw.LEAVE;break;case Pw.UID_BANNED:case Pw.IP_BANNED:case Pw.CHANNEL_BANNED:case Pw.SERVER_ERROR:t=Mw.SERVER_ERROR;break;case Pw.FALLBACK:t=Mw.FALLBACK;break;case Pw.LICENSE_MISSING:case Pw.LICENSE_EXPIRED:case Pw.LICENSE_MINUTES_EXCEEDED:case Pw.LICENSE_PERIOD_INVALID:case Pw.LICENSE_MULTIPLE_SDK_SERVICE:case Pw.LICENSE_ILLEGAL:case Pw.TOKEN_EXPIRE:t=e;break;default:t=Mw.NETWORK_ERROR}oI.debug("[".concat(this.store.clientId,"] [signal] websocket closed, reason: ").concat(t||"undefined -> "+Mw.NETWORK_ERROR)),this.joinInfo&&AI.WebSocketQuit(this.joinInfo.sid,{lts:Date.now(),succ:e===Pw.LEAVE?1:-1,cname:this.joinInfo.cname,uid:this.joinInfo.uid,cid:this.joinInfo.cid,errorCode:t}),this._disconnectedReason=e,e!==Pw.FALLBACK&&(this.state="DISCONNECTED"),this.reset()})),this.signal.on(gR.WS_CONNECTED,(()=>{if(this.updateTurnConfigFromSignal(),this.state="CONNECTED",this.joinInfo&&("audience"===this.role&&this._clientRoleOptions&&(this._clientRoleOptions.level||this._clientRoleOptions.delay)&&(oI.debug("[".concat(this.store.clientId,"] patch to send set client role, role: ").concat(this.role,", mode: ").concat(this.spec.mode,", level: ").concat(this._clientRoleOptions.level,", delay: ").concat(this._clientRoleOptions.delay)),this.setClientRole(this.role,this._clientRoleOptions)),AI.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!0,ec:null,vid:this.joinInfo.vid,addr:this.signal.url,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer,signalChannel:"0",preload:this.joinInfo.preload}),this._isProactiveJoin=!1,this.joinInfo.useLocalAccessPoint&&1===this.joinInfo.setLocalAPVersion)){const e=this.signal.url&&this.signal.url.match(/wss\:\/\/([^:]+):(\d+)/);if(!e)return void oI.error("[".concat(this.store.clientId,"] set local access point after joined failed: ").concat(e));MT("EVENT_REPORT_DOMAIN",e[1]),MT("EVENT_REPORT_BACKUP_DOMAIN",e[1]),MT("LOG_UPLOAD_SERVER","".concat(e[1],":6444"))}})),this.signal.on(ER.ON_UPLINK_STATS,(e=>{this._statsCollector.updateUplinkStats(e)})),this.signal.on(gR.REQUEST_RECOVER,((e,t,n)=>{if(!this.joinInfo)return n(new pI(lw.UNEXPECTED_ERROR,"gateway: can not recover, no join info"));e&&(this.joinInfo.multiIP=e,this.hasChangeBGPAddress=!0),this.isSignalRecover=!0,$w(this,xR.REQUEST_NEW_GATEWAY_LIST).then(t).catch(n)})),this.signal.on(gR.REQUEST_JOIN_INFO,(async e=>{var t;if(this.updateTurnConfigFromSignal(),this.store.useP2P)return void e(this.getJoinMessage({ortc:{}}));const{iceParameters:n,dtlsParameters:r,rtpCapabilities:o}=await $w(this,xR.REQUEST_P2P_CONNECTION_PARAMS,{turnServer:null===(t=this.joinInfo)||void 0===t?void 0:t.turnServer});e(this.getJoinMessage({ortc:{iceParameters:n,dtlsParameters:r,rtpCapabilities:o,version:"2"}}))})),this.signal.on(gR.REQUEST_REJOIN_INFO,(e=>{e(this.getRejoinMessage())})),this.signal.on(gR.REPORT_JOIN_GATEWAY,((e,t)=>{if(!this.joinInfo)return;let n,r="";var o;e instanceof pI?(n=(null===(o=e.data)||void 0===o?void 0:o.desc)||e.code,r=e.message):n=e,AI.joinGateway(this.joinInfo.sid,{lts:this.joinGatewayStartTime,succ:!1,ec:n,errorMsg:r,addr:t,uid:this.joinInfo.uid,cid:this.joinInfo.cid,firstSuccess:this._isProactiveJoin,avoidJoinStartTime:this.store.avoidJoinStart,isProxy:!!this.joinInfo.proxyServer,signalChannel:"0",preload:this.joinInfo.preload}),this._isProactiveJoin=!1})),this.signal.on(gR.IS_P2P_DISCONNECTED,(e=>{e(jw(this,xR.IS_P2P_DISCONNECTED))})),this.signal.on(gR.DISCONNECT_P2P,(()=>{this.emit(xR.DISCONNECT_P2P)})),this.signal.on(gR.REQUEST_SUCCESS,(()=>{this._signalTimeout=!1})),this.signal.on(gR.REQUEST_TIMEOUT,(()=>{this._signalTimeout=!0})),this.signal.on(gR.JOIN_RESPONSE,(e=>{const t=this.getCurrentGatewayAddress();this.emit(xR.JOIN_RESPONSE,e,t)})),this.signal.on(gR.PRE_CONNECT_PC,(async()=>{if(this.joinInfo){this.updateTurnConfigFromSignal();const e=this.getCurrentGatewayAddress(),t=xT("FINGERPRINT")||this.joinInfo.apResponse.addresses[this.signal.currentURLIndex].fingerprint;if(e&&t){const n=MU(e);this.emit(xR.PRE_CONNECT_PC,{candidates:n,fingerprint:t})}}})),this.signal.on(gR.RECOVER_NOTIFICATION,(e=>{this.joinInfo&&"string"==typeof xT("AP_REQUEST_DETAIL")&&(this.joinInfo.apRequestDetail="".concat(xT("AP_REQUEST_DETAIL"),";").concat(e))}))}async tryUnsubBeforeResub(e,t){try{await this.signal.request(mR.UNSUBSCRIBE,{p2p_id:this.store.p2pId,stream_id:e,ortc:[t]},!0)}catch(n){throw oI.warning("[".concat(this.store.clientId,"] tryUnsubBeforeResub warning"),n),n}}async tryUnsubDataChannelBeforeResub(e,t){try{await this.signal.request(mR.UNSUBSCRIBE,{stream_id:t.id},!0)}catch(n){throw oI.warning("unsubscribe datachannel warning",n),n}}async tryUnpubBeforeRepub(e,t){try{await this.signal.request(mR.UNPUBLISH,{stream_id:e,ortc:t},!0)}catch(n){throw oI.warning("[".concat(this.store.clientId,"] tryUnpubBeforeRepub warning: "),n),n}}async tryUnpubDataChannelBeforeRepub(e,t){try{await this.signal.request(mR.UNPUBLISH_DATASTREAM,{channnel_id:t.channelId},!0)}catch(n){throw oI.warning("unpublish datastream warning: ",n),n}}async tryMassUnsubBeforeResub(e){const t={users:e.map((e=>({stream_id:e.stream_id,stream_type:e.stream_type})))};try{await this.signal.request(mR.UNSUBSCRIBE_STREAMS,t,!0)}catch(n){throw oI.warning("[".concat(this.store.clientId,"] tryMassUnsubBeforeResub warning"),n),n}}async muteLocal(e,t){const n={action:e.find((e=>e.stream_type===MR.Audio))?"mute_local_audio":"mute_local_video",p2p_id:this.store.p2pId,ortc:e,stream_id:t};try{await this.signal.request(mR.CONTROL,n,!0,!0)}catch(r){throw oI.warning("[".concat(this.store.clientId,"] gateway muteLocal warning: "),r),r}}async unmuteLocal(e,t){const n={action:e.find((e=>e.stream_type===MR.Audio))?"unmute_local_audio":"unmute_local_video",p2p_id:this.store.p2pId,ortc:e,stream_id:t};try{await this.signal.request(mR.CONTROL,n,!0,!0)}catch(r){throw oI.warning("[".concat(this.store.clientId,"] gateway unmuteLocal warning: "),r),r}}async muteRemote(e,t){const n={action:e===qR.AUDIO?"mute_remote_audio":"mute_remote_video",p2p_id:this.store.p2pId,stream_id:t};try{await this.signal.request(mR.CONTROL,n,!0,!0)}catch(r){throw oI.warning("[".concat(this.store.clientId,"] gateway muteRemote warning: "),r),r}}async unmuteRemote(e,t){const n={action:e===qR.AUDIO?"unmute_remote_audio":"unmute_remote_video",p2p_id:this.store.p2pId,stream_id:t};try{await this.signal.request(mR.CONTROL,n,!0,!0)}catch(r){throw oI.warning("[".concat(this.store.clientId,"] gateway unmuteRemote warning: "),r),r}}uploadWRTCStats(e){this.signal.uploadWRTCStats(e)}upload(e,t){this.signal.upload(e,t)}getSignalRTT(){return this.signal.rtt}async restartICE(e){const t={p2p_id:this.store.p2pId,stream_id:this.store.uid,ortc:e};try{return await this.signal.request(mR.RESTART_ICE,t,!0)}catch(n){throw oI.warning("[".concat(this.store.clientId,"] P2PChannel.restartICE warning: "),n),n}}reconnect(){"CONNECTED"===this.state&&this.signal.reconnect(void 0,Mw.P2P_FAILED)}getCurrentGatewayAddress(){var e,t;if(!xT("GATEWAY_WSS_ADDRESS"))return xT("USE_CANDIDATE_FROM_AP_DETAIL")&&null!==(e=this.joinInfo)&&void 0!==e&&e.apGatewayAddress?(oI.debug("[".concat(this.store.clientId,"] use candidate from ap detail, ").concat(JSON.stringify(this.joinInfo.apGatewayAddress))),this.joinInfo.apGatewayAddress):null!==(t=this.joinInfo)&&void 0!==t&&t.gatewayAddrs?this.joinInfo.gatewayAddrs[this.signal.currentURLIndex]:void 0}async setPublishAudioFilterEnabled(e){await this.signal.request(mR.SET_PARAMETER,{enablePublishAudioFilter:e})}}let cM=0,lM=0;function uM(e,t,n,r){return new MA(((o,i)=>{t.timeout=t.timeout||xT("HTTP_CONNECT_TIMEOUT"),t.responseType=t.responseType||"json",t.data&&!n?(t.data=JSON.stringify(t.data),cM+=nT(t.data)):n&&(t.data.size?cM+=t.data.size:t.data instanceof FormData?cM+=rT(t.data):cM+=nT(JSON.stringify(t.data))),t.headers=t.headers||{},t.headers["Content-Type"]=t.headers["Content-Type"]||"application/json",t.method="POST",t.url=e,yS.request(t).then((e=>{"string"==typeof e.data?lM+=nT(e.data):e.data instanceof ArrayBuffer||e.data instanceof Uint8Array?lM+=e.data.byteLength:lM+=nT(JSON.stringify(e.data)),r&&o({data:e.data,headers:e.headers}),o(e.data)})).catch((e=>{yS.isCancel(e)?i(new pI(lw.OPERATION_ABORTED,"cancel token canceled")):"ECONNABORTED"===e.code?i(new pI(lw.NETWORK_TIMEOUT,e.message)):e.response?i(new pI(lw.NETWORK_RESPONSE_ERROR,e.response.status)):i(new pI(lw.NETWORK_ERROR,e.message))}))}))}
/*! formdata-polyfill. MIT License. Jimmy W?rting <https://jimmy.warting.se/opensource> */!function(){var e;function n(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var r,o="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e},i=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof t&&t];for(var n=0;n<e.length;++n){var r=e[n];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")}(this);function a(e,t){if(t)e:{var n=i;e=e.split(".");for(var r=0;r<e.length-1;r++){var a=e[r];if(!(a in n))break e;n=n[a]}(t=t(r=n[e=e[e.length-1]]))!=r&&null!=t&&o(n,e,{configurable:!0,writable:!0,value:t})}}function s(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function c(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:n(e)}}if(a("Symbol",(function(e){function t(e,t){this.A=e,o(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.A};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",r=0;return function e(o){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t(n+(o||"")+"_"+r++,o)}})),a("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),r=0;r<t.length;r++){var a=i[t[r]];"function"==typeof a&&"function"!=typeof a.prototype[e]&&o(a.prototype,e,{configurable:!0,writable:!0,value:function(){return s(n(this))}})}return e})),"function"==typeof Object.setPrototypeOf)r=Object.setPrototypeOf;else{var l;e:{var u={};try{u.__proto__={a:!0},l=u.a;break e}catch(L){}l=!1}r=l?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var d=r;function A(){this.m=!1,this.j=null,this.v=void 0,this.h=1,this.u=this.C=0,this.l=null}function p(e){if(e.m)throw new TypeError("Generator is already running");e.m=!0}function h(e,t){return e.h=3,{value:t}}function f(e){this.g=new A,this.G=e}function g(e,t,n,r){try{var o=t.call(e.g.j,n);if(!(o instanceof Object))throw new TypeError("Iterator result "+o+" is not an object");if(!o.done)return e.g.m=!1,o;var i=o.value}catch(a){return e.g.j=null,e.g.s(a),m(e)}return e.g.j=null,r.call(e.g,i),m(e)}function m(e){for(;e.g.h;)try{var t=e.G(e.g);if(t)return e.g.m=!1,{value:t.value,done:!1}}catch(n){e.g.v=void 0,e.g.s(n)}if(e.g.m=!1,e.g.l){if(t=e.g.l,e.g.l=null,t.F)throw t.D;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function _(e){this.next=function(t){return e.o(t)},this.throw=function(t){return e.s(t)},this.return=function(t){return function(e,t){p(e.g);var n=e.g.j;return n?g(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.g.return):(e.g.return(t),m(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function E(e,t){return t=new _(new f(t)),d&&e.prototype&&d(t,e.prototype),t}if(A.prototype.o=function(e){this.v=e},A.prototype.s=function(e){this.l={D:e,F:!0},this.h=this.C||this.u},A.prototype.return=function(e){this.l={return:e},this.h=this.u},f.prototype.o=function(e){return p(this.g),this.g.j?g(this,this.g.j.next,e,this.g.o):(this.g.o(e),m(this))},f.prototype.s=function(e){return p(this.g),this.g.j?g(this,this.g.j.throw,e,this.g.o):(this.g.s(e),m(this))},a("Array.prototype.entries",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,o={next:function(){if(!r&&n<e.length){var o=n++;return{value:t(o,e[o]),done:!1}}return r=!0,{done:!0,value:void 0}}};return o[Symbol.iterator]=function(){return o},o}(this,(function(e,t){return[e,t]}))}})),"undefined"!=typeof Blob&&("undefined"==typeof FormData||!FormData.prototype.keys)){var v=function(e,t){for(var n=0;n<e.length;n++)t(e[n])},y=function(e){return e.replace(/\r?\n|\r/g,"\r\n")},b=function(e,t,n){return t instanceof Blob?(n=void 0!==n?String(n+""):"string"==typeof t.name?t.name:"blob",t.name===n&&"[object Blob]"!==Object.prototype.toString.call(t)||(t=new File([t],n)),[String(e),t]):[String(e),String(t)]},C=function(e,t){if(e.length<t)throw new TypeError(t+" argument required, but only "+e.length+" present.")},S="object"==typeof globalThis?globalThis:"object"==typeof window?window:"object"==typeof self?self:this,w=S.FormData,T=S.XMLHttpRequest&&S.XMLHttpRequest.prototype.send,I=S.Request&&S.fetch,R=S.navigator&&S.navigator.sendBeacon,O=S.Element&&S.Element.prototype,N=S.Symbol&&Symbol.toStringTag;N&&(Blob.prototype[N]||(Blob.prototype[N]="Blob"),"File"in S&&!File.prototype[N]&&(File.prototype[N]="File"));try{new File([],"")}catch(L){S.File=function(e,t,n){return e=new Blob(e,n||{}),Object.defineProperties(e,{name:{value:t},lastModified:{value:+(n&&void 0!==n.lastModified?new Date(n.lastModified):new Date)},toString:{value:function(){return"[object File]"}}}),N&&Object.defineProperty(e,N,{value:"File"}),e}}var k=function(e){return e.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22")},P=function(e){this.i=[];var t=this;e&&v(e.elements,(function(e){if(e.name&&!e.disabled&&"submit"!==e.type&&"button"!==e.type&&!e.matches("form fieldset[disabled] *"))if("file"===e.type){var n=e.files&&e.files.length?e.files:[new File([],"",{type:"application/octet-stream"})];v(n,(function(n){t.append(e.name,n)}))}else"select-multiple"===e.type||"select-one"===e.type?v(e.options,(function(n){!n.disabled&&n.selected&&t.append(e.name,n.value)})):"checkbox"===e.type||"radio"===e.type?e.checked&&t.append(e.name,e.value):(n="textarea"===e.type?y(e.value):e.value,t.append(e.name,n))}))};if((e=P.prototype).append=function(e,t,n){C(arguments,2),this.i.push(b(e,t,n))},e.delete=function(e){C(arguments,1);var t=[];e=String(e),v(this.i,(function(n){n[0]!==e&&t.push(n)})),this.i=t},e.entries=function e(){var t,n=this;return E(e,(function(e){if(1==e.h&&(t=0),3!=e.h)return t<n.i.length?e=h(e,n.i[t]):(e.h=0,e=void 0),e;t++,e.h=2}))},e.forEach=function(e,t){C(arguments,1);for(var n=c(this),r=n.next();!r.done;r=n.next()){var o=c(r.value);r=o.next().value,o=o.next().value,e.call(t,o,r,this)}},e.get=function(e){C(arguments,1);var t=this.i;e=String(e);for(var n=0;n<t.length;n++)if(t[n][0]===e)return t[n][1];return null},e.getAll=function(e){C(arguments,1);var t=[];return e=String(e),v(this.i,(function(n){n[0]===e&&t.push(n[1])})),t},e.has=function(e){C(arguments,1),e=String(e);for(var t=0;t<this.i.length;t++)if(this.i[t][0]===e)return!0;return!1},e.keys=function e(){var t,n,r,o=this;return E(e,(function(e){if(1==e.h&&(t=c(o),n=t.next()),3!=e.h)return n.done?void(e.h=0):(r=n.value,h(e,c(r).next().value));n=t.next(),e.h=2}))},e.set=function(e,t,n){C(arguments,2),e=String(e);var r=[],o=b(e,t,n),i=!0;v(this.i,(function(t){t[0]===e?i&&(i=!r.push(o)):r.push(t)})),i&&r.push(o),this.i=r},e.values=function e(){var t,n,r,o,i=this;return E(e,(function(e){if(1==e.h&&(t=c(i),n=t.next()),3!=e.h)return n.done?void(e.h=0):(r=n.value,(o=c(r)).next(),h(e,o.next().value));n=t.next(),e.h=2}))},P.prototype._asNative=function(){for(var e=new w,t=c(this),n=t.next();!n.done;n=t.next()){var r=c(n.value);n=r.next().value,r=r.next().value,e.append(n,r)}return e},P.prototype._blob=function(){var e="----formdata-polyfill-"+Math.random(),t=[],n="--"+e+'\r\nContent-Disposition: form-data; name="';return this.forEach((function(e,r){return"string"==typeof e?t.push(n+k(y(r))+'"\r\n\r\n'+y(e)+"\r\n"):t.push(n+k(y(r))+'"; filename="'+k(e.name)+'"\r\nContent-Type: '+(e.type||"application/octet-stream")+"\r\n\r\n",e,"\r\n")})),t.push("--"+e+"--"),new Blob(t,{type:"multipart/form-data; boundary="+e})},P.prototype[Symbol.iterator]=function(){return this.entries()},P.prototype.toString=function(){return"[object FormData]"},O&&!O.matches&&(O.matches=O.matchesSelector||O.mozMatchesSelector||O.msMatchesSelector||O.oMatchesSelector||O.webkitMatchesSelector||function(e){for(var t=(e=(this.document||this.ownerDocument).querySelectorAll(e)).length;0<=--t&&e.item(t)!==this;);return-1<t}),N&&(P.prototype[N]="FormData"),T){var D=S.XMLHttpRequest.prototype.setRequestHeader;S.XMLHttpRequest.prototype.setRequestHeader=function(e,t){D.call(this,e,t),"content-type"===e.toLowerCase()&&(this.B=!0)},S.XMLHttpRequest.prototype.send=function(e){e instanceof P?(e=e._blob(),this.B||this.setRequestHeader("Content-Type",e.type),T.call(this,e)):T.call(this,e)}}I&&(S.fetch=function(e,t){return t&&t.body&&t.body instanceof P&&(t.body=t.body._blob()),I.call(this,e,t)}),R&&(S.navigator.sendBeacon=function(e,t){return t instanceof P&&(t=t._asNative()),R.call(this,e,t)}),S.FormData=P}}();const dM=()=>{const e=xT("AREAS");return 0===e.length&&e.push(VR.GLOBAL),Kr(e).call(e,((e,t,n)=>{const r=AM(t);return r?0===n?r:"".concat(e,",").concat(r):e}),"")},AM=e=>e===VR.OVERSEA?"".concat(jR.ASIA,",").concat(jR.EUROPE,",").concat(jR.AFRICA,",").concat(jR.NORTH_AMERICA,",").concat(jR.SOUTH_AMERICA,",").concat(jR.OCEANIA):jR[e],pM=e=>{const t={CODE:"",WEBCS_DOMAIN:[],WEBCS_DOMAIN_BACKUP_LIST:[],PROXY_CS:[],CDS_AP:[],ACCOUNT_REGISTER:[],UAP_AP:[],EVENT_REPORT_DOMAIN:[],EVENT_REPORT_BACKUP_DOMAIN:[],LOG_UPLOAD_SERVER:[],PROXY_SERVER_TYPE3:[]};return e.map((e=>{const n=QR[e],r=Object.keys(n);r&&r.map((e=>{"CODE"!==e&&(t[e]=t[e].concat(n[e]))}))})),t},hM={GLOBAL:{ASIA:[VR.CHINA,VR.JAPAN,VR.INDIA,VR.KOREA,VR.HKMC],EUROPE:[],NORTH_AMERICA:[VR.US],SOUTH_AMERICA:[],OCEANIA:[],AFRICA:[]}},fM=Object.keys(hM[VR.GLOBAL]),gM=[VR.CHINA,VR.NORTH_AMERICA,VR.EUROPE,VR.ASIA,VR.JAPAN,VR.INDIA,VR.OCEANIA,VR.SOUTH_AMERICA,VR.AFRICA,VR.KOREA,VR.HKMC,VR.US],mM=function(e,t){let n=[];if(Or(e).call(e,VR.GLOBAL)){const i=[VR.GLOBAL,VR.OVERSEA],a=Object.keys(QR);if(t===VR.GLOBAL)throw new pI(lw.INVALID_PARAMS,"GLOBAL is an invalid excludedArea value");if(t===VR.CHINA)n=[VR.OVERSEA];else if(o=t,Or(fM).call(fM,o)){const e=(r=t,hM[VR.GLOBAL][r]||[]),o=[...i,t,...e];n=a.filter((e=>!Or(o).call(o,e)))}else if(function(e){let t=!1;return fM.forEach((n=>{var r;Or(r=hM[VR.GLOBAL][n]).call(r,e)&&(t=!0)})),t}(t)){const e=function(e){let t;return fM.forEach((n=>{var r;Or(r=hM[VR.GLOBAL][n]).call(r,e)&&(t=n)})),t}(t),r=[...i,e,t];n=a.filter((e=>!Or(r).call(r,e)))}else n=e;n=function(e){const t=[];return gM.forEach((n=>{Or(e).call(e,n)&&t.push(n)})),t.concat(e.filter((e=>!Or(gM).call(gM,e))))}(n)}else n=e;var r,o;return n};function _M(e){var t,n;if(!e&&Or(t=xT("AREAS")).call(t,VR.EXTENSIONS))return oI.debug("update area from ap : reset"),void EM(hI,!0);if(!Or(n=xT("AREAS")).call(n,VR.GLOBAL)||!e)return;let r=QR.EXTENSIONS;r&&(r={CODE:AM(VR.EXTENSIONS),WEBCS_DOMAIN:["ap-web-1-".concat(e,".agora.io")],WEBCS_DOMAIN_BACKUP_LIST:["ap-web-2-".concat(e,".ap.sd-rtn.com")],PROXY_CS:["proxy-ap-web-".concat(e,".agora.io")],CDS_AP:["cds-ap-web-1-".concat(e,".agora.io"),"cds-ap-web-2-".concat(e,".ap.sd-rtn.com")],ACCOUNT_REGISTER:["sua-ap-web-1-".concat(e,".agora.io"),"sua-ap-web-2-".concat(e,".ap.sd-rtn.com")],UAP_AP:["uap-ap-web-1-".concat(e,".agora.io"),"uap-ap-web-2-".concat(e,".ap.sd-rtn.com")],EVENT_REPORT_DOMAIN:["statscollector-1-".concat(e,".agora.io")],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-".concat(e,".agora.io")],LOG_UPLOAD_SERVER:["logservice-".concat(e,".agora.io")],PROXY_SERVER_TYPE3:["webrtc-cloud-proxy-".concat(e,".agora.io")]},oI.debug("update area from ap success: ".concat(e,",config is "),r),MT("AREAS",[VR.EXTENSIONS],!0),Object.keys(r).map((e=>{MT(e,"LOG_UPLOAD_SERVER"===e||"EVENT_REPORT_DOMAIN"===e||"EVENT_REPORT_BACKUP_DOMAIN"===e||"PROXY_SERVER_TYPE3"===e?r[e][0]:r[e])})))}function EM(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=AI.reportApiInvoke(null,{name:Rw.SET_AREA,options:e,tag:Ow.TRACER});try{let r=[];if("string"==typeof e&&(r=[e]),Array.isArray(e)&&(e.forEach((e=>{if(!Or(HR).call(HR,e))throw new pI(lw.INVALID_PARAMS,"invalid area code")})),r=e),"[object Object]"===Object.prototype.toString.call(e)){const{areaCode:t,excludedArea:n}=e;if(!t)throw new pI(lw.INVALID_PARAMS,"area code is needed");let o=t;"string"==typeof t&&(o=[t]),r=n?mM(o,n):o}if(!t){if(FT.AREAS){const e=new pI(lw.PROHIBITED_OPERATION,"setArea is prohibited because of config-distribute");return n.onError(e),void oI.warning("setArea is prohibited because of config-distribute")}if(Or(r).call(r,VR.GLOBAL)&&xT("AREAS")===VR.EXTENSIONS){const e=new pI(lw.PROHIBITED_OPERATION,"setArea is prohibited because of ap extensions");return n.onError(e),void oI.warning("setArea is prohibited because of ap extensions")}}MT("AREAS",r,t);const o=pM(r);Object.keys(o).map((e=>{MT(e,"LOG_UPLOAD_SERVER"===e||"EVENT_REPORT_DOMAIN"===e||"EVENT_REPORT_BACKUP_DOMAIN"===e||"PROXY_SERVER_TYPE3"===e?o[e][0]:o[e])})),oI.debug("set area success:",r.join(","))}catch(r){throw n.onError(r),r}n.onSuccess()}function vM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yM(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vM(Object(n),!0).forEach((function(t){Ov(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vM(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let bM=1;function CM(e,t,n,r,o){bM+=1;const i={sid:n.sid,command:"convergeAllocateEdge",uid:"666",appId:n.appId,ts:Math.floor(Date.now()/1e3),seq:bM,requestId:bM,version:NT,cname:n.cname},a={service_name:t,json_body:JSON.stringify(i)};let s,c,l=e[0];return bT((async()=>{s=Date.now();const e=await uM(l,{data:a,cancelToken:r,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"}});if(c=Date.now()-s,0!==e.code){const t=new pI(lw.UNEXPECTED_RESPONSE,"live streaming ap error, code"+e.code,{retry:!0,responseTime:c});throw oI.error(t.toString()),t}const n=JSON.parse(e.json_body);if(200!==n.code){const e=new pI(lw.UNEXPECTED_RESPONSE,"live streaming app center error, code: ".concat(n.code,", reason: ").concat(n.reason),{code:n.code,responseTime:c});throw oI.error(e.toString()),e}if(!n.servers||0===n.servers.length){const e=new pI(lw.UNEXPECTED_RESPONSE,"live streaming app center empty server",{code:n.code,responseTime:c});throw oI.error(e.toString()),e}const o=(u=t,{addressList:(i=n).servers.map((e=>"wss://".concat(e.address.replace(/\./g,"-"),".").concat(xT("WORKER_DOMAIN"),":").concat(e.wss,"?serviceName=").concat(encodeURIComponent(u)))),workerToken:i.workerToken,vid:i.vid});var i,u;return xT("LIVE_STREAMING_ADDRESS")&&(o.addressList=xT("LIVE_STREAMING_ADDRESS")instanceof Array?xT("LIVE_STREAMING_ADDRESS"):[xT("LIVE_STREAMING_ADDRESS")]),yM(yM({},o),{},{responseTime:c})}),((r,o)=>(AI.apworkerEvent(n.sid,{success:!0,sc:200,serviceName:t,responseDetail:JSON.stringify(r.addressList),firstSuccess:0===o,responseTime:c,serverIp:e[o%e.length]}),!1)),((r,o)=>(AI.apworkerEvent(n.sid,{success:!1,sc:r.data&&r.data.code||200,serviceName:t,responseTime:c,serverIp:e[o%e.length]}),!!(r.code!==lw.OPERATION_ABORTED&&r.code!==lw.UNEXPECTED_RESPONSE||r.data&&r.data.retry)&&(l=e[(o+1)%e.length],!0))),o)}let SM=1;function wM(e,t,n,r){let{url:o,areaCode:i}=e;const{clientId:a,sid:s}=t,c=Date.now();let l;const[u,d]=NM(t,i,[kO.CHOOSE_SERVER]);let A=Qw.networkState;return bT((async()=>{A&&Qw.networkState===xw.OFFLINE&&Qw.onlineWaiter&&await MA.race([Qw.onlineWaiter,iT(r&&r.maxRetryTimeout||vT.maxRetryTimeout)]),A=Qw.networkState;const{data:e,headers:i}=await uM(o,{data:u,cancelToken:n,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);l="1"===i.http3?1:-1,AI.reportResourceTiming(o,s),IM(e,o,t,c,[kO.CHOOSE_SERVER],l);const a=FO(e,kO.CHOOSE_SERVER);return RM(a),BO(a,o)}),(e=>(e&&AI.joinChooseServer(s,{lts:c,succ:!0,csAddr:o,opid:d,serverList:e.gatewayAddrs.map((e=>e.address)),ec:null,cid:e.cid.toString(),uid:e.uid.toString(),csIp:e.csIp,unilbsServerIds:[kO.CHOOSE_SERVER].toString(),isHttp3:l,corssRegionTagReq:t.apRequestDetail,corssRegionTagRes:e.res.detail&&e.res.detail[38]}),!1)),(e=>e.code!==lw.OPERATION_ABORTED&&(e.code===lw.CAN_NOT_GET_GATEWAY_SERVER?e.data.retry:(AI.joinChooseServer(s,{lts:c,succ:!1,csAddr:o,serverList:null,opid:d,ec:e.code,csIp:e.data&&e.data.csIp,unilbsServerIds:[kO.CHOOSE_SERVER].toString(),extend:JSON.stringify({networkState:A}),isHttp3:l,corssRegionTagReq:t.apRequestDetail}),oI.warning("[".concat(a||"sid-".concat(s.slice(0,6)),"] Choose server network error, retry"),e),!0))),r)}function TM(e,t,n,r){let o,{url:i,areaCode:a,serviceIds:s}=e;const c=Date.now(),[l,u]=NM(t,a,s);let d;return bT((async()=>{d&&Qw.networkState===xw.OFFLINE&&Qw.onlineWaiter&&await MA.race([Qw.onlineWaiter,iT(r&&r.maxRetryTimeout||vT.maxRetryTimeout)]),d=Qw.networkState;const{data:e,headers:a}=await uM(i,{data:l,cancelToken:n,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);o="1"===a.http3?1:-1,AI.reportResourceTiming(i,t.sid),IM(e,i,t,c,s,o);const u=FO(e,kO.CHOOSE_SERVER),A=FO(e,"proxy5"===t.cloudProxyServer?kO.CLOUD_PROXY_5:"proxy3"===t.cloudProxyServer||"proxy4"===t.cloudProxyServer?kO.CLOUD_PROXY:kO.CLOUD_PROXY_FALLBACK);return RM(u),{gatewayInfo:BO(u,i),proxyInfo:A,url:i}}),(e=>(e.gatewayInfo&&AI.joinChooseServer(t.sid,{lts:c,succ:!0,csAddr:i,serverList:e.gatewayInfo.gatewayAddrs.map((e=>e.address)),ec:null,opid:u,cid:e.gatewayInfo.cid.toString(),uid:e.gatewayInfo.uid.toString(),csIp:e.gatewayInfo.csIp,unilbsServerIds:s.toString(),isHttp3:o,corssRegionTagReq:t.apRequestDetail,corssRegionTagRes:e.gatewayInfo.res.detail&&e.gatewayInfo.res.detail[38]}),e.proxyInfo&&AI.joinWebProxyAP(t.sid,{lts:c,sucess:1,apServerAddr:i,turnServerAddrList:e.proxyInfo.addresses.map((e=>e.ip)).join(","),errorCode:null,eventType:t.cloudProxyServer,unilbsServerIds:s.toString()}),!1)),(e=>e.code!==lw.OPERATION_ABORTED&&(e.code===lw.CAN_NOT_GET_GATEWAY_SERVER?e.data.retry:(AI.joinWebProxyAP(t.sid,{lts:c,sucess:0,apServerAddr:i,turnServerAddrList:null,errorCode:e.code,eventType:t.cloudProxyServer,unilbsServerIds:s.toString(),extend:JSON.stringify({networkState:d})}),oI.warning("[".concat(t.clientId,"] multi unilbs network error, retry"),e),!0))),r)}const IM=(e,t,n,r,o,i)=>{const{sid:a,clientId:s,cloudProxyServer:c}=n,l=[],u=s=>{4096===s.flag?AI.joinChooseServer(a,{lts:r,succ:!1,csAddr:t,opid:e.opid,serverList:null,ec:s.error.message,csIp:s.error.data&&s.error.data.csIp,unilbsServerIds:o.toString(),isHttp3:i,corssRegionTagReq:n.apRequestDetail}):1048576!==s.flag&&4194304!==s.flag&&4194310!==s.flag||AI.joinWebProxyAP(a,{lts:r,sucess:0,apServerAddr:t,turnServerAddrList:null,errorCode:s.error.code,eventType:c,unilbsServerIds:o.toString()})};if(e.response_body.forEach((t=>{const n=t.buffer.code;if(23===t.uri&&0===n&&!t.buffer.edges_services)if(4194310===t.buffer.flag)oI.warning("no edge services in ap response of proxy fallback, will not set proxy in iceServers"),t.buffer.edges_services=[];else{const n={error:new pI(lw.CAN_NOT_GET_GATEWAY_SERVER,"no edge services in ap response",{retry:!0,csIp:e.detail[502]}),flag:t.buffer.flag};l.push(n),u(n)}if(0!==n){const r=pO(n),o={error:new pI(lw.CAN_NOT_GET_GATEWAY_SERVER,r.desc,{desc:r.desc,retry:r.retry,csIp:e.detail[502]}),flag:t.buffer.flag};4194310===t.buffer.flag?oI.warning(o.error.toString()):l.push(o),u(o)}})),l.length)throw oI.warning("[".concat(s||"sid-".concat(a.slice(0,6)),"] multi unilbs ").concat(t," failed, ").concat(l.map((e=>"flag: ".concat(e.flag,", message: ").concat(e.error.message,", retry: ").concat(e.error.data.retry))).join(" | "))),new pI(lw.CAN_NOT_GET_GATEWAY_SERVER,l.map((e=>"flag: ".concat(e.flag,", message: ").concat(e.error.message))).join(" | "),{retry:!!l.find((e=>e.error.data.retry)),csIp:e.detail[502],desc:[...new Set(l.map((e=>{var t;return null==e||null===(t=e.error)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.desc})).filter((e=>!!e)))]})},RM=e=>{var t,n,r,o;if(e.addresses&&0===e.addresses.length&&0===e.code)throw new pI(lw.CAN_NOT_GET_GATEWAY_SERVER,"void gateway address",{retry:!0,csIp:e.detail&&e.detail[502]});if(xT("AP_AREA")&&(null!==(r=e.detail)&&void 0!==r&&r[23]&&"string"==typeof(null===(o=e.detail)||void 0===o?void 0:o[23])?_M(e.detail[23].toLowerCase()):_M()),null!==(t=e.detail)&&void 0!==t&&t[19]&&"string"==typeof(null===(n=e.detail)||void 0===n?void 0:n[19])){const t=e.detail[19],n=null==t?void 0:t.split(";");for(let r=0;r<n.length;r++){var i;const t=Up(i=n[r]).call(i);e.addresses[r]&&n&&(e.addresses[r].fingerprint=t)}}if(xT("GATEWAY_ADDRESS")&&xT("GATEWAY_ADDRESS").length>0){oI.debug("assign gateway address to",xT("GATEWAY_ADDRESS"));const t=xT("GATEWAY_ADDRESS").map((t=>{var n,r;const o=null!==(n=null===(r=e.addresses.find((e=>e.ip===t.ip&&e.port===t.port)))||void 0===r?void 0:r.fingerprint)&&void 0!==n?n:"";return{ip:t.ip,port:t.port,ticket:e.addresses[0]&&e.addresses[0].ticket,fingerprint:o}}));e.addresses=t}},OM=(e,t)=>{if(e.response_body&&e.response_body.length){const t=e.response_body[0];if(0!==t.buffer.code){const e=pO(t.buffer.code);throw new pI(lw.UPDATE_TICKET_FAILED,"[".concat(t.buffer.code,"]: ").concat(e.desc),{retry:e.retry})}return t.buffer.ticket}throw oI.debug("update ticket request received ap response without response body:",t),new pI(lw.UPDATE_TICKET_FAILED,"cannot find response body from ap response",{retry:!1})},NM=(e,t,n)=>{const r=Math.floor(Math.random()*10**12),o={appid:e.appId,client_ts:Date.now(),opid:r,sid:e.sid,request_bodies:[{uri:22,buffer:{cname:e.cname,detail:yM(yM({6:e.stringUid,11:t,12:xT("USE_NEW_TOKEN")?"1":void 0,22:t},e.apRequestDetail?{33:e.apRequestDetail}:{}),e.apRTM?{26:"RTM2"}:{}),key:e.token,service_ids:n,uid:e.uid||0}}]};o.request_bodies.forEach((t=>{e.multiIP&&e.multiIP.gateway_ip&&(t.buffer.detail[5]=JSON.stringify({vocs_ip:[e.multiIP.uni_lbs_ip],vos_ip:[e.multiIP.gateway_ip]}))}));const i=new FormData;return i.append("request",JSON.stringify(o)),[i,r]},kM=(e,t)=>{const n=Math.floor(Math.random()*10**12),r={appid:e.appId,client_ts:Date.now(),opid:n,sid:e.sid,request_bodies:[{uri:28,buffer:{cname:e.cname,detail:{1:"",6:e.stringUid,12:"1"},token:e.token,service_ids:t,uid:e.uid||0,edges_services:e.apResponse.addresses.map((e=>({ip:e.ip,port:e.port})))}}]},o=new FormData;return o.append("request",JSON.stringify(r)),[o,n]};let PM=0;function DM(e){return MA.all(e.map((e=>e.then((e=>{throw e}),(e=>e))))).then((e=>{throw e}),(e=>e))}const LM=async e=>{let{fragementLength:t,referenceList:n,asyncMapHandler:r,allFailedhandler:o,promisesCollector:i}=e,a=0;const s=t;let c,l=0;const u=async()=>{const e=(()=>{const e=a*s,t=e+s;return n.slice(e,t).map(r)})();i&&i.push(...e);try{c=await DM(e)}catch(t){if(l+=s,a++,!(l>=n.length))return void(await u());o(t)}e.forEach((e=>e.cancel()))};return await u(),c},BM=async e=>{let{referenceList:t,asyncMapHandler:n,closeFn:r}=e;const o=t.length;let i=0;const a=async()=>{const e=n(t.shift());try{return await e}catch(s){if(i++,i>=o||null!=r&&r(s))throw s;return a()}};return a()};async function UM(e,t,n,r){const o=async function(e,t,n,r){let o=null;const i=[],a=async()=>{const o=xT("WEBCS_DOMAIN").slice(0,xT("AJAX_REQUEST_CONCURRENT")).map((t=>({url:e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(t+"/api/v2/transpond/webrtc?v=2"):"https://".concat(t,"/api/v2/transpond/webrtc?v=2"),areaCode:dM()}))),a=r.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:o.map((e=>e.url))}),s=await LM({fragementLength:xT("FRAGEMENT_LENGTH"),referenceList:o,asyncMapHandler:r=>(oI.debug("[".concat(e.clientId,"] Connect to choose_server:"),r.url),wM(r,e,t,n)),allFailedhandler:e=>{throw r.recordJoinChannelService({endTs:Date.now(),status:"error",errors:e},a),e[0]},promisesCollector:i});return r.recordJoinChannelService({endTs:Date.now(),status:"success"},a),s},s=async()=>{if(await iT(1e3),null!==o)return o;const a=xT("WEBCS_DOMAIN_BACKUP_LIST").map((t=>({url:e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(t+"/api/v2/transpond/webrtc?v=2"):"https://".concat(t,"/api/v2/transpond/webrtc?v=2"),areaCode:dM()}))),s=r.recordJoinChannelService({endTs:void 0,startTs:Date.now(),status:"pending",service:"chooseServer",urls:a.map((e=>e.url))}),c=await LM({fragementLength:xT("FRAGEMENT_LENGTH"),referenceList:a,asyncMapHandler:r=>(oI.debug("[".concat(e.clientId,"] Connect to backup choose_server:"),r.url),wM(r,e,t,n)),allFailedhandler:e=>{throw r.recordJoinChannelService({endTs:Date.now(),status:"error",errors:e},s),e[0]},promisesCollector:i});return r.recordJoinChannelService({endTs:Date.now(),status:"success"},s),c};try{return o=await DM([a(),s()]),i.length&&i.forEach((e=>e.cancel&&"function"==typeof e.cancel&&e.cancel())),o}catch(c){throw c[0]}}(e,t,n,r);return{gatewayInfo:await o}}async function MM(e,t,n,r,o){const i=e.cloudProxyServer;if("disabled"===i){if(e.useLocalAccessPoint)return await UM(e,t,n,o);if(xT("JOIN_WITH_FALLBACK_MEDIA_PROXY")){const{gatewayInfo:r,proxyInfo:i}=await HM(e,t,n,o);if(e.turnServer&&"auto"!==e.turnServer.mode)return{gatewayInfo:r};const s=i.map((e=>({turnServerURL:e.address,tcpport:e.tcpport||DT.tcpport,udpport:e.udpport||DT.udpport,username:e.username||DT.username,password:e.password||DT.password,forceturn:!1,security:!0})));if(o.useP2P){var a;const t=null!==(a=e.uid)&&void 0!==a?a:r.uid,n="glb:".concat(t.toString()),o=await Sw(n),c=i.map((e=>({turnServerURL:e.address,tcpport:e.tcpport||DT.tcpport,udpport:e.udpport||DT.udpport,username:n,password:o,forceturn:!1,security:!0})));s.push(...c)}return e.turnServer={mode:"manual",servers:s},{gatewayInfo:r}}return await UM(e,t,n,o)}const{proxyInfo:s,gatewayInfo:c}=await HM(e,t,n,o),l={gatewayInfo:c},u=s.map((e=>({turnServerURL:e.address,tcpport:"proxy3"===i?void 0:e.tcpport?e.tcpport:DT.tcpport,udpport:"proxy4"===i?void 0:e.udpport?e.udpport:DT.udpport,username:e.username||DT.username,password:e.password||DT.password,forceturn:"proxy4"!==i,security:"proxy5"===i})));if(o.useP2P){var d;const t=null!==(d=e.uid)&&void 0!==d?d:c.uid,n="glb:".concat(t.toString()),r=await Sw(n),o=s.map((e=>({turnServerURL:e.address,tcpport:"proxy3"===i?void 0:e.tcpport||DT.tcpport,udpport:"proxy4"===i?void 0:e.udpport||DT.udpport,username:n,password:r,forceturn:"proxy4"!==i,security:"proxy5"===i})));u.push(...o)}return e.turnServer={mode:"manual",servers:u},oI.debug("[".concat(e.clientId,"] set proxy server: ").concat(e.proxyServer,", mode: ").concat(i)),l}async function xM(e,t,n,r,o){const i=xT("ACCOUNT_REGISTER").slice(0,xT("AJAX_REQUEST_CONCURRENT"));let a=[];a=t.proxyServer?i.map((e=>"https://".concat(t.proxyServer,"/ap/?url=").concat(e+"/api/v1"))):i.map((e=>"https://".concat(e,"/api/v1")));const s=null==o?void 0:o.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"stringUID",urls:a});try{const i=await async function(e,t,n,r,o){const i=Date.now(),a={sid:n.sid,opid:10,appid:n.appId,string_uid:t};let s=e[0];const c=await bT((()=>uM(s+"".concat(-1===s.indexOf("?")?"?":"&","action=stringuid"),{data:a,cancelToken:r,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":72}})),((n,r)=>{if(0===n.code){if(n.uid<=0||n.uid>=Math.pow(2,32))throw oI.error("Invalid Uint Uid ".concat(t," => ").concat(n.uid),n),AI.reqUserAccount(a.sid,{lts:i,success:!1,serverAddr:s,stringUid:a.string_uid,uid:n.uid,errorCode:lw.INVALID_UINT_UID_FROM_STRING_UID,extend:a}),new pI(lw.INVALID_UINT_UID_FROM_STRING_UID);return AI.reqUserAccount(a.sid,{lts:i,success:!0,serverAddr:s,stringUid:a.string_uid,uid:n.uid,errorCode:null,extend:a}),!1}const o=pO(n.code);return o.retry&&(s=e[(r+1)%e.length]),AI.reqUserAccount(a.sid,{lts:i,success:!1,serverAddr:s,stringUid:a.string_uid,uid:n.uid,errorCode:o.desc,extend:a}),o.retry}),((t,n)=>t.code!==lw.OPERATION_ABORTED&&(AI.reqUserAccount(a.sid,{lts:i,success:!1,serverAddr:s,stringUid:a.string_uid,uid:null,errorCode:t.code,extend:a}),s=e[(n+1)%e.length],!0)),o);if(0!==c.code){const e=pO(c.code);throw new pI(lw.UNEXPECTED_RESPONSE,e.desc)}return c}(a,e,t,n,r);return null==o||o.recordJoinChannelService({status:"success",endTs:Date.now()},s),i.uid}catch(c){throw null==o||o.recordJoinChannelService({status:"error",endTs:Date.now(),errors:[c]},s),c}}async function FM(e,t,n){const r=xT("ACCOUNT_REGISTER");let o=[];o=t.proxyServer?r.map((e=>"https://".concat(t.proxyServer,"/ap/?url=").concat(e+"/api/v1"))):r.map((e=>"https://".concat(e,"/api/v1")));try{return await BM({referenceList:o,asyncMapHandler:r=>async function(e,t,n,r){const o=Date.now(),i={sid:n.sid,opid:10,appid:n.appId,string_uid:t};try{const t=await uM(e+"".concat(-1===e.indexOf("?")?"?":"&","action=stringuid"),{data:i,cancelToken:r,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":72}});if(0!==t.code){const e=pO(t.code);throw new pI(lw.UNEXPECTED_RESPONSE,"preload sua error:".concat(e.desc),e)}if(t.uid<=0||t.uid>=Math.pow(2,32))throw new pI(lw.INVALID_UINT_UID_FROM_STRING_UID);return{requestTime:o,url:e,req:i,uid:t.uid,elapse:Date.now()-o}}catch(a){throw a}}(r,e,t,n),closeFn:e=>e.code===lw.OPERATION_ABORTED||e.code===lw.UNEXPECTED_RESPONSE&&!e.data.retry})}catch(i){throw i}}async function $M(e,t,n){const r=xT("CDS_AP").slice(0,xT("AJAX_REQUEST_CONCURRENT")).map((t=>e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(t+"/api/v1"):"https://".concat(t,"/api/v1?action=config"))).map((r=>function(e,t,n,r){const o=PS(),i={flag:64,cipher_method:0,features:{device:o.name,system:o.os,system_general:navigator.userAgent,vendor:t.appId,version:NT,cname:t.cname,sid:t.sid,session_id:t.sid,detail:"",proxyServer:t.proxyServer}};return bT((()=>uM(e,{data:i,timeout:1e3,cancelToken:n,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":54}})),void 0,(e=>e.code!==lw.OPERATION_ABORTED),r)}(r,e,t,n)));let o=null,i=null,a={};try{o=await DM(r)}catch(s){if(s.code===lw.OPERATION_ABORTED)throw s;i=s}if(r.forEach((e=>e.cancel())),AI.reportApiInvoke(e.sid,{name:Rw.REQUEST_CONFIG_DISTRIBUTE,options:{error:i,res:o}}).onSuccess(),o&&o.test_tags)try{a=function(e){if(!e.test_tags)return{};const t=e.test_tags,n=Object.keys(t),r={};return n.forEach((e=>{var n;const o=Up(n=e.slice(4)).call(n),i=JSON.parse(t[e])[1];r[o]=i})),r}(o)}catch(s){}return a}async function VM(e,t){const n=xT("WEBCS_DOMAIN").concat(xT("WEBCS_DOMAIN_BACKUP_LIST")).map((e=>({url:"https://".concat(e,"/api/v2/transpond/webrtc?v=2"),areaCode:dM(),serviceIds:[kO.CHOOSE_SERVER,kO.CLOUD_PROXY_FALLBACK]})));try{return await BM({referenceList:n,asyncMapHandler:n=>async function(e,t,n){let r,{url:o,areaCode:i,serviceIds:a}=e;const s=Date.now(),[c,l]=NM(t,i,a);let u=Qw.networkState;try{u&&Qw.networkState===xw.OFFLINE&&Qw.onlineWaiter&&await MA.race([Qw.onlineWaiter,iT(vT.maxRetryTimeout)]),u=Qw.networkState;const{data:e,headers:t}=await uM(o,{data:c,cancelToken:n,headers:{"Content-Type":"multipart/form-data;"}},!0,!0);r="1"===t.http3?1:-1,(e=>{const t=[];if(e.response_body.forEach((n=>{const r=n.buffer.code;if(23===n.uri&&0===r&&!n.buffer.edges_services)if(4194310===n.buffer.flag)n.buffer.edges_services=[];else{const r={error:new pI(lw.CAN_NOT_GET_GATEWAY_SERVER,"no edge services in ap response",{retry:!0,csIp:e.detail[502]}),flag:n.buffer.flag};t.push(r)}if(0!==r){const o=pO(r),i={error:new pI(lw.CAN_NOT_GET_GATEWAY_SERVER,o.desc,{desc:o.desc,retry:o.retry,csIp:e.detail[502]}),flag:n.buffer.flag};4194310===n.buffer.flag?oI.warning(i.error.toString()):t.push(i)}})),t.length)throw new pI(lw.CAN_NOT_GET_GATEWAY_SERVER,t.map((e=>"flag: ".concat(e.flag,", message: ").concat(e.error.message))).join(" | "),{retry:!!t.find((e=>e.error.data.retry)),csIp:e.detail[502],desc:[...new Set(t.map((e=>{var t;return null==e||null===(t=e.error)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.desc})).filter((e=>!!e)))]})})(e);const i=FO(e,kO.CHOOSE_SERVER),a=FO(e,kO.CLOUD_PROXY_FALLBACK);return RM(i),{gatewayInfo:BO(i,o),proxyInfo:a,opid:l,requestTime:s,url:o,isHttp3:r,elapse:Date.now()-s}}catch(d){throw d}}(n,e,t),closeFn:e=>e.code===lw.OPERATION_ABORTED||e.code===lw.CAN_NOT_GET_GATEWAY_SERVER&&!e.data.retry})}catch(r){throw r}}async function HM(e,t,n,r){const o=xT("PROXY_SERVER_TYPE3"),i=(e,t,n)=>{let r=n||o;return Array.isArray(r)&&(r=t%2==0?o[1]:o[0]),"https://".concat(r,"/ap/?url=").concat(e)};let a=null;const s=[],c=async()=>{const o=xT("WEBCS_DOMAIN").slice(0,xT("AJAX_REQUEST_CONCURRENT")).map(((t,n)=>{let r;return r="disabled"===e.cloudProxyServer&&e.proxyServer?i("".concat(t,"/api/v2/transpond/webrtc?v=2"),n,e.proxyServer):"disabled"===e.cloudProxyServer||"fallback"===e.cloudProxyServer?"https://".concat(t,"/api/v2/transpond/webrtc?v=2"):i("".concat(t,"/api/v2/transpond/webrtc?v=2"),n),{url:r,areaCode:dM(),serviceIds:[kO.CHOOSE_SERVER,"proxy5"===e.cloudProxyServer?kO.CLOUD_PROXY_5:"proxy3"===e.cloudProxyServer||"proxy4"===e.cloudProxyServer?kO.CLOUD_PROXY:kO.CLOUD_PROXY_FALLBACK]}})),a=r.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:o.map((e=>e.url))}),c=await LM({fragementLength:xT("FRAGEMENT_LENGTH"),referenceList:o,asyncMapHandler:r=>(oI.debug("[".concat(e.clientId,"] Connect to choose_server:"),r.url),TM(r,e,t,n)),allFailedhandler:e=>{throw r.recordJoinChannelService({endTs:Date.now(),status:"error",errors:e},a),e[0]},promisesCollector:s});return r.recordJoinChannelService({endTs:Date.now(),status:"success"},a),c},l=async()=>{if(await iT(1e3),null!==a)return a;const o=xT("WEBCS_DOMAIN_BACKUP_LIST").map(((t,n)=>{let r;return r="disabled"===e.cloudProxyServer&&e.proxyServer?i("".concat(t,"/api/v2/transpond/webrtc?v=2"),n,e.proxyServer):"disabled"===e.cloudProxyServer||"fallback"===e.cloudProxyServer?"https://".concat(t,"/api/v2/transpond/webrtc?v=2"):i("".concat(t,"/api/v2/transpond/webrtc?v=2"),n),{url:r,areaCode:dM(),serviceIds:[kO.CHOOSE_SERVER,"proxy5"===e.cloudProxyServer?kO.CLOUD_PROXY_5:"proxy3"===e.cloudProxyServer||"proxy4"===e.cloudProxyServer?kO.CLOUD_PROXY:kO.CLOUD_PROXY_FALLBACK]}})),c=r.recordJoinChannelService({startTs:Date.now(),status:"pending",service:"chooseServer",urls:o.map((e=>e.url))}),l=await LM({fragementLength:xT("FRAGEMENT_LENGTH"),referenceList:o,asyncMapHandler:r=>(oI.debug("[".concat(e.clientId,"] Connect to backup choose_server:"),r.url),TM(r,e,t,n)),allFailedhandler:e=>{throw r.recordJoinChannelService({endTs:Date.now(),status:"error",errors:e},c),e[0]},promisesCollector:s});return r.recordJoinChannelService({endTs:Date.now(),status:"success"},c),l};let u,d,A;try{({gatewayInfo:u,proxyInfo:d,url:A}=await DM([c(),l()]))}catch(p){throw p[0]}if(s.length&&s.forEach((e=>e.cancel&&"function"==typeof e.cancel&&e.cancel())),!u||!d)throw new pI(lw.UNEXPECTED_ERROR,"missing gateway or proxy response").print();if(e.apUrl=A,"disabled"!==e.cloudProxyServer&&Array.isArray(o)&&A){const t=/^https?:\/\/(.+?)(\/.*)?$/.exec(A)[1];Or(o).call(o,t)&&(e.proxyServer=t,oI.setProxyServer(t),AI.setProxyServer(t))}return a={gatewayInfo:u,proxyInfo:await $O(d,u.uid)},a}async function jM(e,t,n){const r=xT("UAP_AP").slice(0,xT("AJAX_REQUEST_CONCURRENT")).map((t=>e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(t+"/api/v1?action=uap"):"https://".concat(t,"/api/v1?action=uap"))).map((r=>function(e,t,n,r){const o={command:"convergeAllocateEdge",sid:t.sid,appId:t.appId,token:t.token,ts:Date.now(),version:NT,cname:t.cname,uid:t.uid.toString(),requestId:SM,seq:SM};SM+=1;const i={service_name:"tele_channel",json_body:JSON.stringify(o)};return bT((async()=>{const t=await uM(e,{data:i,cancelToken:n,headers:{"X-Packet-Service-Type":0,"X-Packet-URI":61}});if(0!==t.code){const e=new pI(lw.UNEXPECTED_RESPONSE,"cross channel ap error, code"+t.code,{retry:!0});throw oI.error(e.toString()),e}const r=JSON.parse(t.json_body);if(200!==r.code){const e=new pI(lw.UNEXPECTED_RESPONSE,"cross channel app center error, code: ".concat(r.code,", reason: ").concat(r.reason));throw oI.error(e.toString()),e}if(!r.servers||0===r.servers.length){const e=new pI(lw.UNEXPECTED_RESPONSE,"cross channel app center empty server");throw oI.error(e.toString()),e}return{vid:r.vid,workerToken:r.workerToken,addressList:(xT("CHANNEL_MEDIA_RELAY_SERVERS")||r.servers).map((e=>"wss://".concat(e.address.replace(/\./g,"-"),".").concat(xT("WORKER_DOMAIN"),":").concat(e.wss)))}}),void 0,(e=>!!(e.code!==lw.OPERATION_ABORTED&&e.code!==lw.UNEXPECTED_RESPONSE||e.data&&e.data.retry)),r)}(r,e,t,n)));try{const e=await DM(r);return r.forEach((e=>e.cancel())),e}catch(o){throw o[0]}}async function QM(e,t,n){let r=null;const o=[],i=async i=>{const a=xT(i?"WEBCS_DOMAIN_BACKUP_LIST":"WEBCS_DOMAIN").map((t=>e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(t+"/api/v2/transpond/webrtc?v=2"):"https://".concat(t,"/api/v2/transpond/webrtc?v=2")));return i&&(await iT(1e3),null!==r)?r:await LM({fragementLength:xT("FRAGEMENT_LENGTH"),referenceList:a,asyncMapHandler:r=>(oI.debug("[".concat(e.clientId,"] update ticket, Connect to ").concat(i?"backup":""," choose_server:"),r),function(e,t,n,r){const[o]=kM(t,[kO.CHOOSE_SERVER]);let i=Qw.networkState;return bT((async()=>{i&&Qw.networkState===xw.OFFLINE&&Qw.onlineWaiter&&await MA.race([Qw.onlineWaiter,iT(r&&r.maxRetryTimeout||vT.maxRetryTimeout)]),i=Qw.networkState;const t=await uM(e,{data:o,cancelToken:n,headers:{"Content-Type":"multipart/form-data;"}},!0);return OM(t,e)}),(()=>!1),(e=>e.code!==lw.OPERATION_ABORTED&&(e.code===lw.UPDATE_TICKET_FAILED?e.data.retry:(oI.warning("[".concat(t.clientId,"] update ticket network error, retry"),e),!0))),r)}(r,e,t,n)),allFailedhandler:e=>{throw e[0]},promisesCollector:o})};try{return r=await DM([i(!1),i(!0)]),o.length&&o.forEach((e=>e.cancel&&"function"==typeof e.cancel&&e.cancel())),r}catch(a){throw a[0]}}function GM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function KM(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?GM(Object(n),!0).forEach((function(t){Ov(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GM(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class WM extends ww{get isSuccess(){return!!this.configs}constructor(e){super(),Ov(this,"configs",void 0),Ov(this,"joinInfo",void 0),Ov(this,"cancelToken",void 0),Ov(this,"retryConfig",{timeout:3e3,timeoutFactor:1.5,maxRetryCount:1,maxRetryTimeout:1e4}),Ov(this,"interval",void 0),Ov(this,"mutex",void 0),Ov(this,"mutableParamsRead",!1),this.mutex=new _T("config-distribute",e)}startGetConfigDistribute(e,t){this.joinInfo=e,this.cancelToken=t,this.interval&&this.stopGetConfigDistribute(),xT("ENABLE_CONFIG_DISTRIBUTE")&&(this.updateConfigDistribute(),this.interval=window.setInterval((()=>{this.updateConfigDistribute()}),xT("CONFIG_DISTRIBUTE_INTERVAL")))}stopGetConfigDistribute(){this.interval&&clearInterval(this.interval),this.interval=void 0,this.joinInfo=void 0,this.cancelToken=void 0}async awaitConfigDistributeComplete(){this.mutex.isLocked&&(await this.mutex.lock())()}async updateConfigDistribute(){if(this.mutableParamsRead||(this.mutableParamsRead=!0,AI.reportApiInvoke(null,{options:void 0,name:Rw.LOAD_CONFIG_FROM_LOCALSTORAGE,tag:Ow.TRACER}).onSuccess(JSON.stringify(FT))),!this.joinInfo||!this.cancelToken||!this.retryConfig)return void oI.debug("[config-distribute] get config distribute interrupted have no joininfo");let e;const t=await this.mutex.lock();try{e=await $M(this.joinInfo,this.cancelToken,this.retryConfig),oI.debug("[config-distribute] get config distribute",JSON.stringify(e)),e.limit_bitrate&&this.handleBitrateLimit(e.limit_bitrate),this.cacheGlobalParameterConfig(e),this.configs=e}catch(n){const e=new pI(lw.NETWORK_RESPONSE_ERROR,n);oI.warning("[config-distribute] ".concat(e.toString()))}finally{t()}}getBitrateLimit(){return this.configs?this.configs.limit_bitrate:void 0}handleBitrateLimit(e){var t;(t=e)&&t.uplink&&t.id&&void 0!==t.uplink.max_bitrate&&void 0!==t.uplink.min_bitrate&&(this.configs&&this.configs.limit_bitrate?this.configs&&this.configs.limit_bitrate&&this.configs.limit_bitrate.id!==e.id&&this.emit(GR.UPDATE_BITRATE_LIMIT,e):this.emit(GR.UPDATE_BITRATE_LIMIT,e))}getLowStreamConfigDistribute(){return this.configs&&this.configs.limit_bitrate&&KM({},this.configs.limit_bitrate.low_stream_uplink)}cacheGlobalParameterConfig(e){var t;const n=Xh(t=Object.keys(e).filter((e=>/^webrtc_ng_global_parameter/.test(e)))).call(t);for(let i=0;i<n.length;i++)for(let t=n.length-1;t>i;t--){const r=n[t];if("number"==typeof e[r].__priority){const o=e[r].__priority,i=n[t-1];if("number"==typeof e[i].__priority){if(!(o>e[i].__priority))continue;{const e=r;n[t]=n[t-1],n[t-1]=e}}else{const e=r;n[t]=n[t-1],n[t-1]=e}}}const r={};n.forEach((t=>{const n=e[t],o=n.__expires;Object.keys(n).forEach((e=>{"__priority"===e||"__expires"===e||Object.prototype.hasOwnProperty.call(r,e)||(r[e]=KM({value:n[e]},o&&{expires:o}))}))}));try{!function(e){try{const t=Date.now();Object.keys(e).forEach((n=>{switch(n){case"ENABLE_EVENT_REPORT":case"UPLOAD_LOG":case"ENABLE_AG_ADAPTATION":case"FORCE_AG_HIGH_FRAMERATE":case"FORCE_SUPPORT_AG_ADAPTATION":case"ENCODER_CONFIG_LIMIT":case"CAMERA_CAPTURE_CONFIG":case"ENABLE_PRELOAD":if(Object.prototype.hasOwnProperty.call(UT,n)){const{value:r,expires:o}=e[n];if(o&&o<=t)return;FT[n]=r,UT[n]=r,oI.debug("Update global parameters from config distribute",n,r)}}}))}catch(t){oI.error("Error update config immediately: ".concat(e),t.message)}}(r);const e=JSON.stringify(r),t=window.btoa(e);window.localStorage.setItem("websdk_ng_global_parameter",t),oI.debug("Caching global parameters ".concat(e))}catch(o){oI.error("Error caching global parameters:",o.message)}}}class qM extends ww{constructor(){super(...arguments),Ov(this,"resultStorage",new Map)}setLocalAudioStats(e,t,n){this.record("AUDIO_INPUT_LEVEL_TOO_LOW",e,this.checkAudioInputLevel(n,t)),this.record("SEND_AUDIO_BITRATE_TOO_LOW",e,this.checkSendAudioBitrate(n,t))}setLocalVideoStats(e,t,n){this.record("SEND_VIDEO_BITRATE_TOO_LOW",e,this.checkSendVideoBitrate(n,t)),this.record("FRAMERATE_INPUT_TOO_LOW",e,this.checkFramerateInput(n,t)),this.record("FRAMERATE_SENT_TOO_LOW",e,this.checkFramerateSent(n))}setRemoteAudioStats(e,t){const n=e.getUserId();this.record("AUDIO_OUTPUT_LEVEL_TOO_LOW",n,this.checkAudioOutputLevel(t))}setRemoteVideoStats(e,t){const n=e.getUserId();this.record("RECV_VIDEO_DECODE_FAILED",n,this.checkVideoDecode(t))}record(e,t,n){if(xT("STATS_UPDATE_INTERVAL")>500)return;this.resultStorage.has(e)||this.resultStorage.set(e,{result:[],isPrevNormal:!0});const r=this.resultStorage.get(e);if(r&&(r.result.push(n),r.result.length>=5)){var o;const n=Or(o=r.result).call(o,!0);r.isPrevNormal&&!n&&this.emit("exception",zM[e],e,t),!r.isPrevNormal&&n&&this.emit("exception",zM[e]+2e3,e+"_RECOVER",t),r.isPrevNormal=n,r.result=[]}}checkAudioOutputLevel(e){return!(e.receiveBitrate>0&&0===e.receiveLevel)}checkAudioInputLevel(e,t){return t instanceof aB&&!t.isActive||!!t.muted||0!==e.sendVolumeLevel}checkFramerateInput(e,t){let n=null;t._encoderConfig&&t._encoderConfig.frameRate&&(n=UO(t._encoderConfig.frameRate));const r=e.captureFrameRate;return!n||!r||!(n>10&&r<5||n<10&&n>=5&&r<=1)}checkFramerateSent(e){return!(e.captureFrameRate&&e.sendFrameRate&&e.captureFrameRate>5&&e.sendFrameRate<=1)}checkSendVideoBitrate(e,t){return!!t.muted||0!==e.sendBitrate}checkSendAudioBitrate(e,t){return t instanceof aB&&!t.isActive||!!t.muted||0!==e.sendBitrate}checkVideoDecode(e){return 0===e.receiveBitrate||0!==e.decodeFrameRate}}const zM={FRAMERATE_INPUT_TOO_LOW:1001,FRAMERATE_SENT_TOO_LOW:1002,SEND_VIDEO_BITRATE_TOO_LOW:1003,RECV_VIDEO_DECODE_FAILED:1005,AUDIO_INPUT_LEVEL_TOO_LOW:2001,AUDIO_OUTPUT_LEVEL_TOO_LOW:2002,SEND_AUDIO_BITRATE_TOO_LOW:2003},YM=new class{markSubscribeStart(e,t){performance.mark("agora-web-sdk/".concat(e,"/subscribe-").concat(t))}markPublishStart(e,t){performance.mark("agora-web-sdk/".concat(e,"/publish-").concat(t))}measureFromSubscribeStart(e,t){const n=performance.getEntriesByName("agora-web-sdk/".concat(e,"/subscribe-").concat(t));if(n.length>0){const e=n[n.length-1];return Math.round(performance.now()-e.startTime)}return 0}measureFromPublishStart(e,t){const n=performance.getEntriesByName("agora-web-sdk/".concat(e,"/publish-").concat(t));if(n.length>0){const e=n[n.length-1];return Math.round(performance.now()-e.startTime)}return 0}};var JM=n(ne.Object.getOwnPropertySymbols),XM=On,ZM=Wn.indexOf,ex=xr,tx=S([].indexOf),nx=!!tx&&1/tx([1],1,-0)<0;XM({target:"Array",proto:!0,forced:nx||!ex("indexOf")},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return nx?tx(this,e,t)||0:ZM(this,e,t)}});var rx=Yn("Array").indexOf,ox=u,ix=rx,ax=Array.prototype,sx=n((function(e){var t=e.indexOf;return e===ax||ox(ax,e)&&t===ax.indexOf?ix:t}));function cx(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=NI(e);for(r=0;r<i.length;r++)n=i[r],sx(t).call(t,n)>=0||(o[n]=e[n]);return o}(e,t);if(JM){var i=JM(e);for(r=0;r<i.length;r++)n=i[r],sx(t).call(t,n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function lx(e){if(Array.isArray(e))return e.map((e=>e));if(!ux(e))return e;const t={};for(const n in e){const r=e[n];ux(r)||Array.isArray(r)?t[n]=lx(r):t[n]=r}return t}function ux(e){return!("object"!=typeof e||Array.isArray(e)||!e)}class dx{constructor(e){Ov(this,"input",[]),Ov(this,"size",void 0),this.size=e}add(e){this.input.push(e),this.input.length>this.size&&this.input.splice(0,1)}diffMean(){return 0===this.input.length?0:(this.input[this.input.length-1]-this.input[0])/this.input.length}}const Ax={address:"unknown",candidateType:"unknown",id:"unknown",port:0,priority:0,protocol:"unknown",type:"unknown"},px={timestamp:0,bitrate:{actualEncoded:0,transmit:0},sendPacketLossRate:0,recvPacketLossRate:0,videoRecv:[],videoSend:[],audioRecv:[],audioSend:[],selectedCandidatePair:{id:"unknown",localCandidate:Ax,remoteCandidate:Ax},updateInterval:0},hx={firsCount:0,nacksCount:0,plisCount:0,framesDecodeCount:0,framesDecodeInterval:0,framesDecodeFreezeTime:0,decodeFrameRate:0,bytes:0,packetsLost:0,packetLostRate:0,packets:0,ssrc:0,qpSumPerFrame:0,framesDroppedCount:0,outputFrameRate:0,packetsDiscarded:0,framesAssembledFromMultiplePackets:0,totalProcessingDelay:0,avgDecodeMs:0,avgFramesAssembledFromMultiplePacketsMs:0,avgProcessingDelayMs:0,avgInterFrameDelayMs:0,totalAssemblyTime:0},fx={firsCount:0,nacksCount:0,plisCount:0,frameCount:0,bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,jitterMs:0,qpSumPerFrame:0},gx={bytes:0,packets:0,packetsLost:0,packetLostRate:0,ssrc:0,rttMs:0,jitterMs:0},mx={jitterBufferMs:0,jitterMs:0,bytes:0,packetsLost:0,packetLostRate:0,packetsDiscarded:0,packets:0,ssrc:0,receivedFrames:0,droppedFrames:0,concealedSamples:0};function _x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ex(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_x(Object(n),!0).forEach((function(t){Ov(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class vx{constructor(e,t){Ov(this,"onFirstVideoReceived",void 0),Ov(this,"onFirstVideoDecoded",void 0),Ov(this,"onFirstAudioReceived",void 0),Ov(this,"onFirstVideoDecodedTimeout",void 0),Ov(this,"onFirstAudioDecoded",void 0),Ov(this,"onSelectedLocalCandidateChanged",void 0),Ov(this,"onSelectedRemoteCandidateChanged",void 0),Ov(this,"videoIsReady",!1),Ov(this,"videoIsReady2",{}),Ov(this,"pc",void 0),Ov(this,"options",void 0),Ov(this,"intervalTimer",void 0),Ov(this,"stats",lx(px)),Ov(this,"isFirstVideoReceived",{}),Ov(this,"isFirstVideoDecoded",{}),Ov(this,"isFirstAudioReceived",{}),Ov(this,"isFirstAudioDecoded",{}),Ov(this,"isFirstVideoDecodedTimeout",{}),Ov(this,"lossRateWindowStats",[]),this.pc=e,this.options=t,this.intervalTimer=window.setInterval((async()=>{this.updateStats()}),this.options.updateInterval)}getStats(){return this.stats}getSelectedCandidatePair(){return new MA((e=>{e({local:Ex({},Ax),remote:Ex({},Ax)})}))}setVideoIsReady(e){this.videoIsReady=e}setVideoIsReady2(e,t){this.videoIsReady2[e]=t}getVideoIsReady(e){return this.videoIsReady2[e]||!1}setIsFirstAudioDecoded(e){}destroy(){window.clearInterval(this.intervalTimer),this.pc=void 0}calcLossRate(e){this.lossRateWindowStats.push(e),this.lossRateWindowStats.length>this.options.lossRateInterval&&this.lossRateWindowStats.splice(0,1);const t=this.lossRateWindowStats.length,n=["videoSend","audioSend","videoRecv","audioRecv"];let r=0,o=0,i=0,a=0;for(const s of n)e[s].forEach(((e,n)=>{if(!this.lossRateWindowStats[t-1][s][n]||!this.lossRateWindowStats[0][s][n])return;const c=this.lossRateWindowStats[t-1][s][n].packets-this.lossRateWindowStats[0][s][n].packets,l=this.lossRateWindowStats[t-1][s][n].packetsLost-this.lossRateWindowStats[0][s][n].packetsLost;"videoSend"===s||"audioSend"===s?(r+=c,i+=l):(o+=c,a+=l),Number.isNaN(c)||Number.isNaN(c)?e.packetLostRate=0:e.packetLostRate=c<=0||l<=0?0:l/(c+l)}));e.sendPacketLossRate=r<=0||i<=0?0:i/(r+i),e.recvPacketLossRate=o<=0||a<=0?0:a/(o+a)}}function yx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yx(Object(n),!0).forEach((function(t){Ov(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yx(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class Cx extends vx{constructor(){super(...arguments),Ov(this,"_stats",px),Ov(this,"lastDecodeVideoReceiverStats",new Map)}async updateStats(){const e=await this._getStats(),t=this.statsResponsesToObjects(e);this._stats=lx(px);const n=t.filter((e=>"ssrc"===e.type));this.processSSRCStats(n);const r=t.find((e=>"VideoBwe"===e.type));r&&this.processBandwidthStats(r),this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats}processBandwidthStats(e){this._stats.bitrate={actualEncoded:Number(e.googActualEncBitrate),targetEncoded:Number(e.googTargetEncBitrate),retransmit:Number(e.googRetransmitBitrate),transmit:Number(e.googTransmitBitrate)},this._stats.sendBandwidth=Number(e.googAvailableSendBandwidth)}processSSRCStats(e){e.forEach((e=>{var t;const n=Or(t=e.id).call(t,"send");switch("".concat(e.mediaType,"_").concat(n?"send":"recv")){case"video_send":{const t=lx(fx);t.codec=e.googCodecName,t.adaptionChangeReason="none",e.googCpuLimitedResolution&&(t.adaptionChangeReason="cpu"),e.googBandwidthLimitedResolution&&(t.adaptionChangeReason="bandwidth"),t.avgEncodeMs=Number(e.googAvgEncodeMs),t.inputFrame={width:Number(e.googFrameWidthInput)||Number(e.googFrameWidthSent),height:Number(e.googFrameHeightInput)||Number(e.googFrameHeightSent),frameRate:Number(e.googFrameRateInput)},t.sentFrame={width:Number(e.googFrameWidthSent),height:Number(e.googFrameHeightSent),frameRate:Number(e.googFrameRateInput)},t.firsCount=Number(e.googFirReceived),t.nacksCount=Number(e.googNacksReceived),t.plisCount=Number(e.googPlisReceived),t.frameCount=Number(e.framesEncoded),t.bytes=Number(e.bytesSent),t.packets=Number(e.packetsSent),t.packetsLost=Number(e.packetsLost),t.ssrc=Number(e.ssrc),t.rttMs=Number(e.googRtt||0),this._stats.videoSend.push(t),this._stats.rtt=t.rttMs;break}case"video_recv":{const t=lx(hx),n=this.lastDecodeVideoReceiverStats.get(Number(e.ssrc));if(t.codec=e.googCodecName,t.targetDelayMs=Number(e.googTargetDelayMs),t.renderDelayMs=Number(e.googRenderDelayMs),t.currentDelayMs=Number(e.googCurrentDelayMs),t.minPlayoutDelayMs=Number(e.googMinPlayoutDelayMs),t.decodeMs=Number(e.googDecodeMs),t.maxDecodeMs=Number(e.googMaxDecodeMs),t.receivedFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateReceived)},t.decodedFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateDecoded)},t.decodeFrameRate=Number(e.googFrameRateDecoded),t.outputFrame={width:Number(e.googFrameWidthReceived),height:Number(e.googFrameHeightReceived),frameRate:Number(e.googFrameRateOutput)},t.jitterBufferMs=Number(e.googJitterBufferMs),t.firsCount=Number(e.googFirsSent),t.nacksCount=Number(e.googNacksSent),t.plisCount=Number(e.googPlisSent),t.framesDecodeCount=Number(e.framesDecoded),t.bytes=Number(e.bytesReceived),t.packets=Number(e.packetsReceived),t.packetsLost=Number(e.packetsLost),t.ssrc=Number(e.ssrc),t.packets>0&&!this.isFirstVideoReceived[t.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(t.ssrc),this.isFirstVideoReceived[t.ssrc]=!0),t.framesDecodeCount>0&&!this.isFirstVideoDecoded[t.ssrc]&&(this.onFirstVideoDecoded&&this.onFirstVideoDecoded(t.ssrc,t.decodedFrame.width,t.decodedFrame.height),this.isFirstVideoDecoded[t.ssrc]=!0),n){const r=n.stats,o=Date.now()-n.lts;t.framesDecodeFreezeTime=r.framesDecodeFreezeTime,t.framesDecodeInterval=r.framesDecodeInterval,t.framesDecodeCount>r.framesDecodeCount&&this.isFirstVideoDecoded[t.ssrc]?(n.lts=Date.now(),t.framesDecodeInterval=o,t.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(e.ssrc,10))?t.framesDecodeFreezeTime+=t.framesDecodeInterval:this.setVideoIsReady2(parseInt(e.ssrc,10),!0))):t.framesDecodeCount<n.stats.framesDecodeCount&&(t.framesDecodeInterval=0)}this.lastDecodeVideoReceiverStats.set(t.ssrc,{stats:bx({},t),lts:Date.now()}),this._stats.videoRecv.push(t);break}case"audio_recv":{const t=lx(mx);t.codec=e.googCodecName,t.outputLevel=Math.abs(Number(e.audioOutputLevel))/32767,t.decodingCNG=Number(e.googDecodingCNG),t.decodingCTN=Number(e.googDecodingCTN),t.decodingCTSG=Number(e.googDecodingCTSG),t.decodingNormal=Number(e.googDecodingNormal),t.decodingPLC=Number(e.googDecodingPLC),t.decodingPLCCNG=Number(e.googDecodingPLCCNG),t.expandRate=Number(e.googExpandRate),t.accelerateRate=Number(e.googAccelerateRate),t.preemptiveExpandRate=Number(e.googPreemptiveExpandRate),t.secondaryDecodedRate=Number(e.googSecondaryDecodedRate),t.speechExpandRate=Number(e.googSpeechExpandRate),t.preferredJitterBufferMs=Number(e.googPreferredJitterBufferMs),t.jitterBufferMs=Number(e.googJitterBufferMs),t.jitterMs=Number(e.googJitterReceived),t.bytes=Number(e.bytesReceived),t.packets=Number(e.packetsReceived),t.packetsLost=Number(e.packetsLost),t.ssrc=Number(e.ssrc),t.receivedFrames=Number(e.googDecodingCTN)||Number(e.packetsReceived),t.droppedFrames=Number(e.googDecodingPLC)+Number(e.googDecodingPLCCNG)||Number(e.packetsLost),t.receivedFrames>0&&!this.isFirstAudioReceived[t.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(t.ssrc),this.isFirstAudioReceived[t.ssrc]=!0),t.decodingNormal>0&&!this.isFirstAudioDecoded[t.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(t.ssrc),this.isFirstAudioDecoded[t.ssrc]=!0),this._stats.audioRecv.push(t);break}case"audio_send":{const t=lx(gx);t.codec=e.googCodecName,t.inputLevel=Math.abs(Number(e.audioInputLevel))/32767,t.aecReturnLoss=Number(e.googEchoCancellationReturnLoss||0),t.aecReturnLossEnhancement=Number(e.googEchoCancellationReturnLossEnhancement||0),t.residualEchoLikelihood=Number(e.googResidualEchoLikelihood||0),t.residualEchoLikelihoodRecentMax=Number(e.googResidualEchoLikelihoodRecentMax||0),t.bytes=Number(e.bytesSent),t.packets=Number(e.packetsSent),t.packetsLost=Number(e.packetsLost),t.ssrc=Number(e.ssrc),t.rttMs=Number(e.googRtt||0),this._stats.rtt=t.rttMs,this._stats.audioSend.push(t);break}}}))}_getStats(){return new MA(((e,t)=>{this.pc.getStats(e,t)}))}statsResponsesToObjects(e){const t=[];return e.result().forEach((e=>{const n={id:e.id,timestamp:e.timestamp.valueOf().toString(),type:e.type};e.names().forEach((t=>{n[t]=e.stat(t)})),t.push(n)})),t}}var Sx=function(e){return e[e.kNone=1]="kNone",e[e.kMillisecondsFromSeconds=1e3]="kMillisecondsFromSeconds",e[e.kBytesToBits=8]="kBytesToBits",e}(Sx||{});function wx(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Sx.kNone;if(!t)return;const i=Number(t[n]);if("number"!=typeof i)return;const a=Number(t[r]);if("number"!=typeof a)return;if(!e)return a?i/a*o:void 0;const s=Number(e[n]);if("number"!=typeof s)return;const c=Number(e[r]);if("number"!=typeof c)return;const l=a-c;return l?(i-s)/l*o:void 0}function Tx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ix(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tx(Object(n),!0).forEach((function(t){Ov(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tx(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class Rx extends vx{constructor(){super(...arguments),Ov(this,"_stats",px),Ov(this,"report",void 0),Ov(this,"lastDecodeVideoReceiverStats",new Map),Ov(this,"lastVideoFramesRecv",new Map),Ov(this,"lastVideoFramesSent",new Map),Ov(this,"lastVideoFramesDecode",new Map),Ov(this,"lastVideoFramesOutput",new Map),Ov(this,"lastVideoJBDelay",new Map),Ov(this,"lastAudioJBDelay",new Map),Ov(this,"mediaBytesSent",new Map),Ov(this,"mediaBytesRetransmit",new Map),Ov(this,"mediaBytesTargetEncode",new Map),Ov(this,"lastDecodeAudioReceiverStats",new Map),Ov(this,"lastEncoderMs",new Map)}async updateStats(){this.report=await this.pc.getStats(),this._stats=lx(px),this.report.forEach((e=>{switch(e.type){case lR.OUTBOUND:case lR.INBOUND:{const t=e.mediaType||e.kind,n=!t&&"frameWidth"in e,r=!t&&!("frameWidth"in e);e.type===lR.OUTBOUND?"audio"===t||r?this.processAudioOutboundStats(e):("video"===t||n)&&this.processVideoOutboundStats(e):e.type===lR.INBOUND&&("audio"===t||r?this.processAudioInboundStats(e):("video"===t||n)&&this.processVideoInboundStats(e));break}case lR.TRANSPORT:{const t=this.report.get(e.selectedCandidatePairId);t&&this.processCandidatePairStats(t);break}case lR.CANDIDATE_PAIR:e.selected&&this.processCandidatePairStats(e)}})),this.updateSendBitrate(),this._stats.updateInterval=Date.now()-this.stats.timestamp,this._stats.timestamp=Date.now(),this.calcLossRate(this._stats),this.stats=this._stats}async getSelectedCandidatePair(){const e=await this.pc.getStats(),t={local:Ix({},Ax),remote:Ix({},Ax)};return e.forEach((n=>{let r;if(n.type===lR.TRANSPORT&&(r=e.get(n.selectedCandidatePairId)),n.type===lR.CANDIDATE_PAIR&&n.selected&&(r=n),r){const n=(e,t)=>{e.type=t.type,e.id=t.id,t.address&&(e.address=t.address),t.candidateType&&(e.candidateType=t.candidateType),t.port&&(e.port=t.port),t.priority&&(e.priority=t.priority),t.protocol&&(e.protocol=t.protocol),t.relayProtocol&&(e.relayProtocol=t.relayProtocol)};if(r.localCandidateId){const o=e.get(r.localCandidateId);o&&n(t.local,o)}if(r.remoteCandidateId){const o=e.get(r.remoteCandidateId);o&&n(t.remote,o)}}})),t}processCandidatePairStats(e){if(this._stats.sendBandwidth=e.availableOutgoingBitrate||0,e.currentRoundTripTime&&(this._stats.rtt=1e3*e.currentRoundTripTime),this._stats.videoSend.forEach((t=>{e.currentRoundTripTime&&(t.rttMs=1e3*e.currentRoundTripTime)})),this._stats.audioSend.forEach((t=>{e.currentRoundTripTime&&(t.rttMs=1e3*e.currentRoundTripTime)})),this._stats.selectedCandidatePair.id=e.id,e.localCandidateId){const t=this.report.get(e.localCandidateId);t&&this.processCandidateStats(t)}if(e.remoteCandidateId){const t=this.report.get(e.remoteCandidateId);t&&this.processCandidateStats(t)}}processCandidateStats(e){let t;e.type===lR.LOCAL_CANDIDATE&&(t=this._stats.selectedCandidatePair.localCandidate),e.type===lR.REMOTE_CANDIDATE&&(t=this._stats.selectedCandidatePair.remoteCandidate),t&&(t.type=e.type,t.id=e.id,e.address&&(t.address=e.address),e.candidateType&&(t.candidateType=e.candidateType),e.port&&(t.port=e.port),e.priority&&(t.priority=e.priority),e.protocol&&(t.protocol=e.protocol),e.relayProtocol&&(t.relayProtocol=e.relayProtocol),e.type===lR.LOCAL_CANDIDATE&&this.stats.selectedCandidatePair.localCandidate.id!==t.id&&this.onSelectedLocalCandidateChanged&&this.onSelectedLocalCandidateChanged(Ix({},t),Ix({},this.stats.selectedCandidatePair.localCandidate)),e.type===lR.REMOTE_CANDIDATE&&this.stats.selectedCandidatePair.remoteCandidate.id!==t.id&&this.onSelectedRemoteCandidateChanged&&this.onSelectedRemoteCandidateChanged(Ix({},t),Ix({},this.stats.selectedCandidatePair.remoteCandidate)))}processAudioInboundStats(e){let t=this._stats.audioRecv.find((t=>t.ssrc===e.ssrc));t||(t=lx(mx),this._stats.audioRecv.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsReceived,t.packetsLost=e.packetsLost,t.packetsDiscarded=e.packetsDiscarded,t.bytes=e.bytesReceived,t.jitterMs=1e3*e.jitter,t.retransmittedBytesReceived=e.retransmittedBytesReceived,t.retransmittedPacketsReceived=e.retransmittedPacketsReceived,t.totalProcessingDelay=e.totalProcessingDelay,t.jitterBufferEmittedCount=e.jitterBufferEmittedCount;const n=this.lastDecodeAudioReceiverStats.get(t.ssrc);t.avgProcessingDelayMs=wx(n,t,"totalProcessingDelay","jitterBufferEmittedCount",Sx.kMillisecondsFromSeconds),this.processAudioTrackReceiverStats(e,e.trackId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),t.receivedFrames||(t.receivedFrames=e.packetsReceived),t.droppedFrames||(t.droppedFrames=e.packetsLost),t.receivedFrames>0&&!this.isFirstAudioReceived[t.ssrc]&&(this.onFirstAudioReceived&&this.onFirstAudioReceived(t.ssrc),this.isFirstAudioReceived[t.ssrc]=!0),t.outputLevel&&t.outputLevel>0&&!this.isFirstAudioDecoded[t.ssrc]&&(this.onFirstAudioDecoded&&this.onFirstAudioDecoded(t.ssrc),this.isFirstAudioDecoded[t.ssrc]=!0),"number"==typeof e.concealedSamples&&(t.concealedSamples=e.concealedSamples),this.lastDecodeAudioReceiverStats.set(t.ssrc,Ix({},t))}processVideoInboundStats(e){let t=this._stats.videoRecv.find((t=>t.ssrc===e.ssrc));t||(t=lx(hx),this._stats.videoRecv.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsReceived,t.packetsLost=e.packetsLost,t.bytes=e.bytesReceived,t.firsCount=e.firCount,t.nacksCount=e.nackCount,t.plisCount=e.pliCount,t.framesDecodeCount=e.framesDecoded,t.framesDroppedCount=e.framesDropped,t.totalInterFrameDelay=e.totalInterFrameDelay,t.totalSquaredInterFrameDelay=e.totalSquaredInterFrameDelay,t.totalFreezesDuration=e.totalFreezesDuration,t.totalProcessingDelay=e.totalProcessingDelay,t.packetsDiscarded=e.packetsDiscarded,t.framesAssembledFromMultiplePackets=e.framesAssembledFromMultiplePackets,t.totalAssemblyTime=e.totalAssemblyTime,t.keyFramesDecoded=e.keyFramesDecoded,t.retransmittedBytesReceived=e.retransmittedBytesReceived,t.retransmittedPacketsReceived=e.retransmittedPacketsReceived;const n=this.lastDecodeVideoReceiverStats.get(t.ssrc),r=this.lastVideoFramesDecode.get(t.ssrc),o=this.lastVideoFramesOutput.get(t.ssrc),i=Date.now();if(t.framesDecodeCount>0&&!this.isFirstVideoDecoded[t.ssrc]){const e=t.decodedFrame?t.decodedFrame.width:0,n=t.decodedFrame?t.decodedFrame.height:0;this.onFirstVideoDecoded&&this.onFirstVideoDecoded(t.ssrc,e,n),this.isFirstVideoDecoded[t.ssrc]=!0}if(n){const r=n.stats,o=i-n.lts;t.framesDecodeFreezeTime=r.framesDecodeFreezeTime,t.framesDecodeInterval=r.framesDecodeInterval,!this.isFirstVideoDecoded[t.ssrc]&&o>this.options.firstVideoDecodedTimeout&&!this.isFirstVideoDecodedTimeout[t.ssrc]&&(this.onFirstVideoDecodedTimeout&&this.onFirstVideoDecodedTimeout(t.ssrc),this.isFirstVideoDecodedTimeout[t.ssrc]=!0),t.framesDecodeCount>r.framesDecodeCount&&this.isFirstVideoDecoded[t.ssrc]?(n.lts=Date.now(),t.framesDecodeInterval=o,t.framesDecodeInterval>=this.options.freezeRateLimit&&(this.getVideoIsReady(parseInt(e.ssrc))?t.framesDecodeFreezeTime+=t.framesDecodeInterval:this.setVideoIsReady2(parseInt(e.ssrc,10),!0))):t.framesDecodeCount<r.framesDecodeCount&&(t.framesDecodeInterval=0),e.framesDecoded&&e.qpSum&&(n.stats.framesDecodeCount>e.framesDecoded?t.qpSumPerFrame=e.qpSum/e.framesDecoded:t.qpSumPerFrame=(e.qpSum-n.qpSum)/(e.framesDecoded-n.stats.framesDecodeCount))}e.totalDecodeTime&&(t.decodeMs=1e3*e.totalDecodeTime,t.avgDecodeMs=wx(null==n?void 0:n.stats,t,"decodeMs","framesDecodeCount")),t.avgProcessingDelayMs=wx(null==n?void 0:n.stats,t,"totalProcessingDelay","framesDecodeCount",Sx.kMillisecondsFromSeconds),t.avgFramesAssembledFromMultiplePacketsMs=wx(null==n?void 0:n.stats,t,"totalAssemblyTime","framesAssembledFromMultiplePackets",Sx.kMillisecondsFromSeconds),t.avgInterFrameDelayMs=wx(null==n?void 0:n.stats,t,"totalInterFrameDelay","framesDecodeCount",Sx.kMillisecondsFromSeconds),r&&i-r.lts>=800?(t.decodeFrameRate=Math.round((t.framesDecodeCount-r.count)/((i-r.lts)/1e3)),this.lastVideoFramesDecode.set(t.ssrc,{count:t.framesDecodeCount,lts:i,rate:t.decodeFrameRate})):r?t.decodeFrameRate=r.rate:this.lastVideoFramesDecode.set(t.ssrc,{count:t.framesDecodeCount,lts:i,rate:0}),t.framesDroppedCount&&e.framesReceived&&(o&&i-o.lts>=800?(t.outputFrameRate=Math.round((e.framesReceived-t.framesDroppedCount-o.count)/((i-o.lts)/1e3)),this.lastVideoFramesOutput.set(t.ssrc,{count:e.framesReceived-t.framesDroppedCount,lts:i,rate:Math.max(t.outputFrameRate,0)})):o?t.outputFrameRate=o.rate:this.lastVideoFramesOutput.set(t.ssrc,{count:e.framesReceived-t.framesDroppedCount,lts:i,rate:0})),this.processVideoTrackReceiverStats(e,e.trackId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),e.framerateMean&&(t.framesRateFirefox=e.framerateMean),t.packets>0&&!this.isFirstVideoReceived[t.ssrc]&&(this.onFirstVideoReceived&&this.onFirstVideoReceived(t.ssrc),this.isFirstVideoReceived[t.ssrc]=!0),this.lastDecodeVideoReceiverStats.set(t.ssrc,{stats:Ix({},t),lts:n?n.lts:Date.now(),qpSum:e.qpSum})}processVideoOutboundStats(e){let t=this._stats.videoSend.find((t=>t.ssrc===e.ssrc));t||(t=lx(fx),this._stats.videoSend.push(t));const n=this.mediaBytesSent.get(e.ssrc);if(n)n.add(e.bytesSent);else{const t=new dx(10);t.add(e.bytesSent),this.mediaBytesSent.set(e.ssrc,t)}if(void 0!==e.retransmittedBytesSent){const t=this.mediaBytesRetransmit.get(e.ssrc);if(t)t.add(e.retransmittedBytesSent);else{const t=new dx(10);t.add(e.retransmittedBytesSent),this.mediaBytesRetransmit.set(e.ssrc,t)}}if(e.totalEncodedBytesTarget){const t=this.mediaBytesTargetEncode.get(e.ssrc);if(t)t.add(e.totalEncodedBytesTarget);else{const t=new dx(10);t.add(e.totalEncodedBytesTarget),this.mediaBytesTargetEncode.set(e.ssrc,t)}}if(t.ssrc=e.ssrc,t.bytes=e.bytesSent,t.packets=e.packetsSent,t.firsCount=e.firCount,t.nacksCount=e.nackCount,t.plisCount=e.pliCount,t.frameCount=e.framesEncoded,t.adaptionChangeReason=e.qualityLimitationReason,t.scalabilityMode=e.scalabilityMode,t.retransmittedBytesSent=e.retransmittedBytesSent,t.retransmittedPacketsSent=e.retransmittedPacketsSent,t.hugeFramesSent=e.hugeFramesSent,t.keyFramesEncoded=e.keyFramesEncoded,e.totalEncodeTime&&e.framesEncoded){const n=this.lastEncoderMs.get(e.ssrc);if(!n||n.lastFrameCount>e.framesEncoded)t.avgEncodeMs=1e3*e.totalEncodeTime/e.framesEncoded;else{const r=e.framesEncoded-n.lastFrameCount,o=e.totalEncodeTime-n.lastEncoderTime;t.avgEncodeMs=1e3*o/r}}if(e.framesEncoded&&e.qpSum){const n=this.lastEncoderMs.get(e.ssrc);!n||n.lastFrameCount>e.framesEncoded?t.qpSumPerFrame=e.qpSum/e.framesEncoded:t.qpSumPerFrame=(e.qpSum-n.lastQpSum)/(e.framesEncoded-n.lastFrameCount)}if(this.lastEncoderMs.set(e.ssrc,{lastFrameCount:e.framesEncoded,lastEncoderTime:e.totalEncodeTime,lastQpSum:e.qpSum,lts:Date.now()}),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),e.mediaSourceId&&this.processVideoMediaSource(e.mediaSourceId,t),this.processVideoTrackSenderStats(e,e.trackId,t),e.remoteId)this.processRemoteInboundStats(e.remoteId,t);else{const n=this.findRemoteStatsId(e.ssrc,lR.REMOTE_INBOUND);n&&this.processRemoteInboundStats(n,t)}}processAudioOutboundStats(e){let t=this._stats.audioSend.find((t=>t.ssrc===e.ssrc));if(t||(t=lx(gx),this._stats.audioSend.push(t)),t.ssrc=e.ssrc,t.packets=e.packetsSent,t.bytes=e.bytesSent,t.retransmittedBytesSent=e.retransmittedBytesSent,t.retransmittedPacketsSent=e.retransmittedPacketsSent,e.mediaSourceId&&this.processAudioMediaSource(e.mediaSourceId,t),e.codecId&&(t.codec=this.getCodecFromCodecStats(e.codecId)),this.processAudioTrackSenderStats(e,e.trackId,t),e.remoteId)this.processRemoteInboundStats(e.remoteId,t);else{const n=this.findRemoteStatsId(e.ssrc,lR.REMOTE_INBOUND);n&&this.processRemoteInboundStats(n,t)}}findRemoteStatsId(e,t){var n;const r=Array.from(XO(n=this.report).call(n)).find((n=>n.type===t&&n.ssrc===e));return r?r.id:null}processVideoMediaSource(e,t){const n=this.report.get(e);n&&n.width&&n.height&&n.framesPerSecond&&(t.inputFrame={width:n.width,height:n.height,frameRate:n.framesPerSecond})}processAudioMediaSource(e,t){const n=this.report.get(e);n&&(t.inputLevel=n.audioLevel)}processVideoTrackSenderStats(e,t,n){var r,o,i,a;const s=t?this.report.get(t):void 0,c=null!==(r=null==s?void 0:s.framesSent)&&void 0!==r?r:e.framesSent;if("number"!=typeof c)return;let l=null!==(o=null==s?void 0:s.frameWidth)&&void 0!==o?o:e.frameWidth,u=null!==(i=null==s?void 0:s.frameHeight)&&void 0!==i?i:e.frameHeight,d=null!==(a=null==s?void 0:s.framesPerSecond)&&void 0!==a?a:e.framesPerSecond;if("number"==typeof l&&"number"==typeof u||(l=0,u=0),null==d){const e=Date.now(),t=this.lastVideoFramesSent.get(n.ssrc);t&&e-t.lts>=800?(d=Math.round((c-t.count)/((e-t.lts)/1e3)),this.lastVideoFramesSent.set(n.ssrc,{count:c,lts:e,rate:d})):t?d=t.rate:this.lastVideoFramesSent.set(n.ssrc,{count:c,lts:e,rate:0})}n.sentFrame={width:l,height:u,frameRate:Math.max(0,d)}}processVideoTrackReceiverStats(e,t,n){var r,o,i,a,s;const c=t?this.report.get(t):void 0,l=null!==(r=null==c?void 0:c.framesReceived)&&void 0!==r?r:e.framesReceived,u=null!==(o=null==c?void 0:c.frameWidth)&&void 0!==o?o:e.frameWidth,d=null!==(i=null==c?void 0:c.frameHeight)&&void 0!==i?i:e.frameHeight,A=null!==(a=null==c?void 0:c.jitterBufferDelay)&&void 0!==a?a:e.jitterBufferDelay,p=null!==(s=null==c?void 0:c.jitterBufferEmittedCount)&&void 0!==s?s:e.jitterBufferEmittedCount;if("number"==typeof l){const e=this.lastVideoFramesRecv.get(n.ssrc),t=Date.now();n.framesReceivedCount=l;let r=0;e&&t-e.lts>=800?(r=Math.round((l-e.count)/((t-e.lts)/1e3)),this.lastVideoFramesRecv.set(n.ssrc,{count:l,lts:t,rate:r})):e?r=e.rate:this.lastVideoFramesRecv.set(n.ssrc,{count:l,lts:t,rate:0}),n.receivedFrame={width:u||0,height:d||0,frameRate:r||0},n.decodedFrame={width:u||0,height:d||0,frameRate:n.decodeFrameRate||0},n.outputFrame={width:u||0,height:d||0,frameRate:n.outputFrameRate||n.decodeFrameRate||0}}if(A&&p){const e=this.lastVideoJBDelay.get(n.ssrc)||{jitterBufferDelay:0,jitterBufferEmittedCount:0,jitterBufferMs:0};let t=e.jitterBufferMs;const r=p-e.jitterBufferEmittedCount;r>0&&(t=1e3*(A-e.jitterBufferDelay)/r),n.jitterBufferMs=t,n.currentDelayMs=Math.round(t),this.lastVideoJBDelay.set(n.ssrc,{jitterBufferDelay:A,jitterBufferEmittedCount:p,jitterBufferMs:n.currentDelayMs})}}processAudioTrackSenderStats(e,t,n){var r,o,i,a;const s=t?this.report.get(t):void 0,c=null!==(r=null!==(o=null==s?void 0:s.echoReturnLoss)&&void 0!==o?o:e.echoReturnLoss)&&void 0!==r?r:0,l=null!==(i=null!==(a=null==s?void 0:s.echoReturnLossEnhancement)&&void 0!==a?a:e.echoReturnLossEnhancement)&&void 0!==i?i:0;n.aecReturnLoss=c,n.aecReturnLossEnhancement=l}processAudioTrackReceiverStats(e,t,n){var r,o,i,a,s,c,l;const u=t?this.report.get(t):void 0,d=null!==(r=null==u?void 0:u.removedSamplesForAcceleration)&&void 0!==r?r:e.removedSamplesForAcceleration,A=null!==(o=null==u?void 0:u.totalSamplesReceived)&&void 0!==o?o:e.totalSamplesReceived,p=null!==(i=null==u?void 0:u.jitterBufferDelay)&&void 0!==i?i:e.jitterBufferDelay,h=null!==(a=null==u?void 0:u.jitterBufferEmittedCount)&&void 0!==a?a:e.jitterBufferEmittedCount,f=null!==(s=null==u?void 0:u.audioLevel)&&void 0!==s?s:null==e?void 0:e.audioLevel,g=null!==(c=null==u?void 0:u.totalSamplesDuration)&&void 0!==c?c:null==e?void 0:e.totalSamplesDuration,m=null!==(l=null==u?void 0:u.concealedSamples)&&void 0!==l?l:e.concealedSamples;if(d&&A&&(n.accelerateRate=d/A),p&&h){const e=this.lastAudioJBDelay.get(n.ssrc)||{jitterBufferDelay:0,jitterBufferEmittedCount:0,jitterBufferMs:0};let t=e.jitterBufferMs;const r=h-e.jitterBufferEmittedCount;r>0&&(t=1e3*(p-e.jitterBufferDelay)/r),n.jitterBufferMs=Math.round(t),this.lastAudioJBDelay.set(n.ssrc,{jitterBufferDelay:p,jitterBufferEmittedCount:h,jitterBufferMs:n.jitterBufferMs})}n.outputLevel=f;let _=1920;g&&A&&(_=A/g/50,n.receivedFrames=Math.round(A/_)),m&&(n.droppedFrames=Math.round(m/_))}processRemoteInboundStats(e,t){const n=this.report.get(e);n&&(t.packetsLost=n.packetsLost,n.roundTripTime&&(t.rttMs=1e3*n.roundTripTime),n.jitter&&(t.jitterMs=1e3*n.jitter),n.timestamp&&(t.timestamp=n.timestamp))}getCodecFromCodecStats(e){const t=this.report.get(e);if(!t)return"";const n=t.mimeType.match(/\/(.*)$/);return n&&n[1]?n[1]:""}updateSendBitrate(){let e=0,t=null,n=null;this.mediaBytesSent.forEach((t=>{e+=t.diffMean()})),this.mediaBytesRetransmit.forEach((e=>{t=null===t?e.diffMean():t+e.diffMean()})),this.mediaBytesTargetEncode.forEach((e=>{n=null===n?e.diffMean():n+e.diffMean()}));const r=null!==t?e-t:e;this._stats.bitrate={actualEncoded:8*r/(this.options.updateInterval/1e3),transmit:8*e/(this.options.updateInterval/1e3)},null!==t&&(this._stats.bitrate.retransmit=8*t/(this.options.updateInterval/1e3)),null!==n&&(this._stats.bitrate.targetEncoded=8*n/(this.options.updateInterval/1e3))}}class Ox extends vx{updateStats(){return MA.resolve()}}function Nx(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e4;const i=function(){const e=navigator.userAgent.toLocaleLowerCase().match(/chrome\/[\d]*/i);return e&&e[0]?Number(e[0].split("/")[1]):null}();return i?i<76?new Cx(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:r,firstVideoDecodedTimeout:o}):new Rx(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:r,firstVideoDecodedTimeout:o}):function(e){if(!window.RTCStatsReport)return!1;const t=e.getStats();return!(!(t instanceof MA)&&(n=t,!n||"object"!=typeof n&&"function"!=typeof n||"function"!=typeof n.then));var n}(e)?new Rx(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:r,firstVideoDecodedTimeout:o}):new Ox(e,{updateInterval:t,lossRateInterval:n,freezeRateLimit:r,firstVideoDecodedTimeout:o})}let kx=class{get localCapabilities(){return qw(this._localCapabilities)}get rtpCapabilities(){return qw(this._rtpCapabilities)}get candidates(){return qw(this._candidates)}get iceParameters(){return qw(this._iceParameters)}get dtlsParameters(){return qw(this._dtlsParameters)}constructor(e){Ov(this,"sessionDesc",void 0),Ov(this,"_localCapabilities",void 0),Ov(this,"_rtpCapabilities",void 0),Ov(this,"_candidates",void 0),Ov(this,"_iceParameters",void 0),Ov(this,"_dtlsParameters",void 0),Ov(this,"setup",void 0),Ov(this,"currentMidIndex",void 0),Ov(this,"cname","o/i14u9pJrxRKAsu"),Ov(this,"firefoxSsrcMidMap",new Map),e=qw(e);const{remoteIceParameters:t,remoteDtlsParameters:n,candidates:r,remoteRTPCapabilities:o,localCapabilities:i,direction:a,setup:s,videoCodec:c,audioCodec:l}=e;let u;this.setup=s,u=a===vR.RECEIVE_ONLY?SU.parse("v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE 0 1\na=msid-semantic: WMS\na=extmap-allow-mixed\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:0\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:1\n"):SU.parse("v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE 0 1\na=msid-semantic: WMS\na=extmap-allow-mixed\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=recvonly\na=rtcp-mux\na=rtcp-rsize\na=mid:0\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=recvonly\na=rtcp-mux\na=rtcp-rsize\na=mid:1\n"),this._rtpCapabilities=o,this._candidates=r,this._iceParameters=t,this._dtlsParameters=n,this._localCapabilities=i;const d=a===vR.RECEIVE_ONLY?this.rtpCapabilities.send:this.rtpCapabilities.recv,A=a===vR.RECEIVE_ONLY?this._localCapabilities.recv:this._localCapabilities.send,p=a===vR.RECEIVE_ONLY?o.send.videoCodecs:YU(qR.VIDEO,d,A,c),h=a===vR.RECEIVE_ONLY?o.send.audioCodecs:YU(qR.AUDIO,d,A,l);for(const f of u.mediaDescriptions)f.attributes.iceUfrag=t.iceUfrag,f.attributes.icePwd=t.icePwd,f.attributes.fingerprints=n.fingerprints,f.attributes.candidates=r,f.attributes.setup=this.setup,"application"===f.media.mediaType&&(f.attributes.sctpPort="5000"),"video"===f.media.mediaType&&(f.media.fmts=p.map((e=>e.payloadType.toString(10))),f.attributes.payloads=p,f.attributes.extmaps=d.videoExtensions),"audio"===f.media.mediaType&&(f.media.fmts=h.map((e=>e.payloadType.toString(10))),f.attributes.payloads=h,f.attributes.extmaps=d.audioExtensions,zU(f));this.sessionDesc=u,this.currentMidIndex=u.mediaDescriptions.length-1}toString(){return SU.print(this.sessionDesc)}hasMid(e){return Array.isArray(e)?e.every((e=>this.hasMid(e))):this.sessionDesc.mediaDescriptions.some((t=>t.attributes.mid===e))}send(e,t,n,r,o){n=n.replace(/ /g,"-");const{ssrcs:i,ssrcGroups:a}=xU(t,this.cname,xT("SYNC_GROUP")?n:void 0),s=this.findPreloadMediaDesc(i);if(s){if($S()&&this.firefoxSsrcMidMap.set(i[0].ssrcId,s.attributes.mid),o&&(o.twcc||o.remb)){const e=this.sessionDesc.mediaDescriptions.indexOf(s);return this.sessionDesc.mediaDescriptions[e]=this.mungSendMediaDesc(s,o),{mid:s.attributes.mid,needExchangeSDP:!0}}return{mid:s.attributes.mid,needExchangeSDP:!1}}{const t=this.findAvailableMediaIndex(e,i,r);let n;return-1===t?(n=this.createOrRecycleSendMedia(e,i,a,"sendonly",r,o),this.updateBundleMids()):(n=qw(this.sessionDesc.mediaDescriptions[t]),n.attributes.direction="sendonly",n.attributes.ssrcs=i,n.attributes.ssrcGroups=a,this.sessionDesc.mediaDescriptions[t]=this.mungSendMediaDesc(n,o)),$S()&&this.firefoxSsrcMidMap.set(i[0].ssrcId,n.attributes.mid),{needExchangeSDP:!0,mid:n.attributes.mid}}}stopSending(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>t.attributes.mid&&-1!==e.indexOf(t.attributes.mid)));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");t.forEach((e=>{e.attributes.ssrcs=[]})),this.updateBundleMids()}receive(e,t,n){const r=[];return e.forEach((e=>{const o=e._mediaStreamTrack.kind,i=this.findAvailableRecvMediaIndex(o);let a,s=!1;-1===i?(s=!0,a=this.createOrRecycleRecvMedia(e,[],"recvonly",t,n),this.updateBundleMids()):(a=qw(this.sessionDesc.mediaDescriptions[i]),a.attributes.direction="recvonly"),r.push({mid:a.attributes.mid,needCreateTransceiver:s})})),r}stopReceiving(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>-1!==e.indexOf(t.attributes.mid)));if(t.length!==e.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");t.forEach((e=>{e.media.port="0",e.attributes.direction="inactive"})),this.updateBundleMids()}addRemoteCandidate(e){const{foundation:t,protocol:n,address:r,port:o,type:i,relatedAddress:a,relatedPort:s,priority:c}=new RTCIceCandidate(e),l={foundation:null!=t?t:"",componentId:"1",transport:null!=n?n:"",priority:c?c+"":"",connectionAddress:null!=r?r:"",port:o?o+"":"",type:i?i+"":"",relAddr:null!=a?a:"",relPort:s?s+"":"",extension:{}};this.candidates.some((e=>e.priority===l.priority&&e.connectionAddress===l.connectionAddress&&e.port===l.port))||(this._candidates.push(l),this.sessionDesc.mediaDescriptions.forEach((e=>{e.attributes.candidates=this.candidates})))}clearRemoteCandidate(){this._candidates=[],this.sessionDesc.mediaDescriptions[0].attributes.candidates=this._candidates}createOrRecycleRecvMedia(e,t,n,r,o){const i=e._mediaStreamTrack.kind,a=this.rtpCapabilities.recv,s=YU(i,a,this.localCapabilities.send,i===qR.AUDIO?o:r),c=i===qR.VIDEO?a.videoExtensions:a.audioExtensions,l="".concat(++this.currentMidIndex);let u={media:{mediaType:i,port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:s.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:[],extmaps:c,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:s,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:n,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(l)}};u=this.mungRecvMediaDsec(u,e);const d=this.findFirstClosedMedia(i);if(d){const e=this.sessionDesc.mediaDescriptions.indexOf(d);this.sessionDesc.mediaDescriptions[e]=u}else this.sessionDesc.mediaDescriptions.push(u);return u}muteRemote(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>Or(e).call(e,t.attributes.mid||"")));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach((e=>{e.attributes.direction="inactive"}))}unmuteRemote(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>Or(e).call(e,t.attributes.mid||"")));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach((e=>{e.attributes.direction="recvonly"}))}findAvailableMediaIndex(e,t,n){return this.sessionDesc.mediaDescriptions.findIndex((r=>{const o=r.media.mediaType===e&&"0"!==r.media.port&&("sendonly"===r.attributes.direction||"sendrecv"===r.attributes.direction)&&0===r.attributes.ssrcs.length;if($S()){if(o){const e=this.firefoxSsrcMidMap.get(t[0].ssrcId);return!(e||"0"!==r.attributes.mid&&"1"!==r.attributes.mid)||!(!e||e!==r.attributes.mid)}return!1}return o&&r.attributes.mid===n}))}findAvailableRecvMediaIndex(e){return this.sessionDesc.mediaDescriptions.findIndex((t=>{const n=t.media.mediaType===e&&"0"!==t.media.port&&("recvonly"===t.attributes.direction||"sendrecv"===t.attributes.direction);return"0"!==t.attributes.mid&&"1"!==t.attributes.mid&&n}))}predictReceivingMids(e){const t=[];for(let n=0;n<e;n++)t.push((this.currentMidIndex+n+1).toString(10));return t}restartICE(e){e=qw(e),this._iceParameters=e,this.sessionDesc.mediaDescriptions.forEach((t=>{t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd}))}createOrRecycleSendMedia(e,t,n,r,o,i){const a=this.rtpCapabilities.send,s=e===qR.VIDEO?a.videoCodecs:a.audioCodecs,c=e===qR.VIDEO?a.videoExtensions:a.audioExtensions;$S()&&(o="".concat(++this.currentMidIndex));let l={media:{mediaType:e,port:"9",protos:["UDP","TLS","RTP","SAVPF"],fmts:s.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:[],extmaps:c,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:n,rtcpFeedbackWildcards:[],payloads:s,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:r,rtcpMux:!0,rtcpRsize:!0,mid:o}};l=this.mungSendMediaDesc(l,i);const u=this.findFirstClosedMedia(e);if(u){const e=this.sessionDesc.mediaDescriptions.indexOf(u);this.sessionDesc.mediaDescriptions[e]=l}else this.sessionDesc.mediaDescriptions.push(l);return l}mungRecvMediaDsec(e,t,n){const r=qw(e);return $U(r),FU(r,t),VU(r,t),HU(r),jU(r,n,this.localCapabilities.send),r}mungSendMediaDesc(e,t){const n=qw(e);return jU(n,t,this.localCapabilities.recv),zU(n),n}updateRecvMedia(e,t){const n=this.sessionDesc.mediaDescriptions.findIndex((t=>t.attributes.mid===e));if(-1!==n){const e=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[n],t);this.sessionDesc.mediaDescriptions[n]=e}}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter((e=>"0"!==e.media.port)).map((e=>e.attributes.mid))}findPreloadMediaDesc(e){return this.sessionDesc.mediaDescriptions.find((t=>{var n;return(null===(n=t.attributes)||void 0===n||null===(n=n.ssrcs[0])||void 0===n?void 0:n.ssrcId)===e[0].ssrcId}))}findFirstClosedMedia(e){return this.sessionDesc.mediaDescriptions.find((t=>$S()?"0"===t.media.port&&t.media.mediaType===e:"0"===t.media.port))}};const Px=["sdp"];var Dx;function Lx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lx(Object(n),!0).forEach((function(t){Ov(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lx(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let Ux=(Dx=class e extends KR{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get dtlsTransportState(){var e,t;return null!==(e=null===(t=this.peerConnection.getReceivers()[0])||void 0===t||null===(t=t.transport)||void 0===t?void 0:t.state)&&void 0!==e?e:null}get localCodecs(){return[]}set isInRestartIce(e){this._isInRestartIce=e}get isInRestartIce(){return this._isInRestartIce}constructor(t,n,r){super(t,n),Ov(this,"direction",void 0),Ov(this,"name",void 0),Ov(this,"store",void 0),Ov(this,"spec",void 0),Ov(this,"peerConnection",void 0),Ov(this,"initialOffer",void 0),Ov(this,"transport",void 0),Ov(this,"statsFilter",void 0),Ov(this,"localCandidateCount",0),Ov(this,"_isInRestartIce",!1),Ov(this,"mutex",void 0),Ov(this,"onLocalCandidate",void 0),Ov(this,"remoteSDP",void 0),Ov(this,"pendingCandidates",[]),Ov(this,"localCapabilities",void 0),Ov(this,"isReady",!1),Ov(this,"restartCnt",0),Ov(this,"curTurnServerIndex",0),this.store=n,this.spec=t,this.mutex=new _T("P2PConnection-mutex",n.clientId),this.peerConnection=new RTCPeerConnection(e.resolvePCConfiguration(t,n.p2pTransport),{optional:[{googDscp:!0}]}),this.direction=null!=r?r:vR.SEND_ONLY,this.name=this.direction===vR.SEND_ONLY?"sendP2PConnection":"recvP2PConnection",this.statsFilter=Nx(this.peerConnection,xT("STATS_UPDATE_INTERVAL"),void 0,$S()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1}async establish(e){try{const t=await GU();if(this.localCapabilities=qU(t),e){const{sdp:t}=e,n=cx(e,Px),r=function(){const e={audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},t=DU(arguments.length>2?arguments[2]:void 0,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},"sendonly"),n={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},r={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},o={audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]};if(WU(t,e,"videoExtensions",n,r,o),WU(t,e,"videoCodecs",n,r,o),WU(t,e,"audioExtensions",n,r,o),WU(t,e,"audioCodecs",n,r,o),xT("RAISE_H264_BASELINE_PRIORITY")){const e=o.videoCodecs.findIndex((e=>e.rtpMap&&"h264"===e.rtpMap.encodingName.toLocaleLowerCase()&&e.fmtp&&"42001f"===e.fmtp.parameters["profile-level-id"]));if(-1!==e){const t=o.videoCodecs.findIndex((e=>e.rtpMap&&"h264"===e.rtpMap.encodingName.toLocaleLowerCase()));if(t<e){oI.debug("raising H264 baseline profile priority");const n=o.videoCodecs[e];o.videoCodecs.splice(e,1),o.videoCodecs.splice(t,0,n)}-1!==t&&xT("FILTER_SEND_H264_BASELINE")&&(n.videoCodecs=n.videoCodecs.filter((e=>!(e.rtpMap&&"h264"===e.rtpMap.encodingName.toLocaleLowerCase()&&e.fmtp&&"42001f"!==e.fmtp.parameters["profile-level-id"]))))}}return{send:n,recv:r,sendrecv:o}}({},{},t);this.remoteSDP=new kx({remoteIceParameters:n.iceParameters,remoteDtlsParameters:n.dtlsParameters,candidates:[],remoteRTPCapabilities:r,localCapabilities:this.localCapabilities,direction:this.direction,setup:"actpass",videoCodec:this.store.codec,audioCodec:this.store.audioCodec}),await this.setRemoteDescription({type:"offer",sdp:this.remoteSDP.toString()}),this.isReady=!0;const o=await this.peerConnection.createAnswer();if(!o.sdp)throw new Error("Cannot get answer sdp when trying to establish PeerConnection.");const i=LU(o.sdp);await this.peerConnection.setLocalDescription(o);const a=await KU({},{},o.sdp);this.localCapabilities=qU(a);const s=this.peerConnection.getTransceivers()[0];return null!=s&&s.receiver&&s.receiver.transport&&this.tryBindTransportEvents(s.receiver.transport),Bx(Bx({},i),{},{sdp:o.sdp})}{this.peerConnection.addTransceiver("video",{direction:"sendonly"}),this.peerConnection.addTransceiver("audio",{direction:"sendonly"});const e=await this.peerConnection.createOffer();if(!e.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const t=LU(e.sdp);return this.initialOffer=e,Bx(Bx({},t),{},{sdp:e.sdp})}}catch(t){throw new uw(lw.GET_LOCAL_CONNECTION_PARAMS_FAILED,t.toString())}}async connect(e){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");await this.peerConnection.setLocalDescription(this.initialOffer);const{sdp:t,iceParameters:n,dtlsParameters:r}=e,o=await KU({},{},t);this.remoteSDP=new kx({remoteIceParameters:n,remoteDtlsParameters:r,candidates:[],remoteRTPCapabilities:o,localCapabilities:this.localCapabilities,direction:this.direction,setup:"active",videoCodec:this.store.codec,audioCodec:this.store.audioCodec}),await this.setRemoteDescription({type:"answer",sdp:this.remoteSDP.toString()});const i=this.peerConnection.getTransceivers()[0];null!=i&&i.sender&&i.sender.transport&&this.tryBindTransportEvents(i.sender.transport)}catch(t){throw new uw(lw.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(t.toString()))}}async addRemoteCandidate(e){try{e&&this.pendingCandidates.push(e),this.peerConnection.remoteDescription&&this.isReady&&(this.pendingCandidates.forEach((e=>{this.peerConnection.addIceCandidate(e)})),this.pendingCandidates=[])}catch(t){throw new uw(lw.ADD_CANDIDATE_FAILED,"P2PConnection.addRemoteCandidate failed; ".concat(t.toString()))}}send(e,t,n){var r=this;return BC((function*(){const o=yield UC(r.mutex.lock("From P2PConnection.send"));try{if(!r.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const o=[],a=r.remoteSDP.receive(e,t,n);e.forEach(((e,t)=>{if(a[t].needCreateTransceiver){const t=r.peerConnection.addTransceiver(e._mediaStreamTrack,{direction:"sendonly"});o.push(t),e._updateRtpTransceiver(t)}else{const n=r.peerConnection.getTransceivers().find((e=>e.mid===a[t].mid));if(!n)throw new Error("cannot find transceiver when sendPeerconnection send, mid is ".concat(a[t].mid));o.push(n),e._updateRtpTransceiver(n)}})),$S()&&!0===xT("SIMULCAST")&&(yield UC(r.applySimulcastForFirefox(o,e)));const s=a.map((e=>e.mid)),c=yield UC(r.peerConnection.createOffer()),l=r.mungSendOfferSDP(c.sdp,e,s),u=SU.parse(l),d=s.map((e=>{const t=u.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("Cannot extract ssrc from mediaDescription.");return BU(t,xT("USE_PUB_RTX"))})),A=o.map(((e,t)=>{const n=s[t];return{localSSRC:d[t],id:n}}));yield UC(r.peerConnection.setLocalDescription({type:"offer",sdp:l}));try{yield A}catch(i){const e=r.remoteSDP.toString();throw yield UC(r.peerConnection.setLocalDescription({type:"offer",sdp:l})),yield UC(r.peerConnection.setRemoteDescription({type:"answer",sdp:e})),yield UC(r.stopSending(s,!0)),i}yield UC(r.applySimulcastEncodings(o,e)),yield UC(r.applySendEncodings(o,e));const p=r.remoteSDP.toString(),h=r.logSDPExchange(l,"offer","local","send");return null==h||h(p),yield UC(r.setRemoteDescription({type:"answer",sdp:p})),o.map(((e,t)=>{const n=s[t];return{localSSRC:d[t],id:n}}))}catch(i){throw i instanceof uw?i:new uw(lw.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(i.toString()))}finally{o()}}))()}async stopSending(e,t){const n=t?void 0:await this.mutex.lock("From P2PConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const t=this.peerConnection.getTransceivers().filter((t=>-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length (".concat(t.length,") doesn't match mids' length (").concat(e.length,") when trying to call P2PConnection.stopSending."));t.map((e=>{var t;e.direction="inactive",null===(t=e.stop)||void 0===t||t.call(e)}));const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(n),this.remoteSDP.stopReceiving(e);const o=this.remoteSDP.toString();null==r||r(o),await this.setRemoteDescription({type:"answer",sdp:o})}catch(r){throw new uw(lw.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(r.toString()))}finally{n&&n()}}async receive(e,t,n,r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(e," before remoteSDP created."));const{mid:o,needExchangeSDP:i}=this.remoteSDP.send(e,t,n,r);if(i){const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","receive");await this.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer(),i=this.mungReceiveAnswerSDP(r.sdp,o,e);null==n||n(i||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:i}),oI.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(e," by exchanging SDP."))}else oI.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(e," no need to exchange SDP."));const a=this.peerConnection.getTransceivers().find((e=>e.mid===o));if(!a||null===a.mid)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:a.receiver.track,mid:a.mid,transceiver:a}}catch(o){throw new uw(lw.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(o.toString()))}}async mockReceive(e,t,n,r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(e," before remoteSDP created."));const{mid:o,needExchangeSDP:i}=this.remoteSDP.send(e,t,n,r);if(i){const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","receive");await this.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer(),i=this.mungReceiveAnswerSDP(r.sdp,o,e);null==n||n(i||""),await this.peerConnection.setLocalDescription({type:"answer",sdp:i}),oI.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(e," by exchanging SDP."))}else oI.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(e," no need to exchange SDP."))}catch(o){throw new uw(lw.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(o.toString()))}}async stopReceiving(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(e);const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","stopReceiving");await this.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer();null==n||n(r.sdp||""),await this.peerConnection.setLocalDescription(r)}catch(t){throw new uw(lw.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(t.toString()))}}async restartICE(t){try{if(this.store.p2pTransport===PT.Auto&&(this.store.p2pTransport=PT.SdRtn,UP().supportPCSetConfiguration&&this.peerConnection.setConfiguration(e.resolvePCConfiguration(this.spec,this.store.p2pTransport))),this.restartCnt>3&&(this.restartCnt=0,UP().supportPCSetConfiguration&&this.peerConnection.setConfiguration(e.resolvePCConfiguration(this.spec,this.store.p2pTransport,++this.curTurnServerIndex))),!t){this.restartCnt++,this.isReady=!1;const e=await this.peerConnection.createOffer({iceRestart:!0});if(!e.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const{iceParameters:t}=LU(e.sdp);return this.store.descriptionStart(),this.direction===vR.SEND_ONLY&&await this.peerConnection.setLocalDescription(e),t}if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");if(this.remoteSDP.restartICE(t),this.store.descriptionStart(),this.direction===vR.RECEIVE_ONLY){this.restartCnt++,await this.setRemoteDescription({type:"offer",sdp:this.remoteSDP.toString()});const e=await this.peerConnection.createAnswer();if(!e.sdp)throw new Error("Cannot get answer sdp when trying to iceRestart.");const{iceParameters:t}=LU(e.sdp);return await this.peerConnection.setLocalDescription(e),t}await this.setRemoteDescription({type:"answer",sdp:this.remoteSDP.toString()}),this.isReady=!0}catch(n){throw new uw(lw.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(n.toString()))}}close(){var e;this.peerConnection.close(),this.peerConnection.onicecandidate=null,null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.transport=void 0,this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(e){return this.statsFilter.getVideoIsReady(e)}async updateEncoderConfig(e,t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const n=await this.peerConnection.createOffer(),r=this.mungSendOfferSDP(n.sdp,[t],[e]);this.remoteSDP.updateRecvMedia(e,t);const o=this.remoteSDP.toString(),i=this.logSDPExchange(r,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:r}),null==i||i(o),await this.peerConnection.setRemoteDescription({type:"answer",sdp:o})}catch(n){throw new uw(lw.EXCHANGE_SDP_FAILED,n.toString())}}async updateSendParameters(e,t){const n=this.peerConnection.getTransceivers().filter((t=>t.mid===e));1===n.length&&(this.isVP8Simulcast(t)?$S()||await this.applySimulcastEncodings(n,[t]):await this.applySendEncodings(n,[t]))}setStatsRemoteVideoIsReady(e,t){this.statsFilter.setVideoIsReady2(e,t)}async replaceTrack(e,t){const n=this.peerConnection.getTransceivers().find((e=>e.mid===t));n&&await n.sender.replaceTrack(e._mediaStreamTrack)}async getSelectedCandidatePair(){const e=this.peerConnection.getReceivers();if(e.length>0&&e[0].transport&&e[0].transport.iceTransport&&e[0].transport.iceTransport.getSelectedCandidatePair&&e[0].transport.iceTransport.getSelectedCandidatePair()){const t=e[0].transport.iceTransport,{local:n,remote:r}=t.getSelectedCandidatePair();return{local:Bx(Bx({},Ax),{},{candidateType:n.type,protocol:n.protocol,address:n.address,port:n.port}),remote:Bx(Bx({},Ax),{},{candidateType:r.type,protocol:r.protocol,address:r.address,port:r.port})}}return this.statsFilter.getSelectedCandidatePair()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var e,t;Or(e=["connected","completed"]).call(e,this.peerConnection.iceConnectionState)&&(this.isReady=!1),null===(t=this.onICEConnectionStateChange)||void 0===t||t.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var e;"connected"===this.peerConnection.connectionState&&(this.restartCnt=0),null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.connectionState)},this.startICECandidate()}startICECandidate(){this.peerConnection.onicecandidate||(this.localCandidateCount=0,this.peerConnection.onicecandidate=e=>{var t;e.candidate?(e.candidate.candidate&&(null===(t=this.onLocalCandidate)||void 0===t||t.call(this,e.candidate.toJSON())),this.localCandidateCount+=1):oI.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount)})}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const o={iceServers:[]};var i;return t.iceServers?o.iceServers=t.iceServers:t.turnServer&&"off"!==t.turnServer.mode&&(Dw(t.turnServer.servers)?o.iceServers=t.turnServer.servers:(o.iceServers&&o.iceServers.push(...e.turnServerConfigToIceServers(t.turnServer.servers,n,r)),xT("USE_TURN_SERVER_OF_GATEWAY")&&o.iceServers&&t.turnServer.serversFromGateway&&o.iceServers.push(...e.turnServerConfigToIceServers(t.turnServer.serversFromGateway,n,r)),Or(i=[PT.Relay,PT.SdRtn]).call(i,n)&&(o.iceTransportPolicy="relay"),xT("FORCE_TURN_TCP")?o.iceTransportPolicy="relay":t.turnServer.servers.concat(t.turnServer.serversFromGateway||[]).forEach((e=>{e.forceturn&&(o.iceTransportPolicy="relay")})))),xT("ENABLE_ENCODED_TRANSFORM")&&UP().supportWebRTCEncodedTransform&&(o.encodedInsertableStreams=!0),oI.debug("P2PConnection p2pTransport is ".concat(n)),o}static turnServerConfigToIceServers(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=[],o=e.filter((e=>e.tcpport));oI.debug("P2PConnection turnServers is ".concat(o,", current index is ").concat(n));const i=o.length>n?o[n]:o[0];switch(t){case PT.SdRtn:const t=e.filter((e=>{var t;return Or(t=e.username).call(t,"glb:")&&e.turnServerURL==e.turnServerURL})),o=t.length>n?t[n]:t[0];o&&(r.push({username:o.username,credential:o.password,credentialType:"password",urls:"turn:".concat(LO(o.turnServerURL),":").concat(o.tcpport,"?transport=udp")}),r.push({username:o.username,credential:o.password,credentialType:"password",urls:"turns:".concat(LO(o.turnServerURL),":").concat(o.tcpport,"?transport=tcp")}));break;case PT.Relay:i&&(r.push({username:i.username,credential:i.password,credentialType:"password",urls:"turn:".concat(i.turnServerURL,":").concat(i.tcpport,"?transport=udp")}),r.push({username:i.username,credential:i.password,credentialType:"password",urls:"turns:".concat(LO(i.turnServerURL),":").concat(i.tcpport,"?transport=tcp")}));break;default:i&&(r.push({username:i.username,credential:i.password,credentialType:"password",urls:"turn:".concat(i.turnServerURL,":").concat(i.tcpport,"?transport=udp")}),r.push({username:i.username,credential:i.password,credentialType:"password",urls:"turns:".concat(LO(i.turnServerURL),":").concat(i.tcpport,"?transport=tcp")}),r.push({username:i.username,credential:i.password,credentialType:"password",urls:"stun:".concat(i.turnServerURL,":").concat(i.tcpport)}))}return r}tryBindTransportEvents(e){if(e){this.transport=e,e.onstatechange=()=>{var t;null!=e&&e.state&&(null===(t=this.onDTLSTransportStateChange)||void 0===t||t.call(this,e.state))},e.onerror=e=>{var t;null===(t=this.onDTLSTransportError)||void 0===t||t.call(this,"error"in e?e.error:e)};const t=e.iceTransport;t&&(t.onstatechange=()=>{const t=null==e?void 0:e.iceTransport.state;var n;t&&(null===(n=this.onICETransportStateChange)||void 0===n||n.call(this,t))},t.getSelectedCandidatePair&&(t.onselectedcandidatepairchange=()=>{if(t.getSelectedCandidatePair()){const{local:e,remote:n}=t.getSelectedCandidatePair();oI.info("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] selectedcandidatepairchange: local ").concat(JSON.stringify({candidateType:e.type,protocol:e.protocol}),", remote ").concat(JSON.stringify({candidateType:n.type,protocol:n.protocol,address:n.address,port:n.port})," )"))}}))}}tryUnbindTransportEvents(){this.transport&&(this.transport.onstatechange=null,this.transport.onerror=null,this.transport.iceTransport&&(this.transport.iceTransport.onstatechange=null))}async updateRtpSenderEncodings(e,t){var n;if(t||(t=this.peerConnection.getSenders().find((t=>t.track===e._mediaStreamTrack))),!t)return oI.warn("[".concat(e.getTrackId(),"] no rtpSender found}"));if(this.isVP8Simulcast(e))return oI.warn("[updateRtpSenderEncodings] Track is VP8 simulcast, please apply simulcast encodings");if(!UP().supportSetRtpSenderParameters)return oI.warn("[updateRtpSenderEncodings] Browser not support set rtp-sender parameters");const r={},o={};switch(e._optimizationMode){case"motion":r.degradationPreference="maintain-framerate";break;case"detail":r.degradationPreference="maintain-resolution";break;default:r.degradationPreference="balanced"}if(e._encoderConfig){var i;const{bitrateMax:t,frameRate:n,scaleResolutionDownBy:r}=e._encoderConfig;t&&(o.maxBitrate=1e3*t),Or(i=e._hints).call(i,tD.LOW_STREAM)&&(n&&(o.maxFramerate=UO(n)),r&&r>=1&&(o.scaleResolutionDownBy=r))}if(xT("DSCP_TYPE")&&rw()){var a;const e=xT("DSCP_TYPE");Or(a=["very-low","low","medium","high"]).call(a,e)&&(o.networkPriority=e)}const s=t.getParameters(),c=null===(n=s.encodings)||void 0===n?void 0:n[0];$S()&&!c&&(r.encodings=[o]),c&&Object.assign(c,o),Object.assign(s,r),oI.debug("[".concat(e.getTrackId(),"] updateRtpSenderEncodings: ").concat(JSON.stringify(s.encodings))),await t.setParameters(s)}async applySendEncodings(e,t){try{if(!UP().supportSetRtpSenderParameters)return;if(e.length!==t.length)return;for(let n=0;n<e.length;n++){const r=e[n],o=t[n];o instanceof KB&&!this.isVP8Simulcast(o)&&await this.updateRtpSenderEncodings(o,r.sender)}}catch(n){oI.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(e,t,n){const r=SU.parse(e);return t.forEach(((e,t)=>{const o=n[t],i=r.mediaDescriptions.find((e=>e.attributes.mid===o));i&&(FU(i,e),QU(i,e,this.store.codec))})),SU.print(r)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=e=>{var t;null===(t=this.onFirstAudioReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoReceived=e=>{var t;null===(t=this.onFirstVideoReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstAudioDecoded=e=>{var t;null===(t=this.onFirstAudioDecoded)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoDecoded=(e,t,n)=>{var r;null===(r=this.onFirstVideoDecoded)||void 0===r||r.call(this,e,t,n)},this.statsFilter.onSelectedLocalCandidateChanged=(e,t)=>{var n;null===(n=this.onSelectedLocalCandidateChanged)||void 0===n||n.call(this,e,t)},this.statsFilter.onSelectedRemoteCandidateChanged=(e,t)=>{var n;null===(n=this.onSelectedRemoteCandidateChanged)||void 0===n||n.call(this,e,t)},this.statsFilter.onFirstVideoDecodedTimeout=e=>{var t;null===(t=this.onFirstVideoDecodedTimeout)||void 0===t||t.call(this,e)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(e,t){if(e.length===t.length)for(let s=0;s<e.length;s++){var n,r,o,i,a;const c=e[s],l=t[s];if(l instanceof KB&&!Or(n=l._hints).call(n,tD.LOW_STREAM)&&null!==(r=l._encoderConfig)&&void 0!==r&&r.bitrateMax&&(null===(o=l._encoderConfig)||void 0===o?void 0:o.bitrateMax)>200&&null!==(i=l._scalabilityMode)&&void 0!==i&&i.numSpatialLayers&&(null===(a=l._scalabilityMode)||void 0===a?void 0:a.numSpatialLayers)>1&&"vp8"===this.store.codec){const e={},t={high:1e3*(l._encoderConfig.bitrateMax-50),medium:5e4};e.encodings=[{rid:"m",active:!0,maxBitrate:t.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:t.high}];const n=c.sender.getParameters();await c.sender.setParameters(Object.assign(n,e))}}}async applySimulcastEncodings(e,t){if(!$S()&&e.length===t.length)for(let n=0;n<e.length;n++){const r=t[n];if(r instanceof KB&&this.isVP8Simulcast(r)){const t=e[n],o={},i={high:1e3*(r._encoderConfig.bitrateMax-50),medium:5e4};o.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:i.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:i.medium,scaleResolutionDownBy:4}];const a=t.sender.getParameters();await t.sender.setParameters(Object.assign(a,o))}}}isVP8Simulcast(e){var t,n,r,o,i;return!!(e instanceof KB&&xT("SIMULCAST")&&"vp8"===this.store.codec&&!Or(t=e._hints).call(t,tD.LOW_STREAM)&&null!==(n=e._encoderConfig)&&void 0!==n&&n.bitrateMax&&(null===(r=e._encoderConfig)||void 0===r?void 0:r.bitrateMax)>200&&null!==(o=e._scalabilityMode)&&void 0!==o&&o.numSpatialLayers&&(null===(i=e._scalabilityMode)||void 0===i?void 0:i.numSpatialLayers)>1)}logSDPExchange(e,t,n,r){if(xT("SDP_LOGGING"))return oI.upload("[".concat(this.store.clientId,"] exchanging ").concat(n," ").concat(t," SDP during P2PConnection.").concat(r,"\n"),e),"offer"===t?e=>{this.logSDPExchange(e,"answer","local"===n?"remote":"local",r)}:void 0}async muteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const t=this.peerConnection.getTransceivers().filter((t=>t.mid&&-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length.");t.map((e=>{e.direction="inactive"}));const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(n),this.remoteSDP.muteRemote(e);const o=this.remoteSDP.toString();null==r||r(o),await this.setRemoteDescription({type:"answer",sdp:o})}catch(t){throw new uw(lw.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(t.toString()))}}async unmuteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const t=this.peerConnection.getTransceivers().filter((t=>t.mid&&-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length.");t.map((async e=>{e.direction="sendonly"}));const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(n),this.remoteSDP.unmuteRemote(e);const o=this.remoteSDP.toString();null==r||r(o),await this.setRemoteDescription({type:"answer",sdp:o})}catch(t){throw new uw(lw.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(t.toString()))}}async getRemoteSSRC(e,t){var n,r;if(t=null!==(n=t)&&void 0!==n?n:null===(r=this.currentRemoteDescription)||void 0===r?void 0:r.sdp){var o;const n=null===(o=SU.parse(t).mediaDescriptions.find((t=>t.attributes.mid===e)))||void 0===o?void 0:o.attributes.ssrcs;return null==n?void 0:n[0].ssrcId}}async setRemoteDescription(e){var t;await this.peerConnection.setRemoteDescription(e),Or(t=["connected","completed"]).call(t,this.peerConnection.iceConnectionState)||(this.isReady=!0,this.addRemoteCandidate())}mungReceiveAnswerSDP(e,t,n){const r=SU.parse(e),o=r.mediaDescriptions.find((e=>e.attributes.mid===t));return o&&n===qR.AUDIO&&"audio"===o.media.mediaType&&zU(o),SU.print(r)}},sR(Dx.prototype,"establish",[Mx],Object.getOwnPropertyDescriptor(Dx.prototype,"establish"),Dx.prototype),sR(Dx.prototype,"connect",[Mx],Object.getOwnPropertyDescriptor(Dx.prototype,"connect"),Dx.prototype),sR(Dx.prototype,"receive",[Mx],Object.getOwnPropertyDescriptor(Dx.prototype,"receive"),Dx.prototype),sR(Dx.prototype,"mockReceive",[Mx],Object.getOwnPropertyDescriptor(Dx.prototype,"mockReceive"),Dx.prototype),sR(Dx.prototype,"stopReceiving",[Mx],Object.getOwnPropertyDescriptor(Dx.prototype,"stopReceiving"),Dx.prototype),sR(Dx.prototype,"restartICE",[Mx],Object.getOwnPropertyDescriptor(Dx.prototype,"restartICE"),Dx.prototype),sR(Dx.prototype,"close",[Mx],Object.getOwnPropertyDescriptor(Dx.prototype,"close"),Dx.prototype),sR(Dx.prototype,"updateEncoderConfig",[Mx],Object.getOwnPropertyDescriptor(Dx.prototype,"updateEncoderConfig"),Dx.prototype),sR(Dx.prototype,"updateSendParameters",[Mx],Object.getOwnPropertyDescriptor(Dx.prototype,"updateSendParameters"),Dx.prototype),sR(Dx.prototype,"replaceTrack",[Mx],Object.getOwnPropertyDescriptor(Dx.prototype,"replaceTrack"),Dx.prototype),sR(Dx.prototype,"muteLocal",[Mx],Object.getOwnPropertyDescriptor(Dx.prototype,"muteLocal"),Dx.prototype),sR(Dx.prototype,"unmuteLocal",[Mx],Object.getOwnPropertyDescriptor(Dx.prototype,"unmuteLocal"),Dx.prototype),Dx);function Mx(e,t,n){const r=e[t];if("function"!=typeof r)throw new Error("Cannot use mutex on object property.");return n.value=async function(){const e=this.mutex,n=await e.lock("From P2PConnection.".concat(t));try{for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return await r.apply(this,i)}finally{n()}},n}function xx(e,t){let n=document.createElement("video"),r=document.createElement("canvas");n.setAttribute("style","display:none"),r.setAttribute("style","display:none"),n.setAttribute("muted",""),n.muted=!0,n.setAttribute("autoplay",""),n.autoplay=!0,n.setAttribute("playsinline",""),r.width=UO(t.width),r.height=UO(t.height);const o=UO(t.framerate||15);document.body.append(n),document.body.append(r);let i=e._mediaStreamTrack;n.srcObject=new MediaStream([i]),n.play();const a=r.getContext("2d");if(!a)throw new pI(lw.UNEXPECTED_ERROR,"can not get canvas context");const s=UP(),c=r.captureStream(s.supportRequestFrame?0:o).getVideoTracks()[0];c.canvas||(c.canvas=r),r.startCapture=()=>{if(!n)return r.stopCapture&&r.stopCapture();if(n.paused&&n.play(),n.videoHeight>2&&n.videoWidth>2){const e=n.videoWidth,t=n.videoHeight/e,o=r.width*t;Math.abs(o-r.height)>=2&&(oI.debug("adjust low stream resolution","".concat(r.width,"x").concat(r.height," -> ").concat(r.width,"x").concat(o)),r.height=o)}a.drawImage(n,0,0,r.width,r.height),c.requestFrame&&c.requestFrame(),i!==e._mediaStreamTrack&&(i=e._mediaStreamTrack,n.srcObject=new MediaStream([i]))},r.stopCapture=BD((()=>r.startCapture&&r.startCapture()),o);const l=c.stop;return c.stop=()=>{l.call(c),n&&(n.remove(),n.srcObject=null,n=null),r&&(r.width=0,r.remove(),r.stopCapture&&r.stopCapture(),r.startCapture=void 0,r.stopCapture=void 0,r=null),oI.debug("clean low stream renderer")},c}var Fx=function(e){return e[e.HEIGHT=2033]="HEIGHT",e[e.FRAME_RATE=2034]="FRAME_RATE",e[e.WIDTH=2035]="WIDTH",e}(Fx||{}),$x=function(e){return e[e.FRAME_RATE=2002]="FRAME_RATE",e[e.WIDTH=2003]="WIDTH",e[e.HEIGHT=2004]="HEIGHT",e[e.PACKAGE_LOST=2005]="PACKAGE_LOST",e[e.AVG_ENCODE=2007]="AVG_ENCODE",e[e.NACKS=2009]="NACKS",e[e.PLIS=2010]="PLIS",e[e.FIRS=2011]="FIRS",e[e.BITRATE=2012]="BITRATE",e[e.PACKAGE_RATE=2031]="PACKAGE_RATE",e[e.ADAPTATION=2032]="ADAPTATION",e[e.ACTUAL_ENCODED=2060]="ACTUAL_ENCODED",e[e.BANDWIDTH=2061]="BANDWIDTH",e[e.RETRANSMIT=2062]="RETRANSMIT",e[e.TARGET_ENCODED=2064]="TARGET_ENCODED",e[e.TRANSMIT=2066]="TRANSMIT",e[e.FREEZE=2082]="FREEZE",e[e.DISABLED=2095]="DISABLED",e[e.PLAYER_STATUS=2128]="PLAYER_STATUS",e[e.QP_SUM=2143]="QP_SUM",e[e.BYTES_RETRANSMIT=2173]="BYTES_RETRANSMIT",e[e.PACKAGES_RETRANSMIT=2172]="PACKAGES_RETRANSMIT",e[e.HUGE_FRAME_SENT=2174]="HUGE_FRAME_SENT",e[e.KEY_FRAMES_ENCODED=2207]="KEY_FRAMES_ENCODED",e}($x||{}),Vx=function(e){return e[e.BITRATE=2069]="BITRATE",e[e.PACKAGE_LOST=2070]="PACKAGE_LOST",e[e.PACKAGE_RATE=2071]="PACKAGE_RATE",e[e.HEIGHT=2073]="HEIGHT",e[e.FRAME_RATE=2075]="FRAME_RATE",e[e.WIDTH=2077]="WIDTH",e}(Vx||{}),Hx=function(e){return e[e.JITTER=-1]="JITTER",e[e.PACKAGE_LOST=2014]="PACKAGE_LOST",e[e.WIDTH=2018]="WIDTH",e[e.HEIGHT=2019]="HEIGHT",e[e.FRAME_RATE=2020]="FRAME_RATE",e[e.JITTER_BUFFER=2023]="JITTER_BUFFER",e[e.CURRENT_DELAY=2024]="CURRENT_DELAY",e[e.NACKS=2026]="NACKS",e[e.PLIS=2027]="PLIS",e[e.FIRS=2028]="FIRS",e[e.BITRATE=2029]="BITRATE",e[e.PACKAGE_RATE=2078]="PACKAGE_RATE",e[e.FREEZE=2084]="FREEZE",e[e.DISABLED=2101]="DISABLED",e[e.PLAYER_STATUS=2129]="PLAYER_STATUS",e[e.QP_SUM=2144]="QP_SUM",e[e.I_FRAME_DELAY=2149]="I_FRAME_DELAY",e[e.FRAMES_DROPPED=2181]="FRAMES_DROPPED",e[e.BYTES_RETRANSMIT=2175]="BYTES_RETRANSMIT",e[e.PACKAGES_RETRANSMIT=2176]="PACKAGES_RETRANSMIT",e[e.PACKAGES_DISCARDED=2198]="PACKAGES_DISCARDED",e[e.AVG_DECODE=2200]="AVG_DECODE",e[e.AVG_PROCESSING_DELAY=2202]="AVG_PROCESSING_DELAY",e[e.AVG_ASSEMBLY_TIME=2203]="AVG_ASSEMBLY_TIME",e[e.AVG_INTER_FRAME_DELAY=2204]="AVG_INTER_FRAME_DELAY",e[e.KEY_FRAMES_DECODED=2206]="KEY_FRAMES_DECODED",e}(Hx||{}),jx=function(e){return e[e.FRAME_RATE_DECODE=2021]="FRAME_RATE_DECODE",e[e.FRAME_RATE_RENDER=2022]="FRAME_RATE_RENDER",e[e.FRAME_RATE_OUTPUT=2155]="FRAME_RATE_OUTPUT",e[e.FREEZE_TIME=2109]="FREEZE_TIME",e[e.FREEZE_TIME_RENDER=2147]="FREEZE_TIME_RENDER",e[e.FREEZE_DURATION=2156]="FREEZE_DURATION",e}(jx||{}),Qx=function(e){return e[e.PCM_LEVEL=2104]="PCM_LEVEL",e}(Qx||{}),Gx=function(e){return e[e.PACKAGE_LOST=-1]="PACKAGE_LOST",e[e.LEVEL=2038]="LEVEL",e[e.BITRATE=2039]="BITRATE",e[e.PACKAGE_RATE=2040]="PACKAGE_RATE",e[e.AEC_RETURN_LOSS=2041]="AEC_RETURN_LOSS",e[e.AEC_RETURN_LOSS_ENH=2042]="AEC_RETURN_LOSS_ENH",e[e.FREEZE=2081]="FREEZE",e[e.DISABLED=2096]="DISABLED",e[e.BYTES_RETRANSMIT=2179]="BYTES_RETRANSMIT",e[e.PACKAGES_RETRANSMIT=2180]="PACKAGES_RETRANSMIT",e}(Gx||{}),Kx=function(e){return e[e.BITRATE=2044]="BITRATE",e[e.PACKAGE_LOST=2045]="PACKAGE_LOST",e[e.PACKAGE_RATE=2046]="PACKAGE_RATE",e[e.CURRENT_DELAY=2047]="CURRENT_DELAY",e[e.JITTER_BUFFER=2054]="JITTER_BUFFER",e[e.JITTER=2055]="JITTER",e[e.FREEZE=2083]="FREEZE",e[e.DISABLED=2102]="DISABLED",e[e.PCM_LEVEL=2105]="PCM_LEVEL",e[e.PLAYER_STATUS=2130]="PLAYER_STATUS",e[e.CONCEALED_SAMPLES=2148]="CONCEALED_SAMPLES",e[e.BYTES_RETRANSMIT=2178]="BYTES_RETRANSMIT",e[e.PACKAGES_RETRANSMIT=2177]="PACKAGES_RETRANSMIT",e[e.PACKAGES_DISCARDED=2199]="PACKAGES_DISCARDED",e[e.AVG_PROCESSING_DELAY=2201]="AVG_PROCESSING_DELAY",e}(Kx||{}),Wx=function(e){return e[e.FREEZE_TIME=-1]="FREEZE_TIME",e[e.LEVEL=2043]="LEVEL",e}(Wx||{}),qx=function(e){return e[e.RTT=2006]="RTT",e[e.CONN_TYPE=801]="CONN_TYPE",e[e.STATS_UPDATE_INTERVAL=2205]="STATS_UPDATE_INTERVAL",e}(qx||{});const zx=1e3,Yx=3;function Jx(e,t,n){null!=n&&Number.isFinite(n)&&(e[t]=Math.round(Math.max(0,n)))}function Xx(e){const t={[qx.CONN_TYPE]:0,[qx.RTT]:e.rtt,[qx.STATS_UPDATE_INTERVAL]:e.updateInterval?Math.round(Math.max(0,e.updateInterval)):void 0};switch(e.selectedCandidatePair.localCandidate.candidateType){case"relay":{const n=e.selectedCandidatePair.localCandidate.relayProtocol;"udp"===n&&(t[qx.CONN_TYPE]=1),"tcp"===n&&(t[qx.CONN_TYPE]=3),"tls"===n&&(t[qx.CONN_TYPE]=4);break}case"srflx":t[qx.CONN_TYPE]=2}return t}function Zx(e){let t=0;switch(e){case"none":t=0;break;case"cpu":t=1;break;case"bandwidth":t=2;break;case"other":t=3}return t}class eF extends ww{constructor(e){super(),Ov(this,"store",void 0),Ov(this,"uploadWRTCStatsTimer",void 0),Ov(this,"uploadOutboundDenoiserStatsTimer",void 0),Ov(this,"uploadExtStatsTimer",void 0),Ov(this,"uploadExtUsageStatsTimer",void 0),Ov(this,"uploadInboundExtStatsTimer",void 0),Ov(this,"requestStats",void 0),Ov(this,"requestTransportStats",void 0),Ov(this,"requestLocalMedia",void 0),Ov(this,"requestRemoteMedia",void 0),Ov(this,"requestAllTracks",void 0),Ov(this,"requestVideoIsReady",void 0),Ov(this,"requestUploadStats",void 0),Ov(this,"requestUpload",void 0),Ov(this,"uploadOutboundStarted",!1),Ov(this,"uploadInboundStarted",!1),Ov(this,"uploadTransportStarted",!1),Ov(this,"uploadExtensionUsageStarted",!1),Ov(this,"lastRecvStats",void 0),Ov(this,"lastSendStats",void 0),Ov(this,"lastFullRecvStats",void 0),Ov(this,"lastFullSendStats",void 0),Ov(this,"needUploadRenderFreezeTime",!0),this.store=e}uploadWRTCStats(e){if(!this.requestStats||!this.requestUploadStats)return;let t,n;if(this.uploadTransportStarted&&(t=this.requestStats(),this.store.useP2P&&(n=this.requestStats(!0))),!t&&this.uploadOutboundStarted&&(t=this.requestStats()),!n&&this.uploadInboundStarted&&(n=this.requestStats(!0)),t||n){const r={};if(this.uploadTransportStarted&&t){const o=this.getTransportStats(t,n,e);o&&(r.misc=[o])}if(this.uploadOutboundStarted&&t){const n=this.getOutboundStats(t,e?this.lastSendStats:this.lastFullSendStats,e);n&&(r.outbound=[n])}if(this.uploadInboundStarted&&n){const t=this.getInboundStats(n,e?this.lastRecvStats:this.lastFullRecvStats,e);t&&(r.inbound=t)}this.requestUploadStats(r)}this.lastRecvStats=n,this.lastSendStats=t,e||(this.lastFullRecvStats=n,this.lastFullSendStats=t)}startUploadWRTCStats(){if(this.uploadWRTCStatsTimer)return;let e=1;this.uploadWRTCStatsTimer=window.setInterval((()=>{if(!this.uploadTransportStarted&&!this.uploadInboundStarted&&!this.uploadOutboundStarted)return this.stopUploadWRTCStats();this.uploadWRTCStats(e!==Yx),++e===Yx+1&&(e=1)}),zx)}stopUploadWRTCStats(){window.clearInterval(this.uploadWRTCStatsTimer),this.uploadWRTCStatsTimer=void 0,this.lastSendStats&&(this.lastSendStats.videoSend=[],this.lastSendStats.audioSend=[],this.lastSendStats=void 0),this.lastRecvStats&&(this.lastRecvStats.videoRecv=[],this.lastRecvStats.audioRecv=[],this.lastRecvStats=void 0)}getTransportStats(e,t,n){if(!this.requestStats)return;if(n)return null==e.rtt?void 0:{addition:{[qx.RTT]:e.rtt,[qx.CONN_TYPE]:void 0,[qx.STATS_UPDATE_INTERVAL]:e.updateInterval||void 0}};const r=Xx(e);if(this.store.useP2P){if(t){const e=Xx(t);r[qx.CONN_TYPE]+=e[qx.CONN_TYPE]<<3}r[qx.CONN_TYPE]+=110}else r[qx.CONN_TYPE]+=100;return{addition:r}}getOutboundStats(e,t,n){if(!this.requestUploadStats||!this.requestLocalMedia)return;const r=this.requestLocalMedia();if(!r||0===r.length)return;let o,i,a;return r.forEach((r=>{let[s,{track:c,ssrcs:l}]=r;switch(s){case JR.LocalVideoLowTrack:case JR.LocalVideoTrack:if(s===JR.LocalVideoTrack){const r=function(e,t,n,r,o){const i=t.videoSend.find((t=>t.ssrc===e));if(!i)return;const a={},{sentFrame:s,inputFrame:c}=i;if(c&&s){const e=c.frameRate,t=s.frameRate;a[$x.FREEZE]=function(e,t){let n=!0;return n=!(e<=5)&&(e<=10?t<3:e<=20?t<4:t<5),n}(e,t)?1:0}if(Jx(a,$x.QP_SUM,i.qpSumPerFrame),o)return a;switch(s&&(Jx(a,$x.HEIGHT,s.height),Jx(a,$x.WIDTH,s.width),Jx(a,$x.FRAME_RATE,s.frameRate)),a[$x.DISABLED]=r._originMediaStreamTrack&&!r._originMediaStreamTrack.enabled||r._mediaStreamTrack&&!r._mediaStreamTrack.enabled?1:0,i.adaptionChangeReason){case"none":a[$x.ADAPTATION]=0;break;case"cpu":a[$x.ADAPTATION]=1;break;case"bandwidth":a[$x.ADAPTATION]=2;break;case"other":a[$x.ADAPTATION]=3}let l=0;i.adaptionChangeReason&&(l+=Zx(i.adaptionChangeReason)),t.qualityLimitationReason&&(l+=Zx(t.qualityLimitationReason)<<3),a[$x.ADAPTATION]=l,a[$x.PLAYER_STATUS]=yD[r._player?r._player.videoElementStatus:"uninit"],Jx(a,$x.NACKS,i.nacksCount),Jx(a,$x.PLIS,i.plisCount),Jx(a,$x.FIRS,i.firsCount),Jx(a,$x.AVG_ENCODE,i.avgEncodeMs),Jx(a,$x.HUGE_FRAME_SENT,i.hugeFramesSent),Jx(a,$x.BYTES_RETRANSMIT,i.retransmittedBytesSent),Jx(a,$x.PACKAGES_RETRANSMIT,i.retransmittedPacketsSent),Jx(a,$x.KEY_FRAMES_ENCODED,i.keyFramesEncoded);const u=n&&n.videoSend.find((t=>t.ssrc===e));if(u){let e=o?zx:zx*Yx;u.timestamp&&i.timestamp&&(e=i.timestamp-u.timestamp),null!=u.packets&&null!=i.packets&&Jx(a,$x.PACKAGE_RATE,1e3*(i.packets-u.packets)/e),null!=i.packetsLost&&null!=u.packetsLost&&Jx(a,$x.PACKAGE_LOST,i.packetsLost-u.packetsLost),null!=u.bytes&&null!=i.bytes&&Jx(a,$x.BITRATE,8*(i.bytes-u.bytes)/e)}return a}(l[0].ssrcId,e,t,c,n),o=n?null:function(e,t,n){const r=t.videoSend.find((t=>t.ssrc===e));if(!r)return null;const o={},i=r.inputFrame,a=i&&i.height||n&&n.videoHeight||0,s=i&&i.width||n&&n.videoWidth||0,c=i&&i.frameRate||0;return Jx(o,Fx.HEIGHT,a),Jx(o,Fx.WIDTH,s),Jx(o,Fx.FRAME_RATE,c),o}(l[0].ssrcId,e,c),a=n?null:function(e){const t={};return Jx(t,$x.RETRANSMIT,e.bitrate.retransmit),Jx(t,$x.TARGET_ENCODED,e.bitrate.targetEncoded),Jx(t,$x.ACTUAL_ENCODED,e.bitrate.actualEncoded),Jx(t,$x.TRANSMIT,e.bitrate.transmit),Jx(t,$x.BANDWIDTH,e.sendBandwidth),t}(e);i=Object.assign({},r,o,a)}else a=n?void 0:function(e,t,n){const r=t.videoSend.find((t=>t.ssrc===e));if(!r)return;const o={},i=r.sentFrame;if(i&&(Jx(o,Vx.HEIGHT,i.height),Jx(o,Vx.WIDTH,i.width),Jx(o,Vx.FRAME_RATE,i.frameRate)),n){const t=n.videoSend.find((t=>t.ssrc===e));if(t){let e=zx*Yx;t.timestamp&&r.timestamp&&(e=r.timestamp-t.timestamp),null!=t.packets&&null!=r.packets&&Jx(o,Vx.PACKAGE_RATE,1e3*(r.packets-t.packets)/e),null!=r.packetsLost&&null!=t.packetsLost&&Jx(o,Vx.PACKAGE_LOST,r.packetsLost-t.packetsLost),null!=t.bytes&&null!=r.bytes&&Jx(o,Vx.BITRATE,8*(r.bytes-t.bytes)/e)}}return o}(l[0].ssrcId,e,t);break;case JR.LocalAudioTrack:o=n?void 0:function(e,t,n,r){const o=t.audioSend.find((t=>t.ssrc===e));if(!o)return;const i={};i[Gx.DISABLED]=r._originMediaStreamTrack&&!r._originMediaStreamTrack.enabled||r._mediaStreamTrack&&!r._mediaStreamTrack.enabled?1:0;const a=100*r._source.getAccurateVolumeLevel(),s=o.inputLevel;if(null!=s){const e=Math.ceil(50*Math.log10(100*s+1));Jx(i,Gx.LEVEL,e)}else Jx(i,Gx.LEVEL,a);Jx(i,Qx.PCM_LEVEL,a),Jx(i,Gx.AEC_RETURN_LOSS,o.aecReturnLoss),Jx(i,Gx.AEC_RETURN_LOSS_ENH,o.aecReturnLossEnhancement),Jx(i,Gx.BYTES_RETRANSMIT,o.retransmittedBytesSent),Jx(i,Gx.PACKAGES_RETRANSMIT,o.retransmittedPacketsSent),i[Gx.FREEZE]=0;const c=n&&n.audioSend.find((t=>t.ssrc===e));if(c){let e=zx*Yx;c.timestamp&&o.timestamp&&(e=o.timestamp-c.timestamp),null!=c.bytes&&null!=o.bytes&&Jx(i,Gx.BITRATE,8*(o.bytes-c.bytes)/e),null!=c.packets&&null!=o.packets&&Jx(i,Gx.PACKAGE_RATE,1e3*(o.packets-c.packets)/e)}return i}(l[0].ssrcId,e,t,c)}})),{high:i,low:a,audio:o}}getInboundStats(e,t,n){if(!this.requestRemoteMedia)return;const r=this.requestRemoteMedia()||[],o=[];return r.forEach((r=>{let[i,a]=r;const s={peer:i.uid};if(a.has(qR.VIDEO)&&i.videoTrack){const r=i._videoSSRC&&this.requestVideoIsReady&&this.requestVideoIsReady(i._videoSSRC)||!1,o=i.videoTrack?function(e,t,n,r,o,i,a){var s;const c=t.videoRecv.find((t=>t.ssrc===e));if(!c)return;const l={},{receivedFrame:u,outputFrame:d,decodeFrameRate:A}=c,p=n&&n.videoRecv.find((t=>t.ssrc===e));if(l[Hx.FREEZE]=o&&SF.isRemoteVideoFreeze(r,c,p)?1:0,Jx(l,jx.FRAME_RATE_DECODE,A),Jx(l,Hx.QP_SUM,c.qpSumPerFrame),c.framesRateFirefox&&Jx(l,Hx.FRAME_RATE,c.framesRateFirefox),u&&Jx(l,Hx.FRAME_RATE,u.frameRate),Jx(l,Hx.FRAMES_DROPPED,c.framesDroppedCount),Jx(l,Hx.BYTES_RETRANSMIT,c.retransmittedBytesReceived),Jx(l,Hx.PACKAGES_RETRANSMIT,c.retransmittedPacketsReceived),Jx(l,Hx.PACKAGES_DISCARDED,c.packetsDiscarded),Jx(l,Hx.AVG_DECODE,c.avgDecodeMs),Jx(l,Hx.AVG_PROCESSING_DELAY,c.avgProcessingDelayMs),Jx(l,Hx.AVG_ASSEMBLY_TIME,c.avgFramesAssembledFromMultiplePacketsMs),Jx(l,Hx.AVG_INTER_FRAME_DELAY,c.avgInterFrameDelayMs),Jx(l,Hx.KEY_FRAMES_DECODED,c.keyFramesDecoded),p){const e=t.timestamp-n.timestamp||(a?zx:Yx*zx);null!=c.packetsLost&&null!=p.packetsLost&&Jx(l,Hx.PACKAGE_LOST,c.packetsLost-p.packetsLost),null!=p.bytes&&null!=c.bytes&&Jx(l,Hx.BITRATE,8*(c.bytes-p.bytes)/e),null!=p.packets&&null!=c.packets&&Jx(l,Hx.PACKAGE_RATE,1e3*(c.packets-p.packets)/e)}if(a)return l;u?(Jx(l,Hx.HEIGHT,u.height),Jx(l,Hx.WIDTH,u.width)):r&&(Jx(l,Hx.HEIGHT,r._videoHeight||0),Jx(l,Hx.WIDTH,r._videoWidth||0)),d&&Jx(l,jx.FRAME_RATE_OUTPUT,d.frameRate);const h=null===(s=r._player)||void 0===s?void 0:s.rendFrameRate.toFixed(0);if(h&&Jx(l,jx.FRAME_RATE_RENDER,+h),Jx(l,Hx.JITTER_BUFFER,c.jitterBufferMs),Jx(l,Hx.CURRENT_DELAY,c.currentDelayMs),Jx(l,Hx.FIRS,c.firsCount),Jx(l,Hx.NACKS,c.nacksCount),Jx(l,Hx.PLIS,c.plisCount),r){l[Hx.DISABLED]=r._originMediaStreamTrack.enabled&&r._mediaStreamTrack.enabled?0:1;const e=r._player;if(e){const{freezeTimeCounterList:t,renderFreezeAccTime:n,videoElementStatus:r}=e;if(t&&t.length>0&&Jx(l,jx.FREEZE_TIME,t.splice(0,1)[0]),i&&"visible"===uU.visibility&&r===ED.PLAYING&&UP().supportRequestVideoFrameCallback){const t=Math.min(6e3,n);e.renderFreezeAccTime=Math.max(0,n-t),Jx(l,jx.FREEZE_TIME_RENDER,t)}if("number"==typeof c.totalFreezesDuration){const e=p&&p.totalFreezesDuration?c.totalFreezesDuration-p.totalFreezesDuration:c.totalFreezesDuration;Jx(l,jx.FREEZE_DURATION,1e3*e)}}}if(l[Hx.PLAYER_STATUS]=yD[r._player?r._player.videoElementStatus:"uninit"],p&&void 0!==c.totalInterFrameDelay&&void 0!==c.totalSquaredInterFrameDelay&&void 0!==p.totalInterFrameDelay&&void 0!==p.totalSquaredInterFrameDelay){const e=c.totalInterFrameDelay-p.totalInterFrameDelay,t=c.totalSquaredInterFrameDelay-p.totalSquaredInterFrameDelay,n=c.framesDecodeCount-p.framesDecodeCount,r=e/n*1e3,o=Math.round(1e3*Math.sqrt((t-Math.pow(e,2)/n)/n));!isNaN(o)&&r+o>Math.max(3*r,r+150)&&(l[Hx.I_FRAME_DELAY]=o)}return l}(i._videoSSRC,e,t,i.videoTrack,!0===r,this.needUploadRenderFreezeTime,n):void 0;o&&(s.video=o)}if(a.has(qR.AUDIO)&&i.audioTrack){const r=i.audioTrack?function(e,t,n,r,o){const i=t.audioRecv.find((t=>t.ssrc===e));if(!i)return;const a={},s=n&&n.audioRecv.find((t=>t.ssrc===e)),{receivedFrames:c,droppedFrames:l}=i;var u;if(Jx(a,Kx.JITTER,i.jitterMs),Jx(a,Kx.BYTES_RETRANSMIT,i.retransmittedBytesReceived),Jx(a,Kx.PACKAGES_RETRANSMIT,i.retransmittedPacketsReceived),Jx(a,Kx.PACKAGES_DISCARDED,i.packetsDiscarded),Jx(a,Kx.AVG_PROCESSING_DELAY,i.avgProcessingDelayMs),null!=c&&null!=l&&(a[Kx.FREEZE]=0===(u=c)||100*l/u>20?1:0),s){const e=t.timestamp-n.timestamp||(o?zx:zx*Yx);null!=i.packets&&null!=s.packets&&Jx(a,Kx.PACKAGE_RATE,1e3*(i.packets-s.packets)/e),null!=s.bytes&&null!=i.bytes&&Jx(a,Kx.BITRATE,8*(i.bytes-s.bytes)/e),null!=i.packetsLost&&null!=s.packetsLost&&Jx(a,Kx.PACKAGE_LOST,i.packetsLost-s.packetsLost)}if(o)return a;const d=100*r._source.getAccurateVolumeLevel(),A=i.outputLevel;if(null!=A){const e=Math.ceil(50*Math.log10(100*A+1));Jx(a,Wx.LEVEL,e)}if(Jx(a,Kx.PCM_LEVEL,d),r&&(a[Kx.DISABLED]=r._originMediaStreamTrack.enabled&&r._mediaStreamTrack.enabled?0:1),Jx(a,Kx.JITTER_BUFFER,i.jitterBufferMs),Jx(a,Kx.CURRENT_DELAY,i.jitterBufferMs),a[Kx.PLAYER_STATUS]=yD[tL.getPlayerState(r.getTrackId())],s){const e=i.concealedSamples-s.concealedSamples;e>0&&Jx(a,Kx.CONCEALED_SAMPLES,e)}return a}(i._audioSSRC,e,t,i.audioTrack,n):void 0;r&&(s.audio=r)}(s.video||s.audio)&&o.push(s)})),this.needUploadRenderFreezeTime=!this.needUploadRenderFreezeTime,o}startUploadTransportStats(){this.uploadTransportStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats()}stopUploadTransportStats(){this.uploadTransportStarted=!1}startUploadOutboundStats(){this.uploadOutboundStarted||(this.uploadOutboundStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats(),this.uploadOutboundDenoiserStatsTimer&&window.clearInterval(this.uploadOutboundDenoiserStatsTimer),this.uploadOutboundDenoiserStatsTimer=window.setInterval((()=>{if(!this.requestAllTracks||!this.requestUpload)return;const e=(this.requestAllTracks()||[]).find((e=>e instanceof oB));if(e&&e._external.getDenoiserStats){const t=e._external.getDenoiserStats();t&&this.requestUpload(_R.DENOISER_STATS,t)}}),2e3),this.uploadExtStatsTimer&&window.clearInterval(this.uploadExtStatsTimer),this.uploadExtStatsTimer=window.setInterval((()=>{this.requestAllTracks&&this.requestUpload&&this.requestAllTracks().forEach((e=>{e.getProcessorStats().forEach((e=>{this.requestUpload&&this.requestUpload(e.type,e.stats)}))}))}),2e3))}stopUploadOutboundStats(){this.uploadOutboundStarted&&(this.uploadOutboundStarted=!1,this.lastSendStats&&(this.lastSendStats.videoSend=[],this.lastSendStats.audioSend=[],this.lastSendStats=void 0),this.uploadOutboundDenoiserStatsTimer&&window.clearInterval(this.uploadOutboundDenoiserStatsTimer),this.uploadOutboundDenoiserStatsTimer=void 0)}startUploadInboundStats(){this.uploadInboundStarted||(this.uploadInboundStarted=!0,this.uploadWRTCStatsTimer||this.startUploadWRTCStats(),this.uploadInboundExtStatsTimer&&window.clearInterval(this.uploadInboundExtStatsTimer),this.uploadInboundExtStatsTimer=window.setInterval((()=>{this.requestUpload&&this.requestRemoteMedia&&(this.requestRemoteMedia()||[]).forEach((e=>{let[t,n]=e;n.has(qR.VIDEO)&&t.videoTrack&&t.videoTrack.getProcessorStats().forEach((e=>{this.requestUpload&&this.requestUpload(e.type,e.stats)})),n.has(qR.AUDIO)&&t.audioTrack&&t.audioTrack.getProcessorStats().forEach((e=>{this.requestUpload&&this.requestUpload(e.type,e.stats)}))}))}),2e3))}stopUploadInboundStats(){this.uploadInboundStarted&&(this.uploadInboundStarted=!1,this.lastRecvStats&&(this.lastRecvStats.videoRecv=[],this.lastRecvStats.audioRecv=[],this.lastRecvStats=void 0))}startUploadExtensionUsageStats(){if(this.uploadExtensionUsageStarted)return;this.uploadExtensionUsageStarted=!0,this.uploadExtUsageStatsTimer&&window.clearInterval(this.uploadExtUsageStatsTimer);const e=new Map;this.uploadExtUsageStatsTimer=window.setInterval((async()=>{const t=Date.now(),n={connectionInterval:xT("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3,details:[],lts:t};let r=[];const o=this.requestAllTracks&&this.requestAllTracks()||[];for(const e of o)!e.muted&&e.enabled&&(r=r.concat(await e.getProcessorUsage()));const i=this.requestRemoteMedia&&this.requestRemoteMedia()||[];for(const[e,c]of i)c.has(qR.VIDEO)&&e.videoTrack&&(r=r.concat(await e.videoTrack.getProcessorUsage())),c.has(qR.AUDIO)&&e.audioTrack&&(r=r.concat(await e.audioTrack.getProcessorUsage()));if(0===r.length)return;n.details=function(e,t){const n={};for(const{id:a,value:s,level:c,direction:l}of e){var r;const e=null!==(r=t.get(a))&&void 0!==r?r:0,u=2===s?e+xT("EXTENSION_USAGE_UPLOAD_INTERVAL")/1e3:e;var o,i;t.set(a,u),n[a]?(2===s&&(n[a].value=s),c>n[a].level&&(n[a].level=c),"remote"===l&&(n[a].remoteUidCount+=1),n[a].totalTs=null!==(o=t.get(a))&&void 0!==o?o:0):n[a]={value:s,level:c,remoteUidCount:"local"===l?0:1,totalTs:null!==(i=t.get(a))&&void 0!==i?i:0}}return Object.keys(n).map((e=>{const{level:t,value:r,totalTs:o}=n[e];return{id:e,level:t,value:r,totalTs:o}}))}(r,e);const a=Date.now(),s=a>t?a:t+1;this.requestUpload&&this.requestUpload(_R.EXTENSION_USAGE_STATS,{usageStats:n,sendTs:s})}),xT("EXTENSION_USAGE_UPLOAD_INTERVAL"))}stopUploadExtensionUsageStats(){this.uploadExtensionUsageStarted&&(this.uploadExtensionUsageStarted=!1,this.uploadExtUsageStatsTimer&&window.clearInterval(this.uploadExtUsageStatsTimer),this.uploadExtUsageStatsTimer=void 0)}}class tF{get hasVideo(){return this._video_enabled_&&!this._video_muted_&&this._video_added_}get hasAudio(){return this._audio_enabled_&&!this._audio_muted_&&this._audio_added_}get audioTrack(){if(this.hasAudio||this._audio_pre_subscribed)return this._audioTrack}get videoTrack(){if(this.hasVideo||this._video_pre_subscribed)return this._videoTrack}get dataChannels(){return this._dataChannels}constructor(e,t){Ov(this,"uid",void 0),Ov(this,"_uintid",void 0),Ov(this,"_trust_in_room_",!0),Ov(this,"_trust_audio_enabled_state_",!0),Ov(this,"_trust_video_enabled_state_",!0),Ov(this,"_trust_audio_mute_state_",!0),Ov(this,"_trust_video_mute_state_",!0),Ov(this,"_audio_muted_",!1),Ov(this,"_video_muted_",!1),Ov(this,"_audio_enabled_",!0),Ov(this,"_video_enabled_",!0),Ov(this,"_audio_added_",!1),Ov(this,"_video_added_",!1),Ov(this,"_is_pre_created",!1),Ov(this,"_video_pre_subscribed",!1),Ov(this,"_audio_pre_subscribed",!1),Ov(this,"_trust_video_stream_added_state_",!0),Ov(this,"_trust_audio_stream_added_state_",!0),Ov(this,"_audioTrack",void 0),Ov(this,"_videoTrack",void 0),Ov(this,"_dataChannels",[]),Ov(this,"_audioSSRC",void 0),Ov(this,"_videoSSRC",void 0),Ov(this,"_audioOrtc",void 0),Ov(this,"_videoOrtc",void 0),Ov(this,"_cname",void 0),Ov(this,"_rtxSsrcId",void 0),Ov(this,"_videoMid",void 0),Ov(this,"_audioMid",void 0),this.uid=e,this._uintid=t}}let nF=function(e){return e.SEND_ONLY="SEND_ONLY",e.RECEIVE_ONLY="RECEIVE_ONLY",e}({});function rF(e,t){var n;let r;switch(t){case JR.LocalAudioTrack:r=MR.Audio;break;case JR.LocalVideoTrack:r=Or(n=e._hints).call(n,tD.SCREEN_TRACK)?MR.Screen:MR.High;break;case JR.LocalVideoLowTrack:r=MR.Low}return r}function oF(e){const t=UP();if(e.some((e=>e._bypassWebAudio)))throw new uw(lw.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");if(!t.webAudioMediaStreamDest)throw new uw(lw.NOT_SUPPORTED,"cannot publish multiple tracks because your browser does not support audio mixing")}function iF(e,t){oF(e);const n=new aB;return e.forEach((e=>n.addAudioTrack(e))),n}var aF,sF,cF,lF,uF,dF,AF,pF,hF,fF,gF,mF;function _F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function EF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_F(Object(n),!0).forEach((function(t){Ov(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let vF=(aF=yF(nF.SEND_ONLY),sF=yF(nF.SEND_ONLY),cF=yF(),lF=yF(nF.RECEIVE_ONLY),uF=yF(nF.RECEIVE_ONLY),dF=yF(nF.RECEIVE_ONLY),AF=yF(nF.RECEIVE_ONLY),pF=yF(nF.RECEIVE_ONLY),hF=yF(nF.RECEIVE_ONLY),fF=yF(),gF=yF(nF.RECEIVE_ONLY),sR((mF=class extends ww{get state(){return this._state}set state(e){const t=this._state;this._state=e,this.emit(ZR.StateChange,t,this._state)}constructor(e,t){super(),Ov(this,"isPlanB",!1),Ov(this,"store",void 0),Ov(this,"statsUploader",void 0),Ov(this,"sendConnection",void 0),Ov(this,"recvConnection",void 0),Ov(this,"localTrackMap",new Map),Ov(this,"remoteUserMap",new Map),Ov(this,"localDataChannels",[]),Ov(this,"pendingLocalTracks",[]),Ov(this,"pendingRemoteTracks",[]),Ov(this,"statsCollector",void 0),Ov(this,"dtlsFailedCount",0),Ov(this,"sendMutex",void 0),Ov(this,"recvMutex",void 0),Ov(this,"_state",XR.Disconnected),Ov(this,"_restartStates",["disconnected","failed"]),Ov(this,"reconnectInterval",void 0),Ov(this,"uploadUnplinkStarted",!1),Ov(this,"uploadDownlinkStarted",!1),Ov(this,"uplinkStateUploadInterval",void 0),Ov(this,"downlinkStatsUploadInterval",void 0),Ov(this,"handleMuteLocalTrack",(async(e,t,n)=>{const r=await this.sendMutex.lock("Locking from P2PChannel2.handleMuteLocalTrack");try{if(!this.sendConnection||this.state!==XR.Connected)return void n(new uw(lw.INVALID_OPERATION,"Cannot call P2PChannel2.handleMuteLocalTrack before sendConnection established."));const r=this.filterTobeMutedTracks(e);if(0===r.length)return void t();const a=r.find((e=>"videoLowTrack"===e[0]));a&&a[1].track._originMediaStreamTrack.stop(),await this.sendConnection.muteLocal(r.map((e=>{let[,{id:t}]=e;return t})));let s=!1;var o,i;s="video"===e.trackMediaType?!(null===(o=this.localTrackMap.get(JR.LocalAudioTrack))||void 0===o||!o.track._muted):void 0===(null===(i=this.localTrackMap.get(JR.LocalVideoTrack))||void 0===i?void 0:i.id);const c=this.createMuteMessage(r);await Vw(this,ZR.RequestMuteLocal,c);const l="video"===e.trackMediaType?uO.MUTE_LOCAL_VIDEO:uO.MUTE_LOCAL_AUDIO;await Vw(this,ZR.RequestP2PMuteLocal,{action:l,message:c,isMuteAll:s}),t()}catch(a){n(a)}finally{r()}})),Ov(this,"handleUnmuteLocalTrack",(async(e,t,n)=>{const r=await this.sendMutex.lock("Locking from P2PChannel2.handleUnmuteLocalTrack");try{if(!this.sendConnection||this.state!==XR.Connected)return void n(new uw(lw.INVALID_OPERATION,"Cannot call P2PChannel2.handleUnmuteLocalTrack before sendConnection established."));const r=this.filterTobeUnmutedTracks(e);if(0===r.length)return void t();await this.sendConnection.unmuteLocal(r.map((e=>{let[,{id:t}]=e;return t})));const o=this.createUnmuteMessage(r),i="video"===e.trackMediaType?uO.UNMUTE_LOCAL_VIDEO:uO.UNMUTE_LOCAL_AUDIO;await Vw(this,ZR.RequestP2PMuteLocal,{action:i,message:o}),t()}catch(o){n(o)}finally{r()}})),Ov(this,"handleUpdateVideoEncoder",(async(e,t,n)=>{const r=await this.sendMutex.lock("Locking from P2PChannel2.handleSetVideoEncoder");try{const n=this.localTrackMap.get(JR.LocalVideoTrack);if(!this.sendConnection||!n||n.track!==e||this.state!==XR.Connected)return void t();const{id:r,track:o}=n;r&&(await this.sendConnection.updateSendParameters(r,o),await this.sendConnection.updateEncoderConfig(r,o),this.emit(ZR.UpdateVideoEncoder,o)),t()}catch(o){n(o)}finally{r()}})),Ov(this,"handleUpdateVideoSendParameters",(async(e,t,n)=>{const r=await this.sendMutex.lock("Locking from P2PChannel2.handleUpdateVideoSendParameters");try{const n=this.localTrackMap.get(JR.LocalVideoTrack);if(!this.sendConnection||!n||n.track!==e||this.state!==XR.Connected)return void t();const{id:r,track:o}=n;r&&await this.sendConnection.updateSendParameters(r,o),t()}catch(o){n(o)}finally{r()}})),Ov(this,"handleReplaceTrack",(async(e,t,n,r)=>{let o;oI.debug("[".concat(this.store.clientId,"] P2PChannel2 handleReplaceTrack for [track-id-").concat(e.getTrackId(),"]")),"boolean"==typeof r&&r||(o=await this.sendMutex.lock("From P2PChannel2.handleReplaceTrack"));try{var i;const n=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:n}]=t;return e===n}));if(!this.sendConnection||!n||void 0===n[1].id||this.state!==XR.Connected)return void t();if(await(null===(i=this.sendConnection)||void 0===i?void 0:i.replaceTrack(e,n[1].id)),n[0]===JR.LocalVideoTrack&&UP().supportDualStreamEncoding){const t=this.localTrackMap.get(JR.LocalVideoLowTrack);if(t){const n=e._mediaStreamTrack.clone();t.track._originMediaStreamTrack.stop(),t.track._mediaStreamTrack=n,t.track._originMediaStreamTrack=n,await new MA(((e,n)=>{this.handleReplaceTrack(t.track,e,n,!0)}))}}t()}catch(s){n(s)}finally{var a;null===(a=o)||void 0===a||a()}})),Ov(this,"handleGetLocalVideoStats",(e=>{e(this.statsCollector.getLocalVideoTrackStats())})),Ov(this,"handleGetLocalAudioStats",(e=>{e(this.statsCollector.getLocalAudioTrackStats())})),Ov(this,"handleGetRemoteVideoStats",(e=>this.statsCollector.getRemoteVideoTrackStats(e.uid)[e.uid])),Ov(this,"handleGetRemoteAudioStats",(e=>this.statsCollector.getRemoteAudioTrackStats(e.uid)[e.uid])),this.store=e,this.statsCollector=t,this.statsCollector.addP2PChannel(this),this.statsUploader=new eF(e),this.bindStatsUploaderEvents(),this.sendMutex=new _T("P2PChannel2-send-mutex",e.clientId),this.recvMutex=new _T("P2PChannel2-recv-mutex",e.clientId),this.reconnectInterval=window.setInterval((()=>{[this.sendConnection,this.recvConnection].forEach((e=>{e&&("disconnected"!==e.iceConnectionState&&"failed"!==e.iceConnectionState||this.handleDisconnect(e.direction))}))}),xT("ICE_RESTART_INTERVAL"))}async startP2PConnection(e,t){throw new uw(lw.NOT_SUPPORTED,"p2p mode does not support startP2PConnection.")}async connect(e){throw new uw(lw.NOT_SUPPORTED,"p2p mode does not support connect.")}async startP2P(e,t){let n;try{if(t){this.recvConnection&&(oI.warning("[".concat(this.store.clientId,"] P2PChannel.startP2P reset recvConnection.")),this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection)),n=await this.recvMutex.lock("From P2PChannel.startP2P"),this.recvConnection=new Ux(e,this.store,vR.RECEIVE_ONLY),this.bindConnectionEvents(this.recvConnection);const r=await this.recvConnection.establish(t);return{iceParameters:r.iceParameters,dtlsParameters:r.dtlsParameters,sdp:r.sdp}}{this.state=XR.New,this.sendConnection&&(oI.warning("[".concat(this.store.clientId,"] P2PChannel.startP2P reset sendConnection.")),this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection)),n=await this.sendMutex.lock("From P2PChannel.startP2P"),this.sendConnection=new Ux(e,this.store),this.store.peerConnectionStart(),this.bindConnectionEvents(this.sendConnection);const t=await this.sendConnection.establish();return{iceParameters:t.iceParameters,dtlsParameters:t.dtlsParameters,sdp:t.sdp}}}finally{n&&n()}}async p2pConnect(e){if(!this.sendConnection)throw new uw(lw.UNEXPECTED_ERROR,"Cannot P2PChannel2.p2pConnect before P2PChannel2.startP2PConnection .");this.store.peerConnectionStart(),await this.sendConnection.connect(e),this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=XR.Connected}async addRemoteCandidate(e,t){if(t===vR.RECEIVE_ONLY){if(!this.sendConnection)throw new uw(lw.UNEXPECTED_ERROR,"Cannot P2PChannel2.connect before P2PChannel2.addRemoteCandidate .");await this.sendConnection.addRemoteCandidate(e)}else{if(!this.recvConnection)throw new uw(lw.UNEXPECTED_ERROR,"Cannot P2PChannel2.connect before P2PChannel2.addRemoteCandidate .");await this.recvConnection.addRemoteCandidate(e)}}publish(e,t,n){var r=this;return BC((function*(){const o=yield UC(r.sendMutex.lock("From P2PChannel.publish"));try{if(!r.sendConnection||r.state!==XR.Connected){r.throwIfTrackTypeNotMatch(e);const t=e.filter((e=>-1===r.pendingLocalTracks.indexOf(e)));return void(r.pendingLocalTracks=r.pendingLocalTracks.concat(t))}r.store.pubId=r.store.pubId+1,YM.markPublishStart(r.store.clientId,r.store.pubId);const o=r.filterTobePublishedTracks(e,t,n);if(0===o.length)return void(yield UC(r.tryToUnmuteAudio(e)));o.forEach((e=>{let{track:t,type:n}=e;const o=Date.now();r.store.publish(t.getTrackId(),n===JR.LocalAudioTrack?"audio":"video",o)})),r.bindLocalTrackEvents(o);const a=yield UC(r.sendConnection.send(o.map((e=>{let{track:t}=e;return t})),r.store.codec,r.store.audioCodec)),s=(yield UC(a.next())).value,c=r.createGatewayPublishMessage(o,s);try{yield c}catch(i){throw a.throw(i),(null==i?void 0:i.code)===lw.WS_ABORT&&o.forEach((e=>{let{track:t}=e;-1===r.pendingLocalTracks.indexOf(t)&&r.pendingLocalTracks.push(t)})),r.unbindLocalTrackEvents(o),i}yield UC(a.next()),o.forEach((e=>{let{type:t}=e;r.statsCollector.addLocalStats(t)})),r.statsUploader.startUploadOutboundStats(),r.assignLocalTracks(o,s),o.forEach((e=>{let{track:t,type:n}=e;const o=Date.now();r.store.publish(t.getTrackId(),n===JR.LocalAudioTrack?"audio":"video",void 0,o)})),r.startUploadUplinkState()}finally{o()}}))()}async unpublish(e){if(!this.sendConnection||this.state!==XR.Connected)return void(0===e.length?this.pendingLocalTracks.length=0:this.pendingLocalTracks=this.pendingLocalTracks.filter((t=>!Or(e).call(e,t))));const t=this.filterTobeUnpublishedTracks(e);if(0===t.length)return;const n=t.find((e=>"videoLowTrack"===e[0]));n&&n[1].track.close();const r=this.createGatewayUnpublishMessage(t);if(await this.sendConnection.stopSending(t.map((e=>{let[,{id:t}]=e;return t}))),this.withdrawLocalTracks(t),this.unbindLocalTrackEvents(t.map((e=>{let[t,{track:n}]=e;return{type:t,track:n}}))),t.forEach((e=>{let[t]=e;this.statsCollector.removeLocalStats(t)})),0===this.localTrackMap.size&&(this.statsUploader.stopUploadOutboundStats(),this.stopUploadUplinkState()),this.sendConnection&&this.state===XR.Connected)return n&&n[1].track.close(),r;e.forEach((e=>{const t=this.pendingLocalTracks.indexOf(e);-1!==t&&this.pendingLocalTracks.splice(t,1)}))}startUploadUplinkState(){if(this.uploadUnplinkStarted)return;this.uploadUnplinkStarted=!0,this.uplinkStateUploadInterval&&window.clearInterval(this.uplinkStateUploadInterval);const e=()=>{const e=[],t=[];Array.from(this.localTrackMap.entries()).forEach((n=>{let[r,{track:o,ssrcs:i}]=n;const a={stream_type:rF(o,r),ssrcs:i};o._muted||!o._enabled?e.push(a):t.push(a)})),e.length>0&&e.forEach((e=>{Vw(this,ZR.RequestMuteLocal,[e])})),t.length>0&&t.forEach((e=>{Vw(this,ZR.RequestUnmuteLocal,[e])}))};e(),this.uplinkStateUploadInterval=window.setInterval((()=>{e()}),3e3)}stopUploadUplinkState(){this.uploadUnplinkStarted&&(this.uploadUnplinkStarted=!1,this.uplinkStateUploadInterval&&window.clearInterval(this.uplinkStateUploadInterval))}publishLowStream(e){return BC((function*(){throw new uw(lw.NOT_SUPPORTED,"p2p mode does not support publishLowStream.")}))()}async republish(){this.pendingLocalTracks.length>0&&(oI.debug("[".concat(this.store.clientId,"] Emit P2PChannelEvents.RequestRePublish to republish tracks.")),await $w(this,ZR.RequestRePublish,this.pendingLocalTracks),this.emit(ZR.MediaReconnectEnd,this.store.uid),this.pendingLocalTracks=[])}async unpublishLowStream(){throw new uw(lw.NOT_SUPPORTED,"p2p mode does not support unpublishLowStream.")}async subscribe(e,t,n,r){var o;if(!this.recvConnection)throw new uw(lw.INVALID_OPERATION,"Cannot subscribe remote user when recvConnection disconnected.");if(null!==(o=this.remoteUserMap.get(e))&&void 0!==o&&o.has(t))return;const{track:i,mid:a,transceiver:s}=await this.recvConnection.receive(t,[{ssrcId:n}],String(e.uid),r);t===qR.AUDIO?(e._audioTrack?e._audioTrack._updateOriginMediaStreamTrack(i):(e._audioTrack=new lU(i,e.uid,e._uintid,this.store),oI.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(e._audioTrack.getTrackId()))),s&&e._audioTrack._updateRtpTransceiver(s),this.bindRemoteTrackEvents(e,e._audioTrack)):(e._videoSSRC=n,e._videoTrack?e._videoTrack._updateOriginMediaStreamTrack(i):(e._videoTrack=new cU(i,e.uid,e._uintid,this.store),oI.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(e._videoTrack.getTrackId()))),s&&e._videoTrack._updateRtpTransceiver(s),this.bindRemoteTrackEvents(e,e._videoTrack));const c=this.remoteUserMap.get(e);c?c.set(t,a):this.remoteUserMap.set(e,new Map([[t,a]])),this.statsCollector.addRemoteStats(e.uid),this.statsUploader.startUploadInboundStats(),this.startUploadDownlinkState();const l=this.pendingRemoteTracks.findIndex((n=>{let{user:r,kind:o}=n;return r.uid===e.uid&&t===o}));-1!==l&&(this.pendingRemoteTracks.splice(l,1),this.emit(ZR.MediaReconnectEnd,e.uid))}async mockSubscribe(e,t,n,r){if(!this.recvConnection)throw new uw(lw.INVALID_OPERATION,"Cannot subscribe remote user when recvConnection disconnected.");await this.recvConnection.mockReceive(t,[{ssrcId:n}],String(e.uid),r)}async unsubscribe(e,t,n){const r=this.pendingRemoteTracks.filter((n=>{let{user:r,kind:o}=n;return void 0!==t?r.uid===e.uid&&t===o:r.uid===e.uid}));if(r.forEach((e=>{const t=this.pendingRemoteTracks.indexOf(e);this.pendingRemoteTracks.splice(t,1)})),this.recvConnection||n||r.forEach((t=>{let{kind:n}=t;var r;if(n===qR.AUDIO)null===(r=e._audioTrack)||void 0===r||r._destroy(),e._audioTrack=void 0;else if(n===qR.VIDEO){var o;null===(o=e._videoTrack)||void 0===o||o._destroy(),e._videoTrack=void 0}})),!this.recvConnection)return;const o=this.filterTobeUnSubscribedTracks(e,t);0!==o.length&&(await this.recvConnection.stopReceiving(o.map((e=>{let[,{id:t}]=e;return t}))),this.withdrawRemoteTracks(o),0===this.remoteUserMap.size&&(this.statsUploader.stopUploadInboundStats(),this.stopUploadDownlinkState()),o.forEach((e=>{let[t,{kind:r}]=e;var o,i;if(r===qR.VIDEO&&t._videoSSRC&&(null===(o=this.recvConnection)||void 0===o||o.setStatsRemoteVideoIsReady(t._videoSSRC,!1)),r===qR.VIDEO)this.unbindRemoteTrackEvents(t._videoTrack),n||(null===(i=t._videoTrack)||void 0===i||i._destroy(),t._videoTrack=void 0);else if(r===qR.AUDIO){var a;this.unbindRemoteTrackEvents(t._audioTrack),n||(null===(a=t._audioTrack)||void 0===a||a._destroy(),t._audioTrack=void 0)}})),o.forEach((e=>{let[,{kind:t}]=e;Vw(this,ZR.RequestP2PMuteRemote,t)})))}startUploadDownlinkState(){if(this.uploadDownlinkStarted)return;this.uploadDownlinkStarted=!0,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval);const e=()=>Array.from(this.remoteUserMap.entries()).forEach((e=>{let[,t]=e;[qR.VIDEO,qR.AUDIO].forEach((e=>{t.has(e)?Vw(this,ZR.RequestP2PUnmuteRemote,e):Vw(this,ZR.RequestP2PMuteRemote,e)}))}));e(),this.downlinkStatsUploadInterval=window.setInterval((()=>{e()}),3e3)}stopUploadDownlinkState(){this.uploadDownlinkStarted&&(this.uploadDownlinkStarted=!1,this.downlinkStatsUploadInterval&&window.clearInterval(this.downlinkStatsUploadInterval))}getAllDataChannels(){return this.localDataChannels}async massSubscribe(e){throw new uw(lw.NOT_SUPPORTED,"p2p mode does not support massSubscribe.")}async massSubscribeNoLock(e){throw new uw(lw.NOT_SUPPORTED,"p2p mode does not support massSubscribeNoLock.")}async massUnsubscribe(e){throw new uw(lw.NOT_SUPPORTED,"p2p mode does not support massUnsubscribe.")}async massUnsubscribeNoLock(e){throw new uw(lw.NOT_SUPPORTED,"p2p mode does not support massUnsubscribeNoLock.")}async muteRemote(e,t){if(!this.recvConnection)return;const n=this.remoteUserMap.get(e);if(!n)return void oI.warning("[".concat(this.store.clientId,"] P2PChannel2.muteRemote has no remote user ").concat(e.uid,"."));if(!n.get(t))return void oI.warning("[".concat(this.store.clientId,"] P2PChannel2.muteRemote has no remote user ").concat(e.uid," media type ").concat(t,"."));const r=t===qR.VIDEO?e._videoSSRC:e._audioSSRC;void 0!==r&&this.recvConnection.setStatsRemoteVideoIsReady(r,!1)}async unmuteRemote(e,t){return this.unmuteRemoteNoLock(e,t)}async unmuteRemoteNoLock(e,t){if(!this.recvConnection)return;const n=this.remoteUserMap.get(e);n?n.get(t)||oI.warning("[".concat(this.store.clientId,"] P2PChannel2.unmuteRemote has no remote user ").concat(e.uid," media type ").concat(t,".")):oI.warning("[".concat(this.store.clientId,"] P2PChannel2.unmuteRemote has no remote user ").concat(e.uid,"."))}getAllTracks(e){const t=this.localTrackMap.get(JR.LocalAudioTrack);if((null==t?void 0:t.track)instanceof aB){const n=t.track;return Array.from(this.localTrackMap.entries()).filter((e=>{let[t]=e;return t!==JR.LocalAudioTrack})).filter((t=>{let[n]=t;return!(e&&n===JR.LocalVideoLowTrack)})).map((e=>{let[,{track:t}]=e;return t})).concat(n.trackList)}return Array.from(this.localTrackMap.entries()).filter((t=>{let[n]=t;return!(e&&n===JR.LocalVideoLowTrack)})).map((e=>{let[,{track:t}]=e;return t}))}reportPublishEvent(e,t,n,r,o){if(e){const n=this.localTrackMap.get(JR.LocalAudioTrack),i=r?this.localTrackMap.get(JR.LocalVideoLowTrack):this.localTrackMap.get(JR.LocalVideoTrack);AI.publish(this.store.sessionId,{eventElapse:YM.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:null==n?void 0:n.track.getTrackLabel(),videoName:null==i?void 0:i.track.getTrackLabel(),screenshare:-1!==(null==i?void 0:i.track._hints.indexOf(tD.SCREEN_TRACK)),audio:!!n,video:!!i,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:o})}else{var i;n||(n=[]);const a=n.find((e=>e instanceof rB)),s=r?null===(i=this.localTrackMap.get(JR.LocalVideoTrack))||void 0===i?void 0:i.track:n.find((e=>e instanceof KB));AI.publish(this.store.sessionId,{eventElapse:YM.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:null==a?void 0:a.getTrackLabel(),videoName:null==s?void 0:s.getTrackLabel(),screenshare:-1!==(null==s?void 0:s._hints.indexOf(tD.SCREEN_TRACK)),audio:!!a,video:!!s,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:o})}}reportSubscribeEvent(e,t,n,r){const o=r===qR.VIDEO?n._videoSSRC:n._audioSSRC;o&&AI.subscribe(this.store.sessionId,{succ:e,ec:t,video:r===qR.VIDEO,audio:r===qR.AUDIO,peerid:n.uid,subscribeRequestid:r===qR.VIDEO?n._videoSSRC:n._audioSSRC,p2pid:this.store.p2pId,eventElapse:YM.measureFromSubscribeStart(this.store.clientId,o)})}reset(){oI.debug("[".concat(this.store.clientId,"] P2PChannel2.reset")),this.sendMutex=new _T("P2PChannel2-send-mutex",this.store.clientId),this.sendMutex=new _T("P2PChannel2-recv-mutex",this.store.clientId),this.sendConnection&&(this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection),this.sendConnection=void 0),this.recvConnection&&(this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection),this.recvConnection=void 0),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),this.statsUploader.stopUploadExtensionUsageStats(),this.stopUploadUplinkState(),this.stopUploadDownlinkState(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.unbindRtpTransceiver();const e=this.localTrackMap.get(JR.LocalAudioTrack);if((null==e?void 0:e.track)instanceof aB){if(e.track.trackList.length>0){const t=e.track;e.track.trackList.forEach((e=>{t.removeAudioTrack(e)}))}e.track.close()}this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.reconnectInterval&&(window.clearInterval(this.reconnectInterval),this.reconnectInterval=void 0),this.state=XR.Disconnected}getStats(e){var t,n;return e?null===(n=this.recvConnection)||void 0===n?void 0:n.getStats():null===(t=this.sendConnection)||void 0===t?void 0:t.getStats()}getRemoteVideoIsReady(e){var t;return(null===(t=this.recvConnection)||void 0===t?void 0:t.getRemoteVideoIsReady(e))||!1}getLocalAudioVolume(){const e=this.localTrackMap.get(JR.LocalAudioTrack);if(e)return e.track.getVolumeLevel()}getLocalVideoSize(){const e=this.localTrackMap.get(JR.LocalVideoTrack);if(e)return{width:e.track.videoWidth||0,height:e.track.videoHeight||0}}getEncoderConfig(e){const t=this.localTrackMap.get(e);return t&&t.track instanceof KB||t&&t.track instanceof rB?t.track._encoderConfig:void 0}getLocalMedia(e){return this.localTrackMap.get(e)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(e,t){if(!e)return this.remoteUserMap.size>0;const n=this.remoteUserMap.get(e);return!!n&&(!t||n.has(t))}async hasRemoteMediaWithLock(e,t){if(!e)return this.remoteUserMap.size>0;const n=this.remoteUserMap.get(e);return!!n&&(!t||n.has(t))}getRemoteMedia(e){var t;const n=Array.from(rh(t=this.remoteUserMap).call(t)).find((t=>t.uid===e));return n?{audioTrack:n.audioTrack,audioSSRC:n._audioSSRC,videoTrack:n.videoTrack,videoSSRC:n._videoSSRC}:{}}getAudioLevels(){let e=Array.from(this.remoteUserMap.entries()).map((e=>{let[t]=e;return{uid:t.uid,level:t.audioTrack?100*t.audioTrack._source.getAccurateVolumeLevel():0}}));const t=this.localTrackMap.get(JR.LocalAudioTrack);return t&&e.push({level:100*t.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),e=Xh(e).call(e,((e,t)=>e.level-t.level)),e}async disconnectForReconnect(){this.sendConnection&&this.recvConnection&&(oI.debug("[".concat(this.store.clientId,"] P2PChannel2.disconnectForReconnect closing P2PConnection")),this.state=XR.Reconnecting,xT("KEEP_LAST_FRAME")&&0!==this.remoteUserMap.size&&Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t]=e;var n;t._videoTrack&&t._videoTrack._player&&(null===(n=t._videoTrack._player.getVideoElement())||void 0===n||n.pause(),t._videoTrack._player.isKeepLastFrame=!0,t._videoTrack._originMediaStreamTrack.stop())})),this.sendConnection.close(),this.unbindConnectionEvents(this.sendConnection),this.sendConnection=void 0,this.recvConnection.close(),this.unbindConnectionEvents(this.recvConnection),this.recvConnection=void 0,0!==this.localTrackMap.size&&(Array.from(this.localTrackMap.entries()).forEach((e=>{var t;let[n,{track:r}]=e;switch(n){case JR.LocalVideoTrack:Or(t=r._hints).call(t,tD.LOW_STREAM)?r.close():this.pendingLocalTracks.push(r);break;case JR.LocalAudioTrack:r instanceof aB?this.pendingLocalTracks=this.pendingLocalTracks.concat(r.trackList):this.pendingLocalTracks.push(r);case JR.LocalVideoLowTrack:}})),this.emit(ZR.MediaReconnectStart,this.store.uid)),this.unbindLocalTrackEvents(),this.localTrackMap.clear(),0!==this.remoteUserMap.size&&Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t,n]=e;Array.from(rh(n).call(n)).forEach((e=>{this.setPendingRemoteMedia(t,e)})),this.emit(ZR.MediaReconnectStart,t.uid)})),this.unbindAllRemoteTrackEvents(),this.remoteUserMap.clear(),this.stopUploadUplinkState(),this.stopUploadDownlinkState(),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),oI.debug("[".concat(this.store.clientId,"] P2PChannel2 disconnected, waiting to reconnect.")))}hasPendingRemoteMedia(e,t){for(const n of this.pendingRemoteTracks){const{user:r,kind:o}=n;if((e instanceof tF?e.uid:e)===r.uid&&t===o)return!0}return!1}setPendingRemoteMedia(e,t){this.hasPendingRemoteMedia(e,t)||this.pendingRemoteTracks.push({user:e,kind:t})}async restartICE(e,t){let n,r;if(e===vR.SEND_ONLY){if(!this.sendConnection)throw new uw(lw.INVALID_OPERATION,"Cannot call P2PChannel2.handleMuteLocalTrack before sendConnection established.");n=await this.sendMutex.lock("From P2PChannel.restartICE"),r=this.sendConnection}else{if(!this.recvConnection)throw new uw(lw.INVALID_OPERATION,"Cannot call P2PChannel2.handleMuteLocalTrack before recvConnection established.");n=await this.recvMutex.lock("From P2PChannel.restartICE"),r=this.recvConnection}try{if(t){const e=await r.restartICE(t);return r.isInRestartIce=!1,e}{const e=await r.restartICE();if(e){const t=await $w(this,ZR.RequestP2PRestartICE,{direction:vR.RECEIVE_ONLY,iceParameter:e});await r.restartICE(t),r.isInRestartIce=!1}}}finally{n()}}getUplinkNetworkQuality(){if(!this.sendConnection)return 0;const e=this.sendConnection.getStats(),t=this.localTrackMap.get(JR.LocalVideoTrack),n=this.localTrackMap.get(JR.LocalAudioTrack),r=e.videoSend.find((e=>{var n;return e.ssrc===(null==t||null===(n=t.ssrcs)||void 0===n?void 0:n[0].ssrcId)})),o=e.audioSend.find((e=>{var t;return e.ssrc===(null==n||null===(t=n.ssrcs)||void 0===t?void 0:t[0].ssrcId)}));if(!r||!o)return 1;const i=Hw(this,ZR.NeedSignalRTT),a=r?r.rttMs:void 0,s=o?o.rttMs:void 0,c=a&&s?(a+s)/2:a||s,l=(c&&i?(c+i)/2:c||i)||0,u=100*e.sendPacketLossRate*.7/50+.3*l/1500,d=u<.17?1:u<.36?2:u<.59?3:u<.1?4:5,A=null==t?void 0:t.track;if(A&&A._encoderConfig&&-1===A._hints.indexOf(tD.SCREEN_TRACK)){const t=A._encoderConfig.bitrateMax,n=e.bitrate.actualEncoded;if(t&&n){const e=(1e3*t-n)/(1e3*t);return fI[e<.15?0:e<.3?1:e<.45?2:e<.6?3:4][d]}}return d}getDownlinkNetworkQuality(){if(!this.recvConnection)return 0;const e=this.recvConnection.getStats();let t=0;return Array.from(this.remoteUserMap.entries()).forEach((n=>{let[r]=n;const o=r._audioSSRC,i=r._videoSSRC,a=e.audioRecv.find((e=>e.ssrc===o)),s=e.videoRecv.find((e=>e.ssrc===i));if(!a&&!s)return void(t+=1);const c=Hw(this,ZR.NeedSignalRTT),l=e.rtt,u=(l&&c?(l+c)/2:l||c)||0,d=a?a.jitterMs:void 0,A=e.recvPacketLossRate;let p=.7*A*100/50+.3*u/1500;d&&(p=.6*A*100/50+.2*u/1500+.2*d/400),t+=p<.1?1:p<.17?2:p<.36?3:p<.59?4:5})),this.remoteUserMap.size>0?Math.round(t/this.remoteUserMap.size):t}async muteLocalTrack(e){return new MA(((t,n)=>{this.handleMuteLocalTrack(e,t,n)}))}filterTobePublishedTracks(e,t,n){const r=[],o=UP(),i=this.getAllTracks();e=Kw(e=e.filter((e=>-1===i.indexOf(e))));let a=!1,s=!1;for(const c of e){if(c instanceof KB&&(this.localTrackMap.has(JR.LocalVideoTrack)||a?new uw(lw.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(r.push({track:c,type:JR.LocalVideoTrack}),a=!0),t)){const e=this.getLowVideoTrack(c,n);r.push({track:e,type:JR.LocalVideoLowTrack})}if(c instanceof rB){const e=this.localTrackMap.get(JR.LocalAudioTrack);if(e){if(!(e.track instanceof aB))throw new uw(lw.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(c._bypassWebAudio)throw new uw(lw.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");e.track.addAudioTrack(c),this.bindLocalAudioTrackEvents(c,!0)}else if(s){const e=r.find((e=>{let{type:t}=e;return t===JR.LocalAudioTrack}));if(!(e.track instanceof aB))throw new uw(lw.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser does not support audio mixing");if(c._bypassWebAudio)throw new uw(lw.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio");e.track.addAudioTrack(c)}else{if(!o.webAudioMediaStreamDest||c instanceof aB||c._bypassWebAudio)r.push({track:c,type:JR.LocalAudioTrack});else{const e=new aB;e.addAudioTrack(c),r.push({track:e,type:JR.LocalAudioTrack})}s=!0}}}return r}filterTobeUnpublishedTracks(e){const t=[],n=this.getAllTracks();e=Kw(e=e.filter((e=>-1!==n.indexOf(e))));for(const r of e){if(r instanceof rB){const e=this.localTrackMap.get(JR.LocalAudioTrack);if(!e)continue;e.track instanceof aB?(e.track.removeAudioTrack(r),this.unbindLocalAudioTrackEvents(r),0===e.track.trackList.length&&(t.push([JR.LocalAudioTrack,e]),e.track.close())):t.push([JR.LocalAudioTrack,e])}if(r instanceof KB){const e=this.localTrackMap.get(JR.LocalVideoTrack);if(!e)continue;t.push([JR.LocalVideoTrack,e]);const n=this.localTrackMap.get(JR.LocalVideoLowTrack);n&&t.push([JR.LocalVideoLowTrack,n])}}return t}bindLocalTrackEvents(e){e.forEach((e=>{let{track:t,type:n}=e;switch(n){case JR.LocalVideoTrack:t.addListener(eD.GET_STATS,this.handleGetLocalVideoStats),t.addListener(eD.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.addListener(eD.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.addListener(eD.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),t.addListener(eD.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),t.addListener(eD.NEED_REPLACE_TRACK,this.handleReplaceTrack),t.addListener(eD.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.addListener(eD.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case JR.LocalAudioTrack:this.bindLocalAudioTrackEvents(t);case JR.LocalVideoLowTrack:}}))}bindLocalAudioTrackEvents(e,t){e instanceof aB?e.trackList.forEach((e=>{e.addListener(eD.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(eD.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(eD.GET_STATS,this.handleGetLocalAudioStats),e.addListener(eD.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(eD.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)})):(e.addListener(eD.GET_STATS,this.handleGetLocalAudioStats),e.addListener(eD.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(eD.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(eD.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(eD.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),t||e.addListener(eD.NEED_REPLACE_TRACK,this.handleReplaceTrack))}unbindLocalTrackEvents(e){e||(e=Array.from(this.localTrackMap.entries()).map((e=>{let[t,{track:n}]=e;return{track:n,type:t}}))),e.forEach((e=>{let{track:t,type:n}=e;switch(n){case JR.LocalVideoTrack:t.off(eD.GET_STATS,this.handleGetLocalVideoStats),t.off(eD.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.off(eD.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.off(eD.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),t.off(eD.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),t.off(eD.NEED_REPLACE_TRACK,this.handleReplaceTrack),t.off(eD.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.off(eD.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case JR.LocalAudioTrack:this.unbindLocalAudioTrackEvents(t);case JR.LocalVideoLowTrack:}}))}unbindLocalAudioTrackEvents(e){e instanceof aB?e.trackList.forEach((e=>{e.off(eD.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(eD.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(eD.GET_STATS,this.handleGetLocalAudioStats),e.off(eD.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(eD.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)})):(e.off(eD.GET_STATS,this.handleGetLocalAudioStats),e.off(eD.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(eD.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(eD.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.off(eD.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(eD.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(e,t){t instanceof cU&&t.addListener(eD.GET_STATS,(t=>{t(this.handleGetRemoteVideoStats(e))})),t instanceof lU&&t.addListener(eD.GET_STATS,(t=>{t(this.handleGetRemoteAudioStats(e))}))}unbindRemoteTrackEvents(e){e&&e.removeAllListeners(eD.GET_STATS)}unbindAllRemoteTrackEvents(){Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t,n]=e;n.has(qR.AUDIO)&&this.unbindRemoteTrackEvents(t._audioTrack),n.has(qR.VIDEO)&&this.unbindRemoteTrackEvents(t._videoTrack)}))}createGatewayPublishMessage(e,t){return e.map(((e,n)=>{var r;let o,{track:i,type:a}=e;switch(a){case JR.LocalAudioTrack:o=MR.Audio;break;case JR.LocalVideoTrack:o=Or(r=i._hints).call(r,tD.SCREEN_TRACK)?MR.Screen:MR.High;break;case JR.LocalVideoLowTrack:o=MR.Low}return{kind:a===JR.LocalAudioTrack?qR.AUDIO:qR.VIDEO,stream_type:o,mid:t[n].id,ssrcs:t[n].localSSRC,isMuted:i.muted||!i.enabled}}))}createGatewayUnpublishMessage(e){return e.map((e=>{var t;let n,[r,{track:o,ssrcs:i,id:a}]=e;switch(r){case JR.LocalVideoTrack:n=Or(t=o._hints).call(t,tD.SCREEN_TRACK)?MR.Screen:MR.High;break;case JR.LocalAudioTrack:n=MR.Audio;break;case JR.LocalVideoLowTrack:n=MR.Low}return{stream_type:n,ssrcs:i,mid:a}}))}assignLocalTracks(e,t){e.forEach(((e,n)=>{let{track:r,type:o}=e;this.localTrackMap.set(o,{track:r,id:t[n].id,ssrcs:t[n].localSSRC})}))}withdrawLocalTracks(e){e.forEach((e=>{let[t]=e;this.localTrackMap.delete(t)}))}bindConnectionEvents(e){e.onConnectionStateChange=async t=>{var n;oI.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: ").concat(e.name,".onConnectionStateChange(").concat(t,")")),this.emit(ZR.PeerConnectionStateChange,t),"connected"!==t||this.store.keyMetrics.peerConnectionEnd||this.store.peerConnectionEnd(),"connected"===t&&(e.isInRestartIce=!1),Or(n=this._restartStates).call(n,t)&&!e.isInRestartIce&&("disconnected"===t&&await iT(800),"disconnected"!==e.iceConnectionState&&"failed"!==e.iceConnectionState||this.handleDisconnect(e.direction))},e.onICEConnectionStateChange=e=>{"connected"!==e||this.store.keyMetrics.iceConnectionEnd||this.store.iceConnectionEnd(),oI.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(").concat(e,")")),AI.reportApiInvoke(this.store.sessionId,{name:"ICEConnectionStateChange",options:e,tag:Ow.TRACER}).onSuccess(),this.emit(ZR.IceConnectionStateChange,e)},e.onICETransportStateChange=e=>{oI.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICETransportStateChange(").concat(e,")"))},e.onDTLSTransportStateChange=e=>{oI.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(").concat(e,")"))},e.onDTLSTransportError=e=>{oI.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportError(").concat(e,")"))},e.onFirstAudioDecoded=e=>{var t;const n=Array.from(rh(t=this.remoteUserMap).call(t)).find((t=>t._audioSSRC===e));var r;n&&(this.store.subscribe(n.uid,"audio",void 0,void 0,void 0,Date.now()),null===(r=n.audioTrack)||void 0===r||r.emit(sD.FIRST_FRAME_DECODED),AI.firstRemoteFrame(this.store.sessionId,cI.FIRST_AUDIO_DECODE,lI.FIRST_AUDIO_DECODE,{peer:n._uintid,subscribeElapse:YM.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId}))},e.onFirstAudioReceived=e=>{var t;const n=Array.from(rh(t=this.remoteUserMap).call(t)).find((t=>t._audioSSRC===e));n&&AI.firstRemoteFrame(this.store.sessionId,cI.FIRST_AUDIO_RECEIVED,lI.FIRST_AUDIO_RECEIVED,{peer:n._uintid,subscribeElapse:YM.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId})},e.onFirstVideoDecoded=(e,t,n)=>{this.reportVideoFirstFrameDecoded(e,t,n)},e.onFirstVideoReceived=e=>{var t;const n=Array.from(rh(t=this.remoteUserMap).call(t)).find((t=>t._videoSSRC===e));n&&AI.firstRemoteFrame(this.store.sessionId,cI.FIRST_VIDEO_RECEIVED,lI.FIRST_VIDEO_RECEIVED,{peer:n._uintid,subscribeElapse:YM.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId})},e.onSelectedLocalCandidateChanged=(e,t)=>{const n="relay"===e.candidateType,r="relay"===t.candidateType;"unknown"!==t.candidateType&&n===r||this.emit(ZR.ConnectionTypeChange,n),oI.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedLocalCandidateChanged(").concat(JSON.stringify(HO(t))," -> ").concat(JSON.stringify(HO(e)),")"))},e.onSelectedRemoteCandidateChanged=(e,t)=>{oI.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedRemoteCandidateChanged(").concat(JSON.stringify(HO(t))," -> ").concat(JSON.stringify(HO(e)),")"))},e.onFirstVideoDecodedTimeout=e=>{this.reportVideoFirstFrameDecoded(e,void 0,void 0,!0)},e.onLocalCandidate=t=>{this.emit(ZR.LocalCandidate,{candidate:t,direction:e.direction})}}unbindConnectionEvents(e){e.onConnectionStateChange=void 0,e.onICEConnectionStateChange=void 0,e.onICETransportStateChange=void 0,e.onDTLSTransportStateChange=void 0,e.onDTLSTransportError=void 0,e.onFirstAudioDecoded=void 0,e.onFirstAudioReceived=void 0,e.onFirstVideoDecoded=void 0,e.onFirstVideoReceived=void 0,e.onSelectedLocalCandidateChanged=void 0,e.onSelectedRemoteCandidateChanged=void 0,e.onFirstVideoDecodedTimeout=void 0,e.onLocalCandidate=void 0}async handleDisconnect(e){const t=e===vR.SEND_ONLY?this.sendConnection:this.recvConnection;t&&!t.isInRestartIce&&(t.isInRestartIce=!0,oI.debug("[".concat(this.store.clientId,"] [P2PChannel-").concat(t.name,"] start use restartICE")),e===vR.SEND_ONLY?this.restartICE(e):$w(this,ZR.RequestP2PRestartICE,{direction:vR.SEND_ONLY}))}filterTobeMutedTracks(e){const t=[];if(-1===this.getAllTracks().indexOf(e))return t;const n=this.localTrackMap.get(JR.LocalAudioTrack);if(e instanceof rB&&(null==n?void 0:n.track)instanceof aB)return n.track.isActive||t.push([JR.LocalAudioTrack,n]),t;const r=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:n}]=t;return e===n}));if(r&&(t.push(r),r[0]===JR.LocalVideoTrack)){const e=this.localTrackMap.get(JR.LocalVideoLowTrack);e&&t.push([JR.LocalVideoLowTrack,e])}return t}filterTobeUnmutedTracks(e){const t=[],n=this.localTrackMap.get(JR.LocalAudioTrack);if(e instanceof rB&&(null==n?void 0:n.track)instanceof aB)return n.track.isActive&&t.push([JR.LocalAudioTrack,n]),t;const r=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:n}]=t;return e===n}));if(r)if(r[0]===JR.LocalVideoTrack){t.push(r);const e=this.localTrackMap.get(JR.LocalVideoLowTrack);e&&t.push([JR.LocalVideoLowTrack,e])}else t.push(r);return t}createMuteMessage(e){return e.map((e=>{var t;let n,[r,{track:o,ssrcs:i,id:a}]=e;switch(r){case JR.LocalAudioTrack:n=MR.Audio;break;case JR.LocalVideoTrack:n=Or(t=o._hints).call(t,tD.SCREEN_TRACK)?MR.Screen:MR.High;break;case JR.LocalVideoLowTrack:n=MR.Low}return{stream_type:n,ssrcs:i,mid:a}}))}createUnmuteMessage(e){return e.map((e=>{var t;let n,[r,{track:o,ssrcs:i,id:a}]=e;switch(r){case JR.LocalAudioTrack:n=MR.Audio;break;case JR.LocalVideoTrack:n=Or(t=o._hints).call(t,tD.SCREEN_TRACK)?MR.Screen:MR.High;break;case JR.LocalVideoLowTrack:n=MR.Low}return{stream_type:n,ssrcs:i,mid:a}}))}filterTobeUnSubscribedTracks(e,t){const n=[],r=this.remoteUserMap.get(e);if(!r)return n;if(t){const o=r.get(t);if(!o)return n;n.push([e,{kind:t,id:o}])}else Array.from(r.entries()).forEach((t=>{let[r,o]=t;n.push([e,{kind:r,id:o}])}));return n}createUnsubscribeMessage(e){const t=[];return e.forEach((e=>{let[n,{kind:r,id:o}]=e;switch(r){case qR.VIDEO:return void(n._videoSSRC&&t.push({stream_type:qR.VIDEO,ssrcId:n._videoSSRC}));case qR.AUDIO:return void(n._audioSSRC&&t.push({stream_type:qR.AUDIO,ssrcId:n._audioSSRC}))}})),t}withdrawRemoteTracks(e){e.forEach((e=>{let[t,{kind:n}]=e;const r=this.remoteUserMap.get(t);r&&(r.delete(n),0===Array.from(r.entries()).length&&this.remoteUserMap.delete(t))}))}async updateBitrateLimit(e){const t=this.localTrackMap.get(JR.LocalVideoTrack),n=this.localTrackMap.get(JR.LocalVideoLowTrack);t&&await t.track.setBitrateLimit(e.uplink),n&&e.low_stream_uplink&&await n.track.setBitrateLimit({max_bitrate:e.low_stream_uplink.bitrate,min_bitrate:e.low_stream_uplink.bitrate||0})}isP2PDisconnected(){if(this.sendConnection&&this.recvConnection){const e=this.sendConnection.peerConnectionState,t=this.recvConnection.peerConnectionState;return"connected"!==e&&"connected"!==t}return!0}async tryToUnmuteAudio(e){for(let t=0;t<e.length;t++)if(e[t]instanceof rB){const n=this.filterTobeUnmutedTracks(e[t]);if(0===n.length)continue;const r=this.createUnmuteMessage(n);return void(await Vw(this,ZR.RequestUnmuteLocal,r))}}bindStatsUploaderEvents(){this.statsUploader.requestStats=e=>this.getStats(e),this.statsUploader.requestLocalMedia=()=>Array.from(this.localTrackMap.entries()).filter((e=>{let[,{ssrcs:t}]=e;return!!t})),this.statsUploader.requestRemoteMedia=()=>Array.from(this.remoteUserMap.entries()),this.statsUploader.requestVideoIsReady=e=>{var t;return!(null===(t=this.recvConnection)||void 0===t||!t.getRemoteVideoIsReady(e))},this.statsUploader.requestUpload=(e,t)=>this.emit(ZR.RequestUpload,e,t),this.statsUploader.requestUploadStats=e=>this.emit(ZR.RequestUploadStats,e),this.statsUploader.requestAllTracks=()=>this.getAllTracks()}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}async requestReconnect(){this.dtlsFailedCount+=1,await iT(yT(this.dtlsFailedCount,vT)),this.emit(ZR.RequestReconnect)}async reconnectP2P(){}canPublishLowStream(){return this.localTrackMap.has(JR.LocalVideoTrack)||this.pendingLocalTracks.some((e=>e instanceof KB))}throwIfTrackTypeNotMatch(e){if(e.filter((e=>e instanceof KB)).length>1)throw new uw(lw.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(e.filter((e=>e instanceof rB)).length>1&&(e.some((e=>e instanceof rB&&e._bypassWebAudio))||!UP().webAudioMediaStreamDest))throw new uw(lw.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");for(const t of e){if(t instanceof KB&&this.pendingLocalTracks.some((e=>e instanceof KB)))throw new uw(lw.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(t instanceof rB&&this.pendingLocalTracks.some((e=>e instanceof rB))&&(!UP().webAudioMediaStreamDest||t._bypassWebAudio||this.pendingLocalTracks.some((e=>e instanceof rB&&e._bypassWebAudio))))throw new uw(lw.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}}getLowVideoTrack(e,t){const n=!xT("DISABLE_DUAL_STREAM_USE_ENCODING")&&UP().supportDualStreamEncoding,r=EF(EF({},{width:160,height:120,framerate:15,bitrate:50}),t);let o;o=n?e._mediaStreamTrack.clone():xx(e,r);const i=aT(8,"track-low-"),a=new KB(o,EF(EF({},n&&{scaleResolutionDownBy:VO(r,e)}),{},{frameRate:r.framerate,bitrateMax:r.bitrate,bitrateMin:r.bitrate}),void 0,void 0,i);return a.on(iD.TRANSCEIVER_UPDATED,(t=>{e._updateRtpTransceiver(t,nD.LOW_STREAM)})),a._hints.push(tD.LOW_STREAM),e.addListener(eD.NEED_CLOSE,(()=>{a.close()})),a}async globalLock(){return this.recvMutex.lock("From P2PChannel2.globalLock")}reportVideoFirstFrameDecoded(e,t,n,r){var o;const i=Array.from(rh(o=this.remoteUserMap).call(o)).find((t=>t._videoSSRC===e));if(i){r||this.store.subscribe(i.uid,"video",void 0,void 0,void 0,void 0,Date.now());const o=this.store.keyMetrics,a=o.subscribe.find((e=>e.userId===i.uid&&"video"===e.type));AI.firstRemoteVideoDecode(this.store.sessionId,cI.FIRST_VIDEO_DECODE,lI.FIRST_VIDEO_DECODE,{peer:i._uintid,videowidth:t,videoheight:n,subscribeElapse:YM.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId,apEnd:o.requestAPEnd||0,apStart:o.requestAPStart||0,joinGwEnd:o.joinGatewayEnd||0,joinGwStart:o.joinGatewayStart||0,pcEnd:o.peerConnectionEnd||0,pcStart:o.peerConnectionStart||0,subscriberEnd:(null==a?void 0:a.subscribeEnd)||0,subscriberStart:(null==a?void 0:a.subscribeStart)||0,videoAddNotify:(null==a?void 0:a.streamAdded)||0,state:r?1:0})}}async remoteMediaSsrcChanged(e,t,n){if(!this.recvConnection)return!1;const r=this.remoteUserMap.get(e);if(!r)return!1;const o=r.get(t);if(!o)return!1;const i=await this.recvConnection.getRemoteSSRC(o);return void 0!==i&&i!==n}isPreSubScribe(e){return!1}async publishDataChannel(e){throw new uw(lw.NOT_SUPPORTED)}async unpublishDataChannel(e){throw new uw(lw.NOT_SUPPORTED)}async subscribeDataChannel(e,t){throw new uw(lw.NOT_SUPPORTED)}async unsubscribeDataChannel(e,t){throw new uw(lw.NOT_SUPPORTED)}hasPendingRemoteDataChannel(e,t){throw new uw(lw.NOT_SUPPORTED)}setPendingRemoteDataChannel(e,t){throw new uw(lw.NOT_SUPPORTED)}async preConnect(e){throw new uw(lw.NOT_SUPPORTED)}getEstablishParams(){throw new uw(lw.NOT_SUPPORTED)}async reSubscribe(e){throw new uw(lw.NOT_SUPPORTED)}async updateVideoStreamParameter(e,t){throw new uw(lw.NOT_SUPPORTED)}unbindRtpTransceiver(){0!==this.localTrackMap.size&&Array.from(this.localTrackMap.entries()).forEach((e=>{let[t,{track:n}]=e;t===JR.LocalVideoLowTrack?n._updateRtpTransceiver(void 0,nD.LOW_STREAM):n._updateRtpTransceiver(void 0)}))}}).prototype,"p2pConnect",[aF],Object.getOwnPropertyDescriptor(mF.prototype,"p2pConnect"),mF.prototype),sR(mF.prototype,"unpublish",[sF],Object.getOwnPropertyDescriptor(mF.prototype,"unpublish"),mF.prototype),sR(mF.prototype,"unpublishLowStream",[cF],Object.getOwnPropertyDescriptor(mF.prototype,"unpublishLowStream"),mF.prototype),sR(mF.prototype,"subscribe",[lF],Object.getOwnPropertyDescriptor(mF.prototype,"subscribe"),mF.prototype),sR(mF.prototype,"mockSubscribe",[uF],Object.getOwnPropertyDescriptor(mF.prototype,"mockSubscribe"),mF.prototype),sR(mF.prototype,"unsubscribe",[dF],Object.getOwnPropertyDescriptor(mF.prototype,"unsubscribe"),mF.prototype),sR(mF.prototype,"muteRemote",[AF],Object.getOwnPropertyDescriptor(mF.prototype,"muteRemote"),mF.prototype),sR(mF.prototype,"unmuteRemote",[pF],Object.getOwnPropertyDescriptor(mF.prototype,"unmuteRemote"),mF.prototype),sR(mF.prototype,"hasRemoteMediaWithLock",[hF],Object.getOwnPropertyDescriptor(mF.prototype,"hasRemoteMediaWithLock"),mF.prototype),sR(mF.prototype,"disconnectForReconnect",[fF],Object.getOwnPropertyDescriptor(mF.prototype,"disconnectForReconnect"),mF.prototype),sR(mF.prototype,"remoteMediaSsrcChanged",[gF],Object.getOwnPropertyDescriptor(mF.prototype,"remoteMediaSsrcChanged"),mF.prototype),mF);function yF(e){return function(t,n,r){const o=t[n];if("function"!=typeof o)throw new Error("Cannot use mutex on object property.");return r.value=async function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];switch(e){case nF.SEND_ONLY:{const e=await this.sendMutex.lock("From P2PChannel2.".concat(n));try{return await o.apply(this,r)}finally{e()}}case nF.RECEIVE_ONLY:{const e=await this.recvMutex.lock("From P2PChannel2.".concat(n));try{return await o.apply(this,r)}finally{e()}}default:{const e=await this.sendMutex.lock("From P2PChannel2.".concat(n)),t=await this.recvMutex.lock("From P2PChannel2.".concat(n));try{return await o.apply(this,r)}finally{e(),t()}}}},r}}function bF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function CF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bF(Object(n),!0).forEach((function(t){Ov(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class SF{constructor(e){Ov(this,"store",void 0),Ov(this,"onStatsException",void 0),Ov(this,"onUploadPublishDuration",void 0),Ov(this,"onStatsChanged",void 0),Ov(this,"localStats",new Map),Ov(this,"remoteStats",new Map),Ov(this,"updateStatsInterval",void 0),Ov(this,"trafficStats",void 0),Ov(this,"trafficStatsPeerList",[]),Ov(this,"uplinkStats",void 0),Ov(this,"exceptionMonitor",void 0),Ov(this,"p2pChannel",void 0),Ov(this,"scalabilityMode",cR.L1T1),Ov(this,"updateStats",(()=>{this.p2pChannel&&(this.updateRemoteStats(this.p2pChannel),this.updateLocalStats(this.p2pChannel))})),this.store=e,this.exceptionMonitor=new qM,this.exceptionMonitor.on("exception",((e,t,n)=>{this.onStatsException&&this.onStatsException(e,t,n)}))}startUpdateStats(){this.updateStatsInterval||(this.updateStatsInterval=window.setInterval(this.updateStats,1e3))}stopUpdateStats(){this.updateStatsInterval&&(window.clearInterval(this.updateStatsInterval),this.updateStatsInterval=void 0)}reset(){this.localStats=new Map,this.remoteStats=new Map,this.trafficStats=void 0,this.trafficStatsPeerList=[],this.uplinkStats=void 0}getLocalAudioTrackStats(){return this.localStats.get(JR.LocalAudioTrack)||CF({},uD)}getLocalVideoTrackStats(){return this.localStats.get(JR.LocalVideoTrack)||CF({},dD)}getRemoteAudioTrackStats(e){const t=(e,t)=>{if(!this.trafficStats)return t;const n=this.trafficStats.peer_delay.find((t=>t.peer_uid===e));return n&&(t.publishDuration=n.B_ppad+(Date.now()-this.trafficStats.timestamp)),t},n={};if(e){var r;const o=null===(r=this.remoteStats.get(e))||void 0===r?void 0:r.audioStats;o&&(n[e]=t(e,o))}else Array.from(this.remoteStats.entries()).forEach((e=>{let[r,{audioStats:o}]=e;o&&(n[r]=t(r,o))}));return n}getRemoteNetworkQualityStats(e){const t={};if(e){var n;const r=null===(n=this.remoteStats.get(e))||void 0===n?void 0:n.networkStats;r&&(t[e]=r)}else Array.from(this.remoteStats.entries()).forEach((e=>{let[n,{networkStats:r}]=e;r&&(t[n]=r)}));return t}getRemoteVideoTrackStats(e){const t=(e,t)=>{if(!this.trafficStats)return t;const n=this.trafficStats.peer_delay.find((t=>t.peer_uid===e));return n&&(t.publishDuration=n.B_ppvd+(Date.now()-this.trafficStats.timestamp)),t},n={};if(e){var r;const o=null===(r=this.remoteStats.get(e))||void 0===r?void 0:r.videoStats;o&&(n[e]=t(e,o))}else Array.from(this.remoteStats.entries()).forEach((e=>{let[r,{videoStats:o}]=e;o&&(n[r]=t(r,o))}));return n}getRTCStats(){let e=0,t=0,n=0,r=0;const o=this.localStats.get(JR.LocalAudioTrack);o&&(e+=o.sendBytes,t+=o.sendBitrate);const i=this.localStats.get(JR.LocalVideoTrack);i&&(e+=i.sendBytes,t+=i.sendBitrate);const a=this.localStats.get(JR.LocalVideoLowTrack);a&&(e+=a.sendBytes,t+=a.sendBitrate),this.remoteStats.forEach((e=>{let{audioStats:t,videoStats:o}=e;t&&(n+=t.receiveBytes,r+=t.receiveBitrate),o&&(n+=o.receiveBytes,r+=o.receiveBitrate)}));let s=1;return this.trafficStats&&(s+=this.trafficStats.peer_delay.length),{Duration:0,UserCount:s,SendBitrate:t,SendBytes:e,RecvBytes:n,RecvBitrate:r,OutgoingAvailableBandwidth:this.uplinkStats?this.uplinkStats.B_uab/1e3:0,RTT:this.trafficStats?2*this.trafficStats.B_acd:0}}addLocalStats(e){this.localStats.set(e,void 0)}removeLocalStats(e){e?this.localStats.delete(e):this.localStats.clear()}addRemoteStats(e){this.remoteStats.set(e,{})}removeRemoteStats(e){e?this.remoteStats.delete(e):this.remoteStats.clear()}addP2PChannel(e){this.p2pChannel=e}updateTrafficStats(e){e.peer_delay=e.peer_delay.filter((e=>void 0!==e.B_ppad||void 0!==e.B_ppvd)),e.peer_delay.filter((e=>-1===this.trafficStatsPeerList.indexOf(e.peer_uid))).forEach((e=>{var t;const n=null===(t=this.p2pChannel)||void 0===t?void 0:t.getRemoteMedia(e.peer_uid),r=null!=n&&n.videoSSRC?YM.measureFromSubscribeStart(this.store.clientId,n.videoSSRC):0,o=null!=n&&n.audioSSRC?YM.measureFromSubscribeStart(this.store.clientId,n.audioSSRC):0;void 0!==e.B_ppad&&void 0!==e.B_ppvd&&(this.onUploadPublishDuration&&this.onUploadPublishDuration(e.peer_uid,e.B_ppad,e.B_ppvd,r>o?r:o),this.trafficStatsPeerList.push(e.peer_uid))})),this.trafficStats=e}updateUplinkStats(e){this.uplinkStats&&this.uplinkStats.B_fir!==e.B_fir&&oI.debug("[".concat(this.store.clientId,"]: Period fir changes to ").concat(e.B_fir)),this.uplinkStats=e}static isRemoteVideoFreeze(e,t,n){if(!e)return!1;const r=!!n&&t.framesDecodeFreezeTime>n.framesDecodeFreezeTime,o=!n||t.framesDecodeCount>n.framesDecodeCount;return r||!o}static isRemoteAudioFreeze(e){return!!e&&e._isFreeze()}isLocalVideoFreeze(e){return!(!e.inputFrame||!e.sentFrame)&&e.inputFrame.frameRate>5&&e.sentFrame.frameRate<3}updateLocalStats(e){Array.from(this.localStats.entries()).forEach((t=>{let[n,r]=t;switch(n){case JR.LocalVideoTrack:case JR.LocalVideoLowTrack:{const t=r,i=CF({},dD),a=e.getStats(),s=e.getLocalMedia(n);if(a){const n=a.videoSend.find((e=>e.ssrc===(null==s?void 0:s.ssrcs[0].ssrcId)));if(n){const r=e.getLocalVideoSize(),o=e.getEncoderConfig(JR.LocalVideoTrack);"H264"!==n.codec&&"H265"!==n.codec&&"VP8"!==n.codec&&"VP9"!==n.codec&&"AV1X"!==n.codec&&"AV1"!==n.codec||(i.codecType=n.codec),i.sendBytes=n.bytes,i.sendBitrate=t?8*Math.max(0,i.sendBytes-t.sendBytes):0,n.inputFrame?(i.captureFrameRate=n.inputFrame.frameRate,i.captureResolutionHeight=n.inputFrame.height,i.captureResolutionWidth=n.inputFrame.width):r&&(i.captureResolutionWidth=r.width,i.captureResolutionHeight=r.height),n.sentFrame?(i.sendFrameRate=n.sentFrame.frameRate,i.sendResolutionHeight=n.sentFrame.height,i.sendResolutionWidth=n.sentFrame.width):r&&(i.sendResolutionWidth=r.width,i.sendResolutionHeight=r.height),n.avgEncodeMs&&(i.encodeDelay=n.avgEncodeMs),o&&o.bitrateMax&&(i.targetSendBitrate=1e3*o.bitrateMax),i.sendPackets=n.packets,i.sendPacketsLost=n.packetsLost,i.sendJitterMs=n.jitterMs,i.sendRttMs=n.rttMs,i.totalDuration=t?t.totalDuration+1:1,i.totalFreezeTime=t?t.totalFreezeTime:0,this.isLocalVideoFreeze(n)&&(i.totalFreezeTime+=1),n.scalabilityMode&&this.scalabilityMode!==n.scalabilityMode&&(oI.debug("[".concat(this.store.clientId,"]: The scalabilityMode of the video sending stream is ").concat(n.scalabilityMode)),this.scalabilityMode=n.scalabilityMode)}this.trafficStats&&(i.currentPacketLossRate=(this.trafficStats.B_pvlr4||0)/100)}var o;this.localStats.set(n,i),((null==t?void 0:t.sendResolutionWidth)!==i.sendResolutionWidth||(null==t?void 0:t.sendResolutionHeight)!==i.sendResolutionHeight)&&(null===(o=this.onStatsChanged)||void 0===o||o.call(this,"resolution",{width:i.sendResolutionWidth,height:i.sendResolutionHeight})),i&&s&&this.exceptionMonitor.setLocalVideoStats(this.store.uid,s.track,i);break}case JR.LocalAudioTrack:{const t=r,o=CF({},uD),i=e.getStats(),a=e.getLocalMedia(n);if(i){const n=i.audioSend.find((e=>e.ssrc===(null==a?void 0:a.ssrcs[0].ssrcId)));if(n){if("opus"!==n.codec&&"aac"!==n.codec&&"PCMU"!==n.codec&&"PCMA"!==n.codec&&"G722"!==n.codec||(o.codecType=n.codec),n.inputLevel)o.sendVolumeLevel=Math.round(32767*n.inputLevel);else{const t=e.getLocalAudioVolume();t&&(o.sendVolumeLevel=Math.round(32767*t))}o.sendBytes=n.bytes,o.sendPackets=n.packets,o.sendPacketsLost=n.packetsLost,o.sendJitterMs=n.jitterMs,o.sendRttMs=n.rttMs,o.sendBitrate=t?8*Math.max(0,o.sendBytes-t.sendBytes):0}}this.trafficStats&&(o.currentPacketLossRate=(this.trafficStats.B_palr4||0)/100),this.localStats.set(JR.LocalAudioTrack,o),o&&a&&this.exceptionMonitor.setLocalAudioStats(this.store.uid,a.track,o);break}}}))}updateRemoteStats(e){Array.from(this.remoteStats.entries()).forEach((t=>{var n,r;let[o,{videoStats:i,audioStats:a,videoPcStats:s}]=t;const c=a,l=i,u=s,d=CF({},AD),A=CF({},hD),p=CF({},pD),{audioTrack:h,videoTrack:f,audioSSRC:g,videoSSRC:m}=e.getRemoteMedia(o);let _;_=e instanceof vF?e.getStats(!0):e.getStats();const E=null===(n=_)||void 0===n?void 0:n.audioRecv.find((e=>e.ssrc===g)),v=null===(r=_)||void 0===r?void 0:r.videoRecv.find((e=>e.ssrc===m)),y=this.trafficStats&&this.trafficStats.peer_delay.find((e=>e.peer_uid===o));if(E&&("opus"!==E.codec&&"aac"!==E.codec&&"PCMU"!==E.codec&&"PCMA"!==E.codec&&"G722"!==E.codec||(d.codecType=E.codec),E.outputLevel?d.receiveLevel=Math.round(32767*E.outputLevel):h&&(d.receiveLevel=Math.round(32767*h.getVolumeLevel())),d.receiveBytes=E.bytes,d.receivePackets=E.packets,d.receivePacketsLost=E.packetsLost,d.receivePacketsDiscarded=E.packetsDiscarded,d.packetLossRate=d.receivePacketsLost/(d.receivePackets+d.receivePacketsLost),d.receiveBitrate=c?8*Math.max(0,d.receiveBytes-c.receiveBytes):0,d.totalDuration=c?c.totalDuration+1:1,d.totalFreezeTime=c?c.totalFreezeTime:0,d.freezeRate=d.totalFreezeTime/d.totalDuration,d.receiveDelay=E.jitterBufferMs,d.totalDuration>10&&SF.isRemoteAudioFreeze(h)&&(d.totalFreezeTime+=1)),v){"H264"!==v.codec&&"H265"!==v.codec&&"VP8"!==v.codec&&"VP9"!==v.codec&&"AV1X"!==v.codec&&"AV1"!==v.codec||(A.codecType=v.codec),A.receiveBytes=v.bytes,A.receiveBitrate=l?8*Math.max(0,A.receiveBytes-l.receiveBytes):0,A.decodeFrameRate=v.decodeFrameRate<0?0:v.decodeFrameRate,A.renderFrameRate=v.decodeFrameRate<0?0:v.decodeFrameRate,v.outputFrame&&(A.renderFrameRate=v.outputFrame.frameRate),v.receivedFrame?(A.receiveFrameRate=v.receivedFrame.frameRate,A.receiveResolutionHeight=v.receivedFrame.height,A.receiveResolutionWidth=v.receivedFrame.width):f&&(A.receiveResolutionHeight=f._videoHeight||0,A.receiveResolutionWidth=f._videoWidth||0),void 0!==v.framesRateFirefox&&(A.receiveFrameRate=Math.round(v.framesRateFirefox)),A.receivePackets=v.packets,A.receivePacketsLost=v.packetsLost,A.packetLossRate=A.receivePacketsLost/(A.receivePackets+A.receivePacketsLost),A.totalDuration=l?l.totalDuration+1:1,A.totalFreezeTime=l?l.totalFreezeTime:0,A.receiveDelay=v.jitterBufferMs||0;const t=!!m&&e.getRemoteVideoIsReady(m);f&&t&&SF.isRemoteVideoFreeze(f,v,u)&&(A.totalFreezeTime+=1),A.freezeRate=A.totalFreezeTime/A.totalDuration}y&&(d.end2EndDelay=y.B_ad,A.end2EndDelay=y.B_vd,d.transportDelay=y.B_ed,A.transportDelay=y.B_ed,d.currentPacketLossRate=y.B_ealr4/100,A.currentPacketLossRate=y.B_evlr4/100,p.uplinkNetworkQuality=y.B_punq?y.B_punq:0,p.downlinkNetworkQuality=y.B_pdnq?y.B_pdnq:0),this.remoteStats.set(o,{audioStats:d,videoStats:A,videoPcStats:v,networkStats:p}),h&&this.exceptionMonitor.setRemoteAudioStats(h,d),f&&this.exceptionMonitor.setRemoteVideoStats(f,A)}))}}class wF{constructor(){Ov(this,"destChannelMediaInfos",new Map),Ov(this,"srcChannelMediaInfo",void 0)}setSrcChannelInfo(e){PR(e),this.srcChannelMediaInfo=e}addDestChannelInfo(e){PR(e),this.destChannelMediaInfos.set(e.channelName,e)}removeDestChannelInfo(e){bR(e),this.destChannelMediaInfos.delete(e)}getSrcChannelMediaInfo(){return this.srcChannelMediaInfo}getDestChannelMediaInfo(){return this.destChannelMediaInfos}}function TF(e){if(!(e instanceof wF))return new pI(lw.INVALID_PARAMS,"Config should be instance of [ChannelMediaRelayConfiguration]").throw();const t=e.getSrcChannelMediaInfo(),n=e.getDestChannelMediaInfo();return t?0===n.size?new pI(lw.INVALID_PARAMS,"destChannelMediaInfo should not be empty").throw():void 0:new pI(lw.INVALID_PARAMS,"srcChannelMediaInfo should not be empty").throw()}function IF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function RF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?IF(Object(n),!0).forEach((function(t){Ov(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var OF;function NF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?NF(Object(n),!0).forEach((function(t){Ov(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let PF=(sR((OF=class e extends WR{get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get localCodecs(){return[...new Set(this.localCapabilities&&this.localCapabilities.videoCodecs.map((e=>e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"")).filter((e=>{var t;return Or(t=Object.keys(HT)).call(t,e)})))]}constructor(t,n){super(t,n),Ov(this,"store",void 0),Ov(this,"peerConnection",void 0),Ov(this,"remoteSDP",void 0),Ov(this,"initialOffer",void 0),Ov(this,"statsFilter",void 0),Ov(this,"useRTX",!1),Ov(this,"localCapabilities",void 0),Ov(this,"localCandidateCount",0),Ov(this,"allCandidatesReceived",!1),Ov(this,"establishPromise",void 0),Ov(this,"mutex",void 0),this.store=n,this.mutex=new _T("P2PConnection-mutex",n.clientId),this.peerConnection=new RTCPeerConnection(e.resolvePCConfiguration(t),{optional:[{googDscp:!0}]}),this.statsFilter=Nx(this.peerConnection,xT("STATS_UPDATE_INTERVAL"),void 0,$S()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}async establish(){try{const e=await this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});if(!e.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const t=LU(e.sdp),n=DU(e.sdp,{filterRTX:!this.useRTX,filterVideoFec:xT("FILTER_VIDEO_FEC"),filterAudioFec:xT("FILTER_AUDIO_FEC"),filterAudioCodec:["opus"]});return this.localCapabilities=n,this.initialOffer=e,kF(kF({},t),{},{rtpCapabilities:{send:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},recv:{audioCodecs:[],audioExtensions:[],videoCodecs:[],videoExtensions:[]},sendrecv:n},offerSDP:e.sdp})}catch(e){throw new uw(lw.GET_LOCAL_CONNECTION_PARAMS_FAILED,e.toString())}}async updateRemoteConnect(){}async connect(e){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");this.remoteSDP=new class{constructor(e){Ov(this,"sessionDesc",void 0),Ov(this,"localCapabilities",void 0),Ov(this,"rtpCapabilities",void 0),Ov(this,"candidates",void 0),Ov(this,"iceParameters",void 0),Ov(this,"dtlsParameters",void 0),Ov(this,"setup",void 0),Ov(this,"currentMidIndex",void 0),Ov(this,"cname",void 0),e=qw(e);const{iceParameters:t,dtlsParameters:n,candidates:r,rtpCapabilities:o,setup:i,localCapabilities:a,sdkCodec:s,cname:c}=e,l=SU.parse("v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE audio video\na=msid-semantic: WMS\na=ice-lite\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendrecv\na=rtcp-mux\na=rtcp-rsize\na=mid:audio\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendrecv\na=rtcp-mux\na=rtcp-rsize\na=mid:video\n");this.rtpCapabilities=o,this.candidates=r,this.iceParameters=t,this.dtlsParameters=n,this.setup=i,this.localCapabilities=a,this.cname=c;for(let u=0;u<l.mediaDescriptions.length;u++){const e=l.mediaDescriptions[u];if(e.attributes.iceUfrag=t.iceUfrag,e.attributes.icePwd=t.icePwd,e.attributes.fingerprints=n.fingerprints,e.attributes.candidates=r,e.attributes.setup=i,"video"===e.media.mediaType){e.media.fmts=o.videoCodecs.map((e=>e.payloadType.toString(10)));let t=o.videoCodecs.filter((e=>{var t,n;return null===(t=e.rtpMap)||void 0===t?void 0:Or(n=t.encodingName.toLowerCase()).call(n,s)}));0===t.length&&(t=o.videoCodecs),e.attributes.payloads=t,e.attributes.extmaps=o.videoExtensions}"audio"===e.media.mediaType&&(e.media.fmts=o.audioCodecs.map((e=>e.payloadType.toString(10))),e.attributes.payloads=o.audioCodecs,e.attributes.extmaps=o.audioExtensions),l.mediaDescriptions[u]=this.mungMediaDesc(e)}this.sessionDesc=l,this.currentMidIndex=l.mediaDescriptions.length-1}toString(){return SU.print(this.sessionDesc)}send(e,t,n){const{ssrcs:r,ssrcGroups:o}=xU(t,this.cname),i=this.sessionDesc.mediaDescriptions.find((t=>e===qR.VIDEO?"video"===t.media.mediaType:"audio"===t.media.mediaType)),a=r[0].attributes.label,s=r[0].attributes.mslabel;return i.attributes.ssrcs=i.attributes.ssrcs.concat(r),i.attributes.ssrcGroups=i.attributes.ssrcGroups.concat(o),{id:a,mslabel:s}}batchSend(e){return e.map((e=>{let{kind:t,ssrcMsg:n}=e;return this.send(t,n,void 0)}))}stopSending(e){this.sessionDesc.mediaDescriptions.forEach((t=>{const n=[],r=[],o=[];t.attributes.ssrcs.forEach((t=>{Or(e).call(e,t.attributes.label||"")?o.push(t):n.push(t)})),t.attributes.ssrcGroups.forEach((e=>{var t;Or(t=o.map((e=>e.ssrcId))).call(t,e.ssrcIds[0])||r.push(e)})),t.attributes.ssrcs=n,t.attributes.ssrcGroups=r}))}mute(e){const t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.mute."));t.attributes.direction="inactive"}unmute(e){const t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.unmute."));t.attributes.direction="sendonly"}receive(e,t,n){e.forEach(((e,t)=>{const n=e._mediaStreamTrack,r=this.sessionDesc.mediaDescriptions.findIndex((e=>e.attributes.mid===n.kind)),o=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[r],e);this.sessionDesc.mediaDescriptions[r]=o}))}stopReceiving(e){}updateCandidates(e){e===zR.TCP?this.candidates.forEach((e=>{-1===this.candidates.findIndex((t=>"tcp"===t.transport&&t.connectionAddress===e.connectionAddress&&t.port===e.port))&&this.candidates.push(RF(RF({},e),{},{foundation:"tcpcandidate",priority:Number(e.priority)-1+"",transport:"tcp",port:Number(e.port)+90+""}))})):this.candidates=this.candidates.filter((e=>"tcp"!==e.transport));for(const t of this.sessionDesc.mediaDescriptions)t.attributes.candidates=this.candidates}restartICE(e){e=qw(e),this.iceParameters=e,this.sessionDesc.mediaDescriptions.forEach((t=>{t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd}))}predictReceivingMids(e){const t=[];for(let n=0;n<e;n++)t.push((this.currentMidIndex+n+1).toString(10));return t}mungRecvMediaDsec(e,t){const n=qw(e);return FU(n,t),VU(n,t),n}updateRecvMedia(e,t){const n=this.sessionDesc.mediaDescriptions.findIndex((t=>t.attributes.mid===e));if(-1!==n){const e=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[n],t);this.sessionDesc.mediaDescriptions[n]=e}}bumpMid(e){this.currentMidIndex+=e}updateTrackLabel(e,t,n){const r=this.sessionDesc.mediaDescriptions.find((t=>e===qR.VIDEO?"video"===t.attributes.mid:"audio"===t.attributes.mid));if(r){const e=r.attributes.ssrcs.find((e=>e.attributes.label===t));var o;e&&(e.attributes.label=n,null===(o=e.attributes.msid)||void 0===o||o.replace(t,n))}}mungMediaDesc(e){const t=qw(e);return $U(t),function(e){const t=e.attributes.extmaps.find((e=>NU(e.extensionName)));t&&e.attributes.extmaps.splice(e.attributes.extmaps.indexOf(t),1),e.attributes.payloads.forEach((e=>{const t=e.rtcpFeedbacks.findIndex((e=>"transport-cc"===e.type));-1!==t&&e.rtcpFeedbacks.splice(t,1)}))}(t),t}getSSRC(e){for(const t of this.sessionDesc.mediaDescriptions)for(const n of t.attributes.ssrcs)if(n.attributes.label===e)return[n]}}(kF(kF({},e),{},{rtpCapabilities:e.rtpCapabilities.send,localCapabilities:this.localCapabilities,sdkCodec:this.store.codec}));const t=this.remoteSDP.toString();await this.peerConnection.setLocalDescription(this.initialOffer),await this.peerConnection.setRemoteDescription({type:"answer",sdp:t})}catch(t){throw new uw(lw.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(t.toString()))}}async updateRemoteRTPCapabilities(e,t){throw new uw(lw.NOT_SUPPORTED,"Planb mode does not support createDataChannels.")}getPreMedia(e){}send(e,t){var n=this;return BC((function*(){const r=yield UC(n.mutex.lock());try{if(!n.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const r=e.map((e=>n.peerConnection.addTrack(e._mediaStreamTrack))),i=yield UC(n.peerConnection.createOffer()),a=SU.parse(i.sdp),s=e.map((e=>{const t=e._mediaStreamTrack,r=a.mediaDescriptions.find((e=>e.attributes.mid===t.kind));if(!r)throw new Error("Cannot extract ssrc from mediaDescription.");return function(e,t,n){const r=e.attributes.ssrcs.filter((e=>e.attributes.label===t)),o=e.attributes.ssrcGroups;if(0===r.length)throw new Error("Cannot extract ssrc from plan-b SDP.");if(o&&r.length>1){const e=o.find((e=>-1!==e.ssrcIds.indexOf(r[0].ssrcId)));return e?[{ssrcId:e.ssrcIds[0],rtx:n?e.ssrcIds[1]:void 0}]:[{ssrcId:r[0].ssrcId}]}return[{ssrcId:r[0].ssrcId}]}(r,t.id,n.useRTX)}));let c;try{c=yield s}catch(o){throw r.forEach((e=>{xS()&&e.replaceTrack(null),n.peerConnection.removeTrack(e)})),o}const l=n.mungSendOfferSDP(i.sdp,e);n.remoteSDP.receive(e,t,c);const u=n.remoteSDP.toString();return yield UC(n.peerConnection.setLocalDescription({type:"offer",sdp:l})),yield UC(n.applySendEncodings(r,e)),yield UC(n.peerConnection.setRemoteDescription({type:"answer",sdp:u})),e.map(((e,t)=>{const n=e._mediaStreamTrack.id;return{localSSRC:s[t],id:n}}))}catch(o){throw new uw(lw.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(o.toString()))}finally{r()}}))()}async stopSending(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const t=this.peerConnection.getSenders().filter((t=>{var n;return-1!==e.indexOf((null===(n=t.track)||void 0===n?void 0:n.id)||"")}));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");t.map((e=>{xS()&&e.replaceTrack(null),this.peerConnection.removeTrack(e)}));const n=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(n),this.remoteSDP.stopReceiving(e);const r=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"answer",sdp:r})}catch(t){throw new uw(lw.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(t.toString()))}}async receive(e,t,n,r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(e," before remoteSDP created."));const{id:n,mslabel:o}=this.remoteSDP.send(e,t,r),i=new MA(((t,r)=>{const i=setTimeout((()=>{r(new Error("Cannot receive track, id: ".concat(n)))}),1e4),a=r=>{const s=PS();if(("Safari"===s.name&&11===Number(s.version)||VS())&&r.track.id!==n&&r.streams[0].id===o){var c;const o=r.streams[0].getTracks()[0];return null===(c=this.remoteSDP)||void 0===c||c.updateTrackLabel(e,n,r.track.id),this.peerConnection.removeEventListener("track",a),clearTimeout(i),void t(o)}if(r.track.id===n)return this.peerConnection.removeEventListener("track",a),clearTimeout(i),void t(r.track)};this.peerConnection.addEventListener("track",a)})),a=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:a});const s=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(s),{track:await i,id:n}}catch(o){throw new uw(lw.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(o.toString()))}}async stopReceiving(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");this.remoteSDP.stopSending(e);const t=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const n=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(n)}catch(t){throw new uw(lw.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(t.toString()))}}async muteRemote(e){}async unmuteRemote(e){}async muteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const t=this.peerConnection.getSenders().filter((t=>{var n;return-1!==e.indexOf((null===(n=t.track)||void 0===n?void 0:n.id)||"")}));if(t.length!==e.length)throw new Error("sender' length doesn't match mids' length.");t.map((e=>{if(xS()&&e.track)e.track.enabled=!1;else{const t=e.getParameters();t.encodings.forEach((e=>e.active=!1)),e.setParameters(t)}}))}catch(t){throw new uw(lw.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(t.toString()))}}async unmuteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const t=this.peerConnection.getSenders().filter((t=>{var n;return-1!==e.indexOf((null===(n=t.track)||void 0===n?void 0:n.id)||"")}));if(t.length!==e.length)throw new Error("Senders' length doesn't match mids' length.");t.map((async e=>{if(xS()&&e.track)e.track.enabled=!0;else{const t=e.getParameters();t.encodings.forEach((e=>e.active=!0)),await e.setParameters(t)}}));const n=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(n);const r=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"answer",sdp:r})}catch(t){throw new uw(lw.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(t.toString()))}}restartICE(e){var t=this;return BC((function*(){const n=yield UC(t.mutex.lock("From P2PConnection.restartICE"));try{if(!t.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");if(UP().supportPCSetConfiguration){const n=t.peerConnection.getConfiguration(),r=e===zR.RELAY?"relay":"all";n.iceTransportPolicy!==r&&(oI.debug("[".concat(t.store.clientId,"] restartICE change iceTransportPolicy from [").concat(n.iceTransportPolicy,"] to [").concat(r,"]")),n.iceTransportPolicy=r,t.peerConnection.setConfiguration(n))}else if(e===zR.RELAY)return;e!==zR.RELAY&&t.remoteSDP.updateCandidates(e);const n=yield UC(t.peerConnection.createOffer({iceRestart:!0}));if(!n.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const r=LU(n.sdp),{remoteIceParameters:o}=yield r.iceParameters;t.remoteSDP.restartICE(o);const i=t.remoteSDP.toString();yield UC(t.peerConnection.setLocalDescription(n)),yield UC(t.peerConnection.setRemoteDescription({type:"answer",sdp:i}))}catch(r){oI.warning("[".concat(t.store.clientId,"] restart ICE failed, abort operation"),r)}finally{n()}}))()}close(){var e;this.peerConnection.close(),null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,"closed"),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.statsFilter.destroy()}getStats(){return this.statsFilter.getStats()}getRemoteVideoIsReady(e){return this.statsFilter.getVideoIsReady(e)}async updateEncoderConfig(e,t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const e=await this.peerConnection.createOffer(),n=this.mungSendOfferSDP(e.sdp,[t]);this.remoteSDP.updateRecvMedia(t._mediaStreamTrack.kind,t);const r=this.remoteSDP.toString();await this.peerConnection.setLocalDescription({type:"offer",sdp:n}),await this.peerConnection.setRemoteDescription({type:"answer",sdp:r})}catch(n){throw new uw(lw.EXCHANGE_SDP_FAILED,n.toString())}}async updateSendParameters(e,t){const n=this.peerConnection.getSenders().filter((t=>{var n;return(null===(n=t.track)||void 0===n?void 0:n.id)===e}));1===n.length&&await this.applySendEncodings(n,[t])}setStatsRemoteVideoIsReady(e,t){this.statsFilter.setVideoIsReady2(e,t)}async replaceTrack(e,t){const n=this.peerConnection.getSenders().find((e=>{var n;return(null===(n=e.track)||void 0===n?void 0:n.id)===t}));n&&await n.replaceTrack(e._mediaStreamTrack)}createDataChannels(e,t){throw new uw(lw.NOT_SUPPORTED,"Planb mode does not support createDataChannels.")}stopDataChannels(e){throw new uw(lw.NOT_SUPPORTED,"Planb mode does not support stopDataChannels.")}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var e;null===(e=this.onICEConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var e;null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=e=>{e.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,oI.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout((()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,oI.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))}),xT("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(t){const n={iceServers:[],sdpSemantics:"plan-b"};return t.iceServers?n.iceServers=t.iceServers:t.turnServer&&"off"!==t.turnServer.mode&&(Dw(t.turnServer.servers)?n.iceServers=t.turnServer.servers:(n.iceServers&&n.iceServers.push(...e.turnServerConfigToIceServers(t.turnServer.servers)),xT("USE_TURN_SERVER_OF_GATEWAY")&&n.iceServers&&t.turnServer.serversFromGateway&&n.iceServers.push(...e.turnServerConfigToIceServers(t.turnServer.serversFromGateway)),t.turnServer.servers.concat(t.turnServer.serversFromGateway||[]).forEach((e=>{e.forceturn&&(n.iceTransportPolicy="relay")})))),n}static turnServerConfigToIceServers(e){const t=[];return e.forEach((e=>{e.security?e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turns:".concat(e.turnServerURL,":").concat(e.tcpport,"?transport=tcp")}):(e.udpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.udpport,"?transport=udp")}),e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.tcpport,"?transport=tcp")}))})),t}async updateRtpSenderEncodings(e,t){var n;if(t||(t=this.peerConnection.getSenders().find((t=>{var n;return(null===(n=t.track)||void 0===n?void 0:n.id)===e._mediaStreamTrack.id}))),!t)return oI.warn("[".concat(e.getTrackId(),"] no rtpSender found}"));if(!UP().supportSetRtpSenderParameters)return oI.warn("Browser not support set rtp-sender parameters");const r={},o={};if(e instanceof KB)switch(e._optimizationMode){case"motion":r.degradationPreference="maintain-framerate";break;case"detail":r.degradationPreference="maintain-resolution";break;default:r.degradationPreference="balanced"}if(xT("DSCP_TYPE")&&rw()){var i;const e=xT("DSCP_TYPE");Or(i=["very-low","low","medium","high"]).call(i,e)&&(o.networkPriority=e)}const a=t.getParameters(),s=null===(n=a.encodings)||void 0===n?void 0:n[0];s&&Object.assign(s,o),Object.assign(a,r),oI.debug("[".concat(e.getTrackId(),"] updateRtpSenderEncodings: ").concat(JSON.stringify(a.encodings))),await t.setParameters(a)}async applySendEncodings(e,t){try{if(!UP().supportSetRtpSenderParameters)return;if(e.length!==t.length)return;for(let n=0;n<e.length;n++){const r=e[n],o=t[n];r&&o&&await this.updateRtpSenderEncodings(o,r)}}catch(n){oI.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(e,t){const n=SU.parse(e);return t.forEach(((e,t)=>{const r=e._mediaStreamTrack,o=n.mediaDescriptions.find((e=>e.attributes.mid===r.kind));o&&FU(o,e)})),SU.print(n)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=e=>{var t;null===(t=this.onFirstAudioReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoReceived=e=>{var t;null===(t=this.onFirstVideoReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstAudioDecoded=e=>{var t;null===(t=this.onFirstAudioDecoded)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoDecoded=(e,t,n)=>{var r;null===(r=this.onFirstVideoDecoded)||void 0===r||r.call(this,e,t,n)},this.statsFilter.onSelectedLocalCandidateChanged=(e,t)=>{var n;null===(n=this.onSelectedLocalCandidateChanged)||void 0===n||n.call(this,e,t)},this.statsFilter.onSelectedRemoteCandidateChanged=(e,t)=>{var n;null===(n=this.onSelectedRemoteCandidateChanged)||void 0===n||n.call(this,e,t)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0}async batchReceive(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const t=this.remoteSDP.batchSend(e).map(((t,n)=>{let{id:r,mslabel:o}=t;const{kind:i}=e[n];return new MA(((e,t)=>{const n=setTimeout((()=>{t(new Error("Cannot receive track, id: ".concat(r)))}),1e4),a=t=>{const s=PS();if("Safari"===s.name&&11===Number(s.version)&&t.track.id!==r&&t.streams[0].id===o){var c;const o=t.streams[0].getTracks()[0];return null===(c=this.remoteSDP)||void 0===c||c.updateTrackLabel(i,r,t.track.id),this.peerConnection.removeEventListener("track",a),clearTimeout(n),void e({track:o,id:r})}if(t.track.id===r)return this.peerConnection.removeEventListener("track",a),clearTimeout(n),void e({track:t.track,id:r})};this.peerConnection.addEventListener("track",a)}))})),n=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:n});const r=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(r),await MA.all(t)}catch(t){throw new uw(lw.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(t.toString()))}}async getRemoteSSRC(e){if(!this.remoteSDP)return;const t=this.remoteSDP.getSSRC(e);return null==t?void 0:t[0].ssrcId}setConfiguration(t){if(UP().supportPCSetConfiguration){const n=e.resolvePCConfiguration(t);this.peerConnection.setConfiguration(n)}}}).prototype,"connect",[DF],Object.getOwnPropertyDescriptor(OF.prototype,"connect"),OF.prototype),sR(OF.prototype,"stopSending",[DF],Object.getOwnPropertyDescriptor(OF.prototype,"stopSending"),OF.prototype),sR(OF.prototype,"receive",[DF],Object.getOwnPropertyDescriptor(OF.prototype,"receive"),OF.prototype),sR(OF.prototype,"stopReceiving",[DF],Object.getOwnPropertyDescriptor(OF.prototype,"stopReceiving"),OF.prototype),sR(OF.prototype,"muteRemote",[DF],Object.getOwnPropertyDescriptor(OF.prototype,"muteRemote"),OF.prototype),sR(OF.prototype,"unmuteRemote",[DF],Object.getOwnPropertyDescriptor(OF.prototype,"unmuteRemote"),OF.prototype),sR(OF.prototype,"muteLocal",[DF],Object.getOwnPropertyDescriptor(OF.prototype,"muteLocal"),OF.prototype),sR(OF.prototype,"unmuteLocal",[DF],Object.getOwnPropertyDescriptor(OF.prototype,"unmuteLocal"),OF.prototype),sR(OF.prototype,"close",[DF],Object.getOwnPropertyDescriptor(OF.prototype,"close"),OF.prototype),sR(OF.prototype,"updateEncoderConfig",[DF],Object.getOwnPropertyDescriptor(OF.prototype,"updateEncoderConfig"),OF.prototype),sR(OF.prototype,"updateSendParameters",[DF],Object.getOwnPropertyDescriptor(OF.prototype,"updateSendParameters"),OF.prototype),sR(OF.prototype,"replaceTrack",[DF],Object.getOwnPropertyDescriptor(OF.prototype,"replaceTrack"),OF.prototype),sR(OF.prototype,"getRemoteSSRC",[DF],Object.getOwnPropertyDescriptor(OF.prototype,"getRemoteSSRC"),OF.prototype),OF);function DF(e,t,n){const r=e[t];if("function"!=typeof r)throw new Error("Cannot use mutex on object property.");return n.value=async function(){const e=this.mutex,n=await e.lock("Locking from P2PConnection.".concat(t));try{for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return await r.apply(this,i)}finally{n()}},n}function LF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function BF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?LF(Object(n),!0).forEach((function(t){Ov(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const UF="9",MF=4e4;class xF{get localCapabilities(){return qw(this._localCapabilities)}get rtpCapabilities(){return qw(this._rtpCapabilities)}get candidates(){return qw(this._candidates)}get iceParameters(){return qw(this._iceParameters)}get dtlsParameters(){return qw(this._dtlsParameters)}constructor(e){Ov(this,"sessionDesc",void 0),Ov(this,"_localCapabilities",void 0),Ov(this,"_rtpCapabilities",void 0),Ov(this,"_candidates",void 0),Ov(this,"_iceParameters",void 0),Ov(this,"_dtlsParameters",void 0),Ov(this,"setup",void 0),Ov(this,"currentMidIndex",void 0),Ov(this,"cname",void 0),Ov(this,"firefoxSsrcMidMap",new Map),e=qw(e);const{iceParameters:t,dtlsParameters:n,candidates:r,rtpCapabilities:o,setup:i,localCapabilities:a,cname:s}=e;this._rtpCapabilities=o,this._candidates=r,this._iceParameters=t,this._dtlsParameters=n,this._localCapabilities=a,this.setup=i,this.cname=s,this.sessionDesc=this.updateRemoteRTPCapabilities(o),this.currentMidIndex=this.sessionDesc.mediaDescriptions.length-1}preloadRemoteMedia(e){const t=this.candidates,n=this.dtlsParameters,r=this.iceParameters,o=this.rtpCapabilities.send;let i=this.sessionDesc.mediaDescriptions.length-1;for(let a=1;a<e;a++){const e=2*a+2e4,s=2*a+MF,{ssrcs:c,ssrcGroups:l}=xU([{ssrcId:e}],this.cname),{ssrcs:u,ssrcGroups:d}=xU([{ssrcId:s,rtx:xT("USE_SUB_RTX")?s+1:void 0}],this.cname);this.sessionDesc.mediaDescriptions.push({media:{mediaType:"video",port:UF,protos:["UDP","TLS","RTP","SAVPF"],fmts:o.videoCodecs.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:r.iceUfrag,icePwd:r.icePwd,unrecognized:[],candidates:t,extmaps:o.videoExtensions,fingerprints:n.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:u,ssrcGroups:d,rtcpFeedbackWildcards:[],payloads:o.videoCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(++i)}}),this.sessionDesc.mediaDescriptions.push({media:{mediaType:"audio",port:UF,protos:["UDP","TLS","RTP","SAVPF"],fmts:o.audioCodecs.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:r.iceUfrag,icePwd:r.icePwd,unrecognized:[],candidates:t,extmaps:o.audioExtensions,fingerprints:n.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:c,ssrcGroups:l,rtcpFeedbackWildcards:[],payloads:o.audioCodecs,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:"sendonly",rtcpMux:!0,rtcpRsize:!0,mid:"".concat(++i)}}),this.currentMidIndex+=2}this.updateBundleMids()}toString(){return SU.print(this.sessionDesc)}send(e,t,n,r){const{ssrcs:o,ssrcGroups:i}=xU(t,this.cname,xT("SYNC_GROUP")?n:void 0),a=this.findPreloadMediaDesc(o);if(a){if($S()&&this.firefoxSsrcMidMap.set(o[0].ssrcId,a.attributes.mid),r&&(r.twcc||r.remb)){const e=this.sessionDesc.mediaDescriptions.indexOf(a);return this.sessionDesc.mediaDescriptions[e]=this.mungSendMediaDesc(a,r),{mid:a.attributes.mid,needExchangeSDP:!0}}return{mid:a.attributes.mid,needExchangeSDP:!1}}{const t=this.findAvailableMediaIndex(e,o);let n;return-1===t||1===t&&(xS()||function(){const e=PS();return!(e.name!==RS.CHROME||!e.osVersion)&&Number(e.version)<=90}())||0===t&&xT("USE_SUB_RTX")||zS()?(n=this.createOrRecycleSendMedia(e,o,i,"sendonly",r),this.updateBundleMids()):(n=qw(this.sessionDesc.mediaDescriptions[t]),n.attributes.direction="sendonly",n.attributes.ssrcs=o,n.attributes.ssrcGroups=i,this.sessionDesc.mediaDescriptions[t]=this.mungSendMediaDesc(n,r)),$S()&&this.firefoxSsrcMidMap.set(o[0].ssrcId,n.attributes.mid),{mid:n.attributes.mid,needExchangeSDP:!0}}}sendDataChannel(){const{mediaDesc:e,needExchangeSDP:t}=this.createOrRecycleDataChannel();return this.updateBundleMids(),{mid:e.attributes.mid,needExchangeSDP:t}}batchSend(e){const t=e.map((e=>{let{kind:t,ssrcMsg:n,mslabel:r}=e;return this.send(t,n,r)})),n=[];let r=!1;return t.forEach((e=>{let{mid:t,needExchangeSDP:o}=e;o&&(r=!0),n.push(t)})),{mids:n,needExchangeSDP:r}}stopSending(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>t.attributes.mid&&-1!==e.indexOf(t.attributes.mid)));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.stopSending.");t.forEach((e=>{"0"===e.attributes.mid||$S()||zS()?e.attributes.ssrcs=[]:(e.attributes.ssrcs=[],e.attributes.direction="inactive",e.media.port="0")})),this.updateBundleMids()}mute(e){const t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.mute."));t.attributes.direction="inactive"}unmute(e){const t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("mediaDescription not found with ".concat(e," in remote SDP when calling RemoteSDP.unmute."));t.attributes.direction="sendonly"}muteRemote(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>Or(e).call(e,t.attributes.mid||"")));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach((e=>{e.attributes.direction="inactive"}))}unmuteRemote(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>Or(e).call(e,t.attributes.mid||"")));if(t.length!==e.length)throw new Error("mediaDescriptions' length doesn't match mids' length when calling RemoteSDP.muteRemote.");t.forEach((e=>{e.attributes.direction="recvonly"}))}receive(e,t,n,r){e.forEach(((e,o)=>{this.createOrRecycleRecvMedia(e,[],"recvonly",t,n,r[o])})),this.updateBundleMids()}stopReceiving(e){const t=this.sessionDesc.mediaDescriptions.filter((t=>-1!==e.indexOf(t.attributes.mid)));if(t.length!==e.length)throw new Error("MediaDescriptions' length doesn't match mids's length when calling RemoteSDP.receive.");t.forEach((e=>{e.media.port="0",e.attributes.direction="inactive"})),this.updateBundleMids()}updateRemoteRTPCapabilities(e){const t=this.sessionDesc||SU.parse("v=0\no=- 0 0 IN IP4 127.0.0.1\ns=AgoraGateway\nt=0 0\na=group:BUNDLE 0 1\na=msid-semantic: WMS\na=ice-lite\nm=video 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:0\nm=audio 9 UDP/TLS/RTP/SAVPF 0\nc=IN IP4 127.0.0.1\na=rtcp:9 IN IP4 0.0.0.0\na=sendonly\na=rtcp-mux\na=rtcp-rsize\na=mid:1\n");this._rtpCapabilities=e;const n=this.rtpCapabilities.send,r=this.localCapabilities.send;for(const o of t.mediaDescriptions){if(o.attributes.iceUfrag=this._iceParameters.iceUfrag,o.attributes.icePwd=this._iceParameters.icePwd,o.attributes.fingerprints=this._dtlsParameters.fingerprints,o.attributes.candidates=this._candidates,o.attributes.setup=this.setup,"application"===o.media.mediaType&&(o.attributes.sctpPort="5000"),"video"===o.media.mediaType)if(0===n.videoCodecs.length){const e=r.videoCodecs.filter((e=>{var t,n;return null===(t=e.rtpMap)||void 0===t?void 0:Or(n=t.encodingName.toLowerCase()).call(n,"vp8")}))||[r.videoCodecs[0]];o.media.fmts=e.map((e=>e.payloadType.toString(10))),o.attributes.payloads=e,o.attributes.extmaps=[]}else if(o.media.fmts=n.videoCodecs.map((e=>e.payloadType.toString(10))),o.attributes.payloads=n.videoCodecs,o.attributes.extmaps=n.videoExtensions,xT("PRELOAD_MEDIA_COUNT")>0){const{ssrcs:e,ssrcGroups:t}=xU([{ssrcId:MF,rtx:xT("USE_SUB_RTX")?40001:void 0}],this.cname);o.attributes.ssrcs=e,o.attributes.ssrcGroups=t}if("audio"===o.media.mediaType)if(0===n.audioCodecs.length){const e=r.audioCodecs.filter((e=>{var t,n;return null===(t=e.rtpMap)||void 0===t?void 0:Or(n=t.encodingName.toLowerCase()).call(n,"opus")}))||[r.audioCodecs[0]];o.media.fmts=e.map((e=>e.payloadType.toString(10))),o.attributes.payloads=e,o.attributes.extmaps=[]}else if(o.media.fmts=n.audioCodecs.map((e=>e.payloadType.toString(10))),o.attributes.payloads=n.audioCodecs,o.attributes.extmaps=n.audioExtensions,zU(o),xT("PRELOAD_MEDIA_COUNT")>0){const{ssrcs:e,ssrcGroups:t}=xU([{ssrcId:2e4}],this.cname);o.attributes.ssrcs=e,o.attributes.ssrcGroups=t}}return this.sessionDesc=t,this.currentMidIndex=t.mediaDescriptions.length-1,this.sessionDesc}updateCandidates(e){const t=this._candidates.filter((e=>"udp"===e.transport));if(e===zR.TCP){if(0===t.length)return;if(xT("TCP_CANDIDATE_ONLY")){const e=this._candidates.filter((e=>"tcp"===e.transport));t.forEach((t=>{-1===e.findIndex((e=>e.connectionAddress===t.connectionAddress))&&e.push(BF(BF({},t),{},{foundation:"tcpcandidate",priority:Number(t.priority)-1+"",transport:"tcp",port:Number(t.port)+90+""}))})),this._candidates=e}else{const e=[];t.forEach((t=>{e.push(BF(BF({},t),{},{foundation:"tcpcandidate",priority:Number(t.priority)-1+"",transport:"tcp",port:Number(t.port)+90+""}))})),this._candidates=[...t,...e]}}else if(e===zR.RELAY){if(0!==t.length)return;{const e=this._candidates.filter((e=>"tcp"===e.transport));e.forEach((e=>{t.push(BF(BF({},e),{},{foundation:"udpcandidate",priority:Number(e.priority)+1+"",transport:"udp",port:Number(e.port)-90+""}))})),this._candidates=[...t,...e]}}else 0===t.length?(this._candidates.filter((e=>"tcp"===e.transport)).forEach((e=>{t.push(BF(BF({},e),{},{foundation:"udpcandidate",priority:Number(e.priority)+1+"",transport:"udp",port:Number(e.port)-90+""}))})),this._candidates=t):this._candidates=this._candidates.filter((e=>"tcp"!==e.transport));for(const n of this.sessionDesc.mediaDescriptions)n.attributes.candidates=this.candidates}restartICE(e){e=qw(e),this._iceParameters=e,this.sessionDesc.mediaDescriptions.forEach((t=>{t.attributes.iceUfrag=e.iceUfrag,t.attributes.icePwd=e.icePwd}))}predictReceivingMids(e){const t=[];for(let n=0;n<e;n++)t.push((this.currentMidIndex+n+1).toString(10));return t}findAvailableMediaIndex(e,t){return this.sessionDesc.mediaDescriptions.findIndex((n=>{const r=n.media.mediaType===e&&"0"!==n.media.port&&("sendonly"===n.attributes.direction||"sendrecv"===n.attributes.direction)&&0===n.attributes.ssrcs.length;if($S()){if(r){const e=this.firefoxSsrcMidMap.get(t[0].ssrcId);return!(e||"0"!==n.attributes.mid&&"1"!==n.attributes.mid)||!(!e||e!==n.attributes.mid)}return!1}return r}))}createOrRecycleDataChannel(){for(const n of this.sessionDesc.mediaDescriptions)if("application"===n.media.mediaType)return{mediaDesc:n,needExchangeSDP:!1};this.currentMidIndex+=1;const e="".concat(this.currentMidIndex),t={media:{mediaType:"application",port:UF,protos:["UDP","DTLS","SCTP"],fmts:["webrtc-datachannel"]},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:[],fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:[],ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:[],rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,mid:"".concat(e),sctpPort:"5000"}};return this.sessionDesc.mediaDescriptions.push(t),{mediaDesc:t,needExchangeSDP:!0}}createOrRecycleRecvMedia(e,t,n,r,o,i){const a=e._mediaStreamTrack.kind,s=this.rtpCapabilities.recv,c=YU(a,s,this.localCapabilities.send,a===qR.VIDEO?r:o),l=a===qR.VIDEO?s.videoExtensions:s.audioExtensions;this.currentMidIndex+=1;const u="".concat(this.currentMidIndex);let d={media:{mediaType:a,port:UF,protos:["UDP","TLS","RTP","SAVPF"],fmts:c.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:l,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:[],rtcpFeedbackWildcards:[],payloads:c,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:n,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(u)}};d=this.mungRecvMediaDsec(d,e,i);const A=this.findFirstClosedMedia(a);if(A){const e=this.sessionDesc.mediaDescriptions.indexOf(A);this.sessionDesc.mediaDescriptions[e]=d}else this.sessionDesc.mediaDescriptions.push(d);return d}updateRemoteCodec(e,t,n){const r=[...new Set(this._rtpCapabilities.recv.videoCodecs.map((e=>e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"")).filter((e=>{var t;return Or(t=Object.keys(HT)).call(t,e)})))],o=new Set(t);if(r.every((e=>o.has(e))))return oI.debug("codecs has not changed, no need to updateRemoteCodec, codecs: ".concat(t)),!1;const i=this._rtpCapabilities.recv.videoCodecs.filter((e=>t.some((t=>{var n;return Or(n=e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"").call(n,t)}))));if(0===i.length)return oI.debug("updateRemoteCodec failed, because cannot find matched codec, remoteCapabilities codecs: ".concat(r," codecs: ").concat(t)),!1;const a=[...new Set(i.map((e=>e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"")))];let s;if(oI.debug("updateRemoteCodec, from ".concat(r," to ").concat(a)),0===e.length)s=this.sessionDesc.mediaDescriptions.filter((e=>"video"===e.media.mediaType&&"recvonly"===e.attributes.direction));else if(s=this.sessionDesc.mediaDescriptions.filter((t=>t.attributes.mid&&Or(e).call(e,t.attributes.mid)&&"recvonly"===t.attributes.direction)),s.length!==e.length)return oI.debug("updateRemoteCodec failed, because cannot find mids, mids: ".concat(e,", codecs: ").concat(t)),!1;if(xT("USE_PUB_RTX")||xT("USE_SUB_RTX")){const e=JU(i,this.rtpCapabilities.recv.videoCodecs);i.push(...e)}this._rtpCapabilities.recv.videoCodecs=i;const c=this.localCapabilities.send,l=this.rtpCapabilities.recv,u=YU(qR.VIDEO,l,c,n);return s.forEach((e=>{const t=u.map((e=>e.payloadType.toString(10)));oI.debug("updateRemoteCodec mid: ".concat(e.attributes.mid,", from"),e.attributes.payloads,"to",u),e.attributes.payloads=u,e.media.fmts=t})),!0}createOrRecycleSendMedia(e,t,n,r,o){const i=this.rtpCapabilities.send,a=e===qR.VIDEO?i.videoCodecs:i.audioCodecs,s=e===qR.VIDEO?i.videoExtensions:i.audioExtensions;this.currentMidIndex+=1;const c="".concat(this.currentMidIndex);let l={media:{mediaType:e,port:UF,protos:["UDP","TLS","RTP","SAVPF"],fmts:a.map((e=>e.payloadType.toString(10)))},connections:[{nettype:"IN",addrtype:"IP4",address:"127.0.0.1"}],bandwidths:[],attributes:{iceUfrag:this.iceParameters.iceUfrag,icePwd:this.iceParameters.icePwd,unrecognized:[],candidates:this.candidates,extmaps:s,fingerprints:this.dtlsParameters.fingerprints,imageattr:[],msids:[],remoteCandidatesList:[],rids:[],ssrcs:t,ssrcGroups:n,rtcpFeedbackWildcards:[],payloads:a,rtcp:{port:"9",netType:"IN",addressType:"IP4",address:"0.0.0.0"},setup:this.setup,direction:r,rtcpMux:!0,rtcpRsize:!0,mid:"".concat(c)}};l=this.mungSendMediaDesc(l,o);const u=this.findFirstClosedMedia(e);if(u){const e=this.sessionDesc.mediaDescriptions.indexOf(u);this.sessionDesc.mediaDescriptions[e]=l}else this.sessionDesc.mediaDescriptions.push(l);return l}updateBundleMids(){this.sessionDesc.attributes.groups[0].identificationTag=this.sessionDesc.mediaDescriptions.filter((e=>"0"!==e.media.port)).map((e=>e.attributes.mid))}mungRecvMediaDsec(e,t,n){const r=qw(e);return $U(r),FU(r,t),VU(r,t),HU(r),jU(r,n,this.localCapabilities.send),r}mungSendMediaDesc(e,t){const n=qw(e);return jU(n,t,this.localCapabilities.recv),zU(n),n}updateRecvMedia(e,t){const n=this.sessionDesc.mediaDescriptions.findIndex((t=>t.attributes.mid===e));if(-1!==n){const e=this.mungRecvMediaDsec(this.sessionDesc.mediaDescriptions[n],t);this.sessionDesc.mediaDescriptions[n]=e}}bumpMid(e){this.currentMidIndex+=e}findFirstClosedMedia(e){return this.sessionDesc.mediaDescriptions.find((t=>$S()?"0"===t.media.port&&t.media.mediaType===e:"0"===t.media.port))}findPreloadMediaDesc(e){return this.sessionDesc.mediaDescriptions.find((t=>{var n;return(null===(n=t.attributes)||void 0===n||null===(n=n.ssrcs[0])||void 0===n?void 0:n.ssrcId)===e[0].ssrcId}))}getSSRC(e){var t;return null===(t=this.sessionDesc.mediaDescriptions.find((t=>t.attributes.mid===e)))||void 0===t?void 0:t.attributes.ssrcs}}function FF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?FF(Object(n),!0).forEach((function(t){Ov(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let VF=function(e){return e.BANDWIDTH="bandwidth",e.CPU="cpu",e.NONE="none",e.OTHER="other",e}({});var HF=function(e){return e[e.DOWN=0]="DOWN",e[e.UP=1]="UP",e}(HF||{});const jF=new Map;function QF(e,t,n,r){let{scale:o}=e;if(0===o&&r===HF.UP||o>=t.length-1&&r===HF.DOWN)return e;let i=$F($F({},e),{},{scale:r===HF.DOWN?++o:--o});switch(n){case"maintain-framerate":i=$F($F({},i),t[o].motion);break;case"maintain-resolution":i=$F($F({},i),t[o].detail);break;case"balanced":i=$F($F({},i),t[o].balanced)}return i}function GF(e,t){if(t){const n={overUse:0,underUse:0,adaptationList:KF(t)};jF.set(e,n)}else jF.delete(e)}function KF(e){const t=$F({},e),{bitrateMax:n,frameRate:r,scaleResolutionDownBy:o,bitrateMin:i}=t,{MIN_FRAME_RATE:a,MAX_THRESHOLD_FRAMERATE:s,MAX_SCALE:c,BITRATE_MIN_THRESHOLD:l,BITRATE_MAX_THRESHOLD:u,BWE_SCALE_UP_THRESHOLD:d,BWE_SCALE_DOWN_THRESHOLD:A,PERF_SCALE_DOWN_THRESHOLD:p,PERF_SCALE_UP_THRESHOLD:h,BALANCE_BITRATE_FACTOR:f,BALANCE_FRAMERATE_FACTOR:g,BALANCE_RESOLUTION_FACTOR:m,MOTION_RESOLUTION_FACTOR:_,MOTION_BITRATE_FACTOR:E,DETAIL_FRAMERATE_FACTOR:v,DETAIL_BITRATE_FACTOR:y}=LT,b=Math.min(t.frameRate,s),C=[{scale:0,threshold:{bwe_down:Math.round(Math.pow(A,1)*n),bwe_up:n,fps_down:Math.round(Math.pow(p,1)*b),fps_up:r},balanced:{scaleResolutionDownBy:1,frameRate:r,bitrateMax:n,bitrateMin:i},motion:{scaleResolutionDownBy:1,frameRate:r,bitrateMax:n,bitrateMin:i},detail:{scaleResolutionDownBy:1,frameRate:r,bitrateMax:n,bitrateMin:i}}];for(let S=1;S<=c;S++){const e={bwe_up:Math.round(Math.pow(d,S)*n),bwe_down:Math.round(Math.pow(A,S+1)*n),fps_up:Math.round(Math.pow(h,S)*b),fps_down:Math.round(Math.pow(p,S+1)*b)},t={scaleResolutionDownBy:o/Math.pow(m,S),frameRate:Math.max(Math.round(Math.pow(g,S)*r),a),bitrateMax:Math.max(Math.round(Math.pow(f,S)*n),u),bitrateMin:Math.max(Math.round(Math.pow(f,S)*i),l)},s={scaleResolutionDownBy:o/Math.pow(_,S),frameRate:r,bitrateMax:Math.max(Math.round(Math.pow(E,S)*n),u),bitrateMin:Math.max(Math.round(Math.pow(E,S)*i),l)},c={scaleResolutionDownBy:1,frameRate:Math.max(Math.round(Math.pow(v,S)*r),a),bitrateMax:Math.max(Math.round(Math.pow(y,S)*n),u),bitrateMin:Math.max(Math.round(Math.pow(y,S)*i),l)};C.push({scale:S,threshold:e,balanced:t,motion:s,detail:c})}return C}function WF(e,t,n,r,o,i){const a=jF.get(e)||{overUse:0,underUse:0,adaptationList:KF(o)},{adaptationList:s}=a;jF.set(e,a);const{OVERUSE_TIMES_THRESHOLD:c,UNDERUSE_TIMES_THRESHOLD:l}=LT,{scale:u}=r;let d,A;return"number"==typeof t&&t>0&&function(e,t,n,r){if(t>=n.length)return!1;let{threshold:{fps_down:o}}=n[t];return xT("FORCE_AG_HIGH_FRAMERATE")&&"maintain-framerate"===r&&(o=n[0].threshold.fps_down),e<o}(t,u,s,i)&&(a.overUse++,A=VF.CPU,a.overUse>c)||"number"==typeof n&&n>0&&function(e,t,n){if(t>=n.length)return!1;const{threshold:{bwe_down:r}}=n[t];return e<r}(n,u,s)&&(a.overUse++,A=VF.BANDWIDTH,a.overUse>c)?(a.overUse=0,a.underUse=0,d=QF(r,s,i,HF.DOWN),[d,A]):("number"==typeof t&&t>0&&"number"==typeof n&&n>0&&function(e,t,n,r){if(0===t)return;let{threshold:{fps_up:o}}=n[t];return xT("FORCE_AG_HIGH_FRAMERATE")&&"maintain-framerate"===r&&(o=n[1].threshold.fps_up),e>o}(t,u,s,i)&&function(e,t,n){if(0===t)return;const{threshold:{bwe_up:r}}=n[t];return e>r}(n,u,s)&&(a.underUse++,a.underUse>l&&(a.overUse=0,a.underUse=0,d=QF(r,s,i,HF.UP),0===d.scale&&(A=VF.NONE))),[d,A])}function qF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qF(Object(n),!0).forEach((function(t){Ov(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qF(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function YF(e){var t;return!(!xT("ENABLE_AG_ADAPTATION")||!(e instanceof WB||Or(t=e._hints).call(t,tD.CUSTOM_TRACK))||!xT("FORCE_SUPPORT_AG_ADAPTATION")&&!(function(e){const t=PS();if(t.os!==IS.IOS||!t.osVersion)return!1;const n=t.osVersion.split(".");return Number(n[0])>=e}(14)&&KS(17,4)||GS(14)&&WS(17,4)))}const JF=new Map;function XF(e,t){const n=JF.get(e);if(n){const{timer:t}=n;window.clearTimeout(t),JF.delete(e)}t.qualityLimitationReason=VF.NONE,GF(e)}var ZF;function e$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function t$(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?e$(Object(n),!0).forEach((function(t){Ov(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):e$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let n$=(sR((ZF=class e extends WR{get currentLocalDescription(){return this.peerConnection.currentLocalDescription}get currentRemoteDescription(){return this.peerConnection.currentRemoteDescription}get peerConnectionState(){return this.peerConnection.connectionState}get iceConnectionState(){return this.peerConnection.iceConnectionState}get dtlsTransportState(){var e,t;return null!==(e=null===(t=this.peerConnection.getReceivers()[0])||void 0===t||null===(t=t.transport)||void 0===t?void 0:t.state)&&void 0!==e?e:null}get localCodecs(){return[...new Set(this.localCapabilities&&this.localCapabilities.send.videoCodecs.map((e=>e.rtpMap&&e.rtpMap.encodingName.toLowerCase()||"")).filter((e=>{var t;return Or(t=Object.keys(HT)).call(t,e)})))]}constructor(t,n){super(t,n),Ov(this,"store",void 0),Ov(this,"peerConnection",void 0),Ov(this,"id",aT(5,"connection-")),Ov(this,"remoteSDP",void 0),Ov(this,"initialOffer",void 0),Ov(this,"transportEventReceiver",void 0),Ov(this,"statsFilter",void 0),Ov(this,"extension",{useXR:xT("USE_XR")}),Ov(this,"localCapabilities",void 0),Ov(this,"remoteCodecs",void 0),Ov(this,"localCandidateCount",0),Ov(this,"allCandidatesReceived",!1),Ov(this,"isPreallocation",!1),Ov(this,"preSSRCMap",new Map),Ov(this,"dataStreamChannelMap",new Map),Ov(this,"establishPromise",void 0),Ov(this,"recoveredDataChannelIds",[]),Ov(this,"currentDataChannelId",1),Ov(this,"mutex",void 0),Ov(this,"qualityLimitationReason",VF.NONE),this.store=n,this.mutex=new _T("P2PConnection-mutex",n.clientId),this.peerConnection=new RTCPeerConnection(e.resolvePCConfiguration(t),{optional:[{googDscp:!0}]}),this.statsFilter=Nx(this.peerConnection,xT("STATS_UPDATE_INTERVAL"),void 0,$S()?1200:void 0),this.bindPCEvents(),this.bindStatsEvents(),this.store.p2pId=this.store.p2pId+1,this.establishPromise=this.establish()}getPreMedia(e){const t=this.preSSRCMap.get(e);if(void 0!==t){const e=this.peerConnection.getTransceivers().find((e=>e.mid===t));if(e)return{transceiver:e,track:e.receiver.track,id:t}}}async updateRemoteRTPCapabilities(e,t){if(this.remoteCodecs=t,this.remoteSDP)if(this.remoteSDP.updateRemoteCodec(e,t,this.store.codec)){const e=await this.peerConnection.createOffer(),t=this.logSDPExchange(e.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(e);const n=this.remoteSDP.toString();null==t||t(n),await this.peerConnection.setRemoteDescription({type:"answer",sdp:n})}else oI.debug("[P2PConnection] updateRemoteRTPCapabilities no need to exchange SDP.");else oI.debug("[P2PConnection] cannot updateRemoteRTPCapabilities before remote SDP created, local codecs: ".concat(this.localCodecs,", codecs: ").concat(t))}async establish(){try{this.peerConnection.addTransceiver("video",{direction:"recvonly"}),this.peerConnection.addTransceiver("audio",{direction:"recvonly"});const t=await this.peerConnection.createOffer();if(!t.sdp)throw new Error("Cannot get initialOffer.sdp when trying to establish PeerConnection.");const n=LU(t.sdp),r=await GU({filterRTX:!xT("USE_PUB_RTX")&&!xT("USE_SUB_RTX"),filterVideoFec:xT("FILTER_VIDEO_FEC"),filterAudioFec:xT("FILTER_AUDIO_FEC"),filterVideoCodec:xT("FILTER_VIDEO_CODEC")},this.extension);let o;return this.localCapabilities=qU(r),this.initialOffer=t,t.sdp&&tM(t.sdp)&&(o=qw(r),(e=o).send&&(RU(qR.VIDEO,e.send.videoExtensions),RU(qR.AUDIO,e.send.audioExtensions)),e.recv&&(RU(qR.VIDEO,e.recv.videoExtensions),RU(qR.AUDIO,e.recv.audioExtensions)),e.sendrecv&&(RU(qR.VIDEO,e.sendrecv.videoExtensions),RU(qR.AUDIO,e.sendrecv.audioExtensions))),t$(t$({},n),{},{rtpCapabilities:o||r,offerSDP:t.sdp})}catch(t){throw new uw(lw.GET_LOCAL_CONNECTION_PARAMS_FAILED,t.toString())}var e}async connect(e){try{if(!this.initialOffer)throw new Error("Cannot establish P2PConnection without initial offer.");this.initialOffer.sdp&&tM(this.initialOffer.sdp)&&(t=e.rtpCapabilities,n=this.localCapabilities,t.send&&(IU(qR.VIDEO,t.send.videoExtensions,n.send.videoExtensions),IU(qR.AUDIO,t.send.audioExtensions,n.send.audioExtensions)),t.recv&&(IU(qR.VIDEO,t.recv.videoExtensions,n.recv.videoExtensions),IU(qR.AUDIO,t.recv.audioExtensions,n.recv.audioExtensions))),this.remoteSDP=new xF(t$(t$({},e),{},{localCapabilities:this.localCapabilities})),e.preallocation&&(this.isPreallocation=!0),Array.isArray(this.remoteCodecs)&&this.remoteCodecs.length>0&&this.remoteSDP.updateRemoteCodec([],this.remoteCodecs,this.store.codec);const r=this.remoteSDP.toString(),o=ZU(this.initialOffer.sdp,this.extension),i=this.logSDPExchange(o||"","offer","local","connect");this.store.descriptionStart(),await this.peerConnection.setLocalDescription({type:"offer",sdp:o}),null==i||i(r),await this.peerConnection.setRemoteDescription({type:"answer",sdp:r});const a=this.peerConnection.getTransceivers()[0];if(null!=a&&a.receiver&&this.tryBindTransportEvents(a.receiver),xT("PRELOAD_MEDIA_COUNT")>0){this.remoteSDP.preloadRemoteMedia(xT("PRELOAD_MEDIA_COUNT"));const e=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:e});const t=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(t)}const{preSSRCs:s}=e;if(Array.isArray(s)&&s.length>0){const{mids:e}=this.remoteSDP.batchSend(s.map((e=>({kind:e.kind,ssrcMsg:[{ssrcId:e.ssrcId,rtx:e.rtx}],mslabel:e.mslabel}))));e.forEach(((e,t)=>{this.preSSRCMap.set(s[t].ssrcId,e)})),await XU(this.peerConnection,this.remoteSDP,this.extension),oI.debug("[".concat(this.store.clientId,"] [P2PConnection] pre-batchReceive exchange SDP."))}}catch(r){throw new uw(lw.EXCHANGE_SDP_FAILED,"P2PConnection.connect failed; ".concat(r.toString()))}var t,n}async updateRemoteConnect(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateRemoteConnect before remote SDP created");const{rtpCapabilities:t}=e;this.remoteSDP.updateRemoteRTPCapabilities(t),Array.isArray(this.remoteCodecs)&&this.remoteCodecs.length>0&&this.remoteSDP.updateRemoteCodec([],this.remoteCodecs,this.store.codec);const{preSSRCs:n}=e;if(Array.isArray(n)&&n.length>0){const{mids:e}=this.remoteSDP.batchSend(n.map((e=>Object.assign({},{kind:e.kind,ssrcMsg:[{ssrcId:e.ssrcId,rtx:e.rtx}],mslabel:e.mslabel}))));e.forEach(((e,t)=>{this.preSSRCMap.set(n[t].ssrcId,e)}))}await XU(this.peerConnection,this.remoteSDP,this.extension),oI.debug("[P2PConnection] updateRemoteRTPCapabilities by exchanging SDP.")}catch(t){throw new uw(lw.EXCHANGE_SDP_FAILED,"P2PConnection.updateRemoteConnect failed; ".concat(t.toString()))}}send(e,t,n){var r=this;return BC((function*(){const o=yield UC(r.mutex.lock("From P2PConnection.send"));try{if(!r.remoteSDP)throw new Error("Cannot call P2PConnection.send before remote SDP created");const o=[];e.forEach((e=>{const t=r.peerConnection.addTransceiver(e._mediaStreamTrack,{direction:"sendonly"});o.push(t),e._updateRtpTransceiver(t)})),$S()&&!0===xT("SIMULCAST")&&(yield UC(r.applySimulcastForFirefox(o,e)));const a=yield UC(r.peerConnection.createOffer()),s=r.remoteSDP.predictReceivingMids(e.length),c=r.mungSendOfferSDP(a.sdp,e,s),l=SU.parse(c),u=s.map((e=>{const t=l.mediaDescriptions.find((t=>t.attributes.mid===e));if(!t)throw new Error("Cannot extract ssrc from mediaDescription.");return BU(t,xT("USE_PUB_RTX"))}));let d;try{d=yield u}catch(i){d=[],r.remoteSDP.receive(e,t,n,d);const o=r.remoteSDP.toString();throw yield UC(r.peerConnection.setLocalDescription({type:"offer",sdp:c})),yield UC(r.peerConnection.setRemoteDescription({type:"answer",sdp:o})),yield UC(r.stopSending(s,!0)),i}r.remoteSDP.receive(e,t,n,d);const A=r.remoteSDP.toString(),p=r.logSDPExchange(c,"offer","local","send");return yield UC(r.peerConnection.setLocalDescription({type:"offer",sdp:c})),yield UC(r.applySimulcastEncodings(o,e)),yield UC(r.applySendEncodings(o,e)),null==p||p(A),yield UC(r.peerConnection.setRemoteDescription({type:"answer",sdp:A})),o.map(((e,t)=>{const n=s[t];return{localSSRC:u[t],id:n,transceiver:e}}))}catch(a){throw a instanceof uw?a:new uw(lw.EXCHANGE_SDP_FAILED,"P2PConnection.send failed; ".concat(a.toString()))}finally{o()}}))()}async createDataChannels(e,t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.createDataChannels before remote SDP created");let n=this.dataStreamChannelMap.get(e);if(n&&"open"===n.readyState)oI.debug("[P2PConnection] Channels are already available and can be reused directly.");else{const t=this.currentDataChannelId<1023?this.currentDataChannelId++:this.recoveredDataChannelIds.shift();if("number"!=typeof t)throw new Error("create DataChannel error, because cannot get dc id");n=this.peerConnection.createDataChannel("datastream-channel",{id:t,negotiated:!0,ordered:!1,maxRetransmits:xT("DATASTREAM_MAX_RETRANSMITS")}),n.binaryType="arraybuffer",this.dataStreamChannelMap.set(e,n)}t.forEach((e=>{e._updateOriginDataChannel(n)}));const{needExchangeSDP:r}=this.remoteSDP.sendDataChannel();if(r){const e=this.remoteSDP.toString();await this.peerConnection.setRemoteDescription({type:"offer",sdp:e});const t=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(t),oI.debug("[P2PConnection] createDataChannels by exchanging SDP.")}else oI.debug("[P2PConnection] createDataChannels no need to exchange SDP.");return}catch(n){throw n instanceof uw?n:new uw(lw.EXCHANGE_SDP_FAILED,"P2PConnection.createDataChannels failed; ".concat(n.toString()))}}async stopDataChannels(e){try{const t=this.dataStreamChannelMap.get(e);return t&&(t.id&&this.recoveredDataChannelIds.push(t.id),t.close()),void this.dataStreamChannelMap.delete(e)}catch(t){throw t instanceof uw?t:new uw(lw.DATACHANNEL_FAILED,"P2PConnection.stopDataChannels failed; ".concat(t.toString()))}}async stopSending(e,t){const n=t?void 0:await this.mutex.lock("From P2PConnection.stopSending");try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopSending before remote SDP created");const t=this.peerConnection.getTransceivers().filter((t=>-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length when trying to call P2PConnection.stopSending.");t.map((e=>{var t;XF(this.id+e.mid,this),e.direction="inactive",null===(t=e.stop)||void 0===t||t.call(e)}));const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||"","offer","local","stopSending");await this.peerConnection.setLocalDescription(n),this.remoteSDP.stopReceiving(e);const o=this.remoteSDP.toString();null==r||r(o),await this.peerConnection.setRemoteDescription({type:"answer",sdp:o})}catch(r){throw new uw(lw.EXCHANGE_SDP_FAILED,"P2PConnection.stopSending failed; ".concat(r.toString()))}finally{n&&n()}}async receive(e,t,n,r){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.receive ".concat(e," before remoteSDP created."));const{mid:o,needExchangeSDP:i}=this.remoteSDP.send(e,t,n,r);i&&(await XU(this.peerConnection,this.remoteSDP,this.extension),oI.debug("[".concat(this.store.clientId,"] [P2PConnection] receive ").concat(e," by exchanging SDP.")));const a=this.peerConnection.getTransceivers().find((e=>e.mid===o));if(!a)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:a.receiver.track,id:o,transceiver:a}}catch(o){throw new uw(lw.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(o.toString()))}}async batchReceive(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.batchReceive before remoteSDP created.");const{mids:t,needExchangeSDP:n}=this.remoteSDP.batchSend(e);return n&&(await XU(this.peerConnection,this.remoteSDP,this.extension),oI.debug("[".concat(this.store.clientId,"] [P2PConnection] batchReceive by exchanging SDP."))),t.map((e=>{const t=this.peerConnection.getTransceivers().find((t=>t.mid===e));if(!t)throw new Error("Cannot get transceiver after setLocalDescription.");return{track:t.receiver.track,id:e,transceiver:t}}))}catch(t){throw new uw(lw.EXCHANGE_SDP_FAILED,"P2PConnection.receive failed; ".concat(t.toString()))}}async stopReceiving(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.stopReceiving before remote SDP created.");e.forEach((e=>{Array.from(this.preSSRCMap.entries()).some((t=>{let[n,r]=t;if(r===e)return this.preSSRCMap.delete(n),!0}))})),this.remoteSDP.stopSending(e);const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","stopReceiving");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer();null==n||n(r.sdp||""),await this.peerConnection.setLocalDescription(r)}catch(t){throw new uw(lw.EXCHANGE_SDP_FAILED,"P2PConnection stopReceiving failed; ".concat(t.toString()))}}async muteRemote(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteRemote mid=".concat(e," before remote SDP created."));this.remoteSDP.mute(e);const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","muteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer();null==n||n(r.sdp||""),await this.peerConnection.setLocalDescription(r)}catch(t){throw new uw(lw.EXCHANGE_SDP_FAILED,"P2PConnection.muteRemote failed; ".concat(t.toString()))}}async unmuteRemote(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteRemote mid=".concat(e," before remote SDP created."));this.remoteSDP.unmute(e);const t=this.remoteSDP.toString(),n=this.logSDPExchange(t,"offer","remote","unmuteRemote");await this.peerConnection.setRemoteDescription({type:"offer",sdp:t});const r=await this.peerConnection.createAnswer();null==n||n(r.sdp||""),await this.peerConnection.setLocalDescription(r)}catch(t){throw new uw(lw.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteRemote failed; ".concat(t.toString()))}}async muteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.muteLocal before remote SDP created.");const t=this.peerConnection.getTransceivers().filter((t=>t.mid&&-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length.");t.map((e=>{e.direction="inactive"}));const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||"","offer","local","muteLocal");await this.peerConnection.setLocalDescription(n),this.remoteSDP.muteRemote(e);const o=this.remoteSDP.toString();null==r||r(o),await this.peerConnection.setRemoteDescription({type:"answer",sdp:o})}catch(t){throw new uw(lw.EXCHANGE_SDP_FAILED,"P2PConnection.muteLocal failed; ".concat(t.toString()))}}async unmuteLocal(e){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.unmuteLocal before remote SDP created.");const t=this.peerConnection.getTransceivers().filter((t=>t.mid&&-1!==e.indexOf(t.mid)));if(t.length!==e.length)throw new Error("Transceivers' length doesn't match mids' length.");t.map((async(e,t)=>{e.direction="sendonly"}));const n=await this.peerConnection.createOffer(),r=this.logSDPExchange(n.sdp||"","offer","local","unmuteLocal");await this.peerConnection.setLocalDescription(n),this.remoteSDP.unmuteRemote(e);const o=this.remoteSDP.toString();null==r||r(o),await this.peerConnection.setRemoteDescription({type:"answer",sdp:o})}catch(t){throw new uw(lw.EXCHANGE_SDP_FAILED,"P2PConnection.unmuteLocal failed; ".concat(t.toString()))}}restartICE(e){var t=this;return BC((function*(){const n=yield UC(t.mutex.lock("From P2PConnection.restartICE"));try{if(!t.remoteSDP)throw new Error("Cannot restartICE before remoteSDP created.");if(UP().supportPCSetConfiguration){const n=t.peerConnection.getConfiguration(),r=e===zR.RELAY?"relay":"all";n.iceTransportPolicy!==r&&(oI.debug("[".concat(t.store.clientId,"] restartICE change iceTransportPolicy from [").concat(n.iceTransportPolicy,"] to [").concat(r,"]")),n.iceTransportPolicy=r,t.peerConnection.setConfiguration(n))}else if(e===zR.RELAY)return;t.remoteSDP.updateCandidates(e);const n=yield UC(t.peerConnection.createOffer({iceRestart:!0}));if(!n.sdp)throw new Error("Cannot restartICE because restart offer SDP does not exist.");const r=LU(n.sdp),{remoteIceParameters:o}=yield r.iceParameters;t.remoteSDP.restartICE(o);const i=t.remoteSDP.toString(),a=t.logSDPExchange(n.sdp||"","offer","local","restartICE");t.store.descriptionStart(),yield UC(t.peerConnection.setLocalDescription(n)),null==a||a(i),yield UC(t.peerConnection.setRemoteDescription({type:"answer",sdp:i}))}catch(r){oI.warning("[".concat(t.store.clientId,"] restart ICE failed, abort operation"),r)}finally{n()}}))()}close(){var e;this.peerConnection.getTransceivers().forEach((e=>{XF(this.id+e.mid,this)})),this.preSSRCMap.clear(),this.peerConnection.close(),null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,"closed"),this.tryUnbindTransportEvents(),this.unbindPCEvents(),this.unbindStatsEvents(),this.removeAllListeners(),this.transportEventReceiver=void 0,this.statsFilter.destroy(),this.dataStreamChannelMap.clear(),this.recoveredDataChannelIds=[],this.currentDataChannelId=1}getStats(){return t$(t$({},this.statsFilter.getStats()),{},{qualityLimitationReason:this.qualityLimitationReason})}getRemoteVideoIsReady(e){return this.statsFilter.getVideoIsReady(e)}async updateEncoderConfig(e,t){try{if(!this.remoteSDP)throw new Error("Cannot call P2PConnection.updateEncoderConfig before remote SDP created.");const n=await this.peerConnection.createOffer(),r=this.mungSendOfferSDP(n.sdp,[t],[e]);this.remoteSDP.updateRecvMedia(e,t);const o=this.remoteSDP.toString(),i=this.logSDPExchange(r,"offer","local","updateEncoderConfig");await this.peerConnection.setLocalDescription({type:"offer",sdp:r}),null==i||i(o),await this.peerConnection.setRemoteDescription({type:"answer",sdp:o})}catch(n){throw new uw(lw.EXCHANGE_SDP_FAILED,n.toString())}}async updateSendParameters(e,t){const n=this.peerConnection.getTransceivers().filter((t=>t.mid===e));1===n.length&&(this.isVP8Simulcast(t)?$S()||await this.applySimulcastEncodings(n,[t]):await this.applySendEncodings(n,[t]))}setStatsRemoteVideoIsReady(e,t){this.statsFilter.setVideoIsReady2(e,t)}async replaceTrack(e,t){const n=this.peerConnection.getTransceivers().find((e=>e.mid===t));n&&await n.sender.replaceTrack(e._mediaStreamTrack)}async getSelectedCandidatePair(){const e=this.peerConnection.getReceivers();if(e.length>0&&e[0].transport&&e[0].transport.iceTransport&&e[0].transport.iceTransport.getSelectedCandidatePair&&e[0].transport.iceTransport.getSelectedCandidatePair()){const t=e[0].transport.iceTransport,{local:n,remote:r}=t.getSelectedCandidatePair();return{local:t$(t$({},Ax),{},{candidateType:n.type,protocol:n.protocol,address:n.address,port:n.port}),remote:t$(t$({},Ax),{},{candidateType:r.type,protocol:r.protocol,address:r.address,port:r.port})}}return this.statsFilter.getSelectedCandidatePair()}bindPCEvents(){this.peerConnection.oniceconnectionstatechange=()=>{var e;null===(e=this.onICEConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.iceConnectionState)},this.peerConnection.onconnectionstatechange=()=>{var e;null===(e=this.onConnectionStateChange)||void 0===e||e.call(this,this.peerConnection.connectionState)},this.peerConnection.onicecandidate=e=>{e.candidate?this.localCandidateCount+=1:(this.peerConnection.onicecandidate=null,this.allCandidatesReceived=!0,oI.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] local candidate count"),this.localCandidateCount))},setTimeout((()=>{this.allCandidatesReceived||(this.allCandidatesReceived=!0,oI.debug("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] onicecandidate timeout, local candidate count"),this.localCandidateCount))}),xT("CANDIDATE_TIMEOUT"))}unbindPCEvents(){this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onconnectionstatechange=null,this.peerConnection.onsignalingstatechange=null,this.peerConnection.onicecandidateerror=null,this.peerConnection.onicecandidate=null,this.peerConnection.ontrack=null}static resolvePCConfiguration(t){const n={iceServers:[]};return t.iceServers?n.iceServers=t.iceServers:t.turnServer&&"off"!==t.turnServer.mode&&(Dw(t.turnServer.servers)?n.iceServers=t.turnServer.servers:(n.iceServers&&n.iceServers.push(...e.turnServerConfigToIceServers(t.turnServer.servers)),xT("USE_TURN_SERVER_OF_GATEWAY")&&n.iceServers&&t.turnServer.serversFromGateway&&n.iceServers.push(...e.turnServerConfigToIceServers(t.turnServer.serversFromGateway)),xT("FORCE_TURN_TCP")?n.iceTransportPolicy="relay":t.turnServer.servers.concat(t.turnServer.serversFromGateway||[]).forEach((e=>{e.forceturn&&(n.iceTransportPolicy="relay")})))),xT("ENABLE_ENCODED_TRANSFORM")&&UP().supportWebRTCEncodedTransform&&(n.encodedInsertableStreams=!0),n}static turnServerConfigToIceServers(e){const t=[];return e.forEach((e=>{e.security?e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turns:".concat(LO(e.turnServerURL),":").concat(e.tcpport,"?transport=tcp")}):(e.udpport&&!xT("FORCE_TURN_TCP")&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.udpport,"?transport=udp")}),e.tcpport&&t.push({username:e.username,credential:e.password,credentialType:"password",urls:"turn:".concat(e.turnServerURL,":").concat(e.tcpport,"?transport=tcp")}))})),t}tryBindTransportEvents(e){const t=e.transport;if(t){this.transportEventReceiver=e,t.onstatechange=()=>{var e;null!=t&&t.state&&(null===(e=this.onDTLSTransportStateChange)||void 0===e||e.call(this,t.state))},t.onerror=e=>{var t;null===(t=this.onDTLSTransportError)||void 0===t||t.call(this,"error"in e?e.error:e)};const n=t.iceTransport;n&&(n.onstatechange=()=>{const e=null==t?void 0:t.iceTransport.state;var n;e&&(null===(n=this.onICETransportStateChange)||void 0===n||n.call(this,e))},n.getSelectedCandidatePair&&(n.onselectedcandidatepairchange=()=>{if(n.getSelectedCandidatePair()){const{local:e,remote:t}=n.getSelectedCandidatePair();oI.info("[".concat(this.store.clientId,"] [pc-").concat(this.store.p2pId,"] selectedcandidatepairchange: local ").concat(JSON.stringify({candidateType:e.type,protocol:e.protocol}),", remote ").concat(JSON.stringify({candidateType:t.type,protocol:t.protocol,address:t.address,port:t.port})," )"))}}))}}tryUnbindTransportEvents(){this.transportEventReceiver&&this.transportEventReceiver.transport&&(this.transportEventReceiver.transport.onstatechange=null,this.transportEventReceiver.transport.onerror=null,this.transportEventReceiver.transport.iceTransport&&(this.transportEventReceiver.transport.iceTransport.onstatechange=null))}async updateRtpSenderEncodings(e,t){var n,r;if(!t){const n=this.peerConnection.getSenders();t=n.find((t=>t.track===e._mediaStreamTrack))}if(!t)return oI.warn("[".concat(e.getTrackId(),"] no rtpSender found}"));if(this.isVP8Simulcast(e))return oI.warn("[updateRtpSenderEncodings] Track is VP8 simulcast, please apply simulcast encodings");if(!UP().supportSetRtpSenderParameters)return oI.warn("[updateRtpSenderEncodings] Browser not support set rtp-sender parameters");const o={},i={};switch(e._optimizationMode){case"motion":o.degradationPreference="maintain-framerate";break;case"detail":o.degradationPreference="maintain-resolution";break;case"balanced":o.degradationPreference="balanced"}const a=(c=this.peerConnection,l=e._mediaStreamTrack,c.getTransceivers().find((e=>e.sender.track===l||e.receiver.track===l))),s=pL(e);var c,l;if(YF(e)&&a&&t&&s&&this.getLocalVideoStats&&Or(n=["vp8","vp9"]).call(n,this.store.codec)){var u;const n=o.degradationPreference||(Or(u=e._hints).call(u,tD.CUSTOM_TRACK)?xT("CUSTOM_ADAPTATION_DEFAULT_MODE"):"maintain-framerate");!function(e,t,n,r,o,i){if(XF(e,n),o(t),"balanced"!==r&&"maintain-framerate"!==r&&"maintain-resolution"!==r)return;let a=-1;GF(e,t);const s=window.setInterval((()=>{const s=JF.get(e);if(!xT("ENABLE_AG_ADAPTATION")||!s)return XF(e,n),void o(t);const c=i();if(c.sendPackets>0&&c.OutgoingAvailableBandwidth>0){if(-1===a)return void(a=Date.now());if(Date.now()-a<1e3)return;const i=c.sendFrameRate,l=c.OutgoingAvailableBandwidth,[u,d]=WF(e,i,l,s.adaptationConfig,t,r);d&&(n.qualityLimitationReason=d),u&&s.adaptationConfig.scale!==u.scale&&(oI.debug("[".concat(e,"] applyAdaptation: ").concat(n.qualityLimitationReason,"\n           sendFps ").concat(i,", bwe ").concat(l,", switch from ").concat(s.adaptationConfig.scale," to ").concat(u.scale," ")),s.adaptationConfig=zF(zF({},s.adaptationConfig),u),o(u))}}),xT("CHECK_LOCAL_STATS_INTERVAL")),c=zF({},t);JF.set(e,{timer:s,adaptationConfig:c,originConfig:t,adaptationFunc:o}),oI.debug("[".concat(e,"] start adaptation, originConfig: ").concat(JSON.stringify(t),", degradationPreference: ").concat(r))}(this.id+a.mid,s,this,n,(e=>{t&&this.updateAdaptation(t,e)}),this.getLocalVideoStats.bind(this))}if(e._encoderConfig){var d;const{bitrateMax:t,frameRate:n,scaleResolutionDownBy:r}=e._encoderConfig;t&&(i.maxBitrate=1e3*t),(Or(d=e._hints).call(d,tD.LOW_STREAM)||e.isUseScaleResolutionDownBy)&&(n&&(i.maxFramerate=UO(n)),r&&r>=1&&(i.scaleResolutionDownBy=r))}const{maxFramerate:A}=xT("ENCODER_CONFIG_LIMIT");if(A&&"number"==typeof A&&(i.maxFramerate=i.maxFramerate?Math.min(i.maxFramerate,A):A),xT("DSCP_TYPE")&&rw()){var p;const e=xT("DSCP_TYPE");Or(p=["very-low","low","medium","high"]).call(p,e)&&(i.networkPriority=e)}const h=t.getParameters(),f=null===(r=h.encodings)||void 0===r?void 0:r[0];$S()&&!f&&(o.encodings=[i]),f&&Object.assign(f,i),Object.assign(h,o),oI.debug("[".concat(e.getTrackId(),"] updateRtpSenderEncodings: ").concat(JSON.stringify(h.encodings))),await t.setParameters(h),await async function(e,t,n){try{var r;if(!UP().supportSetRtpSenderParameters)return;if(!function(e){return"vp9"===e}(e)||!xT("ENABLE_SVC"))return;const o={},i={},a=t.getParameters(),s=null===(r=a.encodings)||void 0===r?void 0:r[0];i.scalabilityMode=wU(n),s&&Object.assign(s,i),Object.assign(a,o),await t.setParameters(a),oI.debug("[updateAdaptation] updateRtpSenderEncodings scalabilityMode success: ".concat(JSON.stringify(a.encodings)))}catch(o){oI.debug("[updateAdaptation] updateRtpSenderEncodings scalabilityMode failed",o)}}(this.store.codec,t,xT("SVC_MODE"))}async updateAdaptation(e,t){var n,r;if(!e)return oI.debug("[updateAdaptation] no rtpSender found");if(!UP().supportSetRtpSenderParameters)return oI.debug("[updateAdaptation] Browser not support set rtp-sender parameters");const o={},{bitrateMax:i,frameRate:a,scaleResolutionDownBy:s}=t;i&&(o.maxBitrate=1e3*i),a&&(o.maxFramerate=UO(a)),s&&s>=1&&Or(n=["vp8","vp9"]).call(n,this.store.codec)&&(o.scaleResolutionDownBy=s);const c=e.getParameters(),l=null===(r=c.encodings)||void 0===r?void 0:r[0];l&&Object.assign(l,o),Object.assign(c,{});try{await e.setParameters(c),oI.debug("[updateAdaptation] updateRtpSenderEncodings: ".concat(JSON.stringify(c.encodings)))}catch(u){!("transport"in e)||e.transport&&"connected"===e.transport.state?"connected"!==this.peerConnectionState?oI.debug("[updateAdaptation] peerConnection not connected}"):oI.debug("[updateAdaptation] updateRtpSenderEncodings failed",u):oI.debug("[updateAdaptation] rtpSender transport not connected}")}}async applySendEncodings(e,t){try{if(!UP().supportSetRtpSenderParameters)return;if(e.length!==t.length)return;for(let n=0;n<e.length;n++){const r=e[n],o=t[n];o instanceof KB&&!this.isVP8Simulcast(o)&&await this.updateRtpSenderEncodings(o,r.sender)}}catch(n){oI.debug("[".concat(this.store.clientId,"] Apply RTPSendEncodings failed."))}}mungSendOfferSDP(e,t,n){const r=SU.parse(e);return t.forEach(((e,t)=>{const o=n[t],i=r.mediaDescriptions.find((e=>e.attributes.mid===o));i&&(FU(i,e),QU(i,e,this.store.codec))})),SU.print(r)}bindStatsEvents(){this.statsFilter.onFirstAudioReceived=e=>{var t;null===(t=this.onFirstAudioReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoReceived=e=>{var t;null===(t=this.onFirstVideoReceived)||void 0===t||t.call(this,e)},this.statsFilter.onFirstAudioDecoded=e=>{var t;null===(t=this.onFirstAudioDecoded)||void 0===t||t.call(this,e)},this.statsFilter.onFirstVideoDecoded=(e,t,n)=>{var r;null===(r=this.onFirstVideoDecoded)||void 0===r||r.call(this,e,t,n)},this.statsFilter.onSelectedLocalCandidateChanged=(e,t)=>{var n;null===(n=this.onSelectedLocalCandidateChanged)||void 0===n||n.call(this,e,t)},this.statsFilter.onSelectedRemoteCandidateChanged=(e,t)=>{var n;null===(n=this.onSelectedRemoteCandidateChanged)||void 0===n||n.call(this,e,t)},this.statsFilter.onFirstVideoDecodedTimeout=e=>{var t;null===(t=this.onFirstVideoDecodedTimeout)||void 0===t||t.call(this,e)}}unbindStatsEvents(){this.statsFilter.onFirstAudioReceived=void 0,this.statsFilter.onFirstVideoReceived=void 0,this.statsFilter.onFirstAudioDecoded=void 0,this.statsFilter.onFirstVideoDecoded=void 0,this.statsFilter.onSelectedLocalCandidateChanged=void 0,this.statsFilter.onSelectedRemoteCandidateChanged=void 0,this.statsFilter.onFirstVideoDecodedTimeout=void 0}async applySimulcastForFirefox(e,t){if(e.length===t.length)for(let s=0;s<e.length;s++){var n,r,o,i,a;const c=e[s],l=t[s];if(l instanceof KB&&!Or(n=l._hints).call(n,tD.LOW_STREAM)&&null!==(r=l._encoderConfig)&&void 0!==r&&r.bitrateMax&&(null===(o=l._encoderConfig)||void 0===o?void 0:o.bitrateMax)>200&&null!==(i=l._scalabilityMode)&&void 0!==i&&i.numSpatialLayers&&(null===(a=l._scalabilityMode)||void 0===a?void 0:a.numSpatialLayers)>1&&"vp8"===this.store.codec){const e={},t={high:1e3*(l._encoderConfig.bitrateMax-50),medium:5e4};e.encodings=[{rid:"m",active:!0,maxBitrate:t.medium,scaleResolutionDownBy:4},{rid:"h",active:!0,maxBitrate:t.high}];const n=c.sender.getParameters();await c.sender.setParameters(Object.assign(n,e))}}}async applySimulcastEncodings(e,t){if(!$S()&&e.length===t.length)for(let n=0;n<e.length;n++){const r=t[n];if(r instanceof KB&&this.isVP8Simulcast(r)){const t=e[n],o={},i={high:1e3*(r._encoderConfig.bitrateMax-50),medium:5e4};o.encodings=[{active:!0,adaptivePtime:!1,networkPriority:"high",priority:"high",maxBitrate:i.high},{active:!0,adaptivePtime:!1,networkPriority:"low",priority:"low",maxBitrate:i.medium,scaleResolutionDownBy:4}];const a=t.sender.getParameters();await t.sender.setParameters(Object.assign(a,o))}}}isVP8Simulcast(e){var t,n,r,o,i;return!!(e instanceof KB&&xT("SIMULCAST")&&"vp8"===this.store.codec&&!Or(t=e._hints).call(t,tD.LOW_STREAM)&&null!==(n=e._encoderConfig)&&void 0!==n&&n.bitrateMax&&(null===(r=e._encoderConfig)||void 0===r?void 0:r.bitrateMax)>200&&null!==(o=e._scalabilityMode)&&void 0!==o&&o.numSpatialLayers&&(null===(i=e._scalabilityMode)||void 0===i?void 0:i.numSpatialLayers)>1)}logSDPExchange(e,t,n,r){if(xT("SDP_LOGGING"))return oI.upload("[".concat(this.store.clientId,"] exchanging ").concat(n," ").concat(t," SDP during P2PConnection.").concat(r,"\n"),e),"offer"===t?e=>{this.logSDPExchange(e,"answer","local"===n?"remote":"local",r)}:void 0}async getRemoteSSRC(e){if(!this.remoteSDP)return;const t=this.remoteSDP.getSSRC(e);return t&&0!==t.length?t[0].ssrcId:void 0}setConfiguration(t){if(UP().supportPCSetConfiguration){const n=e.resolvePCConfiguration(t);this.peerConnection.setConfiguration(n)}}}).prototype,"updateRemoteRTPCapabilities",[r$],Object.getOwnPropertyDescriptor(ZF.prototype,"updateRemoteRTPCapabilities"),ZF.prototype),sR(ZF.prototype,"connect",[r$],Object.getOwnPropertyDescriptor(ZF.prototype,"connect"),ZF.prototype),sR(ZF.prototype,"updateRemoteConnect",[r$],Object.getOwnPropertyDescriptor(ZF.prototype,"updateRemoteConnect"),ZF.prototype),sR(ZF.prototype,"createDataChannels",[r$],Object.getOwnPropertyDescriptor(ZF.prototype,"createDataChannels"),ZF.prototype),sR(ZF.prototype,"receive",[r$],Object.getOwnPropertyDescriptor(ZF.prototype,"receive"),ZF.prototype),sR(ZF.prototype,"batchReceive",[r$],Object.getOwnPropertyDescriptor(ZF.prototype,"batchReceive"),ZF.prototype),sR(ZF.prototype,"stopReceiving",[r$],Object.getOwnPropertyDescriptor(ZF.prototype,"stopReceiving"),ZF.prototype),sR(ZF.prototype,"muteRemote",[r$],Object.getOwnPropertyDescriptor(ZF.prototype,"muteRemote"),ZF.prototype),sR(ZF.prototype,"unmuteRemote",[r$],Object.getOwnPropertyDescriptor(ZF.prototype,"unmuteRemote"),ZF.prototype),sR(ZF.prototype,"muteLocal",[r$],Object.getOwnPropertyDescriptor(ZF.prototype,"muteLocal"),ZF.prototype),sR(ZF.prototype,"unmuteLocal",[r$],Object.getOwnPropertyDescriptor(ZF.prototype,"unmuteLocal"),ZF.prototype),sR(ZF.prototype,"close",[r$],Object.getOwnPropertyDescriptor(ZF.prototype,"close"),ZF.prototype),sR(ZF.prototype,"updateEncoderConfig",[r$],Object.getOwnPropertyDescriptor(ZF.prototype,"updateEncoderConfig"),ZF.prototype),sR(ZF.prototype,"updateSendParameters",[r$],Object.getOwnPropertyDescriptor(ZF.prototype,"updateSendParameters"),ZF.prototype),sR(ZF.prototype,"replaceTrack",[r$],Object.getOwnPropertyDescriptor(ZF.prototype,"replaceTrack"),ZF.prototype),sR(ZF.prototype,"updateAdaptation",[r$],Object.getOwnPropertyDescriptor(ZF.prototype,"updateAdaptation"),ZF.prototype),sR(ZF.prototype,"getRemoteSSRC",[r$],Object.getOwnPropertyDescriptor(ZF.prototype,"getRemoteSSRC"),ZF.prototype),ZF);function r$(e,t,n){const r=e[t];if("function"!=typeof r)throw new Error("Cannot use mutex on object property.");return n.value=async function(){const e=this.mutex,n=await e.lock("From P2PConnection.".concat(t));try{for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return await r.apply(this,i)}finally{n()}},n}var o$;function i$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a$(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i$(Object(n),!0).forEach((function(t){Ov(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s$(e){var t,n,r,o=2;for("undefined"!=typeof Symbol&&(n=xC,r=Symbol.iterator);o--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new c$(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function c$(e){function t(e){if(Object(e)!==e)return MA.reject(new TypeError(e+" is not an object."));var t=e.done;return MA.resolve(e.value).then((function(e){return{value:e,done:t}}))}return(c$=function(e){this.s=e,this.n=e.next}).prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?MA.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?MA.reject(e):t(n.apply(this.s,arguments))}},new c$(e)}let l$=(o$=class extends ww{get state(){return this._state}set state(e){const t=this._state;this._state=e,this.emit(ZR.StateChange,t,this._state)}constructor(e,t){super(),Ov(this,"isPlanB",void 0),Ov(this,"store",void 0),Ov(this,"statsUploader",void 0),Ov(this,"connection",void 0),Ov(this,"localTrackMap",new Map),Ov(this,"remoteUserMap",new Map),Ov(this,"localDataChannels",[]),Ov(this,"remoteDataChannelMap",new Map),Ov(this,"pendingLocalTracks",[]),Ov(this,"pendingRemoteTracks",[]),Ov(this,"pendingLocalDataChannels",[]),Ov(this,"pendingRemoteDataChannels",[]),Ov(this,"statsCollector",void 0),Ov(this,"shouldForwardP2PCreation",void 0),Ov(this,"iceFailedCount",0),Ov(this,"dtlsFailedCount",0),Ov(this,"mutex",void 0),Ov(this,"_state",XR.Disconnected),Ov(this,"_pcStatsUploadType",xT("NEW_ICE_RESTART")?YR.FIRST_CONNECTION:YR.OLD_FIRST_CONNECTION),Ov(this,"_isInRestartIce",!1),Ov(this,"_isStartRestartIce",!1),Ov(this,"_restartStates",["disconnected","failed"]),Ov(this,"_restartTimer",void 0),Ov(this,"_isFirstConnected",!0),Ov(this,"handleMuteLocalTrack",(async(e,t,n)=>{const r=await this.mutex.lock("Locking from P2PChannel.handleMuteLocalTrack");try{if(!this.connection||this.state!==XR.Connected)return void n(new uw(lw.INVALID_OPERATION,"Cannot call P2PChannel.handleMuteLocalTrack before connection established."));const r=this.filterTobeMutedTracks(e);if(0===r.length)return void t();const o=r.find((e=>"videoLowTrack"===e[0]));o&&o[1].track._originMediaStreamTrack.stop(),await this.connection.muteLocal(r.map((e=>{let[,{id:t}]=e;return t})));const i=this.createMuteMessage(r);await Vw(this,ZR.RequestMuteLocal,i),t()}catch(o){n(o)}finally{r()}})),Ov(this,"handleUnmuteLocalTrack",(async(e,t,n)=>{const r=await this.mutex.lock("Locking from P2PChannel.handleUnmuteLocalTrack");try{if(!this.connection||this.state!==XR.Connected)return void n(new uw(lw.INVALID_OPERATION,"Cannot call P2PChannel.handleUnmuteLocalTrack before connection established."));const r=this.filterTobeUnmutedTracks(e);if(0===r.length)return void t();const o=r.find((e=>"videoLowTrack"===e[0]));if(o){const t=o[1];if(t.track._originMediaStreamTrack.stop(),!xT("DISABLE_DUAL_STREAM_USE_ENCODING")&&UP().supportDualStreamEncoding){const n=e._mediaStreamTrack.clone();t.track._mediaStreamTrack=n,t.track._originMediaStreamTrack=n}else{const n=xx(e,jw(this,ZR.RequestLowStreamParameter));t.track._mediaStreamTrack=n,t.track._originMediaStreamTrack=n}await new MA(((e,n)=>{this.handleReplaceTrack(t.track,e,n,!0)}))}await this.connection.unmuteLocal(r.map((e=>{let[,{id:t}]=e;return t})));const i=this.createUnmuteMessage(r);await Vw(this,ZR.RequestUnmuteLocal,i),t()}catch(o){n(o)}finally{r()}})),Ov(this,"handleUpdateVideoEncoder",(async(e,t,n)=>{const r=await this.mutex.lock("Locking from P2PChannel.handleSetVideoEncoder");try{const n=this.localTrackMap.get(JR.LocalVideoTrack);if(!this.connection||!n||n.track!==e||this.state!==XR.Connected)return void t();const{id:r,track:o}=n;await this.connection.updateSendParameters(r,o),await this.connection.updateEncoderConfig(r,o),this.emit(ZR.UpdateVideoEncoder,o),t()}catch(o){n(o)}finally{r()}})),Ov(this,"handleUpdateVideoSendParameters",(async(e,t,n)=>{const r=await this.mutex.lock("Locking from P2PChannel.handleUpdateVideoSendParameters");try{const n=this.localTrackMap.get(JR.LocalVideoTrack);if(!this.connection||!n||n.track!==e||this.state!==XR.Connected)return void t();const{id:r,track:o}=n;await this.connection.updateSendParameters(r,o),t()}catch(o){n(o)}finally{r()}})),Ov(this,"handleReplaceMixingTrack",(async(e,t,n,r)=>{if(!this.connection||this.state!==XR.Connected)return void t();const o=iF([e]);let i;oI.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection will replace audioTrack [").concat(o.getTrackId(),"]")),"boolean"==typeof r&&r||(i=await this.mutex.lock("From P2PChannel.handleReplaceMixingTrack"));try{await this.replaceTrack(e,o),t()}catch(s){n(s)}finally{var a;null===(a=i)||void 0===a||a()}})),Ov(this,"handleReplaceTrack",(async(e,t,n,r)=>{let o;oI.debug("[".concat(this.store.clientId,"] P2PChannel handleReplaceTrack for [track-id-").concat(e.getTrackId(),"]")),"boolean"==typeof r&&r||(o=await this.mutex.lock("From P2PChannel.handleReplaceTrack"));try{var i;const n=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:n}]=t;return e===n}));if(!this.connection||!n||this.state!==XR.Connected)return void t();if(await(null===(i=this.connection)||void 0===i?void 0:i.replaceTrack(e,n[1].id)),this.isPlanB){const t=n[1];t.id=e._mediaStreamTrack.id,this.localTrackMap.set(n[0],t)}if(n[0]===JR.LocalVideoTrack&&!xT("DISABLE_DUAL_STREAM_USE_ENCODING")&&UP().supportDualStreamEncoding){const t=this.localTrackMap.get(JR.LocalVideoLowTrack);if(t){const n=e._mediaStreamTrack.clone();t.track._originMediaStreamTrack.stop(),t.track._mediaStreamTrack=n,t.track._originMediaStreamTrack=n,await new MA(((e,n)=>{this.handleReplaceTrack(t.track,e,n,!0)}))}}t()}catch(s){n(s)}finally{var a;null===(a=o)||void 0===a||a()}})),Ov(this,"handleGetRTCStats",(e=>{e(this.statsCollector.getRTCStats())})),Ov(this,"handleGetLocalVideoStats",(e=>{e(this.statsCollector.getLocalVideoTrackStats())})),Ov(this,"handleGetLocalAudioStats",(e=>{e(this.statsCollector.getLocalAudioTrackStats())})),Ov(this,"handleGetRemoteVideoStats",(e=>this.statsCollector.getRemoteVideoTrackStats(e.uid)[e.uid])),Ov(this,"handleGetRemoteAudioStats",(e=>this.statsCollector.getRemoteAudioTrackStats(e.uid)[e.uid])),this.store=e,this.statsCollector=t,this.statsCollector.addP2PChannel(this),this.statsUploader=new eF(this.store),this.bindStatsUploaderEvents(),this.mutex=new _T("P2PChannel-mutex",this.store.clientId),this.isPlanB=!UP().supportUnifiedPlan||xT("CHROME_FORCE_PLAN_B")&&rw(),this.shouldForwardP2PCreation=xT("FORWARD_P2P_CREATION")&&UP().supportPCSetConfiguration&&nw(),this.shouldForwardP2PCreation&&(this.connection=this.isPlanB?new PF({},this.store):new n$({},this.store),this.bindConnectionEvents(this.connection))}async startP2PConnection(e){var t;this.state=XR.New;const n=this.shouldForwardP2PCreation&&"closed"===(null===(t=this.connection)||void 0===t?void 0:t.peerConnectionState);if(this.shouldForwardP2PCreation&&!n||(n&&this.connection&&(oI.warning("[".concat(this.store.clientId,"] P2PChannel.startP2PConnection ForwardP2P closed.")),this.connection.close(),this.unbindConnectionEvents(this.connection)),this.connection=this.isPlanB?new PF(e,this.store):new n$(e,this.store),this.bindConnectionEvents(this.connection)),!this.connection)throw new uw(lw.UNEXPECTED_ERROR,"Cannot P2PChannel.startConnection before P2PConnection initialization .");return this._pcStatsUploadType=xT("NEW_ICE_RESTART")?YR.FIRST_CONNECTION:YR.OLD_FIRST_CONNECTION,this._isFirstConnected=!0,this._isInRestartIce=!1,this._isStartRestartIce=!1,this.connection.setConfiguration(e),this.connection.establishPromise}async connect(e){if(!this.connection)throw new uw(lw.UNEXPECTED_ERROR,"Cannot P2PChannel.connect before P2PChannel.startP2PConnection .");xT("ENABLE_PREALLOC_PC")&&this.state===XR.Connected?await this.connection.updateRemoteConnect(e):(this.store.peerConnectionStart(),await this.connection.connect(e),this.statsUploader.startUploadTransportStats(),this.statsUploader.startUploadExtensionUsageStats(),this.state=XR.Connected)}updateRemoteRTPCapabilities(e){const t=Array.from(this.localTrackMap.entries()).filter((e=>{var t;let[n]=e;return Or(t=[JR.LocalVideoLowTrack,JR.LocalVideoTrack]).call(t,n)})),n=t.map((e=>{let[,{id:t}]=e;return t})),r=t.map((e=>{let[t]=e;return t}));if(this.connection instanceof n$){if(AI.updateRemoteRTPCapabilities(this.store.sessionId,{trackTypes:JSON.stringify(r),localCodecs:JSON.stringify(this.connection.localCodecs),remoteCodecs:JSON.stringify(e)}),!Or(e).call(e,this.store.codec)){const t=["vp9","vp8","h264"].find((t=>Or(e).call(e,t)));t&&(this.store.codec=t,oI.debug("[".concat(this.store.clientId,"] [").concat(this.store.p2pId," updateRemoteRTPCapabilities] default codec is not available, hence the fallback to ").concat(t,".")))}this.connection.updateRemoteRTPCapabilities(n,e)}}async getEstablishParams(){var e;if(this.connection instanceof n$&&"closed"!==this.connection.peerConnectionState&&Or(e=[XR.New,XR.Connected]).call(e,this.state))return this.connection.establishPromise}async publishDataChannel(e){if(!this.connection||this.state!==XR.Connected){if(this.state===XR.Disconnected)throw new uw(lw.UNEXPECTED_ERROR,"PeerConnection already disconnected.");return e.forEach((e=>{var t;Or(t=this.pendingLocalDataChannels).call(t,e)||this.pendingLocalDataChannels.push(e)})),[]}const t=this.filterTobePublishedDataChannels(e);return 0===t.length?[]:(t.forEach((e=>{const t=Date.now();this.store.publish(e.id.toString(),"datachannel",t)})),await this.connection.createDataChannels(this.store.uid,t),t.forEach((e=>{this.localDataChannels.push(e);const t=Date.now();this.store.publish(e.id+"","datachannel",void 0,t)})),e.map((e=>({streamId:e.id,ordered:e.ordered,maxRetransmits:e.maxRetransmits,metadata:e.metadata,channelId:e._originDataChannelId}))))}publish(e,t,n){var r=this;return BC((function*(){const o=yield UC(r.mutex.lock("From P2PChannel.publish"));try{if(!r.connection||r.state!==XR.Connected){if(r.state===XR.Disconnected)throw new uw(lw.UNEXPECTED_ERROR,"PeerConnection already disconnected.");r.throwIfTrackTypeNotMatch(e);const t=e.filter((e=>-1===r.pendingLocalTracks.indexOf(e)));return void(r.pendingLocalTracks=r.pendingLocalTracks.concat(t))}r.store.pubId=r.store.pubId+1,YM.markPublishStart(r.store.clientId,r.store.pubId);const o=r.filterTobePublishedTracks(e,t,n);if(0===o.length)return void(yield UC(r.tryToUnmuteAudio(e)));yield*MC(s$(r.doPublish(r.connection,o)))}finally{o()}}))()}doPublish(e,t){var n=this;return BC((function*(){t.forEach((e=>{let{track:t,type:r}=e;const o=Date.now();n.store.publish(t.getTrackId(),r===JR.LocalAudioTrack?"audio":"video",o)})),n.bindLocalTrackEvents(t);const r=t.map((e=>{let{track:t}=e;return t})),o=yield UC(e.send(r,n.store.codec,n.store.audioCodec)),i=(yield UC(o.next())).value,a=n.createGatewayPublishMessage(t,i);let s;try{s=yield a}catch(d){throw o.throw(d),(null==d?void 0:d.code)===lw.WS_ABORT&&t.forEach((e=>{let{track:t}=e;-1===n.pendingLocalTracks.indexOf(t)&&n.pendingLocalTracks.push(t)})),n.unbindLocalTrackEvents(t),d}const c=n.mapPubResToRemoteConfig(a,s,r),l=(yield UC(o.next(c))).value,u=xT("ENABLE_VIDEO_SEI");r.forEach((async e=>{const t=e.getRTCRtpTransceiver();t&&u&&(e.trackMediaType===qR.VIDEO?await EU(t.sender,e):e.trackMediaType===qR.AUDIO&&await async function(e){if(!UP().supportWebRTCEncodedTransform)return void oI.warning("browser not support audio encoded transform");if(fU.has(e))return;if(!e.track)return;const t={track:e.track};if(MS()){if(!e.createEncodedStreams)return void oI.warning("browser not support createEncodedStreams() API");let o=null;try{o=e.createEncodedStreams()}catch(r){return void oI.error("create audio-encoded-streams error",r&&r.message)}const i=new TransformStream({transform(r,o){t.controller||(t.controller=o),e.track&&e.track.id!==t.track.id&&(oI.debug("audio track changed: ".concat(t.track.id," => ").concat(e.track.id)),t.track.removeEventListener("ended",n),t.track=e.track,t.track.addEventListener("ended",n)),o.enqueue(r)}});o.readable.pipeThrough(i).pipeTo(o.writable)}else if(xS()){if("undefined"==typeof RTCRtpScriptTransform)return void oI.warning("browser not support RTCRtpScriptTransform");const r=hU(),o=new MessageChannel;await new MA((e=>r.onmessage=t=>{"registered"===t.data&&e(void 0)}));const i=new RTCRtpScriptTransform(r,{name:"tx",port:o.port2},[o.port2]);e.transform=i,await new MA((e=>r.onmessage=t=>{"started"===t.data&&e(void 0)})),o.port1.onmessage=r=>{var o;r.data.transformed&&e.track&&(null===(o=e.track)||void 0===o?void 0:o.id)!==t.track.id&&(oI.debug("audio track changed: ".concat(t.track.id," => ").concat(e.track.id)),t.track.removeEventListener("ended",n),t.track=e.track,t.track.addEventListener("ended",n))},t.worker=r}function n(){if(e.track){if(this.id!==e.track.id)return;e.track.removeEventListener("ended",n)}const t=fU.get(e);if(t){fU.delete(e);try{var o,i;null===(o=t.controller)||void 0===o||o.terminate(),null===(i=t.worker)||void 0===i||i.terminate()}catch(r){oI.warning(r&&r.message)}}}fU.set(e,t),e.track.addEventListener("ended",n)}(t.sender))})),t.forEach((e=>{let{type:t}=e;n.statsCollector.addLocalStats(t)})),n.assignLocalTracks(t,l),n.statsUploader.startUploadOutboundStats(),t.forEach((e=>{let{track:t,type:r}=e;const o=Date.now();n.store.publish(t.getTrackId(),r===JR.LocalAudioTrack?"audio":"video",void 0,o)}))}))()}async updateVideoStreamParameter(e,t){const n=this.localTrackMap.get(t);if(!n)return;if(!(n.track instanceof KB))return oI.warn("[updateVideoStreamParameter]: track is not an instance of LocalVideoTrack");if(!(this.connection instanceof n$||this.connection instanceof PF))return oI.warn("[updateVideoStreamParameter]: connection is not P2PConnection or P2PConnectionPlanB");const{track:r}=n,o=function(e,t){const n={};return e.height&&e.width&&(n.scaleResolutionDownBy=VO(e,t)),n.maxFramerate=e.framerate?UO(e.framerate):void 0,n.maxBitrate=e.bitrate?1e3*e.bitrate:void 0,n}(e,r);if(r._encoderConfig||(r._encoderConfig={}),t!==JR.LocalVideoLowTrack||!xT("DISABLE_DUAL_STREAM_USE_ENCODING")&&UP().supportDualStreamEncoding)null!=o.scaleResolutionDownBy&&(r._encoderConfig.scaleResolutionDownBy=o.scaleResolutionDownBy);else{const t=r._originMediaStreamTrack;if(!t.canvas)return oI.warn("[".concat(r.getTrackId(),"] no canvas on track"));!function(e,t){const n=e.canvas;t.width&&(n.width=UO(t.width)),t.height&&(n.height=UO(t.height)),t.framerate&&(n.stopCapture&&n.stopCapture(),n.stopCapture=BD((()=>{!n.startCapture&&n.stopCapture&&n.stopCapture(),n.startCapture&&n.startCapture()}),UO(t.framerate)))}(t,e)}null!=o.maxBitrate&&(r._encoderConfig.bitrateMax=o.maxBitrate/1e3),null!=o.maxFramerate&&(r._encoderConfig.frameRate&&"object"==typeof r._encoderConfig.frameRate?r._encoderConfig.frameRate.max=o.maxFramerate:r._encoderConfig.frameRate={max:o.maxFramerate}),oI.debug("[".concat(r.getTrackId(),"] LowStreamEncoderConfig: , ").concat(JSON.stringify(r._encoderConfig))),await this.connection.updateRtpSenderEncodings(r)}publishLowStream(e){var t=this;return BC((function*(){if(!t.connection||t.state!==XR.Connected)return;const n=yield UC(t.mutex.lock("Locking from P2PChannel.publishLowStream"));try{const n=t.localTrackMap.get(JR.LocalVideoTrack);if(!n)throw new uw(lw.UNEXPECTED_ERROR,"Could not find high stream");if(t.localTrackMap.has(JR.LocalVideoLowTrack))throw new uw(lw.UNEXPECTED_ERROR,"[".concat(t.store.clientId,"] Can't publish low stream when stream already publish"));const o=[{track:t.getLowVideoTrack(n.track,e),type:JR.LocalVideoLowTrack}];if(yield*MC(s$(t.doPublish(t.connection,o))),n.track.muted||!n.track.enabled){var r;const e=null===(r=t.localTrackMap.get(JR.LocalVideoLowTrack))||void 0===r?void 0:r.id;void 0!==e&&(yield UC(t.connection.muteLocal([e])))}}finally{n()}}))()}async republish(){this.pendingLocalTracks.length>0&&(oI.debug("[".concat(this.store.clientId,"] Emit P2PChannelEvents.RequestRePublish to republish tracks.")),await $w(this,ZR.RequestRePublish,this.pendingLocalTracks),this.emit(ZR.MediaReconnectEnd,this.store.uid),this.pendingLocalTracks=[]),this.pendingLocalDataChannels.length>0&&(oI.debug("Emit P2PChannelEvents.RequestRePublishDataChannel to republish datachannels."),await $w(this,ZR.RequestRePublishDataChannel,this.pendingLocalDataChannels),this.pendingLocalDataChannels=[])}async reSubscribe(e){for(let t=this.pendingRemoteTracks.length-1;t>=0;t--){const{user:e,kind:n}=this.pendingRemoteTracks[t];(n!==qR.AUDIO||e._audio_added_&&e._audioSSRC)&&(n!==qR.VIDEO||e._video_added_&&e._videoSSRC)||this.pendingRemoteTracks.splice(t,1)}if(e)await $w(this,ZR.RequestReSubscribe,this.pendingRemoteTracks);else for(const{user:t,kind:n}of this.pendingRemoteTracks)await this.subscribe(t,n,n===qR.VIDEO?t._videoSSRC:t._audioSSRC);this.pendingRemoteTracks.forEach((e=>{let{user:t}=e;this.emit(ZR.MediaReconnectEnd,t.uid)})),this.pendingRemoteTracks=[]}async unpublish(e){if(!this.connection||this.state!==XR.Connected)return void e.forEach((e=>{const t=this.pendingLocalTracks.indexOf(e);-1!==t&&this.pendingLocalTracks.splice(t,1)}));const t=this.filterTobeUnpublishedTracks(e);if(0===t.length)return;const n=t.find((e=>"videoLowTrack"===e[0]));return n&&n[1].track.close(),this.doUnpublish(this.connection,t)}async unpublishDataChannel(e){if(!this.connection||this.state!==XR.Connected)return void e.forEach((e=>{const t=this.pendingLocalDataChannels.indexOf(e);-1!==t&&this.pendingLocalDataChannels.splice(t,1)}));const t=this.filterTobeUnpublishedDataChannels(e);return 0!==t.length?(t.forEach((e=>{const t=this.localDataChannels.indexOf(e);-1!==t&&this.localDataChannels.splice(t,1)})),0===this.localDataChannels.length&&await this.connection.stopDataChannels(this.store.uid),t.map((e=>e.id))):void 0}async unpublishLowStream(){if(!this.connection||this.state!==XR.Connected)return;const e=this.localTrackMap.get(JR.LocalVideoLowTrack);if(!e)return;e.track.close();const t=[[JR.LocalVideoLowTrack,e]];return this.doUnpublish(this.connection,t)}async doUnpublish(e,t){const n=this.createGatewayUnpublishMessage(t);return await e.stopSending(t.map((e=>{let[,{id:t}]=e;return t}))),this.withdrawLocalTracks(t),this.unbindLocalTrackEvents(t.map((e=>{let[t,{track:n}]=e;return{type:t,track:n}}))),t.forEach((e=>{let[t]=e;this.statsCollector.removeLocalStats(t)})),0===this.localTrackMap.size&&this.statsUploader.stopUploadOutboundStats(),n}async subscribeDataChannel(e,t){if(!this.connection||this.state!==XR.Connected)throw new uw(lw.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");const n=t.filter((t=>{var n;return!(null!==(n=this.remoteDataChannelMap.get(e))&&void 0!==n&&n.get(t.id))}));if(0!==n.length)return await this.connection.createDataChannels(e.uid,n),n.forEach((t=>{var n;this.remoteDataChannelMap.has(e)?null===(n=this.remoteDataChannelMap.get(e))||void 0===n||n.set(t.id,t):this.remoteDataChannelMap.set(e,new Map([[t.id,t]]));const r=this.pendingRemoteDataChannels.findIndex((n=>{let{user:r,id:o}=n;return r.uid===e.uid&&o===t.id}));-1!==r&&this.pendingRemoteDataChannels.splice(r,1)})),n.map((e=>e.id))}async subscribe(e,t,n,r,o){var i;if(!this.connection||this.state!==XR.Connected)throw new uw(lw.INVALID_OPERATION,"Cannot subscribe remote user when peerConnection disconnected.");if(null!==(i=this.remoteUserMap.get(e))&&void 0!==i&&i.has(t))return;let a,s,c;const l=this.connection.getPreMedia(n);if(l)oI.debug("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] preSSRCMap has ssrcId: ").concat(n,", no need to send sub to gateway.")),c=l.transceiver,a=l.track,s=l.id;else if(o){const n=o.find((e=>{let{stream_type:n}=e;return n===t}));if(!n)throw new uw(lw.UNEXPECTED_ERROR,"Cannot subscribe to remote ".concat(t," for user: ").concat(e.uid," because subscribe answer from gateway does not contain stream_type: ").concat(t,"."));const r=await this.connection.receive(t,n.ssrcs,String(e._uintid),n.attributes);this.connection instanceof n$&&(c=r.transceiver),a=r.track,s=r.id}else{const o=await this.connection.receive(t,[{ssrcId:n,rtx:r}],String(e._uintid),void 0);this.connection instanceof n$&&(c=o.transceiver),a=o.track,s=o.id}t===qR.AUDIO?(e._audioTrack?e._audioTrack._updateOriginMediaStreamTrack(a):(e._audioTrack=new lU(a,e.uid,e._uintid,this.store),oI.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(e._audioTrack.getTrackId()))),c&&e._audioTrack._updateRtpTransceiver(c),this.bindRemoteTrackEvents(e,e._audioTrack)):(e._videoTrack?e._videoTrack._updateOriginMediaStreamTrack(a):(e._videoTrack=new cU(a,e.uid,e._uintid,this.store),oI.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(e._videoTrack.getTrackId()))),c&&e._videoTrack._updateRtpTransceiver(c),this.bindRemoteTrackEvents(e,e._videoTrack)),xT("ENABLE_VIDEO_SEI")&&c&&(t==qR.VIDEO?await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!UP().supportWebRTCEncodedTransform)return void oI.warning("browser not support video encoded transform");if(!e.track)return;if(vU.has(e)){const n=vU.get(e);return void(n&&(n.onSei=t.onSei))}const n={track:e.track,onSei:t.onSei};if(MS()){if(!e.createEncodedStreams)return void oI.warning("browser not support createEncodedStreams() API");let t=null;try{t=e.createEncodedStreams()}catch(o){return void oI.error("create video-encoded-streams error",o&&o.message)}const i=new TransformStream({transform(t,o){n.controller||(n.controller=o),e.track&&e.track.id!==n.track.id&&(oI.debug("video track changed: ".concat(n.track.id," => ").concat(e.track.id)),n.track.removeEventListener("ended",r),n.track=e.track,n.track.addEventListener("ended",r));const i=function(e){const t=new DataView(e.data);let n=0;for(;n+4<e.data.byteLength;){if(0===t.getUint8(n+0)&&0===t.getUint8(n+1)&&0===t.getUint8(n+2)&&1===t.getUint8(n+3)&&6===t.getUint8(n+4)){let r=n+6,o=0,i=0;for(;255===(i=t.getUint8(r++));)o+=255;o+=i;const a=mU(e.data,r,o);return new Uint8Array(a)}n++}return null}(t);i&&n.onSei&&n.onSei(i),o.enqueue(t)}});t.readable.pipeThrough(i).pipeTo(t.writable)}else if(xS()){if("undefined"==typeof RTCRtpScriptTransform)return void oI.warning("browser not support RTCRtpScriptTransform");const t=hU(),o=new MessageChannel;await new MA((e=>t.onmessage=t=>{"registered"===t.data&&e(void 0)}));const i=new RTCRtpScriptTransform(t,{name:"rx",port:o.port2},[o.port2]);e.transform=i,await new MA((e=>t.onmessage=t=>{"started"===t.data&&e(void 0)})),o.port1.onmessage=t=>{var o;t.data.transformed&&e.track&&(null===(o=e.track)||void 0===o?void 0:o.id)!==n.track.id?(oI.debug("video track changed: ".concat(n.track.id," => ").concat(e.track.id)),n.track.removeEventListener("ended",r),n.track=e.track,n.track.addEventListener("ended",r)):t.data.sei&&n.onSei&&n.onSei(t.data.sei)},n.worker=t}function r(){if(e.track){if(this.id!==e.track.id)return;e.track.removeEventListener("ended",r)}!function(e){const t=vU.get(e);if(t){vU.delete(e);try{var n,r;null===(n=t.controller)||void 0===n||n.terminate(),null===(r=t.worker)||void 0===r||r.terminate()}catch(o){oI.warning(o&&o.message)}}}(e)}vU.set(e,n),e.track.addEventListener("ended",r)}(c.receiver,{onSei:t=>{var n;null===(n=e._videoTrack)||void 0===n||n._onSei(t)}}):t==qR.AUDIO&&await async function(e){if(!UP().supportWebRTCEncodedTransform)return void oI.warning("browser not support audio encoded transform");if(gU.has(e))return;const t={track:e.track};if(MS()){if(!e.createEncodedStreams)return void oI.warning("browser not support createEncodedStreams() API");let o=null;try{o=e.createEncodedStreams()}catch(r){return void oI.error("create audio-encoded-streams error",r&&r.message)}const i=new TransformStream({transform(r,o){t.controller||(t.controller=o),e.track&&e.track.id!==t.track.id&&(oI.debug("audio track changed: ".concat(t.track.id," => ").concat(e.track.id)),t.track.removeEventListener("ended",n),t.track=e.track,t.track.addEventListener("ended",n)),o.enqueue(r)}});o.readable.pipeThrough(i).pipeTo(o.writable)}else if(xS()){if("undefined"==typeof RTCRtpScriptTransform)return void oI.warning("browser not support RTCRtpScriptTransform");const r=hU(),o=new MessageChannel;await new MA((e=>r.onmessage=t=>{"registered"===t.data&&e(void 0)}));const i=new RTCRtpScriptTransform(r,{name:"rx",port:o.port2},[o.port2]);e.transform=i,await new MA((e=>r.onmessage=t=>{"started"===t.data&&e(void 0)})),o.port1.onmessage=r=>{var o;r.data.transformed&&e.track&&(null===(o=e.track)||void 0===o?void 0:o.id)!==t.track.id&&(oI.debug("audio track changed: ".concat(t.track.id," => ").concat(e.track.id)),t.track.removeEventListener("ended",n),t.track=e.track,t.track.addEventListener("ended",n))},t.worker=r}function n(){e.track.removeEventListener("ended",n),function(e){const t=gU.get(e);if(t){gU.delete(e);try{var n,r;null===(n=t.controller)||void 0===n||n.terminate(),null===(r=t.worker)||void 0===r||r.terminate()}catch(o){oI.warning(o&&o.message)}}}(e)}gU.set(e,t),e.track.addEventListener("ended",n)}(c.receiver));const u=this.remoteUserMap.get(e);u?u.set(t,s):this.remoteUserMap.set(e,new Map([[t,s]])),this.statsCollector.addRemoteStats(e.uid),this.statsUploader.startUploadInboundStats();const d=this.pendingRemoteTracks.findIndex((n=>{let{user:r,kind:o}=n;return r.uid===e.uid&&t===o}));-1!==d&&(this.pendingRemoteTracks.splice(d,1),this.emit(ZR.MediaReconnectEnd,e.uid))}async massSubscribe(e){return this.massSubscribeNoLock(e)}async massSubscribeNoLock(e){if(!this.connection||this.state!==XR.Connected)throw new uw(lw.INVALID_OPERATION,"Cannot subscribeAll remote users when peerConnection disconnected.");e=e.filter((e=>{var t;let{user:n,mediaType:r}=e;return!(null!==(t=this.remoteUserMap.get(n))&&void 0!==t&&t.has(r))}));const t=[],n=new Map;e.forEach((e=>{if(!this.connection)return;const r=this.connection.getPreMedia(e.ssrcId);r?n.set(e.ssrcId,r):t.push(e)}));const r=await this.connection.batchReceive(t.map((e=>{let{user:t,mediaType:n,ssrcId:r,rtxSsrcId:o}=e;return{kind:n,ssrcMsg:[{ssrcId:r,rtx:o}],mslabel:String(t._uintid)}})));t.forEach(((e,t)=>{n.set(e.ssrcId,r[t])})),e.forEach((e=>{let{user:t,mediaType:r,ssrcId:o}=e;const i=n.get(o);if(!i)return void oI.debug("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] cannot find ").concat(t.uid," subscribe data,").concat(r,", ").concat(o));const{track:a,id:s,transceiver:c}=i;r===qR.AUDIO?(t._audioTrack?t._audioTrack._updateOriginMediaStreamTrack(a):(t._audioTrack=new lU(a,t.uid,t._uintid,this.store),oI.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote audio track: ").concat(t._audioTrack.getTrackId()))),c&&t._audioTrack._updateRtpTransceiver(c),this.bindRemoteTrackEvents(t,t._audioTrack)):(t._videoTrack?t._videoTrack._updateOriginMediaStreamTrack(a):(t._videoTrack=new cU(a,t.uid,t._uintid,this.store),oI.info("[".concat(this.store.clientId,"] [").concat(this.store.p2pId,"] create remote video track: ").concat(t._videoTrack.getTrackId()))),c&&t._videoTrack._updateRtpTransceiver(c),this.bindRemoteTrackEvents(t,t._videoTrack));const l=this.remoteUserMap.get(t);l?l.set(r,s):this.remoteUserMap.set(t,new Map([[r,s]])),this.statsCollector.addRemoteStats(t.uid),this.statsUploader.startUploadInboundStats();const u=this.pendingRemoteTracks.findIndex((e=>{let{user:n,kind:o}=e;return n.uid===t.uid&&r===o}));-1!==u&&(this.pendingRemoteTracks.splice(u,1),this.emit(ZR.MediaReconnectEnd,t.uid))}))}async unsubscribe(e,t,n){const r=this.pendingRemoteTracks.filter((n=>{let{user:r,kind:o}=n;return void 0!==t?r.uid===e.uid&&t===o:r.uid===e.uid}));if(r.forEach((e=>{const t=this.pendingRemoteTracks.indexOf(e);this.pendingRemoteTracks.splice(t,1)})),this.connection&&this.state===XR.Connected||n||r.forEach((t=>{let{kind:n}=t;var r;if(n===qR.AUDIO)null===(r=e._audioTrack)||void 0===r||r._destroy(),e._audioTrack=void 0;else if(n===qR.VIDEO){var o;null===(o=e._videoTrack)||void 0===o||o._destroy(),e._videoTrack=void 0}})),!this.connection||this.state!==XR.Connected)return;const o=this.filterTobeUnSubscribedTracks(e,t);if(0===o.length)return;await this.connection.stopReceiving(o.map((e=>{let[,{id:t}]=e;return t})));const i=this.createUnsubscribeMessage(o);return this.withdrawRemoteTracks(o),0===this.remoteUserMap.size&&this.statsUploader.stopUploadInboundStats(),o.forEach((e=>{let[t,{kind:r}]=e;var o,i;if(r===qR.VIDEO&&t._videoSSRC&&(null===(o=this.connection)||void 0===o||o.setStatsRemoteVideoIsReady(t._videoSSRC,!1)),r===qR.VIDEO)this.unbindRemoteTrackEvents(t._videoTrack),n||(null===(i=t._videoTrack)||void 0===i||i._destroy(),t._videoTrack=void 0);else if(r===qR.AUDIO){var a;this.unbindRemoteTrackEvents(t._audioTrack),n||(null===(a=t._audioTrack)||void 0===a||a._destroy(),t._audioTrack=void 0)}})),i}async unsubscribeDataChannel(e,t){if(t.forEach((e=>{const t=this.pendingRemoteDataChannels.findIndex((t=>t.id===e.id));-1!==t&&this.pendingRemoteDataChannels.splice(t,1)})),!this.connection)return;const n=this.filterTobeUnSubscribedDataChannels(e,t);if(0===n.length)return;t.forEach((e=>{e._close()}));const r=this.remoteDataChannelMap.get(e);return n.forEach((e=>{r&&r.delete(e.id)})),r&&0===r.size&&(this.remoteDataChannelMap.delete(e),await this.connection.stopDataChannels(e.uid)),n.map((e=>e.id))}async massUnsubscribe(e){return this.massUnsubscribeNoLock(e)}async massUnsubscribeNoLock(e){let t=[];for(const{user:o,mediaType:i}of e){const e=this.pendingRemoteTracks.filter((e=>{let{user:t,kind:n}=e;return void 0!==i?t.uid===o.uid&&i===n:t.uid===o.uid}));e.forEach((e=>{const t=this.pendingRemoteTracks.indexOf(e);this.pendingRemoteTracks.splice(t,1)})),t=t.concat(e)}if(!this.connection||this.state!==XR.Connected)return void t.forEach((e=>{let{user:t,kind:n}=e;var r;if(n===qR.AUDIO)null===(r=t._audioTrack)||void 0===r||r._destroy(),t._audioTrack=void 0;else if(n===qR.VIDEO){var o;null===(o=t._videoTrack)||void 0===o||o._destroy(),t._videoTrack=void 0}}));const n=Kr(e).call(e,((e,t)=>{let{user:n,mediaType:r}=t;const o=this.filterTobeUnSubscribedTracks(n,r);return e.concat(o)}),[]);if(0===n.length)return;await this.connection.stopReceiving(n.map((e=>{let[,{id:t}]=e;return t})));const r=this.createUnsubscribeAllMessage(n);return this.withdrawRemoteTracks(n),0===this.remoteUserMap.size&&this.statsUploader.stopUploadInboundStats(),n.forEach((e=>{let[t,{kind:n}]=e;var r,o;if(n===qR.VIDEO&&t._videoSSRC&&(null===(r=this.connection)||void 0===r||r.setStatsRemoteVideoIsReady(t._videoSSRC,!1)),n===qR.VIDEO)this.unbindRemoteTrackEvents(t._videoTrack),null===(o=t._videoTrack)||void 0===o||o._destroy(),t._videoTrack=void 0;else if(n===qR.AUDIO){var i;this.unbindRemoteTrackEvents(t._audioTrack),null===(i=t._audioTrack)||void 0===i||i._destroy(),t._audioTrack=void 0}})),r}isPreSubScribe(e){return!(!this.connection||this.state!==XR.Connected||!this.connection.getPreMedia(e))}async muteRemote(e,t){if(!this.connection)return;const n=this.remoteUserMap.get(e);if(!n)return void oI.warning("[".concat(this.store.clientId,"] P2PChannel.muteRemote has no remote user ").concat(e.uid,"."));if(!n.get(t))return void oI.warning("[".concat(this.store.clientId,"] P2PChannel.muteRemote has no remote user ").concat(e.uid," media type ").concat(t,"."));const r=t===qR.VIDEO?e._videoSSRC:e._audioSSRC;void 0!==r&&this.connection.setStatsRemoteVideoIsReady(r,!1)}async unmuteRemote(e,t){return this.unmuteRemoteNoLock(e,t)}async unmuteRemoteNoLock(e,t){if(!this.connection)return;const n=this.remoteUserMap.get(e);n?n.get(t)||oI.warning("[".concat(this.store.clientId,"] P2PChannel.unmuteRemote has no remote user ").concat(e.uid," media type ").concat(t,".")):oI.warning("[".concat(this.store.clientId,"] P2PChannel.unmuteRemote has no remote user ").concat(e.uid,"."))}getAllTracks(e){const t=this.localTrackMap.get(JR.LocalAudioTrack);if((null==t?void 0:t.track)instanceof aB){const n=t.track;return Array.from(this.localTrackMap.entries()).filter((e=>{let[t]=e;return t!==JR.LocalAudioTrack})).filter((t=>{let[n]=t;return!(e&&n===JR.LocalVideoLowTrack)})).map((e=>{let[,{track:t}]=e;return t})).concat(n.trackList)}return Array.from(this.localTrackMap.entries()).filter((t=>{let[n]=t;return!(e&&n===JR.LocalVideoLowTrack)})).map((e=>{let[,{track:t}]=e;return t}))}getAllDataChannels(){return this.localDataChannels}reportPublishEvent(e,t,n,r,o){if(e){const n=this.localTrackMap.get(JR.LocalAudioTrack),i=r?this.localTrackMap.get(JR.LocalVideoLowTrack):this.localTrackMap.get(JR.LocalVideoTrack);AI.publish(this.store.sessionId,{eventElapse:YM.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:null==n?void 0:n.track.getTrackLabel(),videoName:null==i?void 0:i.track.getTrackLabel(),screenshare:-1!==(null==i?void 0:i.track._hints.indexOf(tD.SCREEN_TRACK)),audio:!!n,video:!!i,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:o})}else{var i;n||(n=[]);const a=n.find((e=>e instanceof rB)),s=r?null===(i=this.localTrackMap.get(JR.LocalVideoTrack))||void 0===i?void 0:i.track:n.find((e=>e instanceof KB));AI.publish(this.store.sessionId,{eventElapse:YM.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:e,ec:t,audioName:null==a?void 0:a.getTrackLabel(),videoName:null==s?void 0:s.getTrackLabel(),screenshare:-1!==(null==s?void 0:s._hints.indexOf(tD.SCREEN_TRACK)),audio:!!a,video:!!s,p2pid:this.store.p2pId,publishRequestid:this.store.pubId,extend:o})}}reportSubscribeEvent(e,t,n,r){const o=r===qR.VIDEO?n._videoSSRC:n._audioSSRC;o&&AI.subscribe(this.store.sessionId,{succ:e,ec:t,video:r===qR.VIDEO,audio:r===qR.AUDIO,peerid:n.uid,subscribeRequestid:o,p2pid:this.store.p2pId,eventElapse:YM.measureFromSubscribeStart(this.store.clientId,o),preSsrc:this.isPreSubScribe(o)})}reset(){oI.debug("[".concat(this.store.clientId,"] P2PChannel.reset")),this.mutex=new _T("P2PChannel-mutex",this.store.clientId),this.connection&&(this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0),this.shouldForwardP2PCreation&&(this.connection=this.isPlanB?new PF({},this.store):new n$({},this.store),this.bindConnectionEvents(this.connection)),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),this.statsUploader.stopUploadExtensionUsageStats(),this.unbindLocalTrackEvents(),this.unbindAllRemoteTrackEvents(),this.unbindRtpTransceiver();const e=this.localTrackMap.get(JR.LocalAudioTrack);if((null==e?void 0:e.track)instanceof aB){if(e.track.trackList.length>0){const t=e.track;e.track.trackList.forEach((e=>{t.removeAudioTrack(e)}))}e.track.close()}this.localTrackMap.clear(),this.remoteUserMap.clear(),this.statsCollector.removeRemoteStats(),this.statsCollector.removeLocalStats(),this.iceFailedCount=0,this.dtlsFailedCount=0,this.pendingLocalTracks=[],this.pendingRemoteTracks=[],this.localDataChannels=[],this.remoteDataChannelMap.clear(),this.pendingLocalDataChannels=[],this.pendingRemoteDataChannels=[],this.state=XR.Disconnected}getStats(){var e;return null===(e=this.connection)||void 0===e?void 0:e.getStats()}getRemoteVideoIsReady(e){var t;return(null===(t=this.connection)||void 0===t?void 0:t.getRemoteVideoIsReady(e))||!1}getLocalAudioVolume(){const e=this.localTrackMap.get(JR.LocalAudioTrack);if(e)return e.track.getVolumeLevel()}getLocalVideoSize(){const e=this.localTrackMap.get(JR.LocalVideoTrack);if(e)return{width:e.track.videoWidth||0,height:e.track.videoHeight||0}}getEncoderConfig(e){const t=this.localTrackMap.get(e);return t&&t.track instanceof KB||t&&t.track instanceof rB?t.track._encoderConfig:void 0}getLocalMedia(e){return this.localTrackMap.get(e)}hasLocalMedia(){return this.localTrackMap.size>0}hasRemoteMedia(e,t){if(!e)return this.remoteUserMap.size>0;const n=this.remoteUserMap.get(e);return!!n&&(!t||n.has(t))}async hasRemoteMediaWithLock(e,t){if(!e)return this.remoteUserMap.size>0;const n=this.remoteUserMap.get(e);return!!n&&(!t||n.has(t))}getRemoteMedia(e){var t;const n=Array.from(rh(t=this.remoteUserMap).call(t)).find((t=>t.uid===e));return n?{audioTrack:n.audioTrack,audioSSRC:n._audioSSRC,videoTrack:n.videoTrack,videoSSRC:n._videoSSRC}:{}}getAudioLevels(){let e=Array.from(this.remoteUserMap.entries()).map((e=>{let[t]=e;return{uid:t.uid,level:t.audioTrack?100*t.audioTrack._source.getAccurateVolumeLevel():0}}));const t=this.localTrackMap.get(JR.LocalAudioTrack);return t&&e.push({level:100*t.track._source.getAccurateVolumeLevel(),uid:this.store.uid}),e=Xh(e).call(e,((e,t)=>e.level-t.level)),e}async disconnectForReconnect(){this.connection&&(oI.debug("[".concat(this.store.clientId,"] P2PChannel.disconnectForReconnect closing P2PConnection")),this.state=XR.Reconnecting,xT("KEEP_LAST_FRAME")&&0!==this.remoteUserMap.size&&Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t]=e;var n;t._videoTrack&&t._videoTrack._player&&(null===(n=t._videoTrack._player.getVideoElement())||void 0===n||n.pause(),t._videoTrack._player.isKeepLastFrame=!0,t._videoTrack._originMediaStreamTrack.stop())})),this.connection.close(),this.unbindConnectionEvents(this.connection),this.connection=void 0,this.shouldForwardP2PCreation&&(this.connection=this.isPlanB?new PF({},this.store):new n$({},this.store),this.bindConnectionEvents(this.connection)),0!==this.localTrackMap.size&&(Array.from(this.localTrackMap.entries()).forEach((e=>{var t;let[n,{track:r}]=e;switch(n){case JR.LocalVideoTrack:Or(t=r._hints).call(t,tD.LOW_STREAM)?r.close():this.pendingLocalTracks.push(r);break;case JR.LocalAudioTrack:r instanceof aB?this.pendingLocalTracks=this.pendingLocalTracks.concat(r.trackList):this.pendingLocalTracks.push(r);case JR.LocalVideoLowTrack:}})),this.emit(ZR.MediaReconnectStart,this.store.uid)),this.unbindLocalTrackEvents(),this.localTrackMap.clear(),0!==this.remoteUserMap.size&&Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t,n]=e;Array.from(rh(n).call(n)).forEach((e=>{this.setPendingRemoteMedia(t,e)})),this.emit(ZR.MediaReconnectStart,t.uid)})),this.unbindAllRemoteTrackEvents(),this.remoteUserMap.clear(),0!==this.localDataChannels.length&&(this.localDataChannels.forEach((e=>{this.pendingLocalDataChannels.push(e)})),this.localDataChannels.length=0),0!==this.remoteDataChannelMap.size&&(Array.from(this.remoteDataChannelMap.entries()).forEach((e=>{let[t,n]=e;Array.from(rh(n).call(n)).forEach((e=>{this.setPendingRemoteDataChannel(t,e)}))})),this.remoteDataChannelMap.clear()),this.statsUploader.stopUploadOutboundStats(),this.statsUploader.stopUploadInboundStats(),this.statsUploader.stopUploadTransportStats(),oI.debug("[".concat(this.store.clientId,"] P2PChannel disconnected, waiting to reconnect.")))}hasPendingRemoteDataChannel(e,t){for(const n of this.pendingRemoteDataChannels){const{user:r,id:o}=n;if((e instanceof tF?e.uid:e)===r.uid&&o===t)return!0}return!1}setPendingRemoteDataChannel(e,t){this.hasPendingRemoteDataChannel(e,t)||this.pendingRemoteDataChannels.push({user:e,id:t})}hasPendingRemoteMedia(e,t){for(const n of this.pendingRemoteTracks){const{user:r,kind:o}=n;if((e instanceof tF?e.uid:e)===r.uid&&t===o)return!0}return!1}setPendingRemoteMedia(e,t){this.hasPendingRemoteMedia(e,t)||this.pendingRemoteTracks.push({user:e,kind:t})}restartICE(e){var t=this;return BC((function*(){if(!t.connection||t.state!==XR.Connected)return;const n=yield UC(t.mutex.lock("From P2PChannel.restartICE"));let r;try{r=yield UC(t.connection.restartICE(e));const n=yield UC(r.next());if(n.done)return;const o=n.value,i=yield o;switch(t.reportPCDisconnectedOrFailed(e),e){case zR.TCP:t._pcStatsUploadType=YR.TCP_RESTART;break;case zR.RELAY:t._pcStatsUploadType=YR.RELAY_RESTART;break;default:t._pcStatsUploadType=YR.OLD_RESTART}t._isInRestartIce=!0,r.next(i)}catch(i){var o;null===(o=r)||void 0===o||o.throw(i)}finally{n()}}))()}getUplinkNetworkQuality(){if(!this.connection)return 0;const e=this.connection.getStats(),t=this.localTrackMap.get(JR.LocalVideoTrack),n=this.localTrackMap.get(JR.LocalAudioTrack),r=e.videoSend.find((e=>e.ssrc===(null==t?void 0:t.ssrcs[0].ssrcId))),o=e.audioSend.find((e=>e.ssrc===(null==n?void 0:n.ssrcs[0].ssrcId)));if(!r||!o)return 1;const i=Hw(this,ZR.NeedSignalRTT),a=r?r.rttMs:void 0,s=o?o.rttMs:void 0,c=a&&s?(a+s)/2:a||s,l=(c&&i?(c+i)/2:c||i)||0,u=100*e.sendPacketLossRate*.7/50+.3*l/1500,d=u<.17?1:u<.36?2:u<.59?3:u<.1?4:5,A=null==t?void 0:t.track;if(A&&A._encoderConfig&&-1===A._hints.indexOf(tD.SCREEN_TRACK)){const t=A._encoderConfig.bitrateMax,n=e.bitrate.actualEncoded;if(t&&n){const e=(1e3*t-n)/(1e3*t);return fI[e<.15?0:e<.3?1:e<.45?2:e<.6?3:4][d]}}return d}getDownlinkNetworkQuality(){if(!this.connection)return 0;const e=this.connection.getStats();let t=0;return Array.from(this.remoteUserMap.entries()).forEach((n=>{let[r]=n;const o=r._audioSSRC,i=r._videoSSRC,a=e.audioRecv.find((e=>e.ssrc===o)),s=e.videoRecv.find((e=>e.ssrc===i));if(!a&&!s)return void(t+=1);const c=Hw(this,ZR.NeedSignalRTT),l=e.rtt,u=(l&&c?(l+c)/2:l||c)||0,d=a?a.jitterMs:void 0,A=e.recvPacketLossRate;let p=.7*A*100/50+.3*u/1500;d&&(p=.6*A*100/50+.2*u/1500+.2*d/400),t+=p<.1?1:p<.17?2:p<.36?3:p<.59?4:5})),this.remoteUserMap.size>0?Math.round(t/this.remoteUserMap.size):t}async muteLocalTrack(e){return new MA(((t,n)=>{this.handleMuteLocalTrack(e,t,n)}))}async replaceTrack(e,t){var n;if(oI.debug("[".concat(this.store.clientId,"] P2PChannel replaceTrack from [").concat(e.getTrackId(),"] to [").concat(t.getTrackId(),"]")),!this.connection||this.state!==XR.Connected)return;const r=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:n}]=t;return e===n}));if(!r)return;const o=r[0];if(e!==t&&(this.unbindLocalTrackEvents([{track:e,type:o}]),this.bindLocalTrackEvents([{track:t,type:o}]),r[1].track=t),await(null===(n=this.connection)||void 0===n?void 0:n.replaceTrack(t,r[1].id)),this.isPlanB){const e=r[1];e.id=t._mediaStreamTrack.id,this.localTrackMap.set(o,e)}if(o===JR.LocalVideoTrack&&!xT("DISABLE_DUAL_STREAM_USE_ENCODING")&&UP().supportDualStreamEncoding){const t=this.localTrackMap.get(JR.LocalVideoLowTrack);if(t){const n=e._mediaStreamTrack.clone();t.track._originMediaStreamTrack.stop(),t.track._mediaStreamTrack=n,t.track._originMediaStreamTrack=n,await new MA(((e,n)=>{this.handleReplaceTrack(t.track,e,n,!0)}))}}}filterTobePublishedTracks(e,t,n){const r=[],o=this.getAllTracks();e=Kw(e=e.filter((e=>-1===o.indexOf(e))));let i,a=!1;const s=this.localTrackMap.get(JR.LocalAudioTrack);for(const c of e){if(c instanceof KB&&(this.localTrackMap.has(JR.LocalVideoTrack)||a?new uw(lw.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS).throw():(r.push({track:c,type:JR.LocalVideoTrack}),a=!0),t)){const e=this.getLowVideoTrack(c,n);r.push({track:e,type:JR.LocalVideoLowTrack})}if(c instanceof rB)if(s){const e=s.track;if(e instanceof aB)oF([c]),e.addAudioTrack(c),this.bindLocalAudioTrackEvents(c,!0);else{const t=iF([e,c]);oI.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection will replace audioTrack [").concat(t.getTrackId(),"]")),this.replaceTrack(e,t)}}else i instanceof aB?(oF([c]),i.addAudioTrack(c)):i=i||!c._useAudioElement&&UP().webAudioMediaStreamDest&&!c._bypassWebAudio?iF(i?[c,i]:[c]):c}return i&&(oI.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection will send audioTrack [").concat(i.getTrackId(),"]")),r.push({track:i,type:JR.LocalAudioTrack})),r}filterTobeUnpublishedTracks(e){const t=[],n=this.getAllTracks();e=Kw(e=e.filter((e=>-1!==n.indexOf(e))));for(const r of e){if(r instanceof rB){const e=this.localTrackMap.get(JR.LocalAudioTrack);if(!e)continue;e.track instanceof aB?(e.track.removeAudioTrack(r),this.unbindLocalAudioTrackEvents(r),0===e.track.trackList.length&&(t.push([JR.LocalAudioTrack,e]),e.track.close())):t.push([JR.LocalAudioTrack,e])}if(r instanceof KB){const e=this.localTrackMap.get(JR.LocalVideoTrack);if(!e)continue;t.push([JR.LocalVideoTrack,e]);const n=this.localTrackMap.get(JR.LocalVideoLowTrack);n&&t.push([JR.LocalVideoLowTrack,n])}}return t}filterTobePublishedDataChannels(e){return(e=Kw(e)).filter((e=>-1===this.localDataChannels.findIndex((t=>t.id===e.id))))}filterTobeUnpublishedDataChannels(e){return(e=(e=Kw(e)).filter((e=>-1!==this.localDataChannels.indexOf(e)))).filter((e=>e._originDataChannel))}bindLocalTrackEvents(e){e.forEach((e=>{let{track:t,type:n}=e;switch(n){case JR.LocalVideoTrack:t.addListener(eD.GET_STATS,this.handleGetLocalVideoStats),t.addListener(eD.GET_RTC_STATS,this.handleGetRTCStats),t.addListener(eD.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.addListener(eD.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.addListener(eD.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),t.addListener(eD.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),t.addListener(eD.NEED_REPLACE_TRACK,this.handleReplaceTrack),t.addListener(eD.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.addListener(eD.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case JR.LocalAudioTrack:this.bindLocalAudioTrackEvents(t);case JR.LocalVideoLowTrack:}}))}bindLocalAudioTrackEvents(e,t){e instanceof aB?e.trackList.forEach((e=>{e.addListener(eD.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(eD.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(eD.GET_STATS,this.handleGetLocalAudioStats),e.addListener(eD.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(eD.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)})):(e.addListener(eD.GET_STATS,this.handleGetLocalAudioStats),e.addListener(eD.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.addListener(eD.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.addListener(eD.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.addListener(eD.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack),t||(e.addListener(eD.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.addListener(eD.NEED_REPLACE_MIXING_TRACK,this.handleReplaceMixingTrack)))}unbindLocalTrackEvents(e){e||(e=Array.from(this.localTrackMap.entries()).map((e=>{let[t,{track:n}]=e;return{track:n,type:t}}))),e.forEach((e=>{let{track:t,type:n}=e;switch(n){case JR.LocalVideoTrack:t.off(eD.GET_STATS,this.handleGetLocalVideoStats),t.off(eD.GET_RTC_STATS,this.handleGetRTCStats),t.off(eD.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),t.off(eD.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),t.off(eD.NEED_UPDATE_VIDEO_ENCODER,this.handleUpdateVideoEncoder),t.off(eD.NEED_UPDATE_VIDEO_SEND_PARAMETERS,this.handleUpdateVideoSendParameters),t.off(eD.NEED_REPLACE_TRACK,this.handleReplaceTrack),t.off(eD.NEED_MUTE_TRACK,this.handleMuteLocalTrack),t.off(eD.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack);break;case JR.LocalAudioTrack:this.unbindLocalAudioTrackEvents(t);case JR.LocalVideoLowTrack:}}))}unbindLocalAudioTrackEvents(e){e instanceof aB?e.trackList.forEach((e=>{e.off(eD.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(eD.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(eD.GET_STATS,this.handleGetLocalAudioStats),e.off(eD.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(eD.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack)})):(e.off(eD.GET_STATS,this.handleGetLocalAudioStats),e.off(eD.NEED_DISABLE_TRACK,this.handleMuteLocalTrack),e.off(eD.NEED_ENABLE_TRACK,this.handleUnmuteLocalTrack),e.off(eD.NEED_REPLACE_TRACK,this.handleReplaceTrack),e.off(eD.NEED_REPLACE_MIXING_TRACK,this.handleReplaceMixingTrack),e.off(eD.NEED_MUTE_TRACK,this.handleMuteLocalTrack),e.off(eD.NEED_UNMUTE_TRACK,this.handleUnmuteLocalTrack))}bindRemoteTrackEvents(e,t){t instanceof cU&&t.addListener(eD.GET_STATS,(t=>{t(this.handleGetRemoteVideoStats(e))})),t instanceof lU&&t.addListener(eD.GET_STATS,(t=>{t(this.handleGetRemoteAudioStats(e))}))}unbindRemoteTrackEvents(e){e&&e.removeAllListeners(eD.GET_STATS)}unbindAllRemoteTrackEvents(){Array.from(this.remoteUserMap.entries()).forEach((e=>{let[t,n]=e;n.has(qR.AUDIO)&&this.unbindRemoteTrackEvents(t._audioTrack),n.has(qR.VIDEO)&&this.unbindRemoteTrackEvents(t._videoTrack)}))}createGatewayPublishMessage(e,t){return e.map(((e,n)=>{var r;let o,i,{track:a,type:s}=e;switch(s){case JR.LocalAudioTrack:o=MR.Audio,i={dtx:a instanceof oB&&a._config.DTX,hq:!1,lq:!1,stereo:!1,speech:!1};break;case JR.LocalVideoTrack:o=Or(r=a._hints).call(r,tD.SCREEN_TRACK)?MR.Screen:MR.High,i=a$(a$({},MO(a)),{},{codec:this.store.codec,svc_mode:wU()});break;case JR.LocalVideoLowTrack:o=MR.Low,i=a$(a$({},MO(a)),{},{codec:this.store.codec,svc_mode:wU()})}return{stream_type:o,attributes:i,ssrcs:t[n]}}))}createGatewayUnpublishMessage(e){return e.map((e=>{var t;let n,[r,{track:o,ssrcs:i,id:a}]=e;switch(r){case JR.LocalVideoTrack:n=Or(t=o._hints).call(t,tD.SCREEN_TRACK)?MR.Screen:MR.High;break;case JR.LocalAudioTrack:n=MR.Audio;break;case JR.LocalVideoLowTrack:n=MR.Low}return{stream_type:n,ssrcs:i,mid:a}}))}assignLocalTracks(e,t){e.forEach(((e,n)=>{let{track:r,type:o}=e;this.localTrackMap.set(o,{track:r,id:t[n].id,ssrcs:t[n].localSSRC})}))}withdrawLocalTracks(e){e.forEach((e=>{let[t]=e;this.localTrackMap.delete(t)}))}bindConnectionEvents(e){e.onConnectionStateChange=async t=>{if(oI.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onConnectionStateChange(").concat(t,")")),this.emit(ZR.PeerConnectionStateChange,t),"connected"!==t||this.store.keyMetrics.peerConnectionEnd||this.store.peerConnectionEnd(),"connected"===t&&(this._restartTimer&&(clearTimeout(this._restartTimer),this._restartTimer=void 0),(this._isFirstConnected||this._isInRestartIce)&&this.reportPCStats(Date.now(),!0,this._pcStatsUploadType),this._isInRestartIce=!1,this._isFirstConnected=!1,this._isStartRestartIce=!1),xT("NEW_ICE_RESTART")){var n;if(Or(n=this._restartStates).call(n,t)){if(this._isStartRestartIce)return;this._isStartRestartIce=!0;const t=t=>{"disconnected"!==e.iceConnectionState&&"checking"!==e.iceConnectionState&&"failed"!==e.iceConnectionState||(oI.debug("[".concat(this.store.clientId,"] [P2PChannel] start use restartICE, type is ").concat(t)),"CONNECTED"===Hw(this,ZR.QueryClientConnectionState)&&this.emit(ZR.RequestRestartICE,t))},n=()=>{"disconnected"!==e.iceConnectionState&&"checking"!==e.iceConnectionState&&"failed"!==e.iceConnectionState||(this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),oI.debug("[".concat(this.store.clientId,"] P2PConnection disconnected timeout, force reconnect")),setTimeout((()=>this.emit(ZR.P2PLost)),0),this.iceFailedCount+=1,this.requestReconnect())},r=xT("ICE_RESTART_INTERVAL");return void(this._restartTimer=window.setTimeout((()=>{if(xT("JOIN_WITH_FALLBACK_MEDIA_PROXY_FORCE")&&UP().supportPCSetConfiguration)t(zR.RELAY),this._restartTimer=window.setTimeout(n,r);else if($S())t(zR.UDP),this._restartTimer=window.setTimeout(n,4e3);else{if(t(zR.TCP),UP().supportPCSetConfiguration)return void(this._restartTimer=window.setTimeout((()=>{t(zR.RELAY),this._restartTimer=window.setTimeout(n,r)}),r));this._restartTimer=window.setTimeout(n,r)}}),800))}}else{if("disconnected"===t&&"disconnected"===e.iceConnectionState)return setTimeout((()=>{"disconnected"===e.iceConnectionState&&xT("ICE_RESTART")&&"CONNECTED"===Hw(this,ZR.QueryClientConnectionState)&&this.emit(ZR.RequestRestartICE)}),800),void setTimeout((()=>{"disconnected"===e.peerConnectionState&&(oI.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection disconnected timeout 4000ms, force reconnect")),this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),this._isInRestartIce=!1,setTimeout((()=>this.emit(ZR.P2PLost)),0),this.iceFailedCount+=1,this.requestReconnect())}),4e3);"failed"===t&&(oI.debug("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection state failed, force reconnect")),this.reportPCDisconnectedOrFailed(),setTimeout((()=>this.emit(ZR.P2PLost)),0),this.iceFailedCount+=1,await this.requestReconnect())}},e.onICEConnectionStateChange=e=>{"connected"!==e||this.store.keyMetrics.iceConnectionEnd||this.store.iceConnectionEnd(),oI.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICEConnectionStateChange(").concat(e,")")),AI.reportApiInvoke(this.store.sessionId,{name:"ICEConnectionStateChange",options:e,tag:Ow.TRACER}).onSuccess(),this.emit(ZR.IceConnectionStateChange,e)},e.onICETransportStateChange=e=>{oI.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onICETransportStateChange(").concat(e,")"))},e.onDTLSTransportStateChange=e=>{oI.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportStateChange(").concat(e,")"))},e.onDTLSTransportError=e=>{oI.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.onDTLSTransportError(").concat(e,")"))},e.onFirstAudioDecoded=e=>{var t;const n=Array.from(rh(t=this.remoteUserMap).call(t)).find((t=>t._audioSSRC===e));var r;n&&(this.store.subscribe(n.uid,"audio",void 0,void 0,void 0,Date.now()),null===(r=n.audioTrack)||void 0===r||r.emit(sD.FIRST_FRAME_DECODED),AI.firstRemoteFrame(this.store.sessionId,cI.FIRST_AUDIO_DECODE,lI.FIRST_AUDIO_DECODE,{peer:n._uintid,subscribeElapse:YM.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId}))},e.onFirstAudioReceived=e=>{var t;const n=Array.from(rh(t=this.remoteUserMap).call(t)).find((t=>t._audioSSRC===e));n&&AI.firstRemoteFrame(this.store.sessionId,cI.FIRST_AUDIO_RECEIVED,lI.FIRST_AUDIO_RECEIVED,{peer:n._uintid,subscribeElapse:YM.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId})},e.onFirstVideoDecoded=(e,t,n)=>{this.reportVideoFirstFrameDecoded(e,t,n)},e.onFirstVideoReceived=e=>{var t;const n=Array.from(rh(t=this.remoteUserMap).call(t)).find((t=>t._videoSSRC===e));n&&AI.firstRemoteFrame(this.store.sessionId,cI.FIRST_VIDEO_RECEIVED,lI.FIRST_VIDEO_RECEIVED,{peer:n._uintid,subscribeElapse:YM.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId})},e.onSelectedLocalCandidateChanged=(e,t)=>{const n="relay"===e.candidateType,r="relay"===t.candidateType;"unknown"!==t.candidateType&&n===r||this.emit(ZR.ConnectionTypeChange,n),oI.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedLocalCandidateChanged(").concat(JSON.stringify(HO(t))," -> ").concat(JSON.stringify(HO(e)),")"))},e.onSelectedRemoteCandidateChanged=(e,t)=>{oI.info("[".concat(this.store.clientId,"] [p2pId: ").concat(this.store.p2pId,"]: P2PConnection.SelectedRemoteCandidateChanged(").concat(JSON.stringify(HO(t))," -> ").concat(JSON.stringify(HO(e)),")"))},e.onFirstVideoDecodedTimeout=e=>{this.reportVideoFirstFrameDecoded(e,void 0,void 0,!0)},e.getLocalVideoStats=()=>{const e=this.statsCollector.getLocalVideoTrackStats(),t=this.statsCollector.getRTCStats();return a$(a$({},e),t)}}unbindConnectionEvents(e){e.onConnectionStateChange=void 0,e.onICEConnectionStateChange=void 0,e.onICETransportStateChange=void 0,e.onDTLSTransportStateChange=void 0,e.onDTLSTransportError=void 0,e.onFirstAudioDecoded=void 0,e.onFirstAudioReceived=void 0,e.onFirstVideoDecoded=void 0,e.onFirstVideoReceived=void 0,e.onSelectedLocalCandidateChanged=void 0,e.onSelectedRemoteCandidateChanged=void 0,e.onFirstVideoDecodedTimeout=void 0,e.getLocalVideoStats=void 0}filterTobeMutedTracks(e){const t=[];if(-1===this.getAllTracks().indexOf(e))return t;const n=this.localTrackMap.get(JR.LocalAudioTrack);if(e instanceof rB&&(null==n?void 0:n.track)instanceof aB)return n.track.isActive||t.push([JR.LocalAudioTrack,n]),t;const r=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:n}]=t;return e===n}));if(r&&(t.push(r),r[0]===JR.LocalVideoTrack)){const e=this.localTrackMap.get(JR.LocalVideoLowTrack);e&&t.push([JR.LocalVideoLowTrack,e])}return t}filterTobeUnmutedTracks(e){const t=[],n=this.localTrackMap.get(JR.LocalAudioTrack);if(e instanceof rB&&(null==n?void 0:n.track)instanceof aB)return n.track.isActive&&t.push([JR.LocalAudioTrack,n]),t;const r=Array.from(this.localTrackMap.entries()).find((t=>{let[,{track:n}]=t;return e===n}));if(r)if(r[0]===JR.LocalVideoTrack){t.push(r);const e=this.localTrackMap.get(JR.LocalVideoLowTrack);e&&t.push([JR.LocalVideoLowTrack,e])}else t.push(r);return t}createMuteMessage(e){return e.map((e=>{var t;let n,[r,{track:o,ssrcs:i,id:a}]=e;switch(r){case JR.LocalAudioTrack:n=MR.Audio;break;case JR.LocalVideoTrack:n=Or(t=o._hints).call(t,tD.SCREEN_TRACK)?MR.Screen:MR.High;break;case JR.LocalVideoLowTrack:n=MR.Low}return{stream_type:n,ssrcs:i,mid:a}}))}createUnmuteMessage(e){return e.map((e=>{var t;let n,[r,{track:o,ssrcs:i,id:a}]=e;switch(r){case JR.LocalAudioTrack:n=MR.Audio;break;case JR.LocalVideoTrack:n=Or(t=o._hints).call(t,tD.SCREEN_TRACK)?MR.Screen:MR.High;break;case JR.LocalVideoLowTrack:n=MR.Low}return{stream_type:n,ssrcs:i,mid:a}}))}filterTobeUnSubscribedTracks(e,t){const n=[],r=this.remoteUserMap.get(e);if(!r)return n;if(t){const o=r.get(t);if(!o)return n;n.push([e,{kind:t,id:o}])}else Array.from(r.entries()).forEach((t=>{let[r,o]=t;n.push([e,{kind:r,id:o}])}));return n}filterTobeUnSubscribedDataChannels(e,t){const n=[];return t.forEach((t=>{var r;null!==(r=this.remoteDataChannelMap.get(e))&&void 0!==r&&r.has(t.id)&&n.push(t)})),n}createUnsubscribeMessage(e){const t=[];return e.forEach((e=>{let[n,{kind:r,id:o}]=e;switch(r){case qR.VIDEO:return void(n._videoSSRC&&t.push({stream_type:qR.VIDEO,ssrcId:n._videoSSRC}));case qR.AUDIO:return void(n._audioSSRC&&t.push({stream_type:qR.AUDIO,ssrcId:n._audioSSRC}))}})),t}createUnsubscribeAllMessage(e){const t=new Map;return e.forEach((e=>{let[n,{kind:r}]=e;if(t.has(n)){let e=t.get(n);r===qR.VIDEO?e|=$R.Video:e|=$R.Audio,t.set(n,e)}else r===qR.VIDEO?t.set(n,$R.Video):t.set(n,$R.Audio)})),{users:Array.from(t.entries()).map((e=>{let[t,n]=e;return{stream_id:t.uid,stream_type:n}}))}}withdrawRemoteTracks(e){e.forEach((e=>{let[t,{kind:n}]=e;const r=this.remoteUserMap.get(t);r&&(r.delete(n),0===Array.from(r.entries()).length&&this.remoteUserMap.delete(t))}))}async updateBitrateLimit(e){const t=this.localTrackMap.get(JR.LocalVideoTrack),n=this.localTrackMap.get(JR.LocalVideoLowTrack);t&&await t.track.setBitrateLimit(e.uplink),n&&e.low_stream_uplink&&await n.track.setBitrateLimit({max_bitrate:e.low_stream_uplink.bitrate,min_bitrate:e.low_stream_uplink.bitrate||0})}isP2PDisconnected(){return!this.connection||"connected"!==this.connection.peerConnectionState}mapPubResToRemoteConfig(e,t,n){return e.map(((e,r)=>{var o;let{stream_type:i}=e;const a=null===(o=t.find((e=>{let{stream_type:t}=e;return i===t})))||void 0===o?void 0:o.attributes;if(a&&xT("DISABLE_SCREEN_SHARE_REMB")){const e=n[r]._hints;(Or(e).call(e,tD.SCREEN_TRACK)||Or(e).call(e,tD.SCREEN_LOW_TRACK))&&(a.remb=!1,oI.debug("disable remb for screen share, hints:",e))}return a}))}async tryToUnmuteAudio(e){for(let n=0;n<e.length;n++)if(e[n]instanceof rB){var t;const r=this.filterTobeUnmutedTracks(e[n]);if(0===r.length)continue;await(null===(t=this.connection)||void 0===t?void 0:t.unmuteLocal(r.map((e=>{let[,{id:t}]=e;return t}))));const o=this.createUnmuteMessage(r);return void(await Vw(this,ZR.RequestUnmuteLocal,o))}}bindStatsUploaderEvents(){this.statsUploader.requestStats=()=>this.getStats(),this.statsUploader.requestLocalMedia=()=>Array.from(this.localTrackMap.entries()),this.statsUploader.requestRemoteMedia=()=>Array.from(this.remoteUserMap.entries()),this.statsUploader.requestVideoIsReady=e=>{var t;return!(null===(t=this.connection)||void 0===t||!t.getRemoteVideoIsReady(e))},this.statsUploader.requestUpload=(e,t)=>this.emit(ZR.RequestUpload,e,t),this.statsUploader.requestUploadStats=e=>this.emit(ZR.RequestUploadStats,e),this.statsUploader.requestAllTracks=()=>this.getAllTracks()}unbindStatsUploaderEvents(){this.statsUploader.requestStats=void 0,this.statsUploader.requestLocalMedia=void 0,this.statsUploader.requestRemoteMedia=void 0,this.statsUploader.requestVideoIsReady=void 0}async requestReconnect(){this.dtlsFailedCount+=1,await iT(yT(this.dtlsFailedCount,vT)),this.emit(ZR.RequestReconnect)}async reconnectP2P(){const e=Array.from(this.localTrackMap.entries()),t=this.createGatewayUnpublishMessage(e);Array.from(this.remoteUserMap.entries()),t.length>0&&await $w(this,ZR.RequestUnpublishForReconnectPC,t),this.disconnectForReconnect(),this.emit(ZR.RequestReconnectPC)}canPublishLowStream(){return this.localTrackMap.has(JR.LocalVideoTrack)||this.pendingLocalTracks.some((e=>e instanceof KB))}throwIfTrackTypeNotMatch(e){if(e.filter((e=>e instanceof KB)).length>1)throw new uw(lw.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(e.filter((e=>e instanceof rB)).length>1&&(e.some((e=>e instanceof rB&&e._bypassWebAudio))||!UP().webAudioMediaStreamDest))throw new uw(lw.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode");for(const t of e){if(t instanceof KB&&this.pendingLocalTracks.some((e=>e instanceof KB)))throw new uw(lw.CAN_NOT_PUBLISH_MULTIPLE_VIDEO_TRACKS);if(t instanceof rB&&this.pendingLocalTracks.some((e=>e instanceof rB))&&(!UP().webAudioMediaStreamDest||t._bypassWebAudio||this.pendingLocalTracks.some((e=>e instanceof rB&&e._bypassWebAudio))))throw new uw(lw.NOT_SUPPORTED,"cannot publish multiple tracks which one of them configured with bypassWebAudio or your browser doesn't support MediaStreamDestNode")}}getLowVideoTrack(e,t){var n;const r=!xT("DISABLE_DUAL_STREAM_USE_ENCODING")&&UP().supportDualStreamEncoding,o=a$(a$({},{width:160,height:120,framerate:15,bitrate:50}),t);let i;i=r?e._mediaStreamTrack.clone():xx(e,o);const a=aT(8,"track-low-"),s=new KB(i,a$(a$({},r&&{scaleResolutionDownBy:VO(o,e)}),{},{frameRate:o.framerate,bitrateMax:o.bitrate,bitrateMin:o.bitrate}),void 0,void 0,a);return s.on(iD.TRANSCEIVER_UPDATED,(t=>{e._updateRtpTransceiver(t,nD.LOW_STREAM)})),s._hints.push(tD.LOW_STREAM),Or(n=e._hints).call(n,tD.SCREEN_TRACK)&&s._hints.push(tD.SCREEN_LOW_TRACK),e.on("sei-to-send",(e=>{s.emit("sei-to-send",e)})),e.addListener(eD.NEED_CLOSE,(()=>{s.close()})),s}async globalLock(){return this.mutex.lock("From P2PChannel.globalLock")}async reportPCStats(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(this.connection&&this.connection instanceof n$){var o,i,a,s;const c=this.store.keyMetrics.descriptionStart||0,{iceConnectionState:l,dtlsTransportState:u,peerConnectionState:d}=this.connection,{local:A,remote:p}=await this.connection.getSelectedCandidatePair();AI.pcStats(this.store.sessionId,{startTime:c,eventElapse:e-c||0,iceconnectionsate:l,dtlsstate:u,connectionstate:d,intSucc:t?1:2,error:r,selectedLocalCandidateProtocol:null!==(o=null==A?void 0:A.protocol)&&void 0!==o?o:"",selectedLocalCandidateType:null!==(i=A.candidateType)&&void 0!==i?i:"",selectedLocalCandidateAddress:"".concat(A.address,":").concat(A.port),selectedRemoteCandidateProtocol:null!==(a=p.protocol)&&void 0!==a?a:"",selectedRemoteCandidateType:null!==(s=p.candidateType)&&void 0!==s?s:"",selectedRemoteCandidateAddress:"".concat(p.address,":").concat(p.port),restartCnt:n,preallocation:this.connection.isPreallocation})}}reportVideoFirstFrameDecoded(e,t,n,r){var o;const i=Array.from(rh(o=this.remoteUserMap).call(o)).find((t=>t._videoSSRC===e));if(i){r||this.store.subscribe(i.uid,"video",void 0,void 0,void 0,void 0,Date.now());const o=this.store.keyMetrics,a=o.subscribe.find((e=>e.userId===i.uid&&"video"===e.type));AI.firstRemoteVideoDecode(this.store.sessionId,cI.FIRST_VIDEO_DECODE,lI.FIRST_VIDEO_DECODE,{peer:i._uintid,videowidth:t,videoheight:n,subscribeElapse:YM.measureFromSubscribeStart(this.store.clientId,e),subscribeRequestid:e,p2pid:this.store.p2pId,apEnd:o.requestAPEnd||0,apStart:o.requestAPStart||0,joinGwEnd:o.joinGatewayEnd||0,joinGwStart:o.joinGatewayStart||0,pcEnd:o.peerConnectionEnd||0,pcStart:o.peerConnectionStart||0,subscriberEnd:(null==a?void 0:a.subscribeEnd)||0,subscriberStart:(null==a?void 0:a.subscribeStart)||0,videoAddNotify:(null==a?void 0:a.streamAdded)||0,state:r?1:0,firstFrame:(null==a?void 0:a.firstFrame)||0})}}async remoteMediaSsrcChanged(e,t,n){if(!this.connection)return!1;const r=this.remoteUserMap.get(e);if(!r)return!1;const o=r.get(t);if(!o)return!1;const i=await this.connection.getRemoteSSRC(o);return void 0!==i&&i!==n}unbindRtpTransceiver(){0!==this.localTrackMap.size&&Array.from(this.localTrackMap.entries()).forEach((e=>{let[t,{track:n}]=e;t===JR.LocalVideoLowTrack?n._updateRtpTransceiver(void 0,nD.LOW_STREAM):n._updateRtpTransceiver(void 0)}))}reportPCDisconnectedOrFailed(e){this.connection&&this.connection instanceof n$&&("disconnected"!==this.connection.iceConnectionState&&"checking"!==this.connection.iceConnectionState&&"failed"!==this.connection.iceConnectionState||(this._isFirstConnected?(this.reportPCStats(Date.now(),!1,this._pcStatsUploadType),this._isFirstConnected=!1):this._pcStatsUploadType===YR.TCP_RESTART&&e===zR.RELAY?this.reportPCStats(Date.now(),!1,this._pcStatsUploadType):this.reportPCStats(Date.now(),!1,YR.DISCONNECTED_OR_FAILED)))}},sR(o$.prototype,"startP2PConnection",[u$],Object.getOwnPropertyDescriptor(o$.prototype,"startP2PConnection"),o$.prototype),sR(o$.prototype,"connect",[u$],Object.getOwnPropertyDescriptor(o$.prototype,"connect"),o$.prototype),sR(o$.prototype,"updateRemoteRTPCapabilities",[u$],Object.getOwnPropertyDescriptor(o$.prototype,"updateRemoteRTPCapabilities"),o$.prototype),sR(o$.prototype,"publishDataChannel",[u$],Object.getOwnPropertyDescriptor(o$.prototype,"publishDataChannel"),o$.prototype),sR(o$.prototype,"unpublish",[u$],Object.getOwnPropertyDescriptor(o$.prototype,"unpublish"),o$.prototype),sR(o$.prototype,"unpublishDataChannel",[u$],Object.getOwnPropertyDescriptor(o$.prototype,"unpublishDataChannel"),o$.prototype),sR(o$.prototype,"unpublishLowStream",[u$],Object.getOwnPropertyDescriptor(o$.prototype,"unpublishLowStream"),o$.prototype),sR(o$.prototype,"subscribeDataChannel",[u$],Object.getOwnPropertyDescriptor(o$.prototype,"subscribeDataChannel"),o$.prototype),sR(o$.prototype,"subscribe",[u$],Object.getOwnPropertyDescriptor(o$.prototype,"subscribe"),o$.prototype),sR(o$.prototype,"massSubscribe",[u$],Object.getOwnPropertyDescriptor(o$.prototype,"massSubscribe"),o$.prototype),sR(o$.prototype,"unsubscribe",[u$],Object.getOwnPropertyDescriptor(o$.prototype,"unsubscribe"),o$.prototype),sR(o$.prototype,"unsubscribeDataChannel",[u$],Object.getOwnPropertyDescriptor(o$.prototype,"unsubscribeDataChannel"),o$.prototype),sR(o$.prototype,"massUnsubscribe",[u$],Object.getOwnPropertyDescriptor(o$.prototype,"massUnsubscribe"),o$.prototype),sR(o$.prototype,"muteRemote",[u$],Object.getOwnPropertyDescriptor(o$.prototype,"muteRemote"),o$.prototype),sR(o$.prototype,"unmuteRemote",[u$],Object.getOwnPropertyDescriptor(o$.prototype,"unmuteRemote"),o$.prototype),sR(o$.prototype,"hasRemoteMediaWithLock",[u$],Object.getOwnPropertyDescriptor(o$.prototype,"hasRemoteMediaWithLock"),o$.prototype),sR(o$.prototype,"disconnectForReconnect",[u$],Object.getOwnPropertyDescriptor(o$.prototype,"disconnectForReconnect"),o$.prototype),sR(o$.prototype,"updateBitrateLimit",[u$],Object.getOwnPropertyDescriptor(o$.prototype,"updateBitrateLimit"),o$.prototype),sR(o$.prototype,"remoteMediaSsrcChanged",[u$],Object.getOwnPropertyDescriptor(o$.prototype,"remoteMediaSsrcChanged"),o$.prototype),o$);function u$(e,t,n){const r=e[t];if("function"!=typeof r)throw new Error("Cannot use mutex on object property.");return n.value=async function(){const e=this.mutex,n=await e.lock("From P2PChannel.".concat(t));try{for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return await r.apply(this,i)}finally{n()}},n}const d$={};function A$(e){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&oI.debug("install service ".concat(e.name)),d$[e.name]=e}function p$(e){const t=d$[e];if(!t)throw new uw(lw.INVALID_OPERATION,"".concat(e," not found, please use AgoraRTC.use(").concat(e,"Service) to load it first"));return t}function h$(e,t){return p$("DataStream").create(e,t)}function f$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g$(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f$(Object(n),!0).forEach((function(t){Ov(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const m$=Date.now(),_$=20,E$=new Map,v$=new Map;async function y$(e){const t=E$.get(e),n=Array.isArray(t)&&t[t.length-1],r=v$.get(e);if(!n)return void(r.isSyncing=!1);const o={uid:n.uid,payload:n.payload};0===r.firstRecvTs&&(r.firstRecvTs=n.recvTs,r.firstSendTs=n.sendTs);const i=n.sendTs-r.firstSendTs,a=i-(Date.now()-r.firstRecvTs);a>0&&(r.firstRecvTs=Date.now()-i);let s=n.mediaDelay+a;s<=0?(t.pop(),b$(n.context,o),s=0):s=Math.min(s,_$),setTimeout((()=>t.length&&y$(e)),s)}function b$(e,t){e.safeEmit(Uw.STREAM_MESSAGE,t.uid,t.payload),e.onStreamMessage&&e.onStreamMessage(t)}function C$(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;if(!e.syncWithAudio)return b$(n,{uid:e.uid,payload:e.payload});const r="".concat(n.id,"-").concat(e.uid),o=E$.get(r)||[],i=o.findIndex((t=>e.sendTs>=t.sendTs)),a=g$(g$({},e),{},{context:n,mediaDelay:t,recvTs:Date.now()});-1===i?o.push(a):o.splice(i,0,a),E$.set(r,o);let s=!1;var c;v$.has(r)?s=!(null===(c=v$.get(r))||void 0===c||!c.isSyncing):v$.set(r,{isSyncing:s,firstRecvTs:0,firstSendTs:0}),s||y$(r)}const S$=PS().name;function w$(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T$(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w$(Object(n),!0).forEach((function(t){Ov(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const I$="websdk_ng_cache_parameter",R$=xT("MAX_PRELOAD_ASYNC_LENGTH"),O$=1e4,N$=new Map,k$=[];let P$=null,D$=0,L$=0;const B$=new Map,U$=function(e,t){const n=[];let r=0;const o=async()=>{const e=n.shift();e&&await e(),n.length>0&&r<t?o():r--};return async function(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return new MA((async(i,s)=>{n.push((async()=>{try{const t=await e(...a);i(t)}catch(t){s(t)}})),r<t&&(r++,o())}))}}(x$,R$),M$=yS.CancelToken.source();async function x$(e,t,n,r,o,i){try{if(!xT("ENABLE_PRELOAD"))return;if(!UP().supportWebCrypto)return void Jw((()=>{oI.warn("Your browser does not support preloading, this feature  be run in a secure environment")}),"preload_webcrypto_not_supported");if(!n&&null!==n)throw new uw(lw.INVALID_PARAMS,"Invalid token: ".concat(n,". If you don not use token, set it to null"));n&&fw(n,"token",1,2047),fw(e,"appid",1,2047),bR(t),r&&CR(r);const a=sT();oI.debug("preload channel ".concat(t,", uid is ").concat(r));const s={appId:e,cname:t,token:n||e,uid:"string"!=typeof r?r:null,sid:a,proxyServer:o};let c,l;"string"==typeof r?(s.stringUid=r,[l,c]=await MA.all([FM(r,{sid:a,appId:e},M$.token),VM(T$(T$({},s),{},{token:n||e,uid:0}),M$.token)]),s.uid=l.uid,c.gatewayInfo.uid=s.uid,c.gatewayInfo.res.uid=s.uid):(i&&(s.stringUid=i),c=await VM(s,M$.token));const u={sid:a,appId:e,cname:t,token:n||e,uid:s.stringUid||r,intUid:s.uid||c.gatewayInfo.uid,stringUid:s.stringUid,ts:Date.now(),sua:l,ap:c};await async function(e){let t;try{e.uid&&$$({appId:e.appId,cname:e.cname,token:e.token,uid:e.uid,stringUid:e.stringUid});const n=K$(e),r=await async function(e,t){try{const n=await window.crypto.subtle.importKey("raw",eT(t),"AES-GCM",!1,["encrypt"]),r=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:new Uint8Array(1)},n,Xw(window.btoa(JSON.stringify(e))));return Zw(new Uint8Array(r))}catch(n){return}}(e,e.token||e.appId);if(!r)return;t=Q$(I$);const o=t?JSON.parse(t):[];o.push({[n]:r}),o.length>xT("AP_CACHE_NUM")&&o.shift(),G$(I$,JSON.stringify(o))}catch(n){oI.warn("Error caching server parameters:",n.message),G$(I$,"")}}(u),D$++}catch(a){throw L$++,function(e){P$||(P$=window.setTimeout((()=>{let t="";B$.forEach(((e,n)=>{t+="".concat(n,": ").concat(e," ;")})),AI.reportApiInvoke(null,{name:Rw.PRELOAD,options:{success:D$,failed:L$,err:t}}).onError(e),D$=0,L$=0,B$.clear(),P$=null}),O$));const t=B$.get(e.code)||0;B$.set(e.code,t+1)}(a),a}}async function F$(e){try{if(xT("AP_REQUEST_DETAIL"))return;const r=$$(e);if(!r||"disabled"!==e.cloudProxyServer)return;const o=await async function(e,t){try{const n=await window.crypto.subtle.importKey("raw",eT(t),"AES-GCM",!1,["decrypt"]),r=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:new Uint8Array(1)},n,Xw(e));return JSON.parse(window.atob(Zw(new Uint8Array(r))))}catch(n){return}}(r,e.token||e.appId);if(!o)return;if(n=e,(t=o).cname!==n.cname||t.appId!==n.appId||t.token!==n.token||(n.stringUid?t.stringUid!==n.stringUid:"number"==typeof n.uid?t.uid!==n.uid:t.uid!=n.uid))return;if(o&&Date.now()-o.ts<xT("AP_CACHE_LIFETIME"))return o}catch(t){oI.warn("Error get preloadInfo",t.message)}var t,n}function $$(e){let t;try{if(t=Q$(I$),!t)return;const n=JSON.parse(t),r=K$(e),o=function(e,t){for(let n=e.length-1;n>=0;n--)if(t(e[n]))return n;return-1}(n,(e=>r in e));if(-1===o)return;const i=n.splice(o,1)[0];return G$(I$,JSON.stringify(n)),i[r]}catch(n){oI.warn("Error delete preload info: ".concat(t),n.message),G$(I$,"")}}function V$(e){if(e){let t=N$.get(e);t&&(window.clearTimeout(t),t=null,N$.delete(e)),Or(k$).call(k$,e)||"disabled"!==e.cloudProxyServer||k$.push(e)}if(N$.size<xT("AP_CACHE_NUM")&&k$.length>0){const e=k$.shift();N$.set(e,window.setTimeout((async()=>{const{appId:t,cname:n,token:r,stringUid:o,uid:i,proxyServer:a}=e;try{await U$(t,n,r,i,a,o),N$.has(e)&&V$(e)}catch(s){oI.warn("update preload failed",s.message),H$(e)}}),xT("AP_UPDATE_INTERVAL")))}}function H$(e){const t=k$.indexOf(e);-1!==t&&k$.splice(t,1);let n=N$.get(e);n&&(window.clearTimeout(n),n=null,N$.delete(e),V$())}function j$(e,t){const n=e.sua,r=e.ap;t&&n&&AI.reqUserAccount(e.sid,{lts:n.requestTime,elapse:n.elapse,success:!0,serverAddr:n.url,stringUid:t,uid:e.intUid,errorCode:null,extend:n.req}),AI.reportResourceTiming(e.ap.url,e.sid),AI.joinWebProxyAP(e.sid,{lts:r.requestTime,elapse:r.elapse,sucess:1,apServerAddr:r.url,turnServerAddrList:r.proxyInfo.addresses.map((e=>e.ip)).join(","),eventType:"disabled",unilbsServerIds:[kO.CHOOSE_SERVER,kO.CLOUD_PROXY_FALLBACK].toString()}),AI.joinChooseServer(e.sid,{lts:r.requestTime,elapse:r.elapse,succ:!0,csAddr:r.url,opid:r.opid,serverList:r.gatewayInfo.gatewayAddrs.map((e=>e.address)),ec:null,cid:r.gatewayInfo.cid.toString(),uid:r.gatewayInfo.uid.toString(),csIp:r.gatewayInfo.csIp,unilbsServerIds:[kO.CHOOSE_SERVER].toString(),isHttp3:r.isHttp3})}function Q$(e){return window.atob(window.localStorage.getItem(e)||"")}function G$(e,t){window.localStorage.setItem(e,window.btoa(t))}function K$(e){let t="".concat(e.appId,"_").concat(e.cname);return"string"==typeof e.uid&&(t+="_s_".concat(e.uid)),"number"==typeof e.uid&&(t+="_".concat(e.uid)),e.token&&(t+="_".concat(e.token)),fT(t)}function W$(e){let t=function(){const e=J$.pop();return e?(e.offset=e.limit=0,e):{bytes:new Uint8Array(64),offset:0,limit:0}}();return function(e,t){let n=e.appId;void 0!==n&&(cV(t,10),oV(t,n));let r=e.cid;void 0!==r&&(cV(t,16),cV(t,r));let o=e.cname;void 0!==o&&(cV(t,26),oV(t,o));let i=e.deviceId;void 0!==i&&(cV(t,34),oV(t,i));let a=e.elapse;void 0!==a&&(cV(t,40),uV(t,a));let s=e.fileSize;void 0!==s&&(cV(t,48),uV(t,Y$(s)));let c=e.height;void 0!==c&&(cV(t,56),uV(t,Y$(c)));let l=e.jpg;void 0!==l&&(cV(t,66),cV(t,l.length),nV(t,l));let u=e.networkType;void 0!==u&&(cV(t,72),uV(t,Y$(u)));let d=e.osType;void 0!==d&&(cV(t,80),uV(t,Y$(d)));let A=e.requestId;void 0!==A&&(cV(t,90),oV(t,A));let p=e.sdkVersion;void 0!==p&&(cV(t,98),oV(t,p));let h=e.sequence;void 0!==h&&(cV(t,104),uV(t,Y$(h)));let f=e.sid;void 0!==f&&(cV(t,114),oV(t,f));let g=e.timestamp;void 0!==g&&(cV(t,120),uV(t,g));let m=e.uid;void 0!==m&&(cV(t,128),cV(t,m));let _=e.vid;void 0!==_&&(cV(t,136),cV(t,_));let E=e.width;void 0!==E&&(cV(t,144),uV(t,Y$(E)));let v=e.service;void 0!==v&&(cV(t,152),cV(t,v));let y=e.callbackData;void 0!==y&&(cV(t,162),cV(t,y.length),nV(t,y));let b=e.ticket;void 0!==b&&(cV(t,170),oV(t,b));let C=e.vendorConfigs;void 0!==C&&(cV(t,178),oV(t,C))}(e,t),function(e){let t=e.bytes,n=e.limit;return t.length===n?t:t.subarray(0,n)}(t)}function q$(e){return function(e){let t={};e:for(;!Z$(e);){let n=sV(e);switch(n>>>3){case 0:break e;case 1:t.code=sV(e);break;case 2:t.msg=rV(e,sV(e));break;case 3:t.requestId=rV(e,sV(e));break;case 4:t.timestamp=lV(e,!1);break;default:z$(e,7&n)}}return t}({bytes:t=e,offset:0,limit:t.length});var t}function z$(e,t){switch(t){case 0:for(;128&iV(e););break;case 2:X$(e,sV(e));break;case 5:X$(e,4);break;case 1:X$(e,8);break;default:throw new Error("Unimplemented type: "+t)}}function Y$(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}let J$=[];function X$(e,t){if(e.offset+t>e.limit)throw new Error("Skip past limit");e.offset+=t}function Z$(e){return e.offset>=e.limit}function eV(e,t){let n=e.bytes,r=e.offset,o=e.limit,i=r+t;if(i>n.length){let t=new Uint8Array(2*i);t.set(n),e.bytes=t}return e.offset=i,i>o&&(e.limit=i),r}function tV(e,t){let n=e.offset;if(n+t>e.limit)throw new Error("Read past limit");return e.offset+=t,n}function nV(e,t){let n=eV(e,t.length);e.bytes.set(t,n)}function rV(e,t){let n=tV(e,t),r=String.fromCharCode,o=e.bytes,i="",a="";for(let s=0;s<t;s++){let e,c,l,u,d=o[s+n];128&d?192==(224&d)?s+1>=t?a+=i:(e=o[s+n+1],128!=(192&e)?a+=i:(u=(31&d)<<6|63&e,u<128?a+=i:(a+=r(u),s++))):224==(240&d)?s+2>=t?a+=i:(e=o[s+n+1],c=o[s+n+2],32896!=(49344&(e|c<<8))?a+=i:(u=(15&d)<<12|(63&e)<<6|63&c,u<2048||u>=55296&&u<=57343?a+=i:(a+=r(u),s+=2))):240==(248&d)?s+3>=t?a+=i:(e=o[s+n+1],c=o[s+n+2],l=o[s+n+3],8421504!=(12632256&(e|c<<8|l<<16))?a+=i:(u=(7&d)<<18|(63&e)<<12|(63&c)<<6|63&l,u<65536||u>1114111?a+=i:(u-=65536,a+=r(55296+(u>>10),56320+(1023&u)),s+=3))):a+=i:a+=r(d)}return a}function oV(e,t){let n=t.length,r=0;for(let a=0;a<n;a++){let e=t.charCodeAt(a);e>=55296&&e<=56319&&a+1<n&&(e=(e<<10)+t.charCodeAt(++a)-56613888),r+=e<128?1:e<2048?2:e<65536?3:4}cV(e,r);let o=eV(e,r),i=e.bytes;for(let a=0;a<n;a++){let e=t.charCodeAt(a);e>=55296&&e<=56319&&a+1<n&&(e=(e<<10)+t.charCodeAt(++a)-56613888),e<128?i[o++]=e:(e<2048?i[o++]=e>>6&31|192:(e<65536?i[o++]=e>>12&15|224:(i[o++]=e>>18&7|240,i[o++]=e>>12&63|128),i[o++]=e>>6&63|128),i[o++]=63&e|128)}}function iV(e){return e.bytes[tV(e,1)]}function aV(e,t){let n=eV(e,1);e.bytes[n]=t}function sV(e){let t,n=0,r=0;do{t=iV(e),n<32&&(r|=(127&t)<<n),n+=7}while(128&t);return r}function cV(e,t){for(t>>>=0;t>=128;)aV(e,127&t|128),t>>>=7;aV(e,t)}function lV(e,t){let n,r=0,o=0,i=0;return n=iV(e),r=127&n,128&n&&(n=iV(e),r|=(127&n)<<7,128&n&&(n=iV(e),r|=(127&n)<<14,128&n&&(n=iV(e),r|=(127&n)<<21,128&n&&(n=iV(e),o=127&n,128&n&&(n=iV(e),o|=(127&n)<<7,128&n&&(n=iV(e),o|=(127&n)<<14,128&n&&(n=iV(e),o|=(127&n)<<21,128&n&&(n=iV(e),i=127&n,128&n&&(n=iV(e),i|=(127&n)<<7))))))))),{low:r|o<<28,high:o>>>4|i<<24,unsigned:t}}function uV(e,t){let n=t.low>>>0,r=(t.low>>>28|t.high<<4)>>>0,o=t.high>>>24,i=0===o?0===r?n<16384?n<128?1:2:n<1<<21?3:4:r<16384?r<128?5:6:r<1<<21?7:8:o<128?9:10,a=eV(e,i),s=e.bytes;switch(i){case 10:s[a+9]=o>>>7&1;case 9:s[a+8]=9!==i?128|o:127&o;case 8:s[a+7]=8!==i?r>>>21|128:r>>>21&127;case 7:s[a+6]=7!==i?r>>>14|128:r>>>14&127;case 6:s[a+5]=6!==i?r>>>7|128:r>>>7&127;case 5:s[a+4]=5!==i?128|r:127&r;case 4:s[a+3]=4!==i?n>>>21|128:n>>>21&127;case 3:s[a+2]=3!==i?n>>>14|128:n>>>14&127;case 2:s[a+1]=2!==i?n>>>7|128:n>>>7&127;case 1:s[a]=1!==i?128|n:127&n}}const dV={},AV={},pV=4294967296,hV=pV*pV/2;_V(0,!0);const fV=_V(0),gV=EV(0,-2147483648,!1),mV=EV(-1,2147483647,!1);function _V(e,t){let n,r,o;return t?(o=0<=(e>>>=0)&&e<256)&&(r=AV[e],r)?r:(n=EV(e,0,!0),o&&(AV[e]=n),n):(o=-128<=(e|=0)&&e<128)&&(r=dV[e],r)?r:(n=EV(e,e<0?-1:0,!1),o&&(dV[e]=n),n)}function EV(e,t,n){return{low:0|e,high:0|t,unsigned:!!n}}function vV(e,t){return isNaN(e)?fV:e<=-hV?gV:e+1>=hV?mV:e<0?fV:EV(e%pV|0,e/pV|0,t)}function yV(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}class bV extends ww{get connectionState(){return this._connectionState}set connectionState(e){if(this._connectionState===e)return;const t=this._connectionState;this._connectionState=e,this.emit(aO.CONNECTION_STATE_CHANGE,e,t)}get quality(){return this._quality}set quality(e){this._quality=e>1?1:e<.1?.1:e,this._qualityTimer&&(window.clearTimeout(this._qualityTimer),this._qualityTimer=null),this._quality>=1||(this._qualityTimer=window.setTimeout((()=>{this.quality=this._quality/this._qualityRatio}),6e4))}constructor(e){var t;super(),Ov(this,"name","AgoraRTCImageModeration"),Ov(this,"_connectionState",iO.CONNECTING),Ov(this,"_sequence",0),Ov(this,"_moderationStartTime",void 0),Ov(this,"_workerConnection",void 0),Ov(this,"_workerMessageLengthLimit",void 0),Ov(this,"_qualityRatio",void 0),Ov(this,"_connectInfo",void 0),Ov(this,"_cancelTokenSource",yS.CancelToken.source()),Ov(this,"_retryConfig",void 0),Ov(this,"_moderationInterval",void 0),Ov(this,"_moderationTimer",null),Ov(this,"_moderationMode",1),Ov(this,"_quality",1),Ov(this,"_qualityTimer",null),Ov(this,"_ticket",void 0),Ov(this,"_moderationIntervalMinimum",void 0),Ov(this,"_uploadFailedNum",0),Ov(this,"_uploadNum",0),Ov(this,"_uploadTimer",null),Ov(this,"_extraInfo",void 0),Ov(this,"_vendor",""),Ov(this,"_encoder",new TextEncoder),Ov(this,"_moderationId",void 0),Ov(this,"inspectImage",(()=>{if(this.connectionState!==iO.CONNECTED)throw new pI(lw.OPERATION_ABORTED,"image moderation service connection status is ".concat(this.connectionState));this._moderationTimer&&(window.clearInterval(this._moderationTimer),this._moderationTimer=null),this._moderationTimer=window.setInterval((()=>{this.connectionState===iO.CONNECTED?this.requestToInspectImage():oI.debug("[".concat(this._moderationId,"] Moderation State is not connected , "),this.connectionState)}),this._moderationInterval<this._moderationIntervalMinimum?this._moderationIntervalMinimum:this._moderationInterval),this.requestToInspectImage()})),this._moderationId=aT(5,"image-moderation-"),this._workerMessageLengthLimit=xT("IMAGE_MODERATION_WORKER_MESSAGE_LENGTH_LIMIT"),this._moderationIntervalMinimum=xT("IMAGE_MODERATION_INTERVAL_MINIMUM"),this._moderationInterval=null!==(t=e.interval)&&void 0!==t?t:1e3,e.extraInfo&&(this._extraInfo=this._encoder.encode(e.extraInfo)),e.vendor&&(this._vendor=e.vendor),this._qualityRatio=xT("IMAGE_MODERATION_QUALITY_RATIO"),this._moderationStartTime=Number(Date.now()),this._workerConnection=new OO("worker-"+this._moderationId,vT),this.on(aO.STATE_CHANGE,((e,t)=>{oI.debug("[".concat(this._moderationId,"] Moderation operation :").concat(sO[e]," ").concat(t||""))})),this.handleWorkerEvents()}async init(e,t){this.emit(aO.STATE_CHANGE,sO.CONNECT_AP),this._connectInfo=e;const n=this._cancelTokenSource.token;return this._retryConfig=t,new MA(((r,o)=>{this.on(aO.CONNECTION_STATE_CHANGE,((e,t)=>{e===iO.CONNECTED&&r()})),this.requestAP(e,n,t).then((e=>{this.connectWorker(e)})).catch((e=>{o(e)}))}))}updateConfig(e){var t;this._moderationInterval=null!==(t=e.interval)&&void 0!==t?t:1e3,e.extraInfo&&(this._extraInfo=this._encoder.encode(e.extraInfo)),e.vendor&&(this._vendor=e.vendor),oI.debug("[".concat(this._moderationId,"] updateConfig: ").concat(JSON.stringify(e))),this.connectionState===iO.CONNECTED&&this.inspectImage()}async requestAP(e,t,n){const r=xT("WEBCS_DOMAIN").map((e=>"https://".concat(e,"/api/v1"))),o=await function(e,t,n,r){let{appId:o,areaCode:i,cname:a,sid:s,token:c,uid:l}=t;PM++;const u="moderation_plugin",d={service_name:u,json_body:JSON.stringify({appId:o,areaCode:i,cname:a,command:"allocateEdge",requestId:PM,seq:PM,sid:s,appToken:c,ts:Date.now(),uid:l+""})};let A,p,h=e[0];return bT((async()=>{A=Date.now();const e=await uM(h,{data:d,cancelToken:n,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});if(p=Date.now()-A,0!==e.code){const t=new pI(lw.UNEXPECTED_RESPONSE,"moderation plugin ap error, code"+e.code,{retry:!0,responseTime:p});throw oI.error(t.toString()),t}const t=JSON.parse(e.json_body);if(200!==t.code){const e=new pI(lw.UNEXPECTED_RESPONSE,"moderation plugin ap error, code: ".concat(t.code,", reason: ").concat(t.reason),{code:t.code,responseTime:p});throw oI.error(e.toString()),e}if(!t.servers||!Array.isArray(t.servers)||0===t.servers.length){const e=new pI(lw.UNEXPECTED_RESPONSE,"moderation plugin ap empty server",{code:t.code,responseTime:p});throw oI.error(e.toString()),e}if(!t.servers.some((e=>!!e.wss))){const e=new pI(lw.UNEXPECTED_RESPONSE,"moderation plugin ap empty port",{code:t.code,responseTime:p});throw oI.error(e.toString()),e}const r=xT("IMAGE_MODERATION_WORKER_HOST");return{addressList:t.servers.map((e=>{let{address:t,wss:n}=e;if(t&&n)return"wss://".concat(t.replace(/\./g,"-"),".").concat(r,":").concat(n,"/moderation")})).filter((e=>!!e)),workerToken:t.workerToken,vid:t.vid,ticket:t.appTicket,responseTime:p}}),((t,n)=>(AI.apworkerEvent(s,{success:!0,sc:200,serviceName:u,responseDetail:JSON.stringify(t.addressList),firstSuccess:0===n,responseTime:p,serverIp:e[n%e.length]}),!1)),((t,n)=>(AI.apworkerEvent(s,{success:!1,sc:t.data&&t.data.code||200,serviceName:u,responseTime:p,serverIp:e[n%e.length]}),!!(t.code!==lw.OPERATION_ABORTED&&t.code!==lw.UNEXPECTED_RESPONSE||t.data&&t.data.retry)&&(h=e[(n+1)%e.length],!0))),r)}(r,e,t,n);this.emit(aO.STATE_CHANGE,sO.AP_CONNECTED);const{addressList:i,ticket:a}=o;return this._ticket=a,i}async connectWorker(e){this.emit(aO.STATE_CHANGE,sO.CONNECT_WORKER),await this._workerConnection.init(e,1e4)}handleWorkerEvents(){this._workerConnection.on(yR.CONNECTED,(async()=>{this.emit(aO.STATE_CHANGE,sO.WORKER_CONNECTED,this._workerConnection.url),this.connectionState=iO.CONNECTED})),this._workerConnection.on(yR.CLOSED,(()=>{this.connectionState=iO.CLOSED})),this._workerConnection.on(yR.FAILED,(()=>{this.connectionState=iO.CLOSED})),this._workerConnection.on(yR.RECONNECTING,(()=>{this.connectionState=this.connectionState===iO.CONNECTED?iO.RECONNECTING:iO.CONNECTING})),this._workerConnection.on(yR.ON_MESSAGE,(async e=>{if(e.data instanceof ArrayBuffer){const t=q$(new Uint8Array(e.data));xT("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&oI.debug("[".concat(this._moderationId,"] Response message for worker of image moderation "),JSON.stringify(t)),this._uploadNum++,void 0===t.code||0===t.code||(this._uploadFailedNum++,oI.error("[".concat(this._moderationId,"] Error response from worke, code is ").concat(t.code,", msg is ").concat(t.msg)),this._uploadTimer||(this._uploadTimer=window.setTimeout((()=>{AI.reportApiInvoke(this._connectInfo.sid||null,{name:Rw.IMAGE_MODERATION_UPLOAD,options:[this._uploadFailedNum,this._uploadNum,t.code],tag:Ow.TRACER}).onError(new pI(lw.IMAGE_MODERATION_UPLOAD_FAILED,t.msg)),this._uploadTimer=null}),xT("IMAGE_MODERATION_UPLOAD_REPORT_INTERVAL"))))}else oI.error("[".concat(this._moderationId,"] Unexpected message type from worker"))})),this._workerConnection.on(yR.WILL_RECONNECT,((e,t,n)=>{"recover"===e&&n(e),n("tryNext")})),this._workerConnection.on(yR.REQUEST_NEW_URLS,((e,t)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(e).catch(t)}))}static intToLong(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}async requestToInspectImage(){const e=Hw(this,aO.CLIENT_LOCAL_VIDEO_TRACK),t={appId:this._connectInfo.appId,cname:this._connectInfo.cname,cid:this._connectInfo.cid,sid:this._connectInfo.sid,uid:this._connectInfo.uid,vid:this._connectInfo.vid};if(e){if(!e.isPlaying)return void(xT("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&oI.debug("Only the track being played can be inspected"));this._sequence++;const n=await this.generateRequestData(e,t);this._workerConnection.sendMessage(n,!0,!0)}else xT("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")&&oI.debug("Only the track being published can be inspected")}async generateRequestData(e,t){let{appId:n,cname:r,cid:o,vid:i,sid:a,uid:s}=t;const c=Date.now(),l=await e.getCurrentFrameImage("image/jpeg",this.quality),u=await hL(l,n,r),d=this._sequence+"-"+o+"-"+s+"-"+c+"-"+aT(12,""),A={appId:n,cid:o,cname:r,deviceId:"",elapse:bV.intToLong(Number(c-this._moderationStartTime)),fileSize:l.buffer.byteLength,height:l.height,width:l.width,jpg:u,networkType:6,osType:7,requestId:d,sdkVersion:"4.22.2",sequence:this._sequence,sid:a,timestamp:vV(c),uid:s,vid:i,service:this._moderationMode,ticket:this._ticket,callbackData:this._extraInfo,vendorConfigs:this._vendor};void 0===this._extraInfo&&delete A.callbackData;const p=W$(A);if(p.byteLength<this._workerMessageLengthLimit){if(xT("SHOW_IMAGE_MODERATION_WORKER_MESSAGE")){const e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yV(Object(n),!0).forEach((function(t){Ov(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yV(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},A);delete e.jpg,oI.debug("[".concat(this._moderationId,"] Request message for worker of image moderation service: "),JSON.stringify(e))}return p}{const t=this.quality*this._qualityRatio;return this.quality=t,await this.generateRequestData(e,{appId:n,cname:r,cid:o,vid:i,sid:a,uid:s})}}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=yS.CancelToken.source(),this._workerConnection&&this._workerConnection.close(),this._moderationTimer&&window.clearInterval(this._moderationTimer),this._moderationTimer=null,this._uploadTimer&&window.clearTimeout(this._uploadTimer),this._uploadTimer=null,this.connectionState=iO.CLOSED,this.emit(aO.STATE_CHANGE,sO.CLOSED)}}function CV(e){if(pw(e.interval,"interval",1e3,1/0),e&&e.extraInfo&&e.extraInfo.length>1024)throw new pI(lw.INVALID_PARAMS,"config.extraInfo length cannot exceed 1024 bytes");if(e&&e.vendor&&e.vendor.length>1024)throw new pI(lw.INVALID_PARAMS,"config.vendor length cannot exceed 1024 bytes")}const SV={name:"ImageModeration",create:function(e){let{config:t}=e;return CV(t),new bV(t)}};var wV,TV,IV,RV,OV,NV,kV,PV,DV,LV,BV,UV,MV,xV,FV,$V,VV,HV,jV,QV,GV,KV,WV,qV,zV,YV,JV,XV,ZV,eH,tH,nH,rH,oH,iH,aH,sH,cH,lH,uH,dH;function AH(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pH(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?AH(Object(n),!0).forEach((function(t){Ov(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AH(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}_T.setLogger(oI);let hH=(wV=dI(),TV=dI({argsMap:(e,t)=>{if(!Array.isArray(t)){if(!(t instanceof RD))return[t];t=[t]}return t.map((e=>e?Object(e).toString():"null"))}}),IV=dI({argsMap:(e,t)=>(t||(t=[]),Array.isArray(t)||t.trackMediaType!==cD.DATA?(Array.isArray(t)||(t=[t]),t.map((e=>e.getTrackId()))):[t.getChannelId()])}),RV=dI({argsMap:(e,t,n,r)=>["object"==typeof t?t.uid:t,n,r]}),OV=dI({argsMap:(e,t,n)=>[t,n]}),NV=dI({argsMap:(e,t)=>t.map((e=>{let{user:t,mediaType:n}=e;return[null==t?void 0:t.uid,n]}))}),kV=dI({argsMap:(e,t,n,r)=>["object"==typeof t?t.uid:t,n,r]}),PV=dI({argsMap:(e,t)=>t.map((e=>{let{user:t,mediaType:n}=e;return{uid:null==t?void 0:t.uid,mediaType:n}}))}),DV=dI(),LV=dI(),BV=dI(),UV=dI(),MV=dI(),xV=dI(),FV=dI(),$V=dI(),VV=dI(),HV=dI(),jV=dI(),QV=dI(),GV=dI(),KV=dI(),WV=dI({argsMap:(e,t)=>[t]}),qV=dI(),zV=dI(),YV=dI(),JV=dI(),XV=dI(),ZV=dI(),eH=dI(),tH=dI(),nH=dI({argsMap:(e,t)=>(Array.isArray(t)||(t=[t]),[JSON.stringify(t)])}),rH=dI(),oH=dI(),iH=dI(),aH=dI(),sH=dI(),cH=dI(),lH=dI({reportResult:!0}),uH=dI(),dH=class extends ww{get connectionState(){return this._gateway.state}get remoteUsers(){return this._users}get localTracks(){return this._p2pChannel.getAllTracks(!0)}get uid(){return this._uid}get channelName(){return this._channelName}get localDataChannels(){return this._p2pChannel.getAllDataChannels()}get mode(){return this._config.mode}get role(){var e;return(null===(e=this._config)||void 0===e?void 0:e.role)||"audience"}get codec(){return this._config.codec}get audioCodec(){return this._config.audioCodec||"opus"}get isStringUID(){return!!this._joinInfo&&!!this._joinInfo.stringUid}get __className__(){return"Client"}constructor(e,t){let n;if(super(),Ov(this,"store",void 0),Ov(this,"_uid",void 0),Ov(this,"_channelName",void 0),Ov(this,"_uintUid",void 0),Ov(this,"_users",[]),Ov(this,"_config",void 0),Ov(this,"_clientId",void 0),Ov(this,"_appId",void 0),Ov(this,"_sessionId",null),Ov(this,"_key",void 0),Ov(this,"_rtmConfig",{}),Ov(this,"_joinInfo",void 0),Ov(this,"_gateway",void 0),Ov(this,"_statsCollector",void 0),Ov(this,"_configDistribute",void 0),Ov(this,"_leaveMutex",void 0),Ov(this,"_publishMutex",void 0),Ov(this,"_renewTokenMutex",void 0),Ov(this,"_subscribeMutex",void 0),Ov(this,"_encryptionMode","none"),Ov(this,"_encryptionSecret",null),Ov(this,"_encryptionSalt",null),Ov(this,"_encryptDataStream",!1),Ov(this,"_encryptDataStreamKey",null),Ov(this,"_encryptDataStreamIv",null),Ov(this,"_proxyServer",void 0),Ov(this,"_turnServer",{servers:[],mode:"auto"}),Ov(this,"_cloudProxyServerMode","disabled"),Ov(this,"_isDualStreamEnabled",!1),Ov(this,"_defaultStreamFallbackType",void 0),Ov(this,"_lowStreamParameter",void 0),Ov(this,"_streamFallbackTypeCacheMap",new Map),Ov(this,"_remoteStreamTypeCacheMap",new Map),Ov(this,"_axiosCancelSource",yS.CancelToken.source()),Ov(this,"_audioVolumeIndicationInterval",void 0),Ov(this,"_networkQualityInterval",void 0),Ov(this,"_userOfflineTimeout",void 0),Ov(this,"_streamRemovedTimeout",void 0),Ov(this,"_liveTranscodeStreamingClient",void 0),Ov(this,"_liveRawStreamingClient",void 0),Ov(this,"_channelMediaRelayClient",void 0),Ov(this,"_networkQualitySensitivity","normal"),Ov(this,"_p2pChannel",void 0),Ov(this,"_useLocalAccessPoint",!1),Ov(this,"_setLocalAPVersion",void 0),Ov(this,"_joinAndNotLeaveYet",!1),Ov(this,"_numberOfJoinCount",0),Ov(this,"_remoteDefaultVideoStreamType",void 0),Ov(this,"_inspect",void 0),Ov(this,"_moderation",void 0),Ov(this,"_license",void 0),Ov(this,"_pendingPublishedUsers",[]),Ov(this,"ntpAlignErrorCount",0),Ov(this,"remoteInboundOffset",0),Ov(this,"_handleLocalTrackEnable",((e,t,n)=>{this.publish(e,!1).then(t).catch(n)})),Ov(this,"_handleLocalTrackDisable",((e,t,n)=>{this.unpublish(e).then(t).catch(n)})),Ov(this,"_handleUserOnline",(e=>{if(xT("BLOCK_LOCAL_CLIENT")&&mI(e.uid,this.channelName))return void oI.debug("[".concat(e.uid,"] will be ignored in local"));this.isStringUID&&"string"!=typeof e.uid&&oI.error("[".concat(this._clientId,"] StringUID is Mixed with UintUID"));const t=this._users.find((t=>t.uid===e.uid));if(t)t._trust_in_room_=!0,t._is_pre_created&&(t._is_pre_created=!1,this.safeEmit(Uw.USER_JOINED,t));else{const t=new tF(e.uid,e.uint_id||e.uid);this._users.push(t),oI.debug("[".concat(this._clientId,"] user online"),e.uid),this.safeEmit(Uw.USER_JOINED,t)}})),Ov(this,"_handleUserOffline",(e=>{if(xT("BLOCK_LOCAL_CLIENT")&&mI(e.uid,this.channelName))return;const t=this._users.find((t=>t.uid===e.uid));t&&(this._handleRemoveStream(e),this._handleRemoveDataChannels(e),t._audio_pre_subscribed||t._video_pre_subscribed?t._is_pre_created=!0:Gw(this._users,t),this._remoteStreamTypeCacheMap.delete(t.uid),this._streamFallbackTypeCacheMap.delete(t.uid),oI.debug("[".concat(this._clientId,"] user offline"),e.uid,"reason:",e.reason),this.safeEmit(Uw.USER_LEAVED,t,e.reason))})),Ov(this,"_handleAddAudioOrVideoStream",((e,t,n,r,o,i,a)=>{if(xT("BLOCK_LOCAL_CLIENT")&&mI(t,this.channelName))return;const s=this._users.find((e=>e.uid===t));if(!s)return void oI.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)"));oI.debug("[".concat(this._clientId,"] stream added with uid ").concat(t,", type ").concat(e)),this.store.subscribe(s.uid,e,void 0,void 0,void 0,Date.now());const c="audio"===e?s.hasAudio:s.hasVideo;s._uintid||(s._uintid=o||t),"audio"===e?s._trust_audio_stream_added_state_=!0:s._trust_video_stream_added_state_=!0,"audio"===e?(s._audio_added_=!0,void 0!==n&&(s._audioSSRC=n),void 0!==r&&(s._cname=r),i&&(s._audioOrtc=i)):(s._video_added_=!0,void 0!==n&&(s._videoSSRC=n),void 0!==r&&(s._cname=r),void 0!==a&&(s._rtxSsrcId=a),i&&(s._videoOrtc=i)),("audio"===e?s.hasAudio:s.hasVideo)&&!c&&(oI.info("[".concat(this._clientId,"] remote user ").concat(s.uid," published ").concat(e)),this.safeEmit(Uw.USER_PUBLISHED,s,e)),"video"===e?AI.onGatewayStream(this._sessionId,cI.ON_ADD_VIDEO_STREAM,lI.ON_ADD_VIDEO_STREAM,{peer:o||t,ssrc:s._videoSSRC}):AI.onGatewayStream(this._sessionId,cI.ON_ADD_AUDIO_STREAM,lI.ON_ADD_AUDIO_STREAM,{peer:o||t,ssrc:s._audioSSRC}),this._p2pChannel.remoteMediaSsrcChanged(s,e,n).then((t=>{if(t&&(oI.debug("[".concat(this._clientId,"] resubscribe ").concat(e," for user ").concat(s.uid," after rejoin because SSRC id changed.")),this._p2pChannel instanceof l$))return this._p2pChannel.unsubscribe(s,e,!0).then((()=>this._subscribe(s,e,!0).catch((e=>{oI.error("[".concat(this._clientId,"] resubscribe error"),e.toString())}))))})),this._p2pChannel.hasPendingRemoteMedia(s,e)&&(oI.debug("[".concat(this._clientId,"] resubscribe ").concat(e," for user ").concat(s.uid," after reconnect.")),this._subscribe(s,e,!0).catch((e=>{oI.error("[".concat(this._clientId,"] resubscribe error"),e.toString())})))})),Ov(this,"_handleRemoveStream",(e=>{if(xT("BLOCK_LOCAL_CLIENT")&&mI(e.uid,this.channelName))return;const t=this._users.find((t=>t.uid===e.uid));if(!t)return void oI.warning("[".concat(this._clientId,"] can not find target user!(on_remove_stream)"));oI.debug("[".concat(this._clientId,"] stream removed with uid ").concat(e.uid));let n=()=>{};t.hasAudio&&t.hasVideo?n=()=>{oI.info("[".concat(this._clientId,"] remote user ").concat(t.uid," unpublished audio track")),this.safeEmit(Uw.USER_UNPUBLISHED,t,"audio"),oI.info("[".concat(this._clientId,"] remote user ").concat(t.uid," unpublished video track")),this.safeEmit(Uw.USER_UNPUBLISHED,t,"video")}:t.hasVideo?n=()=>{oI.info("[".concat(this._clientId,"] remote user ").concat(t.uid," unpublished video track")),this.safeEmit(Uw.USER_UNPUBLISHED,t,"video")}:t.hasAudio&&(n=()=>{oI.info("[".concat(this._clientId,"] remote user ").concat(t.uid," unpublished audio track")),this.safeEmit(Uw.USER_UNPUBLISHED,t,"audio")}),t._video_pre_subscribed||t._audio_pre_subscribed||(t._trust_audio_stream_added_state_=!0,t._trust_video_stream_added_state_=!0,t._audio_added_=!1,t._video_added_=!1,this._p2pChannel instanceof l$&&this._p2pChannel.unsubscribe(t).then((e=>{if(e)return this._gateway.unsubscribe(e,t.uid)})),t._audioSSRC=void 0,t._videoSSRC=void 0,t._audioOrtc=void 0,t._videoOrtc=void 0,t._rtxSsrcId=void 0),AI.onGatewayStream(this._sessionId,cI.ON_REMOVE_STREAM,lI.ON_REMOVE_STREAM,{peer:e.uint_id||e.uid}),n()})),Ov(this,"_handleSetStreamLocalEnable",((e,t,n)=>{if(xT("BLOCK_LOCAL_CLIENT")&&mI(t,this.channelName))return;const r=this._users.find((e=>e.uid===t));if(!r)return void oI.error("[".concat(this._clientId,"] can not find target user!(disable_local)"));oI.debug("[".concat(this._clientId,"] local ").concat(e," ").concat(n?"enabled":"disabled"," with uid ").concat(t));const o="audio"===e?r.hasAudio:r.hasVideo;if("audio"===e){r._trust_audio_enabled_state_=!0;const e=r._audio_enabled_;if(r._audio_enabled_=n,r._audio_enabled_===e)return;{const e=r._audio_enabled_?"enable-local-audio":"disable-local-audio";oI.debug("[".concat(this._clientId,"] user-info-updated, uid: ").concat(t,", msg: ").concat(e)),this.safeEmit(Uw.USER_INFO_UPDATED,t,e)}}else{r._trust_video_enabled_state_=!0;const e=r._video_enabled_;if(r._video_enabled_=n,r._video_enabled_===e)return;{const e=r._video_enabled_?"enable-local-video":"disable-local-video";oI.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(t,", msg: ").concat(e)),this.safeEmit(Uw.USER_INFO_UPDATED,t,e)}}const i="audio"===e?r.hasAudio:r.hasVideo;return o!==i?!o&&i?(oI.info("[".concat(this._clientId,"] remote user ").concat(t," published ").concat(e)),void this.safeEmit(Uw.USER_PUBLISHED,r,e)):("video"===e&&r._videoTrack&&r._videoTrack._destroy(),"audio"===e&&r._audioTrack,this._p2pChannel.muteRemote(r,e),oI.info("[".concat(this._clientId,"] remote user ").concat(t," unpublished ").concat(e)),void this.safeEmit(Uw.USER_UNPUBLISHED,r,e)):void 0})),Ov(this,"_handleMuteStream",((e,t,n)=>{if(xT("BLOCK_LOCAL_CLIENT")&&mI(e,this.channelName))return;oI.debug("[".concat(this._clientId,"] receive mute message"),e,t,n);const r=this._users.find((t=>t.uid===e));if(!r)return void oI.warning("[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ").concat(e));const o="audio"===t?r.hasAudio:r.hasVideo;if("audio"===t){r._trust_audio_mute_state_=!0;const t=r._audio_muted_;if(r._audio_muted_=n,r._audio_muted_===t)return;{const t=r._audio_muted_?"mute-audio":"unmute-audio";oI.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(e,", msg: ").concat(t)),this.safeEmit(Uw.USER_INFO_UPDATED,e,t)}}else{r._trust_video_mute_state_=!0;const t=r._video_muted_;if(r._video_muted_=n,r._video_muted_===t)return;{const t=r._video_muted_?"mute-video":"unmute-video";oI.debug("[".concat(this._clientId,"] user-info-update, uid: ").concat(e,", msg: ").concat(t)),this.safeEmit(Uw.USER_INFO_UPDATED,e,t)}}const i="audio"===t?r.hasAudio:r.hasVideo;if(o!==i){if(!o&&i)return("audio"===t?r._audioSSRC:r._videoSSRC)?(oI.info("[".concat(this._clientId,"] remote user ").concat(e," published ").concat(t)),void this.safeEmit(Uw.USER_PUBLISHED,r,t)):void oI.warning("[".concat(this._clientId,"] remote user ").concat(e," receive ").concat(t," unmute message  before add stream message, ").concat(t," SSRC doesn't exist yet."));"video"===t&&r._videoTrack&&!r._video_pre_subscribed&&r._videoTrack._destroy(),"audio"===t&&r._audioTrack,this._p2pChannel.muteRemote(r,t),oI.info("[".concat(this._clientId,"] remote user ").concat(e," unpublished ").concat(t)),this.safeEmit(Uw.USER_UNPUBLISHED,r,t)}})),Ov(this,"_handleP2PLost",(async e=>{oI.debug("[".concat(this._clientId,"] receive p2p lost"),e),parseInt(e.p2pid,10)===this.store.p2pId?await this._p2pChannel.requestReconnect():oI.warning("[".concat(this._clientId,"] P2PLost stream not found"),e)})),Ov(this,"_handleTokenWillExpire",(()=>{oI.debug("[".concat(this._clientId,"] received message onTokenPrivilegeWillExpire")),this.safeEmit(Uw.ON_TOKEN_PRIVILEGE_WILL_EXPIRE)})),Ov(this,"_handleBeforeUnload",(e=>{"beforeunload"===e.type&&void 0!==e.returnValue&&""!==e.returnValue||(this.leave(),oI.info("[".concat(this._clientId,"] auto leave onbeforeunload or pagehide")))})),Ov(this,"_handleUpdateNetworkQuality",(()=>{if("normal"===this._networkQualitySensitivity)return;if(navigator&&void 0!==navigator.onLine&&!navigator.onLine)return void this.safeEmit(Uw.NETWORK_QUALITY,{downlinkNetworkQuality:6,uplinkNetworkQuality:6});const e={downlinkNetworkQuality:0,uplinkNetworkQuality:0};e.uplinkNetworkQuality=this._p2pChannel.getUplinkNetworkQuality(),e.downlinkNetworkQuality=this._p2pChannel.getDownlinkNetworkQuality(),this.safeEmit(Uw.NETWORK_QUALITY,e)})),Ov(this,"_handleP2PAddAudioOrVideoStream",((e,t,n,r)=>{const o=this._users.find((e=>e.uid===t));if(!o)return void oI.error("[".concat(this._clientId,"] can not find target user!(on_add_stream)"));oI.debug("[".concat(this._clientId,"] stream added with uid ").concat(t,", type ").concat(e)),this.store.subscribe(o.uid,e,void 0,void 0,void 0,Date.now());const i="audio"===e?o.hasAudio:o.hasVideo;"audio"===e?o._trust_audio_stream_added_state_=!0:o._trust_video_stream_added_state_=!0,"audio"===e?(o._audio_added_=!0,void 0!==n&&(o._audioSSRC=n),void 0!==r&&(o._audioMid=r)):(o._video_added_=!0,void 0!==n&&(o._videoSSRC=n),void 0!==r&&(o._videoMid=r)),("audio"===e?o.hasAudio:o.hasVideo)&&!i&&(oI.info("[".concat(this._clientId,"] remote user ").concat(o.uid," published ").concat(e)),this.safeEmit(Uw.USER_PUBLISHED,o,e)),this._p2pChannel.hasPendingRemoteMedia(o,e)&&(oI.debug("[".concat(this._clientId,"] resubscribe ").concat(e," for user ").concat(o.uid," after reconnect.")),this._subscribe(o,e,!0).catch((e=>{oI.error("[".concat(this._clientId,"] resubscribe error"),e.toString())})))})),this._config=e,this._clientId=t||aT(5,"client-"),this.store=new VT(e.codec,e.audioCodec,e.mode,this._clientId),this._leaveMutex=new _T("client-leave",this._clientId),this._publishMutex=new _T("client-publish",this._clientId),this._renewTokenMutex=new _T("client-renewtoken",this._clientId),this._subscribeMutex=new _T("client-subscribe",this._clientId),this.store.clientCreated(),e.proxyServer&&this.setProxyServer(e.proxyServer,!0),e.turnServer&&this.setTurnServer(e.turnServer,!0),oI.info("[".concat(this._clientId,"] Initializing AgoraRTC client v").concat(NT," build: ").concat(BT,", mode: ").concat(this.mode,", codec: ").concat(this.codec)),e.clientRoleOptions)try{Bw(e.clientRoleOptions),n=Object.assign({},e.clientRoleOptions)}catch(r){oI.warning("[".concat(this._clientId,"] ").concat(r.toString()))}this._statsCollector=new SF(this.store),this._statsCollector.onStatsException=(e,t,n)=>{oI.warn("[".concat(this._clientId,"] receive exception msg, code: ").concat(e,", msg: ").concat(t,", uid: ").concat(n)),this.safeEmit(Uw.EXCEPTION,{code:e,msg:t,uid:n})},this._statsCollector.onUploadPublishDuration=(e,t,n,r)=>{const o=this._users.find((t=>t.uid===e));o&&AI.peerPublishStatus(this._sessionId,{subscribeElapse:r,audioPublishDuration:t,videoPublishDuration:n,peer:o._uintid})},this.store.useP2P="p2p"===e.mode,this._gateway=new sM(this.store,{clientId:this._clientId,mode:this.mode,codec:this.codec,websocketRetryConfig:e.websocketRetryConfig||vT,httpRetryConfig:e.httpRetryConfig||vT,forceWaitGatewayResponse:void 0===e.forceWaitGatewayResponse||e.forceWaitGatewayResponse,statsCollector:this._statsCollector,role:e.role,clientRoleOptions:n}),this._configDistribute=new WM(this._clientId),this.store.useP2P?(this._p2pChannel=new vF(this.store,this._statsCollector),this._handleP2PEvents()):this._p2pChannel=new l$(this.store,this._statsCollector),this._handleP2PChannelEvents(),this._handleGatewayEvents(),this._handleGatewaySignalEvents()}async joinMeta(e,t,n,r,o){let i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=arguments.length>6&&void 0!==arguments[6]&&arguments[6];MT("JOIN_GATEWAY_USE_443PORT_ONLY",i),MT("JOIN_GATEWAY_USE_DUAL_DOMAIN",a);const s=this._gateway.signal.websocket;return s instanceof RO&&(s.use443PortOnly=i,s.tryDoubleDomain=a),async function(e,t,n){SS.get(e)||SS.set(e,[]),wS.get(e)||wS.set(e,t),TS.get(e)||TS.set(e,0);const r=SS.get(e),o=wS.get(e);if(!r||!o)throw new Error("concurrent: deferQueue or maxConcurrency is null");if(TS.get(e)===o){const e=CS();r.push(e),await e.promise}TS.set(e,TS.get(e)+1);for(var i=arguments.length,a=new Array(i>3?i-3:0),s=3;s<i;s++)a[s-3]=arguments[s];const c=await n(...a);return TS.set(e,TS.get(e)-1),TS.get(e)===o-1&&r.length>0&&(r[0].resolve(),r.shift()),0===TS.get(e)&&(SS.set(e,[]),wS.set(e,0),TS.set(e,0)),c}("client.join",xT("JOIN_MAX_CONCURRENCY"),this.join.bind(this),e,t,n,r,o)}async join(e,t,n,r,o){const i=++this._numberOfJoinCount;this.store.joinStart(),r&&(this.store.uid=r);const a="HTTPS"===(ST||ST||(ST=(window.location.protocol.split(":")[0]||"").toUpperCase(),ST)),s=OT()?window.isSecureContext:"Browser Not Support";if(!OT()&&!a||!window.isSecureContext){const e="The website must be running in a secure context (About secure context: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts ), otherwise the media collection will be restricted by the browser";oI.warning(e)}"DISCONNECTED"===this.connectionState&&(this.store.avoidJoinStart=Math.round(Date.now()),oI.debug("[".concat(this._clientId,"] set avoidJoinStart to ").concat(this.store.avoidJoinStart))),AI.setAppId(e);try{if(!n&&null!==n)throw new pI(lw.INVALID_PARAMS,"Invalid token: ".concat(n,". If you don not use token, set it to null"));n&&fw(n,"token",1,2047),fw(e,"appid",1,2047),bR(t),r&&CR(r),o&&fw(o,"optionalInfo",1,2047)}catch(f){throw AI.reportApiInvoke(sT(),{name:Rw.JOIN,options:[e,t,n,r],states:{isHttps:a,isSecureContext:s},tag:Ow.TRACER}).onError(f),f}if(this._leaveMutex.isLocked&&(oI.debug("[".concat(this._clientId,"] join: waiting leave operation")),(await this._leaveMutex.lock())(),oI.debug("[".concat(this._clientId,"] join: continue"))),this._joinAndNotLeaveYet=!0,"DISCONNECTED"!==this.connectionState){const o=new pI(lw.INVALID_OPERATION,"[".concat(this._clientId,"] Client already in connecting/connected state"));throw AI.reportApiInvoke(sT(),{name:Rw.JOIN,options:[e,t,n,r],states:{isHttps:a,isSecureContext:s},tag:Ow.TRACER}).onError(o),o}this._gateway.state="CONNECTING";const c=await F$({appId:e,cname:t,uid:r,stringUid:"string"==typeof r?r:void 0,token:n||e,cloudProxyServer:this._cloudProxyServerMode});if(!this._joinAndNotLeaveYet)throw new pI(lw.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));const l=(null==c?void 0:c.sid)||sT();oI.info("[".concat(this._clientId,"] start join channel ").concat(t,", join number: ").concat(i)),this._sessionId||(this._sessionId=l,this.store.sessionId=this._sessionId);const u=AI.reportApiInvoke(l,{id:this._clientId,name:Rw.JOIN,options:[e,t,n,r],states:{isHttps:a,isSecureContext:s},tag:Ow.TRACER}),d=pH(pH(pH({},this._rtmConfig),{},{clientId:this._clientId,appId:e,sid:this._sessionId,cname:t,uid:"string"!=typeof r?r:null,turnServer:this._turnServer,proxyServer:this._proxyServer,token:n||e,cloudProxyServer:this._cloudProxyServerMode,optionalInfo:o,license:this._license,useLocalAccessPoint:this._useLocalAccessPoint,preload:!!c},void 0!==this._remoteDefaultVideoStreamType&&{defaultVideoStream:this._remoteDefaultVideoStreamType}),{},{apRequestDetail:xT("AP_REQUEST_DETAIL")||void 0});if(this._useLocalAccessPoint&&(d.setLocalAPVersion=this._setLocalAPVersion),"string"==typeof r&&(d.stringUid=r,this._uintUid?(d.uid=this._uintUid,this._uintUid=void 0):d.uid=0),"none"!==this._encryptionMode&&this._encryptionSecret){if(d.aesmode=this._encryptionMode,d.aespassword=await(async e=>{const t=function(){const e=window.atob("MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDCMnXAHkKIGAM+x4N22gCI+Wyu\nSTM9ztkT3uYslTT2PuKmZfPzhH6kVdO7PTjGCOZnAsyb3oTtWat0KcxQ4jxvqQV+\nHvYl3iI1Yd4vl2c3qRMJPLtRDfNxa2Mcxgq7e9aEUibzdd0st+OJAy3tOj/Y0aVy\nxQiYDz3vqa6bP29adwIDAQAB"),t=new Uint8Array(new ArrayBuffer(e.length));for(let n=0;n<e.length;n+=1)t[n]=e.charCodeAt(n);return t}(),n=await window.crypto.subtle.importKey("spki",t,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"]),r=bw(e),o=await window.crypto.subtle.encrypt({name:"RSA-OAEP"},n,r);return function(e){let t="";for(let n=0;n<e.length;n+=1)t+=String.fromCharCode(e[n]);return window.btoa(t)}(new Uint8Array(o))})(this._encryptionSecret),!this._joinAndNotLeaveYet)throw new pI(lw.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));this._encryptionSalt&&(d.aessalt=this._encryptionSalt)}if(this._encryptDataStream&&("aes-128-gcm2"===this._encryptionMode||"aes-256-gcm2"===this._encryptionMode))if(this._encryptionSalt&&this._encryptionSecret)if(window.crypto.subtle){const e=new TextEncoder,t=xT("USE_PURE_ENCRYPTION_MASTER_KEY")?e.encode(d.appId+this._encryptionSecret+this._encryptionSecret):e.encode(d.appId+d.cname+this._encryptionSecret);this._encryptDataStreamIv=await async function(e,t,n){const r=await window.crypto.subtle.importKey("raw",t,"PBKDF2",!1,["deriveBits","deriveKey"]),o="aes-128-gcm2"===e?128:256,i=await window.crypto.subtle.deriveBits({name:"PBKDF2",iterations:GT,hash:"SHA-256",salt:n},r,o+QT);return new Uint8Array(i).subarray(o/8)}(this._encryptionMode,t,Xw(this._encryptionSalt)),this._encryptDataStreamKey=await async function(e,t,n){const r=await window.crypto.subtle.importKey("raw",t,"PBKDF2",!1,["deriveBits","deriveKey"]),o="aes-128-gcm2"===e?128:256;return await window.crypto.subtle.deriveKey({name:"PBKDF2",iterations:GT,hash:"SHA-256",salt:n},r,{name:"AES-GCM",length:o},!0,["encrypt","decrypt"])}(this._encryptionMode,t,Xw(this._encryptionSalt))}else s?oI.warning("[".concat(this._clientId,"] encrypt datastream must be running in a secure context, fallback to plain data stream")):oI.warning("[".concat(this._clientId,"] current browser do not support WebCrypto ,fallback to plain data stream")),this._encryptDataStream=!1;else this._encryptDataStream=!1,oI.debug("[".concat(this._clientId,"] no salt / secret, cannot support encrypt data stream, fallback to plain data stream"));this._startSession(this._sessionId,{channel:t,appId:e,stringUid:d.stringUid});const A=this._sessionId;setTimeout((()=>{"CONNECTING"===this.connectionState&&A===this._sessionId&&AI.joinChannelTimeout(this._sessionId,5)}),5e3);try{var p;let r;const o=d.cloudProxyServer;if(Or(p=["proxy3","proxy4","proxy5"]).call(p,o)){const e=xT("PROXY_SERVER_TYPE3");Array.isArray(e)?d.proxyServer=e[0]:d.proxyServer=e}if(AI.setProxyServer(d.proxyServer),oI.setProxyServer(d.proxyServer),this.store.requestAPStart(),c){if(oI.debug("[".concat(this._clientId,"] get serverInfo Success from Preload Cache ").concat(d.stringUid?", ".concat(d.stringUid," => ").concat(c.intUid):""," ")),d.stringUid&&!d.uid&&(d.uid=c.intUid),r={gatewayInfo:c.ap.gatewayInfo},xT("JOIN_WITH_FALLBACK_MEDIA_PROXY")&&"auto"===d.turnServer.mode)if(0===c.ap.proxyInfo.addresses.length)oI.warning("no edge services in ap response of proxy fallback, will not set proxy in iceServers");else{const e=(await $O(c.ap.proxyInfo,c.ap.gatewayInfo.uid)).map((e=>({turnServerURL:e.address,tcpport:e.tcpport||DT.tcpport,udpport:e.udpport||DT.udpport,username:e.username||DT.username,password:e.password||DT.password,forceturn:!1,security:!0})));d.turnServer={mode:"manual",servers:e}}j$(c,d.stringUid)}else{if(d.stringUid&&!d.uid){let e;[e,r]=await MA.all([xM(d.stringUid,d,this._axiosCancelSource.token,this._config.httpRetryConfig||vT,this.store),MM(d,this._axiosCancelSource.token,this._config.httpRetryConfig||vT,!0,this.store)]),oI.debug("[".concat(this._clientId,"] getUserAccount Success ").concat(d.stringUid," => ").concat(e)),d.uid=e,r.gatewayInfo.uid=e,r.gatewayInfo.res.uid=e}else r=await MM(d,this._axiosCancelSource.token,this._config.httpRetryConfig||vT,!0,this.store);if(!this._joinAndNotLeaveYet)throw new pI(lw.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"))}this.store.requestAPEnd(),setTimeout((()=>{this._configDistribute.startGetConfigDistribute(d,this._axiosCancelSource.token),this._configDistribute.on(GR.UPDATE_BITRATE_LIMIT,(e=>{this._p2pChannel.updateBitrateLimit(e)}))}),0),this._key=n||e;const i=r.gatewayInfo,a=d.uid?d.uid:i.uid;this._joinInfo=pH(pH({},d),{},{cid:i.cid,uid:a,vid:i.vid,apResponse:i.res,apGatewayAddress:i.apGatewayAddress,uni_lbs_ip:i.uni_lbs_ip,gatewayAddrs:i.gatewayAddrs}),this.store.intUid=a;const s=await this._joinGateway();if(!this._joinAndNotLeaveYet)throw new pI(lw.INVALID_OPERATION,"[".concat(this._clientId,"] Client already left"));u.onSuccess(s),this._appId=e,this._channelName=d.cname,this._uid=s,this.store.uid=s,setTimeout((()=>{this._networkQualityInterval&&window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=window.setInterval(this._handleUpdateNetworkQuality,2e3),window.addEventListener(xS()?"beforeunload":"pagehide",this._handleBeforeUnload),this._statsCollector.startUpdateStats()}),0);const l=d.stringUid?"string uid: ".concat(d.stringUid,",uid: ").concat(d.uid):"uid: ".concat(this._uid);return oI.info("[".concat(this._clientId,"] Joining channel success: channel: ").concat(t,",").concat(l)),setTimeout((()=>{oI.startUpload()}),5e3),this.store.joinEnd(),h=this,Or(gI).call(gI,h)||gI.push(h),"disabled"===this._cloudProxyServerMode&&UP().supportWebCrypto&&xT("ENABLE_PRELOAD")&&V$(this._joinInfo),s}catch(g){const e=Array.isArray(g)?g[0]:g;throw e&&e.code===lw.OPERATION_ABORTED?oI.warning("[".concat(this._clientId,"] join number: ").concat(i,", Joining channel failed, rollback"),e):oI.error("[".concat(this._clientId,"] join number: ").concat(i,", Joining channel failed, rollback"),e),e.code!==lw.OPERATION_ABORTED&&this._numberOfJoinCount===i&&(this._gateway.state="DISCONNECTED",this._reset()),u.onError(e),e}var h}_joinGateway(){if(!this._joinInfo||!this._key)throw new pI(lw.INVALID_OPERATION);return this._gateway.join(this._joinInfo,this._key,!("disabled"!==this._joinInfo.cloudProxyServer||this._joinInfo.proxyServer||!xT("JOIN_WITH_FALLBACK_SIGNAL_PROXY")))}async leave(){oI.info("[".concat(this._clientId,"] Leaving channel")),window.removeEventListener(xS()?"beforeunload":"pagehide",this._handleBeforeUnload),this._reset(),function(e){const t=gI.indexOf(e);-1!==t&&gI.splice(t,1)}(this),this._statsCollector.stopUpdateStats();const e=await this._leaveMutex.lock();if("DISCONNECTED"===this.connectionState)return oI.info("[".concat(this._clientId,"] Leaving channel repeated, success")),void e();await this._gateway.leave("CONNECTED"!==this.connectionState),oI.info("[".concat(this._clientId,"] Leaving channel success")),this._joinAndNotLeaveYet=!1,this.store.resetJoinChannelServiceRecords(),e()}async publish(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!Array.isArray(e)){if(!(e instanceof RD))return this._publishDataChannel(e);e=[e]}if(0===e.length)throw new pI(lw.INVALID_PARAMS,"param list is empty");const n=e;if("audience"===this._gateway.role)throw new pI(lw.INVALID_OPERATION,"audience can not publish stream");for(const i of n){if(!(i instanceof RD))throw new pI(lw.INVALID_PARAMS,"parameter is not local track");if(!i._enabled&&t)throw new pI(lw.TRACK_IS_DISABLED,"can not publish a disabled track: ".concat(i.getTrackId()))}oI.info("[".concat(this._clientId,"] Publishing tracks, id ").concat(n.map((e=>"".concat(e.getTrackId()," ")))));const r=await this._publishMutex.lock();await this._configDistribute.awaitConfigDistributeComplete(),t&&n.forEach((e=>{const t=this._configDistribute.getBitrateLimit();e instanceof KB&&t&&e.setBitrateLimit(t.uplink)}));try{await this._publishHighStream(n),oI.info("[".concat(this._clientId,"] Publish success, id ").concat(n.map((e=>"".concat(e.getTrackId()," ")))))}catch(o){throw oI.error("[".concat(this._clientId,"] publish error"),o.toString()),o}finally{r()}}async _publishDataChannel(e){pw(e.id,"id",0,65535,!0),dw(e.ordered,"ordered"),fw(e.metadata,"metadata",0,512),oI.info("[".concat(this._clientId,"] Publishing datachannels, id ").concat(e.id));const t=await this._publishMutex.lock();try{if(-1!==this._p2pChannel.getAllDataChannels().findIndex((t=>t.id===e.id)))throw new pI(lw.INVALID_PARAMS,"Invalid id: ".concat(e.id,". If you want to republish the datachannel, unpublish first"));if(!this._joinInfo||void 0===this._uid)throw new pI(lw.INVALID_OPERATION,"Can't publish datachannel, haven't joined yet!");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new pI(lw.INVALID_OPERATION,"can not publish datachannel in ".concat(this.connectionState," state"));if("auto"===this._turnServer.mode&&xT("FORCE_TURN")&&!xT("TURN_ENABLE_TCP")&&!xT("TURN_ENABLE_UDP"))throw new pI(lw.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");const t=h$(n=e,!1),r=await this._p2pChannel.publishDataChannel([t]);if(r.length>0){if("number"!=typeof t._originDataChannelId)throw oI.error("[".concat(this._clientId,"] can not publish with mediaType datachannel, cannot get RTCDatachannel id")),new pI(lw.CREATE_DATACHANNEL_ERROR);try{await MA.all(r.map((e=>this._uid&&this._gateway.publishDataChannel(this._uid,e,!0)))),await t._waitTillOpen()}catch(n){if(n.code!==lw.DISCONNECT_P2P)throw n}}return oI.info("[".concat(this._clientId,"] Publish dataChannels success, id ").concat(t.id)),t}catch(n){throw oI.error("[".concat(this._clientId,"] publish datachannels error"),n.toString()),n}finally{t()}var n}async unpublish(e){if(!this._joinInfo||void 0===this._uid)throw new pI(lw.INVALID_OPERATION,"Can't unpublish stream, haven't joined yet!");let t=[];if(e)if(Array.isArray(e))t=e;else{if(!(e instanceof RD))return this._unpublishDataChannel([e]);t=[e]}else this.store.useP2P||await this._unpublishDataChannel(),t=this._p2pChannel.getAllTracks(!0);oI.info("[".concat(this._clientId,"] Unpublish tracks, tracks ").concat(t.map((e=>"".concat(e.getTrackId()," ")))," "));const n=await this._publishMutex.lock();try{if(this._p2pChannel instanceof vF){const e=await this._p2pChannel.unpublish(t);e&&await this._gateway.sendExtensionMessage(cO.UNPUBLISH,{unpubMsg:e},!0)}else{const e=await this._p2pChannel.unpublish(t);e&&await this._gateway.unpublish(e,this._uid),oI.info("[".concat(this._clientId,"] Unpublish success,tracks ").concat(t.map((e=>"".concat(e.getTrackId())))))}}catch(r){throw oI.error("[".concat(this._clientId,"] unpublish error"),r.toString()),r}finally{n&&n()}}async _unpublishDataChannel(e){void 0!==e&&0!==e.length||(e=this._p2pChannel.getAllDataChannels()),oI.info("[".concat(this._clientId,"] Unpublish datachannels, datachannels ").concat(e.map((e=>"".concat(e.id," ")))," "));const t=await this._publishMutex.lock();try{const t=await this._p2pChannel.unpublishDataChannel(e);t&&await this._gateway.unpublishDataChannel(t),oI.info("[".concat(this._clientId,"] Unpublish dataChannel success,dataChannel ").concat(e.map((e=>"".concat(e.id)))))}catch(n){throw oI.error("[".concat(this._clientId,"] unpublish dataChannel error"),n.toString()),n}finally{t&&t()}}async subscribe(e,t,n){if(!(e instanceof tF)){const t=this.remoteUsers.find((t=>t.uid===e));if(!t)throw new pI(lw.INVALID_REMOTE_USER,"user is not in the channel");e=t}return"datachannel"===t?this._subscribeDataChannel(e,n):this._subscribe(e,t)}async presubscribe(e,t){if(Aw(t,"mediaType",["audio","video"]),this._p2pChannel instanceof vF)throw new pI(lw.INVALID_OPERATION,"can't presub at p2p mode");if(!this._joinInfo)throw new pI(lw.INVALID_OPERATION,"can't presub when not join");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new pI(lw.INVALID_OPERATION,"can't presub in ".concat(this.connectionState," state"));const n=t===qR.AUDIO,r=t===qR.VIDEO,o=await this._subscribeMutex.lock();try{const{ssrcId:o,ortc:i,rtxSsrcId:a,cname:s,uint_id:c}=await this._gateway.presubscribe(e,t,!0);if(null==o)throw new pI(lw.UNEXPECTED_RESPONSE,"no ssrc id");let l=this._users.find((t=>t.uid===e));l||(l=new tF(e,c||e),l._is_pre_created=!0,this._users.push(l)),s&&(l._cname=s),l._uintid||(l._uintid=c||e),n&&(l._audioSSRC=o,l._audio_pre_subscribed=!0,i&&(l._audioOrtc=i)),r&&(l._videoSSRC=o,l._video_pre_subscribed=!0,i&&(l._videoOrtc=i),null!=a&&(l._rtxSsrcId=a)),oI.info("[".concat(this._clientId,"] presub succeed ssrc: ").concat(o)),await this._p2pChannel.subscribe(l,t,o,a,i);const u=n?l._audioTrack:l._videoTrack;if(!u)throw new pI(lw.UNEXPECTED_ERROR,"can not find remote track in user");return n&&(l._trust_audio_stream_added_state_=!0,l._audio_added_=!0),r&&(l._trust_video_stream_added_state_=!0,l._video_added_=!0),u}catch(i){throw oI.error("[".concat(this._clientId,"] presub user ").concat(e," error"),i),i}finally{o()}}async _subscribeDataChannel(e,t){var n;if(pw(t,"channelId",0,65535,!0),!this._joinInfo)throw new pI(lw.INVALID_OPERATION,"Can't subscribe datachannel, not joined");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new pI(lw.INVALID_OPERATION,"Can't subscribe datachannel in ".concat(this.connectionState," state"));if(!this._users.find((t=>t===e)))throw oI.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", this user is not in the channel")),new pI(lw.INVALID_REMOTE_USER,"user is not in the channel");if(!e.hasAudio&&!e.hasVideo&&0===e._dataChannels.length)throw oI.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", user is not published")),new pI(lw.INVALID_REMOTE_USER,"user is not published");const r=null===(n=e._dataChannels)||void 0===n?void 0:n.find((e=>e.id===t));if(!r)throw oI.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid," with mediaType datachannel, remote datachannel is not published")),new pI(lw.REMOTE_USER_IS_NOT_PUBLISHED);const o=await this._subscribeMutex.lock();oI.info("[".concat(this._clientId,"] subscribe user ").concat(e.uid,", mediaType: datachannel"));try{const t=await this._p2pChannel.subscribeDataChannel(e,[r]);if(t&&Or(t).call(t,r.id))try{var i;if("number"!=typeof r._originDataChannelId)throw oI.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid," with mediaType datachannel, cannot get RTCDatachannel")),new pI(lw.CREATE_DATACHANNEL_ERROR);const t={id:r.id,datachannelId:r._originDataChannelId,ordered:r.ordered,maxRetransmits:r.maxRetransmits,metadata:null!==(i=r.metadata)&&void 0!==i?i:""};await this._gateway.subscribeDataChannel(e.uid,t,!0),await r._waitTillOpen()}catch(a){if((null==a?void 0:a.code)!==lw.WS_ABORT)throw await this._p2pChannel.unsubscribeDataChannel(e,[r]),a;await this._p2pChannel.unsubscribeDataChannel(e,[r]),this._p2pChannel.setPendingRemoteDataChannel(e,r.id)}return oI.info("[".concat(this._clientId,"] subscribe success user ").concat(e.uid,", mediaType: datachannel")),r}finally{o()}}async _p2pSubscribe(e,t,n){if(Aw(t,"mediaType",["audio","video"]),!this._joinInfo)throw new pI(lw.INVALID_OPERATION,"Can't subscribe stream, not joined");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new pI(lw.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));if(!this._users.find((t=>t===e))){const t=new pI(lw.INVALID_REMOTE_USER,"user is not in the channel");throw oI.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", this user is not in the channel")),t}if(!e.hasAudio&&!e.hasVideo){const t=new pI(lw.INVALID_REMOTE_USER,"user is not published");throw oI.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", user is not published")),t}if(!n&&("audio"===t&&!e.hasAudio||"video"===t&&!e.hasVideo)){const n=new pI(lw.REMOTE_USER_IS_NOT_PUBLISHED);throw oI.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid," with mediaType ").concat(t,", remote track is not published")),n}const r=await this._subscribeMutex.lock();oI.info("[".concat(this._clientId,"] subscribe user ").concat(e.uid,", mediaType: ").concat(t));try{if(await this._p2pChannel.hasRemoteMediaWithLock(e,t))await this._p2pChannel.unmuteRemote(e,t);else try{const n="audio"===t?e._audioSSRC:e._videoSSRC,r="audio"===t?e._audioMid:e._videoMid;this.store.subscribe(e.uid,t,Date.now()),this._p2pChannel instanceof vF&&await this._p2pChannel.subscribe(e,t,n,r)}catch(o){throw o}oI.info("[".concat(this._clientId,"] subscribe success user ").concat(e.uid,", mediaType: ").concat(t)),this._defaultStreamFallbackType&&this.setStreamFallbackOption(e.uid,this._defaultStreamFallbackType).catch((e=>{oI.warning("[".concat(this._clientId,"] auto set fallback failed"),e)}));const n="audio"===t?e._audioTrack:e._videoTrack;if(!n)throw new pI(lw.UNEXPECTED_ERROR,"can not find remote track in user object");return n}catch(i){throw oI.error("[".concat(this._clientId,"] subscribe user ").concat(e.uid," error"),i),i}finally{r()}}async _subscribe(e,t,n){if(this._p2pChannel instanceof vF)return this._p2pSubscribe(e,t);if(Aw(t,"mediaType",["audio","video"]),!this._joinInfo)throw new pI(lw.INVALID_OPERATION,"Can't subscribe stream, not joined");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new pI(lw.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));if(!this._users.find((t=>t===e))){const t=new pI(lw.INVALID_REMOTE_USER,"user is not in the channel");throw oI.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", this user is not in the channel")),t}if(!e.hasAudio&&!e.hasVideo){const t=new pI(lw.INVALID_REMOTE_USER,"user is not published");throw oI.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid,", user is not published")),t}if(!(n||("audio"!==t||e.hasAudio&&void 0!==e._audioSSRC)&&("video"!==t||e.hasVideo&&void 0!==e._videoSSRC))){const n=new pI(lw.REMOTE_USER_IS_NOT_PUBLISHED);throw oI.error("[".concat(this._clientId,"] can not subscribe ").concat(e.uid," with mediaType ").concat(t,", remote track is not published")),n}let r="audio"===t?e._audioSSRC:e._videoSSRC,o="audio"===t?e._audioOrtc:e._videoOrtc,i="video"===t?e._rtxSsrcId:void 0,a={stream_type:"audio"===t?qR.AUDIO:qR.VIDEO,ssrcId:r};const s=await this._subscribeMutex.lock();oI.info("[".concat(this._clientId,"] subscribe user ").concat(e.uid,", mediaType: ").concat(t));try{if(await this._p2pChannel.hasRemoteMediaWithLock(e,t))await this._p2pChannel.unmuteRemote(e,t);else try{const n="audio"===t?e._audioSSRC:e._videoSSRC;void 0!==n&&n!==r&&(r=n,o="audio"===t?e._audioOrtc:e._videoOrtc,i="video"===t?e._rtxSsrcId:void 0,a={stream_type:"audio"===t?qR.AUDIO:qR.VIDEO,ssrcId:r}),YM.markSubscribeStart(this.store.clientId,r),this.store.subscribe(e.uid,t,Date.now()),await this._p2pChannel.subscribe(e,t,r,i,o);try{this._p2pChannel.isPreSubScribe(r)||await this._gateway.subscribe(e.uid,a,!0)}catch(c){if((null==c?void 0:c.code)!==lw.WS_ABORT)throw await this._p2pChannel.unsubscribe(e,t),c;await this._p2pChannel.unsubscribe(e,t,!0),this._p2pChannel.setPendingRemoteMedia(e,t)}this.store.subscribe(e.uid,t,void 0,Date.now()),this._p2pChannel.reportSubscribeEvent(!0,null,e,t)}catch(l){throw this._p2pChannel.reportSubscribeEvent(!1,null==l?void 0:l.code,e,t),l}oI.info("[".concat(this._clientId,"] subscribe success user ").concat(e.uid,", mediaType: ").concat(t)),this._defaultStreamFallbackType&&this.setStreamFallbackOption(e.uid,this._defaultStreamFallbackType).catch((e=>{oI.warning("[".concat(this._clientId,"] auto set fallback failed"),e)}));const n="audio"===t?e._audioTrack:e._videoTrack;if(!n)throw new pI(lw.UNEXPECTED_ERROR,"can not find remote track in user object");return n}catch(u){throw oI.error("[".concat(this._clientId,"] subscribe user ").concat(e.uid," error"),u),u}finally{s()}}async massSubscribe(e){if(gw(e,"subscribeList"),!this._joinInfo)throw new pI(lw.INVALID_OPERATION,"Can't subscribe stream, not joined");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new pI(lw.INVALID_OPERATION,"Can't subscribe stream in ".concat(this.connectionState," state"));const t=Date.now(),n=new Map,r=await this._subscribeMutex.lock();oI.info("[".concat(this._clientId,"]start massSubscribe user ").concat(e.map((e=>{let{user:t,mediaType:n}=e;return"user: ".concat(null==t?void 0:t.uid,", mediaType: ").concat(n)})).join("; ")));const o=(e=[...e]).map((e=>{let{user:t,mediaType:n}=e;return{user:t,mediaType:n}})),i=await this._p2pChannel.globalLock();try{var a;for(let t=e.length-1;t>=0;t--){const r=e[t],{user:i,mediaType:a}=r;if(Aw(a,"mediaType",["audio","video"]),!i){const e=new pI(lw.INVALID_PARAMS,"user property does not exist in subscribeList item");throw oI.error("[".concat(this._clientId,"] user property does not exist in subscribeList item")),e}if(!this._users.find((e=>e===i))){const n=new pI(lw.INVALID_REMOTE_USER,"user is not in the channel");oI.error("[".concat(this._clientId,"] can not massSubscribe ").concat(i.uid,", this user is not in the channel")),o[t].error=n,e.splice(t,1);continue}if("audio"===a&&(!i.hasAudio||void 0===i._audioSSRC)||"video"===a&&(!i.hasVideo||void 0===i._videoSSRC)){const n=new pI(lw.REMOTE_USER_IS_NOT_PUBLISHED);oI.error("[".concat(this._clientId,"] can not subscribe ").concat(i.uid," with mediaType ").concat(a,", remote user is not published")),o[t].error=n,e.splice(t,1);continue}const s=$R.Video|$R.LwoVideo,c=n.get(i);if(c){if("video"===a?c&s:c&$R.Audio){e.splice(t,1),oI.warning("[".concat(this._clientId,"] repeat massSubscribe user:").concat(i.uid,", mediaType:").concat(a," twice"));continue}n.set(i,c|("video"===a?s:$R.Audio))}else n.set(i,"video"===a?s:$R.Audio)}for(let t=e.length-1;t>=0;t--){const r=e[t],{user:o,mediaType:i}=r,a=$R.Video|$R.LwoVideo;if(this._p2pChannel.hasRemoteMedia(o,i)){await this._p2pChannel.unmuteRemoteNoLock(o,i);const r=n.get(o);n.set(o,"video"===i?r^a:r^$R.Audio),e.splice(t,1)}}this.store.massSubscribe(e.map((e=>({userId:e.user.uid,type:e.mediaType}))),t);let r=Kr(a=Array.from(n.entries())).call(a,((e,t)=>{let[n,r]=t;if(0===r)return e;const o={stream_id:n.uid,stream_type:r};return r&$R.Audio&&(o.audio_ssrc=n._audioSSRC),r&$R.Video&&(o.video_ssrc=n._videoSSRC),e.push(o),e}),[]);try{e.length>0&&await this._p2pChannel.massSubscribeNoLock(e.map((e=>{let{user:t,mediaType:n}=e;return{user:t,mediaType:n,ssrcId:n===qR.VIDEO?t._videoSSRC:t._audioSSRC,rtxSsrcId:n===qR.VIDEO?t._rtxSsrcId:void 0}})));const n=new Map;if(r=r.filter((e=>e.video_ssrc&&!this._p2pChannel.isPreSubScribe(e.video_ssrc)||e.audio_ssrc&&!this._p2pChannel.isPreSubScribe(e.audio_ssrc)||!e.video_ssrc&&!e.audio_ssrc)),r.length>0){const e=await this._gateway.subscribeAll(r,!0);((null==e?void 0:e.users)||[]).forEach((e=>{let{stream_id:t,video_error_code:r,audio_error_code:o,error_code:i}=e;(r||o||i)&&n.set(t,{video_error_code:r,audio_error_code:o,error_code:i})}))}if(Array.from(n.entries()).length>0){const e=[];Array.from(n.entries()).forEach((t=>{let[n,r]=t;const o=this.remoteUsers.find((e=>e.uid===n));if(o){let t;r.error_code||r.video_error_code&&r.audio_error_code?t=void 0:r.video_error_code?t=qR.VIDEO:r.audio_error_code&&(t=qR.AUDIO),e.push({user:o,mediaType:t})}})),e.length>0&&await this._p2pChannel.massUnsubscribeNoLock(e)}for(const e of o){const t=n.get(e.user.uid);if(t){const n=t.error_code||"audio"===e.mediaType&&t.audio_error_code||"video"===e.mediaType&&t.video_error_code;if(n){const t=fO(n);oI.error("user:".concat(e.user.uid," mediaType:").concat(e.mediaType," has massSubscribe error ").concat(t.desc)),e.error=new pI(lw.SUBSCRIBE_FAILED,"code ".concat(n,": ").concat(t.desc))}}e.error||("video"===e.mediaType?e.track=e.user.videoTrack:e.track=e.user.audioTrack)}return this.store.massSubscribe(o.filter((e=>!e.error)).map((e=>({userId:e.user.uid,type:e.mediaType}))),void 0,Date.now()),o.forEach((e=>{var n;AI.subscribe(this.store.sessionId,{succ:!!e.error,ec:(null===(n=e.error)||void 0===n?void 0:n.code)||null,video:e.mediaType===qR.VIDEO,audio:e.mediaType===qR.AUDIO,peerid:e.user.uid,subscribeRequestid:e.mediaType===qR.VIDEO?e.user._videoSSRC:e.user._audioSSRC,p2pid:this.store.p2pId,eventElapse:Math.floor(performance.now()-t),preSsrc:this._p2pChannel.isPreSubScribe(e.user._videoSSRC)},!0)})),oI.info("[".concat(this._clientId,"] massSubscribe success ").concat(e.map((e=>{let{user:t,mediaType:n}=e;return"user: ".concat(null==t?void 0:t.uid,", mediaType: ").concat(n)})).join("; "))),o}catch(s){throw await this._p2pChannel.massUnsubscribeNoLock(e),s}}finally{i(),r()}}async unsubscribe(e,t,n){if(!(e instanceof tF)){const t=this.remoteUsers.find((t=>t.uid===e));if(!t)throw new pI(lw.INVALID_REMOTE_USER,"user is not in the channel");e=t}if(t||this.store.useP2P){if("datachannel"===t)return this._unsubscribeDataChannel(e,n)}else await this._unsubscribeDataChannel(e,n);if(t&&Aw(t,"mediaType",["audio","video"]),!this._joinInfo)throw new pI(lw.INVALID_OPERATION,"Can't unsubscribe stream, haven't joined yet!");if(!this._users.find((t=>t===e))){const t=new pI(lw.INVALID_REMOTE_USER,"user is not in the channel");throw oI.error("[".concat(this._clientId,"] can not unsubscribe ").concat(e.uid,", user is not in the channel")),t}oI.info("[".concat(this._clientId,"] unsubscribe uid: ").concat(e.uid,", mediaType: ").concat(t));const r=await this._subscribeMutex.lock();try{if(this._p2pChannel instanceof vF)await this._p2pChannel.unsubscribe(e,t);else{const n=await this._p2pChannel.unsubscribe(e,t);n&&await this._gateway.unsubscribe(n,e.uid),t&&"audio"!==t||(e._audio_pre_subscribed=!1),t&&"video"!==t||(e._video_pre_subscribed=!1),e._is_pre_created&&Gw(this._users,e),oI.info("[".concat(this._clientId,"] unsubscribe success uid: ").concat(e.uid,", mediaType: ").concat(t))}}catch(o){if(o.code===lw.DISCONNECT_P2P)return void oI.warning("disconnecting p2p, abort unsubscribe request.");throw oI.error("[".concat(this._clientId,"] unsubscribe user ").concat(e.uid," error"),o.toString()),o}finally{r()}}async _unsubscribeDataChannel(e,t){if(t&&pw(t,"id",0,65535,!0),!this._joinInfo)throw new pI(lw.INVALID_OPERATION,"Can't unsubscribe datachannel, haven't joined yet!");if(!this._users.find((t=>t===e))){const t=new pI(lw.INVALID_REMOTE_USER,"user is not in the channel");throw oI.error("[".concat(this._clientId,"] can not unsubscribe ").concat(e.uid,", user is not in the channel")),t}let n;if("number"==typeof t){const r=e._dataChannels.find((e=>e.id===t));r&&(n=[r])}else n=e._dataChannels;if(void 0===n){const n=new pI(lw.REMOTE_USER_IS_NOT_PUBLISHED);throw oI.error("[".concat(this._clientId,"] can not unsubscribe ").concat(e.uid," with channelId ").concat(t,", remote datachannel is not published")),n}oI.info("[".concat(this._clientId,"] unsubscribe uid: ").concat(e.uid,", mediaType: datachannel, ids: ").concat(n.map((e=>e.id))));try{const t=await this._p2pChannel.unsubscribeDataChannel(e,n);t&&await this._gateway.unsubscribeDataChannel(t,e.uid),oI.info("[".concat(this._clientId,"] unsubscribe datachannel success uid: ").concat(e.uid,", mediaType: datachannel, ids: ").concat(t))}catch(r){if(r.code===lw.DISCONNECT_P2P)return void oI.warning("disconnecting p2p, abort unsubscribe request.");throw oI.error("[".concat(this._clientId,"] unsubscribe user ").concat(e.uid," error"),r.toString()),r}}async massUnsubscribe(e){if(gw(e,"unsubscribeList"),!this._joinInfo)throw new pI(lw.INVALID_OPERATION,"Can't unsubscribeAll stream, haven't joined yet!");oI.info("[".concat(this._clientId,"] start massUnsubscribe ").concat(e.map((e=>{let{user:t,mediaType:n}=e;return"user: ".concat(null==t?void 0:t.uid,", mediaType: ").concat(n,";")})).join())),e=[...e];const t=new Map;for(let r=e.length-1;r>=0;r--){const{user:n,mediaType:o}=e[r];if(!n){const e=new pI(lw.INVALID_PARAMS,"user property does not exist in unsubscribeList item");throw oI.error("[".concat(this._clientId,"] user property does not exist in unsubscribeList item")),e}if(Aw(o,"mediaType",["video","audio",void 0]),!this._users.find((e=>e===n))){oI.warning("[".concat(this._clientId,"] can not unsubscribe ").concat(n.uid,", user is not in the channel")),e.splice(r,1);continue}const i=$R.Video|$R.LwoVideo;if(t.has(n)){const a=t.get(n);let s;switch(o){case"video":s=a&i;break;case"audio":s=a&$R.Audio;break;default:s=a&($R.Audio|i)}if(s){oI.warning("[".concat(this._clientId,"] repeat massUnsubscribe user:").concat(n.uid,",mediaType:").concat(o," twice.")),e.splice(r,1);continue}o?"audio"===o?t.set(n,a|$R.Audio):"video"===o&&t.set(n,a|i):t.set(n,a|$R.Audio|i)}else o?"audio"===o?t.set(n,$R.Audio):"video"===o&&t.set(n,i):t.set(n,$R.Audio|i)}try{const t=await this._p2pChannel.massUnsubscribe(e);t&&await this._gateway.massUnsubscribe(t),oI.info("[".concat(this._clientId,"] massUnsubscribe success ").concat(e.map((e=>{let{user:t,mediaType:n}=e;return"user: ".concat(null==t?void 0:t.uid,", mediaType: ").concat(n,";")})).join()))}catch(n){if(n.code===lw.DISCONNECT_P2P)return void oI.warning("[".concat(this._clientId,"] disconnecting p2p, abort unsubscribe request."));throw oI.error("[".concat(this._clientId,"] massUnsubscribe error"),n.toString()),n}}async setLowStreamParameter(e){!function(e){if(!e)throw new uw(lw.INVALID_PARAMS);mw(e.width)||hw(e.width,"streamParameter.width"),mw(e.height)||hw(e.height,"streamParameter.height"),mw(e.framerate)||hw(e.framerate,"streamParameter.framerate"),mw(e.bitrate)||pw(e.bitrate,"streamParameter.bitrate")}(e),(!e.width&&e.height||e.width&&!e.height)&&oI.warning("[".concat(this._clientId,"] The width and height parameters take effect only when both are set")),oI.info("[".concat(this._clientId,"] set low stream parameter to"),JSON.stringify(e));const t=this._configDistribute.getLowStreamConfigDistribute();if(t&&t.bitrate&&e.bitrate&&t.bitrate<e.bitrate&&(e.bitrate=t.bitrate),this._lowStreamParameter=e,this._isDualStreamEnabled)return this._p2pChannel.updateVideoStreamParameter(e,JR.LocalVideoLowTrack)}async enableDualStream(){if(!UP().supportDualStream)throw AI.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),new pI(lw.NOT_SUPPORTED,"Your browser is not support dual stream");if(this._isDualStreamEnabled)throw new pI(lw.INVALID_OPERATION,"Dual stream is already enabled");if(this._p2pChannel.canPublishLowStream())try{await this._publishLowStream()}catch(mp){throw AI.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!1}),mp}this._isDualStreamEnabled=!0,AI.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!0,succ:!0}),oI.info("[".concat(this._clientId,"] enable dual stream"))}async disableDualStream(){if(this._isDualStreamEnabled){if(!this._joinInfo)throw new pI(lw.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if(this._p2pChannel.getLocalMedia(JR.LocalVideoLowTrack))try{const e=await this._p2pChannel.unpublishLowStream();e&&await this._gateway.unpublish(e,this._joinInfo.stringUid||this._joinInfo.uid)}catch(mp){throw AI.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!1}),mp}this._isDualStreamEnabled=!1,AI.streamSwitch(this._sessionId,{lts:Date.now(),isdual:!1,succ:!0}),oI.info("[".concat(this._clientId,"] disable dual stream"))}}async setClientRole(e,t){if(Aw(e,"role",["audience","host"]),t&&Bw(t),"rtc"===this.mode||"p2p"===this.mode)throw oI.warning("[".concat(this._clientId,"]").concat(this.mode," mode can not use setClientRole")),new pI(lw.INVALID_OPERATION,"".concat(this.mode," mode can not use setClientRole"));if(t&&t.level&&"host"===e)throw new pI(lw.INVALID_OPERATION,"host mode can not set audience latency level");if("audience"===e&&this._p2pChannel.hasLocalMedia())throw new pI(lw.INVALID_OPERATION,"can not set client role to audience when publishing stream");await this._gateway.setClientRole(e,t),this._config.role=e,oI.info("[".concat(this._clientId,"] set client role to ").concat(e,", level: ").concat(t&&t.level))}getRemoteInboundOffset(){var e;const t=null===(e=this._p2pChannel.getStats())||void 0===e?void 0:e.audioSend[0];if(!t||!t.timestamp)return 0;const n=t.timestamp-Date.now();return Math.abs(n)>1e3+t.rttMs+100?this.ntpAlignErrorCount+=1:this.ntpAlignErrorCount=0,this.ntpAlignErrorCount>=3?n:0}getNtpWallTimeInMs(){return"visible"===document.visibilityState&&(this.remoteInboundOffset=this.getRemoteInboundOffset()),this.remoteInboundOffset+Date.now()+this._gateway.ntpOffset}setProxyServer(e,t){if(fw(e,"proxyServer"),!t){if("DISCONNECTED"!==this.connectionState)throw new pI(lw.INVALID_OPERATION,"Set proxy server before join channel");if("disabled"!==this._cloudProxyServerMode||this._useLocalAccessPoint)throw new pI(lw.INVALID_OPERATION,"You have already set the proxy")}this._proxyServer=e,AI.setProxyServer(this._proxyServer),oI.setProxyServer(this._proxyServer),oI.info("[".concat(this._clientId,"] Set proxy server ").concat(t?"by initialize call":""," success."))}setTurnServer(e,t){if(Array.isArray(e)||(e=[e]),!t){if("DISCONNECTED"!==this.connectionState)throw new pI(lw.INVALID_OPERATION,"Set turn server before join channel");if("disabled"!==this._cloudProxyServerMode||this._useLocalAccessPoint)throw new pI(lw.INVALID_OPERATION,"You have already set the proxy")}if(Dw(e))return this._turnServer={servers:e,mode:"original-manual"},void oI.info("[".concat(this._clientId,"] Set original turnserver ").concat(t?"by initialize call":""," success: ").concat(e.map((e=>e.urls)).join(","),"."));e.forEach((e=>Lw(e))),this._turnServer={servers:e,mode:"manual"},oI.info("[".concat(this._clientId,"] Set turnserver ").concat(t?"by initialize call":""," success."))}setLicense(e){if("DISCONNECTED"!==this.connectionState)throw new pI(lw.INVALID_OPERATION,"you should set license before join channel");if(fw(e,"license",32,32),!/^[A-Za-z\d]+$/.test(e))throw new pI(lw.INVALID_PARAMS,"license should only contains characters from A-Z a-z 0-9");this._license=e,oI.info("[".concat(this._clientId,"] set license success"),e)}startProxyServer(e){if("DISCONNECTED"!==this.connectionState)throw new pI(lw.INVALID_OPERATION,"Start proxy server before join channel");if(this._proxyServer||"manual"===this._turnServer.mode||this._useLocalAccessPoint)throw new pI(lw.INVALID_OPERATION,"You have already set the proxy");const t=[3,4,5];let n;switch(void 0===e&&(e=3),e){case 1:case 2:throw new pI(lw.NOT_SUPPORTED,"proxy mode 1/2 has been deprecated and not supported.");case 3:n="proxy3";break;case 4:n="proxy4";break;case 5:n="proxy5";break;default:throw new pI(lw.INVALID_PARAMS,"proxy server mode must be ".concat(t.join("|")))}this._cloudProxyServerMode=n,this.store.cloudProxyServerMode=n,oI.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode)}stopProxyServer(){if("DISCONNECTED"!==this.connectionState)throw new pI(lw.INVALID_OPERATION,"Stop proxy server after leave channel");AI.setProxyServer(),oI.setProxyServer(),this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled",oI.info("[".concat(this._clientId,"] set cloud proxy server mode to"),this._cloudProxyServerMode),this._proxyServer=void 0,this._turnServer={mode:"auto",servers:[]}}setLocalAccessPointsV2(e){if(!e.accessPoints)throw new pI(lw.INVALID_PARAMS,"accessPoints is required.");gw(e.accessPoints.serverList,"accessPoints.serverList"),fw(e.accessPoints.domain,"accessPoints.domain");const t=(e,t)=>{pw(e,t,0,65535,!0)};let n=443;if(e.accessPoints.port&&(t(e.accessPoints.port,"accessPoints.port"),n=e.accessPoints.port),this._proxyServer||"disabled"!==this._cloudProxyServerMode)throw new pI(lw.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");xT("CLOSE_AFB_FOR_LOCAL_AP")&&(MT("JOIN_WITH_FALLBACK_SIGNAL_PROXY",!1),MT("JOIN_WITH_FALLBACK_MEDIA_PROXY",!1));const r=/^((\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.){3}(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,o=e.accessPoints.domain,i=e.accessPoints.serverList.map((e=>r.test(e)?"".concat(e.replace(/\./g,"-"),".").concat(o):e)),a=i.map((e=>"".concat(e,":").concat(n)));this._useLocalAccessPoint=!0,this._setLocalAPVersion=2,MT("WEBCS_DOMAIN",a),MT("WEBCS_DOMAIN_BACKUP_LIST",a),MT("GATEWAY_DOMAINS",[o]),e.report&&e.report.hostname&&Array.isArray(e.report.hostname)&&e.report.hostname.length?(gw(e.report.hostname,"report.hostname"),MT("EVENT_REPORT_DOMAIN",e.report.hostname[0]),MT("EVENT_REPORT_BACKUP_DOMAIN",e.report.hostname[1]||e.report.hostname[0])):(MT("EVENT_REPORT_DOMAIN",i[0]),MT("EVENT_REPORT_BACKUP_DOMAIN",i[1]||i[0]));let s=6443;e.report&&e.report.port&&(t(e.report.port,"report.port"),s=e.report.port),MT("STATS_COLLECTOR_PORT",s),e.report?MT("ENABLE_EVENT_REPORT",!0):MT("ENABLE_EVENT_REPORT",!1);let c="";e.log&&e.log.hostname&&Array.isArray(e.log.hostname)&&e.log.hostname.length?(gw(e.log.hostname,"log.hostname"),c=e.log.hostname[0]):c=i[0];let l=6444;e.log&&e.log.port&&(t(e.log.port,"log.port"),l=e.log.port),MT("LOG_UPLOAD_SERVER","".concat(c,":").concat(l));let u=[];e.cds&&e.cds.hostname&&Array.isArray(e.cds.hostname)&&e.cds.hostname.length?(gw(e.cds.hostname,"cds.hostname"),u=e.cds.hostname):u=i;let d=443;e.cds&&e.cds.port&&(t(e.cds.port,"cds.port"),d=e.cds.port),MT("CDS_AP",u.map((e=>"".concat(e,":").concat(d)))),e.cds?MT("ENABLE_CONFIG_DISTRIBUTE",!0):MT("ENABLE_CONFIG_DISTRIBUTE",!1),oI.info("set local access point v2 success")}setLocalAccessPoints(e,t){if(gw(e,"serverList"),fw(t,"domain"),this._proxyServer||"disabled"!==this._cloudProxyServerMode)throw new pI(lw.INVALID_OPERATION,"set local access point failed, You have already set the cloud proxy");const n=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;e=e.map((e=>n.test(e)?"".concat(e.replace(/\./g,"-"),".").concat(t):e)),this._useLocalAccessPoint=!0,this._setLocalAPVersion=1,MT("WEBCS_DOMAIN",e),MT("WEBCS_DOMAIN_BACKUP_LIST",e),MT("GATEWAY_DOMAINS",[t]),MT("EVENT_REPORT_DOMAIN",e[0]),MT("EVENT_REPORT_BACKUP_DOMAIN",e[1]||e[0]),MT("LOG_UPLOAD_SERVER","".concat(e[0],":6444")),oI.info("[".concat(this._clientId,"] set local access point success"))}async setRemoteDefaultVideoStreamType(e){if(Aw(e,"streamType",[0,1,4,5,6,7,8,9]),this._remoteDefaultVideoStreamType=e,this._joinInfo)try{await this._gateway.setDefaultRemoteVideoStreamType(e),this._joinInfo.defaultVideoStream=this._remoteDefaultVideoStreamType}catch(t){throw oI.error("[".concat(this._clientId,"] set default remote video stream type error"),t.toString()),t}else oI.debug("[".concat(this._clientId,"] haven't joined yet, cache remoteDefaultVideoStreamType ").concat(e))}async setRemoteVideoStreamType(e,t){Aw(t,"streamType",[0,1,4,5,6,7,8,9]);try{await this._gateway.setRemoteVideoStreamType(e,t),setTimeout((()=>{const t=this._users.find((t=>t.uid===e));t&&t.videoTrack&&t.videoTrack.updateMediaStreamTrackResolution()}),2e3)}catch(n){throw oI.error("[".concat(this._clientId,"] set remote video stream type error"),n.toString()),n}oI.info("[".concat(this._clientId,"] set remote ").concat(e," video stream type to ").concat(t)),this._remoteStreamTypeCacheMap.set(e,t)}async setStreamFallbackOption(e,t){Aw(t,"fallbackType",[0,1,2,3,4,5,6,7,8]);try{await this._gateway.setStreamFallbackOption(e,t)}catch(n){throw oI.error("[".concat(this._clientId,"] set stream fallback option"),n.toString()),n}oI.info("[".concat(this._clientId,"] set remote ").concat(e," stream fallback type to ").concat(t)),this._streamFallbackTypeCacheMap.set(e,t)}setEncryptionConfig(e,t,n,r){Aw(e,"encryptionMode",["aes-128-xts","aes-256-xts","aes-128-ecb","sm4-128-ecb","aes-128-gcm","aes-256-gcm","aes-128-gcm2","aes-256-gcm2","none"]),fw(t,"secret");const o=["aes-128-gcm2","aes-256-gcm2"];if(Or(o).call(o,e)){if(!n||!(n instanceof Uint8Array&&32===n.length))throw new pI(lw.INVALID_PARAMS,"salt must be an Uint8Array and exactly equal to 32 bytes")}else if(n)throw new pI(lw.INVALID_PARAMS,"current encrypt mode does not need salt");if(r){if(dw(r,"encryptDataStream"),!Or(o).call(o,e))throw new pI(lw.INVALID_PARAMS,"current encrypt mode does not support data stream");this._encryptDataStream=!0}new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*,.<>?/:;'\"|{}\\[\\]])(?=.{8,})").test(t)||oI.warning("The secret is not strong:\n      The secret must contain at least 1 lowercase alphabetical character,\n      The secret must contain at least 1 uppercase alphabetical character,\n      The secret must contain at least 1 numeric character,\n      The secret must contain at least one special character,\n      The secret must be eight characters or longer.\n      "),this._encryptionMode=e,this._encryptionSecret=t,n&&(this._encryptionSalt=Zw(n))}async renewToken(e){if(fw(e,"token",1,2047),!this._key||!this._joinInfo)throw new pI(lw.INVALID_OPERATION,"renewToken should not be called before user join");const t=this._key;this._key=e,this._joinInfo&&(this._joinInfo.token=e);const n=await this._renewTokenMutex.lock();try{if(xT("USE_NEW_TOKEN")){oI.debug("[".concat(this._clientId,"] start renew token with ticket from unilbs"));const t=await QM(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||vT);oI.debug("[".concat(this._clientId,"] get ticket from unilbs success")),await this._gateway.renewToken({token:e,ticket:t})}else oI.debug("[".concat(this._clientId,"] start renew token without ticket")),await this._gateway.renewToken({token:e});oI.debug("[".concat(this._clientId,"] renewToken success"))}catch(r){throw this._key=t,this._joinInfo.token=t,oI.error("[".concat(this._clientId,"] renewToken failed"),r.toString()),r}finally{n()}}enableAudioVolumeIndicator(){this._audioVolumeIndicationInterval?oI.warning("you have already enabled audio volume indicator!"):this._audioVolumeIndicationInterval=window.setInterval((()=>{const e=this._p2pChannel.getAudioLevels();this.safeEmit(Uw.VOLUME_INDICATOR,e)}),xT("AUDIO_VOLUME_INDICATION_INTERVAL")||2e3)}getRTCStats(){const e=this._statsCollector.getRTCStats(),t=this._gateway.getInChannelInfo();return e.Duration=Math.round(t.duration/1e3),e}async startLiveStreaming(e,t){if(!t){if("h264"!==this.codec)throw new pI(lw.LIVE_STREAMING_INVALID_RAW_STREAM,"raw streaming is only support h264");if(!this._p2pChannel.hasLocalMedia())throw new pI(lw.LIVE_STREAMING_INVALID_RAW_STREAM,"can not find stream to raw streaming")}if(this._liveRawStreamingClient&&this._liveRawStreamingClient.hasUrl(e)||this._liveTranscodeStreamingClient&&this._liveTranscodeStreamingClient.hasUrl(e))throw new pI(lw.LIVE_STREAMING_TASK_CONFLICT);const n=t?SR.TRANSCODE:SR.RAW;return this._createLiveStreamingClient(n).startLiveStreamingTask(e,n)}setLiveTranscoding(e){return this._createLiveStreamingClient(SR.TRANSCODE).setTranscodingConfig(e)}async stopLiveStreaming(e){const t=[this._liveRawStreamingClient,this._liveTranscodeStreamingClient].filter((t=>t&&t.hasUrl(e)));if(!t.length)throw new pI(lw.INVALID_PARAMS,"can not find live streaming url to stop");await MA.all(t.map((t=>t&&t.stopLiveStreamingTask(e))))}async startChannelMediaRelay(e){TF(e);const t=this._createChannelMediaRelayClient();await t.startChannelMediaRelay(e)}async updateChannelMediaRelay(e){TF(e);const t=this._createChannelMediaRelayClient();await t.updateChannelMediaRelay(e)}async stopChannelMediaRelay(){const e=this._createChannelMediaRelayClient();await e.stopChannelMediaRelay(),this._statsCollector.onStatsChanged&&(this._statsCollector.onStatsChanged=void 0)}async sendStreamMessage(e){var t;let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this._joinInfo)throw new pI(lw.INVALID_OPERATION,"can not send data stream, not joined");if(("string"==typeof e||e instanceof Uint8Array)&&(e={payload:e}),"string"==typeof e.payload){const t=new TextEncoder;e.payload=t.encode(e.payload)}let r=!1;if(this._encryptDataStream&&this._encryptDataStreamIv&&this._encryptDataStreamKey&&window.crypto.subtle&&Or(t=["aes-128-gcm2","aes-256-gcm2"]).call(t,this._encryptionMode)&&(r=!0,e.payload=await async function(e,t,n){var r;const o=Kr(r=Array.from(n)).call(r,((e,t)=>e+t),0),i={serverTs:0,seq:WT++,length:n.length,checkSum:o},a=new Uint8Array(pT(o,2)),s=new ArrayBuffer(KT),c=new DataView(s);c.setUint32(0,i.serverTs),c.setUint16(4,i.seq),c.setUint16(6,i.length),c.setUint16(8,i.checkSum);const l=16-n.length%16;n=tT(n,new Uint8Array(l));const u=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:e,tagLength:jT,additionalData:a},t,n);return tT(new Uint8Array(s),new Uint8Array(u))}(this._encryptDataStreamIv,this._encryptDataStreamKey,e.payload)),new Blob([e.payload]).size>1024)throw new pI(lw.INVALID_PARAMS,r?"encrypted stream message out of range.":"stream message out of range.");return this._gateway.signal.request(mR.DATA_STREAM,{payload:Zw(e.payload),syncWithAudio:e.syncWithAudio,sendTs:Date.now()-m$},!n)}sendMetadata(e){if(!this._joinInfo)throw new pI(lw.INVALID_OPERATION,"can not send metadata, not joined");if(new Blob([e]).size>1024)throw new pI(lw.METADATA_OUT_OF_RANGE);return this._gateway.signal.request(mR.SEND_METADATA,{session_id:this._joinInfo.sid,metadata:Zw(e)})}async sendCustomReportMessage(e){if(Array.isArray(e)||(e=[e]),e.forEach(aI),!this._joinInfo)throw new pI(lw.INVALID_OPERATION,"can not send custom report, not joined");await AI.sendCustomReportMessage(this._joinInfo.sid,e)}getLocalAudioStats(){return this._statsCollector.getLocalAudioTrackStats()}getRemoteAudioStats(){return this._statsCollector.getRemoteAudioTrackStats()}getLocalVideoStats(){return this._statsCollector.getLocalVideoTrackStats()}getRemoteVideoStats(){return this._statsCollector.getRemoteVideoTrackStats()}getRemoteNetworkQuality(){return this._statsCollector.getRemoteNetworkQualityStats()}async pickSVCLayer(e,t){Aw(t.spatialLayer,"spatialLayer",[0,1,2,3]),Aw(t.temporalLayer,"temporalLayer",[0,1,2,3]);try{await this._gateway.pickSVCLayer(e,t)}catch(n){throw oI.error("[".concat(this._clientId,"] pick SVC layer failed"),n.toString()),n}}async setRTMConfig(e){const{apRTM:t=!1,rtmFlag:n}=e;if(dw(t,"apRTM"),pw(n,"rtmFlag",0),this._rtmConfig.apRTM=t,this._rtmConfig.rtmFlag=n,oI.debug("[".concat(this._clientId,"] setRTMconfig ").concat(JSON.stringify(e)," in ").concat(this.connectionState," state")),("CONNECTED"===this.connectionState||"RECONNECTING"===this.connectionState)&&this._joinInfo)return this._joinInfo.apRTM=t,this._joinInfo.rtmFlag=n,this._gateway.setRTM2Flag(n)}_reset(){if(oI.debug("[".concat(this._clientId,"] reset client")),this._axiosCancelSource.cancel(),this._axiosCancelSource=yS.CancelToken.source(),this._streamFallbackTypeCacheMap=new Map,this._remoteStreamTypeCacheMap=new Map,this._configDistribute.stopGetConfigDistribute(),this._joinInfo&&H$(this._joinInfo),this._joinInfo=void 0,this._proxyServer=void 0,this._defaultStreamFallbackType=void 0,this._sessionId&&AI.removeSid(this._sessionId),this._sessionId=null,this.store.sessionId=null,this._statsCollector.reset(),this._key=void 0,this._appId=void 0,this._uid=void 0,this.store.uid=void 0,this._channelName=void 0,this._encryptionMode="none",this._encryptionSecret=null,this._encryptionSalt=null,this._encryptDataStreamKey=null,this._encryptDataStreamIv=null,this._pendingPublishedUsers=[],this._users.forEach((e=>{e._audioTrack&&e._audioTrack._destroy(),e._videoTrack&&e._videoTrack._destroy(),e._dataChannels&&(e._dataChannels.forEach((e=>e._close())),e._dataChannels.length=0)})),this._users=[],this._audioVolumeIndicationInterval&&(window.clearInterval(this._audioVolumeIndicationInterval),this._audioVolumeIndicationInterval=void 0),"fallback"===this._cloudProxyServerMode&&(this._cloudProxyServerMode="disabled",this.store.cloudProxyServerMode="disabled"),this._p2pChannel.reset(),this._publishMutex=new _T("client-publish",this._clientId),this._subscribeMutex=new _T("client-subscribe",this._clientId),this._networkQualityInterval&&(window.clearInterval(this._networkQualityInterval),this._networkQualityInterval=void 0),this._liveRawStreamingClient&&(this._liveRawStreamingClient.terminate(),this._liveRawStreamingClient.removeAllListeners(),this._liveRawStreamingClient=void 0),this._liveTranscodeStreamingClient&&(this._liveTranscodeStreamingClient.terminate(),this._liveTranscodeStreamingClient.removeAllListeners(),this._liveTranscodeStreamingClient=void 0),this._channelMediaRelayClient&&(this._channelMediaRelayClient.dispose(),this._channelMediaRelayClient=void 0),this._inspect)try{this._inspect.close(),this._inspect=void 0}catch(mp){}if(this._moderation)try{this.setImageModeration(!1)}catch(mp){}}_startSession(e,t){var n;const r=e||sT();e?oI.debug("[".concat(this._clientId,"] new Session ").concat(r)):oI.debug("[".concat(this._clientId,"] renewSession ").concat(this._sessionId," => ").concat(r));const o=e?"":this._sessionId||"";this._sessionId=r,this.store.sessionId=r,AI.addSid(r);const i={lts:(new Date).getTime(),mode:this.mode,buildFormat:1,stringUid:(null==t?void 0:t.stringUid)||(null===(n=this._joinInfo)||void 0===n?void 0:n.stringUid),channelProfile:"live"===this.mode?1:0,channelMode:0,isABTestSuccess:Number(this._configDistribute.isSuccess),lsid:o,clientRole:"audience"===this.role?2:1};AI.sessionInit(this._sessionId,pH({cname:t.channel,appid:t.appId},i)),this._joinInfo&&(this._joinInfo.sid=r),this._gateway.joinInfo&&(this._gateway.joinInfo.sid=r)}async _publishHighStream(e){if(!this._joinInfo||void 0===this._uid)throw new pI(lw.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new pI(lw.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));if("auto"===this._turnServer.mode&&xT("FORCE_TURN")&&!xT("TURN_ENABLE_TCP")&&!xT("TURN_ENABLE_UDP"))throw new pI(lw.UNEXPECTED_ERROR,"force TURN With No TURN Configuration");oI.debug("[".concat(this._clientId,"] publish high stream"));try{const r=await this._p2pChannel.publish(e,this._isDualStreamEnabled,this._lowStreamParameter);if(this._p2pChannel instanceof vF){const e=(await r.next()).value;if(e){try{await this._gateway.sendExtensionMessage(cO.PUBLISH,e,!0)}catch(n){throw r.throw(n),n}await r.next()}this._p2pChannel.reportPublishEvent(!0,null)}else{const o=(await r.next()).value;if(o){var t;let e;try{e=await this._gateway.publish(this._uid,o,!0)}catch(n){if(n.code!==lw.DISCONNECT_P2P)throw r.throw(n),n}await r.next((null===(t=e)||void 0===t?void 0:t.ortc)||[])}this._p2pChannel.reportPublishEvent(!0,null);for(const t of e)t instanceof KB&&t._encoderConfig&&this._gateway.setVideoProfile(t._encoderConfig),!t.muted&&t.enabled||await this._p2pChannel.muteLocalTrack(t)}}catch(r){if(this._p2pChannel.reportPublishEvent(!1,null==r?void 0:r.code,e),(null==r?void 0:r.code)===lw.WS_ABORT)return;throw r}}async _publishLowStream(){if(!this._joinInfo||void 0===this._uid)throw new pI(lw.INVALID_OPERATION,"Can't publish stream, haven't joined yet!");if("CONNECTED"!==this.connectionState&&"RECONNECTING"!==this.connectionState)throw new pI(lw.INVALID_OPERATION,"can not publish stream in ".concat(this.connectionState," state"));oI.debug("[".concat(this._clientId,"] publish low stream"));const e=this._configDistribute.getLowStreamConfigDistribute();e&&e.bitrate&&(this._lowStreamParameter||(this._lowStreamParameter={width:160,height:120,framerate:15,bitrate:50}),this._lowStreamParameter&&this._lowStreamParameter.bitrate&&e.bitrate<this._lowStreamParameter.bitrate&&(this._lowStreamParameter.bitrate=e.bitrate));try{const e=await this._p2pChannel.publishLowStream(this._lowStreamParameter),r=(await e.next()).value;if(r){var t;let o;try{o=await this._gateway.publish(this._uid,r,!0)}catch(n){if(n.code!==lw.DISCONNECT_P2P)throw e.throw(n),n}e.next((null===(t=o)||void 0===t?void 0:t.ortc)||[]),this._p2pChannel.reportPublishEvent(!0,null,void 0,!0)}}catch(r){if(this._p2pChannel.reportPublishEvent(!1,null==r?void 0:r.code,void 0,!0),(null==r?void 0:r.code)===lw.WS_ABORT)return;throw r}}_createLiveStreamingClient(e){const t=()=>{if(!this._joinInfo||!this._appId)return new pI(lw.INVALID_OPERATION,"can not create live streaming client, please join channel first").throw();const e=(t={joinInfo:this._joinInfo,appId:this._appId,websocketRetryConfig:this._config.websocketRetryConfig,httpRetryConfig:this._config.httpRetryConfig},p$("LiveStreaming").create(t));var t;return e.onLiveStreamError=(e,t)=>{AI.reportApiInvoke(this._sessionId,{name:Rw.ON_LIVE_STREAM_ERROR,options:[e,t],tag:Ow.TRACER}).onSuccess(),this.safeEmit(Uw.LIVE_STREAMING_ERROR,e,t)},e.onLiveStreamWarning=(e,t)=>{AI.reportApiInvoke(this._sessionId,{name:Rw.ON_LIVE_STREAM_WARNING,options:[e,t],tag:Ow.TRACER}).onSuccess(),this.safeEmit(Uw.LIVE_STREAMING_WARNING,e,t)},e.on(NR.REQUEST_WORKER_MANAGER_LIST,((e,t,n)=>{if(!this._joinInfo)return n(new pI(lw.INVALID_OPERATION,"can not find join info to get worker manager"));(async function(e,t,n,r){const o=xT("UAP_AP").slice(0,xT("AJAX_REQUEST_CONCURRENT")).map((e=>t.proxyServer?"https://".concat(t.proxyServer,"/ap/?url=").concat(e+"/api/v1?action=uap"):"https://".concat(e,"/api/v1?action=uap")));return await CM(o,e,t,n,r)})(e,this._joinInfo,this._axiosCancelSource.token,vT).then(t).catch(n)})),e};return e===SR.RAW?(this._liveRawStreamingClient=this._liveRawStreamingClient||t(),this._liveRawStreamingClient):(this._liveTranscodeStreamingClient=this._liveTranscodeStreamingClient||t(),this._liveTranscodeStreamingClient)}_createChannelMediaRelayClient(){if(!this._joinInfo)return new pI(lw.INVALID_OPERATION,"can not create channel media relay client, please join channel first").throw();if(!this._channelMediaRelayClient){const{sendResolutionWidth:t,sendResolutionHeight:n}=this.getLocalVideoStats(),r=(e={joinInfo:this._joinInfo,clientId:this._clientId,websocketRetryConfig:this._config.websocketRetryConfig,httpRetryConfig:this._config.httpRetryConfig,resolution:{width:t,height:n}},p$("ChannelMediaRelay").create(e));r.on("state",(e=>{e===BR.RELAY_STATE_FAILURE&&r&&r.dispose(),this.safeEmit(Uw.CHANNEL_MEDIA_RELAY_STATE,e)})),r.on("event",(e=>{this.safeEmit(Uw.CHANNEL_MEDIA_RELAY_EVENT,e)})),this._channelMediaRelayClient=r,this._statsCollector.onStatsChanged=(e,t)=>{var n;"resolution"===e&&(null===(n=this._channelMediaRelayClient)||void 0===n||n.setVideoProfile(t))}}var e;return this._channelMediaRelayClient}_handleUpdateDataChannel(e,t){const{added:n,deleted:r}=e,o=[];if(t){const e=[];this._users.forEach((t=>{t._dataChannels.forEach((r=>{n.every((e=>e.uid!==t._uintid||e.stream_id!==r.id))&&e.push({uid:t._uintid,stream_id:r.id,ordered:r.ordered,max_retrans_times:r.maxRetransmits,metadata:r.metadata})}))})),e.length>0&&this._handleUpdateDataChannel({added:[],deleted:e})}Array.isArray(n)&&n.length>0&&n.forEach((e=>{const{uid:n,stream_id:r,ordered:i,max_retrans_times:a,metadata:s}=e,c=this._users.find((e=>e._uintid===n));if(c){if(oI.debug("[".concat(this._clientId,"] data_channel added with uid ").concat(n)),Or(o).call(o,c)||o.push(c),c._uintid||(c._uintid=n),-1===c._dataChannels.findIndex((t=>t.id===e.stream_id))){const e={id:r,ordered:!!i,maxRetransmits:a,metadata:s},n=h$(e,!0);c._dataChannels.push(n),oI.info("[".concat(this._clientId,"] remote user ").concat(c.uid," published datachannel")),t||this.safeEmit(Uw.USER_PUBLISHED,c,"datachannel",e)}this._p2pChannel.hasPendingRemoteDataChannel(c,e.stream_id)&&(oI.debug("[".concat(this._clientId,"] resubscribe datachannel for user ").concat(c.uid," after reconnect.")),this._subscribeDataChannel(c,e.stream_id).catch((e=>{oI.error("[".concat(this._clientId,"] resubscribe datachannel error"),e.toString())})))}else oI.error("[".concat(this._clientId,"] can not find target user!(on_add_data_channel)"))})),t&&(this.safeEmit(Uw.PUBLISHED_USER_LIST,this._pendingPublishedUsers),this._pendingPublishedUsers=[]),Array.isArray(r)&&r.length>0&&r.forEach((e=>{const{uid:t,stream_id:n}=e,r=this._users.find((e=>e._uintid===t));if(!r)return void oI.error("[".concat(this._clientId,"] can not find target user!(on_delete_data_channel)"));const o=r._dataChannels.find((t=>t.id===e.stream_id));o&&(oI.debug("[".concat(this._clientId,"] data_stream delete with uid ").concat(t)),this._p2pChannel.unsubscribeDataChannel(r,[o]).then((e=>{if(r._dataChannels=r._dataChannels.filter((e=>e!==o)),e)return this._gateway.unsubscribeDataChannel(e,r.uid)})),oI.info("[".concat(this._clientId,"] remote user ").concat(t," unpublished datachannel ,id:").concat(o.id)),this.safeEmit(Uw.USER_UNPUBLISHED,r,"datachannel",o._config))}))}_handleRemoveDataChannels(e){const t=this._users.find((t=>t.uid===e.uid));if(t){if(void 0!==t._dataChannels&&t._dataChannels.length>0){oI.debug("[".concat(this._clientId,"] datachannel removed with uid ").concat(e.uid));const n=()=>{oI.info("[".concat(this._clientId,"] remote user ").concat(t.uid," unpublished datachannel")),t._dataChannels.forEach((e=>{this.safeEmit(Uw.USER_UNPUBLISHED,t,"datachannel",e._config)}))};this._p2pChannel.unsubscribeDataChannel(t,t._dataChannels).then((e=>{if(e)return this._gateway.unsubscribeDataChannel(e,t.uid)})),n()}}else oI.warning("[".concat(this._clientId,"] can not find target user!(on_remove_datachannel)"))}_handleGatewayEvents(){this._gateway.on(xR.DISCONNECT_P2P,(async()=>{await this._p2pChannel.disconnectForReconnect()})),this._gateway.on(xR.CONNECTION_STATE_CHANGE,((e,t,n)=>{var r;if(n===Pw.FALLBACK)return;const o=()=>{this.safeEmit(Uw.CONNECTION_STATE_CHANGE,e,t,n)};if(AI.reportApiInvoke(this._sessionId||(null===(r=this._gateway.joinInfo)||void 0===r?void 0:r.sid)||null,{name:Rw.CONNECTION_STATE_CHANGE,options:[e,t,n],tag:Ow.TRACER}).onSuccess(JSON.stringify({cur:e,prev:t,reason:n})),oI.info("[".concat(this._clientId,"] signal connection state change: ").concat(t," -> ").concat(e)),"DISCONNECTED"===e)return this._reset(),void o();if("RECONNECTING"===e)this._users.forEach((e=>{e._trust_in_room_=!1,e._trust_audio_enabled_state_=!1,e._trust_video_enabled_state_=!1,e._trust_audio_mute_state_=!1,e._trust_video_mute_state_=!1,e._trust_audio_stream_added_state_=!1,e._trust_video_stream_added_state_=!1,e._is_pre_created||(e._audio_pre_subscribed||(e._audioSSRC=void 0,e._audioOrtc=void 0),e._video_pre_subscribed||(e._videoSSRC=void 0,e._videoOrtc=void 0,e._rtxSsrcId=void 0),e._cname=void 0)})),this._userOfflineTimeout&&window.clearTimeout(this._userOfflineTimeout),this._streamRemovedTimeout&&window.clearTimeout(this._streamRemovedTimeout),this._userOfflineTimeout=void 0,this._streamRemovedTimeout=void 0;else if("CONNECTED"===e){var i;this._streamFallbackTypeCacheMap.forEach(((e,t)=>{this._gateway.setStreamFallbackOption(t,e).catch((e=>{oI.warning("[".concat(this._clientId,"] auto set stream fallback option failed"),e)}))})),this._remoteStreamTypeCacheMap.forEach(((e,t)=>{this._gateway.setRemoteVideoStreamType(t,e).catch((e=>{oI.warning("[".concat(this._clientId,"] auto set remote stream type failed"),e)}))})),void 0!==this._remoteDefaultVideoStreamType&&void 0===(null===(i=this._joinInfo)||void 0===i?void 0:i.defaultVideoStream)&&this.setRemoteDefaultVideoStreamType(this._remoteDefaultVideoStreamType).then((()=>{oI.debug("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway connected"))})).catch((e=>{oI.error("[".concat(this._clientId,"] setRemoteDefaultVideoStreamType after gateway failed, ").concat(e))})),this.store.useP2P||(this._p2pChannel.republish(),this._userOfflineTimeout=window.setTimeout((()=>{"CONNECTED"===this.connectionState&&(this._userOfflineTimeout=void 0,this._users.filter((e=>!e._trust_in_room_)).forEach((e=>{oI.debug("[".concat(this._clientId,"] user offline timeout, emit user offline ").concat(e.uid)),this._handleUserOffline({uid:e.uid})})))}),3e3),this._streamRemovedTimeout=window.setTimeout((()=>{"CONNECTED"===this.connectionState&&(this._streamRemovedTimeout=void 0,this._users.forEach((e=>{e._trust_audio_mute_state_||(oI.debug("[".concat(this._clientId,"] auto dispatch audio unmute event ").concat(e.uid)),this._handleMuteStream(e.uid,qR.AUDIO,!1)),e._trust_video_mute_state_||(oI.debug("[".concat(this._clientId,"] auto dispatch video unmute event ").concat(e.uid)),this._handleMuteStream(e.uid,qR.VIDEO,!1)),e._trust_audio_enabled_state_||(oI.debug("[".concat(this._clientId,"] auto dispatch enable local audio ").concat(e.uid)),this._handleSetStreamLocalEnable("audio",e.uid,!0)),e._trust_video_enabled_state_||(oI.debug("[".concat(this._clientId,"] auto dispatch enable local video ").concat(e.uid)),this._handleSetStreamLocalEnable("video",e.uid,!0)),e._trust_video_stream_added_state_||(oI.debug("[".concat(this._clientId,"] auto dispatch reset video stream added ").concat(e.uid)),this._handleResetAddStream(e,"video")),e._trust_audio_stream_added_state_||(oI.debug("[".concat(this._clientId,"] auto dispatch reset audio stream added ").concat(e.uid)),this._handleResetAddStream(e,"audio")),e._video_added_||e._audio_added_||(oI.debug("[".concat(this._clientId,"] auto dispatch stream remove ").concat(e.uid)),this._handleRemoveStream({uid:e.uid,uint_id:e._uintid}))})))}),1e3))}o()})),this._gateway.on(xR.REQUEST_NEW_GATEWAY_LIST,(async(e,t)=>{if(!this._joinInfo)return t(new pI(lw.UNEXPECTED_ERROR,"can not recover, no join info"));try{let t;const n=await F$(pH(pH({},this._joinInfo),{},{uid:this._joinInfo.uid,stringUid:void 0}));n?(t=n.ap,j$(n),this._joinInfo.preload=!0):(t=await UM(this._joinInfo,this._axiosCancelSource.token,this._config.httpRetryConfig||vT,this.store),this._joinInfo.preload=!1),this._joinInfo&&(this._joinInfo.apResponse=t.gatewayInfo.res,this._joinInfo.gatewayAddrs=t.gatewayInfo.gatewayAddrs,this._joinInfo.uni_lbs_ip=t.gatewayInfo.uni_lbs_ip);const r=[];t.gatewayInfo.gatewayAddrs.forEach((e=>{let{address:t}=e;const[n,o]=t.split(":");this._joinInfo&&this._joinInfo.proxyServer?r.push({proxy:this._joinInfo.proxyServer,host:n,port:o}):r.push({host:n,port:o})})),e(r)}catch(n){t(n)}})),this._gateway.on(xR.NETWORK_QUALITY,(e=>{"normal"===this._networkQualitySensitivity&&this.safeEmit(Uw.NETWORK_QUALITY,e)})),this._gateway.on(xR.STREAM_TYPE_CHANGE,((e,t)=>{this.safeEmit(Uw.STREAM_TYPE_CHANGED,e,t),AI.reportApiInvoke(this._sessionId,{name:Rw.STREAM_TYPE_CHANGE,options:[e,t],tag:Ow.TRACER}).onSuccess(JSON.stringify({uid:e,streamType:t}))})),this._gateway.on(xR.IS_P2P_DISCONNECTED,(e=>{this._p2pChannel.isP2PDisconnected()?e(!0):this._p2pChannel.hasLocalMedia()||this._p2pChannel.hasRemoteMedia()?e(!1):e(!0)})),this._gateway.on(xR.REQUEST_P2P_CONNECTION_PARAMS,(async(e,t,n)=>{try{let n=await this._p2pChannel.getEstablishParams();xT("ENABLE_PREALLOC_PC")&&n||(n=await this._p2pChannel.startP2PConnection(e)),t(n)}catch(r){n(r)}})),this._gateway.on(xR.JOIN_RESPONSE,((e,t)=>{if(this.store.useP2P)return;let n;e.attributes?n=e.attributes.userAttributes.preSubSsrcs:oI.debug("no attributes in joinResponse");const r=UU(e.ortc,t,n);this._p2pChannel.connect(r)})),this._gateway.on(xR.PRE_CONNECT_PC,(async e=>{const{candidates:t,fingerprint:n}=e;if(this._joinInfo&&t.length>0&&!this._p2pChannel.isPlanB){var r;await this._p2pChannel.startP2PConnection({turnServer:this._joinInfo.turnServer});const{cert:e,cid:o}=this._joinInfo.apResponse;await this._p2pChannel.connect({iceParameters:{iceUfrag:"".concat(o,"_").concat(e),icePwd:"".concat(o,"_").concat(e)},dtlsParameters:{fingerprints:[{hashFunction:"sha-256",fingerprint:null!==(r=xT("FINGERPRINT"))&&void 0!==r?r:n}]},candidates:t,rtpCapabilities:{send:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]},recv:{audioCodecs:[],videoCodecs:[],audioExtensions:[],videoExtensions:[]}},setup:"active",cname:"o/i14u9pJrxRKAsu",preallocation:!0})}}))}_handleGatewaySignalEvents(){this._gateway.signal.on(ER.ON_USER_ONLINE,this._handleUserOnline),this._gateway.signal.on(ER.ON_USER_OFFLINE,this._handleUserOffline),this._gateway.signal.on(ER.ON_ADD_AUDIO_STREAM,(e=>this._handleAddAudioOrVideoStream("audio",e.uid,e.ssrcId,e.cname,e.uint_id,e.ortc))),this._gateway.signal.on(ER.ON_ADD_VIDEO_STREAM,(e=>this._handleAddAudioOrVideoStream("video",e.uid,e.ssrcId,e.cname,e.uint_id,e.ortc,e.rtxSsrcId))),this._gateway.signal.on(ER.ON_REMOTE_DATASTREAM_UPDATE,(e=>{this._handleUpdateDataChannel(e)})),this._gateway.signal.on(ER.ON_REMOTE_FULL_DATASTREAM_INFO,(e=>{this._handleUpdateDataChannel({added:e.datastreams||[],deleted:[]},!0)})),this._gateway.signal.on(ER.ON_REMOVE_STREAM,this._handleRemoveStream),this._gateway.signal.on(ER.ON_P2P_LOST,this._handleP2PLost),this._gateway.signal.on(ER.MUTE_AUDIO,(e=>this._handleMuteStream(e.uid,qR.AUDIO,!0))),this._gateway.signal.on(ER.UNMUTE_AUDIO,(e=>this._handleMuteStream(e.uid,qR.AUDIO,!1))),this._gateway.signal.on(ER.MUTE_VIDEO,(e=>this._handleMuteStream(e.uid,qR.VIDEO,!0))),this._gateway.signal.on(ER.UNMUTE_VIDEO,(e=>this._handleMuteStream(e.uid,qR.VIDEO,!1))),this._gateway.signal.on(ER.RECEIVE_METADATA,(e=>{const t=Xw(e.metadata);this.safeEmit(Uw.RECEIVE_METADATA,e.uid,t)})),this._gateway.signal.on(ER.ON_DATA_STREAM,(async e=>{var t;if(!e)return;let n=Xw(e.payload);if(this._encryptDataStream&&this._encryptDataStreamIv&&this._encryptDataStreamKey&&window.crypto.subtle&&Or(t=["aes-128-gcm2","aes-256-gcm2"]).call(t,this._encryptionMode)){if(e.payload.length<KT)throw new pI(lw.UNEXPECTED_RESPONSE,"payload length ".concat(e.payload.length," is less than header length ").concat(KT));n=await async function(e,t,n){const r=n.subarray(0,KT),o=r.slice(8,KT),i=(o[0]<<8)+o[1],a=(r[6]<<8)+r[7],s=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:e,tagLength:jT,additionalData:new Uint8Array(pT(i,2))},t,n.subarray(KT));return new Uint8Array(s).subarray(0,a)}(this._encryptDataStreamIv,this._encryptDataStreamKey,n)}let r=0;if(e.ordered||e.syncWithAudio){const t=this._p2pChannel.getStats(),n=this.remoteUsers.find((t=>t.uid===e.uid)),o=null==t?void 0:t.audioRecv.find((e=>e.ssrc===(null==n?void 0:n._audioSSRC)));r=null==o?void 0:o.jitterBufferMs}null==r&&(r=0),C$(pH(pH({},e),{},{payload:n}),r,{id:this._clientId,onStreamMessage:"function"==typeof this.onStreamMessage?this.onStreamMessage.bind(this):void 0,safeEmit:this.safeEmit.bind(this)})})),this._gateway.signal.on(ER.ON_CRYPT_ERROR,(()=>{Jw((()=>{oI.warning("[".concat(this._clientId,"] on crypt error")),this.safeEmit(Uw.CRYPT_ERROR)}),this._sessionId)})),this._gateway.signal.on(ER.ON_TOKEN_PRIVILEGE_WILL_EXPIRE,this._handleTokenWillExpire),this._gateway.signal.on(ER.ON_TOKEN_PRIVILEGE_DID_EXPIRE,(()=>{oI.warning("[".concat(this._clientId,"] received message onTokenPrivilegeDidExpire, please get new token and join again")),this._gateway.leave(!0,Pw.TOKEN_EXPIRE),this.safeEmit(Uw.ON_TOKEN_PRIVILEGE_DID_EXPIRE),this._reset()})),this._gateway.signal.on(ER.ON_STREAM_FALLBACK_UPDATE,(e=>{oI.debug("[".concat(this._clientId,"] stream fallback peerId: ").concat(e.stream_id,", attr: ").concat(e.stream_type)),this.safeEmit(Uw.STREAM_FALLBACK,e.stream_id,1===e.stream_type?"fallback":"recover")})),this._gateway.signal.on(ER.ON_PUBLISH_STREAM,(e=>{this.uid===this._uid&&(this._p2pChannel.reportPublishEvent(!0,null,void 0,!1,JSON.stringify({proxy:e.proxy})),oI.info("[".concat(this._clientId,"] on publish stream, ").concat(JSON.stringify(e))))})),this._gateway.signal.on(ER.ENABLE_LOCAL_VIDEO,(e=>{this._handleSetStreamLocalEnable("video",e.uid,!0)})),this._gateway.signal.on(ER.DISABLE_LOCAL_VIDEO,(e=>{this._handleSetStreamLocalEnable("video",e.uid,!1)})),this._gateway.signal.on(gR.REQUEST_TIMEOUT,((e,t)=>{if(this._joinInfo)switch(e){case mR.PUBLISH:{if(!t)return;const e=t.ortc;if(e){var n,r;const o=e.some((e=>{let{stream_type:t}=e;return t===MR.Audio})),i=e.some((e=>{let{stream_type:t}=e;return t!==MR.Audio})),a=e.some((e=>{let{stream_type:t}=e;return t===MR.Screen||t===MR.ScreenLow}));"offer"===t.state&&AI.publish(this._joinInfo.sid,{eventElapse:YM.measureFromPublishStart(this.store.clientId,this.store.pubId),succ:!1,ec:lw.TIMEOUT,audio:o,video:i,p2pid:t.p2p_id,publishRequestid:this.store.pubId,screenshare:a,audioName:o?null===(n=e.find((e=>{let{stream_type:t}=e;return t===MR.Audio})))||void 0===n||null===(n=n.ssrcs[0])||void 0===n?void 0:n.ssrcId.toString():void 0,videoName:i?null===(r=e.find((e=>{let{stream_type:t}=e;return t!==MR.Audio})))||void 0===r||null===(r=r.ssrcs[0])||void 0===r?void 0:r.ssrcId.toString():void 0})}break}case mR.SUBSCRIBE:t&&AI.subscribe(this._joinInfo.sid,{succ:!1,ec:lw.TIMEOUT,audio:t.stream_type===qR.AUDIO,video:t.stream_type===qR.VIDEO,peerid:t.stream_id,subscribeRequestid:t.ssrcId,p2pid:this.store.p2pId,eventElapse:YM.measureFromSubscribeStart(this.store.clientId,t.ssrcId),preSsrc:this._p2pChannel.isPreSubScribe(t.ssrcId)})}})),this._gateway.signal.on(ER.ON_P2P_OK,(e=>{this.uid,this._uid})),this._gateway.signal.on(ER.ON_PUBLISHED_USER_LIST,(e=>{if(null==e||!e.users)return;xT("BLOCK_LOCAL_CLIENT")&&(e.users=e.users.filter((e=>!mI(e.string_id||e.stream_id,this.channelName))));const t=[],n=[];for(const r of e.users){let e=this._users.find((e=>e._uintid===r.stream_id));e?e._trust_in_room_=!0:(e=new tF(r.string_id||r.stream_id,r.stream_id),this._users.push(e),0===this.getListeners(Uw.PUBLISHED_USER_LIST).length&&(oI.debug("[".concat(this._clientId,"] user online"),r.stream_id),this.safeEmit(Uw.USER_JOINED,e)));const o=$R.Audio&r.stream_type,i=($R.Video|$R.LwoVideo)&r.stream_type,a=!!(65280&r.stream_type),s=o&&e.hasAudio,c=i&&e.hasVideo;i&&(e._trust_video_stream_added_state_=!0,e._video_added_=!0,e._videoSSRC=r.video_ssrc,e._rtxSsrcId=r.video_rtx),o&&(e._trust_audio_stream_added_state_=!0,e._audio_added_=!0,e._audioSSRC=r.audio_ssrc),o&&!s&&0===this.getListeners(Uw.PUBLISHED_USER_LIST).length&&(oI.info("[".concat(this._clientId,"] remote user ").concat(e.uid," published audio")),this.safeEmit(Uw.USER_PUBLISHED,e,"audio")),i&&!c&&0===this.getListeners(Uw.PUBLISHED_USER_LIST).length&&(oI.info("[".concat(this._clientId,"] remote user ").concat(e.uid," published video")),this.safeEmit(Uw.USER_PUBLISHED,e,"video")),(o&&!s||i&&!c||a)&&t.push(e),i&&this._p2pChannel.hasPendingRemoteMedia(e,"video")&&n.push({user:e,mediaType:"video"}),o&&this._p2pChannel.hasPendingRemoteMedia(e,"audio")&&n.push({user:e,mediaType:"audio"})}n.length>0&&(oI.debug("[".concat(this._clientId,"] RE massSubscribe after reconnect ").concat(n.map((e=>"user: ".concat(e.user.uid,", mediaType: ").concat(e.mediaType))).join("; ")," ")),this.massSubscribe(n).catch((e=>{oI.error("[".concat(this._clientId,"] mass resubscribe error"),e.toString())}))),this.getListeners(Uw.PUBLISHED_USER_LIST).length>0?xT("ENABLE_DATASTREAM_2")?this._pendingPublishedUsers=t:(oI.info("[".concat(this._clientId,"] client emit user-list event, users: ").concat(t.map((e=>e.uid)).join(", "))),this.safeEmit(Uw.PUBLISHED_USER_LIST,t)):oI.info("[".concat(this._clientId,"] client not emit user-list event case there is no user-list listener, users: ").concat(t.map((e=>e.uid)).join(", ")))})),this._gateway.signal.on(ER.ON_RTP_CAPABILITY_CHANGE,(e=>{const{video_codec:t}=e;this._p2pChannel instanceof l$&&this._p2pChannel.updateRemoteRTPCapabilities(t.map((e=>e.toLowerCase())).filter((e=>{var t;return Or(t=Object.keys(HT)).call(t,e)})))}))}_handleP2PEvents(){this._gateway.signal.on(ER.ON_USER_OFFLINE,(()=>{this._p2pChannel.disconnectForReconnect()})),this._gateway.signal.on(cO.PUBLISH,((e,t,n)=>{const{uid:r}=e;e.forEach((e=>{const{kind:o,ssrcs:i,mid:a,isMuted:s}=e;this._handleP2PAddAudioOrVideoStream(o,r,i[0].ssrcId,a);const c=this._users.find((e=>e.uid===r));return c&&this._p2pChannel instanceof vF?this._p2pChannel.mockSubscribe(c,o,i[0].ssrcId,a).then((()=>{t()})).catch(n):t(),this._handleMuteStream(r,o,!!s)}))})),this._gateway.signal.on(cO.CALL,(async(e,t,n)=>{if(this._p2pChannel instanceof vF)try{var r;t(await this._p2pChannel.startP2P({turnServer:null===(r=this._joinInfo)||void 0===r?void 0:r.turnServer},e))}catch(o){n(o)}})),this._gateway.signal.on(gR.P2P_CONNECTION,(async e=>{this._p2pChannel instanceof vF&&await this._p2pChannel.p2pConnect(e)})),this._gateway.signal.on(cO.UNPUBLISH,(async(e,t,n)=>{if(this._p2pChannel instanceof vF){const{unpubMsg:o,uid:i}=e,a=this._users.find((e=>e.uid===i));if(!a)return oI.warning("[".concat(this._clientId,"] can not find remote user, ignore mute event, uid: ").concat(i)),void t();try{o.forEach((async e=>{let{stream_type:t}=e;const n=t===MR.Audio?qR.AUDIO:qR.VIDEO;await this._p2pChannel.unsubscribe(a,n),this._handleMuteStream(i,n,!0)})),t()}catch(r){n(r)}}})),this._gateway.signal.on(cO.CONTROL,(async(e,t)=>{const{action:n}=e;switch(n){case uO.MUTE_LOCAL_VIDEO:this._handleMuteStream(t,qR.VIDEO,!0);break;case uO.MUTE_LOCAL_AUDIO:this._handleMuteStream(t,qR.AUDIO,!0);break;case uO.UNMUTE_LOCAL_VIDEO:this._handleP2PAddAudioOrVideoStream("video",t),this._handleMuteStream(t,qR.VIDEO,!1);break;case uO.UNMUTE_LOCAL_AUDIO:this._handleP2PAddAudioOrVideoStream("audio",t),this._handleMuteStream(t,qR.AUDIO,!1)}})),this._gateway.signal.on(cO.RESTART_ICE,(async(e,t,n)=>{if(this._p2pChannel instanceof vF)try{const{direction:n,iceParameter:r}=e;n!==vR.SEND_ONLY||r?t(await this._p2pChannel.restartICE(n,r)):(this._p2pChannel.handleDisconnect(n),t())}catch(r){n(r)}})),this._gateway.signal.on(cO.CANDIDATE,(e=>{if(this._p2pChannel instanceof vF){const{candidate:t,direction:n}=e;this._p2pChannel.addRemoteCandidate(t,n)}})),this._p2pChannel.on(ZR.RequestP2PRestartICE,(async(e,t,n)=>{try{const{direction:n}=e;t(await this._gateway.sendExtensionMessage(cO.RESTART_ICE,e,n===vR.SEND_ONLY))}catch(r){n(r)}})),this._p2pChannel.on(ZR.LocalCandidate,(e=>{this._gateway.sendExtensionMessage(cO.CANDIDATE,JSON.stringify(e),!0)})),this._p2pChannel.on(ZR.RequestP2PMuteLocal,(async(e,t,n)=>{try{await this._gateway.sendExtensionMessage(cO.CONTROL,e,!0),t()}catch(r){n(r)}})),this._p2pChannel.on(ZR.RequestP2PUnmuteRemote,(async(e,t,n)=>{if(this._joinInfo)try{await this._gateway.unmuteRemote(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(r){r.code===lw.DISCONNECT_P2P?t():n(r)}else t()})),this._p2pChannel.on(ZR.RequestP2PMuteRemote,(async(e,t,n)=>{if(this._joinInfo)try{await this._gateway.muteRemote(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(r){r.code===lw.DISCONNECT_P2P?t():n(r)}else t()})),this._p2pChannel.on(ZR.StateChange,((e,t)=>{t===XR.Connected&&this._p2pChannel.republish()}))}_handleP2PChannelEvents(){this._p2pChannel.on(ZR.RequestMuteLocal,(async(e,t,n)=>{if(this._joinInfo)try{await this._gateway.muteLocal(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(r){r.code===lw.DISCONNECT_P2P?t():n(r)}else t()})),this._p2pChannel.on(ZR.RequestUnmuteLocal,(async(e,t,n)=>{if(this._joinInfo)try{await this._gateway.unmuteLocal(e,this._joinInfo.stringUid||this._joinInfo.uid),t()}catch(r){r.code===lw.DISCONNECT_P2P?t():n(r)}else t()})),this._p2pChannel.on(ZR.RequestRePublish,((e,t,n)=>{this.publish(e,!1).then(t).catch(n)})),this._p2pChannel.on(ZR.RequestRePublishDataChannel,((e,t,n)=>{MA.all(e.map((async e=>{const t=await this._p2pChannel.publishDataChannel([e]);try{t.forEach((e=>{this._uid&&this._gateway.publishDataChannel(this._uid,e,!0)}))}catch(n){if(n.code!==lw.DISCONNECT_P2P)throw n}}))).then(t).catch(n)})),this._p2pChannel.on(ZR.RequestReSubscribe,(async(e,t,n)=>{try{for(const{user:t,kind:n}of e)n===qR.VIDEO?await this.subscribe(t,"video"):await this.subscribe(t,"audio");t()}catch(r){n(r)}})),this._p2pChannel.on(ZR.RequestUpload,((e,t)=>{this._gateway.upload(e,t)})),this._p2pChannel.on(ZR.RequestUploadStats,(e=>{this._gateway.uploadWRTCStats(e)})),this._p2pChannel.on(ZR.MediaReconnectStart,(e=>{this.safeEmit(Uw.MEDIA_RECONNECT_START,e)})),this._p2pChannel.on(ZR.MediaReconnectEnd,(e=>{this.safeEmit(Uw.MEDIA_RECONNECT_END,e)})),this._p2pChannel.on(ZR.NeedSignalRTT,(e=>{e(this._gateway.getSignalRTT())})),this._p2pChannel.on(ZR.RequestRestartICE,(async e=>{if(this._p2pChannel instanceof vF)return;const t=await this._p2pChannel.restartICE(e),n=await t.next();if(n.done)return;const r=n.value;let o;try{o=await this._gateway.restartICE({iceParameters:r})}catch(a){return void t.throw(a)}const{iceParameters:i}=function(e){const t=e.iceParameters;return{iceParameters:{iceUfrag:t.iceUfrag,icePwd:t.icePwd}}}(o);await t.next({remoteIceParameters:i})})),this._p2pChannel.on(ZR.RequestReconnect,(async()=>{this._gateway.reconnect()})),this._p2pChannel.on(ZR.RequestReconnectPC,(async()=>{var e;const{iceParameters:t,dtlsParameters:n,rtpCapabilities:r}=await this._p2pChannel.startP2PConnection({turnServer:null===(e=this._joinInfo)||void 0===e?void 0:e.turnServer}),{gatewayEstablishParams:o,gatewayAddress:i}=await this._gateway.reconnectPC({iceParameters:t,dtlsParameters:n,rtpCapabilities:r}),a=UU(o,i);await this._p2pChannel.connect(a),await this._p2pChannel.republish(),await this._p2pChannel.reSubscribe()})),this._p2pChannel.on(ZR.RequestUnpublishForReconnectPC,(async(e,t,n)=>{this._joinInfo&&void 0!==this._uid?(await this._gateway.unpublish(e,this._uid),t()):n()})),this._p2pChannel.on(ZR.P2PLost,(()=>{this.safeEmit(Uw.P2P_LOST,this.store.uid)})),this._p2pChannel.on(ZR.UpdateVideoEncoder,(e=>{e._encoderConfig&&this._gateway.setVideoProfile(e._encoderConfig)})),this._p2pChannel.on(ZR.ConnectionTypeChange,(e=>{this.safeEmit(Uw.IS_USING_CLOUD_PROXY,e)})),this._p2pChannel.on(ZR.RequestLowStreamParameter,(e=>{e(this._lowStreamParameter||{width:160,height:120,framerate:15,bitrate:50})})),this._p2pChannel.on(ZR.QueryClientConnectionState,(e=>{e(this.connectionState)}))}getKeyMetrics(){return this.store.keyMetrics}async enableContentInspect(e){if(!this._joinInfo||"CONNECTED"!==this.connectionState)throw new pI(lw.INVALID_OPERATION,"[".concat(this._clientId,"] can not create content inspect, please join channel first"));if(this._inspect)throw new pI(lw.INVALID_OPERATION,"[".concat(this._clientId,"] Inspect content service already in connecting/connected state"));try{const n=(t={config:e},p$("ContentInspect").create(t));this._inspect=n,this.handleVideoInspectEvents(n);const{appId:r,cname:o,sid:i,token:a,uid:s,cid:c,vid:l}=this._joinInfo;await n.init({appId:r,areaCode:"",cname:o,sid:i,token:a,uid:s,cid:c,vid:l?Number(l):0},vT)}catch(n){throw Array.isArray(n)?n[0]:n}var t}handleVideoInspectEvents(e){e.on(nO.CONNECTION_STATE_CHANGE,((t,n)=>{if(this.safeEmit(Uw.CONTENT_INSPECT_CONNECTION_STATE_CHANGE,t,n),n===eO.CONNECTED){if("CONNECTED"!==this.connectionState)return void this.safeEmit(Uw.CONTENT_INSPECT_ERROR,new pI(lw.OPERATION_ABORTED,"Content inspect was cancelled because it left the channel"));e.inspectImage()}})),e.on(nO.INSPECT_RESULT,((e,t)=>{var n;if((null==t?void 0:t.code)===lw.INVALID_OPERATION&&"DISCONNECTED"===this.connectionState)return oI.debug("Stop inspect content because that has left channel"),null==this||null===(n=this._inspect)||void 0===n||n.close(),void(this._inspect=void 0);this.safeEmit(Uw.CONTENT_INSPECT_RESULT,e,t)})),e.on(nO.CLIENT_LOCAL_VIDEO_TRACK,(e=>{e(this.localTracks.filter((e=>"video"===e.trackMediaType))[0])}))}async disableContentInspect(){if(!this._inspect)throw new pI(lw.INVALID_OPERATION,"[".concat(this._clientId,"] inspectVideoContent not started"));try{this._inspect.close(),this._inspect=void 0}catch(mp){throw Array.isArray(mp)?mp[0]:mp}}async setImageModeration(e,t){if(dw(e,"enabled"),e){if(!t)throw new pI(lw.INVALID_PARAMS,"config is required");if(CV(t),!this._joinInfo)throw new pI(lw.INVALID_OPERATION,"can not create image moderation, please join channel first");try{if(this._moderation)this._moderation.updateConfig(t);else{const e=(n={config:t},p$("ImageModeration").create(n));this._moderation=e,this.handleImageModerationEvents(e);const{appId:r,cname:o,sid:i,token:a,uid:s,cid:c,vid:l}=this._joinInfo;await e.init({appId:r,areaCode:"",cname:o,sid:i,token:a,uid:s,cid:c,vid:l?Number(l):0},vT)}}catch(r){throw Array.isArray(r)?r[0]:r}}else{var n;if(!this._moderation)throw new pI(lw.INVALID_OPERATION,"[".concat(this._clientId,"] image moderation not started"));try{this._moderation.close(),this._moderation.removeAllListeners(),this._moderation=void 0}catch(r){throw Array.isArray(r)?r[0]:r}}}handleImageModerationEvents(e){e.on(aO.CONNECTION_STATE_CHANGE,((t,n)=>{if(this.safeEmit(Uw.IMAGE_MODERATION_CONNECTION_STATE_CHANGE,t,n),t===iO.CONNECTED){if("CONNECTED"!==this.connectionState)throw this.setImageModeration(!1),new pI(lw.OPERATION_ABORTED,"Image moderation was cancelled because it left the channel");e.inspectImage()}})),e.on(aO.CLIENT_LOCAL_VIDEO_TRACK,(e=>{e(this.localTracks.filter((e=>"video"===e.trackMediaType))[0])}))}setP2PTransport(e){if(Aw(e,"transport",["default","auto","relay","sd-rtn"]),"p2p"!==this.mode)throw new pI(lw.INVALID_OPERATION,"only p2p mode can set p2pTransport");this.store.p2pTransport=e,oI.info("[".concat(this._clientId,"] set client p2pTransport to ").concat(e))}getJoinChannelServiceRecords(){return oI.debug("getJoinChannelServiceRecords"),this.store.joinChannelServiceRecords}async setPublishAudioFilterEnabled(e){dw(e,"enabled"),MT("ENABLE_PUBLISH_AUDIO_FILTER",e),this._joinInfo&&await this._gateway.setPublishAudioFilterEnabled(e)}_handleResetAddStream(e,t){switch(t){case"audio":e._audio_added_=!1,e._trust_audio_stream_added_state_=!0;break;case"video":e._video_added_=!1,e._trust_video_stream_added_state_=!0}}},sR(dH.prototype,"leave",[wV],Object.getOwnPropertyDescriptor(dH.prototype,"leave"),dH.prototype),sR(dH.prototype,"publish",[TV],Object.getOwnPropertyDescriptor(dH.prototype,"publish"),dH.prototype),sR(dH.prototype,"unpublish",[IV],Object.getOwnPropertyDescriptor(dH.prototype,"unpublish"),dH.prototype),sR(dH.prototype,"subscribe",[RV],Object.getOwnPropertyDescriptor(dH.prototype,"subscribe"),dH.prototype),sR(dH.prototype,"presubscribe",[OV],Object.getOwnPropertyDescriptor(dH.prototype,"presubscribe"),dH.prototype),sR(dH.prototype,"massSubscribe",[NV],Object.getOwnPropertyDescriptor(dH.prototype,"massSubscribe"),dH.prototype),sR(dH.prototype,"unsubscribe",[kV],Object.getOwnPropertyDescriptor(dH.prototype,"unsubscribe"),dH.prototype),sR(dH.prototype,"massUnsubscribe",[PV],Object.getOwnPropertyDescriptor(dH.prototype,"massUnsubscribe"),dH.prototype),sR(dH.prototype,"setLowStreamParameter",[DV],Object.getOwnPropertyDescriptor(dH.prototype,"setLowStreamParameter"),dH.prototype),sR(dH.prototype,"enableDualStream",[LV],Object.getOwnPropertyDescriptor(dH.prototype,"enableDualStream"),dH.prototype),sR(dH.prototype,"disableDualStream",[BV],Object.getOwnPropertyDescriptor(dH.prototype,"disableDualStream"),dH.prototype),sR(dH.prototype,"setClientRole",[UV],Object.getOwnPropertyDescriptor(dH.prototype,"setClientRole"),dH.prototype),sR(dH.prototype,"setProxyServer",[MV],Object.getOwnPropertyDescriptor(dH.prototype,"setProxyServer"),dH.prototype),sR(dH.prototype,"setTurnServer",[xV],Object.getOwnPropertyDescriptor(dH.prototype,"setTurnServer"),dH.prototype),sR(dH.prototype,"setLicense",[FV],Object.getOwnPropertyDescriptor(dH.prototype,"setLicense"),dH.prototype),sR(dH.prototype,"startProxyServer",[$V],Object.getOwnPropertyDescriptor(dH.prototype,"startProxyServer"),dH.prototype),sR(dH.prototype,"stopProxyServer",[VV],Object.getOwnPropertyDescriptor(dH.prototype,"stopProxyServer"),dH.prototype),sR(dH.prototype,"setLocalAccessPointsV2",[HV],Object.getOwnPropertyDescriptor(dH.prototype,"setLocalAccessPointsV2"),dH.prototype),sR(dH.prototype,"setLocalAccessPoints",[jV],Object.getOwnPropertyDescriptor(dH.prototype,"setLocalAccessPoints"),dH.prototype),sR(dH.prototype,"setRemoteDefaultVideoStreamType",[QV],Object.getOwnPropertyDescriptor(dH.prototype,"setRemoteDefaultVideoStreamType"),dH.prototype),sR(dH.prototype,"setRemoteVideoStreamType",[GV],Object.getOwnPropertyDescriptor(dH.prototype,"setRemoteVideoStreamType"),dH.prototype),sR(dH.prototype,"setStreamFallbackOption",[KV],Object.getOwnPropertyDescriptor(dH.prototype,"setStreamFallbackOption"),dH.prototype),sR(dH.prototype,"setEncryptionConfig",[WV],Object.getOwnPropertyDescriptor(dH.prototype,"setEncryptionConfig"),dH.prototype),sR(dH.prototype,"renewToken",[qV],Object.getOwnPropertyDescriptor(dH.prototype,"renewToken"),dH.prototype),sR(dH.prototype,"enableAudioVolumeIndicator",[zV],Object.getOwnPropertyDescriptor(dH.prototype,"enableAudioVolumeIndicator"),dH.prototype),sR(dH.prototype,"startLiveStreaming",[YV],Object.getOwnPropertyDescriptor(dH.prototype,"startLiveStreaming"),dH.prototype),sR(dH.prototype,"setLiveTranscoding",[JV],Object.getOwnPropertyDescriptor(dH.prototype,"setLiveTranscoding"),dH.prototype),sR(dH.prototype,"stopLiveStreaming",[XV],Object.getOwnPropertyDescriptor(dH.prototype,"stopLiveStreaming"),dH.prototype),sR(dH.prototype,"startChannelMediaRelay",[ZV],Object.getOwnPropertyDescriptor(dH.prototype,"startChannelMediaRelay"),dH.prototype),sR(dH.prototype,"updateChannelMediaRelay",[eH],Object.getOwnPropertyDescriptor(dH.prototype,"updateChannelMediaRelay"),dH.prototype),sR(dH.prototype,"stopChannelMediaRelay",[tH],Object.getOwnPropertyDescriptor(dH.prototype,"stopChannelMediaRelay"),dH.prototype),sR(dH.prototype,"sendCustomReportMessage",[nH],Object.getOwnPropertyDescriptor(dH.prototype,"sendCustomReportMessage"),dH.prototype),sR(dH.prototype,"pickSVCLayer",[rH],Object.getOwnPropertyDescriptor(dH.prototype,"pickSVCLayer"),dH.prototype),sR(dH.prototype,"setRTMConfig",[oH],Object.getOwnPropertyDescriptor(dH.prototype,"setRTMConfig"),dH.prototype),sR(dH.prototype,"enableContentInspect",[iH],Object.getOwnPropertyDescriptor(dH.prototype,"enableContentInspect"),dH.prototype),sR(dH.prototype,"disableContentInspect",[aH],Object.getOwnPropertyDescriptor(dH.prototype,"disableContentInspect"),dH.prototype),sR(dH.prototype,"setImageModeration",[sH],Object.getOwnPropertyDescriptor(dH.prototype,"setImageModeration"),dH.prototype),sR(dH.prototype,"setP2PTransport",[cH],Object.getOwnPropertyDescriptor(dH.prototype,"setP2PTransport"),dH.prototype),sR(dH.prototype,"getJoinChannelServiceRecords",[lH],Object.getOwnPropertyDescriptor(dH.prototype,"getJoinChannelServiceRecords"),dH.prototype),sR(dH.prototype,"setPublishAudioFilterEnabled",[uH],Object.getOwnPropertyDescriptor(dH.prototype,"setPublishAudioFilterEnabled"),dH.prototype),dH);class fH{constructor(e,t){Ov(this,"id",0),Ov(this,"element",void 0),Ov(this,"peerPair",void 0),Ov(this,"context",void 0),Ov(this,"audioPlayerElement",void 0),Ov(this,"audioTrack",void 0),fH.count+=1,this.id=fH.count,this.element=e,this.context=t}initPeers(){this.peerPair=[new RTCPeerConnection,new RTCPeerConnection],this.peerPair[1].ontrack=e=>{const t=document.createElement("audio");t.srcObject=new MediaStream([e.track]),t.play(),this.audioPlayerElement=t}}async switchSdp(){if(!this.peerPair)return;const e=async(e,t)=>{const n="offer"===t?await e.createOffer():await e.createAnswer();return await e.setLocalDescription(n),"complete"===e.iceGatheringState?e.localDescription:new MA((t=>{e.onicegatheringstatechange=()=>{"complete"===e.iceGatheringState&&t(e.localDescription)}}))},t=async(e,t)=>await e.setRemoteDescription(t);try{const n=await e(this.peerPair[0],"offer");await t(this.peerPair[1],n);const r=await e(this.peerPair[1],"answer");await t(this.peerPair[0],r)}catch(n){throw new pI(lw.LOCAL_AEC_ERROR,n.toString()).print()}}async getTracksFromMediaElement(e){if(this.audioTrack)return this.audioTrack;let t;try{e instanceof HTMLVideoElement&&(e.captureStream?e.captureStream():e.mozCaptureStream()),t=this.context.createMediaStreamDestination(),this.context.createMediaElementSource(e).connect(t)}catch(r){throw new pI(lw.LOCAL_AEC_ERROR,r.toString()).print()}if(!t)throw new pI(lw.LOCAL_AEC_ERROR,"no dest node when local aec").print();const n=t.stream.getAudioTracks()[0];return this.audioTrack=n,n}getElement(){return this.element}async startEchoCancellation(){this.context.resume(),this.peerPair&&this.close(),this.initPeers();const e=this.element,t=await this.getTracksFromMediaElement(e);this.peerPair&&this.peerPair[0].addTrack(t),await this.switchSdp()}close(){oI.debug("close echo cancellation unit, id is",this.id),this.audioPlayerElement&&this.audioPlayerElement.pause(),this.peerPair&&this.peerPair.forEach((e=>{e.close()})),this.peerPair=void 0,this.audioPlayerElement=void 0}}var gH,mH;Ov(fH,"count",0);const _H=window.AudioContext||window.webkitAudioContext,EH=new(gH=dI({report:AI}),sR((mH=class{constructor(){Ov(this,"units",[]),Ov(this,"context",void 0)}processExternalMediaAEC(e){if(!this._doesEnvironmentNeedAEC())return oI.debug("the system does not need to process local aec"),-1;this.context||(this.context=new _H);let t=this.units.find((t=>t&&t.getElement()===e));return t||(t=new fH(e,this.context),this.units.push(t)),t.startEchoCancellation(),oI.debug("start processing local audio echo cancellation, id is",t.id),t.id}_doesEnvironmentNeedAEC(){return PS().name!==RS.SAFARI}}).prototype,"processExternalMediaAEC",[gH],Object.getOwnPropertyDescriptor(mH.prototype,"processExternalMediaAEC"),mH.prototype),mH);function vH(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yH(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vH(Object(n),!0).forEach((function(t){Ov(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vH(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const bH=window||document;function CH(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!bH)return;const n=$K._cspEventHandlerPointer;if(n&&t)return void console.error(n,t);const r=e=>{if(!(e&&e.blockedURI&&($K.onSecurityPolicyViolation||$K.getListeners(oO.SECURITY_POLICY_VIOLATION).length>0)))return;const t=e.blockedURI;xT("CSP_DETECTED_HOSTNAME_LIST").some((e=>Or(t).call(t,e)))&&($K.onSecurityPolicyViolation&&"function"==typeof $K.onSecurityPolicyViolation&&$K.onSecurityPolicyViolation(e),$K.getListeners(oO.SECURITY_POLICY_VIOLATION).length>0&&$K.safeEmit(oO.SECURITY_POLICY_VIOLATION,e))};n&&bH.removeEventListener("securitypolicyviolation",n),(t||e&&"function"==typeof e||$K.getListeners(oO.SECURITY_POLICY_VIOLATION).length>0)&&bH.addEventListener("securitypolicyviolation",r),$K._cspEventHandlerPointer=r}var SH=u,wH=db,TH=RegExp.prototype,IH=n((function(e){return e===TH||SH(TH,e)?wH(e):e.flags}));function RH(e){let t=e.length;for(;--t>=0;)e[t]=0}const OH=256,NH=286,kH=30,PH=15,DH=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),LH=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),BH=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),UH=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),MH=new Array(576);RH(MH);const xH=new Array(60);RH(xH);const FH=new Array(512);RH(FH);const $H=new Array(256);RH($H);const VH=new Array(29);RH(VH);const HH=new Array(kH);function jH(e,t,n,r,o){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=o,this.has_stree=e&&e.length}let QH,GH,KH;function WH(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}RH(HH);const qH=e=>e<256?FH[e]:FH[256+(e>>>7)],zH=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},YH=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,zH(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},JH=(e,t,n)=>{YH(e,n[2*t],n[2*t+1])},XH=(e,t)=>{let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},ZH=(e,t,n)=>{const r=new Array(16);let o,i,a=0;for(o=1;o<=PH;o++)a=a+n[o-1]<<1,r[o]=a;for(i=0;i<=t;i++){let t=e[2*i+1];0!==t&&(e[2*i]=XH(r[t]++,t))}},ej=e=>{let t;for(t=0;t<NH;t++)e.dyn_ltree[2*t]=0;for(t=0;t<kH;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},tj=e=>{e.bi_valid>8?zH(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},nj=(e,t,n,r)=>{const o=2*t,i=2*n;return e[o]<e[i]||e[o]===e[i]&&r[t]<=r[n]},rj=(e,t,n)=>{const r=e.heap[n];let o=n<<1;for(;o<=e.heap_len&&(o<e.heap_len&&nj(t,e.heap[o+1],e.heap[o],e.depth)&&o++,!nj(t,r,e.heap[o],e.depth));)e.heap[n]=e.heap[o],n=o,o<<=1;e.heap[n]=r},oj=(e,t,n)=>{let r,o,i,a,s=0;if(0!==e.sym_next)do{r=255&e.pending_buf[e.sym_buf+s++],r+=(255&e.pending_buf[e.sym_buf+s++])<<8,o=e.pending_buf[e.sym_buf+s++],0===r?JH(e,o,t):(i=$H[o],JH(e,i+OH+1,t),a=DH[i],0!==a&&(o-=VH[i],YH(e,o,a)),r--,i=qH(r),JH(e,i,n),a=LH[i],0!==a&&(r-=HH[i],YH(e,r,a)))}while(s<e.sym_next);JH(e,256,t)},ij=(e,t)=>{const n=t.dyn_tree,r=t.stat_desc.static_tree,o=t.stat_desc.has_stree,i=t.stat_desc.elems;let a,s,c,l=-1;for(e.heap_len=0,e.heap_max=573,a=0;a<i;a++)0!==n[2*a]?(e.heap[++e.heap_len]=l=a,e.depth[a]=0):n[2*a+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=l<2?++l:0,n[2*c]=1,e.depth[c]=0,e.opt_len--,o&&(e.static_len-=r[2*c+1]);for(t.max_code=l,a=e.heap_len>>1;a>=1;a--)rj(e,n,a);c=i;do{a=e.heap[1],e.heap[1]=e.heap[e.heap_len--],rj(e,n,1),s=e.heap[1],e.heap[--e.heap_max]=a,e.heap[--e.heap_max]=s,n[2*c]=n[2*a]+n[2*s],e.depth[c]=(e.depth[a]>=e.depth[s]?e.depth[a]:e.depth[s])+1,n[2*a+1]=n[2*s+1]=c,e.heap[1]=c++,rj(e,n,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const n=t.dyn_tree,r=t.max_code,o=t.stat_desc.static_tree,i=t.stat_desc.has_stree,a=t.stat_desc.extra_bits,s=t.stat_desc.extra_base,c=t.stat_desc.max_length;let l,u,d,A,p,h,f=0;for(A=0;A<=PH;A++)e.bl_count[A]=0;for(n[2*e.heap[e.heap_max]+1]=0,l=e.heap_max+1;l<573;l++)u=e.heap[l],A=n[2*n[2*u+1]+1]+1,A>c&&(A=c,f++),n[2*u+1]=A,u>r||(e.bl_count[A]++,p=0,u>=s&&(p=a[u-s]),h=n[2*u],e.opt_len+=h*(A+p),i&&(e.static_len+=h*(o[2*u+1]+p)));if(0!==f){do{for(A=c-1;0===e.bl_count[A];)A--;e.bl_count[A]--,e.bl_count[A+1]+=2,e.bl_count[c]--,f-=2}while(f>0);for(A=c;0!==A;A--)for(u=e.bl_count[A];0!==u;)d=e.heap[--l],d>r||(n[2*d+1]!==A&&(e.opt_len+=(A-n[2*d+1])*n[2*d],n[2*d+1]=A),u--)}})(e,t),ZH(n,l,e.bl_count)},aj=(e,t,n)=>{let r,o,i=-1,a=t[1],s=0,c=7,l=4;for(0===a&&(c=138,l=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)o=a,a=t[2*(r+1)+1],++s<c&&o===a||(s<l?e.bl_tree[2*o]+=s:0!==o?(o!==i&&e.bl_tree[2*o]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=0,i=o,0===a?(c=138,l=3):o===a?(c=6,l=3):(c=7,l=4))},sj=(e,t,n)=>{let r,o,i=-1,a=t[1],s=0,c=7,l=4;for(0===a&&(c=138,l=3),r=0;r<=n;r++)if(o=a,a=t[2*(r+1)+1],!(++s<c&&o===a)){if(s<l)do{JH(e,o,e.bl_tree)}while(0!=--s);else 0!==o?(o!==i&&(JH(e,o,e.bl_tree),s--),JH(e,16,e.bl_tree),YH(e,s-3,2)):s<=10?(JH(e,17,e.bl_tree),YH(e,s-3,3)):(JH(e,18,e.bl_tree),YH(e,s-11,7));s=0,i=o,0===a?(c=138,l=3):o===a?(c=6,l=3):(c=7,l=4)}};let cj=!1;const lj=(e,t,n,r)=>{YH(e,0+(r?1:0),3),tj(e),zH(e,n),zH(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n};var uj=(e,t,n,r)=>{let o,i,a=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<OH;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),ij(e,e.l_desc),ij(e,e.d_desc),a=(e=>{let t;for(aj(e,e.dyn_ltree,e.l_desc.max_code),aj(e,e.dyn_dtree,e.d_desc.max_code),ij(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*UH[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),o=e.opt_len+3+7>>>3,i=e.static_len+3+7>>>3,i<=o&&(o=i)):o=i=n+5,n+4<=o&&-1!==t?lj(e,t,n,r):4===e.strategy||i===o?(YH(e,2+(r?1:0),3),oj(e,MH,xH)):(YH(e,4+(r?1:0),3),((e,t,n,r)=>{let o;for(YH(e,t-257,5),YH(e,n-1,5),YH(e,r-4,4),o=0;o<r;o++)YH(e,e.bl_tree[2*UH[o]+1],3);sj(e,e.dyn_ltree,t-1),sj(e,e.dyn_dtree,n-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),oj(e,e.dyn_ltree,e.dyn_dtree)),ej(e),r&&tj(e)},dj={_tr_init:e=>{cj||((()=>{let e,t,n,r,o;const i=new Array(16);for(n=0,r=0;r<28;r++)for(VH[r]=n,e=0;e<1<<DH[r];e++)$H[n++]=r;for($H[n-1]=r,o=0,r=0;r<16;r++)for(HH[r]=o,e=0;e<1<<LH[r];e++)FH[o++]=r;for(o>>=7;r<kH;r++)for(HH[r]=o<<7,e=0;e<1<<LH[r]-7;e++)FH[256+o++]=r;for(t=0;t<=PH;t++)i[t]=0;for(e=0;e<=143;)MH[2*e+1]=8,e++,i[8]++;for(;e<=255;)MH[2*e+1]=9,e++,i[9]++;for(;e<=279;)MH[2*e+1]=7,e++,i[7]++;for(;e<=287;)MH[2*e+1]=8,e++,i[8]++;for(ZH(MH,287,i),e=0;e<kH;e++)xH[2*e+1]=5,xH[2*e]=XH(e,5);QH=new jH(MH,DH,257,NH,PH),GH=new jH(xH,LH,0,kH,PH),KH=new jH(new Array(0),BH,0,19,7)})(),cj=!0),e.l_desc=new WH(e.dyn_ltree,QH),e.d_desc=new WH(e.dyn_dtree,GH),e.bl_desc=new WH(e.bl_tree,KH),e.bi_buf=0,e.bi_valid=0,ej(e)},_tr_stored_block:lj,_tr_flush_block:uj,_tr_tally:(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*($H[n]+OH+1)]++,e.dyn_dtree[2*qH(t)]++),e.sym_next===e.sym_end),_tr_align:e=>{var t;YH(e,2,3),JH(e,256,MH),16===(t=e).bi_valid?(zH(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}},Aj=(e,t,n,r)=>{let o=65535&e,i=e>>>16&65535,a=0;for(;0!==n;){a=n>2e3?2e3:n,n-=a;do{o=o+t[r++]|0,i=i+o|0}while(--a);o%=65521,i%=65521}return o|i<<16};const pj=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t})());var hj=(e,t,n,r)=>{const o=pj,i=r+n;e^=-1;for(let a=r;a<i;a++)e=e>>>8^o[255&(e^t[a])];return~e},fj={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},gj={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:mj,_tr_stored_block:_j,_tr_flush_block:Ej,_tr_tally:vj,_tr_align:yj}=dj,{Z_NO_FLUSH:bj,Z_PARTIAL_FLUSH:Cj,Z_FULL_FLUSH:Sj,Z_FINISH:wj,Z_BLOCK:Tj,Z_OK:Ij,Z_STREAM_END:Rj,Z_STREAM_ERROR:Oj,Z_DATA_ERROR:Nj,Z_BUF_ERROR:kj,Z_DEFAULT_COMPRESSION:Pj,Z_FILTERED:Dj,Z_HUFFMAN_ONLY:Lj,Z_RLE:Bj,Z_FIXED:Uj,Z_DEFAULT_STRATEGY:Mj,Z_UNKNOWN:xj,Z_DEFLATED:Fj}=gj,$j=286,Vj=30,Hj=19,jj=2*$j+1,Qj=15,Gj=258,Kj=262,Wj=42,qj=113,zj=666,Yj=(e,t)=>(e.msg=fj[t],t),Jj=e=>2*e-(e>4?9:0),Xj=e=>{let t=e.length;for(;--t>=0;)e[t]=0},Zj=e=>{let t,n,r,o=e.w_size;t=e.hash_size,r=t;do{n=e.head[--r],e.head[r]=n>=o?n-o:0}while(--t);t=o,r=t;do{n=e.prev[--r],e.prev[r]=n>=o?n-o:0}while(--t)};let eQ=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask;const tQ=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},nQ=(e,t)=>{Ej(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,tQ(e.strm)},rQ=(e,t)=>{e.pending_buf[e.pending++]=t},oQ=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},iQ=(e,t,n,r)=>{let o=e.avail_in;return o>r&&(o=r),0===o?0:(e.avail_in-=o,t.set(e.input.subarray(e.next_in,e.next_in+o),n),1===e.state.wrap?e.adler=Aj(e.adler,t,o,n):2===e.state.wrap&&(e.adler=hj(e.adler,t,o,n)),e.next_in+=o,e.total_in+=o,o)},aQ=(e,t)=>{let n,r,o=e.max_chain_length,i=e.strstart,a=e.prev_length,s=e.nice_match;const c=e.strstart>e.w_size-Kj?e.strstart-(e.w_size-Kj):0,l=e.window,u=e.w_mask,d=e.prev,A=e.strstart+Gj;let p=l[i+a-1],h=l[i+a];e.prev_length>=e.good_match&&(o>>=2),s>e.lookahead&&(s=e.lookahead);do{if(n=t,l[n+a]===h&&l[n+a-1]===p&&l[n]===l[i]&&l[++n]===l[i+1]){i+=2,n++;do{}while(l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&l[++i]===l[++n]&&i<A);if(r=Gj-(A-i),i=A-Gj,r>a){if(e.match_start=t,a=r,r>=s)break;p=l[i+a-1],h=l[i+a]}}}while((t=d[t&u])>c&&0!=--o);return a<=e.lookahead?a:e.lookahead},sQ=e=>{const t=e.w_size;let n,r,o;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-Kj)&&(e.window.set(e.window.subarray(t,t+t-r),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),Zj(e),r+=t),0===e.strm.avail_in)break;if(n=iQ(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=n,e.lookahead+e.insert>=3)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=eQ(e,e.ins_h,e.window[o+1]);e.insert&&(e.ins_h=eQ(e,e.ins_h,e.window[o+3-1]),e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<Kj&&0!==e.strm.avail_in)},cQ=(e,t)=>{let n,r,o,i=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,a=0,s=e.strm.avail_in;do{if(n=65535,o=e.bi_valid+42>>3,e.strm.avail_out<o)break;if(o=e.strm.avail_out-o,r=e.strstart-e.block_start,n>r+e.strm.avail_in&&(n=r+e.strm.avail_in),n>o&&(n=o),n<i&&(0===n&&t!==wj||t===bj||n!==r+e.strm.avail_in))break;a=t===wj&&n===r+e.strm.avail_in?1:0,_j(e,0,0,a),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,tQ(e.strm),r&&(r>n&&(r=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+r),e.strm.next_out),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r,e.block_start+=r,n-=r),n&&(iQ(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(0===a);return s-=e.strm.avail_in,s&&(s>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=s&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-s,e.strm.next_in),e.strstart),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),a?4:t!==bj&&t!==wj&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(o=e.window_size-e.strstart,e.strm.avail_in>o&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,o+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),o>e.strm.avail_in&&(o=e.strm.avail_in),o&&(iQ(e.strm,e.window,e.strstart,o),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.high_water<e.strstart&&(e.high_water=e.strstart),o=e.bi_valid+42>>3,o=e.pending_buf_size-o>65535?65535:e.pending_buf_size-o,i=o>e.w_size?e.w_size:o,r=e.strstart-e.block_start,(r>=i||(r||t===wj)&&t!==bj&&0===e.strm.avail_in&&r<=o)&&(n=r>o?o:r,a=t===wj&&0===e.strm.avail_in&&n===r?1:0,_j(e,e.block_start,n,a),e.block_start+=n,tQ(e.strm)),a?3:1)},lQ=(e,t)=>{let n,r;for(;;){if(e.lookahead<Kj){if(sQ(e),e.lookahead<Kj&&t===bj)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=eQ(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-Kj&&(e.match_length=aQ(e,n)),e.match_length>=3)if(r=vj(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=eQ(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=eQ(e,e.ins_h,e.window[e.strstart+1]);else r=vj(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(nQ(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===wj?(nQ(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(nQ(e,!1),0===e.strm.avail_out)?1:2},uQ=(e,t)=>{let n,r,o;for(;;){if(e.lookahead<Kj){if(sQ(e),e.lookahead<Kj&&t===bj)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=eQ(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-Kj&&(e.match_length=aQ(e,n),e.match_length<=5&&(e.strategy===Dj||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){o=e.strstart+e.lookahead-3,r=vj(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=o&&(e.ins_h=eQ(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(nQ(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(r=vj(e,0,e.window[e.strstart-1]),r&&nQ(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=vj(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===wj?(nQ(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(nQ(e,!1),0===e.strm.avail_out)?1:2};function dQ(e,t,n,r,o){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=o}const AQ=[new dQ(0,0,0,0,cQ),new dQ(4,4,8,4,lQ),new dQ(4,5,16,8,lQ),new dQ(4,6,32,32,lQ),new dQ(4,4,16,16,uQ),new dQ(8,16,32,32,uQ),new dQ(8,16,128,128,uQ),new dQ(8,32,128,256,uQ),new dQ(32,128,258,1024,uQ),new dQ(32,258,258,4096,uQ)];function pQ(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Fj,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(2*jj),this.dyn_dtree=new Uint16Array(2*(2*Vj+1)),this.bl_tree=new Uint16Array(2*(2*Hj+1)),Xj(this.dyn_ltree),Xj(this.dyn_dtree),Xj(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Qj+1),this.heap=new Uint16Array(2*$j+1),Xj(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*$j+1),Xj(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const hQ=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==Wj&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==qj&&t.status!==zj?1:0},fQ=e=>{if(hQ(e))return Yj(e,Oj);e.total_in=e.total_out=0,e.data_type=xj;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?Wj:qj,e.adler=2===t.wrap?0:1,t.last_flush=-2,mj(t),Ij},gQ=e=>{const t=fQ(e);return t===Ij&&((n=e.state).window_size=2*n.w_size,Xj(n.head),n.max_lazy_match=AQ[n.level].max_lazy,n.good_match=AQ[n.level].good_length,n.nice_match=AQ[n.level].nice_length,n.max_chain_length=AQ[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=2,n.match_available=0,n.ins_h=0),t;var n},mQ=(e,t,n,r,o,i)=>{if(!e)return Oj;let a=1;if(t===Pj&&(t=6),r<0?(a=0,r=-r):r>15&&(a=2,r-=16),o<1||o>9||n!==Fj||r<8||r>15||t<0||t>9||i<0||i>Uj||8===r&&1!==a)return Yj(e,Oj);8===r&&(r=9);const s=new pQ;return e.state=s,s.strm=e,s.status=Wj,s.wrap=a,s.gzhead=null,s.w_bits=r,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=o+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new Uint8Array(2*s.w_size),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<o+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=3*(s.lit_bufsize-1),s.level=t,s.strategy=i,s.method=n,gQ(e)};var _Q={deflateInit:(e,t)=>mQ(e,t,Fj,15,8,Mj),deflateInit2:mQ,deflateReset:gQ,deflateResetKeep:fQ,deflateSetHeader:(e,t)=>hQ(e)||2!==e.state.wrap?Oj:(e.state.gzhead=t,Ij),deflate:(e,t)=>{if(hQ(e)||t>Tj||t<0)return e?Yj(e,Oj):Oj;const n=e.state;if(!e.output||0!==e.avail_in&&!e.input||n.status===zj&&t!==wj)return Yj(e,0===e.avail_out?kj:Oj);const r=n.last_flush;if(n.last_flush=t,0!==n.pending){if(tQ(e),0===e.avail_out)return n.last_flush=-1,Ij}else if(0===e.avail_in&&Jj(t)<=Jj(r)&&t!==wj)return Yj(e,kj);if(n.status===zj&&0!==e.avail_in)return Yj(e,kj);if(n.status===Wj&&0===n.wrap&&(n.status=qj),n.status===Wj){let t=Fj+(n.w_bits-8<<4)<<8,r=-1;if(r=n.strategy>=Lj||n.level<2?0:n.level<6?1:6===n.level?2:3,t|=r<<6,0!==n.strstart&&(t|=32),t+=31-t%31,oQ(n,t),0!==n.strstart&&(oQ(n,e.adler>>>16),oQ(n,65535&e.adler)),e.adler=1,n.status=qj,tQ(e),0!==n.pending)return n.last_flush=-1,Ij}if(57===n.status)if(e.adler=0,rQ(n,31),rQ(n,139),rQ(n,8),n.gzhead)rQ(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),rQ(n,255&n.gzhead.time),rQ(n,n.gzhead.time>>8&255),rQ(n,n.gzhead.time>>16&255),rQ(n,n.gzhead.time>>24&255),rQ(n,9===n.level?2:n.strategy>=Lj||n.level<2?4:0),rQ(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(rQ(n,255&n.gzhead.extra.length),rQ(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=hj(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(rQ(n,0),rQ(n,0),rQ(n,0),rQ(n,0),rQ(n,0),rQ(n,9===n.level?2:n.strategy>=Lj||n.level<2?4:0),rQ(n,3),n.status=qj,tQ(e),0!==n.pending)return n.last_flush=-1,Ij;if(69===n.status){if(n.gzhead.extra){let t=n.pending,r=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+r>n.pending_buf_size;){let o=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+o),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>t&&(e.adler=hj(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex+=o,tQ(e),0!==n.pending)return n.last_flush=-1,Ij;t=0,r-=o}let o=new Uint8Array(n.gzhead.extra);n.pending_buf.set(o.subarray(n.gzindex,n.gzindex+r),n.pending),n.pending+=r,n.gzhead.hcrc&&n.pending>t&&(e.adler=hj(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=hj(e.adler,n.pending_buf,n.pending-r,r)),tQ(e),0!==n.pending)return n.last_flush=-1,Ij;r=0}t=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,rQ(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=hj(e.adler,n.pending_buf,n.pending-r,r)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=hj(e.adler,n.pending_buf,n.pending-r,r)),tQ(e),0!==n.pending)return n.last_flush=-1,Ij;r=0}t=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,rQ(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=hj(e.adler,n.pending_buf,n.pending-r,r))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(tQ(e),0!==n.pending))return n.last_flush=-1,Ij;rQ(n,255&e.adler),rQ(n,e.adler>>8&255),e.adler=0}if(n.status=qj,tQ(e),0!==n.pending)return n.last_flush=-1,Ij}if(0!==e.avail_in||0!==n.lookahead||t!==bj&&n.status!==zj){let r=0===n.level?cQ(n,t):n.strategy===Lj?((e,t)=>{let n;for(;;){if(0===e.lookahead&&(sQ(e),0===e.lookahead)){if(t===bj)return 1;break}if(e.match_length=0,n=vj(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(nQ(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===wj?(nQ(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(nQ(e,!1),0===e.strm.avail_out)?1:2})(n,t):n.strategy===Bj?((e,t)=>{let n,r,o,i;const a=e.window;for(;;){if(e.lookahead<=Gj){if(sQ(e),e.lookahead<=Gj&&t===bj)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(o=e.strstart-1,r=a[o],r===a[++o]&&r===a[++o]&&r===a[++o])){i=e.strstart+Gj;do{}while(r===a[++o]&&r===a[++o]&&r===a[++o]&&r===a[++o]&&r===a[++o]&&r===a[++o]&&r===a[++o]&&r===a[++o]&&o<i);e.match_length=Gj-(i-o),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=vj(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=vj(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(nQ(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===wj?(nQ(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(nQ(e,!1),0===e.strm.avail_out)?1:2})(n,t):AQ[n.level].func(n,t);if(3!==r&&4!==r||(n.status=zj),1===r||3===r)return 0===e.avail_out&&(n.last_flush=-1),Ij;if(2===r&&(t===Cj?yj(n):t!==Tj&&(_j(n,0,0,!1),t===Sj&&(Xj(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),tQ(e),0===e.avail_out))return n.last_flush=-1,Ij}return t!==wj?Ij:n.wrap<=0?Rj:(2===n.wrap?(rQ(n,255&e.adler),rQ(n,e.adler>>8&255),rQ(n,e.adler>>16&255),rQ(n,e.adler>>24&255),rQ(n,255&e.total_in),rQ(n,e.total_in>>8&255),rQ(n,e.total_in>>16&255),rQ(n,e.total_in>>24&255)):(oQ(n,e.adler>>>16),oQ(n,65535&e.adler)),tQ(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?Ij:Rj)},deflateEnd:e=>{if(hQ(e))return Oj;const t=e.state.status;return e.state=null,t===qj?Yj(e,Nj):Ij},deflateSetDictionary:(e,t)=>{let n=t.length;if(hQ(e))return Oj;const r=e.state,o=r.wrap;if(2===o||1===o&&r.status!==Wj||r.lookahead)return Oj;if(1===o&&(e.adler=Aj(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){0===o&&(Xj(r.head),r.strstart=0,r.block_start=0,r.insert=0);let e=new Uint8Array(r.w_size);e.set(t.subarray(n-r.w_size,n),0),t=e,n=r.w_size}const i=e.avail_in,a=e.next_in,s=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,sQ(r);r.lookahead>=3;){let e=r.strstart,t=r.lookahead-2;do{r.ins_h=eQ(r,r.ins_h,r.window[e+3-1]),r.prev[e&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=e,e++}while(--t);r.strstart=e,r.lookahead=2,sQ(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=a,e.input=s,e.avail_in=i,r.wrap=o,Ij},deflateInfo:"pako deflate (from Nodeca project)"};const EQ=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var vQ={assign:function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const t in n)EQ(n,t)&&(e[t]=n[t])}}return e},flattenChunks:e=>{let t=0;for(let r=0,o=e.length;r<o;r++)t+=e[r].length;const n=new Uint8Array(t);for(let r=0,o=0,i=e.length;r<i;r++){let t=e[r];n.set(t,o),o+=t.length}return n}};let yQ=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(mp){yQ=!1}const bQ=new Uint8Array(256);for(let VK=0;VK<256;VK++)bQ[VK]=VK>=252?6:VK>=248?5:VK>=240?4:VK>=224?3:VK>=192?2:1;bQ[254]=bQ[254]=1;var CQ={string2buf:e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,n,r,o,i,a=e.length,s=0;for(o=0;o<a;o++)n=e.charCodeAt(o),55296==(64512&n)&&o+1<a&&(r=e.charCodeAt(o+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),o++)),s+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(s),i=0,o=0;i<s;o++)n=e.charCodeAt(o),55296==(64512&n)&&o+1<a&&(r=e.charCodeAt(o+1),56320==(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),o++)),n<128?t[i++]=n:n<2048?(t[i++]=192|n>>>6,t[i++]=128|63&n):n<65536?(t[i++]=224|n>>>12,t[i++]=128|n>>>6&63,t[i++]=128|63&n):(t[i++]=240|n>>>18,t[i++]=128|n>>>12&63,t[i++]=128|n>>>6&63,t[i++]=128|63&n);return t},buf2string:(e,t)=>{const n=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let r,o;const i=new Array(2*n);for(o=0,r=0;r<n;){let t=e[r++];if(t<128){i[o++]=t;continue}let a=bQ[t];if(a>4)i[o++]=65533,r+=a-1;else{for(t&=2===a?31:3===a?15:7;a>1&&r<n;)t=t<<6|63&e[r++],a--;a>1?i[o++]=65533:t<65536?i[o++]=t:(t-=65536,i[o++]=55296|t>>10&1023,i[o++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&yQ)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n})(i,o)},utf8border:(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+bQ[e[n]]>t?n:t}},SQ=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const wQ=Object.prototype.toString,{Z_NO_FLUSH:TQ,Z_SYNC_FLUSH:IQ,Z_FULL_FLUSH:RQ,Z_FINISH:OQ,Z_OK:NQ,Z_STREAM_END:kQ,Z_DEFAULT_COMPRESSION:PQ,Z_DEFAULT_STRATEGY:DQ,Z_DEFLATED:LQ}=gj;function BQ(e){this.options=vQ.assign({level:PQ,method:LQ,chunkSize:16384,windowBits:15,memLevel:8,strategy:DQ},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new SQ,this.strm.avail_out=0;let n=_Q.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==NQ)throw new Error(fj[n]);if(t.header&&_Q.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?CQ.string2buf(t.dictionary):"[object ArrayBuffer]"===wQ.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=_Q.deflateSetDictionary(this.strm,e),n!==NQ)throw new Error(fj[n]);this._dict_set=!0}}function UQ(e,t){const n=new BQ(t);if(n.push(e,!0),n.err)throw n.msg||fj[n.err];return n.result}BQ.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize;let o,i;if(this.ended)return!1;for(i=t===~~t?t:!0===t?OQ:TQ,"string"==typeof e?n.input=CQ.string2buf(e):"[object ArrayBuffer]"===wQ.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(i===IQ||i===RQ)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(o=_Q.deflate(n,i),o===kQ)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),o=_Q.deflateEnd(this.strm),this.onEnd(o),this.ended=!0,o===NQ;if(0!==n.avail_out){if(i>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},BQ.prototype.onData=function(e){this.chunks.push(e)},BQ.prototype.onEnd=function(e){e===NQ&&(this.result=vQ.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var MQ={Deflate:BQ,deflate:UQ,deflateRaw:function(e,t){return(t=t||{}).raw=!0,UQ(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,UQ(e,t)},constants:gj};const xQ=16209;var FQ=function(e,t){let n,r,o,i,a,s,c,l,u,d,A,p,h,f,g,m,_,E,v,y,b,C,S,w;const T=e.state;n=e.next_in,S=e.input,r=n+(e.avail_in-5),o=e.next_out,w=e.output,i=o-(t-e.avail_out),a=o+(e.avail_out-257),s=T.dmax,c=T.wsize,l=T.whave,u=T.wnext,d=T.window,A=T.hold,p=T.bits,h=T.lencode,f=T.distcode,g=(1<<T.lenbits)-1,m=(1<<T.distbits)-1;e:do{p<15&&(A+=S[n++]<<p,p+=8,A+=S[n++]<<p,p+=8),_=h[A&g];t:for(;;){if(E=_>>>24,A>>>=E,p-=E,E=_>>>16&255,0===E)w[o++]=65535&_;else{if(!(16&E)){if(!(64&E)){_=h[(65535&_)+(A&(1<<E)-1)];continue t}if(32&E){T.mode=16191;break e}e.msg="invalid literal/length code",T.mode=xQ;break e}v=65535&_,E&=15,E&&(p<E&&(A+=S[n++]<<p,p+=8),v+=A&(1<<E)-1,A>>>=E,p-=E),p<15&&(A+=S[n++]<<p,p+=8,A+=S[n++]<<p,p+=8),_=f[A&m];n:for(;;){if(E=_>>>24,A>>>=E,p-=E,E=_>>>16&255,!(16&E)){if(!(64&E)){_=f[(65535&_)+(A&(1<<E)-1)];continue n}e.msg="invalid distance code",T.mode=xQ;break e}if(y=65535&_,E&=15,p<E&&(A+=S[n++]<<p,p+=8,p<E&&(A+=S[n++]<<p,p+=8)),y+=A&(1<<E)-1,y>s){e.msg="invalid distance too far back",T.mode=xQ;break e}if(A>>>=E,p-=E,E=o-i,y>E){if(E=y-E,E>l&&T.sane){e.msg="invalid distance too far back",T.mode=xQ;break e}if(b=0,C=d,0===u){if(b+=c-E,E<v){v-=E;do{w[o++]=d[b++]}while(--E);b=o-y,C=w}}else if(u<E){if(b+=c+u-E,E-=u,E<v){v-=E;do{w[o++]=d[b++]}while(--E);if(b=0,u<v){E=u,v-=E;do{w[o++]=d[b++]}while(--E);b=o-y,C=w}}}else if(b+=u-E,E<v){v-=E;do{w[o++]=d[b++]}while(--E);b=o-y,C=w}for(;v>2;)w[o++]=C[b++],w[o++]=C[b++],w[o++]=C[b++],v-=3;v&&(w[o++]=C[b++],v>1&&(w[o++]=C[b++]))}else{b=o-y;do{w[o++]=w[b++],w[o++]=w[b++],w[o++]=w[b++],v-=3}while(v>2);v&&(w[o++]=w[b++],v>1&&(w[o++]=w[b++]))}break}}break}}while(n<r&&o<a);v=p>>3,n-=v,p-=v<<3,A&=(1<<p)-1,e.next_in=n,e.next_out=o,e.avail_in=n<r?r-n+5:5-(n-r),e.avail_out=o<a?a-o+257:257-(o-a),T.hold=A,T.bits=p};const $Q=15,VQ=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),HQ=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),jQ=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),QQ=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var GQ=(e,t,n,r,o,i,a,s)=>{const c=s.bits;let l,u,d,A,p,h,f=0,g=0,m=0,_=0,E=0,v=0,y=0,b=0,C=0,S=0,w=null;const T=new Uint16Array(16),I=new Uint16Array(16);let R,O,N,k=null;for(f=0;f<=$Q;f++)T[f]=0;for(g=0;g<r;g++)T[t[n+g]]++;for(E=c,_=$Q;_>=1&&0===T[_];_--);if(E>_&&(E=_),0===_)return o[i++]=20971520,o[i++]=20971520,s.bits=1,0;for(m=1;m<_&&0===T[m];m++);for(E<m&&(E=m),b=1,f=1;f<=$Q;f++)if(b<<=1,b-=T[f],b<0)return-1;if(b>0&&(0===e||1!==_))return-1;for(I[1]=0,f=1;f<$Q;f++)I[f+1]=I[f]+T[f];for(g=0;g<r;g++)0!==t[n+g]&&(a[I[t[n+g]]++]=g);if(0===e?(w=k=a,h=20):1===e?(w=VQ,k=HQ,h=257):(w=jQ,k=QQ,h=0),S=0,g=0,f=m,p=i,v=E,y=0,d=-1,C=1<<E,A=C-1,1===e&&C>852||2===e&&C>592)return 1;for(;;){R=f-y,a[g]+1<h?(O=0,N=a[g]):a[g]>=h?(O=k[a[g]-h],N=w[a[g]-h]):(O=96,N=0),l=1<<f-y,u=1<<v,m=u;do{u-=l,o[p+(S>>y)+u]=R<<24|O<<16|N}while(0!==u);for(l=1<<f-1;S&l;)l>>=1;if(0!==l?(S&=l-1,S+=l):S=0,g++,0==--T[f]){if(f===_)break;f=t[n+a[g]]}if(f>E&&(S&A)!==d){for(0===y&&(y=E),p+=m,v=f-y,b=1<<v;v+y<_&&(b-=T[v+y],!(b<=0));)v++,b<<=1;if(C+=1<<v,1===e&&C>852||2===e&&C>592)return 1;d=S&A,o[d]=E<<24|v<<16|p-i}}return 0!==S&&(o[p+S]=f-y<<24|64<<16),s.bits=E,0};const{Z_FINISH:KQ,Z_BLOCK:WQ,Z_TREES:qQ,Z_OK:zQ,Z_STREAM_END:YQ,Z_NEED_DICT:JQ,Z_STREAM_ERROR:XQ,Z_DATA_ERROR:ZQ,Z_MEM_ERROR:eG,Z_BUF_ERROR:tG,Z_DEFLATED:nG}=gj,rG=16180,oG=16190,iG=16191,aG=16192,sG=16194,cG=16199,lG=16200,uG=16206,dG=16209,AG=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function pG(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const hG=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<rG||t.mode>16211?1:0},fG=e=>{if(hG(e))return XQ;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=rG,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,zQ},gG=e=>{if(hG(e))return XQ;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,fG(e)},mG=(e,t)=>{let n;if(hG(e))return XQ;const r=e.state;return t<0?(n=0,t=-t):(n=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?XQ:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,gG(e))},_G=(e,t)=>{if(!e)return XQ;const n=new pG;e.state=n,n.strm=e,n.window=null,n.mode=rG;const r=mG(e,t);return r!==zQ&&(e.state=null),r};let EG,vG,yG=!0;const bG=e=>{if(yG){EG=new Int32Array(512),vG=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(GQ(1,e.lens,0,288,EG,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;GQ(2,e.lens,0,32,vG,0,e.work,{bits:5}),yG=!1}e.lencode=EG,e.lenbits=9,e.distcode=vG,e.distbits=5},CG=(e,t,n,r)=>{let o;const i=e.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),r>=i.wsize?(i.window.set(t.subarray(n-i.wsize,n),0),i.wnext=0,i.whave=i.wsize):(o=i.wsize-i.wnext,o>r&&(o=r),i.window.set(t.subarray(n-r,n-r+o),i.wnext),(r-=o)?(i.window.set(t.subarray(n-r,n),0),i.wnext=r,i.whave=i.wsize):(i.wnext+=o,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=o))),0};var SG={inflateReset:gG,inflateReset2:mG,inflateResetKeep:fG,inflateInit:e=>_G(e,15),inflateInit2:_G,inflate:(e,t)=>{let n,r,o,i,a,s,c,l,u,d,A,p,h,f,g,m,_,E,v,y,b,C,S=0;const w=new Uint8Array(4);let T,I;const R=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(hG(e)||!e.output||!e.input&&0!==e.avail_in)return XQ;n=e.state,n.mode===iG&&(n.mode=aG),a=e.next_out,o=e.output,c=e.avail_out,i=e.next_in,r=e.input,s=e.avail_in,l=n.hold,u=n.bits,d=s,A=c,C=zQ;e:for(;;)switch(n.mode){case rG:if(0===n.wrap){n.mode=aG;break}for(;u<16;){if(0===s)break e;s--,l+=r[i++]<<u,u+=8}if(2&n.wrap&&35615===l){0===n.wbits&&(n.wbits=15),n.check=0,w[0]=255&l,w[1]=l>>>8&255,n.check=hj(n.check,w,2,0),l=0,u=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&l)<<8)+(l>>8))%31){e.msg="incorrect header check",n.mode=dG;break}if((15&l)!==nG){e.msg="unknown compression method",n.mode=dG;break}if(l>>>=4,u-=4,b=8+(15&l),0===n.wbits&&(n.wbits=b),b>15||b>n.wbits){e.msg="invalid window size",n.mode=dG;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=512&l?16189:iG,l=0,u=0;break;case 16181:for(;u<16;){if(0===s)break e;s--,l+=r[i++]<<u,u+=8}if(n.flags=l,(255&IH(n))!==nG){e.msg="unknown compression method",n.mode=dG;break}if(57344&IH(n)){e.msg="unknown header flags set",n.mode=dG;break}n.head&&(n.head.text=l>>8&1),512&IH(n)&&4&n.wrap&&(w[0]=255&l,w[1]=l>>>8&255,n.check=hj(n.check,w,2,0)),l=0,u=0,n.mode=16182;case 16182:for(;u<32;){if(0===s)break e;s--,l+=r[i++]<<u,u+=8}n.head&&(n.head.time=l),512&IH(n)&&4&n.wrap&&(w[0]=255&l,w[1]=l>>>8&255,w[2]=l>>>16&255,w[3]=l>>>24&255,n.check=hj(n.check,w,4,0)),l=0,u=0,n.mode=16183;case 16183:for(;u<16;){if(0===s)break e;s--,l+=r[i++]<<u,u+=8}n.head&&(n.head.xflags=255&l,n.head.os=l>>8),512&IH(n)&&4&n.wrap&&(w[0]=255&l,w[1]=l>>>8&255,n.check=hj(n.check,w,2,0)),l=0,u=0,n.mode=16184;case 16184:if(1024&IH(n)){for(;u<16;){if(0===s)break e;s--,l+=r[i++]<<u,u+=8}n.length=l,n.head&&(n.head.extra_len=l),512&IH(n)&&4&n.wrap&&(w[0]=255&l,w[1]=l>>>8&255,n.check=hj(n.check,w,2,0)),l=0,u=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&IH(n)&&(p=n.length,p>s&&(p=s),p&&(n.head&&(b=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(i,i+p),b)),512&IH(n)&&4&n.wrap&&(n.check=hj(n.check,r,p,i)),s-=p,i+=p,n.length-=p),n.length))break e;n.length=0,n.mode=16186;case 16186:if(2048&IH(n)){if(0===s)break e;p=0;do{b=r[i+p++],n.head&&b&&n.length<65536&&(n.head.name+=String.fromCharCode(b))}while(b&&p<s);if(512&IH(n)&&4&n.wrap&&(n.check=hj(n.check,r,p,i)),s-=p,i+=p,b)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&IH(n)){if(0===s)break e;p=0;do{b=r[i+p++],n.head&&b&&n.length<65536&&(n.head.comment+=String.fromCharCode(b))}while(b&&p<s);if(512&IH(n)&&4&n.wrap&&(n.check=hj(n.check,r,p,i)),s-=p,i+=p,b)break e}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&IH(n)){for(;u<16;){if(0===s)break e;s--,l+=r[i++]<<u,u+=8}if(4&n.wrap&&l!==(65535&n.check)){e.msg="header crc mismatch",n.mode=dG;break}l=0,u=0}n.head&&(n.head.hcrc=IH(n)>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=iG;break;case 16189:for(;u<32;){if(0===s)break e;s--,l+=r[i++]<<u,u+=8}e.adler=n.check=AG(l),l=0,u=0,n.mode=oG;case oG:if(0===n.havedict)return e.next_out=a,e.avail_out=c,e.next_in=i,e.avail_in=s,n.hold=l,n.bits=u,JQ;e.adler=n.check=1,n.mode=iG;case iG:if(t===WQ||t===qQ)break e;case aG:if(n.last){l>>>=7&u,u-=7&u,n.mode=uG;break}for(;u<3;){if(0===s)break e;s--,l+=r[i++]<<u,u+=8}switch(n.last=1&l,l>>>=1,u-=1,3&l){case 0:n.mode=16193;break;case 1:if(bG(n),n.mode=cG,t===qQ){l>>>=2,u-=2;break e}break;case 2:n.mode=16196;break;case 3:e.msg="invalid block type",n.mode=dG}l>>>=2,u-=2;break;case 16193:for(l>>>=7&u,u-=7&u;u<32;){if(0===s)break e;s--,l+=r[i++]<<u,u+=8}if((65535&l)!=(l>>>16^65535)){e.msg="invalid stored block lengths",n.mode=dG;break}if(n.length=65535&l,l=0,u=0,n.mode=sG,t===qQ)break e;case sG:n.mode=16195;case 16195:if(p=n.length,p){if(p>s&&(p=s),p>c&&(p=c),0===p)break e;o.set(r.subarray(i,i+p),a),s-=p,i+=p,c-=p,a+=p,n.length-=p;break}n.mode=iG;break;case 16196:for(;u<14;){if(0===s)break e;s--,l+=r[i++]<<u,u+=8}if(n.nlen=257+(31&l),l>>>=5,u-=5,n.ndist=1+(31&l),l>>>=5,u-=5,n.ncode=4+(15&l),l>>>=4,u-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=dG;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;u<3;){if(0===s)break e;s--,l+=r[i++]<<u,u+=8}n.lens[R[n.have++]]=7&l,l>>>=3,u-=3}for(;n.have<19;)n.lens[R[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,T={bits:n.lenbits},C=GQ(0,n.lens,0,19,n.lencode,0,n.work,T),n.lenbits=T.bits,C){e.msg="invalid code lengths set",n.mode=dG;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;S=n.lencode[l&(1<<n.lenbits)-1],g=S>>>24,m=S>>>16&255,_=65535&S,!(g<=u);){if(0===s)break e;s--,l+=r[i++]<<u,u+=8}if(_<16)l>>>=g,u-=g,n.lens[n.have++]=_;else{if(16===_){for(I=g+2;u<I;){if(0===s)break e;s--,l+=r[i++]<<u,u+=8}if(l>>>=g,u-=g,0===n.have){e.msg="invalid bit length repeat",n.mode=dG;break}b=n.lens[n.have-1],p=3+(3&l),l>>>=2,u-=2}else if(17===_){for(I=g+3;u<I;){if(0===s)break e;s--,l+=r[i++]<<u,u+=8}l>>>=g,u-=g,b=0,p=3+(7&l),l>>>=3,u-=3}else{for(I=g+7;u<I;){if(0===s)break e;s--,l+=r[i++]<<u,u+=8}l>>>=g,u-=g,b=0,p=11+(127&l),l>>>=7,u-=7}if(n.have+p>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=dG;break}for(;p--;)n.lens[n.have++]=b}}if(n.mode===dG)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=dG;break}if(n.lenbits=9,T={bits:n.lenbits},C=GQ(1,n.lens,0,n.nlen,n.lencode,0,n.work,T),n.lenbits=T.bits,C){e.msg="invalid literal/lengths set",n.mode=dG;break}if(n.distbits=6,n.distcode=n.distdyn,T={bits:n.distbits},C=GQ(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,T),n.distbits=T.bits,C){e.msg="invalid distances set",n.mode=dG;break}if(n.mode=cG,t===qQ)break e;case cG:n.mode=lG;case lG:if(s>=6&&c>=258){e.next_out=a,e.avail_out=c,e.next_in=i,e.avail_in=s,n.hold=l,n.bits=u,FQ(e,A),a=e.next_out,o=e.output,c=e.avail_out,i=e.next_in,r=e.input,s=e.avail_in,l=n.hold,u=n.bits,n.mode===iG&&(n.back=-1);break}for(n.back=0;S=n.lencode[l&(1<<n.lenbits)-1],g=S>>>24,m=S>>>16&255,_=65535&S,!(g<=u);){if(0===s)break e;s--,l+=r[i++]<<u,u+=8}if(m&&!(240&m)){for(E=g,v=m,y=_;S=n.lencode[y+((l&(1<<E+v)-1)>>E)],g=S>>>24,m=S>>>16&255,_=65535&S,!(E+g<=u);){if(0===s)break e;s--,l+=r[i++]<<u,u+=8}l>>>=E,u-=E,n.back+=E}if(l>>>=g,u-=g,n.back+=g,n.length=_,0===m){n.mode=16205;break}if(32&m){n.back=-1,n.mode=iG;break}if(64&m){e.msg="invalid literal/length code",n.mode=dG;break}n.extra=15&m,n.mode=16201;case 16201:if(n.extra){for(I=n.extra;u<I;){if(0===s)break e;s--,l+=r[i++]<<u,u+=8}n.length+=l&(1<<n.extra)-1,l>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;S=n.distcode[l&(1<<n.distbits)-1],g=S>>>24,m=S>>>16&255,_=65535&S,!(g<=u);){if(0===s)break e;s--,l+=r[i++]<<u,u+=8}if(!(240&m)){for(E=g,v=m,y=_;S=n.distcode[y+((l&(1<<E+v)-1)>>E)],g=S>>>24,m=S>>>16&255,_=65535&S,!(E+g<=u);){if(0===s)break e;s--,l+=r[i++]<<u,u+=8}l>>>=E,u-=E,n.back+=E}if(l>>>=g,u-=g,n.back+=g,64&m){e.msg="invalid distance code",n.mode=dG;break}n.offset=_,n.extra=15&m,n.mode=16203;case 16203:if(n.extra){for(I=n.extra;u<I;){if(0===s)break e;s--,l+=r[i++]<<u,u+=8}n.offset+=l&(1<<n.extra)-1,l>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=dG;break}n.mode=16204;case 16204:if(0===c)break e;if(p=A-c,n.offset>p){if(p=n.offset-p,p>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=dG;break}p>n.wnext?(p-=n.wnext,h=n.wsize-p):h=n.wnext-p,p>n.length&&(p=n.length),f=n.window}else f=o,h=a-n.offset,p=n.length;p>c&&(p=c),c-=p,n.length-=p;do{o[a++]=f[h++]}while(--p);0===n.length&&(n.mode=lG);break;case 16205:if(0===c)break e;o[a++]=n.length,c--,n.mode=lG;break;case uG:if(n.wrap){for(;u<32;){if(0===s)break e;s--,l|=r[i++]<<u,u+=8}if(A-=c,e.total_out+=A,n.total+=A,4&n.wrap&&A&&(e.adler=n.check=IH(n)?hj(n.check,o,A,a-A):Aj(n.check,o,A,a-A)),A=c,4&n.wrap&&(IH(n)?l:AG(l))!==n.check){e.msg="incorrect data check",n.mode=dG;break}l=0,u=0}n.mode=16207;case 16207:if(n.wrap&&IH(n)){for(;u<32;){if(0===s)break e;s--,l+=r[i++]<<u,u+=8}if(4&n.wrap&&l!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=dG;break}l=0,u=0}n.mode=16208;case 16208:C=YQ;break e;case dG:C=ZQ;break e;case 16210:return eG;default:return XQ}return e.next_out=a,e.avail_out=c,e.next_in=i,e.avail_in=s,n.hold=l,n.bits=u,(n.wsize||A!==e.avail_out&&n.mode<dG&&(n.mode<uG||t!==KQ))&&CG(e,e.output,e.next_out,A-e.avail_out),d-=e.avail_in,A-=e.avail_out,e.total_in+=d,e.total_out+=A,n.total+=A,4&n.wrap&&A&&(e.adler=n.check=IH(n)?hj(n.check,o,A,e.next_out-A):Aj(n.check,o,A,e.next_out-A)),e.data_type=n.bits+(n.last?64:0)+(n.mode===iG?128:0)+(n.mode===cG||n.mode===sG?256:0),(0===d&&0===A||t===KQ)&&C===zQ&&(C=tG),C},inflateEnd:e=>{if(hG(e))return XQ;let t=e.state;return t.window&&(t.window=null),e.state=null,zQ},inflateGetHeader:(e,t)=>{if(hG(e))return XQ;const n=e.state;return 2&n.wrap?(n.head=t,t.done=!1,zQ):XQ},inflateSetDictionary:(e,t)=>{const n=t.length;let r,o,i;return hG(e)?XQ:(r=e.state,0!==r.wrap&&r.mode!==oG?XQ:r.mode===oG&&(o=1,o=Aj(o,t,n,0),o!==r.check)?ZQ:(i=CG(e,t,n,n),i?(r.mode=16210,eG):(r.havedict=1,zQ)))},inflateInfo:"pako inflate (from Nodeca project)"},wG=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const TG=Object.prototype.toString,{Z_NO_FLUSH:IG,Z_FINISH:RG,Z_OK:OG,Z_STREAM_END:NG,Z_NEED_DICT:kG,Z_STREAM_ERROR:PG,Z_DATA_ERROR:DG,Z_MEM_ERROR:LG}=gj;function BG(e){this.options=vQ.assign({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&!(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new SQ,this.strm.avail_out=0;let n=SG.inflateInit2(this.strm,t.windowBits);if(n!==OG)throw new Error(fj[n]);if(this.header=new wG,SG.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=CQ.string2buf(t.dictionary):"[object ArrayBuffer]"===TG.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=SG.inflateSetDictionary(this.strm,t.dictionary),n!==OG)))throw new Error(fj[n])}function UG(e,t){const n=new BG(t);if(n.push(e),n.err)throw n.msg||fj[n.err];return n.result}BG.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,o=this.options.dictionary;let i,a,s;if(this.ended)return!1;for(a=t===~~t?t:!0===t?RG:IG,"[object ArrayBuffer]"===TG.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),i=SG.inflate(n,a),i===kG&&o&&(i=SG.inflateSetDictionary(n,o),i===OG?i=SG.inflate(n,a):i===DG&&(i=kG));n.avail_in>0&&i===NG&&n.state.wrap>0&&0!==e[n.next_in];)SG.inflateReset(n),i=SG.inflate(n,a);switch(i){case PG:case DG:case kG:case LG:return this.onEnd(i),this.ended=!0,!1}if(s=n.avail_out,n.next_out&&(0===n.avail_out||i===NG))if("string"===this.options.to){let e=CQ.utf8border(n.output,n.next_out),t=n.next_out-e,o=CQ.buf2string(n.output,e);n.next_out=t,n.avail_out=r-t,t&&n.output.set(n.output.subarray(e,e+t),0),this.onData(o)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(i!==OG||0!==s){if(i===NG)return i=SG.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},BG.prototype.onData=function(e){this.chunks.push(e)},BG.prototype.onEnd=function(e){e===OG&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=vQ.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var MG={Inflate:BG,inflate:UG,inflateRaw:function(e,t){return(t=t||{}).raw=!0,UG(e,t)},ungzip:UG,constants:gj};const{Deflate:xG,deflate:FG,deflateRaw:$G,gzip:VG}=MQ,{Inflate:HG,inflate:jG,inflateRaw:QG,ungzip:GG}=MG;var KG=FG,WG=jG,qG=function(e){return e[e.ONE_BYTE=0]="ONE_BYTE",e[e.TWO_BYTE=1]="TWO_BYTE",e}(qG||{});class zG{constructor(){Ov(this,"_sequence",0),Ov(this,"_startTime",Date.now()),Ov(this,"isUseOneByte",!0)}get startTime(){const e=Date.now()-this._startTime;return e<Math.pow(2,16)?e:(this._startTime+=Math.pow(2,16),this.startTime)}get sequence(){return this._sequence<Math.pow(2,32)?this._sequence++:(this._sequence-=Math.pow(2,32),this.sequence)}serialize(e){const t={commonPacketHeader:{length:0,reserved:0,extension:0,sequence:this.sequence},commonStreamHeader:this.startTime,extension:void 0,payload:e};if(e.byteLength>128){const n=new Uint8Array(4);n.set([1,0,0,0]);const r={id:0,length:4,data:n.buffer},o={profile:this.isUseOneByte?0:1,length:this.isUseOneByte?5:6,datas:[r]};t.commonPacketHeader.extension=1,t.extension=o,t.payload=this.compress(e),t.commonPacketHeader.length=8+(t.extension.length+2)+t.payload.byteLength}else t.commonPacketHeader.length=8+t.payload.byteLength;xT("SHOW_DATASTREAM2_LOG")&&oI.debug("send data header: ".concat(JSON.stringify(t.commonPacketHeader)));const n=new ArrayBuffer(t.commonPacketHeader.length),r=new Uint8Array(n),o=new DataView(n);let i=0;if(o.setUint16(i,t.commonPacketHeader.extension<<15|t.commonPacketHeader.reserved<<14|t.commonPacketHeader.length,!0),i+=2,o.setUint32(i,t.commonPacketHeader.sequence,!0),i+=4,o.setUint16(i,t.commonStreamHeader,!0),i+=2,t.extension){const e=this.serializeExtension(t.extension);r.set(new Uint8Array(e),i),i+=e.byteLength}if(r.set(new Uint8Array(t.payload),i),i+=t.payload.byteLength,i!==t.commonPacketHeader.length)throw Error("serialize error!");return n}deserialize(e){if(e.byteLength<4)return new ArrayBuffer(0);const t=new DataView(e);let n=0;const r=t.getUint16(n,!0);n+=2;const o={length:16383&r,reserved:(16384&r)>>14,extension:(32768&r)>>15,sequence:t.getUint16(n+2,!0)<<16|t.getUint16(n,!0)};let i,a;if(n+=4,xT("SHOW_DATASTREAM2_LOG")&&oI.debug("receive data header: ".concat(JSON.stringify(o))),t.getUint16(n,!0),n+=2,o.extension){a=this.deserializeExtension(e.slice(n)),n+=2+a.length,i=e.slice(n);let t=!1;if(a.datas.length>0){const e=a.datas.find((e=>0===e.id));e&&(t=!(1&~new DataView(e.data).getUint32(0,!0)))}i=t?this.decompress(i):i}else i=e.slice(8);return i}serializeExtension(e){const{profile:t,length:n,datas:r}=e,o=new ArrayBuffer(n+2),i=new Uint8Array(o),a=new DataView(o);let s=0;if(a.setUint8(s++,t),a.setUint8(s++,n),r.forEach((e=>{t?(a.setUint8(s++,e.id),a.setUint8(s++,e.length),i.set(new Uint8Array(e.data),s),s+=e.data.byteLength):(a.setUint8(s++,e.id|e.length<<4),i.set(new Uint8Array(e.data),s),s+=e.data.byteLength)})),s!==n+2)throw Error("serialize extension error, is ".concat(s,"!==").concat(n+2));return o}deserializeExtension(e){const t=new DataView(e);let n=0;const r=t.getUint8(n);n++;const o=t.getUint8(n);n++;const i=r===qG.TWO_BYTE,a=[],s=new DataView(e,2);let c=0;for(;c<o;){let e=0,t=0,n=new ArrayBuffer(0);i?(e=s.getUint8(c),c++,t=s.getUint8(c),c++):(e=15&s.getUint8(c),t=s.getUint8(c)>>4,c++),t>0&&(n=s.buffer.slice(c+2,c+2+t),c+=n.byteLength),a.push({id:e,length:t,data:n})}if(c!==o)throw Error("parse error");return{profile:r,length:o,datas:a}}decompress(e){return WG(new Uint8Array(e))}compress(e){return KG(new Uint8Array(e))}}const YG={name:"DataStream",create:(e,t)=>{const n=t?new AU(e):new pU(e);return n.useDataStream(new zG),n}};class JG extends ww{constructor(e,t,n){super(),Ov(this,"ws",void 0),Ov(this,"requestId",1),Ov(this,"heartBeatTimer",void 0),Ov(this,"joinInfo",void 0),Ov(this,"clientId",void 0),Ov(this,"onOpen",(()=>{this.emit("open"),this.startHeartBeatCheck()})),Ov(this,"onClose",(e=>{this.emit("close"),this.dispose()})),Ov(this,"onMessage",(e=>{const t=JSON.parse(e.data);if(!t||"serverResponse"!==t.command||!t.requestId)return t&&"serverStatus"===t.command&&t.serverStatus&&t.serverStatus.command?(this.emit("status",t.serverStatus),void this.emit(t.serverStatus.command,t.serverStatus)):void 0;this.emit("req_".concat(t.requestId),t)})),this.joinInfo=e,this.clientId=t,this.ws=new OO("cross-channel-".concat(this.clientId),n),this.ws.on(yR.RECONNECTING,(()=>{this.ws.reconnectMode="retry",this.emit("reconnecting")})),this.ws.on(yR.CONNECTED,this.onOpen),this.ws.on(yR.ON_MESSAGE,this.onMessage),this.ws.on(yR.CLOSED,this.onClose)}isConnect(){return"connected"===this.ws.state}sendMessage(e){const t=this.requestId++;return e.requestId=t,e.seq=t,this.ws.sendMessage(e),t}waitStatus(e){return new MA(((t,n)=>{const r=window.setTimeout((()=>{n(new pI(lw.TIMEOUT,"wait status timeout, status: ".concat(e)))}),5e3);this.once(e,(o=>{window.clearTimeout(r),o.state&&0!==o.state?n(new pI(lw.CROSS_CHANNEL_WAIT_STATUS_ERROR,"wait status error, status: ".concat(e))):t(void 0)})),this.once("dispose",(()=>{window.clearTimeout(r),n(new pI(lw.WS_ABORT))}))}))}async request(e){if("closed"===this.ws.state)throw new pI(lw.WS_DISCONNECT);const t=()=>new MA(((e,t)=>{this.ws.once(yR.CLOSED,(()=>t(new pI(lw.WS_ABORT)))),this.ws.once(yR.CONNECTED,e)}));"connected"!==this.ws.state&&await t();const n=this.sendMessage(e),r=new MA(((e,t)=>{const r=()=>{t(new pI(lw.WS_ABORT))};this.ws.once(yR.RECONNECTING,r),this.ws.once(yR.CLOSED,r),this.once("req_".concat(n),e),iT(3e3).then((()=>{this.removeAllListeners("req_".concat(n)),this.ws.off(yR.RECONNECTING,r),this.ws.off(yR.CLOSED,r),t(new pI(lw.TIMEOUT,"cross channel ws request timeout"))}))})),o=await r;if(!o||200!==o.code)throw new pI(lw.CROSS_CHANNEL_SERVER_ERROR_RESPONSE,"response: ".concat(JSON.stringify(o)));return o}async connect(e){this.ws.removeAllListeners(yR.REQUEST_NEW_URLS),this.ws.on(yR.REQUEST_NEW_URLS,(t=>{t(e)})),await this.ws.init(e)}dispose(){this.clearHeartBeatCheck(),this.emit("dispose"),this.removeAllListeners(),this.ws.close()}sendPing(e){const t=this.requestId++;return e.requestId=t,this.ws.sendMessage(e),t}startHeartBeatCheck(){this.heartBeatTimer&&window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=window.setInterval((()=>{this.sendPing({command:"ping",appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sid:this.joinInfo.sid,ts:+new Date,requestId:0})}),3e3)}clearHeartBeatCheck(){window.clearInterval(this.heartBeatTimer),this.heartBeatTimer=void 0}}class XG extends ww{set state(e){e!==this._state&&(e!==BR.RELAY_STATE_FAILURE&&(this.errorCode=UR.RELAY_OK),this.emit("state",e,this.errorCode),this._state=e)}get state(){return this._state}constructor(e,t,n,r,o){super(),Ov(this,"joinInfo",void 0),Ov(this,"sid",void 0),Ov(this,"clientId",void 0),Ov(this,"cancelToken",yS.CancelToken.source()),Ov(this,"workerToken",void 0),Ov(this,"requestId",0),Ov(this,"signal",void 0),Ov(this,"prevChannelMediaConfig",void 0),Ov(this,"httpRetryConfig",void 0),Ov(this,"_resolution",void 0),Ov(this,"_state",BR.RELAY_STATE_IDLE),Ov(this,"errorCode",UR.RELAY_OK),Ov(this,"onStatus",(e=>{oI.debug("[".concat(this.clientId,"] ChannelMediaStatus: ").concat(JSON.stringify(e))),e&&e.command&&("onAudioPacketReceived"===e.command&&this.emit("event",LR.PACKET_RECEIVED_AUDIO_FROM_SRC),"onVideoPacketReceived"===e.command&&this.emit("event",LR.PACKET_RECEIVED_VIDEO_FROM_SRC),"onSrcTokenPrivilegeDidExpire"===e.command&&(this.errorCode=UR.SRC_TOKEN_EXPIRED,this.state=BR.RELAY_STATE_FAILURE),"onDestTokenPrivilegeDidExpire"===e.command&&(this.errorCode=UR.DEST_TOKEN_EXPIRED,this.state=BR.RELAY_STATE_FAILURE))})),Ov(this,"onReconnect",(async()=>{oI.debug("[".concat(this.clientId,"] ChannelMediaSocket disconnect, reconnecting")),this.emit("event",LR.NETWORK_DISCONNECTED),this.state=BR.RELAY_STATE_IDLE,this.prevChannelMediaConfig&&this.sendStartRelayMessage(this.prevChannelMediaConfig).catch((e=>{this.state!==BR.RELAY_STATE_IDLE&&(oI.error("auto restart channel media relay failed",e.toString()),this.errorCode=UR.SERVER_CONNECTION_LOST,this.state=BR.RELAY_STATE_FAILURE)}))})),this.joinInfo=e,this.clientId=t,this.sid=sT(),this.signal=new JG(this.joinInfo,this.clientId,n),this.httpRetryConfig=r,this._resolution=o}async startChannelMediaRelay(e){if(this.state!==BR.RELAY_STATE_IDLE)throw new pI(lw.INVALID_OPERATION);this.state=BR.RELAY_STATE_CONNECTING,await this.connect(),oI.debug("[".concat(this.clientId,"] startChannelMediaRelay: connect success"));try{await this.sendStartRelayMessage(e)}catch(t){if(t.data&&t.data.serverResponse&&"SetSourceChannel"===t.data.serverResponse.command)throw new pI(lw.CROSS_CHANNEL_FAILED_JOIN_SRC);if(t.data&&t.data.serverResponse&&"SetDestChannelStatus"===t.serverResponse.command)throw new pI(lw.CROSS_CHANNEL_FAILED_JOIN_DEST);if(t.data&&t.data.serverResponse&&"StartPacketTransfer"===t.serverResponse.command)throw new pI(lw.CROSS_CHANNEL_FAILED_PACKET_SENT_TO_DEST);throw t}this.prevChannelMediaConfig=e}async updateChannelMediaRelay(e){if(this.state!==BR.RELAY_STATE_RUNNING)throw new pI(lw.INVALID_OPERATION);await this.sendUpdateMessage(e),this.prevChannelMediaConfig=e}async setVideoProfile(e){if(this._resolution=e,this.state!==BR.RELAY_STATE_RUNNING)throw new pI(lw.INVALID_OPERATION);const t=this.genMessage(DR.SetVideoProfile);await this.signal.request(t),oI.debug("[".concat(this.clientId,"] startChannelMediaRelay: setVideoProfile success"))}async stopChannelMediaRelay(){await this.sendStopRelayMessage(),oI.debug("[".concat(this.clientId,"] stopChannelMediaRelay: send stop message success")),this.state=BR.RELAY_STATE_IDLE,this.dispose()}dispose(){oI.debug("[".concat(this.clientId,"] disposeChannelMediaRelay")),this.cancelToken.cancel(),this.cancelToken=yS.CancelToken.source(),this.state=BR.RELAY_STATE_IDLE,this.emit("dispose"),this.signal.dispose(),this.prevChannelMediaConfig=void 0}async connect(){const e=await jM(this.joinInfo,this.cancelToken.token,this.httpRetryConfig);this.workerToken=e.workerToken,await this.signal.connect(e.addressList),this.emit("event",LR.NETWORK_CONNECTED),this.signal.on("status",this.onStatus),this.signal.on("reconnecting",this.onReconnect)}async sendStartRelayMessage(e){const t=this.genMessage(DR.StopPacketTransfer);await this.signal.request(t),await this.signal.waitStatus("Normal Quit"),oI.debug("[".concat(this.clientId,"] startChannelMediaRelay: StopPacketTransfer success"));const n=this.genMessage(DR.SetSdkProfile,e);await this.signal.request(n),oI.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSdkProfile success"));const r=this.genMessage(DR.SetSourceChannel,e);await this.signal.request(r),await this.signal.waitStatus("SetSourceChannelStatus"),this.emit("event",LR.PACKET_JOINED_SRC_CHANNEL),oI.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceChannel success"));const o=this.genMessage(DR.SetSourceUserId,e);await this.signal.request(o),oI.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetSourceUserId success"));const i=this.genMessage(DR.SetDestChannel,e);await this.signal.request(i),await this.signal.waitStatus("SetDestChannelStatus"),this.emit("event",LR.PACKET_JOINED_DEST_CHANNEL),oI.debug("[".concat(this.clientId,"] startChannelMediaRelay: SetDestChannel success"));const a=this.genMessage(DR.StartPacketTransfer,e);await this.signal.request(a),this.emit("event",LR.PACKET_SENT_TO_DEST_CHANNEL),this.state=BR.RELAY_STATE_RUNNING,oI.debug("[".concat(this.clientId,"] startChannelMediaRelay: StartPacketTransfer success")),this.setVideoProfile(this._resolution)}async sendUpdateMessage(e){const t=this.genMessage(DR.UpdateDestChannel,e);await this.signal.request(t),this.emit("event",LR.PACKET_UPDATE_DEST_CHANNEL),oI.debug("[".concat(this.clientId,"] sendUpdateMessage: UpdateDestChannel success"))}async sendStopRelayMessage(){const e=this.genMessage(DR.StopPacketTransfer);await this.signal.request(e),oI.debug("[".concat(this.clientId,"] sendStopRelayMessage: StopPacketTransfer success"))}genMessage(e,t){const n=[],r=[],o=[];this.requestId+=1;const i={appId:this.joinInfo.appId,cname:this.joinInfo.cname,uid:this.joinInfo.uid.toString(),sdkVersion:NT,sid:this.sid,ts:Date.now(),requestId:this.requestId,seq:this.requestId,allocate:!0,clientRequest:{}};"4.22.2"===i.sdkVersion&&(i.sdkVersion="0.0.1");let a=null,s=null;switch(e){case DR.SetSdkProfile:return i.clientRequest={command:"SetSdkProfile",type:"multi_channel"},i;case DR.SetSourceChannel:if(s=t&&t.getSrcChannelMediaInfo(),!s)throw new pI(lw.UNEXPECTED_ERROR,"can not find source config");return i.clientRequest={command:"SetSourceChannel",uid:"0",channelName:s.channelName,token:s.token||this.joinInfo.appId},i;case DR.SetSourceUserId:if(s=t&&t.getSrcChannelMediaInfo(),!s)throw new pI(lw.UNEXPECTED_ERROR,"can not find source config");return i.clientRequest={command:"SetSourceUserId",uid:s.uid+""},i;case DR.SetDestChannel:if(a=t&&t.getDestChannelMediaInfo(),!a)throw new pI(lw.UNEXPECTED_ERROR,"can not find dest config");return a.forEach((e=>{n.push(e.channelName),r.push(e.uid+""),o.push(e.token||this.joinInfo.appId)})),i.clientRequest={command:"SetDestChannel",channelName:n,uid:r,token:o},i;case DR.StartPacketTransfer:return i.clientRequest={command:"StartPacketTransfer"},i;case DR.Reconnect:return i.clientRequest={command:"Reconnect"},i;case DR.StopPacketTransfer:return i.clientRequest={command:"StopPacketTransfer"},i;case DR.UpdateDestChannel:if(a=t&&t.getDestChannelMediaInfo(),!a)throw new pI(lw.UNEXPECTED_ERROR,"can not find dest config");return a.forEach((e=>{n.push(e.channelName),r.push(e.uid+""),o.push(e.token||this.joinInfo.appId)})),i.clientRequest={command:"UpdateDestChannel",channelName:n,uid:r,token:o},i;case DR.SetVideoProfile:i.clientRequest={command:"SetVideoProfile",width:this._resolution.width,height:this._resolution.height}}return i}}const ZG={name:"ChannelMediaRelay",create:function(e){return new XG(e.joinInfo,e.clientId,e.websocketRetryConfig||vT,e.httpRetryConfig||vT,e.resolution)}};function eK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tK(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eK(Object(n),!0).forEach((function(t){Ov(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eK(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class nK extends ww{constructor(e,t,n,r){super(),Ov(this,"spec",void 0),Ov(this,"token",void 0),Ov(this,"websocket",void 0),Ov(this,"pingpongTimer",void 0),Ov(this,"reconnectMode","retry"),Ov(this,"serviceMode",void 0),Ov(this,"reqId",0),Ov(this,"commandReqId",0),Ov(this,"handleWebSocketOpen",(()=>{this.reconnectMode="retry",this.startPingPong()})),Ov(this,"handleWebSocketMessage",(e=>{if(!e.data)return;const t=JSON.parse(e.data);t.requestId?this.emit("@".concat(t.requestId,"-").concat(t.sid),t):(AI.workerEvent(this.spec.sid,{actionType:"status",serverCode:t.code,workerType:this.serviceMode===SR.TRANSCODE?1:2}),this.emit(OR.PUBLISH_STREAM_STATUS,t))})),this.spec=t,this.token=e,this.serviceMode=r,this.websocket=new OO("live-streaming",n),this.websocket.on(yR.CONNECTED,this.handleWebSocketOpen),this.websocket.on(yR.ON_MESSAGE,this.handleWebSocketMessage),this.websocket.on(yR.REQUEST_NEW_URLS,((e,t)=>{$w(this,OR.REQUEST_NEW_ADDRESS).then(e).catch(t)})),this.websocket.on(yR.RECONNECTING,(()=>{this.websocket.reconnectMode=this.reconnectMode}))}init(e){return this.websocket.init(e)}async request(e,t,n,r){this.reqId+=1,"request"===e&&(this.commandReqId+=1);const o=this.commandReqId,i=this.reqId;if(!i||!this.websocket)throw new pI(lw.UNEXPECTED_ERROR);const a=tK({command:e,sdkVersion:"4.22.2"===NT?"0.0.1":NT,seq:i,requestId:i,allocate:n,cname:this.spec.cname,appId:this.spec.appId,sid:this.spec.sid,uid:this.spec.uid.toString(),ts:Math.floor(Date.now()/1e3)},t);if("closed"===this.websocket.state)throw new pI(lw.WS_DISCONNECT);const s=()=>new MA(((e,t)=>{this.websocket.once(yR.CLOSED,(()=>t(new pI(lw.WS_ABORT)))),this.websocket.once(yR.CONNECTED,e)}));"connected"!==this.websocket.state&&await s(),a.clientRequest&&(a.clientRequest.workerToken=this.token);const c=new MA(((e,t)=>{const n=()=>{t(new pI(lw.WS_ABORT))};this.websocket.once(yR.RECONNECTING,n),this.websocket.once(yR.CLOSED,n),this.once("@".concat(i,"-").concat(this.spec.sid),(t=>{e(t)}))}));r&&AI.workerEvent(this.spec.sid,tK(tK({},r),{},{requestId:o,actionType:"request",payload:JSON.stringify(t.clientRequest),serverCode:0,code:0}));const l=Date.now();this.websocket.sendMessage(a);let u=null;try{u=await c}catch(d){if("closed"===this.websocket.state)throw d;return await s(),await this.request(e,t,n)}return r&&AI.workerEvent(this.spec.sid,tK(tK({},r),{},{requestId:o,actionType:"response",payload:JSON.stringify(u.serverResponse),serverCode:u.code,success:200===u.code,responseTime:Date.now()-l})),200!==u.code&&this.handleResponseError(u),u}tryNextAddress(){this.reconnectMode="tryNext",this.websocket.reconnect("tryNext")}close(){const e="4.22.2"===NT?"0.0.1":NT;this.reqId+=1,"connected"===this.websocket.state?(this.websocket.sendMessage({command:"request",appId:this.spec.appId,cname:this.spec.cname,uid:this.spec.uid.toString(),sdkVersion:e,sid:this.spec.sid,seq:this.reqId,ts:Math.floor(Date.now()/1e3),requestId:this.reqId,clientRequest:{command:"DestroyWorker"}}),this.websocket.close(!1,!0)):this.websocket.close(!1),this.pingpongTimer&&(window.clearInterval(this.pingpongTimer),this.pingpongTimer=void 0)}handleResponseError(e){switch(e.code){case kR.LIVE_STREAM_RESPONSE_ALREADY_EXISTS_STREAM:return void oI.warning("live stream response already exists stream");case kR.LIVE_STREAM_RESPONSE_TRANSCODING_PARAMETER_ERROR:case kR.LIVE_STREAM_RESPONSE_BAD_STREAM:case kR.LIVE_STREAM_RESPONSE_WM_PARAMETER_ERROR:return new pI(lw.LIVE_STREAMING_INVALID_ARGUMENT,"",{code:e.code}).throw();case kR.LIVE_STREAM_RESPONSE_WM_WORKER_NOT_EXIST:if("UnpublishStream"===e.serverResponse.command)return;throw new pI(lw.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case kR.LIVE_STREAM_RESPONSE_NOT_AUTHORIZED:return new pI(lw.LIVE_STREAMING_PUBLISH_STREAM_NOT_AUTHORIZED,"",{code:e.code}).throw();case kR.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const t=new pI(lw.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE);return this.emit(OR.WARNING,t,e.serverResponse.url)}case kR.LIVE_STREAM_RESPONSE_REQUEST_TOO_OFTEN:{const t=new pI(lw.LIVE_STREAMING_WARN_FREQUENT_REQUEST);return this.emit(OR.WARNING,t,e.serverResponse.url)}case kR.LIVE_STREAM_RESPONSE_NOT_FOUND_PUBLISH:throw new pI(lw.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream response wm worker not exist",{retry:!0});case kR.LIVE_STREAM_RESPONSE_NOT_SUPPORTED:return new pI(lw.LIVE_STREAMING_TRANSCODING_NOT_SUPPORTED,"",{code:e.code}).throw();case kR.LIVE_STREAM_RESPONSE_MAX_STREAM_NUM:{const t=new pI(lw.LIVE_STREAMING_WARN_STREAM_NUM_REACH_LIMIT);return this.emit(OR.WARNING,t,e.serverResponse.url)}case kR.LIVE_STREAM_RESPONSE_INTERNAL_SERVER_ERROR:return new pI(lw.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:e.code}).throw();case kR.LIVE_STREAM_RESPONSE_RESOURCE_LIMIT:throw new pI(lw.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"live stream resource limit",{retry:!0,changeAddress:!0});case kR.LIVE_STREAM_RESPONSE_WORKER_LOST:case kR.LIVE_STREAM_RESPONSE_WORKER_QUIT:if("UnpublishStream"===e.serverResponse.command)return;throw new pI(lw.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case kR.ERROR_FAIL_SEND_MESSAGE:if("UnpublishStream"===e.serverResponse.command)return;if("UpdateTranscoding"===e.serverResponse.command||"ControlStream"===e.serverResponse.command)return new pI(lw.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{code:e.code}).throw();throw new pI(lw.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"error fail send message",{retry:!0,changeAddress:!0});case kR.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case kR.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case kR.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case kR.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:return new pI(lw.LIVE_STREAMING_CDN_ERROR,"",{code:e.code}).throw()}}startPingPong(){this.pingpongTimer&&window.clearInterval(this.pingpongTimer),this.pingpongTimer=window.setInterval((()=>{"connected"===this.websocket.state&&this.request("ping",{}).catch(cT)}),6e3)}}function rK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oK(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rK(Object(n),!0).forEach((function(t){Ov(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rK(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class iK extends ww{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vT,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:vT;super(),Ov(this,"onLiveStreamWarning",void 0),Ov(this,"onLiveStreamError",void 0),Ov(this,"spec",void 0),Ov(this,"retryTimeout",1e4),Ov(this,"connection",void 0),Ov(this,"httpRetryConfig",void 0),Ov(this,"wsRetryConfig",void 0),Ov(this,"streamingTasks",new Map),Ov(this,"isStartingStreamingTask",!1),Ov(this,"taskMutex",new _T("live-streaming")),Ov(this,"cancelToken",yS.CancelToken.source()),Ov(this,"transcodingConfig",void 0),Ov(this,"uapResponse",void 0),Ov(this,"lastTaskId",1),Ov(this,"statusError",new Map),this.spec=e,this.httpRetryConfig=n,this.wsRetryConfig=t}async setTranscodingConfig(e){const t=oK(oK({},RR),e);var n;66!==t.videoCodecProfile&&77!==t.videoCodecProfile&&100!==t.videoCodecProfile&&(oI.debug("[".concat(this.spec.clientId,"] set transcoding config, fix video codec profile: ").concat(t.videoCodecProfile," -> 100")),t.videoCodecProfile=100),t.transcodingUsers||(t.transcodingUsers=t.userConfigs),t.transcodingUsers&&(t.transcodingUsers=t.transcodingUsers.map((e=>oK(oK(oK({},wR),e),{},{zOrder:e.zOrder?e.zOrder+1:1})))),mw((n=t).width)||pw(n.width,"config.width",0,1e4),mw(n.height)||pw(n.height,"config.height",0,1e4),mw(n.videoBitrate)||pw(n.videoBitrate,"config.videoBitrate",1,1e6),mw(n.videoFrameRate)||pw(n.videoFrameRate,"config.videoFrameRate"),mw(n.lowLatency)||dw(n.lowLatency,"config.lowLatency"),mw(n.audioSampleRate)||Aw(n.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),mw(n.audioBitrate)||pw(n.audioBitrate,"config.audioBitrate",1,128),mw(n.audioChannels)||Aw(n.audioChannels,"config.audioChannels",[1,2,3,4,5]),mw(n.videoGop)||pw(n.videoGop,"config.videoGop"),mw(n.videoCodecProfile)||Aw(n.videoCodecProfile,"config.videoCodecProfile",[66,77,100]),mw(n.userCount)||pw(n.userCount,"config.userCount",0,17),mw(n.backgroundColor)||pw(n.backgroundColor,"config.backgroundColor",0,16777215),mw(n.userConfigExtraInfo)||fw(n.userConfigExtraInfo,"config.userConfigExtraInfo",0,4096,!1),n.transcodingUsers&&!mw(n.transcodingUsers)&&(gw(n.transcodingUsers,"config.transcodingUsers"),n.transcodingUsers.forEach(((e,t)=>{CR(e.uid),mw(e.x)||pw(e.x,"transcodingUser[".concat(t,"].x"),0,1e4),mw(e.y)||pw(e.y,"transcodingUser[".concat(t,"].y"),0,1e4),mw(e.width)||pw(e.width,"transcodingUser[".concat(t,"].width"),0,1e4),mw(e.height)||pw(e.height,"transcodingUser[".concat(t,"].height"),0,1e4),mw(e.zOrder)||pw(e.zOrder-1,"transcodingUser[".concat(t,"].zOrder"),0,100),mw(e.alpha)||pw(e.alpha,"transcodingUser[".concat(t,"].alpha"),0,1,!1)}))),mw(n.watermark)||IR(n.watermark,"watermark"),mw(n.backgroundImage)||IR(n.backgroundImage,"backgroundImage"),n.images&&!mw(n.images)&&(gw(n.images,"config.images"),n.images.forEach(((e,t)=>{IR(e,"images[".concat(t,"]"))})));const r=[];t.images&&r.push(...t.images.map((e=>oK(oK(oK({},TR),e),{},{zOrder:255})))),t.backgroundImage&&(r.push(oK(oK(oK({},TR),t.backgroundImage),{},{zOrder:0})),delete t.backgroundImage),t.watermark&&(r.push(oK(oK(oK({},TR),t.watermark),{},{zOrder:255})),delete t.watermark),t.images=r,t.transcodingUsers&&(t.userConfigs=t.transcodingUsers.map((e=>oK({},e))),t.userCount=t.transcodingUsers.length,delete t.transcodingUsers);const o=(t.userConfigs||[]).map((e=>"number"==typeof e.uid?MA.resolve(e.uid):xM(e.uid,this.spec,this.cancelToken.token,this.httpRetryConfig)));if((await MA.all(o)).forEach(((e,n)=>{t.userConfigs&&t.userConfigs[n]&&(t.userConfigs[n].uid=e)})),this.transcodingConfig=t,this.connection)try{var i;const e=await this.connection.request("request",{clientRequest:{command:"UpdateTranscoding",transcodingConfig:this.transcodingConfig}},!1,{command:"UpdateTranscoding",workerType:1,requestByUser:!0,tid:Array.from(XO(i=this.streamingTasks).call(i)).map((e=>e.taskId)).join("#")});oI.debug("[".concat(this.spec.clientId,"] update live transcoding config success, code: ").concat(e.code,", config:"),JSON.stringify(this.transcodingConfig))}catch(n){if(!n.data||!n.data.retry)throw n;n.data.changeAddress&&this.connection.tryNextAddress(),this.streamingTasks.forEach((e=>{oI.warning("[".concat(this.spec.clientId,"] live streaming receive error"),n.toString(),"try to republish",e.url),this.startLiveStreamingTask(e.url,e.mode,n).then((()=>{oI.debug("[".concat(this.spec.clientId,"] live streaming republish ").concat(e.url," success"))})).catch((t=>{oI.error("[".concat(this.spec.clientId,"] live streaming republish failed"),e.url,t.toString()),this.onLiveStreamError&&this.onLiveStreamError(e.url,t)}))}))}}async startLiveStreamingTask(e,t,n){if(!this.transcodingConfig&&t===SR.TRANSCODE)throw new pI(lw.INVALID_OPERATION,"[LiveStreaming] no transcoding config found, can not start transcoding streaming task");const r={command:"PublishStream",ts:Date.now(),url:e,uid:this.spec.uid.toString(),autoDestroyTime:100,acceptImageTimeout:!0};oI.debug("[".concat(this.spec.clientId,"] start live streaming ").concat(e,", mode: ").concat(t));const o=await this.taskMutex.lock();if(!this.connection&&n)return void o();if(this.streamingTasks.get(e)&&!n)return o(),new pI(lw.LIVE_STREAMING_TASK_CONFLICT).throw();try{this.connection||(this.connection=await this.connect(t))}catch(a){throw o(),a}t===SR.TRANSCODE&&(r.transcodingConfig=oK({},this.transcodingConfig)),this.uapResponse&&this.uapResponse.vid&&(r.vid=this.uapResponse.vid),this.isStartingStreamingTask=!0;const i=this.lastTaskId++;try{const a=new MA(((t,r)=>{iT(this.retryTimeout).then((()=>{if(n)return r(n);const t=this.statusError.get(e);return t?(this.statusError.delete(e),r(t)):void 0}))})),s=await MA.race([this.connection.request("request",{clientRequest:r},!0,{url:e,command:"PublishStream",workerType:t===SR.TRANSCODE?1:2,requestByUser:!n,tid:i.toString()}),a]);this.isStartingStreamingTask=!1,oI.debug("[".concat(this.spec.clientId,"] live streaming started, code: ").concat(s.code)),this.streamingTasks.set(e,{clientRequest:r,mode:t,url:e,taskId:i}),o()}catch(s){if(o(),this.isStartingStreamingTask=!1,!s.data||!s.data.retry||n)throw s;return s.data.changeAddress?(this.connection.tryNextAddress(),await this.startLiveStreamingTask(e,t,s)):await this.startLiveStreamingTask(e,t,s)}}stopLiveStreamingTask(e){return new MA(((t,n)=>{const r=this.streamingTasks.get(e);if(!r||!this.connection)return new pI(lw.UNEXPECTED_ERROR,"can not find streaming task to stop").throw();const o=r.mode;r.abortTask=()=>{oI.debug("[".concat(this.spec.clientId,"] stop live streaming success(worker exception)")),this.streamingTasks.delete(e),t()},this.connection.request("request",{clientRequest:{command:"UnpublishStream",url:r.url}},!1,{url:e,command:"UnPublishStream",workerType:o===SR.TRANSCODE?1:2,requestByUser:!0,tid:(this.lastTaskId++).toString()}).then((n=>{oI.debug("[".concat(this.spec.clientId,"] stop live streaming success, code: ").concat(n.code)),this.streamingTasks.delete(e),0===this.streamingTasks.size&&(this.connection&&this.connection.close(),this.connection=void 0),t()})).catch(n)}))}resetAllTask(){var e;const t=Array.from(XO(e=this.streamingTasks).call(e));this.terminate();for(const n of t)this.startLiveStreamingTask(n.url,n.mode).catch((e=>{this.onLiveStreamError&&this.onLiveStreamError(n.url,e)}))}terminate(){this.cancelToken&&this.cancelToken.cancel(),this.streamingTasks=new Map,this.isStartingStreamingTask=!1,this.statusError=new Map,this.cancelToken=yS.CancelToken.source(),this.uapResponse=void 0,this.connection&&this.connection.close(),this.connection=void 0}async connect(e){if(this.connection)throw new pI(lw.UNEXPECTED_ERROR,"live streaming connection has already connected");const t=await $w(this,NR.REQUEST_WORKER_MANAGER_LIST,e);return this.uapResponse=t,this.connection=new nK(t.workerToken,this.spec,this.wsRetryConfig,e),this.connection.on(OR.WARNING,((e,t)=>this.onLiveStreamWarning&&this.onLiveStreamWarning(t,e))),this.connection.on(OR.PUBLISH_STREAM_STATUS,(e=>this.handlePublishStreamServer(e))),this.connection.on(OR.REQUEST_NEW_ADDRESS,((t,n)=>{if(!this.connection)return n(new pI(lw.UNEXPECTED_ERROR,"can not get new live streaming address list"));$w(this,NR.REQUEST_WORKER_MANAGER_LIST,e).then((e=>{this.uapResponse=e,t(e.addressList)})).catch(n)})),await this.connection.init(t.addressList),this.connection}handlePublishStreamServer(e){const t=e.serverStatus&&e.serverStatus.url||"empty_url",n=this.streamingTasks.get(t),r=e.reason;switch(e.code){case kR.PUBLISH_STREAM_STATUS_ERROR_PUBLISH_BROKEN:case kR.PUBLISH_STREAM_STATUS_ERROR_RTMP_CONNECT:case kR.PUBLISH_STREAM_STATUS_ERROR_RTMP_HANDSHAKE:case kR.PUBLISH_STREAM_STATUS_ERROR_RTMP_PUBLISH:{const r=new pI(lw.LIVE_STREAMING_CDN_ERROR,"",{code:e.code});if(n)return oI.error(r.toString()),this.onLiveStreamError&&this.onLiveStreamError(t,r);if(!this.isStartingStreamingTask)return;this.statusError.set(t,r)}case kR.LIVE_STREAM_RESPONSE_FAILED_LOAD_IMAGE:{const e=new pI(lw.LIVE_STREAMING_WARN_FAILED_LOAD_IMAGE,r);return this.onLiveStreamWarning&&this.onLiveStreamWarning(t,e)}case kR.LIVE_STREAM_RESPONSE_WORKER_LOST:case kR.LIVE_STREAM_RESPONSE_WORKER_QUIT:{var o;if(!this.connection)return;this.connection.tryNextAddress();const t=Array.from(XO(o=this.streamingTasks).call(o));for(const n of t)n.abortTask?n.abortTask():(oI.warning("[".concat(this.spec.clientId,"] publish stream status code"),e.code,"try to republish",n.url),this.startLiveStreamingTask(n.url,n.mode,new pI(lw.LIVE_STREAMING_INTERNAL_SERVER_ERROR,"",{code:e.code})).then((()=>{oI.debug("[".concat(this.spec.clientId,"] republish live stream success"),n.url)})).catch((e=>{oI.error(e.toString()),this.onLiveStreamError&&this.onLiveStreamError(n.url,e)})));return}}}hasUrl(e){return this.streamingTasks.has(e)}}const aK={name:"LiveStreaming",create:function(e){return new iK(e.joinInfo,e.websocketRetryConfig||vT,e.httpRetryConfig||vT)}};function sK(e){let t=_K();return function(e,t){let n=e.appId;void 0!==n&&(PK(t,10),wK(t,n));let r=e.cid;void 0!==r&&(PK(t,16),PK(t,r));let o=e.cname;void 0!==o&&(PK(t,26),wK(t,o));let i=e.deviceId;void 0!==i&&(PK(t,34),wK(t,i));let a=e.elapse;void 0!==a&&(PK(t,40),DK(t,a));let s=e.fileSize;void 0!==s&&(PK(t,48),DK(t,gK(s)));let c=e.height;void 0!==c&&(PK(t,56),DK(t,gK(c)));let l=e.jpg;void 0!==l&&(PK(t,66),PK(t,l.length),function(e,t){let n=bK(e,t.length);e.bytes.set(t,n)}(t,l));let u=e.networkType;void 0!==u&&(PK(t,72),DK(t,gK(u)));let d=e.osType;void 0!==d&&(PK(t,80),DK(t,gK(d)));let A=e.requestId;void 0!==A&&(PK(t,90),wK(t,A));let p=e.sdkVersion;void 0!==p&&(PK(t,98),wK(t,p));let h=e.sequence;void 0!==h&&(PK(t,104),DK(t,gK(h)));let f=e.sid;void 0!==f&&(PK(t,114),wK(t,f));let g=e.timestamp;void 0!==g&&(PK(t,120),DK(t,g));let m=e.uid;void 0!==m&&(PK(t,128),PK(t,m));let _=e.vid;void 0!==_&&(PK(t,136),PK(t,_));let E=e.width;void 0!==E&&(PK(t,144),DK(t,gK(E)));let v=e.service;void 0!==v&&(PK(t,152),PK(t,v));let y=e.callbackData;void 0!==y&&(PK(t,162),wK(t,y));let b=e.jpgEncryption;void 0!==b&&(PK(t,168),PK(t,b));let C=e.requestType;void 0!==C&&(PK(t,176),PK(t,C));let S=e.scorePorn;void 0!==S&&(PK(t,185),NK(t,S));let w=e.scoreSexy;void 0!==w&&(PK(t,193),NK(t,w));let T=e.scoreNeutral;void 0!==T&&(PK(t,201),NK(t,T));let I=e.scene;void 0!==I&&(PK(t,208),PK(t,I));let R=e.ossFilePrefix;void 0!==R&&(PK(t,218),wK(t,R));let O=e.serviceVendor;if(void 0!==O)for(let N of O){PK(t,226);let e=_K();uK(N,e),PK(t,e.limit),TK(t,e),EK(e)}}(e,t),function(e){let t=e.bytes,n=e.limit;return t.length===n?t:t.subarray(0,n)}(t)}function cK(e){return function(e){let t={};e:for(;!yK(e);){let n=kK(e);switch(n>>>3){case 0:break e;case 1:t.code=kK(e);break;case 2:t.msg=SK(e,kK(e));break;case 3:{let n=dK(e);t.data=lK(e),e.limit=n;break}default:AK(e,7&n)}}return t}({bytes:t=e,offset:0,limit:t.length});var t}function lK(e){let t={};e:for(;!yK(e);){let n=kK(e);switch(n>>>3){case 0:break e;case 1:t.requestId=SK(e,kK(e));break;case 2:t.requestType=kK(e)>>>0;break;case 3:t.scorePorn=OK(e);break;case 4:t.scoreSexy=OK(e);break;case 5:t.scoreNeutral=OK(e);break;case 6:t.requestScene=kK(e)>>>0;break;case 7:t.scene=kK(e)>>>0;break;default:AK(e,7&n)}}return t}function uK(e,t){let n=e.service;void 0!==n&&(PK(t,8),PK(t,n));let r=e.vendor;void 0!==r&&(PK(t,16),PK(t,r));let o=e.token;void 0!==o&&(PK(t,26),wK(t,o));let i=e.callbackUrl;void 0!==i&&(PK(t,34),wK(t,i))}function dK(e){let t=kK(e),n=e.limit;return e.limit=e.offset+t,n}function AK(e,t){switch(t){case 0:for(;128&IK(e););break;case 2:vK(e,kK(e));break;case 5:vK(e,4);break;case 1:vK(e,8);break;default:throw new Error("Unimplemented type: "+t)}}let pK=new Float32Array(1);new Uint8Array(pK.buffer);let hK=new Float64Array(1),fK=new Uint8Array(hK.buffer);function gK(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}let mK=[];function _K(){const e=mK.pop();return e?(e.offset=e.limit=0,e):{bytes:new Uint8Array(64),offset:0,limit:0}}function EK(e){mK.push(e)}function vK(e,t){if(e.offset+t>e.limit)throw new Error("Skip past limit");e.offset+=t}function yK(e){return e.offset>=e.limit}function bK(e,t){let n=e.bytes,r=e.offset,o=e.limit,i=r+t;if(i>n.length){let t=new Uint8Array(2*i);t.set(n),e.bytes=t}return e.offset=i,i>o&&(e.limit=i),r}function CK(e,t){let n=e.offset;if(n+t>e.limit)throw new Error("Read past limit");return e.offset+=t,n}function SK(e,t){let n=CK(e,t),r=String.fromCharCode,o=e.bytes,i="",a="";for(let s=0;s<t;s++){let e,c,l,u,d=o[s+n];128&d?192==(224&d)?s+1>=t?a+=i:(e=o[s+n+1],128!=(192&e)?a+=i:(u=(31&d)<<6|63&e,u<128?a+=i:(a+=r(u),s++))):224==(240&d)?s+2>=t?a+=i:(e=o[s+n+1],c=o[s+n+2],32896!=(49344&(e|c<<8))?a+=i:(u=(15&d)<<12|(63&e)<<6|63&c,u<2048||u>=55296&&u<=57343?a+=i:(a+=r(u),s+=2))):240==(248&d)?s+3>=t?a+=i:(e=o[s+n+1],c=o[s+n+2],l=o[s+n+3],8421504!=(12632256&(e|c<<8|l<<16))?a+=i:(u=(7&d)<<18|(63&e)<<12|(63&c)<<6|63&l,u<65536||u>1114111?a+=i:(u-=65536,a+=r(55296+(u>>10),56320+(1023&u)),s+=3))):a+=i:a+=r(d)}return a}function wK(e,t){let n=t.length,r=0;for(let a=0;a<n;a++){let e=t.charCodeAt(a);e>=55296&&e<=56319&&a+1<n&&(e=(e<<10)+t.charCodeAt(++a)-56613888),r+=e<128?1:e<2048?2:e<65536?3:4}PK(e,r);let o=bK(e,r),i=e.bytes;for(let a=0;a<n;a++){let e=t.charCodeAt(a);e>=55296&&e<=56319&&a+1<n&&(e=(e<<10)+t.charCodeAt(++a)-56613888),e<128?i[o++]=e:(e<2048?i[o++]=e>>6&31|192:(e<65536?i[o++]=e>>12&15|224:(i[o++]=e>>18&7|240,i[o++]=e>>12&63|128),i[o++]=e>>6&63|128),i[o++]=63&e|128)}}function TK(e,t){let n=bK(e,t.limit),r=e.bytes,o=t.bytes;for(let i=0,a=t.limit;i<a;i++)r[i+n]=o[i]}function IK(e){return e.bytes[CK(e,1)]}function RK(e,t){let n=bK(e,1);e.bytes[n]=t}function OK(e){let t=CK(e,8),n=e.bytes;return fK[0]=n[t++],fK[1]=n[t++],fK[2]=n[t++],fK[3]=n[t++],fK[4]=n[t++],fK[5]=n[t++],fK[6]=n[t++],fK[7]=n[t++],hK[0]}function NK(e,t){let n=bK(e,8),r=e.bytes;hK[0]=t,r[n++]=fK[0],r[n++]=fK[1],r[n++]=fK[2],r[n++]=fK[3],r[n++]=fK[4],r[n++]=fK[5],r[n++]=fK[6],r[n++]=fK[7]}function kK(e){let t,n=0,r=0;do{t=IK(e),n<32&&(r|=(127&t)<<n),n+=7}while(128&t);return r}function PK(e,t){for(t>>>=0;t>=128;)RK(e,127&t|128),t>>>=7;RK(e,t)}function DK(e,t){let n=t.low>>>0,r=(t.low>>>28|t.high<<4)>>>0,o=t.high>>>24,i=0===o?0===r?n<16384?n<128?1:2:n<1<<21?3:4:r<16384?r<128?5:6:r<1<<21?7:8:o<128?9:10,a=bK(e,i),s=e.bytes;switch(i){case 10:s[a+9]=o>>>7&1;case 9:s[a+8]=9!==i?128|o:127&o;case 8:s[a+7]=8!==i?r>>>21|128:r>>>21&127;case 7:s[a+6]=7!==i?r>>>14|128:r>>>14&127;case 6:s[a+5]=6!==i?r>>>7|128:r>>>7&127;case 5:s[a+4]=5!==i?128|r:127&r;case 4:s[a+3]=4!==i?n>>>21|128:n>>>21&127;case 3:s[a+2]=3!==i?n>>>14|128:n>>>14&127;case 2:s[a+1]=2!==i?n>>>7|128:n>>>7&127;case 1:s[a]=1!==i?128|n:127&n}}function LK(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const BK=new Map([["moderation",1],["supervise",2]]);function UK(e){return{low:e|=0,high:e>>31,unsigned:e>=0}}class MK extends ww{get connectionState(){return this._connectionState}set connectionState(e){if(this._connectionState===e)return;const t=this._connectionState;this._connectionState=e,this.emit(nO.CONNECTION_STATE_CHANGE,t,e)}get inspectType(){return this._inspectType}set inspectType(e){var t;this._inspectMode=Kr(t=e.map((e=>BK.get(e)||0))).call(t,((e,t)=>e+t)),this._inspectType=e}get quality(){return this._quality}set quality(e){this._quality=e>1?1:e<.1?.1:e,this.qualityTimer&&(window.clearTimeout(this.qualityTimer),this.qualityTimer=null),this._quality>=1||(this.qualityTimer=window.setTimeout((()=>{this.quality=this._quality/this.qualityRatio}),6e4))}constructor(e){super(),Ov(this,"name","AgoraRTCVideoContentInspect"),Ov(this,"_connectionState",eO.CONNECTING),Ov(this,"_innerConnectionState",void 0),Ov(this,"sequence",0),Ov(this,"inspectStartTime",void 0),Ov(this,"workerManagerConnection",void 0),Ov(this,"workerConnection",void 0),Ov(this,"workerMessageLengthLimit",void 0),Ov(this,"inspectIntervalMinimum",void 0),Ov(this,"qualityRatio",void 0),Ov(this,"_connectInfo",void 0),Ov(this,"_cancelTokenSource",yS.CancelToken.source()),Ov(this,"_retryConfig",void 0),Ov(this,"wmSequence",0),Ov(this,"inspectInterval",void 0),Ov(this,"inspectTimer",null),Ov(this,"ossFilePrefix",void 0),Ov(this,"extraInfo",void 0),Ov(this,"_inspectType",void 0),Ov(this,"_inspectMode",void 0),Ov(this,"_quality",1),Ov(this,"qualityTimer",null),Ov(this,"_inspectId",void 0),Ov(this,"_needWorkUrlOnly",!1),Ov(this,"inspectImage",(()=>{if(this.connectionState!==eO.CONNECTED)throw new pI(lw.OPERATION_ABORTED,"content inspect service connection status is ".concat(this.connectionState));this.inspectTimer&&(window.clearInterval(this.inspectTimer),this.inspectTimer=null),this.inspectTimer=window.setInterval((()=>{this.connectionState===eO.CONNECTED?this.requestToInspectImage():oI.debug("[".concat(this._inspectId,"] Inspect State is not connected , "),this.connectionState)}),this.inspectInterval<this.inspectIntervalMinimum?this.inspectIntervalMinimum:this.inspectInterval),this.requestToInspectImage()})),this._inspectId=aT(5,"inspect-"),this.workerMessageLengthLimit=xT("VIDEO_INSPECT_WORKER_MESSAGE_LENGTH_LIMIT"),this.inspectIntervalMinimum=xT("VIDEO_INSPECT_INTERVAL_MINIMUM"),this.qualityRatio=xT("VIDEO_INSPECT_QUALITY_RATIO"),this.inspectInterval=e.interval,this.ossFilePrefix=e.ossFilePrefix,this.extraInfo=e.extraInfo,this.inspectType=e.inspectType,this.inspectStartTime=Number(Date.now()),this.workerManagerConnection=new OO("worker-manager-"+this._inspectId,vT),this.on(nO.STATE_CHANGE,((e,t)=>{this._innerConnectionState=e,oI.debug("[".concat(this._inspectId,"] Inspect operation :").concat(tO[e]," ").concat(t||""))})),this.handleWorkerManagerEvents(),this.workerConnection=new OO("worker-"+this._inspectId,vT),this.handleWorkerEvents()}async init(e,t){this.emit(nO.STATE_CHANGE,tO.CONNECT_AP),this._connectInfo=e;const n=this._cancelTokenSource.token;return this._retryConfig=t,new MA(((r,o)=>{this.on(nO.CONNECTION_STATE_CHANGE,((e,t)=>{t===eO.CONNECTED&&r()})),this.requestAP(e,n,t).then((e=>{this.connectWorkerManager(e)})).catch((e=>{o(e)}))}))}async requestAP(e,t,n){const r=xT("WEBCS_DOMAIN").map((e=>"https://".concat(e,"/api/v1"))),o=await function(e,t,n,r){let{appId:o,areaCode:i,cname:a,sid:s,token:c,uid:l}=t;PM++;const u="image_moderation_api",d={service_name:u,json_body:JSON.stringify({appId:o,areaCode:i,cname:a,command:"allocateEdge",requestId:PM,seq:PM,sid:s,token:c,ts:Date.now(),uid:l+""})};let A,p,h=e[0];return bT((async()=>{A=Date.now();const e=await uM(h,{data:d,cancelToken:n,headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"61"},params:{action:"wrtc_gateway"}});if(p=Date.now()-A,0!==e.code){const t=new pI(lw.UNEXPECTED_RESPONSE,"image inspect ap error, code"+e.code,{retry:!0,responseTime:p});throw oI.error(t.toString()),t}const t=JSON.parse(e.json_body);if(200!==t.code){const e=new pI(lw.UNEXPECTED_RESPONSE,"image inspect ap error, code: ".concat(t.code,", reason: ").concat(t.reason),{code:t.code,responseTime:p});throw oI.error(e.toString()),e}if(!t.servers||!Array.isArray(t.servers)||0===t.servers.length){const e=new pI(lw.UNEXPECTED_RESPONSE,"image inspect ap empty server",{code:t.code,responseTime:p});throw oI.error(e.toString()),e}const r=xT("VIDEO_INSPECT_WORKER_MANAGER_HOST"),o=xT("VIDEO_INSPECT_WORKER_MANAGER_PORT");return{addressList:t.servers.map((e=>{let{address:t,wss:n}=e;if(t&&n)return"wss://".concat(t.replace(/\./g,"-"),".").concat(r,":").concat(o||n)})).filter((e=>!!e)),workerToken:t.workerToken,vid:t.vid,responseTime:p}}),((t,n)=>(AI.apworkerEvent(s,{success:!0,sc:200,serviceName:u,responseDetail:JSON.stringify(t.addressList),firstSuccess:0===n,responseTime:p,serverIp:e[n%e.length]}),!1)),((t,n)=>(AI.apworkerEvent(s,{success:!1,sc:t.data&&t.data.code||200,serviceName:u,responseTime:p,serverIp:e[n%e.length]}),!!(t.code!==lw.OPERATION_ABORTED&&t.code!==lw.UNEXPECTED_RESPONSE||t.data&&t.data.retry)&&(h=e[(n+1)%e.length],!0))),r)}(r,e,t,n);this.emit(nO.STATE_CHANGE,tO.AP_CONNECTED);const{addressList:i}=o;return this.wmSequence++,i}async connectWorkerManager(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._needWorkUrlOnly=t,this.emit(nO.STATE_CHANGE,tO.CONNECT_WORKER_MANAGER),await this.workerManagerConnection.init(e,1e4)}async connectWorker(e){await this.workerConnection.init([e])}handleWorkerManagerEvents(){this.workerManagerConnection.on(yR.CONNECTED,(async()=>{this.emit(nO.STATE_CHANGE,tO.WORKER_MANAGER_CONNECTED,this.workerManagerConnection.url),this.workerManagerConnection.sendMessage({appId:this._connectInfo.appId,cname:this._connectInfo.cname,uid:this._connectInfo.uid+"",sdkVersion:"4.22.2",sid:this._connectInfo.sid,seq:this.wmSequence,ts:Number(Date.now()),requestId:Math.floor(1e12*Math.random()),allocate:!0,clientRequest:{command:"join"}},!0)})),this.workerManagerConnection.on(yR.CLOSED,(()=>{this._innerConnectionState<tO.GET_WORKER_MANAGER_RESPONSE&&oI.debug("[".concat(this._inspectId,"] Inspect worker manager is closed before connecting worker"))})),this.workerManagerConnection.on(yR.FAILED,(()=>{this._innerConnectionState<tO.GET_WORKER_MANAGER_RESPONSE&&oI.debug("[".concat(this._inspectId,"] Connecting inspect worker manager is failed before connecting worker"))})),this.workerManagerConnection.on(yR.RECONNECTING,(()=>{this._innerConnectionState<tO.GET_WORKER_MANAGER_RESPONSE&&oI.debug("[".concat(this._inspectId,"] Inspect worker manager is reconnecting before connecting worker"))})),this.workerManagerConnection.on(yR.ON_MESSAGE,(async e=>{this.emit(nO.STATE_CHANGE,tO.GET_WORKER_MANAGER_RESPONSE);const t=this.workerManagerConnection.url;this.workerManagerConnection.close();const n=JSON.parse(e.data);if(200!==n.code)throw oI.error("[".concat(this._inspectId,"] Unexpected code ").concat(n.code," from worker manager")),new pI(lw.UNEXPECTED_RESPONSE,"response code of worker is unexpected",n);if(!(n.serverResponse&&n.serverResponse.portWss&&t))throw oI.error("[".concat(this._inspectId,"] Unexpected content from worker manager : ").concat(JSON.stringify(n))),new pI(lw.UNEXPECTED_RESPONSE,"response content of worker is unexpected",n);{const e=xT("VIDEO_INSPECT_WORKER_PORT")||n.serverResponse.portWss,r=t.replace(/:\d+\/?$/,":".concat(e));this.emit(nO.STATE_CHANGE,tO.CONNECT_WORKER,r),this._needWorkUrlOnly?this.emit(nO.REQUEST_NEW_WORKER_URL,r):await this.connectWorker(r)}})),this.workerManagerConnection.on(yR.WILL_RECONNECT,((e,t,n)=>{n(e)})),this.workerManagerConnection.on(yR.REQUEST_NEW_URLS,((e,t)=>{this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then(e).catch(t)}))}handleWorkerEvents(){this.workerConnection.on(yR.CONNECTED,(async()=>{this.emit(nO.STATE_CHANGE,tO.WORKER_CONNECTED,this.workerConnection.url),this.connectionState=eO.CONNECTED})),this.workerConnection.on(yR.ON_MESSAGE,(async e=>{if(e.data instanceof ArrayBuffer){const n=cK(new Uint8Array(e.data));if(xT("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")&&oI.debug("[".concat(this._inspectId,"] Response message for worker of inspect content "),JSON.stringify(n)),200===n.code){if(Array.isArray(this.inspectType)&&1===this.inspectType.length&&"supervise"===this.inspectType[0])return void this.emit(nO.INSPECT_RESULT,void 0,void 0);if(n.data&&n.data.scorePorn&&n.data.scoreSexy&&n.data.scoreNeutral){var t;const e={porn:n.data.scorePorn,sexy:n.data.scoreSexy,neutral:n.data.scoreNeutral},r=Kr(t=Object.keys(e)).call(t,((t,n)=>e[t]>e[n]?t:n),"porn"),o=Object.keys(e).find((e=>e===r));this.emit(nO.INSPECT_RESULT,o)}else this.emit(nO.INSPECT_RESULT,void 0,new pI(lw.UNEXPECTED_RESPONSE,n.code+"","There is an unexpected data on message"))}else this.emit(nO.INSPECT_RESULT,void 0,new pI(lw.UNEXPECTED_RESPONSE,n.code+"",n.msg))}else oI.error("[".concat(this._inspectId,"] Unexpected message type from worker")),this.emit(nO.INSPECT_RESULT,void 0,new pI(lw.UNEXPECTED_RESPONSE,"invalid worker message type"))})),this.workerConnection.on(yR.CLOSED,(()=>{this.connectionState=eO.CLOSED})),this.workerConnection.on(yR.FAILED,(()=>{this.connectionState=eO.CLOSED})),this.workerConnection.on(yR.RECONNECTING,(()=>{this.connectionState=this.connectionState===eO.CONNECTED?eO.RECONNECTING:eO.CONNECTING})),this.workerConnection.on(yR.WILL_RECONNECT,((e,t,n)=>{"recover"===e&&n(e),n("tryNext")})),this.workerConnection.on(yR.REQUEST_NEW_URLS,((e,t)=>{this.workerManagerConnection.close(),this.once(nO.REQUEST_NEW_WORKER_URL,(t=>{e([t])})),this.requestAP(this._connectInfo,this._cancelTokenSource.token,this._retryConfig).then((e=>{this.connectWorkerManager(e,!0)})).catch((e=>{t(e)}))}))}async requestToInspectImage(){this.sequence++;const e=Hw(this,nO.CLIENT_LOCAL_VIDEO_TRACK),t={appId:this._connectInfo.appId,cname:this._connectInfo.cname,cid:this._connectInfo.cid,sid:this._connectInfo.sid,uid:this._connectInfo.uid,vid:this._connectInfo.vid};if(e){if(!e.isPlaying)return void this.emit(nO.INSPECT_RESULT,void 0,new pI(lw.INVALID_OPERATION,"Only the track being played can be inspected"));const n=await this.generateRequestData(e,t);this.workerConnection.sendMessage(n,!0,!0)}else this.emit(nO.INSPECT_RESULT,void 0,new pI(lw.INVALID_OPERATION,"Only the track being published can be inspected"))}async generateRequestData(e,t){let{appId:n,cname:r,cid:o,vid:i,sid:a,uid:s}=t;const c=Date.now(),l=await e.getCurrentFrameImage("image/jpeg",this.quality),u=await hL(l,n,r),d=this.sequence+"-"+o+"-"+s+"-"+c+"-"+aT(12,""),A={appId:n,cid:o,cname:r,deviceId:"",elapse:UK(Number(c-this.inspectStartTime)),fileSize:u.byteLength,jpgEncryption:2,height:l.height,width:l.width,jpg:u,networkType:6,osType:7,requestId:d,sdkVersion:"4.22.2",sequence:this.sequence,sid:a,timestamp:UK(c),uid:s,vid:i,service:this._inspectMode,callbackData:this.extraInfo,ossFilePrefix:this.ossFilePrefix};void 0===this.extraInfo&&delete A.callbackData,void 0===this.ossFilePrefix&&delete A.ossFilePrefix;const p=sK(A);if(p.byteLength<this.workerMessageLengthLimit){if(xT("SHOW_VIDEO_INSPECT_WORKER_MESSAGE")){const e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?LK(Object(n),!0).forEach((function(t){Ov(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LK(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},A);delete e.jpg,oI.debug("[".concat(this._inspectId,"] Request message for worker of inspect content "),JSON.stringify(e))}return p}{const t=this.quality*this.qualityRatio;return this.quality=t,await this.generateRequestData(e,{appId:n,cname:r,cid:o,vid:i,sid:a,uid:s})}}close(){this._cancelTokenSource.cancel(),this._cancelTokenSource=yS.CancelToken.source(),this.workerManagerConnection&&this.workerManagerConnection.close(),this.workerConnection&&this.workerConnection.close(),this.inspectTimer&&window.clearInterval(this.inspectTimer),this.inspectTimer=null,this.connectionState=eO.CLOSED,this.emit(nO.STATE_CHANGE,tO.CLOSED)}}const xK={name:"ContentInspect",create:function(e){let{config:t}=e;return function(e){if(!e)throw new pI(lw.INVALID_PARAMS,"inspectConfig is necessary.");if(!e.inspectType||!Array.isArray(e.inspectType))throw new pI(lw.INVALID_PARAMS,"inspectConfig.inspectType is necessary and is an instance of Array.");{const t=[...new Set(e.inspectType)];t.forEach((e=>{var t;if(!Or(t=["supervise","moderation"]).call(t,e))throw new pI(lw.INVALID_PARAMS,"".concat(e," is not a valid inspect type."))})),e.inspectType=t}if(e&&e.extraInfo&&e.extraInfo.length>1024)throw new pI(lw.INVALID_PARAMS,"inspectConfig.extraInfo length cannot exceed 1024 bytes")}(t),new MK(t)}};MT("PROCESS_ID","process-".concat(aT(8,""),"-").concat(aT(4,""),"-").concat(aT(4,""),"-").concat(aT(4,""),"-").concat(aT(12,""))),function(){let e;try{e=window.localStorage.getItem("websdk_ng_global_parameter")}catch(t){return void oI.error("Error loading sdk config",t.message)}if(e)try{const t=JSON.parse(window.atob(e)),n=Date.now();oI.debug("Loading global parameters from cache",t),Object.keys(t).forEach((e=>{if(Object.prototype.hasOwnProperty.call(UT,e)){const{value:r,expires:o}=t[e];if(o&&o<=n)return;FT[e]=r,UT[e]=r}}))}catch(n){oI.error("Error loading mutableParamsCache: ".concat(e),n.message)}}(),Array.isArray(FT.AREAS)&&FT.AREAS.length>0&&EM(FT.AREAS,!0);const FK=(e,t,n)=>{oI.debug("setParameter key:".concat(e,", value:").concat(JSON.stringify(t))),MT(e,t,n)};A$(ZG,!1),A$(aK,!1),A$(SV,!1),A$(xK,!1),A$(YG,!1);const $K=function(e){const t=new ww,n=e,r={getListeners:t.getListeners.bind(t),on:(e,n)=>{return r=n,e===oO.SECURITY_POLICY_VIOLATION&&CH(r,!0),t.on.bind(t)(e,n);var r},addListener:t.addListener.bind(t),once:t.once.bind(t),off:t.off.bind(t),removeAllListeners:t.removeAllListeners.bind(t),emit:t.emit.bind(t),safeEmit:t.safeEmit.bind(t)};return yH(yH({},n),r)}({__TRACK_LIST__:XP,VERSION:NT,BUILD:BT,ESM_BUNDLER:!1,ESM:!1,UMD:!0,DEV:!1,setParameter:FK,getParameter:xT,getSupportedCodec:async function(){let e={audio:[],video:[]};try{let t=new RTCPeerConnection;const n=await async function(e){let t;return UP().supportUnifiedPlan?(e.addTransceiver("video",{direction:"recvonly"}),e.addTransceiver("audio",{direction:"recvonly"}),t=(await e.createOffer()).sdp):t=(await e.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0})).sdp,t}(t);if(!n)return e;t.close(),t=null,e=function(e){const t={video:[],audio:[]};return e.match(/ VP8/i)&&t.video.push("VP8"),e.match(/ VP9/i)&&t.video.push("VP9"),e.match(/ AV1/i)&&t.video.push("AV1"),e.match(/ H264/i)&&t.video.push("H264"),e.match(/ H265/i)&&t.video.push("H265"),e.match(/ opus/i)&&t.audio.push("OPUS"),e.match(/ PCMU/i)&&t.audio.push("PCMU"),e.match(/ PCMA/i)&&t.audio.push("PCMA"),e.match(/ G722/i)&&t.audio.push("G722"),t}(n)}catch(t){throw new pI(lw.CREATE_OFFER_FAILED,t.toString&&t.toString()).print()}return e},checkSystemRequirements:function(){const e=AI.reportApiInvoke(null,{name:Rw.CHECK_SYSTEM_REQUIREMENTS,options:[],tag:Ow.TRACER});let t=!1;try{const e=window.RTCPeerConnection,n=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,r=window.WebSocket;t=!!(e&&n&&r),t&&nw()&&jS(75)&&(new e).close()}catch(i){return oI.error("check system requirement failed: ",i),!1}let n=!1;const r=PS();r.name===RS.CHROME&&Number(r.version)>=58&&("WebKit"!==NS.engine.name||function(){const e=PS();if(US()){if(e.os===IS.MAC_OS)return!0;if(e.os===IS.IOS){const e=NS.os.version&&NS.os.version.split(".");if(e&&14===Number(e[0])&&e[1]&&Number(e[1])>=3)return!0;if(e&&Number(e[0])>14)return!0}}return!1}())&&(n=!0),(r.name===RS.FIREFOX&&Number(r.version)>=56||r.name===RS.OPERA&&Number(r.version)>=45||r.name===RS.SAFARI&&Number(r.version)>=11||"WebKit"===r.name&&(VS()||ZS())&&r.osVersion&&Number(r.osVersion.split(".")[0])>=11||ew()||PS().name===RS.QQ)&&(n=!0),oI.debug("checkSystemRequirements, api:",t,"browser",n);const o=t&&n;return e.onSuccess(o),o},getDevices:function(e){return zD.enumerateDevices(!0,!0,e)},getMicrophones:function(e){return zD.getRecordingDevices(e)},getCameras:function(e){return zD.getCamerasDevices(e)},getElectronScreenSources:VD,getPlaybackDevices:function(e){return zD.getSpeakers(e)},createClient:function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{codec:"vp8",audioCodec:"opus",mode:"rtc"};const n=aT(5,"client-"),r=AI.reportApiInvoke(null,{id:n,name:Rw.CREATE_CLIENT,options:[t],tag:Ow.TRACER});try{Aw((o=t).codec,"config.codec",["vp8","vp9","av1","h264","h265"]),Aw(o.mode,"config.mode",["rtc","live","p2p"]),void 0!==o.audioCodec&&Aw(o.audioCodec,"config.audioCodec",["opus","pcmu","pcma","g722"]),void 0!==o.proxyServer&&fw(o.proxyServer,"config.proxyServer",1,1e4),void 0!==o.turnServer&&Lw(o.turnServer),void 0!==o.httpRetryConfig&&Nw(o.httpRetryConfig),void 0!==o.websocketRetryConfig&&Nw(o.websocketRetryConfig)}catch(o){throw r.onError(o),o}var o;return(KS(16,0)||WS(16,0))&&("vp9"===t.codec&&(t.codec="vp8",oI.debug("browser not support vp9, force use vp8")),MT("UNSUPPORTED_VIDEO_CODEC",["vp9"])),void 0===t.audioCodec&&(t.audioCodec="opus"),r.onSuccess(),new hH(pH(pH({forceWaitGatewayResponse:!0},t),{},{role:Or(e=["rtc","p2p"]).call(e,t.mode)?"host":t.role||"audience"}),n)},createCameraVideoTrack:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=xT("CAMERA_CAPTURE_CONFIG"),n=aT(8,"track-cam-"),r=AI.reportApiInvoke(null,{id:n,tag:Ow.TRACER,name:Rw.CREATE_CAM_VIDEO_TRACK,options:[TD({},e),t]});t&&(e.encoderConfig=t);const o=uL(e);let i=null;oI.info("start create camera video track with config",JSON.stringify(e),"trackId",n);try{i=(await GD({video:o},n)).getVideoTracks()[0]||null}catch(s){throw r.onError(s),s}if(!i){const e=new uw(lw.UNEXPECTED_ERROR,"can not find track in media stream");return r.onError(e),e.throw(oI)}e.optimizationMode&&qB(n,i,e,WP(e.encoderConfig));const a=new WB(i,e,o,e.scalabiltyMode?zP(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,n);return r.onSuccess(a.getTrackId()),oI.info("create camera video success, trackId:",n),a},createCustomVideoTrack:function(e){const t=aT(8,"track-cus-"),n=AI.reportApiInvoke(null,{id:t,tag:Ow.TRACER,name:Rw.CREATE_CUSTOM_VIDEO_TRACK,options:[e]}),r=new KB(e.mediaStreamTrack,{width:e.width,height:e.height,frameRate:e.frameRate,bitrateMax:e.bitrateMax,bitrateMin:e.bitrateMin},e.scalabiltyMode?zP(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,t,[tD.CUSTOM_TRACK]);return n.onSuccess(r.getTrackId()),oI.info("create custom video track success with config",e,"trackId",r.getTrackId()),r},createScreenVideoTrack:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"disable";const n="object"==typeof t?dL(r=t):void 0;var r;n&&(t="auto");const o=aT(8,"track-scr-v-"),i=AI.reportApiInvoke(null,{id:o,tag:Ow.TRACER,name:Rw.CREATE_SCREEN_VIDEO_TRACK,options:[TD({},e),t]});e.encoderConfig?"string"==typeof e.encoderConfig||e.encoderConfig.width&&e.encoderConfig.height||(e.encoderConfig.width={max:1920},e.encoderConfig.height={max:1080}):e.encoderConfig="1080p_2";const a=function(e){const t={};e.screenSourceType&&(t.mediaSource=e.screenSourceType),e.extensionId&&MS()&&(t.extensionId=e.extensionId);const{displaySurface:n,selfBrowserSurface:r,surfaceSwitching:o,systemAudio:i}=e;(HS(107)||QS(107)||qS(93))&&(n&&(Aw(n,"displaySurface",["browser","window","monitor"]),t.displaySurface=n),r?(Aw(r,"selfBrowserSurface",["exclude","include"]),t.selfBrowserSurface=r):t.selfBrowserSurface="include",o&&(Aw(o,"surfaceSwitching",["exclude","include"]),t.surfaceSwitching=o)),(HS(105)||QS(105)||qS(91))&&i&&(Aw(i,"systemAudio",["exclude","include"]),t.systemAudio=i),e.electronScreenSourceId&&(t.sourceId=e.electronScreenSourceId);const a=e.encoderConfig?qP(e.encoderConfig):null;return t.mandatory={chromeMediaSource:"desktop",maxWidth:a?a.width:void 0,maxHeight:a?a.height:void 0},a&&(a.frameRate&&("number"==typeof a.frameRate?(t.mandatory.maxFrameRate=a.frameRate,t.mandatory.minFrameRate=a.frameRate):(t.mandatory.maxFrameRate=a.frameRate.max||a.frameRate.ideal||a.frameRate.exact||void 0,t.mandatory.minFrameRate=a.frameRate.min||a.frameRate.ideal||a.frameRate.exact||void 0),t.frameRate=a.frameRate),a.width&&(t.width=a.width),a.height&&(t.height=a.height)),t}(e);let s=null,c=null;const l=UP();if(!l.supportShareAudio&&"enable"===t){const e=new uw(lw.NOT_SUPPORTED,"your browser or platform is not support share-screen with audio");return i.onError(e),e.throw(oI)}oI.info("start create screen video track with config",e,"withAudio",t,"trackId",o);const u=l.supportShareAudio&&"disable"!==t;try{const e=await GD({screen:a,screenAudio:u?n||!0:void 0},o);s=e.getVideoTracks()[0]||null,c=e.getAudioTracks()[0]||null}catch(r){throw i.onError(r),r}if(!s){const e=new uw(lw.UNEXPECTED_ERROR,"can not find track in media stream");return i.onError(e),e.throw(oI)}if(!c&&"enable"===t){s&&s.stop();const e=new uw(lw.SHARE_AUDIO_NOT_ALLOWED);return i.onError(e),e.throw(oI)}e.optimizationMode||(e.optimizationMode="detail"),e.optimizationMode&&(qB(o,s,e,e.encoderConfig&&qP(e.encoderConfig)||void 0),e.encoderConfig&&"string"!=typeof e.encoderConfig&&(e.encoderConfig.bitrateMin=e.encoderConfig.bitrateMax));const d=new KB(s,e.encoderConfig?qP(e.encoderConfig):{},e.scalabiltyMode?zP(e.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},e.optimizationMode,o,[tD.SCREEN_TRACK]);if(!c)return i.onSuccess(d.getTrackId()),oI.info("create screen video track success","video:",d.getTrackId()),d;const A=new rB(c,void 0,aT(8,"track-scr-a-"),!1);return i.onSuccess([d.getTrackId(),A.getTrackId()]),oI.info("create screen video track success","video:",d.getTrackId(),"audio:",A.getTrackId()),[d,A]},createMicrophoneAndCameraTracks:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=xT("CAMERA_CAPTURE_CONFIG"),r=aT(8,"track-mic-"),o=aT(8,"track-cam-"),i=AI.reportApiInvoke(null,{id:"".concat(r,"-").concat(o),tag:Ow.TRACER,name:Rw.CREATE_MIC_AND_CAM_TRACKS,options:[e,t,n]});n&&(t.encoderConfig=n);const a=uL(t),s=AL(e);let c=null,l=null;oI.info("start create camera video track(".concat(o,") and microphone audio track(").concat(r,") with config, audio: ").concat(JSON.stringify(e),", video: ").concat(JSON.stringify(t)));try{const e=await GD({audio:s,video:a},"".concat(r,"-").concat(o));c=e.getAudioTracks()[0],l=e.getVideoTracks()[0]}catch(A){throw i.onError(A),A}if(!c||!l){const e=new uw(lw.UNEXPECTED_ERROR,"can not find tracks in media stream");return i.onError(e),e.throw(oI)}t.optimizationMode&&qB(o,l,t,WP(t.encoderConfig));const u=new oB(c,e,s,r),d=new WB(l,t,a,t.scalabiltyMode?zP(t.scalabiltyMode):{numSpatialLayers:1,numTemporalLayers:1},t.optimizationMode,o);return i.onSuccess([u.getTrackId(),d.getTrackId()]),oI.info("create camera video track(".concat(o,") and microphone audio track(").concat(r,") success")),[u,d]},createMicrophoneAudioTrack:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=aT(8,"track-mic-"),n=AI.reportApiInvoke(null,{id:t,tag:Ow.TRACER,name:Rw.CREATE_MIC_AUDIO_TRACK,options:[e]}),r=AL(e);let o=null;oI.info("start create microphone audio track with config",JSON.stringify(e),"trackId",t);try{o=(await GD({audio:r},t)).getAudioTracks()[0]||null}catch(a){throw n.onError(a),a}if(!o){const e=new uw(lw.UNEXPECTED_ERROR,"can not find track in media stream");return n.onError(e),e.throw(oI)}const i=new oB(o,e,r,t);return n.onSuccess(i.getTrackId()),oI.info("create microphone audio track success, trackId:",t),i},createCustomAudioTrack:function(e){const t=aT(8,"track-cus-"),n=AI.reportApiInvoke(null,{id:t,tag:Ow.TRACER,name:Rw.CREATE_CUSTOM_AUDIO_TRACK,options:[e]}),r=new rB(e.mediaStreamTrack,e.encoderConfig?JP(e.encoderConfig):{},t,!1);return oI.info("create custom audio track success with config",e,"trackId",r.getTrackId()),n.onSuccess(r.getTrackId()),r},createBufferSourceAudioTrack:async function(e){var t;const{cacheOnlineFile:n,encoderConfig:r}=e;let{source:o}=e;const i={source:o instanceof AudioBuffer?"AudioBuffer":o instanceof File?null!==(t=File.name)&&void 0!==t?t:"File":o,cacheOnlineFile:n,encoderConfig:r},a=aT(8,"track-buf-"),s=AI.reportApiInvoke(null,{id:a,tag:Ow.TRACER,name:Rw.CREATE_BUFFER_AUDIO_TRACK,options:[i]});if(xT("DISABLE_WEBAUDIO"))throw new uw(lw.NOT_SUPPORTED,"can not create BufferSourceAudioTrack when WebAudio disabled");oI.info("start create buffer source audio track with config",JSON.stringify(i),"trackId",a);const c=o;if(!(o instanceof AudioBuffer))try{o=await async function(e,t){let n=null;if("string"==typeof e){const t=cB.get(e);if(t)return oI.debug("use cached audio resource: ",e),t;try{n=(await bT((()=>yS.get(e,{responseType:"arraybuffer"})),void 0,void 0,{maxRetryCount:3})).data}catch(o){throw new uw(lw.FETCH_AUDIO_FILE_FAILED,o.toString())}}else{const t=new MA(((t,n)=>{const r=new FileReader;r.onload=e=>{e.target?t(e.target.result):n(new uw(lw.READ_LOCAL_AUDIO_FILE_ERROR))},r.onerror=()=>{n(new uw(lw.READ_LOCAL_AUDIO_FILE_ERROR))},r.readAsArrayBuffer(e)}));n=await t}const r=await function(e){const t=PD();return new MA(((n,r)=>{t.decodeAudioData(e,(e=>{n(e)}),(e=>{r(new uw(lw.DECODE_AUDIO_FILE_FAILED,e.toString()))}))}))}(n);return"string"==typeof e&&t&&cB.set(e,r),r}(o,n)}catch(d){return s.onError(d),d.throw(oI)}const l=new sB(o),u=new iB(c,l,r?JP(r):{},a);return oI.info("create buffer source audio track success, trackId:",a),s.onSuccess(u.getTrackId()),u},setAppType:function(e){if(oI.debug("setAppType: ".concat(e)),!(Number.isInteger(e)&&e>=0))throw oI.debug("Invalid appType"),new pI(lw.INVALID_PARAMS,"invalid app type",e);MT("APP_TYPE",Math.floor(e))},setLogLevel:function(e){oI.setLogLevel(e)},enableLogUpload:function(){xT("USE_NEW_LOG")?MT("UPLOAD_LOG",!0):oI.enableLogUpload()},disableLogUpload:function(){xT("USE_NEW_LOG")?MT("UPLOAD_LOG",!1):oI.disableLogUpload()},createChannelMediaRelayConfiguration:function(){return new wF},checkAudioTrackIsActive:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const n=AI.reportApiInvoke(null,{tag:Ow.TRACER,name:Rw.CHECK_AUDIO_TRACK_IS_ACTIVE,options:[t]});if(!(e instanceof rB||e instanceof lU)){const e=new pI(lw.INVALID_TRACK,"the parameter is not a audio track");return n.onError(e),e.throw()}t&&t<1e3&&(t=1e3);const r=e instanceof rB?e.getTrackLabel():"remote_track",o=e.getVolumeLevel();let i=o,a=o;const s=Date.now();return new MA((o=>{const c=setInterval((()=>{const l=e.getVolumeLevel();i=l>i?l:i,a=l<a?l:a;const u=i-a>1e-4,d=Date.now()-s;if(u||d>t){clearInterval(c);const t=u,a={duration:d,deviceLabel:r,maxVolumeLevel:i,result:t};oI.info("[track-".concat(e.getTrackId(),"] check audio track active completed. ").concat(JSON.stringify(a))),n.onSuccess(a),o(t)}}),200)}))},checkVideoTrackIsActive:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;const n=AI.reportApiInvoke(null,{tag:Ow.TRACER,name:Rw.CHECK_VIDEO_TRACK_IS_ACTIVE,options:[t]});if(!(e instanceof KB||e instanceof cU)){const e=new pI(lw.INVALID_TRACK,"the parameter is not a video track");return n.onError(e),e.throw()}t&&t<1e3&&(t=1e3);const r=e instanceof KB?e.getTrackLabel():"remote_track",o=e.getMediaStreamTrack(!0),i=document.createElement("video");i.style.width="1px",i.style.height="1px",i.setAttribute("muted",""),i.muted=!0,i.setAttribute("playsinline",""),i.controls=!1,(xS()||US())&&(i.style.opacity="0.01",i.style.position="fixed",i.style.left="0",i.style.top="0",document.body.appendChild(i)),i.srcObject=new MediaStream([o]),i.play();const a=document.createElement("canvas");a.width=160,a.height=120;let s=0,c=0;try{const e=Date.now();s=await function(e,t,n,r){let o,i=0,a=null;return new MA(((s,c)=>{function l(){i>r&&o&&(o(),s(i));const t=n.getContext("2d");if(!t){const e=new pI(lw.UNEXPECTED_ERROR,"can not get canvas 2d context.");return oI.error(e.toString()),void c(e)}t.drawImage(e,0,0,160,120);const l=t.getImageData(0,0,n.width,n.height),u=Math.floor(l.data.length/3);if(a){for(let e=0;e<u;e+=3)if(l.data[e]!==a[e])return i+=1,void(a=l.data);a=l.data}else a=l.data}setTimeout((()=>{o&&(o(),s(i))}),t),o=BD((()=>{l()}),30)}))}(i,t,a,4),c=Date.now()-e}catch(d){throw n.onError(d),d}S$===RS.SAFARI&&(i.pause(),i.remove()),i.srcObject=null;const l=s>4,u={duration:c,changedPicNum:s,deviceLabel:r,result:l};return oI.info("[track-".concat(e.getTrackId(),"] check video track active completed. ").concat(JSON.stringify(u))),n.onSuccess(u),l},setArea:EM,audioElementPlayCenter:tL,resumeAudioContext:function(){tL.autoResumeAfterInterruption(!0)},processExternalMediaAEC:function(e){EH.processExternalMediaAEC(e)},registerExtensions:function(e){const t=xT("PLUGIN_INFO")||[];e.forEach((e=>{"name"in e&&!Or(t).call(t,e.name)&&t.push(e.name);const n=e;n.__registered__=!0,n.logger.hookLog=oI.extLog,n.reporter.hookApiInvoke=AI.extApiInvoke,n.parameters&&Object.keys(n.parameters).forEach((e=>{n.parameters[e]=xT(e)}))})),FK("PLUGIN_INFO",t)},ChannelMediaRelayError:UR,ChannelMediaRelayEvent:LR,ChannelMediaRelayState:BR,RemoteStreamFallbackType:oD,RemoteStreamType:rD,ConnectionDisconnectedReason:Pw,AudienceLatencyLevelType:kw,AREAS:VR,preload:async function(e,t,n,r){return x$(e,t,n,r)}});return Object.defineProperties($K,{onAudioAutoplayFailed:{get:()=>JD.onAudioAutoplayFailed,set:e=>{JD.onAudioAutoplayFailed=e}},onAutoplayFailed:{get:()=>JD.onAutoplayFailed,set:e=>{JD.onAutoplayFailed=e}},_onSecurityPolicyViolation:{value:void 0,writable:!0},_cspEventHandlerPointer:{value:void 0,writable:!0},onSecurityPolicyViolation:{get:()=>$K._onSecurityPolicyViolation,set(e){$K._onSecurityPolicyViolation=e,CH(e)}},__CLIENT_LIST__:{get:()=>xT("SHOW_GLOBAL_CLIENT_LIST")?gI:[]}}),zD.on(_D.CAMERA_DEVICE_CHANGED,(e=>{oI.info("camera device changed",JSON.stringify(e)),$K.onCameraChanged&&$K.onCameraChanged(e),$K.safeEmit(oO.CAMERA_CHANGED,e)})),zD.on(_D.RECORDING_DEVICE_CHANGED,(e=>{oI.info("microphone device changed",JSON.stringify(e)),$K.onMicrophoneChanged&&$K.onMicrophoneChanged(e),$K.safeEmit(oO.MICROPHONE_CHANGED,e)})),zD.on(_D.PLAYOUT_DEVICE_CHANGED,(e=>{oI.debug("playout device changed",JSON.stringify(e)),$K.onPlaybackDeviceChanged&&$K.onPlaybackDeviceChanged(e),$K.safeEmit(oO.PLAYBACK_DEVICE_CHANGED,e)})),tL.onAutoplayFailed=()=>{oI.info("detect audio element autoplay failed"),JD.onAudioAutoplayFailed&&JD.onAudioAutoplayFailed()},kD.on("autoplay-failed",(()=>{oI.info("detect webaudio autoplay failed"),JD.onAudioAutoplayFailed&&JD.onAudioAutoplayFailed(),$K.safeEmit(oO.AUTOPLAY_FAILED)})),kD.on(FP.STATE_CHANGE,((e,t)=>{oI.info("audio context state changed: ".concat(t," => ").concat(e)),$K.onAudioContextStateChanged&&$K.onAudioContextStateChanged(e,t),$K.safeEmit(oO.AUDIO_CONTEXT_STATE_CHANGED,e,t)})),Qw.on(Fw.NETWORK_STATE_CHANGE,((e,t)=>{oI.info("[network-indicator] network state changed, ".concat(t," => ").concat(e))})),window&&(window.__ARTC__=$K),$K}();var AgoraRTC_NProductionExports=AgoraRTC_NProduction.exports;const AgoraRTC=getDefaultExportFromCjs(AgoraRTC_NProductionExports),checkRtcSupport=()=>{const e=AgoraRTC.checkSystemRequirements();return console.log("RTC"),1!=e&&showMediaUnavaliableModal(),e},trackRtcSupport=()=>{appTrackSupportRtc(AgoraRTC.checkSystemRequirements())};let rtcManager={localAudioTrack:null,localVideoTrack:null},rtc,_globalTimer;function initRtc({remoteMediaTrack:e=()=>{},userJoinChannel:t=()=>{},userLeftChannel:n=()=>{}}){rtc=AgoraRTC.createClient({mode:"rtc",codec:"h264"}),rtc.on("user-joined",(async e=>{console.log(`RTC ${e.uid}`),t(e.uid)})),rtc.on("user-left",(async e=>{console.log(`RTC ${e.uid}`),n(e.uid)})),rtc.on("user-published",(async(t,n)=>{if(await rtc.subscribe(t,n),"video"===n&&(console.log("RTC"),e(t.videoTrack)),"audio"===n){console.log("RTC");t.audioTrack.play()}})),rtc.on("user-unpublished",(e=>{console.log("RTC")}))}async function joinChannel({appId:e,channel:t,token:n,uid:r,success:o=()=>{},fail:i=()=>{}}){try{await rtc.join(e,t,n,r),o()}catch(a){console.log(`RTC ${a}`),i()}}async function pushLocal({localMediaTrack:e=()=>{},supportError:t=()=>{}}){try{rtcManager.localAudioTrack=await AgoraRTC.createMicrophoneAudioTrack(),rtcManager.localVideoTrack=await AgoraRTC.createCameraVideoTrack(),rtc.publish([rtcManager.localAudioTrack,rtcManager.localVideoTrack]),e(rtcManager.localVideoTrack)}catch(n){t(n)}}async function levelChannel(){var e,t;try{console.log("/"),null==(e=rtcManager.localAudioTrack)||e.close(),null==(t=rtcManager.localVideoTrack)||t.close(),await rtc.leave(),console.log("")}finally{rtcManager.localAudioTrack=null,rtcManager.localVideoTrack=null,console.log("")}}function renewToken(e){rtc.renewToken(e)}function showDebugModal(){kn(ModalDebugVue,{backdrop:!1,backdropClose:!1,header:!1,closeButton:!1,placement:"right",customClass:"modal-debug"})}function showLoginModal(){kn(ModalLoginVue,{backdropClose:!0,header:!1,closeButton:!1,placement:"bottom",customClass:"modal-custom"})}function showAccountLoginModal({resetPwd:e=!1}){kn(ModalAccountLoginVue,{params:{resetPwd:e},backdropClose:!1,header:!1,closeButton:!1,placement:"bottom",customClass:"modal-custom"})}function showAppDownloadChatModal({type:e=0}){kn(ModalAppDownloadGuide,{params:{type:e},backdropClose:!0,header:!1,closeButton:!1,placement:"bottom",customClass:"modal-custom"})}function showFirstRechargeModal({type:e=1,anchorId:t="",path:n="",callback:r=()=>{}}){localAuthAvailable()?ln(ModalRechargeFirst,{params:{type:e,anchorId:t,path:n},header:!1,closeButton:!1,maxButton:!1,customClass:"modal-custom",callback:r}):showLoginModal()}function showRechargeModal({type:e=1,fullScreen:t=!1,anchorId:n="",path:r="",callback:o=()=>{}}){console.log(""),localAuthAvailable()?kn(ModalRecharge,{params:{type:e,fullScreen:t,anchorId:n,path:r},backdropClose:!0,header:!1,closeButton:!1,placement:"bottom",customClass:"modal-custom",callback:o}):showLoginModal()}function showPayWay(e,t,n,r){kn(ModalPayWay,{params:{data:e,type:t,anchorId:n,path:r},backdropClose:!0,header:!1,closeButton:!1,placement:"bottom",customClass:"modal-custom"})}function showBagModal(){localAuthAvailable()?kn(ModalBag,{backdropClose:!0,header:!1,closeButton:!1,placement:"bottom",customClass:"modal-custom"}):showLoginModal()}function showSettingModal(){localAuthAvailable()?kn(ModalSetting,{backdropClose:!0,header:!1,closeButton:!1,placement:"bottom",customClass:"modal-custom"}):showLoginModal()}function showRtcRemoteInvitationModal(e){ln(ModalRtcRemoteInvitation,{params:e,header:!1,closeButton:!1,maxButton:!1,customClass:"modal-custom modal-invitation-remote"})}function showRtcLocalInvitationModal({anchorId:e,combineAnchor:t=!1}){checkRtcSupport()&&(console.log(""),ln(ModalRtcLocationInvitation,{params:{anchorUserId:e.toString(),combineAnchor:t},header:!1,closeButton:!1,maxButton:!1,customClass:"modal-custom"}))}function showConfirmModal({title:e="",content:t="",cancelTitle:n="",coverBg:r=!1,confirm:o=()=>{},cancel:i=()=>{}}){ln(ModalConfirm,{params:{title:e,content:t,cancelTitle:n,coverBg:r},header:!1,closeButton:!1,maxButton:!1,customClass:"modal-custom",callback:e=>{console.log(" "+(e?"":"")),e?o():i()}})}function showGuestPwdTipModal({username:e,pwd:t,alwaysDownload:n=!1,callback:r=()=>{}}){ln(ModalGuestPwdTip,{params:{username:e,pwd:t,alwaysDownload:n},header:!1,closeButton:!1,maxButton:!1,customClass:"modal-custom",callback:r})}function showiPhonePwaGuideModal(){kn(ModaliPhonePwaGuide,{backdropClose:!0,header:!1,closeButton:!1,placement:"bottom",customClass:"modal-custom"})}function showMediaUnavaliableModal(){isFlutterWebApp?(setYesShowShouldTryPermission(),toFlutterWebAppOpenAppSettings()):kn(ModalMediaUnavaliableTip,{backdropClose:!0,header:!1,closeButton:!1,placement:"bottom",customClass:"modal-custom"})}console.log(" modal-manager.js"),console.log(" timer.js");let globalCount=0,gVideoTimer;function globalTimer(){disposeGlobalTimer(),console.log(""),_globalTimer=setInterval((()=>{console.log(` ${globalCount}`),useAppDataStore().globalTimerNTF(),checkAiconfig(globalCount),globalCount%5==0&&(console.log("UI"),useAppDataStore().changeLoginStatus(localAuthAvailable())),globalCount%10==0&&(console.log("Rtm"),initRtmAndLogin(),console.log(""),heartbeat()),globalCount++}),1e3)}function disposeGlobalTimer(){console.log(""),_globalTimer=clearInterval(_globalTimer)}const combineGVideoTimer=e=>{gVideoTimer=e},clearGVideoTimer=()=>{console.log(""),gVideoTimer=clearInterval(gVideoTimer)};let gAnchorJoinTimeout;const combineGAnchorJoinTimeout=e=>{gAnchorJoinTimeout=e},clearGAnchorJoinTimeout=()=>{console.log("Timeout"),gAnchorJoinTimeout=clearTimeout(gAnchorJoinTimeout)};function bind(e,t){return function(){return e.apply(t,arguments)}}const{toString:toString}=Object.prototype,{getPrototypeOf:getPrototypeOf}=Object,kindOf=(e=>t=>{const n=toString.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=e=>(e=e.toLowerCase(),t=>kindOf(t)===e),typeOfTest=e=>t=>typeof t===e,{isArray:isArray$1}=Array,isUndefined=typeOfTest("undefined");function isBuffer(e){return null!==e&&!isUndefined(e)&&null!==e.constructor&&!isUndefined(e.constructor)&&isFunction$1(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&isArrayBuffer(e.buffer),t}const isString$1=typeOfTest("string"),isFunction$1=typeOfTest("function"),isNumber$1=typeOfTest("number"),isObject$1=e=>null!==e&&"object"==typeof e,isBoolean$1=e=>!0===e||!1===e,isPlainObject$1=e=>{if("object"!==kindOf(e))return!1;const t=getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=e=>isObject$1(e)&&isFunction$1(e.pipe),isFormData=e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||isFunction$1(e.append)&&("formdata"===(t=kindOf(e))||"object"===t&&isFunction$1(e.toString)&&"[object FormData]"===e.toString()))},isURLSearchParams=kindOfTest("URLSearchParams"),[isReadableStream,isRequest,isResponse,isHeaders]=["ReadableStream","Request","Response","Headers"].map(kindOfTest),trim=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(e,t,{allOwnKeys:n=!1}={}){if(null==e)return;let r,o;if("object"!=typeof e&&(e=[e]),isArray$1(e))for(r=0,o=e.length;r<o;r++)t.call(null,e[r],r,e);else{const o=n?Object.getOwnPropertyNames(e):Object.keys(e),i=o.length;let a;for(r=0;r<i;r++)a=o[r],t.call(null,e[a],a,e)}}function findKey(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,o=n.length;for(;o-- >0;)if(r=n[o],t===r.toLowerCase())return r;return null}const _global="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,isContextDefined=e=>!isUndefined(e)&&e!==_global;function merge(){const{caseless:e}=isContextDefined(this)&&this||{},t={},n=(n,r)=>{const o=e&&findKey(t,r)||r;isPlainObject$1(t[o])&&isPlainObject$1(n)?t[o]=merge(t[o],n):isPlainObject$1(n)?t[o]=merge({},n):isArray$1(n)?t[o]=n.slice():t[o]=n};for(let r=0,o=arguments.length;r<o;r++)arguments[r]&&forEach(arguments[r],n);return t}const extend=(e,t,n,{allOwnKeys:r}={})=>(forEach(t,((t,r)=>{n&&isFunction$1(t)?e[r]=bind(t,n):e[r]=t}),{allOwnKeys:r}),e),stripBOM=e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject=(e,t,n,r)=>{let o,i,a;const s={};if(t=t||{},null==e)return t;do{for(o=Object.getOwnPropertyNames(e),i=o.length;i-- >0;)a=o[i],r&&!r(a,e,t)||s[a]||(t[a]=e[a],s[a]=!0);e=!1!==n&&getPrototypeOf(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},endsWith=(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray=e=>{if(!e)return null;if(isArray$1(e))return e;let t=e.length;if(!isNumber$1(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},isTypedArray=(e=>t=>e&&t instanceof e)("undefined"!=typeof Uint8Array&&getPrototypeOf(Uint8Array)),forEachEntry=(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll=(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),hasOwnProperty$1=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),isRegExp$1=kindOfTest("RegExp"),reduceDescriptors=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};forEach(n,((n,o)=>{let i;!1!==(i=t(n,o,e))&&(r[o]=i||n)})),Object.defineProperties(e,r)},freezeMethods=e=>{reduceDescriptors(e,((t,n)=>{if(isFunction$1(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];isFunction$1(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet=(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return isArray$1(e)?r(e):r(String(e).split(t)),n},noop=()=>{},toFiniteNumber=(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,ALPHA="abcdefghijklmnopqrstuvwxyz",DIGIT="0123456789",ALPHABET={DIGIT:DIGIT,ALPHA:ALPHA,ALPHA_DIGIT:ALPHA+ALPHA.toUpperCase()+DIGIT},generateString=(e=16,t=ALPHABET.ALPHA_DIGIT)=>{let n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n};function isSpecCompliantForm(e){return!!(e&&isFunction$1(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])}const toJSONObject=e=>{const t=new Array(10),n=(e,r)=>{if(isObject$1(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const o=isArray$1(e)?[]:{};return forEach(e,((e,t)=>{const i=n(e,r+1);!isUndefined(i)&&(o[t]=i)})),t[r]=void 0,o}}return e};return n(e,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=e=>e&&(isObject$1(e)||isFunction$1(e))&&isFunction$1(e.then)&&isFunction$1(e.catch),_setImmediate=(setImmediateSupported="function"==typeof setImmediate,postMessageSupported=isFunction$1(_global.postMessage),setImmediateSupported?setImmediate:postMessageSupported?(token=`axios@${Math.random()}`,callbacks2=[],_global.addEventListener("message",(({source:e,data:t})=>{e===_global&&t===token&&callbacks2.length&&callbacks2.shift()()}),!1),e=>{callbacks2.push(e),_global.postMessage(token,"*")}):e=>setTimeout(e));var setImmediateSupported,postMessageSupported,token,callbacks2;const asap="undefined"!=typeof queueMicrotask?queueMicrotask.bind(_global):"undefined"!=typeof process&&process.nextTick||_setImmediate,utils$1={isArray:isArray$1,isArrayBuffer:isArrayBuffer,isBuffer:isBuffer,isFormData:isFormData,isArrayBufferView:isArrayBufferView,isString:isString$1,isNumber:isNumber$1,isBoolean:isBoolean$1,isObject:isObject$1,isPlainObject:isPlainObject$1,isReadableStream:isReadableStream,isRequest:isRequest,isResponse:isResponse,isHeaders:isHeaders,isUndefined:isUndefined,isDate:isDate,isFile:isFile,isBlob:isBlob,isRegExp:isRegExp$1,isFunction:isFunction$1,isStream:isStream,isURLSearchParams:isURLSearchParams,isTypedArray:isTypedArray,isFileList:isFileList,forEach:forEach,merge:merge,extend:extend,trim:trim,stripBOM:stripBOM,inherits:inherits,toFlatObject:toFlatObject,kindOf:kindOf,kindOfTest:kindOfTest,endsWith:endsWith,toArray:toArray,forEachEntry:forEachEntry,matchAll:matchAll,isHTMLForm:isHTMLForm,hasOwnProperty:hasOwnProperty$1,hasOwnProp:hasOwnProperty$1,reduceDescriptors:reduceDescriptors,freezeMethods:freezeMethods,toObjectSet:toObjectSet,toCamelCase:toCamelCase,noop:noop,toFiniteNumber:toFiniteNumber,findKey:findKey,global:_global,isContextDefined:isContextDefined,ALPHABET:ALPHABET,generateString:generateString,isSpecCompliantForm:isSpecCompliantForm,toJSONObject:toJSONObject,isAsyncFn:isAsyncFn,isThenable:isThenable,setImmediate:_setImmediate,asap:asap};function AxiosError(e,t,n,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),o&&(this.response=o,this.status=o.status?o.status:null)}utils$1.inherits(AxiosError,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$1.toJSONObject(this.config),code:this.code,status:this.status}}});const prototype$1=AxiosError.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{descriptors[e]={value:e}})),Object.defineProperties(AxiosError,descriptors),Object.defineProperty(prototype$1,"isAxiosError",{value:!0}),AxiosError.from=(e,t,n,r,o,i)=>{const a=Object.create(prototype$1);return utils$1.toFlatObject(e,a,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),AxiosError.call(a,e.message,t,n,r,o),a.cause=e,a.name=e.name,i&&Object.assign(a,i),a};const httpAdapter=null;function isVisitable(e){return utils$1.isPlainObject(e)||utils$1.isArray(e)}function removeBrackets(e){return utils$1.endsWith(e,"[]")?e.slice(0,-2):e}function renderKey(e,t,n){return e?e.concat(t).map((function(e,t){return e=removeBrackets(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}function isFlatArray(e){return utils$1.isArray(e)&&!e.some(isVisitable)}const predicates=utils$1.toFlatObject(utils$1,{},null,(function(e){return/^is[A-Z]/.test(e)}));function toFormData(e,t,n){if(!utils$1.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=utils$1.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!utils$1.isUndefined(t[e])}))).metaTokens,o=n.visitor||l,i=n.dots,a=n.indexes,s=(n.Blob||"undefined"!=typeof Blob&&Blob)&&utils$1.isSpecCompliantForm(t);if(!utils$1.isFunction(o))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(utils$1.isDate(e))return e.toISOString();if(!s&&utils$1.isBlob(e))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils$1.isArrayBuffer(e)||utils$1.isTypedArray(e)?s&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function l(e,n,o){let s=e;if(e&&!o&&"object"==typeof e)if(utils$1.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(utils$1.isArray(e)&&isFlatArray(e)||(utils$1.isFileList(e)||utils$1.endsWith(n,"[]"))&&(s=utils$1.toArray(e)))return n=removeBrackets(n),s.forEach((function(e,r){!utils$1.isUndefined(e)&&null!==e&&t.append(!0===a?renderKey([n],r,i):null===a?n:n+"[]",c(e))})),!1;return!!isVisitable(e)||(t.append(renderKey(o,n,i),c(e)),!1)}const u=[],d=Object.assign(predicates,{defaultVisitor:l,convertValue:c,isVisitable:isVisitable});if(!utils$1.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!utils$1.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),utils$1.forEach(n,(function(n,i){!0===(!(utils$1.isUndefined(n)||null===n)&&o.call(t,n,utils$1.isString(i)?i.trim():i,r,d))&&e(n,r?r.concat(i):[i])})),u.pop()}}(e),t}function encode$2(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function AxiosURLSearchParams(e,t){this._pairs=[],e&&toFormData(e,this,t)}const prototype=AxiosURLSearchParams.prototype;function encode$1(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(e,t,n){if(!t)return e;const r=n&&n.encode||encode$1,o=n&&n.serialize;let i;if(i=o?o(t,n):utils$1.isURLSearchParams(t)?t.toString():new AxiosURLSearchParams(t,n).toString(r),i){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}prototype.append=function(e,t){this._pairs.push([e,t])},prototype.toString=function(e){const t=e?function(t){return e.call(this,t,encode$2)}:encode$2;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};class InterceptorManager{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){utils$1.forEach(this.handlers,(function(t){null!==t&&e(t)}))}}const transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1="undefined"!=typeof URLSearchParams?URLSearchParams:AxiosURLSearchParams,FormData$1="undefined"!=typeof FormData?FormData:null,Blob$1="undefined"!=typeof Blob?Blob:null,platform$1={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv="undefined"!=typeof window&&"undefined"!=typeof document,_navigator="object"==typeof navigator&&navigator||void 0,hasStandardBrowserEnv=hasBrowserEnv&&(!_navigator||["ReactNative","NativeScript","NS"].indexOf(_navigator.product)<0),hasStandardBrowserWebWorkerEnv="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,origin=hasBrowserEnv&&window.location.href||"http://localhost",utils=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:hasBrowserEnv,hasStandardBrowserEnv:hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv:hasStandardBrowserWebWorkerEnv,navigator:_navigator,origin:origin},Symbol.toStringTag,{value:"Module"})),platform={...utils,...platform$1};function toURLEncodedForm(e,t){return toFormData(e,new platform.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return platform.isNode&&utils$1.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}function parsePropPath(e){return utils$1.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}function arrayToObject(e){const t={},n=Object.keys(e);let r;const o=n.length;let i;for(r=0;r<o;r++)i=n[r],t[i]=e[i];return t}function formDataToJSON(e){function t(e,n,r,o){let i=e[o++];if("__proto__"===i)return!0;const a=Number.isFinite(+i),s=o>=e.length;if(i=!i&&utils$1.isArray(r)?r.length:i,s)return utils$1.hasOwnProp(r,i)?r[i]=[r[i],n]:r[i]=n,!a;r[i]&&utils$1.isObject(r[i])||(r[i]=[]);return t(e,n,r[i],o)&&utils$1.isArray(r[i])&&(r[i]=arrayToObject(r[i])),!a}if(utils$1.isFormData(e)&&utils$1.isFunction(e.entries)){const n={};return utils$1.forEachEntry(e,((e,r)=>{t(parsePropPath(e),r,n,0)})),n}return null}function stringifySafely(e,t,n){if(utils$1.isString(e))try{return(t||JSON.parse)(e),utils$1.trim(e)}catch(r){if("SyntaxError"!==r.name)throw r}return(n||JSON.stringify)(e)}const defaults={transitional:transitionalDefaults,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,o=utils$1.isObject(e);o&&utils$1.isHTMLForm(e)&&(e=new FormData(e));if(utils$1.isFormData(e))return r?JSON.stringify(formDataToJSON(e)):e;if(utils$1.isArrayBuffer(e)||utils$1.isBuffer(e)||utils$1.isStream(e)||utils$1.isFile(e)||utils$1.isBlob(e)||utils$1.isReadableStream(e))return e;if(utils$1.isArrayBufferView(e))return e.buffer;if(utils$1.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let i;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(e,this.formSerializer).toString();if((i=utils$1.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return toFormData(i?{"files[]":e}:e,t&&new t,this.formSerializer)}}return o||r?(t.setContentType("application/json",!1),stringifySafely(e)):e}],transformResponse:[function(e){const t=this.transitional||defaults.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(utils$1.isResponse(e)||utils$1.isReadableStream(e))return e;if(e&&utils$1.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(o){if(n){if("SyntaxError"===o.name)throw AxiosError.from(o,AxiosError.ERR_BAD_RESPONSE,this,null,this.response);throw o}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$1.forEach(["delete","get","head","post","put","patch"],(e=>{defaults.headers[e]={}}));const ignoreDuplicateOf=utils$1.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=e=>{const t={};let n,r,o;return e&&e.split("\n").forEach((function(e){o=e.indexOf(":"),n=e.substring(0,o).trim().toLowerCase(),r=e.substring(o+1).trim(),!n||t[n]&&ignoreDuplicateOf[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t},$internals=Symbol("internals");function normalizeHeader(e){return e&&String(e).trim().toLowerCase()}function normalizeValue(e){return!1===e||null==e?e:utils$1.isArray(e)?e.map(normalizeValue):String(e)}function parseTokens(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const isValidHeaderName=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function matchHeaderValue(e,t,n,r,o){return utils$1.isFunction(r)?r.call(this,t,n):(o&&(t=n),utils$1.isString(t)?utils$1.isString(r)?-1!==t.indexOf(r):utils$1.isRegExp(r)?r.test(t):void 0:void 0)}function formatHeader(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}function buildAccessors(e,t){const n=utils$1.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,o){return this[r].call(this,t,e,n,o)},configurable:!0})}))}class AxiosHeaders{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function o(e,t,n){const o=normalizeHeader(t);if(!o)throw new Error("header name must be a non-empty string");const i=utils$1.findKey(r,o);(!i||void 0===r[i]||!0===n||void 0===n&&!1!==r[i])&&(r[i||t]=normalizeValue(e))}const i=(e,t)=>utils$1.forEach(e,((e,n)=>o(e,n,t)));if(utils$1.isPlainObject(e)||e instanceof this.constructor)i(e,t);else if(utils$1.isString(e)&&(e=e.trim())&&!isValidHeaderName(e))i(parseHeaders(e),t);else if(utils$1.isHeaders(e))for(const[a,s]of e.entries())o(s,a,n);else null!=e&&o(t,e,n);return this}get(e,t){if(e=normalizeHeader(e)){const n=utils$1.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return parseTokens(e);if(utils$1.isFunction(t))return t.call(this,e,n);if(utils$1.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=normalizeHeader(e)){const n=utils$1.findKey(this,e);return!(!n||void 0===this[n]||t&&!matchHeaderValue(this,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function o(e){if(e=normalizeHeader(e)){const o=utils$1.findKey(n,e);!o||t&&!matchHeaderValue(n,n[o],o,t)||(delete n[o],r=!0)}}return utils$1.isArray(e)?e.forEach(o):o(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const o=t[n];e&&!matchHeaderValue(this,this[o],o,e,!0)||(delete this[o],r=!0)}return r}normalize(e){const t=this,n={};return utils$1.forEach(this,((r,o)=>{const i=utils$1.findKey(n,o);if(i)return t[i]=normalizeValue(r),void delete t[o];const a=e?formatHeader(o):String(o).trim();a!==o&&delete t[o],t[a]=normalizeValue(r),n[a]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return utils$1.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&utils$1.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach((e=>n.set(e))),n}static accessor(e){const t=(this[$internals]=this[$internals]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=normalizeHeader(e);t[r]||(buildAccessors(n,e),t[r]=!0)}return utils$1.isArray(e)?e.forEach(r):r(e),this}}function transformData(e,t){const n=this||defaults,r=t||n,o=AxiosHeaders.from(r.headers);let i=r.data;return utils$1.forEach(e,(function(e){i=e.call(n,i,o.normalize(),t?t.status:void 0)})),o.normalize(),i}function isCancel(e){return!(!e||!e.__CANCEL__)}function CanceledError(e,t,n){AxiosError.call(this,null==e?"canceled":e,AxiosError.ERR_CANCELED,t,n),this.name="CanceledError"}function settle(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new AxiosError("Request failed with status code "+n.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}function parseProtocol(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function speedometer(e,t){e=e||10;const n=new Array(e),r=new Array(e);let o,i=0,a=0;return t=void 0!==t?t:1e3,function(s){const c=Date.now(),l=r[a];o||(o=c),n[i]=s,r[i]=c;let u=a,d=0;for(;u!==i;)d+=n[u++],u%=e;if(i=(i+1)%e,i===a&&(a=(a+1)%e),c-o<t)return;const A=l&&c-l;return A?Math.round(1e3*d/A):void 0}}function throttle(e,t){let n,r,o=0,i=1e3/t;const a=(t,i=Date.now())=>{o=i,n=null,r&&(clearTimeout(r),r=null),e.apply(null,t)};return[(...e)=>{const t=Date.now(),s=t-o;s>=i?a(e,t):(n=e,r||(r=setTimeout((()=>{r=null,a(n)}),i-s)))},()=>n&&a(n)]}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),utils$1.reduceDescriptors(AxiosHeaders.prototype,(({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[n]=e}}})),utils$1.freezeMethods(AxiosHeaders),utils$1.inherits(CanceledError,AxiosError,{__CANCEL__:!0});const progressEventReducer=(e,t,n=3)=>{let r=0;const o=speedometer(50,250);return throttle((n=>{const i=n.loaded,a=n.lengthComputable?n.total:void 0,s=i-r,c=o(s);r=i;e({loaded:i,total:a,progress:a?i/a:void 0,bytes:s,rate:c||void 0,estimated:c&&a&&i<=a?(a-i)/c:void 0,event:n,lengthComputable:null!=a,[t?"download":"upload"]:!0})}),n)},progressEventDecorator=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},asyncDecorator=e=>(...t)=>utils$1.asap((()=>e(...t))),isURLSameOrigin=platform.hasStandardBrowserEnv?function(){const e=platform.navigator&&/(msie|trident)/i.test(platform.navigator.userAgent),t=document.createElement("a");let n;function r(n){let r=n;return e&&(t.setAttribute("href",r),r=t.href),t.setAttribute("href",r),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=r(window.location.href),function(e){const t=utils$1.isString(e)?r(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return function(){return!0}}(),cookies=platform.hasStandardBrowserEnv?{write(e,t,n,r,o,i){const a=[e+"="+encodeURIComponent(t)];utils$1.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),utils$1.isString(r)&&a.push("path="+r),utils$1.isString(o)&&a.push("domain="+o),!0===i&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function isAbsoluteURL(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function combineURLs(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function buildFullPath(e,t){return e&&!isAbsoluteURL(t)?combineURLs(e,t):t}const headersToObject=e=>e instanceof AxiosHeaders?{...e}:e;function mergeConfig(e,t){t=t||{};const n={};function r(e,t,n){return utils$1.isPlainObject(e)&&utils$1.isPlainObject(t)?utils$1.merge.call({caseless:n},e,t):utils$1.isPlainObject(t)?utils$1.merge({},t):utils$1.isArray(t)?t.slice():t}function o(e,t,n){return utils$1.isUndefined(t)?utils$1.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function i(e,t){if(!utils$1.isUndefined(t))return r(void 0,t)}function a(e,t){return utils$1.isUndefined(t)?utils$1.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function s(n,o,i){return i in t?r(n,o):i in e?r(void 0,n):void 0}const c={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:(e,t)=>o(headersToObject(e),headersToObject(t),!0)};return utils$1.forEach(Object.keys(Object.assign({},e,t)),(function(r){const i=c[r]||o,a=i(e[r],t[r],r);utils$1.isUndefined(a)&&i!==s||(n[r]=a)})),n}const resolveConfig=e=>{const t=mergeConfig({},e);let n,{data:r,withXSRFToken:o,xsrfHeaderName:i,xsrfCookieName:a,headers:s,auth:c}=t;if(t.headers=s=AxiosHeaders.from(s),t.url=buildURL(buildFullPath(t.baseURL,t.url),e.params,e.paramsSerializer),c&&s.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),utils$1.isFormData(r))if(platform.hasStandardBrowserEnv||platform.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if(!1!==(n=s.getContentType())){const[e,...t]=n?n.split(";").map((e=>e.trim())).filter(Boolean):[];s.setContentType([e||"multipart/form-data",...t].join("; "))}if(platform.hasStandardBrowserEnv&&(o&&utils$1.isFunction(o)&&(o=o(t)),o||!1!==o&&isURLSameOrigin(t.url))){const e=i&&a&&cookies.read(a);e&&s.set(i,e)}return t},isXHRAdapterSupported="undefined"!=typeof XMLHttpRequest,xhrAdapter=isXHRAdapterSupported&&function(e){return new Promise((function(t,n){const r=resolveConfig(e);let o=r.data;const i=AxiosHeaders.from(r.headers).normalize();let a,s,c,l,u,{responseType:d,onUploadProgress:A,onDownloadProgress:p}=r;function h(){l&&l(),u&&u(),r.cancelToken&&r.cancelToken.unsubscribe(a),r.signal&&r.signal.removeEventListener("abort",a)}let f=new XMLHttpRequest;function g(){if(!f)return;const r=AxiosHeaders.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders());settle((function(e){t(e),h()}),(function(e){n(e),h()}),{data:d&&"text"!==d&&"json"!==d?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:r,config:e,request:f}),f=null}f.open(r.method.toUpperCase(),r.url,!0),f.timeout=r.timeout,"onloadend"in f?f.onloadend=g:f.onreadystatechange=function(){f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))&&setTimeout(g)},f.onabort=function(){f&&(n(new AxiosError("Request aborted",AxiosError.ECONNABORTED,e,f)),f=null)},f.onerror=function(){n(new AxiosError("Network Error",AxiosError.ERR_NETWORK,e,f)),f=null},f.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const o=r.transitional||transitionalDefaults;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new AxiosError(t,o.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,e,f)),f=null},void 0===o&&i.setContentType(null),"setRequestHeader"in f&&utils$1.forEach(i.toJSON(),(function(e,t){f.setRequestHeader(t,e)})),utils$1.isUndefined(r.withCredentials)||(f.withCredentials=!!r.withCredentials),d&&"json"!==d&&(f.responseType=r.responseType),p&&([c,u]=progressEventReducer(p,!0),f.addEventListener("progress",c)),A&&f.upload&&([s,l]=progressEventReducer(A),f.upload.addEventListener("progress",s),f.upload.addEventListener("loadend",l)),(r.cancelToken||r.signal)&&(a=t=>{f&&(n(!t||t.type?new CanceledError(null,e,f):t),f.abort(),f=null)},r.cancelToken&&r.cancelToken.subscribe(a),r.signal&&(r.signal.aborted?a():r.signal.addEventListener("abort",a)));const m=parseProtocol(r.url);m&&-1===platform.protocols.indexOf(m)?n(new AxiosError("Unsupported protocol "+m+":",AxiosError.ERR_BAD_REQUEST,e)):f.send(o||null)}))},composeSignals=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const o=function(e){if(!n){n=!0,a();const t=e instanceof Error?e:this.reason;r.abort(t instanceof AxiosError?t:new CanceledError(t instanceof Error?t.message:t))}};let i=t&&setTimeout((()=>{i=null,o(new AxiosError(`timeout ${t} of ms exceeded`,AxiosError.ETIMEDOUT))}),t);const a=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(o):e.removeEventListener("abort",o)})),e=null)};e.forEach((e=>e.addEventListener("abort",o)));const{signal:s}=r;return s.unsubscribe=()=>utils$1.asap(a),s}},streamChunk=function*(e,t){let n=e.byteLength;if(n<t)return void(yield e);let r,o=0;for(;o<n;)r=o+t,yield e.slice(o,r),o=r},readBytes=async function*(e,t){for await(const n of readStream(e))yield*streamChunk(n,t)},readStream=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},trackStream=(e,t,n,r)=>{const o=readBytes(e,t);let i,a=0,s=e=>{i||(i=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await o.next();if(t)return s(),void e.close();let i=r.byteLength;if(n){let e=a+=i;n(e)}e.enqueue(new Uint8Array(r))}catch(t){throw s(t),t}},cancel:e=>(s(e),o.return())},{highWaterMark:2})},isFetchSupported="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,isReadableStreamSupported=isFetchSupported&&"function"==typeof ReadableStream,encodeText=isFetchSupported&&("function"==typeof TextEncoder?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),test=(e,...t)=>{try{return!!e(...t)}catch(n){return!1}},supportsRequestStream=isReadableStreamSupported&&test((()=>{let e=!1;const t=new Request(platform.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),DEFAULT_CHUNK_SIZE=65536,supportsResponseStream=isReadableStreamSupported&&test((()=>utils$1.isReadableStream(new Response("").body))),resolvers={stream:supportsResponseStream&&(e=>e.body)};var res;isFetchSupported&&(res=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!resolvers[e]&&(resolvers[e]=utils$1.isFunction(res[e])?t=>t[e]():(t,n)=>{throw new AxiosError(`Response type '${e}' is not supported`,AxiosError.ERR_NOT_SUPPORT,n)})})));const getBodyLength=async e=>{if(null==e)return 0;if(utils$1.isBlob(e))return e.size;if(utils$1.isSpecCompliantForm(e)){const t=new Request(platform.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return utils$1.isArrayBufferView(e)||utils$1.isArrayBuffer(e)?e.byteLength:(utils$1.isURLSearchParams(e)&&(e+=""),utils$1.isString(e)?(await encodeText(e)).byteLength:void 0)},resolveBodyLength=async(e,t)=>{const n=utils$1.toFiniteNumber(e.getContentLength());return null==n?getBodyLength(t):n},fetchAdapter=isFetchSupported&&(async e=>{let{url:t,method:n,data:r,signal:o,cancelToken:i,timeout:a,onDownloadProgress:s,onUploadProgress:c,responseType:l,headers:u,withCredentials:d="same-origin",fetchOptions:A}=resolveConfig(e);l=l?(l+"").toLowerCase():"text";let p,h=composeSignals([o,i&&i.toAbortSignal()],a);const f=h&&h.unsubscribe&&(()=>{h.unsubscribe()});let g;try{if(c&&supportsRequestStream&&"get"!==n&&"head"!==n&&0!==(g=await resolveBodyLength(u,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});if(utils$1.isFormData(r)&&(e=n.headers.get("content-type"))&&u.setContentType(e),n.body){const[e,t]=progressEventDecorator(g,progressEventReducer(asyncDecorator(c)));r=trackStream(n.body,DEFAULT_CHUNK_SIZE,e,t)}}utils$1.isString(d)||(d=d?"include":"omit");const o="credentials"in Request.prototype;p=new Request(t,{...A,signal:h,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:o?d:void 0});let i=await fetch(p);const a=supportsResponseStream&&("stream"===l||"response"===l);if(supportsResponseStream&&(s||a&&f)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=i[t]}));const t=utils$1.toFiniteNumber(i.headers.get("content-length")),[n,r]=s&&progressEventDecorator(t,progressEventReducer(asyncDecorator(s),!0))||[];i=new Response(trackStream(i.body,DEFAULT_CHUNK_SIZE,n,(()=>{r&&r(),f&&f()})),e)}l=l||"text";let m=await resolvers[utils$1.findKey(resolvers,l)||"text"](i,e);return!a&&f&&f(),await new Promise(((t,n)=>{settle(t,n,{data:m,headers:AxiosHeaders.from(i.headers),status:i.status,statusText:i.statusText,config:e,request:p})}))}catch(m){if(f&&f(),m&&"TypeError"===m.name&&/fetch/i.test(m.message))throw Object.assign(new AxiosError("Network Error",AxiosError.ERR_NETWORK,e,p),{cause:m.cause||m});throw AxiosError.from(m,m&&m.code,e,p)}}),knownAdapters={http:httpAdapter,xhr:xhrAdapter,fetch:fetchAdapter};utils$1.forEach(knownAdapters,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}}));const renderReason=e=>`- ${e}`,isResolvedHandle=e=>utils$1.isFunction(e)||null===e||!1===e,adapters={getAdapter:e=>{e=utils$1.isArray(e)?e:[e];const{length:t}=e;let n,r;const o={};for(let i=0;i<t;i++){let t;if(n=e[i],r=n,!isResolvedHandle(n)&&(r=knownAdapters[(t=String(n)).toLowerCase()],void 0===r))throw new AxiosError(`Unknown adapter '${t}'`);if(r)break;o[t||"#"+i]=r}if(!r){const e=Object.entries(o).map((([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build")));throw new AxiosError("There is no suitable adapter to dispatch the request "+(t?e.length>1?"since :\n"+e.map(renderReason).join("\n"):" "+renderReason(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return r},adapters:knownAdapters};function throwIfCancellationRequested(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new CanceledError(null,e)}function dispatchRequest(e){throwIfCancellationRequested(e),e.headers=AxiosHeaders.from(e.headers),e.data=transformData.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return adapters.getAdapter(e.adapter||defaults.adapter)(e).then((function(t){return throwIfCancellationRequested(e),t.data=transformData.call(e,e.transformResponse,t),t.headers=AxiosHeaders.from(t.headers),t}),(function(t){return isCancel(t)||(throwIfCancellationRequested(e),t&&t.response&&(t.response.data=transformData.call(e,e.transformResponse,t.response),t.response.headers=AxiosHeaders.from(t.response.headers))),Promise.reject(t)}))}const VERSION$2="1.7.7",validators$1={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{validators$1[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const deprecatedWarnings={};function assertOptions(e,t,n){if("object"!=typeof e)throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let o=r.length;for(;o-- >0;){const i=r[o],a=t[i];if(a){const t=e[i],n=void 0===t||a(t,i,e);if(!0!==n)throw new AxiosError("option "+i+" must be "+n,AxiosError.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new AxiosError("Unknown option "+i,AxiosError.ERR_BAD_OPTION)}}validators$1.transitional=function(e,t,n){function r(e,t){return"[Axios v"+VERSION$2+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,o,i)=>{if(!1===e)throw new AxiosError(r(o," has been removed"+(t?" in "+t:"")),AxiosError.ERR_DEPRECATED);return t&&!deprecatedWarnings[o]&&(deprecatedWarnings[o]=!0,console.warn(r(o," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,o,i)}};const validator={assertOptions:assertOptions,validators:validators$1},validators=validator.validators;class Axios{constructor(e){this.defaults=e,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e;Error.captureStackTrace?Error.captureStackTrace(e={}):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(r){}}throw n}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=mergeConfig(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:o}=t;void 0!==n&&validator.assertOptions(n,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),null!=r&&(utils$1.isFunction(r)?t.paramsSerializer={serialize:r}:validator.assertOptions(r,{encode:validators.function,serialize:validators.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i=o&&utils$1.merge(o.common,o[t.method]);o&&utils$1.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete o[e]})),t.headers=AxiosHeaders.concat(i,o);const a=[];let s=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(s=s&&e.synchronous,a.unshift(e.fulfilled,e.rejected))}));const c=[];let l;this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));let u,d=0;if(!s){const e=[dispatchRequest.bind(this),void 0];for(e.unshift.apply(e,a),e.push.apply(e,c),u=e.length,l=Promise.resolve(t);d<u;)l=l.then(e[d++],e[d++]);return l}u=a.length;let A=t;for(d=0;d<u;){const e=a[d++],t=a[d++];try{A=e(A)}catch(p){t.call(this,p);break}}try{l=dispatchRequest.call(this,A)}catch(p){return Promise.reject(p)}for(d=0,u=c.length;d<u;)l=l.then(c[d++],c[d++]);return l}getUri(e){return buildURL(buildFullPath((e=mergeConfig(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}utils$1.forEach(["delete","get","head","options"],(function(e){Axios.prototype[e]=function(t,n){return this.request(mergeConfig(n||{},{method:e,url:t,data:(n||{}).data}))}})),utils$1.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,o){return this.request(mergeConfig(o||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}Axios.prototype[e]=t(),Axios.prototype[e+"Form"]=t(!0)}));class CancelToken{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,o){n.reason||(n.reason=new CanceledError(e,r,o),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new CancelToken((function(t){e=t})),cancel:e}}}function spread(e){return function(t){return e.apply(null,t)}}function isAxiosError(e){return utils$1.isObject(e)&&!0===e.isAxiosError}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};function createInstance(e){const t=new Axios(e),n=bind(Axios.prototype.request,t);return utils$1.extend(n,Axios.prototype,t,{allOwnKeys:!0}),utils$1.extend(n,t,null,{allOwnKeys:!0}),n.create=function(t){return createInstance(mergeConfig(e,t))},n}Object.entries(HttpStatusCode).forEach((([e,t])=>{HttpStatusCode[t]=e}));const axios=createInstance(defaults);axios.Axios=Axios,axios.CanceledError=CanceledError,axios.CancelToken=CancelToken,axios.isCancel=isCancel,axios.VERSION=VERSION$2,axios.toFormData=toFormData,axios.AxiosError=AxiosError,axios.Cancel=axios.CanceledError,axios.all=function(e){return Promise.all(e)},axios.spread=spread,axios.isAxiosError=isAxiosError,axios.mergeConfig=mergeConfig,axios.AxiosHeaders=AxiosHeaders,axios.formToJSON=e=>formDataToJSON(utils$1.isHTMLForm(e)?new FormData(e):e),axios.getAdapter=adapters.getAdapter,axios.HttpStatusCode=HttpStatusCode,axios.default=axios;const name$2="@firebase/installations",version$2="0.6.9",PENDING_TIMEOUT_MS=1e4,PACKAGE_VERSION=`w:${version$2}`,INTERNAL_AUTH_VERSION="FIS_v2",INSTALLATIONS_API_URL="https://firebaseinstallations.googleapis.com/v1",TOKEN_EXPIRATION_BUFFER=36e5,SERVICE="installations",SERVICE_NAME="Installations",ERROR_DESCRIPTION_MAP={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ERROR_FACTORY$1=new ErrorFactory(SERVICE,SERVICE_NAME,ERROR_DESCRIPTION_MAP);function isServerError(e){return e instanceof FirebaseError&&e.code.includes("request-failed")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getInstallationsEndpoint({projectId:e}){return`${INSTALLATIONS_API_URL}/projects/${e}/installations`}function extractAuthTokenInfoFromResponse(e){return{token:e.token,requestStatus:2,expiresIn:getExpiresInFromResponseExpiresIn(e.expiresIn),creationTime:Date.now()}}async function getErrorFromResponse(e,t){const n=(await t.json()).error;return ERROR_FACTORY$1.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function getHeaders$1({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function getHeadersWithAuth(e,{refreshToken:t}){const n=getHeaders$1(e);return n.append("Authorization",getAuthorizationHeader(t)),n}async function retryIfServerError(e){const t=await e();return t.status>=500&&t.status<600?e():t}function getExpiresInFromResponseExpiresIn(e){return Number(e.replace("s","000"))}function getAuthorizationHeader(e){return`${INTERNAL_AUTH_VERSION} ${e}`}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function createInstallationRequest({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const r=getInstallationsEndpoint(e),o=getHeaders$1(e),i=t.getImmediate({optional:!0});if(i){const e=await i.getHeartbeatsHeader();e&&o.append("x-firebase-client",e)}const a={fid:n,authVersion:INTERNAL_AUTH_VERSION,appId:e.appId,sdkVersion:PACKAGE_VERSION},s={method:"POST",headers:o,body:JSON.stringify(a)},c=await retryIfServerError((()=>fetch(r,s)));if(c.ok){const e=await c.json();return{fid:e.fid||n,registrationStatus:2,refreshToken:e.refreshToken,authToken:extractAuthTokenInfoFromResponse(e.authToken)}}throw await getErrorFromResponse("Create Installation",c)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sleep(e){return new Promise((t=>{setTimeout(t,e)}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bufferToBase64UrlSafe(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VALID_FID_PATTERN=/^[cdef][\w-]{21}$/,INVALID_FID="";function generateFid(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=encode(e);return VALID_FID_PATTERN.test(t)?t:INVALID_FID}catch(e){return INVALID_FID}}function encode(e){return bufferToBase64UrlSafe(e).substr(0,22)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getKey$1(e){return`${e.appName}!${e.appId}`}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fidChangeCallbacks=new Map;function fidChanged(e,t){const n=getKey$1(e);callFidChangeCallbacks(n,t),broadcastFidChange(n,t)}function callFidChangeCallbacks(e,t){const n=fidChangeCallbacks.get(e);if(n)for(const r of n)r(t)}function broadcastFidChange(e,t){const n=getBroadcastChannel();n&&n.postMessage({key:e,fid:t}),closeBroadcastChannel()}let broadcastChannel=null;function getBroadcastChannel(){return!broadcastChannel&&"BroadcastChannel"in self&&(broadcastChannel=new BroadcastChannel("[Firebase] FID Change"),broadcastChannel.onmessage=e=>{callFidChangeCallbacks(e.data.key,e.data.fid)}),broadcastChannel}function closeBroadcastChannel(){0===fidChangeCallbacks.size&&broadcastChannel&&(broadcastChannel.close(),broadcastChannel=null)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DATABASE_NAME$1="firebase-installations-database",DATABASE_VERSION$1=1,OBJECT_STORE_NAME$1="firebase-installations-store";let dbPromise$1=null;function getDbPromise$1(){return dbPromise$1||(dbPromise$1=openDB(DATABASE_NAME$1,DATABASE_VERSION$1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(OBJECT_STORE_NAME$1)}})),dbPromise$1}async function set(e,t){const n=getKey$1(e),r=(await getDbPromise$1()).transaction(OBJECT_STORE_NAME$1,"readwrite"),o=r.objectStore(OBJECT_STORE_NAME$1),i=await o.get(n);return await o.put(t,n),await r.done,i&&i.fid===t.fid||fidChanged(e,t.fid),t}async function remove(e){const t=getKey$1(e),n=(await getDbPromise$1()).transaction(OBJECT_STORE_NAME$1,"readwrite");await n.objectStore(OBJECT_STORE_NAME$1).delete(t),await n.done}async function update(e,t){const n=getKey$1(e),r=(await getDbPromise$1()).transaction(OBJECT_STORE_NAME$1,"readwrite"),o=r.objectStore(OBJECT_STORE_NAME$1),i=await o.get(n),a=t(i);return void 0===a?await o.delete(n):await o.put(a,n),await r.done,!a||i&&i.fid===a.fid||fidChanged(e,a.fid),a}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function getInstallationEntry(e){let t;const n=await update(e.appConfig,(n=>{const r=updateOrCreateInstallationEntry(n),o=triggerRegistrationIfNecessary(e,r);return t=o.registrationPromise,o.installationEntry}));return n.fid===INVALID_FID?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}function updateOrCreateInstallationEntry(e){return clearTimedOutRequest(e||{fid:generateFid(),registrationStatus:0})}function triggerRegistrationIfNecessary(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(ERROR_FACTORY$1.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:registerInstallation(e,n)}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:waitUntilFidRegistration(e)}:{installationEntry:t}}async function registerInstallation(e,t){try{const n=await createInstallationRequest(e,t);return set(e.appConfig,n)}catch(n){throw isServerError(n)&&409===n.customData.serverCode?await remove(e.appConfig):await set(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}async function waitUntilFidRegistration(e){let t=await updateInstallationRequest(e.appConfig);for(;1===t.registrationStatus;)await sleep(100),t=await updateInstallationRequest(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await getInstallationEntry(e);return n||t}return t}function updateInstallationRequest(e){return update(e,(e=>{if(!e)throw ERROR_FACTORY$1.create("installation-not-found");return clearTimedOutRequest(e)}))}function clearTimedOutRequest(e){return hasInstallationRequestTimedOut(e)?{fid:e.fid,registrationStatus:0}:e}function hasInstallationRequestTimedOut(e){return 1===e.registrationStatus&&e.registrationTime+PENDING_TIMEOUT_MS<Date.now()}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function generateAuthTokenRequest({appConfig:e,heartbeatServiceProvider:t},n){const r=getGenerateAuthTokenEndpoint(e,n),o=getHeadersWithAuth(e,n),i=t.getImmediate({optional:!0});if(i){const e=await i.getHeartbeatsHeader();e&&o.append("x-firebase-client",e)}const a={installation:{sdkVersion:PACKAGE_VERSION,appId:e.appId}},s={method:"POST",headers:o,body:JSON.stringify(a)},c=await retryIfServerError((()=>fetch(r,s)));if(c.ok){return extractAuthTokenInfoFromResponse(await c.json())}throw await getErrorFromResponse("Generate Auth Token",c)}function getGenerateAuthTokenEndpoint(e,{fid:t}){return`${getInstallationsEndpoint(e)}/${t}/authTokens:generate`}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function refreshAuthToken(e,t=!1){let n;const r=await update(e.appConfig,(r=>{if(!isEntryRegistered(r))throw ERROR_FACTORY$1.create("not-registered");const o=r.authToken;if(!t&&isAuthTokenValid(o))return r;if(1===o.requestStatus)return n=waitUntilAuthTokenRequest(e,t),r;{if(!navigator.onLine)throw ERROR_FACTORY$1.create("app-offline");const t=makeAuthTokenRequestInProgressEntry(r);return n=fetchAuthTokenFromServer(e,t),t}}));return n?await n:r.authToken}async function waitUntilAuthTokenRequest(e,t){let n=await updateAuthTokenRequest(e.appConfig);for(;1===n.authToken.requestStatus;)await sleep(100),n=await updateAuthTokenRequest(e.appConfig);const r=n.authToken;return 0===r.requestStatus?refreshAuthToken(e,t):r}function updateAuthTokenRequest(e){return update(e,(e=>{if(!isEntryRegistered(e))throw ERROR_FACTORY$1.create("not-registered");return hasAuthTokenRequestTimedOut(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e}))}async function fetchAuthTokenFromServer(e,t){try{const n=await generateAuthTokenRequest(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await set(e.appConfig,r),n}catch(n){if(!isServerError(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await set(e.appConfig,n)}else await remove(e.appConfig);throw n}}function isEntryRegistered(e){return void 0!==e&&2===e.registrationStatus}function isAuthTokenValid(e){return 2===e.requestStatus&&!isAuthTokenExpired(e)}function isAuthTokenExpired(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+TOKEN_EXPIRATION_BUFFER}function makeAuthTokenRequestInProgressEntry(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function hasAuthTokenRequestTimedOut(e){return 1===e.requestStatus&&e.requestTime+PENDING_TIMEOUT_MS<Date.now()}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function getId(e){const t=e,{installationEntry:n,registrationPromise:r}=await getInstallationEntry(t);return r?r.catch(console.error):refreshAuthToken(t).catch(console.error),n.fid}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function getToken$2(e,t=!1){const n=e;await completeInstallationRegistration(n);return(await refreshAuthToken(n,t)).token}async function completeInstallationRegistration(e){const{registrationPromise:t}=await getInstallationEntry(e);t&&await t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function extractAppConfig$1(e){if(!e||!e.options)throw getMissingValueError$1("App Configuration");if(!e.name)throw getMissingValueError$1("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw getMissingValueError$1(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function getMissingValueError$1(e){return ERROR_FACTORY$1.create("missing-app-config-values",{valueName:e})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const INSTALLATIONS_NAME="installations",INSTALLATIONS_NAME_INTERNAL="installations-internal",publicFactory=e=>{const t=e.getProvider("app").getImmediate();return{app:t,appConfig:extractAppConfig$1(t),heartbeatServiceProvider:_getProvider(t,"heartbeat"),_delete:()=>Promise.resolve()}},internalFactory=e=>{const t=_getProvider(e.getProvider("app").getImmediate(),INSTALLATIONS_NAME).getImmediate();return{getId:()=>getId(t),getToken:e=>getToken$2(t,e)}};function registerInstallations(){_registerComponent(new Component(INSTALLATIONS_NAME,publicFactory,"PUBLIC")),_registerComponent(new Component(INSTALLATIONS_NAME_INTERNAL,internalFactory,"PRIVATE"))}registerInstallations(),registerVersion(name$2,version$2),registerVersion(name$2,version$2,"esm2017");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const DEFAULT_SW_PATH="/firebase-messaging-sw.js",DEFAULT_SW_SCOPE="/firebase-cloud-messaging-push-scope",DEFAULT_VAPID_KEY="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ENDPOINT="https://fcmregistrations.googleapis.com/v1",CONSOLE_CAMPAIGN_ID="google.c.a.c_id",CONSOLE_CAMPAIGN_NAME="google.c.a.c_l",CONSOLE_CAMPAIGN_TIME="google.c.a.ts",CONSOLE_CAMPAIGN_ANALYTICS_ENABLED="google.c.a.e";var MessageType$1,MessageType2,MessageType;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function arrayToBase64(e){const t=new Uint8Array(e);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function base64ToArray(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length);for(let o=0;o<n.length;++o)r[o]=n.charCodeAt(o);return r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */MessageType2=MessageType$1||(MessageType$1={}),MessageType2[MessageType2.DATA_MESSAGE=1]="DATA_MESSAGE",MessageType2[MessageType2.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION",function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"}(MessageType||(MessageType={}));const OLD_DB_NAME="fcm_token_details_db",OLD_DB_VERSION=5,OLD_OBJECT_STORE_NAME="fcm_token_object_Store";async function migrateOldDatabase(e){if("databases"in indexedDB){if(!(await indexedDB.databases()).map((e=>e.name)).includes(OLD_DB_NAME))return null}let t=null;return(await openDB(OLD_DB_NAME,OLD_DB_VERSION,{upgrade:async(n,r,o,i)=>{var a;if(r<2)return;if(!n.objectStoreNames.contains(OLD_OBJECT_STORE_NAME))return;const s=i.objectStore(OLD_OBJECT_STORE_NAME),c=await s.index("fcmSenderId").get(e);if(await s.clear(),c)if(2===r){const e=c;if(!e.auth||!e.p256dh||!e.endpoint)return;t={token:e.fcmToken,createTime:null!==(a=e.createTime)&&void 0!==a?a:Date.now(),subscriptionOptions:{auth:e.auth,p256dh:e.p256dh,endpoint:e.endpoint,swScope:e.swScope,vapidKey:"string"==typeof e.vapidKey?e.vapidKey:arrayToBase64(e.vapidKey)}}}else if(3===r){const e=c;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:arrayToBase64(e.auth),p256dh:arrayToBase64(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:arrayToBase64(e.vapidKey)}}}else if(4===r){const e=c;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:arrayToBase64(e.auth),p256dh:arrayToBase64(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:arrayToBase64(e.vapidKey)}}}}})).close(),await deleteDB(OLD_DB_NAME),await deleteDB("fcm_vapid_details_db"),await deleteDB("undefined"),checkTokenDetails(t)?t:null}function checkTokenDetails(e){if(!e||!e.subscriptionOptions)return!1;const{subscriptionOptions:t}=e;return"number"==typeof e.createTime&&e.createTime>0&&"string"==typeof e.token&&e.token.length>0&&"string"==typeof t.auth&&t.auth.length>0&&"string"==typeof t.p256dh&&t.p256dh.length>0&&"string"==typeof t.endpoint&&t.endpoint.length>0&&"string"==typeof t.swScope&&t.swScope.length>0&&"string"==typeof t.vapidKey&&t.vapidKey.length>0}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DATABASE_NAME="firebase-messaging-database",DATABASE_VERSION=1,OBJECT_STORE_NAME="firebase-messaging-store";let dbPromise=null;function getDbPromise(){return dbPromise||(dbPromise=openDB(DATABASE_NAME,DATABASE_VERSION,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(OBJECT_STORE_NAME)}})),dbPromise}async function dbGet(e){const t=getKey(e),n=await getDbPromise(),r=await n.transaction(OBJECT_STORE_NAME).objectStore(OBJECT_STORE_NAME).get(t);if(r)return r;{const t=await migrateOldDatabase(e.appConfig.senderId);if(t)return await dbSet(e,t),t}}async function dbSet(e,t){const n=getKey(e),r=(await getDbPromise()).transaction(OBJECT_STORE_NAME,"readwrite");return await r.objectStore(OBJECT_STORE_NAME).put(t,n),await r.done,t}function getKey({appConfig:e}){return e.appId}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERROR_MAP={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},ERROR_FACTORY=new ErrorFactory("messaging","Messaging",ERROR_MAP);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function requestGetToken(e,t){const n=await getHeaders(e),r=getBody(t),o={method:"POST",headers:n,body:JSON.stringify(r)};let i;try{const t=await fetch(getEndpoint(e.appConfig),o);i=await t.json()}catch(a){throw ERROR_FACTORY.create("token-subscribe-failed",{errorInfo:null==a?void 0:a.toString()})}if(i.error){const e=i.error.message;throw ERROR_FACTORY.create("token-subscribe-failed",{errorInfo:e})}if(!i.token)throw ERROR_FACTORY.create("token-subscribe-no-token");return i.token}async function requestUpdateToken(e,t){const n=await getHeaders(e),r=getBody(t.subscriptionOptions),o={method:"PATCH",headers:n,body:JSON.stringify(r)};let i;try{const n=await fetch(`${getEndpoint(e.appConfig)}/${t.token}`,o);i=await n.json()}catch(a){throw ERROR_FACTORY.create("token-update-failed",{errorInfo:null==a?void 0:a.toString()})}if(i.error){const e=i.error.message;throw ERROR_FACTORY.create("token-update-failed",{errorInfo:e})}if(!i.token)throw ERROR_FACTORY.create("token-update-no-token");return i.token}async function requestDeleteToken(e,t){const n={method:"DELETE",headers:await getHeaders(e)};try{const r=await fetch(`${getEndpoint(e.appConfig)}/${t}`,n),o=await r.json();if(o.error){const e=o.error.message;throw ERROR_FACTORY.create("token-unsubscribe-failed",{errorInfo:e})}}catch(r){throw ERROR_FACTORY.create("token-unsubscribe-failed",{errorInfo:null==r?void 0:r.toString()})}}function getEndpoint({projectId:e}){return`${ENDPOINT}/projects/${e}/registrations`}async function getHeaders({appConfig:e,installations:t}){const n=await t.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function getBody({p256dh:e,auth:t,endpoint:n,vapidKey:r}){const o={web:{endpoint:n,auth:t,p256dh:e}};return r!==DEFAULT_VAPID_KEY&&(o.web.applicationPubKey=r),o}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TOKEN_EXPIRATION_MS=6048e5;async function getTokenInternal(e){const t=await getPushSubscription(e.swRegistration,e.vapidKey),n={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:t.endpoint,auth:arrayToBase64(t.getKey("auth")),p256dh:arrayToBase64(t.getKey("p256dh"))},r=await dbGet(e.firebaseDependencies);if(r){if(isTokenValid(r.subscriptionOptions,n))return Date.now()>=r.createTime+TOKEN_EXPIRATION_MS?updateToken(e,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await requestDeleteToken(e.firebaseDependencies,r.token)}catch(o){console.warn(o)}return getNewToken(e.firebaseDependencies,n)}return getNewToken(e.firebaseDependencies,n)}async function updateToken(e,t){try{const n=await requestUpdateToken(e.firebaseDependencies,t),r=Object.assign(Object.assign({},t),{token:n,createTime:Date.now()});return await dbSet(e.firebaseDependencies,r),n}catch(n){throw n}}async function getNewToken(e,t){const n={token:await requestGetToken(e,t),createTime:Date.now(),subscriptionOptions:t};return await dbSet(e,n),n.token}async function getPushSubscription(e,t){const n=await e.pushManager.getSubscription();return n||e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:base64ToArray(t)})}function isTokenValid(e,t){const n=t.vapidKey===e.vapidKey,r=t.endpoint===e.endpoint,o=t.auth===e.auth,i=t.p256dh===e.p256dh;return n&&r&&o&&i}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function externalizePayload(e){const t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcmMessageId};return propagateNotificationPayload(t,e),propagateDataPayload(t,e),propagateFcmOptions(t,e),t}function propagateNotificationPayload(e,t){if(!t.notification)return;e.notification={};const n=t.notification.title;n&&(e.notification.title=n);const r=t.notification.body;r&&(e.notification.body=r);const o=t.notification.image;o&&(e.notification.image=o);const i=t.notification.icon;i&&(e.notification.icon=i)}function propagateDataPayload(e,t){t.data&&(e.data=t.data)}function propagateFcmOptions(e,t){var n,r,o,i,a;if(!t.fcmOptions&&!(null===(n=t.notification)||void 0===n?void 0:n.click_action))return;e.fcmOptions={};const s=null!==(o=null===(r=t.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==o?o:null===(i=t.notification)||void 0===i?void 0:i.click_action;s&&(e.fcmOptions.link=s);const c=null===(a=t.fcmOptions)||void 0===a?void 0:a.analytics_label;c&&(e.fcmOptions.analyticsLabel=c)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isConsoleMessage(e){return"object"==typeof e&&!!e&&CONSOLE_CAMPAIGN_ID in e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function extractAppConfig(e){if(!e||!e.options)throw getMissingValueError("App Configuration Object");if(!e.name)throw getMissingValueError("App Name");const t=["projectId","apiKey","appId","messagingSenderId"],{options:n}=e;for(const r of t)if(!n[r])throw getMissingValueError(r);return{appName:e.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function getMissingValueError(e){return ERROR_FACTORY.create("missing-app-config-values",{valueName:e})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MessagingService{constructor(e,t,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const r=extractAppConfig(e);this.firebaseDependencies={app:e,appConfig:r,installations:t,analyticsProvider:n}}_delete(){return Promise.resolve()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function registerDefaultSw(e){try{e.swRegistration=await navigator.serviceWorker.register(DEFAULT_SW_PATH,{scope:DEFAULT_SW_SCOPE}),e.swRegistration.update().catch((()=>{}))}catch(t){throw ERROR_FACTORY.create("failed-service-worker-registration",{browserErrorMessage:null==t?void 0:t.message})}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function updateSwReg(e,t){if(t||e.swRegistration||await registerDefaultSw(e),t||!e.swRegistration){if(!(t instanceof ServiceWorkerRegistration))throw ERROR_FACTORY.create("invalid-sw-registration");e.swRegistration=t}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function updateVapidKey(e,t){t?e.vapidKey=t:e.vapidKey||(e.vapidKey=DEFAULT_VAPID_KEY)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function getToken$1(e,t){if(!navigator)throw ERROR_FACTORY.create("only-available-in-window");if("default"===Notification.permission&&await Notification.requestPermission(),"granted"!==Notification.permission)throw ERROR_FACTORY.create("permission-blocked");return await updateVapidKey(e,null==t?void 0:t.vapidKey),await updateSwReg(e,null==t?void 0:t.serviceWorkerRegistration),getTokenInternal(e)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function logToScion(e,t,n){const r=getEventType(t);(await e.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[CONSOLE_CAMPAIGN_ID],message_name:n[CONSOLE_CAMPAIGN_NAME],message_time:n[CONSOLE_CAMPAIGN_TIME],message_device_time:Math.floor(Date.now()/1e3)})}function getEventType(e){switch(e){case MessageType.NOTIFICATION_CLICKED:return"notification_open";case MessageType.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function messageEventListener(e,t){const n=t.data;if(!n.isFirebaseMessaging)return;e.onMessageHandler&&n.messageType===MessageType.PUSH_RECEIVED&&("function"==typeof e.onMessageHandler?e.onMessageHandler(externalizePayload(n)):e.onMessageHandler.next(externalizePayload(n)));const r=n.data;isConsoleMessage(r)&&"1"===r[CONSOLE_CAMPAIGN_ANALYTICS_ENABLED]&&await logToScion(e,n.messageType,r)}const name$1="@firebase/messaging",version$1="0.12.12",WindowMessagingFactory=e=>{const t=new MessagingService(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",(e=>messageEventListener(t,e))),t},WindowMessagingInternalFactory=e=>{const t=e.getProvider("messaging").getImmediate();return{getToken:e=>getToken$1(t,e)}};function registerMessagingInWindow(){_registerComponent(new Component("messaging",WindowMessagingFactory,"PUBLIC")),_registerComponent(new Component("messaging-internal",WindowMessagingInternalFactory,"PRIVATE")),registerVersion(name$1,version$1),registerVersion(name$1,version$1,"esm2017")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function isWindowSupported(){try{await validateIndexedDBOpenable()}catch(e){return!1}return"undefined"!=typeof window&&isIndexedDBAvailable()&&areCookiesEnabled()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function onMessage$1(e,t){if(!navigator)throw ERROR_FACTORY.create("only-available-in-window");return e.onMessageHandler=t,()=>{e.onMessageHandler=null}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getMessagingInWindow(e=getApp()){return isWindowSupported().then((e=>{if(!e)throw ERROR_FACTORY.create("unsupported-browser")}),(e=>{throw ERROR_FACTORY.create("indexed-db-unsupported")})),_getProvider(getModularInstance(e),"messaging").getImmediate()}async function getToken(e,t){return getToken$1(e=getModularInstance(e),t)}function onMessage(e,t){return onMessage$1(e=getModularInstance(e),t)}registerMessagingInWindow();var name="firebase",version="10.14.1";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
registerVersion(name,version,"app"),console.log(" firebase-init.js");let _firebaseApp=null;function firebaseApp(){return null==_firebaseApp&&initFirebase(),_firebaseApp}function initFirebase(){console.log("initFirebase"),_firebaseApp=initializeApp(firebaseConfig)}console.log(" firebase-messaging.js");let _firebaseMessaging=null,_tryTokenTimer,limitCount=0;function getFirebaseToken(e){getToken(_firebaseMessaging,{vapidKey:firebaseConfig.vapidKey}).then((t=>{null!=t&&null!=t&&""!=t?(e(t),console.log(` firebase/messagingtoken\n${t}`),appTrackPushToken("success"),useAppDataStore().firebaseStatus=`\n${t}`):(console.error(" firebase/messagingtoken"),useAppDataStore().firebaseStatus="firebase/messagingtoken")})).catch((t=>{console.error(` firebase/messagingtoken\n${t.message}`),useAppDataStore().firebaseStatus=`firebase/messagingtoken\n${t.message}`,useAppDataStore().firebaseStatus=" token 10s",null!=_tryTokenTimer&&(_tryTokenTimer=clearTimeout(_tryTokenTimer)),limitCount<=2?_tryTokenTimer=setTimeout((()=>{useAppDataStore().firebaseStatus=" 10stoken",limitCount+=1,getFirebaseToken(e)}),1e4):useAppDataStore().firebaseStatus=" token2"}))}function requestNotification(e){"Notification"in window?"granted"==Notification.permission?(console.log("  firebaseToken"),useAppDataStore().firebaseStatus="  firebaseToken",getFirebaseToken((t=>{e(t)}))):"denied"!=Notification.permission&&"granted"!=Notification.permission&&(useAppDataStore().firebaseStatus="  ",Notification.requestPermission().then((t=>{useAppDataStore().firebaseStatus=`  ${t}`,"granted"==t?(console.log("  firebaseToken"),useAppDataStore().firebaseStatus=" firebaseToken",getFirebaseToken((t=>{e(t)}))):console.log("  ")}))):useAppDataStore().firebaseStatus=" "}function configFirebaseMessage(){isWindowSupported().then((e=>{e?(console.log(" firebase/messaging"),null==firebaseApp()||null==firebaseApp()?useAppDataStore().firebaseStatus="firebase":(null==_firebaseMessaging&&(_firebaseMessaging=getMessagingInWindow(firebaseApp())),null!=_firebaseMessaging?(onMessage(_firebaseMessaging,(e=>{console.log(` =${JSON.stringify(e)}`)})),requestNotification((e=>{console.log(` firebaseToken ${e}`),netUploadFirebase({firebaseToken:e})}))):useAppDataStore().firebaseStatus="firebase-messaging")):(console.log(" firebase/messaging pwa"),useAppDataStore().firebaseStatus="firebase")}))}console.log(" net.js");const netDomain=domain,configApi="/system/app/getConfig",getPeaceAndLoveApi="/system/app/checkRegion",googleLoginApi="/user/login/google",accountLoginApi="/user/login/password",guestLoginApi="/user/login/guest",accountDeleteApi="/user/user/deleteUser",anchorsApi="/h5/user/anchor/getAnchorsNoLogin",getRtmTokenApi="/system/app/getRtmToken",heartbeatApi="/system/app/heartbeat",callHistoryApi="/call/call/getCallRecordVoList",billHistoryApi="/user/balance/getUserBalanceRecords",userDetailApi="/user/user/getUserDetail",updateUserDetailApi="/user/user/updateUserDetail",setPasswordApi="/user/user/setPassword",changePasswordApi="/user/user/changePassword",rechargeCenterApi="/p/product/getProducts",createOrderApi="/p/order/createOrder",matchAnchorApi="/user/anchor/tryGetMatchAnchor",virtualVideoCostApi="/user/anchor/deductByAim/",createCallApi="/call/call/createCall",cancelCallApi="/call/call/cancelCall",joinCallApi="/call/call/joinCall/",refreshCallApi="/call/call/refreshCall/",endCallApi="/call/call/endCall",getAnchorDetailApi="/user/user/getUserExpandNoLogin",getSensitiveWordsApi="/system/sensitive/getSensitiveWords",uploadSensitiveRecordApi="/system/sensitive/uploadSensitiveRecord",getS3UploadUrlV2Api="/system/app/getS3UploadUrlV2",uploadAttributionApi="/user/user/updateAdFlag",uploadFirebaseApi="/user/user/updateFirebaseToken",getFaqApi="/system/app/getAppProblemVoList",getGiftListApi="/user/gift/getGiftList",sendGiftApi="/user/gift/sendReal",sendMsgApi="/user/msg/sendMsg",sendMsgInCallApi="/user/msg/sendMsgInCall",getRewardsFloat="/user/user/getRewards",getAiHelpUrlApi="/system/app/getAiHelpUrl",getUserAdvanceApi="/user/advance/getDialogDetail",getGameRoomListApi="/game/game/getRoomList",getRoomDetailApi="/game/game/getRoomDetail?rid=",getAivAnchor="/user/anchor/getAivAnchor",getAibAnchor="/user/anchor/getAibAnchor",fixFloatApis=[rechargeCenterApi,createCallApi,getGameRoomListApi];let userAdvance=0;const refAuth=ref(null),storeAuthorization="Authorization",storeLoginUserId="loginUserId",loginInvalid=1002,otherLogin=1020;function saveGAuth(e){refAuth.value=e,storeSave({key:storeAuthorization,value:e})}function getLoginAuth(){if(null==refAuth.value||null==refAuth.value||""==refAuth.value)try{refAuth.value=storeRead(storeAuthorization)}catch(e){refAuth.value=null}return refAuth.value}function afterLoginNeedAction(e){targetFirstLoginTimestamp(e.userId.toString(),!1),console.log(" "),saveAuthAndUser(e.authorization,e.userId.toString()),useAppDataStore().changeLoginStatus(!0),netUserDetail({}),netUserAdvance({}),cacheAppConfig({}),cacheRtmToken({}),cacheSensitiveWords({}),adjustUploadAttribution(),configFirebaseMessage()}function clearLoginAuth(){console.log(" "),refAuth.value=null,storeClear(storeAuthorization),useAppDataStore().changeLoginStatus(!1),rtmLoginOut(),storeClear(storeLoginUserId),clearLoginRtmToken()}function localAuthAvailable(){const e=getLoginAuth();return null!=e&&null!=e&&""!=e}let gUserId=null;function saveLoginUserId(e){gUserId=e,storeSave({key:storeLoginUserId,value:e})}function getLoginUserId(){return(null==gUserId||null==gUserId||gUserId.length<=0)&&(gUserId=storeRead(storeLoginUserId)),gUserId}function saveAuthAndUser(e,t){saveGAuth(e),saveLoginUserId(t),console.log(" authuserId")}function targetFirstLoginTimestamp(e,t){if(t||null==firstLoginTimestamp())return console.log(" "),void storeSave({key:e,value:Date.now()})}function firstLoginTimestamp(){const e=storeRead(getLoginUserId().toString());return null!=e&&null!=e&&""!=e?e:null}function targetFirstTravelTimestamp(e){if(e||null==firstTravelTimestamp())return console.log("  "),void storeSave({key:"travel",value:Date.now()})}function firstTravelTimestamp(){const e=storeRead("travel");return null!=e&&null!=e&&""!=e?(console.log("  "),e):null}function netConfig({success:e=()=>{}}){return netRequest({loading:!1,noAuth:!0,url:configApi,method:"GET",success:e})}function netPeaceAndLove({success:e=()=>{}}){return netRequest({loading:!1,noAuth:!0,url:getPeaceAndLoveApi,method:"GET",success:e})}function netGoogleLogin({id:e,nickname:t,cover:n,token:r,email:o,success:i=()=>{},fail:a=()=>{}}){return netRequest({url:googleLoginApi,showServiceError:!0,showNetError:!0,para:{id:e,nickname:t,cover:n,token:r,email:o},success:e=>{afterLoginNeedAction(e),i()},fail:a})}function netAccountLogin({username:e,password:t,aidLimit:n,aid:r,success:o=()=>{},fail:i=()=>{}}){return netRequest({url:accountLoginApi,showServiceError:!0,showNetError:!0,para:{username:e,password:CryptoJS.MD5(t).toString(),aidLimit:n,aid:r},success:n=>{storeSave({key:"accountLoginCache",value:{username:e,password:t}}),afterLoginNeedAction(n),o()},fail:i})}function netGuestLogin({password:e,success:t=()=>{},fail:n=()=>{}}){return netRequest({url:guestLoginApi,showServiceError:!0,showNetError:!0,para:{password:CryptoJS.MD5(e).toString()},success:n=>{storeSave({key:"accountLoginCache",value:{username:n.username,password:e}}),afterLoginNeedAction(n),t(n)},fail:n})}function netDeleteAccount({success:e=()=>{},fail:t=()=>{}}){return netRequest({url:accountDeleteApi,showServiceSuccess:!0,showServiceError:!0,showNetError:!0,success:e,fail:t})}function heartbeat(){if(localAuthAvailable())return netRequest({loading:!1,url:heartbeatApi})}function netRtmToken({success:e=()=>{},fail:t=()=>{}}){if(localAuthAvailable())return netRequest({loading:!1,url:getRtmTokenApi,method:"GET",success:e,fail:t});showLoginModal()}function netAnchor({resetRepeat:e=1,areaCode:t,countryCode:n,anchorType:r,showVideo:o,success:i=()=>{},fail:a=()=>{},netFail:s=()=>{}}){return netRequest({loading:!1,url:anchorsApi,noAuth:!0,para:{areaCode:t,resetRepeat:e,countryCode:n,anchorType:r,showVideo:o},success:i,fail:a,netFail:s})}function netCallHistory({pageNum:e,pageSize:t,success:n=()=>{},fail:r=()=>{},netFail:o=()=>{}}){if(localAuthAvailable())return netRequest({loading:!1,url:callHistoryApi,para:{pageNum:e,pageSize:t},success:n,fail:r,netFail:o});console.log(" "),r()}function netBillHistory({action:e,isGame:t=!1,startTimes:n,endTimes:r,pageNum:o,pageSize:i,success:a=()=>{},fail:s=()=>{},netFail:c=()=>{}}){const l={condition:{startTimes:n,endTimes:r},pageNum:o,pageSize:i};return null!=e&&(l.condition.action=e),t&&(l.condition.isGame=1),netRequest({loading:!1,url:billHistoryApi,para:l,success:a,fail:s,netFail:c})}function netUserDetail({success:e=()=>{},fail:t=()=>{},netFail:n=()=>{}}){return localAuthAvailable()?netRequest({loading:!1,method:"GET",url:userDetailApi,success:t=>{var n;console.log(" "),useAppDataStore().userBalance=t.remainDiamonds.toBin,useAppDataStore().userDetail=t;let r=!1,o=!1,i=!1;null==(n=null==t?void 0:t.propVoList)||n.forEach((e=>{5==(null==e?void 0:e.propType)&&(null==e?void 0:e.propNum)>0?(console.log(" "),r=!0):1==(null==e?void 0:e.propType)&&(null==e?void 0:e.propNum)>0?(console.log(" "),o=!0):4==(null==e?void 0:e.propType)&&(null==e?void 0:e.propNum)>0&&(console.log(" "),i=!0)})),useAppDataStore().userHaveMatchCard=r,useAppDataStore().userHaveCallCard=o,useAppDataStore().userHaveChatCard=i,e(t)},fail:t,netFail:n}):(console.log(" "),t(),null)}function netUpdateUserDetail({nickname:e=null,birthday:t=null,portrait:n=null,loading:r=!0,disturbFlag:o=null,success:i=()=>{},fail:a=()=>{},netFail:s=()=>{}}){const c={};return null!=e&&(c.nickname=e),null!=t&&(c.birthday=t),null!=n&&(c.portrait=n),null!=o&&(c.disturbFlag=o),netRequest({para:c,loading:r,showServiceSuccess:!0,showServiceError:!0,showNetError:!0,url:updateUserDetailApi,success:i,fail:a,netFail:s})}function netSetPassword({newPassword:e,success:t=()=>{},fail:n=()=>{},netFail:r=()=>{}}){return netRequest({para:{newPassword:CryptoJS.MD5(e).toString()},showServiceSuccess:!0,showServiceError:!0,showNetError:!0,url:setPasswordApi,success:t,fail:n,netFail:r})}function netChangePassword({oriPassword:e,newPassword:t,success:n=()=>{},fail:r=()=>{},netFail:o=()=>{}}){return netRequest({para:{oriPassword:CryptoJS.MD5(e).toString(),newPassword:CryptoJS.MD5(t).toString()},showServiceSuccess:!0,showServiceError:!0,showNetError:!0,url:changePasswordApi,success:e=>{const r=storeRead("accountLoginCache");null!=r.username&&null!=r.username&&""!=r.username&&(console.log(" "),r.password=t,storeSave({key:"accountLoginCache",value:r})),n(e)},fail:r,netFail:o})}function netRechargeCenter({type:e=1,success:t=()=>{},fail:n=()=>{},netFail:r=()=>{}}){return netRequest({loading:!1,para:{type:e},method:"GET",url:rechargeCenterApi,success:t,fail:n,netFail:r})}function netCreateOrder({ppId:e,productId:t,anchorUserId:n="",couponRecordId:r="",videoId:o="",createPath:i="",loading:a=!0,success:s=()=>{},fail:c=()=>{},netFail:l=()=>{}}){return netRequest({para:{ppId:e,productId:t,anchorUserId:n,couponRecordId:r,videoId:o,createPath:i},loading:a,showServiceError:!0,url:createOrderApi,success:e=>{s(e),storageSaveOrder(e)},fail:c,netFail:l})}function netMatchAnchor({success:e=()=>{},fail:t=()=>{},netFail:n=()=>{}}){return netRequest({loading:!1,method:"GET",url:matchAnchorApi,success:e,fail:t,netFail:n})}function netVirtualVideoCost({anchorUserId:e,success:t=()=>{},fail:n=()=>{},netFail:r=()=>{}}){return netRequest({loading:!1,url:`${virtualVideoCostApi}${e}`,success:t,fail:n,netFail:r})}function netCreateCall({anchorUserId:e,type:t,showNetError:n=!0,showLoading:r=!1,success:o=()=>{},fail:i=()=>{},netFail:a=()=>{}}){return netRequest({loading:r,showNetError:n,url:`${createCallApi}/${t}/${e}`,success:o,fail:i,netFail:a})}function netCancelCall({channelId:e,endType:t,success:n=()=>{},fail:r=()=>{},netFail:o=()=>{}}){return netRequest({loading:!1,url:cancelCallApi,para:{channelId:e,endType:t},success:n,fail:r,netFail:o})}function netJoinCall({channelId:e,success:t=()=>{},fail:n=()=>{},netFail:r=()=>{}}){return netRequest({loading:!1,url:`${joinCallApi}${e}`,success:t,fail:n,netFail:r})}function netRefreshCall({channelId:e,success:t=()=>{},fail:n=()=>{},netFail:r=()=>{}}){return netRequest({loading:!1,url:`${refreshCallApi}${e}`,success:t,fail:n,netFail:r})}function netEndCall({channelId:e,endType:t,clientEndAt:n,clientDuration:r,success:o=()=>{},fail:i=()=>{},netFail:a=()=>{}}){return netRequest({loading:!1,url:endCallApi,para:{channelId:e,endType:t,clientEndAt:n,clientDuration:r},success:o,fail:i,netFail:a})}function netAnchorDetail({anchorUserId:e,foreRequest:t=!1,backLocal:n=()=>{},success:r=()=>{},fail:o=()=>{},netFail:i=()=>{}}){const a=storeRead(e.toString());if(0==t&&"number"==typeof(null==a?void 0:a.cacheTimestamp)){const e=Date.now(),t=Math.abs((null==a?void 0:a.cacheTimestamp)-e)/6e4;if(console.log(`   ${t}`),t<=480)return console.log("  8 "),r(a),null;console.log("  8 ")}else 1==t&&"number"==typeof(null==a?void 0:a.cacheTimestamp)&&(console.log("  backLocal"),n(a));return console.log("  "),netRequest({loading:!1,method:"GET",url:getAnchorDetailApi,para:{userId:e},success:e=>{r(e),console.log(`    ${Date.now()}`),e.cacheTimestamp=Date.now(),storeSave({key:e.userId.toString(),value:e})},fail:o,netFail:i})}function netSensitiveWords({success:e=()=>{}}){return netRequest({loading:!1,url:getSensitiveWordsApi,method:"GET",success:e})}function netUploadSensitiveRecord({receiveId:e="",channelId:t="",words:n="",wordsSub:r=""}){return netRequest({loading:!1,para:{receiveId:e,channelId:t,words:n,wordsSub:r},url:uploadSensitiveRecordApi})}function netGetUpload({suffix:e,success:t=()=>{},fail:n=()=>{},netFail:r=()=>{}}){return netRequest({loading:!1,method:"GET",url:getS3UploadUrlV2Api,para:{suffix:e},showServiceError:!0,showNetError:!0,success:t,fail:n,netFail:r})}function netPutUploadFile({uploadUrl:e,file:t,success:n=()=>{},fail:r=()=>{},netFail:o=()=>{}}){axios({method:"PUT",url:e,data:t}).then((e=>{200==e.status?(console.log(" "),n()):(console.log(" "),r())})).catch((e=>{console.log(`  ${e}`),o()}))}function netUploadAttribution({adid:e="",trackerToken:t="",trackerName:n="",network:r="",campaign:o="",adgroup:i="",creative:a="",clickLabel:s="",state:c=""}){return"organic"==r.toLowerCase()&&(r=`web_${r}`),netRequest({loading:!1,url:uploadAttributionApi,para:{adid:e,trackerToken:t,trackerName:n,network:r,campaign:o,adgroup:i,creative:a,clickLabel:s,state:c}})}function netUploadFirebase({firebaseToken:e=""}){if(localAuthAvailable())return netRequest({loading:!1,url:uploadFirebaseApi,para:{firebaseToken:e}})}function netFaq({success:e=()=>{},fail:t=()=>{},netFail:n=()=>{}}){return netRequest({loading:!1,showServiceError:!0,showNetError:!0,method:"GET",url:getFaqApi,success:e,fail:t,netFail:n})}function netGiftList({foreRequest:e=!1,success:t=()=>{},fail:n=()=>{},netFail:r=()=>{}}){const o=storeRead("cacheGiftDatas");if(0==e&&"number"==typeof(null==o?void 0:o.cacheTimestamp)){const e=Date.now(),n=Math.abs((null==o?void 0:o.cacheTimestamp)-e)/6e4;if(console.log(`   ${n}`),n<=480)return console.log("  8 "),t(o.data),null;console.log("  8 ")}return console.log("  "),netRequest({loading:!1,method:"GET",url:getGiftListApi,success:e=>{t(e),console.log("  "),storeSave({key:"cacheGiftDatas",value:{data:e,cacheTimestamp:Date.now()}})},fail:n,netFail:r})}function netSendGift({receiverId:e,quantity:t,gid:n,success:r=()=>{},fail:o=()=>{},netFail:i=()=>{}}){return netRequest({loading:!1,url:sendGiftApi,para:{receiverId:e,quantity:t,gid:n},success:r,fail:o,netFail:i})}function netSendMsgText({recipientId:e,type:t,content:n,originContent:r,ignoreNetRequest:o=!1,userDetail:i,success:a=()=>{},fail:s=()=>{},netFail:c=()=>{},reSendMsg:l=null}){const u=Date.now();let d=null,A=null;if(null!=l)console.log(" "),l.sendFail=!1,l.timestamp=u,useAppDataStore().updateMsg(`${getLoginUserId()}_${e}`,l),d=l,t=l.messageType,n=l.data.text,A=JSON.stringify({data:JSON.stringify(l.data),messageType:l.messageType,previousMessageAi:"",userInfo:{name:l.userInfo.name,portrait:l.userInfo.portrait,uid:l.userInfo.uid,virtualId:l.userInfo.virtualId,totalRecharge:l.userInfo.totalRecharge,isAdvanceUser:userAdvance},read:1,timestamp:u,mid:l.mid});else{console.log(" ");const o={text:n};d={data:{text:r},messageType:t,previousMessageAi:"",userInfo:{name:i.nickname,portrait:i.portrait,uid:i.userId,virtualId:i.userId,totalRecharge:i.totalRecharge,isAdvanceUser:userAdvance},read:1,timestamp:u,mid:`${i.userId}_${e}_${u}`},useAppDataStore().addConversation(`${getLoginUserId()}_${e}`,d),A=JSON.stringify({data:JSON.stringify(o),messageType:t,previousMessageAi:"",userInfo:{name:i.nickname,portrait:i.portrait,uid:i.userId,virtualId:i.userId,totalRecharge:i.totalRecharge,isAdvanceUser:userAdvance},read:1,timestamp:u,mid:`${i.userId}_${e}_${u}`})}if(!o)return netRequest({loading:!1,url:sendMsgApi,para:{recipientId:e,type:t,urlOrContent:n,jsonData:A},success:a,fail:t=>{s(t),d.sendFail=!0,d.timestamp=Date.now(),useAppDataStore().updateMsg(`${getLoginUserId()}_${e}`,d)},netFail:()=>{c(),d.sendFail=!0,d.timestamp=Date.now(),useAppDataStore().updateMsg(`${getLoginUserId()}_${e}`,d)}});a()}function netSendMsgInCallText({recipientId:e,type:t,channelId:n,content:r,ignoreNetRequest:o=!1,userDetail:i,success:a=()=>{},fail:s=()=>{},netFail:c=()=>{}}){const l=Date.now();let u=null;console.log(" ");const d={text:r};if(u=JSON.stringify({data:JSON.stringify(d),messageType:t,previousMessageAi:"",userInfo:{name:i.nickname,portrait:i.portrait,uid:i.userId,virtualId:i.userId,totalRecharge:i.totalRecharge,isAdvanceUser:userAdvance},read:1,timestamp:l,mid:`${i.userId}_${e}_${l}`}),!o)return netRequest({loading:!1,url:sendMsgInCallApi,para:{recipientId:e,type:t,channelId:n,urlOrContent:r,jsonData:u},success:a,fail:e=>{s(e)},netFail:()=>{c()}});a()}function netRewardsFloat({success:e=()=>{},fail:t=()=>{},netFail:n=()=>{}}){const r=storeRead("cacheRewardsFloat");if("number"==typeof(null==r?void 0:r.cacheTimestamp)){const t=Date.now(),n=Math.abs((null==r?void 0:r.cacheTimestamp)-t)/6e4;if(console.log(`   ${n}`),n<=480)return console.log("  8 "),e(r.data),null;console.log("  8 ")}return console.log("  "),netRequest({loading:!1,method:"GET",url:getRewardsFloat,success:t=>{e(t),console.log("  "),storeSave({key:"cacheRewardsFloat",value:{data:t,cacheTimestamp:Date.now()}})},fail:t,netFail:n})}function netAiHelp({success:e=()=>{},fail:t=()=>{},netFail:n=()=>{}}){const r=storeRead("cacheAiHelpUrl");if("number"==typeof(null==r?void 0:r.cacheTimestamp)){const t=Date.now(),n=Math.abs((null==r?void 0:r.cacheTimestamp)-t)/6e4;if(console.log(` AiHelp  ${n}`),n<=480)return console.log(" AiHelp 8 "),e(r.data),null;console.log(" AiHelp 8 ")}return console.log(" AiHelp "),netRequest({loading:!1,method:"GET",url:getAiHelpUrlApi,success:t=>{e(t),console.log(" AiHelp "),storeSave({key:"cacheAiHelpUrl",value:{data:t,cacheTimestamp:Date.now()}})},fail:t,netFail:n})}function netUserAdvance({success:e=()=>{},fail:t=()=>{},netFail:n=()=>{}}){return localAuthAvailable()?netRequest({loading:!1,method:"GET",url:getUserAdvanceApi,success:t=>{e(t),userAdvance=t.isAdvanceUser,console.log(` ${userAdvance}`)},fail:t,netFail:n}):null}function netGameRoomList({success:e=()=>{},fail:t=()=>{},netFail:n=()=>{}}){return netRequest({loading:!1,method:"GET",url:getGameRoomListApi,success:e,fail:t,netFail:n})}function netGameRoomDetail({rid:e="",success:t=()=>{},fail:n=()=>{},netFail:r=()=>{}}){return netRequest({loading:!1,method:"GET",url:`${getRoomDetailApi}${e}`,success:t,fail:n,netFail:r})}function netGetAivAnchor({success:e=()=>{},fail:t=()=>{},netFail:n=()=>{}}){return netRequest({loading:!1,method:"GET",url:getAivAnchor,success:e,fail:t,netFail:n})}function netGetAibAnchor({success:e=()=>{},fail:t=()=>{},netFail:n=()=>{}}){return netRequest({loading:!1,method:"GET",url:getAibAnchor,success:e,fail:t,netFail:n})}function netRequest({loading:e=!0,url:t="",requestDomain:n=netDomain,para:r={},method:o="POST",noAuth:i=!1,success:a=()=>{},showServiceSuccess:s=!1,showServiceError:c=!1,showNetError:l=!1,fail:u=()=>{},netFail:d=()=>{},finallyComplete:A=()=>{}}){return e&&showLoading(),console.log(`  ${t}`),request({url:`${n}${t}`,data:r,dataType:"text",responseType:"json",method:o,header:netHeader(i),timeout:6e3,success(n){console.log(` \n url=>${t}\n para=>${JSON.stringify(r)}`),e&&hideLoading();const o=-1!==fixFloatApis.findIndex((e=>t.startsWith(e)))?JSON.parse(n.data.replace(/(\b\d{16,}\b)/g,'"$1"')):JSON.parse(n.data);null!=(null==o?void 0:o.code)?0==o.code?(console.log(` =${t}:\n${JSON.stringify(o)}`),a(o.data),s&&showNotification({content:o.message})):(console.error(`=${t}:\n${JSON.stringify(o)}`),c&&showNotificationError$1({content:o.message}),o.code!=loginInvalid&&o.code!=otherLogin||(clearLoginAuth(),showLoginModal(),switchTab({url:"/pages/tab_bar/home/home"})),u(o)):(console.error(`=${t}:code`),c&&showNotificationError$1({content:lanKey.serverError.tr}),u())},fail(n){console.error(`=${t}:${n.errMsg}`),e&&hideLoading(),l&&showNotificationError$1({content:lanKey.netError.tr}),d(n)},complete(e){console.log(` ${t}`),A(e)}})}console.log(" app_bridge.js");const toFlutterWebAppDeviceIdBridge="toFlutterWebAppDeviceIdBridge",toFlutterWebAppPermissionBridge="toFlutterWebAppPermissionBridge",toFlutterWebAppLaunchBrowserBridge="toFlutterWebAppLaunchBrowserBridge",toFlutterWebAppOpenNewWebViewBridge="toFlutterWebAppOpenNewWebViewBridge",toFlutterWebAppOpenAppSettingsBridge="toFlutterWebAppOpenAppSettingsBridge",toFlutterWebAppAdjustBridge="toFlutterWebAppAdjustBridge";function initFlutterWebApp(){toFlutterWebAppDeviceId(),toFlutterWebAppPermission()}function toFlutterWebAppDeviceId(){flutterWebApp.postMessage(toFlutterWebAppDeviceIdBridge),console.log("flutterWebApp flutterWebAppid")}function toFlutterWebAppLaunchBrowser(e){const t={name:toFlutterWebAppLaunchBrowserBridge,url:e};flutterWebApp.postMessage(JSON.stringify(t)),console.log("flutterWebApp flutterWebApp")}function toFlutterWebAppOpenNewWebView(e){const t={name:toFlutterWebAppOpenNewWebViewBridge,url:e};flutterWebApp.postMessage(JSON.stringify(t)),console.log("flutterWebApp flutterWebAppwebView")}function toFlutterWebAppPermission(){flutterWebApp.postMessage(toFlutterWebAppPermissionBridge),console.log("flutterWebApp flutterWebApp")}function toFlutterWebAppOpenAppSettings(){flutterWebApp.postMessage(toFlutterWebAppOpenAppSettingsBridge),console.log("flutterWebApp flutterWebAppapp")}function toFlutterWebAppAdjust(){const e={name:toFlutterWebAppAdjustBridge,appToken:adjustAppToken};flutterWebApp.postMessage(JSON.stringify(e)),console.log("flutterWebApp flutterWebAppadjust")}isFlutterWebApp&&(initFlutterWebApp(),console.log("flutterWebApp ")),window.toJsFunction=e=>(console.log(`flutterWebApp js ${e}`),!0),window.toJsShowOperateSuccessToast=()=>{showNotification({content:lanKey.operateSuccess.tr}),console.log("flutterWebApp js toJsShowOperateSuccessToast")},window.toJsShowOperateFailToast=()=>{showNotification({content:lanKey.operateFail.tr}),console.log("flutterWebApp js toJsShowOperateFailToast")},window.toJsDeviceId=e=>{storeSave({key:"localDeviceId",value:e}),console.log(`flutterWebApp js id toJsDeviceId ${e}`)},window.toJsPermission=e=>{const t=1==e;storeSave({key:"devicePermission",value:t}),console.log(`flutterWebApp js flutterWebApp ${t}`)},window.toJsAdjust=e=>{const t=JSON.parse(e);""!=(null==t?void 0:t.network)&&null!=(null==t?void 0:t.network)&&null!=(null==t?void 0:t.network)&&(storeSave({key:adjustSaveKey,value:t}),localAuthAvailable()&&netUploadAttribution({adid:null==t?void 0:t.adid,trackerToken:null==t?void 0:t.trackerToken,trackerName:null==t?void 0:t.trackerName,network:null==t?void 0:t.network,campaign:null==t?void 0:t.campaign,adgroup:null==t?void 0:t.adgroup,creative:null==t?void 0:t.creative,clickLabel:null==t?void 0:t.clickLabel,state:null==t?void 0:t.state}),console.log("Adjust flutterWebAppjs"))},window.toJsNavBack=()=>{var e;const t=getCurrentPages$1();if(t.length>0){const n=t[t.length-1];if("/pages/video-chat/video-chat"==(null==(e=null==n?void 0:n.$page)?void 0:e.path))return void console.log("flutterWebApp")}1==t.length?history.back():navigateBack()},Object.defineProperty(Number.prototype,"toBin",{get(){return(this/100).toLocaleString()}});
/*!
  * shared v10.0.4
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */
const inBrowser="undefined"!=typeof window,makeSymbol=(e,t=!1)=>t?Symbol.for(e):Symbol(e),generateFormatCacheKey=(e,t,n)=>friendlyJSONstringify({l:e,k:t,s:n}),friendlyJSONstringify=e=>JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),isNumber=e=>"number"==typeof e&&isFinite(e),isRegExp=e=>"[object RegExp]"===toTypeString(e),isEmptyObject=e=>isPlainObject(e)&&0===Object.keys(e).length,assign=Object.assign;let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{});function escapeHtml(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const hasOwnProperty=Object.prototype.hasOwnProperty;function hasOwn(e,t){return hasOwnProperty.call(e,t)}const isArray=Array.isArray,isFunction=e=>"function"==typeof e,isString=e=>"string"==typeof e,isBoolean=e=>"boolean"==typeof e,isObject=e=>null!==e&&"object"==typeof e,isPromise=e=>isObject(e)&&isFunction(e.then)&&isFunction(e.catch),objectToString=Object.prototype.toString,toTypeString=e=>objectToString.call(e),isPlainObject=e=>"[object Object]"===toTypeString(e),toDisplayString=e=>null==e?"":isArray(e)||isPlainObject(e)&&e.toString===objectToString?JSON.stringify(e,null,2):String(e);function join(e,t=""){return e.reduce(((e,n,r)=>0===r?e+n:e+t+n),"")}function warn(e,t){"undefined"!=typeof console&&(console.warn("[intlify] "+e),t&&console.warn(t.stack))}const isNotObjectOrIsArray=e=>!isObject(e)||isArray(e);function deepCopy(e,t){if(isNotObjectOrIsArray(e)||isNotObjectOrIsArray(t))throw new Error("Invalid value");const n=[{src:e,des:t}];for(;n.length;){const{src:e,des:t}=n.pop();Object.keys(e).forEach((r=>{isObject(e[r])&&!isObject(t[r])&&(t[r]=Array.isArray(e[r])?[]:{}),isNotObjectOrIsArray(t[r])||isNotObjectOrIsArray(e[r])?t[r]=e[r]:n.push({src:e[r],des:t[r]})}))}}
/*!
  * message-compiler v10.0.4
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */function createPosition(e,t,n){return{line:e,column:t,offset:n}}function createLocation(e,t,n){return{start:e,end:t}}const CompileErrorCodes={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,UNHANDLED_CODEGEN_NODE_TYPE:15,UNHANDLED_MINIFIER_NODE_TYPE:16},COMPILE_ERROR_CODES_EXTEND_POINT=17;function createCompileError(e,t,n={}){const{domain:r,messages:o,args:i}=n,a=new SyntaxError(String(e));return a.code=e,t&&(a.location=t),a.domain=r,a}function defaultOnError(e){throw e}const CHAR_SP=" ",CHAR_CR="\r",CHAR_LF="\n",CHAR_LS=String.fromCharCode(8232),CHAR_PS=String.fromCharCode(8233);function createScanner(e){const t=e;let n=0,r=1,o=1,i=0;const a=e=>t[e]===CHAR_CR&&t[e+1]===CHAR_LF,s=e=>t[e]===CHAR_PS,c=e=>t[e]===CHAR_LS,l=e=>a(e)||(e=>t[e]===CHAR_LF)(e)||s(e)||c(e),u=e=>a(e)||s(e)||c(e)?CHAR_LF:t[e];function d(){return i=0,l(n)&&(r++,o=0),a(n)&&n++,n++,o++,t[n]}return{index:()=>n,line:()=>r,column:()=>o,peekOffset:()=>i,charAt:u,currentChar:()=>u(n),currentPeek:()=>u(n+i),next:d,peek:function(){return a(n+i)&&i++,i++,t[n+i]},reset:function(){n=0,r=1,o=1,i=0},resetPeek:function(e=0){i=e},skipToPeek:function(){const e=n+i;for(;e!==n;)d();i=0}}}const EOF=void 0,DOT=".",LITERAL_DELIMITER="'",ERROR_DOMAIN$3="tokenizer";function createTokenizer(e,t={}){const n=!1!==t.location,r=createScanner(e),o=()=>r.index(),i=()=>createPosition(r.line(),r.column(),r.index()),a=i(),s=o(),c={currentType:13,offset:s,startLoc:a,endLoc:a,lastType:13,lastOffset:s,lastStartLoc:a,lastEndLoc:a,braceNest:0,inLinked:!1,text:""},l=()=>c,{onError:u}=t;function d(e,t,r,...o){const i=l();if(t.column+=r,t.offset+=r,u){const r=createCompileError(e,n?createLocation(i.startLoc,t):null,{domain:ERROR_DOMAIN$3,args:o});u(r)}}function A(e,t,r){e.endLoc=i(),e.currentType=t;const o={type:t};return n&&(o.loc=createLocation(e.startLoc,e.endLoc)),null!=r&&(o.value=r),o}const p=e=>A(e,13);function h(e,t){return e.currentChar()===t?(e.next(),t):(d(CompileErrorCodes.EXPECTED_TOKEN,i(),0,t),"")}function f(e){let t="";for(;e.currentPeek()===CHAR_SP||e.currentPeek()===CHAR_LF;)t+=e.currentPeek(),e.peek();return t}function g(e){const t=f(e);return e.skipToPeek(),t}function m(e){if(e===EOF)return!1;const t=e.charCodeAt(0);return t>=97&&t<=122||t>=65&&t<=90||95===t}function _(e,t){const{currentType:n}=t;if(2!==n)return!1;f(e);const r=function(e){if(e===EOF)return!1;const t=e.charCodeAt(0);return t>=48&&t<=57}("-"===e.currentPeek()?e.peek():e.currentPeek());return e.resetPeek(),r}function E(e){f(e);const t="|"===e.currentPeek();return e.resetPeek(),t}function v(e,t=!0){const n=(t=!1,r="")=>{const o=e.currentPeek();return"{"===o?t:"@"!==o&&o?"|"===o?!(r===CHAR_SP||r===CHAR_LF):o===CHAR_SP?(e.peek(),n(!0,CHAR_SP)):o!==CHAR_LF||(e.peek(),n(!0,CHAR_LF)):t},r=n();return t&&e.resetPeek(),r}function y(e,t){const n=e.currentChar();return n===EOF?EOF:t(n)?(e.next(),n):null}function b(e){const t=e.charCodeAt(0);return t>=97&&t<=122||t>=65&&t<=90||t>=48&&t<=57||95===t||36===t}function C(e){return y(e,b)}function S(e){const t=e.charCodeAt(0);return t>=97&&t<=122||t>=65&&t<=90||t>=48&&t<=57||95===t||36===t||45===t}function w(e){return y(e,S)}function T(e){const t=e.charCodeAt(0);return t>=48&&t<=57}function I(e){return y(e,T)}function R(e){const t=e.charCodeAt(0);return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}function O(e){return y(e,R)}function N(e){let t="",n="";for(;t=I(e);)n+=t;return n}function k(e){return e!==LITERAL_DELIMITER&&e!==CHAR_LF}function P(e){const t=e.currentChar();switch(t){case"\\":case"'":return e.next(),`\\${t}`;case"u":return D(e,t,4);case"U":return D(e,t,6);default:return d(CompileErrorCodes.UNKNOWN_ESCAPE_SEQUENCE,i(),0,t),""}}function D(e,t,n){h(e,t);let r="";for(let o=0;o<n;o++){const n=O(e);if(!n){d(CompileErrorCodes.INVALID_UNICODE_ESCAPE_SEQUENCE,i(),0,`\\${t}${r}${e.currentChar()}`);break}r+=n}return`\\${t}${r}`}function L(e){return"{"!==e&&"}"!==e&&e!==CHAR_SP&&e!==CHAR_LF}function B(e){g(e);const t=h(e,"|");return g(e),t}function U(e,t){let n=null;switch(e.currentChar()){case"{":return t.braceNest>=1&&d(CompileErrorCodes.NOT_ALLOW_NEST_PLACEHOLDER,i(),0),e.next(),n=A(t,2,"{"),g(e),t.braceNest++,n;case"}":return t.braceNest>0&&2===t.currentType&&d(CompileErrorCodes.EMPTY_PLACEHOLDER,i(),0),e.next(),n=A(t,3,"}"),t.braceNest--,t.braceNest>0&&g(e),t.inLinked&&0===t.braceNest&&(t.inLinked=!1),n;case"@":return t.braceNest>0&&d(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,i(),0),n=M(e,t)||p(t),t.braceNest=0,n;default:{let r=!0,o=!0,a=!0;if(E(e))return t.braceNest>0&&d(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,i(),0),n=A(t,1,B(e)),t.braceNest=0,t.inLinked=!1,n;if(t.braceNest>0&&(4===t.currentType||5===t.currentType||6===t.currentType))return d(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,i(),0),t.braceNest=0,x(e,t);if(r=function(e,t){const{currentType:n}=t;if(2!==n)return!1;f(e);const r=m(e.currentPeek());return e.resetPeek(),r}(e,t))return n=A(t,4,function(e){g(e);let t="",n="";for(;t=w(e);)n+=t;return e.currentChar()===EOF&&d(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,i(),0),n}(e)),g(e),n;if(o=_(e,t))return n=A(t,5,function(e){g(e);let t="";return"-"===e.currentChar()?(e.next(),t+=`-${N(e)}`):t+=N(e),e.currentChar()===EOF&&d(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,i(),0),t}(e)),g(e),n;if(a=function(e,t){const{currentType:n}=t;if(2!==n)return!1;f(e);const r=e.currentPeek()===LITERAL_DELIMITER;return e.resetPeek(),r}(e,t))return n=A(t,6,function(e){g(e),h(e,"'");let t="",n="";for(;t=y(e,k);)n+="\\"===t?P(e):t;const r=e.currentChar();return r===CHAR_LF||r===EOF?(d(CompileErrorCodes.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,i(),0),r===CHAR_LF&&(e.next(),h(e,"'")),n):(h(e,"'"),n)}(e)),g(e),n;if(!r&&!o&&!a)return n=A(t,12,function(e){g(e);let t="",n="";for(;t=y(e,L);)n+=t;return n}(e)),d(CompileErrorCodes.INVALID_TOKEN_IN_PLACEHOLDER,i(),0,n.value),g(e),n;break}}return n}function M(e,t){const{currentType:n}=t;let r=null;const o=e.currentChar();switch(7!==n&&8!==n&&11!==n&&9!==n||o!==CHAR_LF&&o!==CHAR_SP||d(CompileErrorCodes.INVALID_LINKED_FORMAT,i(),0),o){case"@":return e.next(),r=A(t,7,"@"),t.inLinked=!0,r;case".":return g(e),e.next(),A(t,8,".");case":":return g(e),e.next(),A(t,9,":");default:return E(e)?(r=A(t,1,B(e)),t.braceNest=0,t.inLinked=!1,r):function(e,t){const{currentType:n}=t;if(7!==n)return!1;f(e);const r="."===e.currentPeek();return e.resetPeek(),r}(e,t)||function(e,t){const{currentType:n}=t;if(7!==n&&11!==n)return!1;f(e);const r=":"===e.currentPeek();return e.resetPeek(),r}(e,t)?(g(e),M(e,t)):function(e,t){const{currentType:n}=t;if(8!==n)return!1;f(e);const r=m(e.currentPeek());return e.resetPeek(),r}(e,t)?(g(e),A(t,11,function(e){let t="",n="";for(;t=C(e);)n+=t;return n}(e))):function(e,t){const{currentType:n}=t;if(9!==n)return!1;const r=()=>{const t=e.currentPeek();return"{"===t?m(e.peek()):!("@"===t||"|"===t||":"===t||"."===t||t===CHAR_SP||!t)&&(t===CHAR_LF?(e.peek(),r()):v(e,!1))},o=r();return e.resetPeek(),o}(e,t)?(g(e),"{"===o?U(e,t)||r:A(t,10,function(e){const t=n=>{const r=e.currentChar();return"{"!==r&&"@"!==r&&"|"!==r&&"("!==r&&")"!==r&&r?r===CHAR_SP?n:(n+=r,e.next(),t(n)):n};return t("")}(e))):(7===n&&d(CompileErrorCodes.INVALID_LINKED_FORMAT,i(),0),t.braceNest=0,t.inLinked=!1,x(e,t))}}function x(e,t){let n={type:13};if(t.braceNest>0)return U(e,t)||p(t);if(t.inLinked)return M(e,t)||p(t);switch(e.currentChar()){case"{":return U(e,t)||p(t);case"}":return d(CompileErrorCodes.UNBALANCED_CLOSING_BRACE,i(),0),e.next(),A(t,3,"}");case"@":return M(e,t)||p(t);default:if(E(e))return n=A(t,1,B(e)),t.braceNest=0,t.inLinked=!1,n;if(v(e))return A(t,0,function(e){let t="";for(;;){const n=e.currentChar();if("{"===n||"}"===n||"@"===n||"|"===n||!n)break;if(n===CHAR_SP||n===CHAR_LF)if(v(e))t+=n,e.next();else{if(E(e))break;t+=n,e.next()}else t+=n,e.next()}return t}(e))}return n}return{nextToken:function(){const{currentType:e,offset:t,startLoc:n,endLoc:a}=c;return c.lastType=e,c.lastOffset=t,c.lastStartLoc=n,c.lastEndLoc=a,c.offset=o(),c.startLoc=i(),r.currentChar()===EOF?A(c,13):x(r,c)},currentOffset:o,currentPosition:i,context:l}}const ERROR_DOMAIN$2="parser",KNOWN_ESCAPES=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function fromEscapeSequence(e,t,n){switch(e){case"\\\\":return"\\";case"\\'":return"'";default:{const e=parseInt(t||n,16);return e<=55295||e>=57344?String.fromCodePoint(e):""}}}function createParser(e={}){const t=!1!==e.location,{onError:n}=e;function r(e,r,o,i,...a){const s=e.currentPosition();if(s.offset+=i,s.column+=i,n){const e=createCompileError(r,t?createLocation(o,s):null,{domain:ERROR_DOMAIN$2,args:a});n(e)}}function o(e,n,r){const o={type:e};return t&&(o.start=n,o.end=n,o.loc={start:r,end:r}),o}function i(e,n,r,o){t&&(e.end=n,e.loc&&(e.loc.end=r))}function a(e,t){const n=e.context(),r=o(3,n.offset,n.startLoc);return r.value=t,i(r,e.currentOffset(),e.currentPosition()),r}function s(e,t){const n=e.context(),{lastOffset:r,lastStartLoc:a}=n,s=o(5,r,a);return s.index=parseInt(t,10),e.nextToken(),i(s,e.currentOffset(),e.currentPosition()),s}function c(e,t){const n=e.context(),{lastOffset:r,lastStartLoc:a}=n,s=o(4,r,a);return s.key=t,e.nextToken(),i(s,e.currentOffset(),e.currentPosition()),s}function l(e,t){const n=e.context(),{lastOffset:r,lastStartLoc:a}=n,s=o(9,r,a);return s.value=t.replace(KNOWN_ESCAPES,fromEscapeSequence),e.nextToken(),i(s,e.currentOffset(),e.currentPosition()),s}function u(e){const t=e.context(),n=o(6,t.offset,t.startLoc);let a=e.nextToken();if(8===a.type){const t=function(e){const t=e.nextToken(),n=e.context(),{lastOffset:a,lastStartLoc:s}=n,c=o(8,a,s);return 11!==t.type?(r(e,CompileErrorCodes.UNEXPECTED_EMPTY_LINKED_MODIFIER,n.lastStartLoc,0),c.value="",i(c,a,s),{nextConsumeToken:t,node:c}):(null==t.value&&r(e,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,n.lastStartLoc,0,getTokenCaption(t)),c.value=t.value||"",i(c,e.currentOffset(),e.currentPosition()),{node:c})}(e);n.modifier=t.node,a=t.nextConsumeToken||e.nextToken()}switch(9!==a.type&&r(e,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,t.lastStartLoc,0,getTokenCaption(a)),a=e.nextToken(),2===a.type&&(a=e.nextToken()),a.type){case 10:null==a.value&&r(e,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,t.lastStartLoc,0,getTokenCaption(a)),n.key=function(e,t){const n=e.context(),r=o(7,n.offset,n.startLoc);return r.value=t,i(r,e.currentOffset(),e.currentPosition()),r}(e,a.value||"");break;case 4:null==a.value&&r(e,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,t.lastStartLoc,0,getTokenCaption(a)),n.key=c(e,a.value||"");break;case 5:null==a.value&&r(e,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,t.lastStartLoc,0,getTokenCaption(a)),n.key=s(e,a.value||"");break;case 6:null==a.value&&r(e,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,t.lastStartLoc,0,getTokenCaption(a)),n.key=l(e,a.value||"");break;default:{r(e,CompileErrorCodes.UNEXPECTED_EMPTY_LINKED_KEY,t.lastStartLoc,0);const s=e.context(),c=o(7,s.offset,s.startLoc);return c.value="",i(c,s.offset,s.startLoc),n.key=c,i(n,s.offset,s.startLoc),{nextConsumeToken:a,node:n}}}return i(n,e.currentOffset(),e.currentPosition()),{node:n}}function d(e){const t=e.context(),n=o(2,1===t.currentType?e.currentOffset():t.offset,1===t.currentType?t.endLoc:t.startLoc);n.items=[];let d=null;do{const o=d||e.nextToken();switch(d=null,o.type){case 0:null==o.value&&r(e,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,t.lastStartLoc,0,getTokenCaption(o)),n.items.push(a(e,o.value||""));break;case 5:null==o.value&&r(e,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,t.lastStartLoc,0,getTokenCaption(o)),n.items.push(s(e,o.value||""));break;case 4:null==o.value&&r(e,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,t.lastStartLoc,0,getTokenCaption(o)),n.items.push(c(e,o.value||""));break;case 6:null==o.value&&r(e,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,t.lastStartLoc,0,getTokenCaption(o)),n.items.push(l(e,o.value||""));break;case 7:{const t=u(e);n.items.push(t.node),d=t.nextConsumeToken||null;break}}}while(13!==t.currentType&&1!==t.currentType);return i(n,1===t.currentType?t.lastOffset:e.currentOffset(),1===t.currentType?t.lastEndLoc:e.currentPosition()),n}function A(e){const t=e.context(),{offset:n,startLoc:a}=t,s=d(e);return 13===t.currentType?s:function(e,t,n,a){const s=e.context();let c=0===a.items.length;const l=o(1,t,n);l.cases=[],l.cases.push(a);do{const t=d(e);c||(c=0===t.items.length),l.cases.push(t)}while(13!==s.currentType);return c&&r(e,CompileErrorCodes.MUST_HAVE_MESSAGES_IN_PLURAL,n,0),i(l,e.currentOffset(),e.currentPosition()),l}(e,n,a,s)}return{parse:function(n){const a=createTokenizer(n,assign({},e)),s=a.context(),c=o(0,s.offset,s.startLoc);return t&&c.loc&&(c.loc.source=n),c.body=A(a),e.onCacheKey&&(c.cacheKey=e.onCacheKey(n)),13!==s.currentType&&r(a,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,s.lastStartLoc,0,n[s.offset]||""),i(c,a.currentOffset(),a.currentPosition()),c}}}function getTokenCaption(e){if(13===e.type)return"EOF";const t=(e.value||"").replace(/\r?\n/gu,"\\n");return t.length>10?t.slice(0,9)+"":t}function createTransformer(e,t={}){const n={ast:e,helpers:new Set};return{context:()=>n,helper:e=>(n.helpers.add(e),e)}}function traverseNodes(e,t){for(let n=0;n<e.length;n++)traverseNode(e[n],t)}function traverseNode(e,t){switch(e.type){case 1:traverseNodes(e.cases,t),t.helper("plural");break;case 2:traverseNodes(e.items,t);break;case 6:traverseNode(e.key,t),t.helper("linked"),t.helper("type");break;case 5:t.helper("interpolate"),t.helper("list");break;case 4:t.helper("interpolate"),t.helper("named")}}function transform(e,t={}){const n=createTransformer(e);n.helper("normalize"),e.body&&traverseNode(e.body,n);const r=n.context();e.helpers=Array.from(r.helpers)}function optimize(e){const t=e.body;return 2===t.type?optimizeMessageNode(t):t.cases.forEach((e=>optimizeMessageNode(e))),e}function optimizeMessageNode(e){if(1===e.items.length){const t=e.items[0];3!==t.type&&9!==t.type||(e.static=t.value,delete t.value)}else{const t=[];for(let n=0;n<e.items.length;n++){const r=e.items[n];if(3!==r.type&&9!==r.type)break;if(null==r.value)break;t.push(r.value)}if(t.length===e.items.length){e.static=join(t);for(let t=0;t<e.items.length;t++){const n=e.items[t];3!==n.type&&9!==n.type||delete n.value}}}}function minify(e){switch(e.t=e.type,e.type){case 0:{const t=e;minify(t.body),t.b=t.body,delete t.body;break}case 1:{const t=e,n=t.cases;for(let e=0;e<n.length;e++)minify(n[e]);t.c=n,delete t.cases;break}case 2:{const t=e,n=t.items;for(let e=0;e<n.length;e++)minify(n[e]);t.i=n,delete t.items,t.static&&(t.s=t.static,delete t.static);break}case 3:case 9:case 8:case 7:{const t=e;t.value&&(t.v=t.value,delete t.value);break}case 6:{const t=e;minify(t.key),t.k=t.key,delete t.key,t.modifier&&(minify(t.modifier),t.m=t.modifier,delete t.modifier);break}case 5:{const t=e;t.i=t.index,delete t.index;break}case 4:{const t=e;t.k=t.key,delete t.key;break}}delete e.type}function createCodeGenerator(e,t){const{sourceMap:n,filename:r,breakLineCode:o,needIndent:i}=t,a=!1!==t.location,s={filename:r,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:o,needIndent:i,indentLevel:0};a&&e.loc&&(s.source=e.loc.source);function c(e,t){s.code+=e}function l(e,t=!0){const n=t?o:"";c(i?n+"  ".repeat(e):n)}return{context:()=>s,push:c,indent:function(e=!0){const t=++s.indentLevel;e&&l(t)},deindent:function(e=!0){const t=--s.indentLevel;e&&l(t)},newline:function(){l(s.indentLevel)},helper:e=>`_${e}`,needIndent:()=>s.needIndent}}function generateLinkedNode(e,t){const{helper:n}=e;e.push(`${n("linked")}(`),generateNode(e,t.key),t.modifier?(e.push(", "),generateNode(e,t.modifier),e.push(", _type")):e.push(", undefined, _type"),e.push(")")}function generateMessageNode(e,t){const{helper:n,needIndent:r}=e;e.push(`${n("normalize")}([`),e.indent(r());const o=t.items.length;for(let i=0;i<o&&(generateNode(e,t.items[i]),i!==o-1);i++)e.push(", ");e.deindent(r()),e.push("])")}function generatePluralNode(e,t){const{helper:n,needIndent:r}=e;if(t.cases.length>1){e.push(`${n("plural")}([`),e.indent(r());const o=t.cases.length;for(let n=0;n<o&&(generateNode(e,t.cases[n]),n!==o-1);n++)e.push(", ");e.deindent(r()),e.push("])")}}function generateResource(e,t){t.body?generateNode(e,t.body):e.push("null")}function generateNode(e,t){const{helper:n}=e;switch(t.type){case 0:generateResource(e,t);break;case 1:generatePluralNode(e,t);break;case 2:generateMessageNode(e,t);break;case 6:generateLinkedNode(e,t);break;case 8:case 7:case 9:case 3:e.push(JSON.stringify(t.value),t);break;case 5:e.push(`${n("interpolate")}(${n("list")}(${t.index}))`,t);break;case 4:e.push(`${n("interpolate")}(${n("named")}(${JSON.stringify(t.key)}))`,t)}}const generate=(e,t={})=>{const n=isString(t.mode)?t.mode:"normal",r=isString(t.filename)?t.filename:"message.intl",o=!!t.sourceMap,i=null!=t.breakLineCode?t.breakLineCode:"arrow"===n?";":"\n",a=t.needIndent?t.needIndent:"arrow"!==n,s=e.helpers||[],c=createCodeGenerator(e,{mode:n,filename:r,sourceMap:o,breakLineCode:i,needIndent:a});c.push("normal"===n?"function __msg__ (ctx) {":"(ctx) => {"),c.indent(a),s.length>0&&(c.push(`const { ${join(s.map((e=>`${e}: _${e}`)),", ")} } = ctx`),c.newline()),c.push("return "),generateNode(c,e),c.deindent(a),c.push("}"),delete e.helpers;const{code:l,map:u}=c.context();return{ast:e,code:l,map:u?u.toJSON():void 0}};function baseCompile$1(e,t={}){const n=assign({},t),r=!!n.jit,o=!!n.minify,i=null==n.optimize||n.optimize,a=createParser(n).parse(e);return r?(i&&optimize(a),o&&minify(a),{ast:a,code:""}):(transform(a,n),generate(a,n))}
/*!
  * core-base v10.0.4
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */function initFeatureFlags$1(){"boolean"!=typeof __INTLIFY_DROP_MESSAGE_COMPILER__&&(getGlobalThis().__INTLIFY_DROP_MESSAGE_COMPILER__=!1)}function format(e){return t=>formatParts(t,e)}function formatParts(e,t){const n=t.b||t.body;if(1===(n.t||n.type)){const t=n,r=t.c||t.cases;return e.plural(r.reduce(((t,n)=>[...t,formatMessageParts(e,n)]),[]))}return formatMessageParts(e,n)}function formatMessageParts(e,t){const n=t.s||t.static;if(null!=n)return"text"===e.type?n:e.normalize([n]);{const n=(t.i||t.items).reduce(((t,n)=>[...t,formatMessagePart(e,n)]),[]);return e.normalize(n)}}function formatMessagePart(e,t){const n=t.t||t.type;switch(n){case 3:{const e=t;return e.v||e.value}case 9:{const e=t;return e.v||e.value}case 4:{const n=t;return e.interpolate(e.named(n.k||n.key))}case 5:{const n=t;return e.interpolate(e.list(null!=n.i?n.i:n.index))}case 6:{const n=t,r=n.m||n.modifier;return e.linked(formatMessagePart(e,n.k||n.key),r?formatMessagePart(e,r):void 0,e.type)}case 7:{const e=t;return e.v||e.value}case 8:{const e=t;return e.v||e.value}default:throw new Error(`unhandled node type on format message part: ${n}`)}}const defaultOnCacheKey=e=>e;let compileCache=Object.create(null);const isMessageAST=e=>isObject(e)&&(0===e.t||0===e.type)&&("b"in e||"body"in e);function baseCompile(e,t={}){let n=!1;const r=t.onError||defaultOnError;return t.onError=e=>{n=!0,r(e)},{...baseCompile$1(e,t),detectError:n}}function compile(e,t){if(!__INTLIFY_DROP_MESSAGE_COMPILER__&&isString(e)){!isBoolean(t.warnHtmlMessage)||t.warnHtmlMessage;const n=(t.onCacheKey||defaultOnCacheKey)(e),r=compileCache[n];if(r)return r;const{ast:o,detectError:i}=baseCompile(e,{...t,location:!1,jit:!0}),a=format(o);return i?a:compileCache[n]=a}{const t=e.cacheKey;if(t){const n=compileCache[t];return n||(compileCache[t]=format(e))}return format(e)}}const CoreErrorCodes={INVALID_ARGUMENT:COMPILE_ERROR_CODES_EXTEND_POINT,INVALID_DATE_ARGUMENT:18,INVALID_ISO_DATE_ARGUMENT:19,NOT_SUPPORT_NON_STRING_MESSAGE:20,NOT_SUPPORT_LOCALE_PROMISE_VALUE:21,NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:22,NOT_SUPPORT_LOCALE_TYPE:23},CORE_ERROR_CODES_EXTEND_POINT=24;function createCoreError(e){return createCompileError(e,null,void 0)}function getLocale(e,t){return null!=t.locale?resolveLocale(t.locale):resolveLocale(e.locale)}let _resolveLocale;function resolveLocale(e){if(isString(e))return e;if(isFunction(e)){if(e.resolvedOnce&&null!=_resolveLocale)return _resolveLocale;if("Function"===e.constructor.name){const t=e();if(isPromise(t))throw createCoreError(CoreErrorCodes.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return _resolveLocale=t}throw createCoreError(CoreErrorCodes.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}throw createCoreError(CoreErrorCodes.NOT_SUPPORT_LOCALE_TYPE)}function fallbackWithSimple(e,t,n){return[...new Set([n,...isArray(t)?t:isObject(t)?Object.keys(t):isString(t)?[t]:[n]])]}function resolveWithKeyValue(e,t){return isObject(e)?e[t]:null}const VERSION$1="10.0.4",NOT_REOSLVED=-1,DEFAULT_LOCALE="en-US",capitalize=e=>`${e.charAt(0).toLocaleUpperCase()}${e.substr(1)}`;function getDefaultLinkedModifiers(){return{upper:(e,t)=>"text"===t&&isString(e)?e.toUpperCase():"vnode"===t&&isObject(e)&&"__v_isVNode"in e?e.children.toUpperCase():e,lower:(e,t)=>"text"===t&&isString(e)?e.toLowerCase():"vnode"===t&&isObject(e)&&"__v_isVNode"in e?e.children.toLowerCase():e,capitalize:(e,t)=>"text"===t&&isString(e)?capitalize(e):"vnode"===t&&isObject(e)&&"__v_isVNode"in e?capitalize(e.children):e}}let _compiler;function registerMessageCompiler(e){_compiler=e}const setAdditionalMeta=e=>{};let _fallbackContext=null;const setFallbackContext=e=>{_fallbackContext=e},getFallbackContext=()=>_fallbackContext;let _cid=0;function createCoreContext(e={}){const t=isFunction(e.onWarn)?e.onWarn:warn,n=isString(e.version)?e.version:VERSION$1,r=isString(e.locale)||isFunction(e.locale)?e.locale:DEFAULT_LOCALE,o=isFunction(r)?DEFAULT_LOCALE:r,i=isArray(e.fallbackLocale)||isPlainObject(e.fallbackLocale)||isString(e.fallbackLocale)||!1===e.fallbackLocale?e.fallbackLocale:o,a=isPlainObject(e.messages)?e.messages:{[o]:{}},s=isPlainObject(e.datetimeFormats)?e.datetimeFormats:{[o]:{}},c=isPlainObject(e.numberFormats)?e.numberFormats:{[o]:{}},l=assign({},e.modifiers||{},getDefaultLinkedModifiers()),u=e.pluralRules||{},d=isFunction(e.missing)?e.missing:null,A=!isBoolean(e.missingWarn)&&!isRegExp(e.missingWarn)||e.missingWarn,p=!isBoolean(e.fallbackWarn)&&!isRegExp(e.fallbackWarn)||e.fallbackWarn,h=!!e.fallbackFormat,f=!!e.unresolving,g=isFunction(e.postTranslation)?e.postTranslation:null,m=isPlainObject(e.processor)?e.processor:null,_=!isBoolean(e.warnHtmlMessage)||e.warnHtmlMessage,E=!!e.escapeParameter,v=isFunction(e.messageCompiler)?e.messageCompiler:_compiler,y=isFunction(e.messageResolver)?e.messageResolver:resolveWithKeyValue,b=isFunction(e.localeFallbacker)?e.localeFallbacker:fallbackWithSimple,C=isObject(e.fallbackContext)?e.fallbackContext:void 0,S=e,w=isObject(S.__datetimeFormatters)?S.__datetimeFormatters:new Map,T=isObject(S.__numberFormatters)?S.__numberFormatters:new Map,I=isObject(S.__meta)?S.__meta:{};_cid++;const R={version:n,cid:_cid,locale:r,fallbackLocale:i,messages:a,modifiers:l,pluralRules:u,missing:d,missingWarn:A,fallbackWarn:p,fallbackFormat:h,unresolving:f,postTranslation:g,processor:m,warnHtmlMessage:_,escapeParameter:E,messageCompiler:v,messageResolver:y,localeFallbacker:b,fallbackContext:C,onWarn:t,__meta:I};return R.datetimeFormats=s,R.numberFormats=c,R.__datetimeFormatters=w,R.__numberFormatters=T,R}function handleMissing(e,t,n,r,o){const{missing:i,onWarn:a}=e;if(null!==i){const r=i(e,n,t,o);return isString(r)?r:t}return t}function updateFallbackLocale(e,t,n){e.__localeChainCache=new Map,e.localeFallbacker(e,n,t)}function isAlmostSameLocale(e,t){return e!==t&&e.split("-")[0]===t.split("-")[0]}function isImplicitFallback(e,t){const n=t.indexOf(e);if(-1===n)return!1;for(let r=n+1;r<t.length;r++)if(isAlmostSameLocale(e,t[r]))return!0;return!1}const DEFAULT_MODIFIER=e=>e,DEFAULT_MESSAGE=e=>"",DEFAULT_MESSAGE_DATA_TYPE="text",DEFAULT_NORMALIZE=e=>0===e.length?"":join(e),DEFAULT_INTERPOLATE=toDisplayString;function pluralDefault(e,t){return e=Math.abs(e),2===t?e?e>1?1:0:1:e?Math.min(e,2):0}function getPluralIndex(e){const t=isNumber(e.pluralIndex)?e.pluralIndex:-1;return e.named&&(isNumber(e.named.count)||isNumber(e.named.n))?isNumber(e.named.count)?e.named.count:isNumber(e.named.n)?e.named.n:t:t}function normalizeNamed(e,t){t.count||(t.count=e),t.n||(t.n=e)}function createMessageContext(e={}){const t=e.locale,n=getPluralIndex(e),r=isObject(e.pluralRules)&&isString(t)&&isFunction(e.pluralRules[t])?e.pluralRules[t]:pluralDefault,o=isObject(e.pluralRules)&&isString(t)&&isFunction(e.pluralRules[t])?pluralDefault:void 0,i=e.list||[],a=e.named||{};isNumber(e.pluralIndex)&&normalizeNamed(n,a);function s(t,n){const r=isFunction(e.messages)?e.messages(t,!!n):!!isObject(e.messages)&&e.messages[t];return r||(e.parent?e.parent.message(t):DEFAULT_MESSAGE)}const c=isPlainObject(e.processor)&&isFunction(e.processor.normalize)?e.processor.normalize:DEFAULT_NORMALIZE,l=isPlainObject(e.processor)&&isFunction(e.processor.interpolate)?e.processor.interpolate:DEFAULT_INTERPOLATE,u={list:e=>i[e],named:e=>a[e],plural:e=>e[r(n,e.length,o)],linked:(t,...n)=>{const[r,o]=n;let i="text",a="";1===n.length?isObject(r)?(a=r.modifier||a,i=r.type||i):isString(r)&&(a=r||a):2===n.length&&(isString(r)&&(a=r||a),isString(o)&&(i=o||i));const c=s(t,!0)(u),l="vnode"===i&&isArray(c)&&a?c[0]:c;return a?(d=a,e.modifiers?e.modifiers[d]:DEFAULT_MODIFIER)(l,i):l;var d},message:s,type:isPlainObject(e.processor)&&isString(e.processor.type)?e.processor.type:DEFAULT_MESSAGE_DATA_TYPE,interpolate:l,normalize:c,values:assign({},i,a)};return u}const NOOP_MESSAGE_FUNCTION=()=>"",isMessageFunction=e=>isFunction(e);function translate(e,...t){const{fallbackFormat:n,postTranslation:r,unresolving:o,messageCompiler:i,fallbackLocale:a,messages:s}=e,[c,l]=parseTranslateArgs(...t),u=isBoolean(l.missingWarn)?l.missingWarn:e.missingWarn,d=isBoolean(l.fallbackWarn)?l.fallbackWarn:e.fallbackWarn,A=isBoolean(l.escapeParameter)?l.escapeParameter:e.escapeParameter,p=!!l.resolvedMessage,h=isString(l.default)||isBoolean(l.default)?isBoolean(l.default)?i?c:()=>c:l.default:n?i?c:()=>c:null,f=n||null!=h&&(isString(h)||isFunction(h)),g=getLocale(e,l);A&&escapeParams(l);let[m,_,E]=p?[c,g,s[g]||{}]:resolveMessageFormat(e,c,g,a,d,u),v=m,y=c;if(p||isString(v)||isMessageAST(v)||isMessageFunction(v)||f&&(v=h,y=v),!(p||(isString(v)||isMessageAST(v)||isMessageFunction(v))&&isString(_)))return o?NOT_REOSLVED:c;let b=!1;const C=isMessageFunction(v)?v:compileMessageFormat(e,c,_,v,y,(()=>{b=!0}));if(b)return v;const S=evaluateMessage(e,C,createMessageContext(getMessageContextOptions(e,_,E,l)));return r?r(S,c):S}function escapeParams(e){isArray(e.list)?e.list=e.list.map((e=>isString(e)?escapeHtml(e):e)):isObject(e.named)&&Object.keys(e.named).forEach((t=>{isString(e.named[t])&&(e.named[t]=escapeHtml(e.named[t]))}))}function resolveMessageFormat(e,t,n,r,o,i){const{messages:a,onWarn:s,messageResolver:c,localeFallbacker:l}=e,u=l(e,r,n);let d,A={},p=null;for(let h=0;h<u.length&&(d=u[h],A=a[d]||{},null===(p=c(A,t))&&(p=A[t]),!(isString(p)||isMessageAST(p)||isMessageFunction(p)));h++)if(!isImplicitFallback(d,u)){const n=handleMissing(e,t,d,i,"translate");n!==t&&(p=n)}return[p,d,A]}function compileMessageFormat(e,t,n,r,o,i){const{messageCompiler:a,warnHtmlMessage:s}=e;if(isMessageFunction(r)){const e=r;return e.locale=e.locale||n,e.key=e.key||t,e}if(null==a){const e=()=>r;return e.locale=n,e.key=t,e}const c=a(r,getCompileContext(e,n,o,r,s,i));return c.locale=n,c.key=t,c.source=r,c}function evaluateMessage(e,t,n){return t(n)}function parseTranslateArgs(...e){const[t,n,r]=e,o={};if(!(isString(t)||isNumber(t)||isMessageFunction(t)||isMessageAST(t)))throw createCoreError(CoreErrorCodes.INVALID_ARGUMENT);const i=isNumber(t)?String(t):(isMessageFunction(t),t);return isNumber(n)?o.plural=n:isString(n)?o.default=n:isPlainObject(n)&&!isEmptyObject(n)?o.named=n:isArray(n)&&(o.list=n),isNumber(r)?o.plural=r:isString(r)?o.default=r:isPlainObject(r)&&assign(o,r),[i,o]}function getCompileContext(e,t,n,r,o,i){return{locale:t,key:n,warnHtmlMessage:o,onError:e=>{throw i&&i(e),e},onCacheKey:e=>generateFormatCacheKey(t,n,e)}}function getMessageContextOptions(e,t,n,r){const{modifiers:o,pluralRules:i,messageResolver:a,fallbackLocale:s,fallbackWarn:c,missingWarn:l,fallbackContext:u}=e,d={locale:t,modifiers:o,pluralRules:i,messages:(r,o)=>{let i=a(n,r);if(null==i&&(u||o)){const[,,n]=resolveMessageFormat(u||e,r,t,s,c,l);i=a(n,r)}if(isString(i)||isMessageAST(i)){let n=!1;const o=compileMessageFormat(e,r,t,i,r,(()=>{n=!0}));return n?NOOP_MESSAGE_FUNCTION:o}return isMessageFunction(i)?i:NOOP_MESSAGE_FUNCTION}};return e.processor&&(d.processor=e.processor),r.list&&(d.list=r.list),r.named&&(d.named=r.named),isNumber(r.plural)&&(d.pluralIndex=r.plural),d}initFeatureFlags$1();
/*!
  * petite-vue-i18n v10.0.4
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */
const VERSION="10.0.4";function initFeatureFlags(){"boolean"!=typeof __INTLIFY_DROP_MESSAGE_COMPILER__&&(getGlobalThis().__INTLIFY_DROP_MESSAGE_COMPILER__=!1)}const I18nErrorCodes={UNEXPECTED_RETURN_TYPE:CORE_ERROR_CODES_EXTEND_POINT,INVALID_ARGUMENT:25,MUST_BE_CALL_SETUP_TOP:26,NOT_INSTALLED:27,REQUIRED_VALUE:28,INVALID_VALUE:29,CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:30,NOT_INSTALLED_WITH_PROVIDE:31,UNEXPECTED_ERROR:32,NOT_COMPATIBLE_LEGACY_VUE_I18N:33,NOT_AVAILABLE_COMPOSITION_IN_LEGACY:34};function createI18nError(e,...t){return createCompileError(e,null,void 0)}const SetPluralRulesSymbol=makeSymbol("__setPluralRules");function handleFlatJson(e){if(!isObject(e))return e;for(const t in e)if(hasOwn(e,t))if(t.includes(".")){const n=t.split("."),r=n.length-1;let o=e,i=!1;for(let e=0;e<r;e++){if(n[e]in o||(o[n[e]]={}),!isObject(o[n[e]])){i=!0;break}o=o[n[e]]}i||(o[n[r]]=e[t],delete e[t]),isObject(o[n[r]])&&handleFlatJson(o[n[r]])}else isObject(e[t])&&handleFlatJson(e[t]);return e}function getLocaleMessages(e,t){const{messages:n,__i18n:r,messageResolver:o,flatJson:i}=t,a=isPlainObject(n)?n:isArray(r)?{}:{[e]:{}};if(isArray(r)&&r.forEach((e=>{if("locale"in e&&"resource"in e){const{locale:t,resource:n}=e;t?(a[t]=a[t]||{},deepCopy(n,a[t])):deepCopy(n,a)}else isString(e)&&deepCopy(JSON.parse(e),a)})),null==o&&i)for(const s in a)hasOwn(a,s)&&handleFlatJson(a[s]);return a}function getComponentOptions(e){return e.type}const DEVTOOLS_META="__INTLIFY_META__";let composerID=0;function defineCoreMissingHandler(e){return(t,n,r,o)=>e(n,r,getCurrentInstance()||void 0,o)}const getMetaInfo=()=>{const e=getCurrentInstance();let t=null;return e&&(t=getComponentOptions(e)[DEVTOOLS_META])?{[DEVTOOLS_META]:t}:null};function createComposer(e={}){const{__root:t,__injectWithOption:n}=e,r=void 0===t,o=e.flatJson,i=inBrowser?ref:shallowRef;let a=!isBoolean(e.inheritLocale)||e.inheritLocale;const s=i(t&&a?t.locale.value:isString(e.locale)?e.locale:DEFAULT_LOCALE),c=i(t&&a?t.fallbackLocale.value:isString(e.fallbackLocale)||isArray(e.fallbackLocale)||isPlainObject(e.fallbackLocale)||!1===e.fallbackLocale?e.fallbackLocale:s.value),l=i(getLocaleMessages(s.value,e));let u=t?t.missingWarn:!isBoolean(e.missingWarn)&&!isRegExp(e.missingWarn)||e.missingWarn,d=t?t.fallbackWarn:!isBoolean(e.fallbackWarn)&&!isRegExp(e.fallbackWarn)||e.fallbackWarn,A=t?t.fallbackRoot:!isBoolean(e.fallbackRoot)||e.fallbackRoot,p=!!e.fallbackFormat,h=isFunction(e.missing)?e.missing:null,f=isFunction(e.missing)?defineCoreMissingHandler(e.missing):null,g=isFunction(e.postTranslation)?e.postTranslation:null,m=t?t.warnHtmlMessage:!isBoolean(e.warnHtmlMessage)||e.warnHtmlMessage,_=!!e.escapeParameter;const E=t?t.modifiers:isPlainObject(e.modifiers)?e.modifiers:{};let v,y=e.pluralRules||t&&t.pluralRules;v=(()=>{r&&setFallbackContext(null);const t=createCoreContext({version:VERSION,locale:s.value,fallbackLocale:c.value,messages:l.value,modifiers:E,pluralRules:y,missing:null===f?void 0:f,missingWarn:u,fallbackWarn:d,fallbackFormat:p,unresolving:!0,postTranslation:null===g?void 0:g,warnHtmlMessage:m,escapeParameter:_,messageResolver:e.messageResolver,messageCompiler:e.messageCompiler,__meta:{framework:"vue"}});return r&&setFallbackContext(t),t})(),updateFallbackLocale(v,s.value,c.value);const b=computed({get:()=>s.value,set:e=>{s.value=e,v.locale=s.value}}),C=computed({get:()=>c.value,set:e=>{c.value=e,v.fallbackLocale=c.value,updateFallbackLocale(v,s.value,e)}}),S=computed((()=>l.value));const w=(e,n,o,i,a,u)=>{let d;s.value,c.value,l.value;try{0,r||(v.fallbackContext=t?getFallbackContext():void 0),d=e(v)}finally{r||(v.fallbackContext=void 0)}if(isNumber(d)&&d===NOT_REOSLVED||"translate exists"===o){const[e,r]=n();return t&&A?i(t):a(e)}if(u(d))return d;throw createI18nError(I18nErrorCodes.UNEXPECTED_RETURN_TYPE)};composerID++,t&&inBrowser&&(watch(t.locale,(e=>{a&&(s.value=e,v.locale=e,updateFallbackLocale(v,s.value,c.value))})),watch(t.fallbackLocale,(e=>{a&&(c.value=e,v.fallbackLocale=e,updateFallbackLocale(v,s.value,c.value))})));return{id:composerID,locale:b,fallbackLocale:C,get inheritLocale(){return a},set inheritLocale(e){a=e,e&&t&&(s.value=t.locale.value,c.value=t.fallbackLocale.value,updateFallbackLocale(v,s.value,c.value))},get availableLocales(){return Object.keys(l.value).sort()},messages:S,get modifiers(){return E},get pluralRules(){return y||{}},get isGlobal(){return r},get missingWarn(){return u},set missingWarn(e){u=e,v.missingWarn=u},get fallbackWarn(){return d},set fallbackWarn(e){d=e,v.fallbackWarn=d},get fallbackRoot(){return A},set fallbackRoot(e){A=e},get fallbackFormat(){return p},set fallbackFormat(e){p=e,v.fallbackFormat=p},get warnHtmlMessage(){return m},set warnHtmlMessage(e){m=e,v.warnHtmlMessage=e},get escapeParameter(){return _},set escapeParameter(e){_=e,v.escapeParameter=e},t:function(...e){return w((t=>Reflect.apply(translate,null,[t,...e])),(()=>parseTranslateArgs(...e)),"translate",(t=>Reflect.apply(t.t,t,[...e])),(e=>e),(e=>isString(e)))},getLocaleMessage:function(e){return l.value[e]||{}},setLocaleMessage:function(e,t){if(o){const n={[e]:t};for(const e in n)hasOwn(n,e)&&handleFlatJson(n[e]);t=n[e]}l.value[e]=t,v.messages=l.value},mergeLocaleMessage:function(e,t){l.value[e]=l.value[e]||{};const n={[e]:t};if(o)for(const r in n)hasOwn(n,r)&&handleFlatJson(n[r]);deepCopy(t=n[e],l.value[e]),v.messages=l.value},getPostTranslationHandler:function(){return isFunction(g)?g:null},setPostTranslationHandler:function(e){g=e,v.postTranslation=e},getMissingHandler:function(){return h},setMissingHandler:function(e){null!==e&&(f=defineCoreMissingHandler(e)),h=e,v.missing=f},[SetPluralRulesSymbol]:function(e){y=e,v.pluralRules=y}}}function createI18n(e={},t){const n=!isBoolean(e.globalInjection)||e.globalInjection,r=new Map,[o,i]=createGlobal(e),a=makeSymbol("");const s={get mode(){return"composition"},async install(e,...t){if(e.__VUE_I18N_SYMBOL__=a,e.provide(e.__VUE_I18N_SYMBOL__,s),isPlainObject(t[0])){const e=t[0];s.__composerExtend=e.__composerExtend,s.__vueI18nExtend=e.__vueI18nExtend}let r=null;n&&(r=injectGlobalFields(e,s.global));const o=e.unmount;e.unmount=()=>{r&&r(),s.dispose(),o()}},get global(){return i},dispose(){o.stop()},__instances:r,__getInstance:function(e){return r.get(e)||null},__setInstance:function(e,t){r.set(e,t)},__deleteInstance:function(e){r.delete(e)}};return s}function createGlobal(e,t,n){const r=effectScope(),o=r.run((()=>createComposer(e)));if(null==o)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);return[r,o]}const globalExportProps=["locale","fallbackLocale","availableLocales"],globalExportMethods=["t"];function injectGlobalFields(e,t){const n=Object.create(null);globalExportProps.forEach((e=>{const r=Object.getOwnPropertyDescriptor(t,e);if(!r)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const o=isRef(r.value)?{get:()=>r.value.value,set(e){r.value.value=e}}:{get:()=>r.get&&r.get()};Object.defineProperty(n,e,o)})),e.config.globalProperties.$i18n=n,globalExportMethods.forEach((n=>{const r=Object.getOwnPropertyDescriptor(t,n);if(!r||!r.value)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);Object.defineProperty(e.config.globalProperties,`$${n}`,r)}));return()=>{delete e.config.globalProperties.$i18n,globalExportMethods.forEach((t=>{delete e.config.globalProperties[`$${t}`]}))}}initFeatureFlags(),registerMessageCompiler(compile);const language$a="",confirm$9="",cancel$9="",deny$9="",save$9="",operateFail$9="      .",operateSuccess$9=" ",randomMatch$9=" ",free$9="",unit$9="/",game$9="",pwa_tip$9="       {para}       {para}.",add$9="",pwa_iphone_tip$9=" {para}   ",pwa_iphone_tip_2$9="1.  ''  ",pwa_iphone_tip_3$9="2. '   '",pwa_iphone_tip_4$9="   ",billDetails$9=" ",consume$9="",income$9="",all$9="",month1$9="",month2$9="",month3$9="",month4$9="",month5$9="",month6$9="",month7$9="",month8$9="",month9$9="",month10$9="",month11$9="",month12$9="",aboutUs$9="",intro1$9="   {para}    1v1!                 .         {para}  .                    .   {para}     !",intro2$9="          !",goApp$9=" {para} ",googlePlay$9="Google Play",officialDownload$9=" ",downloadTaskTip$9="   .  ",customerService$9=" ",onlineService$9="  ",myPackage$9="",useRule$9=" ",appuse$9=" ",send$9="",videoCard$9="  ",videoCardDes$9="             ",chatCard$9="  ",chatCardDes$9="              {para} ",matchCard$9=" ",matchCardDes$9="          ",diamond$9="",recharge$9="",diamondShop$9=" ",rechargeSuccess$9="   ",advicePwaAndApp$9="       {para}       {para}.",accountSetting$9=" ",systemSetting$9=" ",deleteAccount$9=" ",deleteAccountTip$9="          !",logOut$9=" ",notification$9="",firstRegisterTip$9="        ",downloadAppRewardTip$9="   {para}      ",downloadAppRewardTip2$9="       !",downloadAppToChatTip$9="  {para}     ",downloadAppToChatTip2$9="  {para}     !",dailyRewards$9=" ",claimed$9=" ",hi$a=" {para}",notLoginYet$9="    ",quickLogin$9="",accountLogin$9="  ",googleLogin$9="  ",appleLogin$9="Log in with apple",loginAgree$9="      ",service$9=" ",and$9=" ",privacy$9=" ",loginAgreeTail$9=" .",avatar$9=" ",nickName$9="",userId$9=" ",birthDay$9=" ",enterNickName$9=" ",notDisturb$9=" ",setPassword$9="  ",changePassword$9="",account$9="",password$9=" ",enterAccount$9=" ",enterPassword$9="  ",enterOriginalPassword$9="    ",enterNewPassword$9="    ",reEnterNewPassword$9="    ",reEnterPasswordDifferent$9="        ",setSamePassword$9="       .",pleaseEnter$9=" ",callHistory$9=" ",message$9="",officialMessage$9=" ",notConnected$9=" ",clearRecords$9=" ",allRead$9=" ",noChatTip$9="    !",noChatTip2$9="      {para}   .",unlockChatTip$9=" {para}      ",unlockChatByCard$9="         {para}   ,        ",unlockChatByDiamond$9="        {para}   ,        ",toOpen$9="",continueVideoCall$9="   ",continueMatch$9="  ",matchAgain$9=" ",startMatch$9=" ",connecting$9=" ",videoCall$9=" ",videoCalling$9="     ~",videoCallWarning$9="                         ().       ",videoCallMutedTip$9="         ",videoCallMutedUnlock$9="",videoCardUsedTip$9="       {para}  ",videoCallCostTip$9=" {para}   {para1} /",videoCallHangUpBusy$9="  ,    ",videoCallConnectFail$9="    ",mediaDiveceDisable$9="               .",mediaDiveceUnknown$9="          ",notSupportGuide$9="           .       Play      .",mediaDiveceUnavailable$9="mediaDiveceUnavailable",online$9="",offline$9=" ",busy$9="",off$9="",album$9="",matchFail$9="    ,  ",matching$9=" ",videoConsumption$9=" ",giftConsumption$9=" ",allGift$9=" ",sendGfit$9="  ",callDuration$9=" ",recommendedHosts$9="  ",saveAccount$9="  ",saveAccountTip$9="          ",confirmLogout$9="        ",confirmNoCommit$9="   .      ",confirmHangUp$9="      ,     ",currentMatchTip$9=" {para}+     ",refreshPullDown$9="  ",refreshing$9=" ",refreshLoadMore$9=" ",refreshLoading$9=" ",refreshLoadFail$9="  ",refreshNoMore$9="   ",forbidRegion$9="   ",sensiveContent$9="           18         .",ageForbid$9="   {para}   ",netError$9="   ,   ",serverError$9="       ",ar={language:language$a,confirm:confirm$9,cancel:cancel$9,deny:deny$9,save:save$9,operateFail:operateFail$9,operateSuccess:operateSuccess$9,randomMatch:randomMatch$9,free:free$9,unit:unit$9,game:game$9,pwa_tip:pwa_tip$9,add:add$9,pwa_iphone_tip:pwa_iphone_tip$9,pwa_iphone_tip_2:pwa_iphone_tip_2$9,pwa_iphone_tip_3:pwa_iphone_tip_3$9,pwa_iphone_tip_4:pwa_iphone_tip_4$9,billDetails:billDetails$9,consume:consume$9,income:income$9,all:all$9,month1:month1$9,month2:month2$9,month3:month3$9,month4:month4$9,month5:month5$9,month6:month6$9,month7:month7$9,month8:month8$9,month9:month9$9,month10:month10$9,month11:month11$9,month12:month12$9,aboutUs:aboutUs$9,intro1:intro1$9,intro2:intro2$9,goApp:goApp$9,googlePlay:googlePlay$9,officialDownload:officialDownload$9,downloadTaskTip:downloadTaskTip$9,customerService:customerService$9,onlineService:onlineService$9,myPackage:myPackage$9,useRule:useRule$9,appuse:appuse$9,send:send$9,videoCard:videoCard$9,videoCardDes:videoCardDes$9,chatCard:chatCard$9,chatCardDes:chatCardDes$9,matchCard:matchCard$9,matchCardDes:matchCardDes$9,diamond:diamond$9,recharge:recharge$9,diamondShop:diamondShop$9,rechargeSuccess:rechargeSuccess$9,advicePwaAndApp:advicePwaAndApp$9,accountSetting:accountSetting$9,systemSetting:systemSetting$9,deleteAccount:deleteAccount$9,deleteAccountTip:deleteAccountTip$9,logOut:logOut$9,notification:notification$9,firstRegisterTip:firstRegisterTip$9,downloadAppRewardTip:downloadAppRewardTip$9,downloadAppRewardTip2:downloadAppRewardTip2$9,downloadAppToChatTip:downloadAppToChatTip$9,downloadAppToChatTip2:downloadAppToChatTip2$9,dailyRewards:dailyRewards$9,claimed:claimed$9,hi:hi$a,notLoginYet:notLoginYet$9,quickLogin:quickLogin$9,accountLogin:accountLogin$9,googleLogin:googleLogin$9,appleLogin:appleLogin$9,loginAgree:loginAgree$9,service:service$9,and:and$9,privacy:privacy$9,loginAgreeTail:loginAgreeTail$9,avatar:avatar$9,nickName:nickName$9,userId:userId$9,birthDay:birthDay$9,enterNickName:enterNickName$9,notDisturb:notDisturb$9,setPassword:setPassword$9,changePassword:changePassword$9,account:account$9,password:password$9,enterAccount:enterAccount$9,enterPassword:enterPassword$9,enterOriginalPassword:enterOriginalPassword$9,enterNewPassword:enterNewPassword$9,reEnterNewPassword:reEnterNewPassword$9,reEnterPasswordDifferent:reEnterPasswordDifferent$9,setSamePassword:setSamePassword$9,pleaseEnter:pleaseEnter$9,callHistory:callHistory$9,message:message$9,officialMessage:officialMessage$9,notConnected:notConnected$9,clearRecords:clearRecords$9,allRead:allRead$9,noChatTip:noChatTip$9,noChatTip2:noChatTip2$9,unlockChatTip:unlockChatTip$9,unlockChatByCard:unlockChatByCard$9,unlockChatByDiamond:unlockChatByDiamond$9,toOpen:toOpen$9,continueVideoCall:continueVideoCall$9,continueMatch:continueMatch$9,matchAgain:matchAgain$9,startMatch:startMatch$9,connecting:connecting$9,videoCall:videoCall$9,videoCalling:videoCalling$9,videoCallWarning:videoCallWarning$9,videoCallMutedTip:videoCallMutedTip$9,videoCallMutedUnlock:videoCallMutedUnlock$9,videoCardUsedTip:videoCardUsedTip$9,videoCallCostTip:videoCallCostTip$9,videoCallHangUpBusy:videoCallHangUpBusy$9,videoCallConnectFail:videoCallConnectFail$9,mediaDiveceDisable:mediaDiveceDisable$9,mediaDiveceUnknown:mediaDiveceUnknown$9,notSupportGuide:notSupportGuide$9,mediaDiveceUnavailable:mediaDiveceUnavailable$9,online:online$9,offline:offline$9,busy:busy$9,off:off$9,album:album$9,matchFail:matchFail$9,matching:matching$9,videoConsumption:videoConsumption$9,giftConsumption:giftConsumption$9,allGift:allGift$9,sendGfit:sendGfit$9,callDuration:callDuration$9,recommendedHosts:recommendedHosts$9,saveAccount:saveAccount$9,saveAccountTip:saveAccountTip$9,confirmLogout:confirmLogout$9,confirmNoCommit:confirmNoCommit$9,confirmHangUp:confirmHangUp$9,currentMatchTip:currentMatchTip$9,refreshPullDown:refreshPullDown$9,refreshing:refreshing$9,refreshLoadMore:refreshLoadMore$9,refreshLoading:refreshLoading$9,refreshLoadFail:refreshLoadFail$9,refreshNoMore:refreshNoMore$9,forbidRegion:forbidRegion$9,sensiveContent:sensiveContent$9,ageForbid:ageForbid$9,netError:netError$9,serverError:serverError$9},language$9="",confirm$8="Confirm",cancel$8="Cancel",deny$8="Deny",save$8="Save",operateFail$8="Operation failed, please try again.",operateSuccess$8="Successfully executed",randomMatch$8="Random Match",free$8="Free",unit$8="/minute",game$8="Game",pwa_tip$8="Add {para} to your home screen for quick access",add$8="Add",pwa_iphone_tip$8="Add {para} to home screen",pwa_iphone_tip_2$8="1.Tap bottom to share",pwa_iphone_tip_3$8="2.Select Add to home screen",pwa_iphone_tip_4$8="Add to home screen",billDetails$8="Bill details",consume$8="Consumption",income$8="Earnings",all$8="All",month1$8="January",month2$8="February",month3$8="March",month4$8="April",month5$8="May",month6$8="June",month7$8="July",month8$8="August",month9$8="September",month10$8="October",month11$8="November",month12$8="December",aboutUs$8="About us",intro1$8="Welcome to {para}, your exclusive 1v1 social partner! Were dedicated to providing a safe, fun, and vibrant social space for you to make friends and enjoy authentic, positive interactions. \n For an immersive social experience, we ve launched {para} s mobile app.Whether you re at home, in the office, or on the go, connect with new friends and enjoy seamless video chats with just a tap.\n Click to download {para} and start your social journey now!",intro2$8="We look forward to creating more great memories with you in the app!",goApp$8=" {para} ",googlePlay$8="Google Play",officialDownload$8="Official download",downloadTaskTip$8="Your download will start automatically shortly. Please wait...",customerService$8="Customer service",onlineService$8="Online service",myPackage$8="My package",useRule$8="Rule of use",appuse$8="App-exclusive",send$8="Send",videoCard$8="Video card",videoCardDes$8="You can use 1 video card for a 1-min video chat",chatCard$8="Chat card",chatCardDes$8="You can use 1 chat card to chat with others for free, each chat card expires in {para} days",matchCard$8="Match card",matchCardDes$8="Use match card to match for free",diamond$8="Diamond",recharge$8="Recharge",diamondShop$8="Diamond shop",rechargeSuccess$8="Recharge success",advicePwaAndApp$8="For easy access and the best experience, add {para} to your home screen or download the {para} app",accountSetting$8="Account settings",systemSetting$8="System settings",deleteAccount$8="Delete account",deleteAccountTip$8="Please confirm your action. Your account will be destroyed immediately after deletion!",logOut$8="Log out",notification$8="Notifications",firstRegisterTip$8="Chances to receive the following gifts upon the first registration",downloadAppRewardTip$8="Download the official {para} app and receive rewards immediately",downloadAppRewardTip2$8="Receive numerous daily rewards!",downloadAppToChatTip$8="Download {para} to chat freely with girls now",downloadAppToChatTip2$8="Head to {para} now for more features!",dailyRewards$8="Daily rewards",claimed$8="Claimed",hi$9="Hello, {para}",notLoginYet$8="Youre not logged in yet",quickLogin$8="Start",accountLogin$8="Log in with account",googleLogin$8="Log in with google",appleLogin$8="Log in with apple",loginAgree$8="Logging in means you agree to our ",service$8="Terms of Service",and$8=" and ",privacy$8="Privacy Policy",loginAgreeTail$8=".",avatar$8="My profile picture",nickName$8="My nickname",userId$8="User id",birthDay$8="Date of birth",enterNickName$8="Enter nickname",notDisturb$8="Do not disturb",setPassword$8="Set password",changePassword$8="Change password",account$8="Account",password$8="Password",enterAccount$8="Enter account",enterPassword$8="Enter password",enterOriginalPassword$8="Enter the original password",enterNewPassword$8="Enter the new password",reEnterNewPassword$8="Reenter password",reEnterPasswordDifferent$8="Inconsistent password, please reenter",setSamePassword$8="The passwords are the same, enter it again",pleaseEnter$8="Please enter...",callHistory$8="Call history",message$8="Message",officialMessage$8="System message",notConnected$8="Not connected",clearRecords$8="Clear records",allRead$8="Mark all as read",noChatTip$8="No chats yet!",noChatTip2$8="When you chat with new friends on {para}, theyll appear here.",unlockChatTip$8="Spend {para} diamonds to unlock  private chat with her",unlockChatByCard$8="You've unlocked {para} day free message with this user by using a chat card, become friends to chat for free",unlockChatByDiamond$8="You've unlocked {para} day free message with this user by using diamonds",toOpen$8="to open",continueVideoCall$8="Continue the video call",continueMatch$8="Keep matching",matchAgain$8="Match again",startMatch$8="Start matching",connecting$8="Connecting",videoCall$8="Video call",videoCalling$8="Calling, please wait patiently",videoCallWarning$8="Any content involving pornography, obscenity, politics, gambling, violence, etc. that violates national laws and regulations is strictly prohibited during the video (voice) process. Once discovered, we will immediately suspend the account!",videoCallMutedTip$8="The call has been muted, recharge to unlock voice",videoCallMutedUnlock$8="Unlock",videoCardUsedTip$8="Video card has been used automatically, the current {para}s is free",videoCallCostTip$8="After {para}s You will be charged {para1} diamonds/min",videoCallHangUpBusy$8="The other party is busy, please try again later",videoCallConnectFail$8="Connection failure, your girl has been snatched",mediaDiveceDisable$8="Please allow browser access to the camera and microphone for a better video chat experience with girls.",mediaDiveceUnknown$8="A girl is inviting you to turn on camera and Microphone for more immersive and fun communication",notSupportGuide$8="There might be something wrong with your current browser or internet connection, download our App listed on playstore for the best video call experience",mediaDiveceUnavailable$8="mediaDiveceUnavailable",online$8="Online",offline$8="Offline",busy$8="Busy",off$8="Off",album$8="Album",matchFail$8="Crowded match, please try again later",matching$8="Matching",videoConsumption$8="Video consumption",giftConsumption$8="Gift consumption",allGift$8="All gifts",sendGfit$8="I sent to girls",callDuration$8="Call duration",recommendedHosts$8="Hot Girls for You",saveAccount$8="Screenshot and save",saveAccountTip$8="Please screenshot your account and password in case of account loss",confirmLogout$8="Are you sure to log out of the account?",confirmNoCommit$8="You have unsaved changes. Are you sure you want to exit?",confirmHangUp$8="Sure to hang up?",currentMatchTip$8="{para}+ girls are in match currently",refreshPullDown$8="Pull down refreshing",refreshing$8="Refreshing",refreshLoadMore$8="Load more",refreshLoading$8="Loading",refreshLoadFail$8="Loading failure",refreshNoMore$8="No more data",forbidRegion$8="Your region is not supported",sensiveContent$8="You are about to access sensitive content, please confirm that you are over 18 years old and agree to access such content.",ageForbid$8="Due to age restrictions, you cannot use {para}",netError$8="Network error, please try again later",serverError$8="Servers error, please try again later",en={language:language$9,confirm:confirm$8,cancel:cancel$8,deny:deny$8,save:save$8,operateFail:operateFail$8,operateSuccess:operateSuccess$8,randomMatch:randomMatch$8,free:free$8,unit:unit$8,game:game$8,pwa_tip:pwa_tip$8,add:add$8,pwa_iphone_tip:pwa_iphone_tip$8,pwa_iphone_tip_2:pwa_iphone_tip_2$8,pwa_iphone_tip_3:pwa_iphone_tip_3$8,pwa_iphone_tip_4:pwa_iphone_tip_4$8,billDetails:billDetails$8,consume:consume$8,income:income$8,all:all$8,month1:month1$8,month2:month2$8,month3:month3$8,month4:month4$8,month5:month5$8,month6:month6$8,month7:month7$8,month8:month8$8,month9:month9$8,month10:month10$8,month11:month11$8,month12:month12$8,aboutUs:aboutUs$8,intro1:intro1$8,intro2:intro2$8,goApp:goApp$8,googlePlay:googlePlay$8,officialDownload:officialDownload$8,downloadTaskTip:downloadTaskTip$8,customerService:customerService$8,onlineService:onlineService$8,myPackage:myPackage$8,useRule:useRule$8,appuse:appuse$8,send:send$8,videoCard:videoCard$8,videoCardDes:videoCardDes$8,chatCard:chatCard$8,chatCardDes:chatCardDes$8,matchCard:matchCard$8,matchCardDes:matchCardDes$8,diamond:diamond$8,recharge:recharge$8,diamondShop:diamondShop$8,rechargeSuccess:rechargeSuccess$8,advicePwaAndApp:advicePwaAndApp$8,accountSetting:accountSetting$8,systemSetting:systemSetting$8,deleteAccount:deleteAccount$8,deleteAccountTip:deleteAccountTip$8,logOut:logOut$8,notification:notification$8,firstRegisterTip:firstRegisterTip$8,downloadAppRewardTip:downloadAppRewardTip$8,downloadAppRewardTip2:downloadAppRewardTip2$8,downloadAppToChatTip:downloadAppToChatTip$8,downloadAppToChatTip2:downloadAppToChatTip2$8,dailyRewards:dailyRewards$8,claimed:claimed$8,hi:hi$9,notLoginYet:notLoginYet$8,quickLogin:quickLogin$8,accountLogin:accountLogin$8,googleLogin:googleLogin$8,appleLogin:appleLogin$8,loginAgree:loginAgree$8,service:service$8,and:and$8,privacy:privacy$8,loginAgreeTail:loginAgreeTail$8,avatar:avatar$8,nickName:nickName$8,userId:userId$8,birthDay:birthDay$8,enterNickName:enterNickName$8,notDisturb:notDisturb$8,setPassword:setPassword$8,changePassword:changePassword$8,account:account$8,password:password$8,enterAccount:enterAccount$8,enterPassword:enterPassword$8,enterOriginalPassword:enterOriginalPassword$8,enterNewPassword:enterNewPassword$8,reEnterNewPassword:reEnterNewPassword$8,reEnterPasswordDifferent:reEnterPasswordDifferent$8,setSamePassword:setSamePassword$8,pleaseEnter:pleaseEnter$8,callHistory:callHistory$8,message:message$8,officialMessage:officialMessage$8,notConnected:notConnected$8,clearRecords:clearRecords$8,allRead:allRead$8,noChatTip:noChatTip$8,noChatTip2:noChatTip2$8,unlockChatTip:unlockChatTip$8,unlockChatByCard:unlockChatByCard$8,unlockChatByDiamond:unlockChatByDiamond$8,toOpen:toOpen$8,continueVideoCall:continueVideoCall$8,continueMatch:continueMatch$8,matchAgain:matchAgain$8,startMatch:startMatch$8,connecting:connecting$8,videoCall:videoCall$8,videoCalling:videoCalling$8,videoCallWarning:videoCallWarning$8,videoCallMutedTip:videoCallMutedTip$8,videoCallMutedUnlock:videoCallMutedUnlock$8,videoCardUsedTip:videoCardUsedTip$8,videoCallCostTip:videoCallCostTip$8,videoCallHangUpBusy:videoCallHangUpBusy$8,videoCallConnectFail:videoCallConnectFail$8,mediaDiveceDisable:mediaDiveceDisable$8,mediaDiveceUnknown:mediaDiveceUnknown$8,notSupportGuide:notSupportGuide$8,mediaDiveceUnavailable:mediaDiveceUnavailable$8,online:online$8,offline:offline$8,busy:busy$8,off:off$8,album:album$8,matchFail:matchFail$8,matching:matching$8,videoConsumption:videoConsumption$8,giftConsumption:giftConsumption$8,allGift:allGift$8,sendGfit:sendGfit$8,callDuration:callDuration$8,recommendedHosts:recommendedHosts$8,saveAccount:saveAccount$8,saveAccountTip:saveAccountTip$8,confirmLogout:confirmLogout$8,confirmNoCommit:confirmNoCommit$8,confirmHangUp:confirmHangUp$8,currentMatchTip:currentMatchTip$8,refreshPullDown:refreshPullDown$8,refreshing:refreshing$8,refreshLoadMore:refreshLoadMore$8,refreshLoading:refreshLoading$8,refreshLoadFail:refreshLoadFail$8,refreshNoMore:refreshNoMore$8,forbidRegion:forbidRegion$8,sensiveContent:sensiveContent$8,ageForbid:ageForbid$8,netError:netError$8,serverError:serverError$8},language$8="",confirm$7="Confirmar",cancel$7="Cancelar",deny$7="Rechazar",save$7="Guardar",operateFail$7="Operation failed, please try again.",operateSuccess$7="Operacin exitosa",randomMatch$7="Emparejamiento aleatorio",free$7="Gratis",unit$7="/minuto",game$7="Juego",pwa_tip$7="Aade a {para} a tu pantalla de inicio para un acceso rpido",add$7="Agregar",pwa_iphone_tip$7="Agregar {para} a la pantalla de inicio",pwa_iphone_tip_2$7="1. Toca el botn 'Compartir' en la parte inferior",pwa_iphone_tip_3$7="2. Selecciona 'Agregar a la pantalla de inicio",pwa_iphone_tip_4$7="Aadir a la pantalla de inicio",billDetails$7="Detalles de facturacin",consume$7="Consumo",income$7="Ingreso",all$7="Todo",month1$7="Enero",month2$7="Febrero",month3$7="Marzo",month4$7="Abril",month5$7="Mayo",month6$7="Junio",month7$7="Julio",month8$7="Agosto",month9$7="Septiembre",month10$7="Octubre",month11$7="Noviembre",month12$7="Diciembre",aboutUs$7="Acerca de nosotros",intro1$7="Bienvenido a {para}! Somos tu compaero social 1 a 1 exclusivo. Nos comprometemos a brindarte un entorno seguro, divertido y lleno de energa, para que puedas conocer nuevos amigos y disfrutar de una experiencia de comunicacin autntica y agradable. \n Para hacer tu experiencia social an ms prctica y envolvente, hemos lanzado la aplicacin mvil de {para}. Ya sea que ests en casa, en la oficina o de viaje, con solo un toque puedes conectarte instantneamente con nuevos amigos y disfrutar de conversaciones en video sin interrupciones. \n Descarga {para} y comienza hoy mismo tu nuevo viaje social!",intro2$7="Esperamos encontrarte en la aplicacin y crear juntos ms recuerdos hermosos!",goApp$7=" {para} ",googlePlay$7="Google Play",officialDownload$7="Descarga oficial",downloadTaskTip$7="Tu descarga comenzar automticamente en breve. Por favor espera...",customerService$7="Servicio al Cliente",onlineService$7="Servicio en lnea",myPackage$7="Mi mochila",useRule$7="Reglas de uso",appuse$7="Exclusivo de la aplicacin",send$7="Enviar",videoCard$7="Tarjeta de video",videoCardDes$7="Puede consumir 1 tarjeta de video para obtener 1 minuto de video gratis durante el chat de video.",chatCard$7="Tarjeta de chat",chatCardDes$7="Puedes usar 1 tarjeta de chat para chatear con otras personas de forma gratuita; cada tarjeta de chat es vlida por {para} das",matchCard$7="Tarjeta de Match",matchCardDes$7="Utilice la tarjeta de Match para Match gratis",diamond$7="Diamante",recharge$7="Recargar",diamondShop$7="Recargar gemas",rechargeSuccess$7="Recarga exitosa",advicePwaAndApp$7="Para un acceso fcil y una experiencia completa, le recomendamos aadir {para} a su pantalla de inicio o descargar la aplicacin {para}.",accountSetting$7="Configuraciones de la cuenta",systemSetting$7="Ajustes del sistema",deleteAccount$7="Cancelar cuenta",deleteAccountTip$7="Confirme su operacin, su cuenta ser destruida inmediatamente despus de su eliminacin.",logOut$7="Cerrar sesin",notification$7="Notificaciones",firstRegisterTip$7="Probabilidad de recibir los siguientes regalos al registrarse por primera vez",downloadAppRewardTip$7="Descarga la aplicacin oficial de {para} y recibe recompensas de inmediato",downloadAppRewardTip2$7="Recibe numerosas recompensas diarias!",downloadAppToChatTip$7="Descarga {para} ahora para chatear gratis con chicas",downloadAppToChatTip2$7="Dirgete a {para} ahora para ms funciones!",dailyRewards$7="Recompensas diarias",claimed$7="Recibido",hi$8="Hola, {para}",notLoginYet$7="An no has iniciado sesin",quickLogin$7="Comenzar",accountLogin$7="Iniciar sesin con ID",googleLogin$7="Iniciar sesin con Google",appleLogin$7="Apple ID",loginAgree$7="Iniciar sesin significa que aceptas nuestros ",service$7="Trminos de Servicio",and$7=" y ",privacy$7="Poltica de Privacidad",loginAgreeTail$7=".",avatar$7="Mi avatar",nickName$7="Mi apodo",userId$7="ID de usuario",birthDay$7="Fecha de nacimiento",enterNickName$7="Ingrese el apodo",notDisturb$7="No molestar",setPassword$7="Configurar la contrasea",changePassword$7="Cambiar la contrasea",account$7="Cuenta",password$7="Contrasea",enterAccount$7="Ingrese el nmero de cuenta",enterPassword$7="Ingrese la contrasea",enterOriginalPassword$7="Por favor ingrese la contrasea original",enterNewPassword$7="Por favor ingrese una nueva contrasea",reEnterNewPassword$7="Ingresa la contrasea otra vez",reEnterPasswordDifferent$7="Las dos contraseas son diferentes, por favor vuelva a ingresar",setSamePassword$7="Las contraseas son las mismas, ingrsalas nuevamente.",pleaseEnter$7="por favor ingresa...",callHistory$7="Registros de llamadas",message$7="Mensaje",officialMessage$7="Informacin del sistema",notConnected$7="No conectado",clearRecords$7="Borrar registro",allRead$7="Todo leido",noChatTip$7="An no hay chats!",noChatTip2$7="Cuando chateas con nuevos amigos en {para}, aparecern aqu.",unlockChatTip$7="Gasta {para} diamantes para desbloquear el chat privado con ella",unlockChatByCard$7="Has utilizado la tarjeta de mensajes para desbloquear {para} da de mensajes gratuitos con este usuario. Si son amigos, pueden chatear gratis.",unlockChatByDiamond$7="Se han utilizado diamantes para desbloquear {para} da de mensajes gratuitos con este usuario",toOpen$7="abrir",continueVideoCall$7="Continuar vdeo",continueMatch$7="Continuar emparejando",matchAgain$7="Match de nuevo",startMatch$7="Empezar a Match",connecting$7="Conectando",videoCall$7="Videollamada",videoCalling$7="Llamando, por favor espere pacientemente~",videoCallWarning$7="Cualquier contenido que involucre pornografa, obscenidad, poltica, juegos de azar, violencia, etc que viole las leyes y regulaciones nacionales est estrictamente prohibido durante el proceso de video (voz). Una vez descubierto, suspenderemos inmediatamente la cuenta!",videoCallMutedTip$7="La llamada ha sido silenciada, recarga para desbloquear la voz.",videoCallMutedUnlock$7="Abrir",videoCardUsedTip$7="La tarjeta de video se ha usado automticamente, actualmente {para} segundos es gratis",videoCallCostTip$7="Despus de {para} segundos, se cobrarn {para1} diamantes por minuto.",videoCallHangUpBusy$7="La otra parte est ocupada, intntelo de nuevo ms tarde ~",videoCallConnectFail$7="La conexin fall, tu chica fue secuestrada.",mediaDiveceDisable$7="Permite que el navegador acceda a la cmara y el micrfono para una mejor experiencia de chat de video con chicas.",mediaDiveceUnknown$7="Una chica te est invitando a activar la cmara y el micrfono para una comunicacin ms inmersiva y divertida.",notSupportGuide$7="Puede que haya algn problema con tu navegador actual o conexin a internet. Descarga nuestra aplicacin disponible en Play Store para la mejor experiencia de videollamada.",mediaDiveceUnavailable$7="mediaDiveceUnavailable",online$7="En lnea",offline$7="Offline",busy$7="Ocupada",off$7="Off",album$7="lbum",matchFail$7="Hay demasiadas personas que Match, intntalo de nuevo ms tarde.",matching$7="Matching",videoConsumption$7="Consumo de vdeo",giftConsumption$7="Consumo de regalos",allGift$7="Todos los regalos",sendGfit$7="se lo doy al host",callDuration$7="Duracin de la llamada",recommendedHosts$7="Chicas Hot para Ti",saveAccount$7="Guardar captura de pantalla",saveAccountTip$7="Tome una captura de pantalla para guardar la contrasea y su cuentaevitar su prdida.",confirmLogout$7="Est seguro de que desea cerrar sesin en esta cuenta?",confirmNoCommit$7="Tienes cambios no guardados. Ests seguro de que quieres salir?",confirmHangUp$7="Ests seguro de que quieres colgar el vdeo?",currentMatchTip$7="Actualmente hay {para}+ chicas que estn siendo emparejadas.",refreshPullDown$7="Tira hacia abajo para actualizar",refreshing$7="Actualizando",refreshLoadMore$7="Cargar ms",refreshLoading$7="Cargando",refreshLoadFail$7="Fall al cargar",refreshNoMore$7="No ms datos",forbidRegion$7="Su regin no es compatible",sensiveContent$7="Ests a punto de acceder a contenido sensible, por favor confirma que tienes al menos 18 aos y que aceptas acceder a dicho contenido.",ageForbid$7="Debido a restricciones de edad, no puede usar {para}",netError$7="Anomala en la red, intntelo de nuevo ms tarde",serverError$7="Error del servidor, por favor, intntalo ms tarde",es={language:language$8,confirm:confirm$7,cancel:cancel$7,deny:deny$7,save:save$7,operateFail:operateFail$7,operateSuccess:operateSuccess$7,randomMatch:randomMatch$7,free:free$7,unit:unit$7,game:game$7,pwa_tip:pwa_tip$7,add:add$7,pwa_iphone_tip:pwa_iphone_tip$7,pwa_iphone_tip_2:pwa_iphone_tip_2$7,pwa_iphone_tip_3:pwa_iphone_tip_3$7,pwa_iphone_tip_4:pwa_iphone_tip_4$7,billDetails:billDetails$7,consume:consume$7,income:income$7,all:all$7,month1:month1$7,month2:month2$7,month3:month3$7,month4:month4$7,month5:month5$7,month6:month6$7,month7:month7$7,month8:month8$7,month9:month9$7,month10:month10$7,month11:month11$7,month12:month12$7,aboutUs:aboutUs$7,intro1:intro1$7,intro2:intro2$7,goApp:goApp$7,googlePlay:googlePlay$7,officialDownload:officialDownload$7,downloadTaskTip:downloadTaskTip$7,customerService:customerService$7,onlineService:onlineService$7,myPackage:myPackage$7,useRule:useRule$7,appuse:appuse$7,send:send$7,videoCard:videoCard$7,videoCardDes:videoCardDes$7,chatCard:chatCard$7,chatCardDes:chatCardDes$7,matchCard:matchCard$7,matchCardDes:matchCardDes$7,diamond:diamond$7,recharge:recharge$7,diamondShop:diamondShop$7,rechargeSuccess:rechargeSuccess$7,advicePwaAndApp:advicePwaAndApp$7,accountSetting:accountSetting$7,systemSetting:systemSetting$7,deleteAccount:deleteAccount$7,deleteAccountTip:deleteAccountTip$7,logOut:logOut$7,notification:notification$7,firstRegisterTip:firstRegisterTip$7,downloadAppRewardTip:downloadAppRewardTip$7,downloadAppRewardTip2:downloadAppRewardTip2$7,downloadAppToChatTip:downloadAppToChatTip$7,downloadAppToChatTip2:downloadAppToChatTip2$7,dailyRewards:dailyRewards$7,claimed:claimed$7,hi:hi$8,notLoginYet:notLoginYet$7,quickLogin:quickLogin$7,accountLogin:accountLogin$7,googleLogin:googleLogin$7,appleLogin:appleLogin$7,loginAgree:loginAgree$7,service:service$7,and:and$7,privacy:privacy$7,loginAgreeTail:loginAgreeTail$7,avatar:avatar$7,nickName:nickName$7,userId:userId$7,birthDay:birthDay$7,enterNickName:enterNickName$7,notDisturb:notDisturb$7,setPassword:setPassword$7,changePassword:changePassword$7,account:account$7,password:password$7,enterAccount:enterAccount$7,enterPassword:enterPassword$7,enterOriginalPassword:enterOriginalPassword$7,enterNewPassword:enterNewPassword$7,reEnterNewPassword:reEnterNewPassword$7,reEnterPasswordDifferent:reEnterPasswordDifferent$7,setSamePassword:setSamePassword$7,pleaseEnter:pleaseEnter$7,callHistory:callHistory$7,message:message$7,officialMessage:officialMessage$7,notConnected:notConnected$7,clearRecords:clearRecords$7,allRead:allRead$7,noChatTip:noChatTip$7,noChatTip2:noChatTip2$7,unlockChatTip:unlockChatTip$7,unlockChatByCard:unlockChatByCard$7,unlockChatByDiamond:unlockChatByDiamond$7,toOpen:toOpen$7,continueVideoCall:continueVideoCall$7,continueMatch:continueMatch$7,matchAgain:matchAgain$7,startMatch:startMatch$7,connecting:connecting$7,videoCall:videoCall$7,videoCalling:videoCalling$7,videoCallWarning:videoCallWarning$7,videoCallMutedTip:videoCallMutedTip$7,videoCallMutedUnlock:videoCallMutedUnlock$7,videoCardUsedTip:videoCardUsedTip$7,videoCallCostTip:videoCallCostTip$7,videoCallHangUpBusy:videoCallHangUpBusy$7,videoCallConnectFail:videoCallConnectFail$7,mediaDiveceDisable:mediaDiveceDisable$7,mediaDiveceUnknown:mediaDiveceUnknown$7,notSupportGuide:notSupportGuide$7,mediaDiveceUnavailable:mediaDiveceUnavailable$7,online:online$7,offline:offline$7,busy:busy$7,off:off$7,album:album$7,matchFail:matchFail$7,matching:matching$7,videoConsumption:videoConsumption$7,giftConsumption:giftConsumption$7,allGift:allGift$7,sendGfit:sendGfit$7,callDuration:callDuration$7,recommendedHosts:recommendedHosts$7,saveAccount:saveAccount$7,saveAccountTip:saveAccountTip$7,confirmLogout:confirmLogout$7,confirmNoCommit:confirmNoCommit$7,confirmHangUp:confirmHangUp$7,currentMatchTip:currentMatchTip$7,refreshPullDown:refreshPullDown$7,refreshing:refreshing$7,refreshLoadMore:refreshLoadMore$7,refreshLoading:refreshLoading$7,refreshLoadFail:refreshLoadFail$7,refreshNoMore:refreshNoMore$7,forbidRegion:forbidRegion$7,sensiveContent:sensiveContent$7,ageForbid:ageForbid$7,netError:netError$7,serverError:serverError$7},language$7="",confirm$6=" ",cancel$6=" ",deny$6="",save$6="",operateFail$6=" ,  :  ",operateSuccess$6="  ",randomMatch$6=" ",free$6="",unit$6="/",game$6="",pwa_tip$6="    {para}      ",add$6="",pwa_iphone_tip$6="{para}     ",pwa_iphone_tip_2$6="1.    ''    ",pwa_iphone_tip_3$6="2. '   '  ",pwa_iphone_tip_4$6="   ",billDetails$6=" ",consume$6="",income$6="",all$6="",month1$6="",month2$6="",month3$6="",month4$6="",month5$6="",month6$6="",month7$6="",month8$6="",month9$6="",month10$6="",month11$6="",month12$6="",aboutUs$6="  ",intro1$6="{para}    !   1v1            ,       ,                  \n              {para}           ,     ,                    \n {para}            !",intro2$6="                 !",goApp$6=" {para} ",googlePlay$6="Google Play",officialDownload$6=" ",downloadTaskTip$6="             ...",customerService$6=" ",onlineService$6=" ",myPackage$6=" ",useRule$6="  ",appuse$6="-",send$6="",videoCard$6=" ",videoCardDes$6=" 1       1       ",chatCard$6=" ",chatCardDes$6="         1       ,    {para}      ",matchCard$6=" ",matchCardDes$6="          ",diamond$6="",recharge$6="",diamondShop$6="  ",rechargeSuccess$6=" ",advicePwaAndApp$6="      ,   {para}       {para}       ",accountSetting$6=" ",systemSetting$6=" ",deleteAccount$6="  ",deleteAccountTip$6="     .          !",logOut$6=" ",notification$6="",firstRegisterTip$6="        ",downloadAppRewardTip$6=" {para}        ",downloadAppRewardTip2$6="    !",downloadAppToChatTip$6="           {para}  ",downloadAppToChatTip2$6="     {para}  !",dailyRewards$6=" ",claimed$6=" ",hi$6=", {para}",notLoginYet$6="      ",quickLogin$6=" ",accountLogin$6="    ",googleLogin$6="    ",appleLogin$6="Apple ",loginAgree$6="        ",service$6="  ",and$6="  ",privacy$6=" ",loginAgreeTail$6="   ",avatar$6="  ",nickName$6=" ",userId$6=" ID",birthDay$6="  ",enterNickName$6="  ",notDisturb$6="  ",setPassword$6="  ",changePassword$6=" ",account$6="",password$6="",enterAccount$6="  ",enterPassword$6="  ",enterOriginalPassword$6="    ",enterNewPassword$6="     ",reEnterNewPassword$6="    ",reEnterPasswordDifferent$6="    ,    ",setSamePassword$6="  ,    ",pleaseEnter$6="  ...",callHistory$6=" ",message$6="",officialMessage$6=" ",notConnected$6="  ",clearRecords$6="  ",allRead$6="     ",noChatTip$6="    !",noChatTip2$6="  {para}        ,    ",unlockChatTip$6="      {para}   ",unlockChatByCard$6="          {para}        ,       ",unlockChatByDiamond$6="         {para}        ",toOpen$6="  ",continueVideoCall$6="   ",continueMatch$6="  ",matchAgain$6="   ",startMatch$6="  ",connecting$6="   ",videoCall$6=" ",videoCalling$6="   ,    ",videoCallWarning$6=" , , , ,                ,  ()            ,      !",videoCallMutedTip$6="     ,       ",videoCallMutedUnlock$6="",videoCardUsedTip$6="        ,  {para}   ",videoCallCostTip$6="{para}     {para1} /    ",videoCallHangUpBusy$6="   ,      ",videoCallConnectFail$6=" ,    ",mediaDiveceDisable$6="                ",mediaDiveceUnknown$6="                     ",notSupportGuide$6="                 ,        ",mediaDiveceUnavailable$6="mediaDiveceUnavailable",online$6="",offline$6="",busy$6="",off$6="",album$6="",matchFail$6="  ,      ",matching$6="  ",videoConsumption$6="  ",giftConsumption$6="  ",allGift$6=" ",sendGfit$6="   ",callDuration$6="  ",recommendedHosts$6="   ",saveAccount$6="    ",saveAccountTip$6="             ",confirmLogout$6="           ?",confirmNoCommit$6="              ?",confirmHangUp$6="    ",currentMatchTip$6="{para}+      ",refreshPullDown$6="     ",refreshing$6="   ",refreshLoadMore$6="  ",refreshLoading$6="   ",refreshLoadFail$6="   ",refreshNoMore$6="   ",forbidRegion$6="     ",sensiveContent$6="      ,      18    ,           ",ageForbid$6="   ,  {para}     ",netError$6=" ,      ",serverError$6=" ,    :  ",hi$7={language:language$7,confirm:confirm$6,cancel:cancel$6,deny:deny$6,save:save$6,operateFail:operateFail$6,operateSuccess:operateSuccess$6,randomMatch:randomMatch$6,free:free$6,unit:unit$6,game:game$6,pwa_tip:pwa_tip$6,add:add$6,pwa_iphone_tip:pwa_iphone_tip$6,pwa_iphone_tip_2:pwa_iphone_tip_2$6,pwa_iphone_tip_3:pwa_iphone_tip_3$6,pwa_iphone_tip_4:pwa_iphone_tip_4$6,billDetails:billDetails$6,consume:consume$6,income:income$6,all:all$6,month1:month1$6,month2:month2$6,month3:month3$6,month4:month4$6,month5:month5$6,month6:month6$6,month7:month7$6,month8:month8$6,month9:month9$6,month10:month10$6,month11:month11$6,month12:month12$6,aboutUs:aboutUs$6,intro1:intro1$6,intro2:intro2$6,goApp:goApp$6,googlePlay:googlePlay$6,officialDownload:officialDownload$6,downloadTaskTip:downloadTaskTip$6,customerService:customerService$6,onlineService:onlineService$6,myPackage:myPackage$6,useRule:useRule$6,appuse:appuse$6,send:send$6,videoCard:videoCard$6,videoCardDes:videoCardDes$6,chatCard:chatCard$6,chatCardDes:chatCardDes$6,matchCard:matchCard$6,matchCardDes:matchCardDes$6,diamond:diamond$6,recharge:recharge$6,diamondShop:diamondShop$6,rechargeSuccess:rechargeSuccess$6,advicePwaAndApp:advicePwaAndApp$6,accountSetting:accountSetting$6,systemSetting:systemSetting$6,deleteAccount:deleteAccount$6,deleteAccountTip:deleteAccountTip$6,logOut:logOut$6,notification:notification$6,firstRegisterTip:firstRegisterTip$6,downloadAppRewardTip:downloadAppRewardTip$6,downloadAppRewardTip2:downloadAppRewardTip2$6,downloadAppToChatTip:downloadAppToChatTip$6,downloadAppToChatTip2:downloadAppToChatTip2$6,dailyRewards:dailyRewards$6,claimed:claimed$6,hi:hi$6,notLoginYet:notLoginYet$6,quickLogin:quickLogin$6,accountLogin:accountLogin$6,googleLogin:googleLogin$6,appleLogin:appleLogin$6,loginAgree:loginAgree$6,service:service$6,and:and$6,privacy:privacy$6,loginAgreeTail:loginAgreeTail$6,avatar:avatar$6,nickName:nickName$6,userId:userId$6,birthDay:birthDay$6,enterNickName:enterNickName$6,notDisturb:notDisturb$6,setPassword:setPassword$6,changePassword:changePassword$6,account:account$6,password:password$6,enterAccount:enterAccount$6,enterPassword:enterPassword$6,enterOriginalPassword:enterOriginalPassword$6,enterNewPassword:enterNewPassword$6,reEnterNewPassword:reEnterNewPassword$6,reEnterPasswordDifferent:reEnterPasswordDifferent$6,setSamePassword:setSamePassword$6,pleaseEnter:pleaseEnter$6,callHistory:callHistory$6,message:message$6,officialMessage:officialMessage$6,notConnected:notConnected$6,clearRecords:clearRecords$6,allRead:allRead$6,noChatTip:noChatTip$6,noChatTip2:noChatTip2$6,unlockChatTip:unlockChatTip$6,unlockChatByCard:unlockChatByCard$6,unlockChatByDiamond:unlockChatByDiamond$6,toOpen:toOpen$6,continueVideoCall:continueVideoCall$6,continueMatch:continueMatch$6,matchAgain:matchAgain$6,startMatch:startMatch$6,connecting:connecting$6,videoCall:videoCall$6,videoCalling:videoCalling$6,videoCallWarning:videoCallWarning$6,videoCallMutedTip:videoCallMutedTip$6,videoCallMutedUnlock:videoCallMutedUnlock$6,videoCardUsedTip:videoCardUsedTip$6,videoCallCostTip:videoCallCostTip$6,videoCallHangUpBusy:videoCallHangUpBusy$6,videoCallConnectFail:videoCallConnectFail$6,mediaDiveceDisable:mediaDiveceDisable$6,mediaDiveceUnknown:mediaDiveceUnknown$6,notSupportGuide:notSupportGuide$6,mediaDiveceUnavailable:mediaDiveceUnavailable$6,online:online$6,offline:offline$6,busy:busy$6,off:off$6,album:album$6,matchFail:matchFail$6,matching:matching$6,videoConsumption:videoConsumption$6,giftConsumption:giftConsumption$6,allGift:allGift$6,sendGfit:sendGfit$6,callDuration:callDuration$6,recommendedHosts:recommendedHosts$6,saveAccount:saveAccount$6,saveAccountTip:saveAccountTip$6,confirmLogout:confirmLogout$6,confirmNoCommit:confirmNoCommit$6,confirmHangUp:confirmHangUp$6,currentMatchTip:currentMatchTip$6,refreshPullDown:refreshPullDown$6,refreshing:refreshing$6,refreshLoadMore:refreshLoadMore$6,refreshLoading:refreshLoading$6,refreshLoadFail:refreshLoadFail$6,refreshNoMore:refreshNoMore$6,forbidRegion:forbidRegion$6,sensiveContent:sensiveContent$6,ageForbid:ageForbid$6,netError:netError$6,serverError:serverError$6},language$6="",confirm$5="Konfirmasi",cancel$5="Batal",deny$5="Menolak",save$5="Simpan",operateFail$5="Operasi gagal, silakan coba lagi nanti",operateSuccess$5="Operasi berhasil",randomMatch$5="Pencocokan Acak",free$5="Gratis",unit$5="/menit",game$5="Games",pwa_tip$5="Tambahkan {para} ke layar beranda untuk akses cepat",add$5="Tambahkan",pwa_iphone_tip$5="Tambahkan {para} ke layar utama",pwa_iphone_tip_2$5="1. Ketuk tombol 'Bagikan' di bagian bawah",pwa_iphone_tip_3$5="2. Pilih 'Tambahkan ke layar utama",pwa_iphone_tip_4$5="Tambahkan ke Layar Utama",billDetails$5="Detail penagihan",consume$5="Konsumsi",income$5="Penghasilan",all$5="Semua",month1$5="Januari",month2$5="Februari",month3$5="March",month4$5="April",month5$5="May",month6$5="June",month7$5="July",month8$5="August",month9$5="September",month10$5="October",month11$5="November",month12$5="December",aboutUs$5="Tentang kami",intro1$5="Selamat datang di {para}! Kami di sini sebagai teman sosial 1v1 khusus untuk Anda. Kami berkomitmen untuk menyediakan lingkungan yang aman, menyenangkan, dan penuh energi, agar Anda dapat bertemu teman baru dan menikmati pengalaman berinteraksi yang nyata dan menyenangkan.n Untuk membuat pengalaman sosial Anda semakin praktis dan imersif, kami memperkenalkan aplikasi seluler {para}.Di mana pun Anda berada di rumah, kantor, atau dalam perjalanan cukup satu sentuhan untuk terhubung dengan teman baru Anda dan menikmati keseruan obrolan video tanpa hambatan .\n Unduh {para} sekarang dan mulai perjalanan sosial Anda hari ini!",intro2$5="Kami menantikan untuk bertemu dengan Anda di aplikasi dan menciptakan lebih banyak kenangan indah bersama!",goApp$5=" {para} ",googlePlay$5="Google Play",officialDownload$5="Unduh resmi",downloadTaskTip$5="Unduhan Anda akan segera dimulai secara otomatis. Harap tunggu...",customerService$5="Pelayanan pelanggan",onlineService$5="Layanan online",myPackage$5="Ransel saya",useRule$5="Aturan penggunaan",appuse$5="Eksklusif untuk aplikasi",send$5="Memberi",videoCard$5="Kartu video",videoCardDes$5="Anda dapat menggunakan 1 kartu video selama video call dan menikmatinya secara gratis selama 1 menit.",chatCard$5="Kartu obrolan",chatCardDes$5="Anda dapat menggunakan 1 kartu obrolan untuk ngobrol dengan orang lain secara gratis; setiap kartu obrolan berlaku selama {para} hari",matchCard$5="Kartu mencocokkan",matchCardDes$5="Gunakan kartu mencocokkan untuk mencocokkan secara gratis",diamond$5="Diamond",recharge$5="Topup",diamondShop$5="Toko diamond",rechargeSuccess$5="Topup berhasil",advicePwaAndApp$5="Untuk akses yang mudah dan pengalaman fitur lengkap, kami sarankan untuk menambahkan {para} ke layar beranda atau mengunduh aplikasi {para}.",accountSetting$5="Pengaturan akun",systemSetting$5="Pengaturan sistem",deleteAccount$5="Hapus akun",deleteAccountTip$5="Harap konfirmasi operasi Anda, akun Anda akan segera dimusnahkan setelah penghapusan!",logOut$5="Logout",notification$5="Notifikasi",firstRegisterTip$5="Kesempatan untuk menerima hadiah berikut pada pendaftaran pertama",downloadAppRewardTip$5="Unduh aplikasi resmi {para} dan dapatkan hadiah segera",downloadAppRewardTip2$5="Dapatkan hadiah harian yang berlimpah!",downloadAppToChatTip$5="Unduh {para} sekarang untuk ngobrol gratis dengan gadis-gadis",downloadAppToChatTip2$5="Kunjungi {para} sekarang untuk lebih banyak fitur!",dailyRewards$5="Hadiah harian",claimed$5="Diterima",hi$5="Halo, {para}",notLoginYet$5="Anda belum masuk",quickLogin$5="Mulai",accountLogin$5="Login via Akun",googleLogin$5="Login via Google",appleLogin$5="Login dengan Apple",loginAgree$5="Masuk berarti Anda setuju dengan ",service$5="Syarat Layanan",and$5=" dan ",privacy$5="Kebijakan Privasi",loginAgreeTail$5=" kami.",avatar$5="Avatar saya",nickName$5="Nickname saya",userId$5="Id pengguna",birthDay$5="Tanggal lahir",enterNickName$5="Masukkan Nikname",notDisturb$5="Jangan ganggu",setPassword$5="Mengatur kata sandi",changePassword$5="Ganti kata sandi",account$5="Akun",password$5="Kata sandi",enterAccount$5="Masukkan akun",enterPassword$5="Masukkan kata sandi",enterOriginalPassword$5="Silakan masukkan kata sandi asli",enterNewPassword$5="Silakan masukkan kata sandi  baru",reEnterNewPassword$5="Masukkan kata sandi lagi",reEnterPasswordDifferent$5="Kedua kata sandi berbeda, masukkan lagi",setSamePassword$5="Kata sandinya sama dua kali, silakan masukkan kembali.",pleaseEnter$5="silakan masuk...",callHistory$5="Riwayat panggilan",message$5="Pesan",officialMessage$5="Pesan dari sistem",notConnected$5="Tidak terhubung",clearRecords$5="Hapus riwayat",allRead$5="Semua dibaca",noChatTip$5="Belum ada obrolan!",noChatTip2$5="Ketika Anda mengobrol dengan teman baru di {para}, mereka akan muncul di sini.",unlockChatTip$5="Habiskan {para} berlian untuk membuka obrolan pribadi dengannya",unlockChatByCard$5="Anda telah menggunakan kartu pesan untuk membuka pesan gratis selama {para} hari dengan pengguna ini. Jika kalian menjadi teman, Anda dapat ngobrol gratis.",unlockChatByDiamond$5="Diamond telah digunakan untuk membuka pesan gratis {para} hari dengan pengguna ini",toOpen$5="Membuka",continueVideoCall$5="Lanjutkan video call",continueMatch$5="Lanjutkan mencocokan video",matchAgain$5="Mencocokkan ulang",startMatch$5="Mulai mencocokkan",connecting$5="Menghubungkan",videoCall$5="Panggilan",videoCalling$5="Sedang menelepon, harap menunggu dengan sabar~",videoCallWarning$5="Konten apa pun yang melibatkan pornografi, kecabulan, politik, perjudian, kekerasan, dll. yang melanggar hukum dan peraturan nasional dilarang keras selama proses video (suara). Jika ditemukan, kami akan segera menangguhkan akun tersebut!",videoCallMutedTip$5="Pihak lain sudah mematikan suara. Anda dapat menyalakan setelah topup.",videoCallMutedUnlock$5="Beli",videoCardUsedTip$5="Kartu video telah digunakan secara otomatis, saat ini {para} detik gratis",videoCallCostTip$5="Setelah {para} detik, {para1} diamond/menit akan dikenakan",videoCallHangUpBusy$5="Pihak lain sedang sibuk, silakan coba lagi nanti~",videoCallConnectFail$5="Koneksi gagal, gadismu sudah diculik",mediaDiveceDisable$5="Izinkan browser mengakses kamera dan mikrofon untuk pengalaman video chat yang lebih baik dengan gadis.",mediaDiveceUnknown$5="Seorang gadis mengundang Anda untuk menyalakan kamera dan Mikrofon untuk komunikasi yang lebih imersif dan menyenangkan.",notSupportGuide$5="Mungkin ada masalah dengan browser atau koneksi internet Anda saat ini. Unduh aplikasi kami yang terdaftar di Play Store untuk pengalaman video call terbaik.",mediaDiveceUnavailable$5="mediaDiveceUnavailable",online$5="Online",offline$5="Offline",busy$5="Sibuk",off$5="Off",album$5="Album Foto",matchFail$5="Saat ini terlalu banyak orang yang cocok, silakan coba lagi nanti.",matching$5="Sedang mencocokkan",videoConsumption$5="Konsumsi video",giftConsumption$5="Konsumsi hadiah",allGift$5="Semua hadiah",sendGfit$5="Saya kirim ke cewek-cewek",callDuration$5="Durasi panggilan",recommendedHosts$5="Gadis Seksi untuk Anda",saveAccount$5="Simpan tangkapan layar",saveAccountTip$5="Silakan ambil tangkapan layar untuk menyimpan kata sandi akun Anda biar tidak kehilangan akun",confirmLogout$5="Apakah Anda yakin ingin keluar dari akun ini?",confirmNoCommit$5="Anda memiliki perubahan yang belum disimpan. Yakin ingin keluar?",confirmHangUp$5="Apakah Anda ingin mematikan panggilannya?",currentMatchTip$5="Saat ini ada {para}+ gadis yang sedang mencocokkan",refreshPullDown$5="Geser ke bawah untuk menyegarkan",refreshing$5="Sedang menyegarkan",refreshLoadMore$5="Muat lebih banyak",refreshLoading$5="Memuat",refreshLoadFail$5="Gagal memuat",refreshNoMore$5="Tidak ada data lagi",forbidRegion$5="Wilayah Anda tidak didukung",sensiveContent$5="Anda akan mengakses konten sensitif, silakan konfirmasi bahwa Anda telah berusia 18 tahun dan setuju untuk mengakses konten semacam itu.",ageForbid$5="Karena batasan usia, Anda tidak dapat menggunakan {para}",netError$5="Jaringan tidak normal, silakan coba lagi nanti",serverError$5="Error server, mohon dicoba kembali nanti",id={language:language$6,confirm:confirm$5,cancel:cancel$5,deny:deny$5,save:save$5,operateFail:operateFail$5,operateSuccess:operateSuccess$5,randomMatch:randomMatch$5,free:free$5,unit:unit$5,game:game$5,pwa_tip:pwa_tip$5,add:add$5,pwa_iphone_tip:pwa_iphone_tip$5,pwa_iphone_tip_2:pwa_iphone_tip_2$5,pwa_iphone_tip_3:pwa_iphone_tip_3$5,pwa_iphone_tip_4:pwa_iphone_tip_4$5,billDetails:billDetails$5,consume:consume$5,income:income$5,all:all$5,month1:month1$5,month2:month2$5,month3:month3$5,month4:month4$5,month5:month5$5,month6:month6$5,month7:month7$5,month8:month8$5,month9:month9$5,month10:month10$5,month11:month11$5,month12:month12$5,aboutUs:aboutUs$5,intro1:intro1$5,intro2:intro2$5,goApp:goApp$5,googlePlay:googlePlay$5,officialDownload:officialDownload$5,downloadTaskTip:downloadTaskTip$5,customerService:customerService$5,onlineService:onlineService$5,myPackage:myPackage$5,useRule:useRule$5,appuse:appuse$5,send:send$5,videoCard:videoCard$5,videoCardDes:videoCardDes$5,chatCard:chatCard$5,chatCardDes:chatCardDes$5,matchCard:matchCard$5,matchCardDes:matchCardDes$5,diamond:diamond$5,recharge:recharge$5,diamondShop:diamondShop$5,rechargeSuccess:rechargeSuccess$5,advicePwaAndApp:advicePwaAndApp$5,accountSetting:accountSetting$5,systemSetting:systemSetting$5,deleteAccount:deleteAccount$5,deleteAccountTip:deleteAccountTip$5,logOut:logOut$5,notification:notification$5,firstRegisterTip:firstRegisterTip$5,downloadAppRewardTip:downloadAppRewardTip$5,downloadAppRewardTip2:downloadAppRewardTip2$5,downloadAppToChatTip:downloadAppToChatTip$5,downloadAppToChatTip2:downloadAppToChatTip2$5,dailyRewards:dailyRewards$5,claimed:claimed$5,hi:hi$5,notLoginYet:notLoginYet$5,quickLogin:quickLogin$5,accountLogin:accountLogin$5,googleLogin:googleLogin$5,appleLogin:appleLogin$5,loginAgree:loginAgree$5,service:service$5,and:and$5,privacy:privacy$5,loginAgreeTail:loginAgreeTail$5,avatar:avatar$5,nickName:nickName$5,userId:userId$5,birthDay:birthDay$5,enterNickName:enterNickName$5,notDisturb:notDisturb$5,setPassword:setPassword$5,changePassword:changePassword$5,account:account$5,password:password$5,enterAccount:enterAccount$5,enterPassword:enterPassword$5,enterOriginalPassword:enterOriginalPassword$5,enterNewPassword:enterNewPassword$5,reEnterNewPassword:reEnterNewPassword$5,reEnterPasswordDifferent:reEnterPasswordDifferent$5,setSamePassword:setSamePassword$5,pleaseEnter:pleaseEnter$5,callHistory:callHistory$5,message:message$5,officialMessage:officialMessage$5,notConnected:notConnected$5,clearRecords:clearRecords$5,allRead:allRead$5,noChatTip:noChatTip$5,noChatTip2:noChatTip2$5,unlockChatTip:unlockChatTip$5,unlockChatByCard:unlockChatByCard$5,unlockChatByDiamond:unlockChatByDiamond$5,toOpen:toOpen$5,continueVideoCall:continueVideoCall$5,continueMatch:continueMatch$5,matchAgain:matchAgain$5,startMatch:startMatch$5,connecting:connecting$5,videoCall:videoCall$5,videoCalling:videoCalling$5,videoCallWarning:videoCallWarning$5,videoCallMutedTip:videoCallMutedTip$5,videoCallMutedUnlock:videoCallMutedUnlock$5,videoCardUsedTip:videoCardUsedTip$5,videoCallCostTip:videoCallCostTip$5,videoCallHangUpBusy:videoCallHangUpBusy$5,videoCallConnectFail:videoCallConnectFail$5,mediaDiveceDisable:mediaDiveceDisable$5,mediaDiveceUnknown:mediaDiveceUnknown$5,notSupportGuide:notSupportGuide$5,mediaDiveceUnavailable:mediaDiveceUnavailable$5,online:online$5,offline:offline$5,busy:busy$5,off:off$5,album:album$5,matchFail:matchFail$5,matching:matching$5,videoConsumption:videoConsumption$5,giftConsumption:giftConsumption$5,allGift:allGift$5,sendGfit:sendGfit$5,callDuration:callDuration$5,recommendedHosts:recommendedHosts$5,saveAccount:saveAccount$5,saveAccountTip:saveAccountTip$5,confirmLogout:confirmLogout$5,confirmNoCommit:confirmNoCommit$5,confirmHangUp:confirmHangUp$5,currentMatchTip:currentMatchTip$5,refreshPullDown:refreshPullDown$5,refreshing:refreshing$5,refreshLoadMore:refreshLoadMore$5,refreshLoading:refreshLoading$5,refreshLoadFail:refreshLoadFail$5,refreshNoMore:refreshNoMore$5,forbidRegion:forbidRegion$5,sensiveContent:sensiveContent$5,ageForbid:ageForbid$5,netError:netError$5,serverError:serverError$5},language$5="",confirm$4="Confirmar",cancel$4="Cancelar",deny$4="Rejeitar",save$4="Salvar",operateFail$4="A operao falhou, tente novamente.",operateSuccess$4="Operao sucedida",randomMatch$4="Emparelhamento Aleatrio",free$4="Grtis",unit$4="/minuto",game$4="Jogo",pwa_tip$4="Adicione {para}  sua tela inicial para acesso rpido",add$4="Adicionar",pwa_iphone_tip$4="Adicionar {para}  tela inicial",pwa_iphone_tip_2$4="1. Toque no boto 'Compartilhar' na parte inferior",pwa_iphone_tip_3$4="2. Selecione 'Adicionar  tela inicial",pwa_iphone_tip_4$4="Adicionar  Tela Inicial",billDetails$4="Detalhes de cobrana",consume$4="Consumo",income$4="Renda",all$4="Tudo",month1$4="Janeiro",month2$4="Fevereiro",month3$4="Maro",month4$4="Abril",month5$4="Maio",month6$4="Junho",month7$4="Julho",month8$4="Agosto",month9$4="Setembro",month10$4="Outubro",month11$4="Novembro",month12$4="Dezembro",aboutUs$4="Sobre ns",intro1$4="Bem-vindo ao {para}! Somos o seu parceiro social 1 a 1 exclusivo. Estamos comprometidos em proporcionar um ambiente seguro, divertido e vibrante, onde voc pode facilmente conhecer novos amigos e desfrutar de uma experincia de interao autntica e agradvel. \n Para oferecer uma experincia social mais conveniente e imersiva, lanamos o aplicativo mvel do {para}. Esteja voc em casa, no escritrio ou viajando, com apenas um toque, voc pode se conectar instantaneamente com novos amigos e aproveitar a diverso de chats por vdeo sem interrupes. \n Baixe o {para} agora e comece sua nova jornada social hoje mesmo!",intro2$4="Esperamos encontr-lo no aplicativo e criar mais memrias maravilhosas juntos!",goApp$4=" {para} ",googlePlay$4="Google Play",officialDownload$4="Download oficial",downloadTaskTip$4="O seu download comear automaticamente em breve. Por favor, aguarde...",customerService$4="Atendimento ao cliente",onlineService$4="Servio on-line",myPackage$4="Minha mochila",useRule$4="Regras de uso",appuse$4="Exclusivo do app",send$4="Enviar",videoCard$4="Carto de Vdeo",videoCardDes$4="Voc pode consumir 1 Carto de Vdeo para obter 1 minuto de vdeo grtis",chatCard$4="Carto de Bate-papo",chatCardDes$4="Voc pode usar 1 Carto de Bate-papo para conversar com outras pessoas gratuitamente; cada carto  vlido por {para} dias",matchCard$4="Carto de Match",matchCardDes$4="Voc pode match gratuitamente com o Carto de Match",diamond$4="Diamante",recharge$4="Recarregar",diamondShop$4="Loja de diamantes",rechargeSuccess$4="Recarga bem-sucedida",advicePwaAndApp$4="Para acesso fcil e experincia completa, recomendamos adicionar {para}  sua tela inicial ou baixar o aplicativo {para}.",accountSetting$4="Configuraes de conta",systemSetting$4="Configuraes de sistema",deleteAccount$4="Cancelar conta",deleteAccountTip$4="Por favor, confirme sua operao, sua conta ser destruda imediatamente aps a excluso!",logOut$4="Sair",notification$4="Notificaes",firstRegisterTip$4="Chances de receber os seguintes presentes no primeiro registro",downloadAppRewardTip$4="Baixe o app oficial {para} e receba recompensas imediatamente",downloadAppRewardTip2$4="Receba vrias recompensas dirias!",downloadAppToChatTip$4="Baixe o {para} agora e converse com garotas gratuitamente",downloadAppToChatTip2$4="Acesse o {para} agora para mais funcionalidades!",dailyRewards$4="Recompensas dirias",claimed$4="Recebido",hi$4="Ol, {para}",notLoginYet$4="Voc ainda no est conectado",quickLogin$4="Comear",accountLogin$4="Login com ID",googleLogin$4="Login com Google",appleLogin$4="Apple ID",loginAgree$4="Fazer login significa que voc aceita nossos ",service$4="Termos de Servio",and$4=" e ",privacy$4="Poltica de Privacidade",loginAgreeTail$4=".",avatar$4="Meu avatar",nickName$4="Meu apelido",userId$4="ID do usurio",birthDay$4="Data de nascimento",enterNickName$4="Digite o apelido",notDisturb$4="No perturbe",setPassword$4="configurar senha",changePassword$4="Alterar a senha",account$4="Conta",password$4="Senha",enterAccount$4="Digite o nmero da conta",enterPassword$4="Digite a senha",enterOriginalPassword$4="Por favor insira a senha original",enterNewPassword$4="Por favor insira uma nova senha",reEnterNewPassword$4="Coloque a senha novamente",reEnterPasswordDifferent$4="As duas senhas so diferentes, digite novamente",setSamePassword$4="As senhas so mesmas, digite-a novamente",pleaseEnter$4="Por favor insira...",callHistory$4="Registros de chamadas",message$4="Mensagem",officialMessage$4="Mensagem do sistema",notConnected$4="No conectado",clearRecords$4="Limpar registro",allRead$4="Tudo lido",noChatTip$4="No h chats ainda!",noChatTip2$4="Quando voc conversar com novos amigos no {para}, eles aparecero aqui.",unlockChatTip$4="Gaste {para} diamantes para desbloquear o chat privado com ela",unlockChatByCard$4="J usou o carto de mensagem para desbloquear {para} dia de mensagens gratuitas com este usurio. Se vocs so amigos, podem bater um papo gratuitamente.",unlockChatByDiamond$4="J usou diamantes para desbloquear {para} dia(s) de mensagens grtis com este usurio",toOpen$4="abrir",continueVideoCall$4="Continuar vdeo",continueMatch$4="continuar combinando",matchAgain$4="Match de novo",startMatch$4="Comear match",connecting$4="Conectando",videoCall$4="Vdeochamada",videoCalling$4="Ligando, por favor espere pacientemente",videoCallWarning$4="Qualquer contedo que envolva pornografia, obscenidade, poltica, jogos de azar, violncia, etc. que viole as leis e regulamentos nacionais  estritamente proibido durante o processo de vdeo (voz). Uma vez descoberto, suspenderemos imediatamente a conta!",videoCallMutedTip$4="A chamada foi silenciada, recarregue para desbloquear a voz",videoCallMutedUnlock$4="Abrir",videoCardUsedTip$4="O carto de vdeo foi usado automaticamente, atualmente {para} segundos est livre",videoCallCostTip$4="Aps {para} segundos, ser cobrado {para1} diamantes/minuto",videoCallHangUpBusy$4="A outra parte est ocupada, tente novamente mais tarde~",videoCallConnectFail$4="A conexo falhou, sua garota foi salteada",mediaDiveceDisable$4="Permita o acesso do navegador  cmera e ao microfone para uma melhor experincia de chat por vdeo com meninas.",mediaDiveceUnknown$4="Uma garota est convidando voc para ligar a cmera e o microfone para uma comunicao mais imersiva e divertida.",notSupportGuide$4="Pode haver um problema com o seu navegador ou conexo de internet atual. Baixe nosso aplicativo listado na Play Store para a melhor experincia de videochamada.",mediaDiveceUnavailable$4="mediaDiveceUnavailable",online$4="Online",offline$4="Ocupada",busy$4="Busy",off$4="Off",album$4="lbum",matchFail$4="Match lotada, tente novamente mais tarde",matching$4="Matching",videoConsumption$4="Consumo de vdeo",giftConsumption$4="Consumo de presentes",allGift$4="Todos os presentes",sendGfit$4="Eu dou para a host",callDuration$4="Durao da chamada",recommendedHosts$4="Garotas Sensuais para Voc",saveAccount$4="Salvar captura de tela",saveAccountTip$4="Faa uma captura de tela da sua conta e senha em caso de perda",confirmLogout$4="Tem certeza de que deseja sair desta conta?",confirmNoCommit$4="Voc tem alteraes no salvas. Tem certeza de que deseja sair?",confirmHangUp$4="Tem certeza de que deseja desligar o vdeo?",currentMatchTip$4="Atualmente h {para}+ meninas sendo combinadas",refreshPullDown$4="Puxar para baixo para atualizar",refreshing$4="Atualizando",refreshLoadMore$4="Cargar ms",refreshLoading$4="carregando",refreshLoadFail$4="Falha ao carregar",refreshNoMore$4="No h mais dados",forbidRegion$4="Sua regio no  compatvel",sensiveContent$4="Voc est prestes a acessar contedo sensvel, por favor confirme que voc tem pelo menos 18 anos e concorda em acessar esse tipo de contedo.",ageForbid$4="Devido a restries de idade, voc no pode usar {para}",netError$4="Rede abnormal, tente novamente mais tarde",serverError$4="Erro no servidor, tente novamente mais tarde",pt={language:language$5,confirm:confirm$4,cancel:cancel$4,deny:deny$4,save:save$4,operateFail:operateFail$4,operateSuccess:operateSuccess$4,randomMatch:randomMatch$4,free:free$4,unit:unit$4,game:game$4,pwa_tip:pwa_tip$4,add:add$4,pwa_iphone_tip:pwa_iphone_tip$4,pwa_iphone_tip_2:pwa_iphone_tip_2$4,pwa_iphone_tip_3:pwa_iphone_tip_3$4,pwa_iphone_tip_4:pwa_iphone_tip_4$4,billDetails:billDetails$4,consume:consume$4,income:income$4,all:all$4,month1:month1$4,month2:month2$4,month3:month3$4,month4:month4$4,month5:month5$4,month6:month6$4,month7:month7$4,month8:month8$4,month9:month9$4,month10:month10$4,month11:month11$4,month12:month12$4,aboutUs:aboutUs$4,intro1:intro1$4,intro2:intro2$4,goApp:goApp$4,googlePlay:googlePlay$4,officialDownload:officialDownload$4,downloadTaskTip:downloadTaskTip$4,customerService:customerService$4,onlineService:onlineService$4,myPackage:myPackage$4,useRule:useRule$4,appuse:appuse$4,send:send$4,videoCard:videoCard$4,videoCardDes:videoCardDes$4,chatCard:chatCard$4,chatCardDes:chatCardDes$4,matchCard:matchCard$4,matchCardDes:matchCardDes$4,diamond:diamond$4,recharge:recharge$4,diamondShop:diamondShop$4,rechargeSuccess:rechargeSuccess$4,advicePwaAndApp:advicePwaAndApp$4,accountSetting:accountSetting$4,systemSetting:systemSetting$4,deleteAccount:deleteAccount$4,deleteAccountTip:deleteAccountTip$4,logOut:logOut$4,notification:notification$4,firstRegisterTip:firstRegisterTip$4,downloadAppRewardTip:downloadAppRewardTip$4,downloadAppRewardTip2:downloadAppRewardTip2$4,downloadAppToChatTip:downloadAppToChatTip$4,downloadAppToChatTip2:downloadAppToChatTip2$4,dailyRewards:dailyRewards$4,claimed:claimed$4,hi:hi$4,notLoginYet:notLoginYet$4,quickLogin:quickLogin$4,accountLogin:accountLogin$4,googleLogin:googleLogin$4,appleLogin:appleLogin$4,loginAgree:loginAgree$4,service:service$4,and:and$4,privacy:privacy$4,loginAgreeTail:loginAgreeTail$4,avatar:avatar$4,nickName:nickName$4,userId:userId$4,birthDay:birthDay$4,enterNickName:enterNickName$4,notDisturb:notDisturb$4,setPassword:setPassword$4,changePassword:changePassword$4,account:account$4,password:password$4,enterAccount:enterAccount$4,enterPassword:enterPassword$4,enterOriginalPassword:enterOriginalPassword$4,enterNewPassword:enterNewPassword$4,reEnterNewPassword:reEnterNewPassword$4,reEnterPasswordDifferent:reEnterPasswordDifferent$4,setSamePassword:setSamePassword$4,pleaseEnter:pleaseEnter$4,callHistory:callHistory$4,message:message$4,officialMessage:officialMessage$4,notConnected:notConnected$4,clearRecords:clearRecords$4,allRead:allRead$4,noChatTip:noChatTip$4,noChatTip2:noChatTip2$4,unlockChatTip:unlockChatTip$4,unlockChatByCard:unlockChatByCard$4,unlockChatByDiamond:unlockChatByDiamond$4,toOpen:toOpen$4,continueVideoCall:continueVideoCall$4,continueMatch:continueMatch$4,matchAgain:matchAgain$4,startMatch:startMatch$4,connecting:connecting$4,videoCall:videoCall$4,videoCalling:videoCalling$4,videoCallWarning:videoCallWarning$4,videoCallMutedTip:videoCallMutedTip$4,videoCallMutedUnlock:videoCallMutedUnlock$4,videoCardUsedTip:videoCardUsedTip$4,videoCallCostTip:videoCallCostTip$4,videoCallHangUpBusy:videoCallHangUpBusy$4,videoCallConnectFail:videoCallConnectFail$4,mediaDiveceDisable:mediaDiveceDisable$4,mediaDiveceUnknown:mediaDiveceUnknown$4,notSupportGuide:notSupportGuide$4,mediaDiveceUnavailable:mediaDiveceUnavailable$4,online:online$4,offline:offline$4,busy:busy$4,off:off$4,album:album$4,matchFail:matchFail$4,matching:matching$4,videoConsumption:videoConsumption$4,giftConsumption:giftConsumption$4,allGift:allGift$4,sendGfit:sendGfit$4,callDuration:callDuration$4,recommendedHosts:recommendedHosts$4,saveAccount:saveAccount$4,saveAccountTip:saveAccountTip$4,confirmLogout:confirmLogout$4,confirmNoCommit:confirmNoCommit$4,confirmHangUp:confirmHangUp$4,currentMatchTip:currentMatchTip$4,refreshPullDown:refreshPullDown$4,refreshing:refreshing$4,refreshLoadMore:refreshLoadMore$4,refreshLoading:refreshLoading$4,refreshLoadFail:refreshLoadFail$4,refreshNoMore:refreshNoMore$4,forbidRegion:forbidRegion$4,sensiveContent:sensiveContent$4,ageForbid:ageForbid$4,netError:netError$4,serverError:serverError$4},language$4="",confirm$3="",cancel$3="",deny$3="",save$3="",operateFail$3=" ",operateSuccess$3="",randomMatch$3="",free$3="",unit$3="/",game$3="",pwa_tip$3=" {para} ",add$3="",pwa_iphone_tip$3=" {para} ",pwa_iphone_tip_2$3="1.  '' ",pwa_iphone_tip_3$3="2.  '",pwa_iphone_tip_4$3="",billDetails$3="",consume$3="",income$3="",all$3="",month1$3="",month2$3="",month3$3="",month4$3="",month5$3="",month6$3="",month7$3="",month8$3="",month9$3="",month10$3="",month11$3="",month12$3="",aboutUs$3="",intro1$3=" {para}!  1  1      \n   {para}      \n  {para} !",intro2$3=" !",goApp$3=" {para} ",googlePlay$3="Google Play",officialDownload$3="",downloadTaskTip$3=" ...",customerService$3="",onlineService$3="",myPackage$3="",useRule$3="",appuse$3="",send$3="",videoCard$3="",videoCardDes$3=" 1  1 ",chatCard$3="",chatCardDes$3=" 1   {para} ",matchCard$3="",matchCardDes$3="",diamond$3="",recharge$3="",diamondShop$3="",rechargeSuccess$3="",advicePwaAndApp$3="  {para}   {para}",accountSetting$3="",systemSetting$3="",deleteAccount$3="",deleteAccountTip$3=" !",logOut$3="",notification$3="",firstRegisterTip$3="",downloadAppRewardTip$3=" {para} ",downloadAppRewardTip2$3="!",downloadAppToChatTip$3=" {para}  ",downloadAppToChatTip2$3=" {para} !",dailyRewards$3="",claimed$3="",hi$3=", {para}",notLoginYet$3="",quickLogin$3="",accountLogin$3=" ID",googleLogin$3=" Google",appleLogin$3="iPhone",loginAgree$3=" ",service$3="",and$3="  ",privacy$3="",loginAgreeTail$3=" ",avatar$3="",nickName$3="",userId$3="",birthDay$3="",enterNickName$3="",notDisturb$3="",setPassword$3="",changePassword$3="",account$3="",password$3="",enterAccount$3="",enterPassword$3="",enterOriginalPassword$3="",enterNewPassword$3="",reEnterNewPassword$3="",reEnterPasswordDifferent$3=" ",setSamePassword$3=" ",pleaseEnter$3="...",callHistory$3="",message$3="",officialMessage$3="",notConnected$3="",clearRecords$3="",allRead$3="",noChatTip$3="!",noChatTip2$3=" {para} ",unlockChatTip$3=" {para} ",unlockChatByCard$3=" {para}   ",unlockChatByDiamond$3=" {para} ",toOpen$3="",continueVideoCall$3="",continueMatch$3="",matchAgain$3="",startMatch$3="",connecting$3="",videoCall$3="",videoCalling$3=" ",videoCallWarning$3="        ()  !",videoCallMutedTip$3="",videoCallMutedUnlock$3="",videoCardUsedTip$3="  {para}  ",videoCallCostTip$3=" {para}   {para1} /",videoCallHangUpBusy$3=" ~",videoCallConnectFail$3=" ...",mediaDiveceDisable$3="",mediaDiveceUnknown$3="",notSupportGuide$3="  Play Store ",mediaDiveceUnavailable$3="mediaDiveceUnavailable",online$3="",offline$3="",busy$3="",off$3="Off",album$3="",matchFail$3=" ",matching$3="",videoConsumption$3="",giftConsumption$3="",allGift$3="",sendGfit$3="",callDuration$3="",recommendedHosts$3="",saveAccount$3="",saveAccountTip$3=" ",confirmLogout$3="",confirmNoCommit$3=" ",confirmHangUp$3="",currentMatchTip$3=" {para}+ ",refreshPullDown$3="",refreshing$3="",refreshLoadMore$3="",refreshLoading$3="",refreshLoadFail$3="",refreshNoMore$3="",forbidRegion$3="",sensiveContent$3="  18 ",ageForbid$3="  {para}",netError$3=" ",serverError$3=" ",th={language:language$4,confirm:confirm$3,cancel:cancel$3,deny:deny$3,save:save$3,operateFail:operateFail$3,operateSuccess:operateSuccess$3,randomMatch:randomMatch$3,free:free$3,unit:unit$3,game:game$3,pwa_tip:pwa_tip$3,add:add$3,pwa_iphone_tip:pwa_iphone_tip$3,pwa_iphone_tip_2:pwa_iphone_tip_2$3,pwa_iphone_tip_3:pwa_iphone_tip_3$3,pwa_iphone_tip_4:pwa_iphone_tip_4$3,billDetails:billDetails$3,consume:consume$3,income:income$3,all:all$3,month1:month1$3,month2:month2$3,month3:month3$3,month4:month4$3,month5:month5$3,month6:month6$3,month7:month7$3,month8:month8$3,month9:month9$3,month10:month10$3,month11:month11$3,month12:month12$3,aboutUs:aboutUs$3,intro1:intro1$3,intro2:intro2$3,goApp:goApp$3,googlePlay:googlePlay$3,officialDownload:officialDownload$3,downloadTaskTip:downloadTaskTip$3,customerService:customerService$3,onlineService:onlineService$3,myPackage:myPackage$3,useRule:useRule$3,appuse:appuse$3,send:send$3,videoCard:videoCard$3,videoCardDes:videoCardDes$3,chatCard:chatCard$3,chatCardDes:chatCardDes$3,matchCard:matchCard$3,matchCardDes:matchCardDes$3,diamond:diamond$3,recharge:recharge$3,diamondShop:diamondShop$3,rechargeSuccess:rechargeSuccess$3,advicePwaAndApp:advicePwaAndApp$3,accountSetting:accountSetting$3,systemSetting:systemSetting$3,deleteAccount:deleteAccount$3,deleteAccountTip:deleteAccountTip$3,logOut:logOut$3,notification:notification$3,firstRegisterTip:firstRegisterTip$3,downloadAppRewardTip:downloadAppRewardTip$3,downloadAppRewardTip2:downloadAppRewardTip2$3,downloadAppToChatTip:downloadAppToChatTip$3,downloadAppToChatTip2:downloadAppToChatTip2$3,dailyRewards:dailyRewards$3,claimed:claimed$3,hi:hi$3,notLoginYet:notLoginYet$3,quickLogin:quickLogin$3,accountLogin:accountLogin$3,googleLogin:googleLogin$3,appleLogin:appleLogin$3,loginAgree:loginAgree$3,service:service$3,and:and$3,privacy:privacy$3,loginAgreeTail:loginAgreeTail$3,avatar:avatar$3,nickName:nickName$3,userId:userId$3,birthDay:birthDay$3,enterNickName:enterNickName$3,notDisturb:notDisturb$3,setPassword:setPassword$3,changePassword:changePassword$3,account:account$3,password:password$3,enterAccount:enterAccount$3,enterPassword:enterPassword$3,enterOriginalPassword:enterOriginalPassword$3,enterNewPassword:enterNewPassword$3,reEnterNewPassword:reEnterNewPassword$3,reEnterPasswordDifferent:reEnterPasswordDifferent$3,setSamePassword:setSamePassword$3,pleaseEnter:pleaseEnter$3,callHistory:callHistory$3,message:message$3,officialMessage:officialMessage$3,notConnected:notConnected$3,clearRecords:clearRecords$3,allRead:allRead$3,noChatTip:noChatTip$3,noChatTip2:noChatTip2$3,unlockChatTip:unlockChatTip$3,unlockChatByCard:unlockChatByCard$3,unlockChatByDiamond:unlockChatByDiamond$3,toOpen:toOpen$3,continueVideoCall:continueVideoCall$3,continueMatch:continueMatch$3,matchAgain:matchAgain$3,startMatch:startMatch$3,connecting:connecting$3,videoCall:videoCall$3,videoCalling:videoCalling$3,videoCallWarning:videoCallWarning$3,videoCallMutedTip:videoCallMutedTip$3,videoCallMutedUnlock:videoCallMutedUnlock$3,videoCardUsedTip:videoCardUsedTip$3,videoCallCostTip:videoCallCostTip$3,videoCallHangUpBusy:videoCallHangUpBusy$3,videoCallConnectFail:videoCallConnectFail$3,mediaDiveceDisable:mediaDiveceDisable$3,mediaDiveceUnknown:mediaDiveceUnknown$3,notSupportGuide:notSupportGuide$3,mediaDiveceUnavailable:mediaDiveceUnavailable$3,online:online$3,offline:offline$3,busy:busy$3,off:off$3,album:album$3,matchFail:matchFail$3,matching:matching$3,videoConsumption:videoConsumption$3,giftConsumption:giftConsumption$3,allGift:allGift$3,sendGfit:sendGfit$3,callDuration:callDuration$3,recommendedHosts:recommendedHosts$3,saveAccount:saveAccount$3,saveAccountTip:saveAccountTip$3,confirmLogout:confirmLogout$3,confirmNoCommit:confirmNoCommit$3,confirmHangUp:confirmHangUp$3,currentMatchTip:currentMatchTip$3,refreshPullDown:refreshPullDown$3,refreshing:refreshing$3,refreshLoadMore:refreshLoadMore$3,refreshLoading:refreshLoading$3,refreshLoadFail:refreshLoadFail$3,refreshNoMore:refreshNoMore$3,forbidRegion:forbidRegion$3,sensiveContent:sensiveContent$3,ageForbid:ageForbid$3,netError:netError$3,serverError:serverError$3},language$3="",confirm$2="Onaylayn",cancel$2="ptal",deny$2="Reddet",save$2="Kaydet",operateFail$2="lem baarsz oldu, ltfen tekrar deneyin.",operateSuccess$2="Baarl",randomMatch$2="Rastgele Eleme",free$2="cretsiz",unit$2="/dakika",game$2="Oyun",pwa_tip$2="{para}'ya hzl eriim iin ana ekrannza ekleyin",add$2="Ekle",pwa_iphone_tip$2="{para}'y ana ekrana ekle",pwa_iphone_tip_2$2="1. Alttaki 'Payla' dmesine dokunun",pwa_iphone_tip_3$2="2. 'Ana Ekrana Ekle' seeneini sein",pwa_iphone_tip_4$2="Ana Ekrana Ekle",billDetails$2="Fatura detaylar",consume$2="Harcamalarm",income$2="Kazanlar",all$2="Tm",month1$2="Ocak",month2$2="ubat",month3$2="Mart",month4$2="Nisan",month5$2="Mays",month6$2="Haziran",month7$2="Temmuz",month8$2="Austos",month9$2="Eyll",month10$2="Ekim",month11$2="Kasm",month12$2="Aralk",aboutUs$2="Hakkmzda",intro1$2="{para}'ya ho geldiniz! Size zel 1v1 sosyal arkadanz olarak buradayz. Yeni insanlarla tanmanz, gvenli, samimi ve elenceli bir ortamda keyifli sohbetler yapmanz salamak iin alyoruz. \n Her an yannzda olabilmek adna, imdi {para} mobil uygulamamz sunuyoruz.Nerede olursanz olun, tek bir dokunula yeni arkadalarnzla kolayca video sohbet edebilir ve kesintisiz bir sosyal deneyimin tadn karabilirsiniz . \n {para} 'y indirin ve sosyal yolculuunuza hemen balayn!",intro2$2="Uygulamada sizinle bulumay ve birlikte daha gzel anlar yaratmay sabrszlkla bekliyoruz!",goApp$2=" {para} ",googlePlay$2="Google Play",officialDownload$2="Resmi indirme",downloadTaskTip$2="ndirme ileminiz ksa sre iinde otomatik olarak balayacaktr. Ltfen bekleyin...",customerService$2="Mteri servisi",onlineService$2="evrimii hizmet",myPackage$2="Benim paketim",useRule$2="Kullanm kural",appuse$2="Uygulamaya zel",send$2="Gnder",videoCard$2="Ekran kart",videoCardDes$2="1 dakikalk grntl sohbet iin 1 ekran kart kullanabilirsiniz",chatCard$2="Sohbet kart",chatCardDes$2="Bakalaryla cretsiz sohbet etmek iin 1 sohbet kart kullanabilirsiniz, her sohbet kartnn sresi {para} gn iinde dolar",matchCard$2="Ma kart",matchCardDes$2="cretsiz eletirmek iin eletirme kartn kullann",diamond$2="Elmas",recharge$2="arj",diamondShop$2="Elmas dkkan",rechargeSuccess$2="arj baars",advicePwaAndApp$2="Daha kolay eriim ve tam zellikli bir deneyim iin, {para}y ana ekrannza eklemenizi veya {para} uygulamasn indirmenizi neririz.",accountSetting$2="Hesap ayarlar",systemSetting$2="Sistem ayarlar",deleteAccount$2="Hesap silme",deleteAccountTip$2="Ltfen ileminizi onaylayn, hesabnz silindikten hemen sonra imha edilecektir!",logOut$2="Oturumu kapat",notification$2="Bildirim",firstRegisterTip$2="lk kaytta aadaki hediyeleri alma ans",downloadAppRewardTip$2="Resmi {para} uygulamasn indirin ve annda dller kazann",downloadAppRewardTip2$2="Gnlk olarak birok dl kazann!",downloadAppToChatTip$2="imdi kzlarla zgrce sohbet etmek iin {para}y indirin",downloadAppToChatTip2$2="Daha fazla zellik iin hemen {para}'ya gidin!",dailyRewards$2="Gnlk dller",claimed$2="Aldnz",hi$2="Merhaba, {para}",notLoginYet$2="Henz giri yapmadnz",quickLogin$2="Hzl Giri",accountLogin$2="Hesap ile giri yapn",googleLogin$2="Google ile giri yapn",appleLogin$2="Apple girii",loginAgree$2="Giri yapmanz, ",service$2="Hizmet artlar",and$2=" ve ",privacy$2="Gizlilik Politikasn",loginAgreeTail$2=" kabul ettiiniz anlamna gelir.",avatar$2="Profil resmim",nickName$2="Takma ad",userId$2="Kullanc kimlii",birthDay$2="Doum tarihi",enterNickName$2="Takma ad girin",notDisturb$2="Rahatsz etmeyin",setPassword$2="ifre belirleme",changePassword$2="ifre deitirme",account$2="Hesap",password$2="ifre",enterAccount$2="Hesab girin",enterPassword$2="Parolan Gir",enterOriginalPassword$2="Ltfen orijinal ifreyi girin",enterNewPassword$2="Ltfen yeni ifreyi girin",reEnterNewPassword$2="ifrenizi tekrar girin",reEnterPasswordDifferent$2="ki ifre farkl, ltfen tekrar girin",setSamePassword$2="ifreler ayn tekrar girin",pleaseEnter$2="Ltfen giriniz...",callHistory$2="ar gemii",message$2="Mesaj sohbeti",officialMessage$2="sistem mesaj",notConnected$2="Bal deil",clearRecords$2="Kaytlar temizleyin",allRead$2="Hepsini okundu olarak iaretle",noChatTip$2="Henz sohbet yok!",noChatTip2$2="{para}'da yeni arkadalarnzla sohbet ettiinizde, buraya grnecekler.",unlockChatTip$2="{para} elmas harcayarak onunla zel sohbeti an",unlockChatByCard$2="Bir sohbet kart kullanarak bu kullancyla {para} gnlk cretsiz mesajn kilidini atnz, cretsiz sohbet etmek iin arkada olun",unlockChatByDiamond$2="Elmas kullanarak bu kullancyla {para} gnlk cretsiz mesajn kilidini atnz",toOpen$2="Ak",continueVideoCall$2="Grntl grmeye devam edin",continueMatch$2="Eletirmeye devam et",matchAgain$2="Tekrar eletir",startMatch$2="Eletirmeye balayn",connecting$2="Balanyor",videoCall$2="Grntl arama",videoCalling$2="Aryorum, ltfen sabrla bekleyin",videoCallWarning$2="Ulusal yasa ve ynetmelikleri ihlal eden pornografi, mstehcenlik, politika, kumar, iddet vb. ieren her trl ierik video (ses) ilemi srasnda kesinlikle yasaktr. Fark edildiinde, hesab derhal askya alacaz!",videoCallMutedTip$2="Aramann sesi kapatld, ses kilidini amak iin yeniden ykleme yapn",videoCallMutedUnlock$2="Kilit ama",videoCardUsedTip$2="Video kart otomatik olarak kullanld, u anda {para} saniye cretsiz",videoCallCostTip$2="{para}s sonra {para1} elmas/dk olarak cretlendirileceksiniz",videoCallHangUpBusy$2="Kar taraf megul, ltfen daha sonra tekrar deneyin.",videoCallConnectFail$2="Balant hatas, kznz karld.",mediaDiveceDisable$2="Kzlarla daha iyi bir video sohbet deneyimi iin tarayc kamera ve mikrofon eriimine izin verin.",mediaDiveceUnknown$2="Bir kz, daha etkileimli ve elenceli iletiim iin kameranz ve mikrofonunuzu amanz davet ediyor.",notSupportGuide$2="Mevcut taraycnzda veya internet balantnzda bir sorun olabilir. En iyi grntl grme deneyimi iin Play Store'da listelenen uygulamamz indirin.",mediaDiveceUnavailable$2="mediaDiveceUnavailable",online$2="evrimii",offline$2="evrimd",busy$2="Megul",off$2="ndirim",album$2="Albm",matchFail$2="Kalabalk ma, ltfen daha sonra tekrar deneyin",matching$2="Eletirme",videoConsumption$2="Video tketimi",giftConsumption$2="Hediye tketimi",allGift$2="Tm hediyeler",sendGfit$2="Kzlara gnderdim",callDuration$2="ar sresi",recommendedHosts$2="Senin in Seksi Kzlar",saveAccount$2="Ekran grnts aln ve kaydedin",saveAccountTip$2="Hesap kayb durumunda ltfen hesabnzn ve ifrenizin ekran grntsn aln",confirmLogout$2="Bu hesaptan k yapmak istediinizden emin misiniz?",confirmNoCommit$2="Kaydedilmemi deiiklikleriniz var. kmak istediinizden emin misiniz?",confirmHangUp$2="Kapatacanzdan emin misiniz?",currentMatchTip$2="{para}+ Kzlar u anda eletirme",refreshPullDown$2="Yenilemek iin aaya kaydr",refreshing$2="canlandrc",refreshLoadMore$2="Daha fazla ykle",refreshLoading$2="Ykleniyor",refreshLoadFail$2="Ykleme hatas",refreshNoMore$2="Daha fazla veri yok",forbidRegion$2="Blgeniz desteklenmiyor",sensiveContent$2="Hassas ierii grntlemeye hazrlanyorsunuz, ltfen 18 yanda olduunuzu ve bu tr ieriklere eriim salamak iin kabul ettiinizi onaylayn.",ageForbid$2="Ya kstlamalar nedeniyle {para} kullanamazsnz",netError$2="A hatas, ltfen daha sonra tekrar deneyin",serverError$2="Sunucu hatas, ltfen daha sonra tekrar deneyin",tr={language:language$3,confirm:confirm$2,cancel:cancel$2,deny:deny$2,save:save$2,operateFail:operateFail$2,operateSuccess:operateSuccess$2,randomMatch:randomMatch$2,free:free$2,unit:unit$2,game:game$2,pwa_tip:pwa_tip$2,add:add$2,pwa_iphone_tip:pwa_iphone_tip$2,pwa_iphone_tip_2:pwa_iphone_tip_2$2,pwa_iphone_tip_3:pwa_iphone_tip_3$2,pwa_iphone_tip_4:pwa_iphone_tip_4$2,billDetails:billDetails$2,consume:consume$2,income:income$2,all:all$2,month1:month1$2,month2:month2$2,month3:month3$2,month4:month4$2,month5:month5$2,month6:month6$2,month7:month7$2,month8:month8$2,month9:month9$2,month10:month10$2,month11:month11$2,month12:month12$2,aboutUs:aboutUs$2,intro1:intro1$2,intro2:intro2$2,goApp:goApp$2,googlePlay:googlePlay$2,officialDownload:officialDownload$2,downloadTaskTip:downloadTaskTip$2,customerService:customerService$2,onlineService:onlineService$2,myPackage:myPackage$2,useRule:useRule$2,appuse:appuse$2,send:send$2,videoCard:videoCard$2,videoCardDes:videoCardDes$2,chatCard:chatCard$2,chatCardDes:chatCardDes$2,matchCard:matchCard$2,matchCardDes:matchCardDes$2,diamond:diamond$2,recharge:recharge$2,diamondShop:diamondShop$2,rechargeSuccess:rechargeSuccess$2,advicePwaAndApp:advicePwaAndApp$2,accountSetting:accountSetting$2,systemSetting:systemSetting$2,deleteAccount:deleteAccount$2,deleteAccountTip:deleteAccountTip$2,logOut:logOut$2,notification:notification$2,firstRegisterTip:firstRegisterTip$2,downloadAppRewardTip:downloadAppRewardTip$2,downloadAppRewardTip2:downloadAppRewardTip2$2,downloadAppToChatTip:downloadAppToChatTip$2,downloadAppToChatTip2:downloadAppToChatTip2$2,dailyRewards:dailyRewards$2,claimed:claimed$2,hi:hi$2,notLoginYet:notLoginYet$2,quickLogin:quickLogin$2,accountLogin:accountLogin$2,googleLogin:googleLogin$2,appleLogin:appleLogin$2,loginAgree:loginAgree$2,service:service$2,and:and$2,privacy:privacy$2,loginAgreeTail:loginAgreeTail$2,avatar:avatar$2,nickName:nickName$2,userId:userId$2,birthDay:birthDay$2,enterNickName:enterNickName$2,notDisturb:notDisturb$2,setPassword:setPassword$2,changePassword:changePassword$2,account:account$2,password:password$2,enterAccount:enterAccount$2,enterPassword:enterPassword$2,enterOriginalPassword:enterOriginalPassword$2,enterNewPassword:enterNewPassword$2,reEnterNewPassword:reEnterNewPassword$2,reEnterPasswordDifferent:reEnterPasswordDifferent$2,setSamePassword:setSamePassword$2,pleaseEnter:pleaseEnter$2,callHistory:callHistory$2,message:message$2,officialMessage:officialMessage$2,notConnected:notConnected$2,clearRecords:clearRecords$2,allRead:allRead$2,noChatTip:noChatTip$2,noChatTip2:noChatTip2$2,unlockChatTip:unlockChatTip$2,unlockChatByCard:unlockChatByCard$2,unlockChatByDiamond:unlockChatByDiamond$2,toOpen:toOpen$2,continueVideoCall:continueVideoCall$2,continueMatch:continueMatch$2,matchAgain:matchAgain$2,startMatch:startMatch$2,connecting:connecting$2,videoCall:videoCall$2,videoCalling:videoCalling$2,videoCallWarning:videoCallWarning$2,videoCallMutedTip:videoCallMutedTip$2,videoCallMutedUnlock:videoCallMutedUnlock$2,videoCardUsedTip:videoCardUsedTip$2,videoCallCostTip:videoCallCostTip$2,videoCallHangUpBusy:videoCallHangUpBusy$2,videoCallConnectFail:videoCallConnectFail$2,mediaDiveceDisable:mediaDiveceDisable$2,mediaDiveceUnknown:mediaDiveceUnknown$2,notSupportGuide:notSupportGuide$2,mediaDiveceUnavailable:mediaDiveceUnavailable$2,online:online$2,offline:offline$2,busy:busy$2,off:off$2,album:album$2,matchFail:matchFail$2,matching:matching$2,videoConsumption:videoConsumption$2,giftConsumption:giftConsumption$2,allGift:allGift$2,sendGfit:sendGfit$2,callDuration:callDuration$2,recommendedHosts:recommendedHosts$2,saveAccount:saveAccount$2,saveAccountTip:saveAccountTip$2,confirmLogout:confirmLogout$2,confirmNoCommit:confirmNoCommit$2,confirmHangUp:confirmHangUp$2,currentMatchTip:currentMatchTip$2,refreshPullDown:refreshPullDown$2,refreshing:refreshing$2,refreshLoadMore:refreshLoadMore$2,refreshLoading:refreshLoading$2,refreshLoadFail:refreshLoadFail$2,refreshNoMore:refreshNoMore$2,forbidRegion:forbidRegion$2,sensiveContent:sensiveContent$2,ageForbid:ageForbid$2,netError:netError$2,serverError:serverError$2},language$2="",confirm$1="Chc chn",cancel$1="Xa",deny$1="T chi",save$1="Lu",operateFail$1="Thao tc tht bi, vui lng th li",operateSuccess$1="Thao tc thnh cng",randomMatch$1="Ghp ngu nhin",free$1="Min ph",unit$1="/pht",game$1="Tr chi",pwa_tip$1="Thm {para} vo mn hnh chnh  truy cp nhanh",add$1="Thm",pwa_iphone_tip$1="Thm {para} vo mn hnh chnh",pwa_iphone_tip_2$1="1. Nhn vo nt 'Chia s'  pha di",pwa_iphone_tip_3$1="2. Chn 'Thm vo mn hnh chnh",pwa_iphone_tip_4$1="Thm vo Mn hnh chnh",billDetails$1="Chi tit thanh ton",consume$1="Tiu dng",income$1="Thu nhp",all$1="Ton b",month1$1="Thng mt",month2$1="Thng hai",month3$1="Thng ba",month4$1="Thng bn",month5$1="Thng nm",month6$1="Thng su",month7$1="Thng by",month8$1="Thng tm",month9$1="Thng chn",month10$1="Thng mi",month11$1="Thng mi mt",month12$1="Thng mi hai",aboutUs$1="V chng ti",intro1$1="Cho mng bn n vi {para}! Chng ti l ngi bn ng hnh x hi 1v1 dnh ring cho bn. Chng ti cam kt mang n cho bn mt mi trng an ton, th v v y nng lng, gip bn d dng kt bn mi v tn hng tri nghim giao lu chn tht. \n  mang li cho bn tri nghim kt ni tin li v sng ng hn, chng ti  ra mt ng dng di ng {para}. D bn  nh, vn phng hay ang di chuyn, ch cn mt chm l c th kt ni ngay vi bn mi v tn hng nim vui tr chuyn video lin mch. \n Ti ngay {para} v bt u hnh trnh x hi mi ca bn!",intro2$1="Chng ti mong c gp bn trong ng dng v cng nhau to thm nhiu k nim tuyt vi!",goApp$1=" {para} ",googlePlay$1="Google Play",officialDownload$1="Ti xung chnh thc",downloadTaskTip$1="Ti xung ca bn s bt u t ng sau mt thi gian ngn. Vui lng ch...",customerService$1="Dch v khch hng",onlineService$1="Dch v trc tuyn",myPackage$1="Ba l ca ti",useRule$1="Quy tc s dng",appuse$1="c quyn trong ng dng",send$1="Tng km",videoCard$1="Th Video",videoCardDes$1="Trong khi tr chuyn Video c th s dng 1 th video  c c 1 pht video min ph.",chatCard$1="Th tr chuyn",chatCardDes$1="Bn c th s dng 1 th tr chuyn  tr chuyn min ph vi ngi khc, mi th tr chuyn c gi tr trong {para} ngy",matchCard$1="Th kt i",matchCardDes$1="C th s dng th kt i min ph  kt i",diamond$1="Kim cng",recharge$1="Np",diamondShop$1="Np tin",rechargeSuccess$1="Np thnh cng",advicePwaAndApp$1=" truy cp thun tin v tri nghim y  tnh nng, chng ti khuyn bn nn thm {para} vo mn hnh chnh hoc ti ng dng {para}.",accountSetting$1="Ci t ti khon",systemSetting$1="Ci t h thng",deleteAccount$1="Hy ti khon",deleteAccountTip$1="Vui lng xc nhn thao tc ca bn, ti khon ca bn s b hy ngay sau khi xa!",logOut$1="ng xut",notification$1="Thng bo",firstRegisterTip$1="C hi nhn c nhng mn qu sau khi ng k ln u",downloadAppRewardTip$1="Ti ng dng {para} chnh thc v nhn thng ngay lp tc",downloadAppRewardTip2$1="Nhn nhiu phn thng hng ngy!",downloadAppToChatTip$1="Ti {para} ngay  tr chuyn min ph vi cc c gi",downloadAppToChatTip2$1="Truy cp ngay {para}  c thm nhiu tnh nng!",dailyRewards$1="Phn thng hng ngy",claimed$1="a nhn",hi$1="Xin cho, {para}",notLoginYet$1="Bn cha ng nhp",quickLogin$1="Bt u",accountLogin$1="ng nhp ti khon",googleLogin$1="ng nhp bng Google",appleLogin$1="ng k bng Apple",loginAgree$1="ng nhp c ngha l bn ng  vi ",service$1="iu khon dch v",and$1=" v ",privacy$1="Chnh sch Bo mt",loginAgreeTail$1=" ca chng ti.",avatar$1="nh i din ca ti",nickName$1="Bitdanhcati",userId$1="Id ngi dng",birthDay$1="Ngy sinh",enterNickName$1="Nhp bit danh",notDisturb$1="ng lm phin",setPassword$1="t mt khu",changePassword$1="Sa i mt khu",account$1="Ti khon",password$1="Mt khu",enterAccount$1="Nhp s ti khon",enterPassword$1="Nhp mt khu",enterOriginalPassword$1="Vui lng nhp mt khu ban u",enterNewPassword$1="Vui lng nhp mt khu mi",reEnterNewPassword$1="Nhp li mt khu",reEnterPasswordDifferent$1="Hai ln mt khu khc nhau, vui lng nhp li",setSamePassword$1="Hai ln mt khu ging nhau, vui lng nhp li.",pleaseEnter$1="Xin vui lng nhp...",callHistory$1="Lch s cuc gi",message$1="Thng tin",officialMessage$1="Thng tin h thng",notConnected$1="Cha kt ni",clearRecords$1="Lm trng lch s",allRead$1="Tt c  c",noChatTip$1="Cha c cuc tr chuyn no!",noChatTip2$1="Khi bn tr chuyn vi bn b mi trn {para}, h s xut hin  y.",unlockChatTip$1="Chi tiu {para} kim cng  m kha tr chuyn ring vi c y",unlockChatByCard$1="Bn  s dng th tin nhn  m kha {para} ngy nhn tin min ph vi ngi dng ny. Nu l bn b ca nhau, bn c th tr chuyn min ph.",unlockChatByDiamond$1=" dng Kim cng  m kha {para} ngy nhn tin min ph vi ngi dng ny",toOpen$1="i m",continueVideoCall$1="Tip tc Video",continueMatch$1="Tip tc kt i",matchAgain$1="Kt i li",startMatch$1="Bt u kt i",connecting$1="ang kt ni",videoCall$1="Cuc gi video",videoCalling$1="ang gi, xin hy kin nhn ch i ~",videoCallWarning$1="Trong qu trnh gi Video (Thoi) bt k ni dung no lin quan  khiu dm, tc tu, chnh tr, c bc, bo lc, v.v. vi phm lut php v quy nh quc gia u b nghim cm. Mt khi b pht hin, chng ti s nh ch ti khon ngay lp tc!",videoCallMutedTip$1="i phng  tt m thanh, sau khi np li c th bt li.",videoCallMutedUnlock$1="M",videoCardUsedTip$1=" t ng s dng Th gi video, trc mt {para} giy min ph",videoCallCostTip$1="Sau {para}s na s tnh {para1} kim cng/pht",videoCallHangUpBusy$1="Bn kia ang bn, vui lng th li sau ~",videoCallConnectFail$1="Kt ni khng thnh cng, c gi ca bn  b ngi khc cp mt",mediaDiveceDisable$1="Hy cho php trnh duyt truy cp vo camera v micro  c tri nghim tr chuyn video tt hn vi cc c gi.",mediaDiveceUnknown$1="Mt c gi ang mi bn bt camera v Microphone  giao tip th v v hp dn hn.",notSupportGuide$1="C th c s c vi trnh duyt hoc kt ni internet hin ti ca bn. Ti xung ng dng ca chng ti c lit k trn Play Store  c tri nghim gi video tt nht.",mediaDiveceUnavailable$1="mediaDiveceUnavailable",online$1="Online",offline$1="Bn",busy$1="Busy",off$1="Gim gi",album$1="Album",matchFail$1="Hin s ngi kt i qu nhiu, vui lng th li sau.",matching$1="ang kt i",videoConsumption$1="Tiu th video",giftConsumption$1="Tiu th qu tng",allGift$1="Tt c qu tng",sendGfit$1="Ti tng Ch phng",callDuration$1="Thi gian gi",recommendedHosts$1="C Gi Nng Bng Cho Bn",saveAccount$1="Lu nh chp mn hnh",saveAccountTip$1="Vui lng chp nh mn hnh  lu li mt khu ti khon ca bn  trnh mt ti khon",confirmLogout$1="Bn c chc chn mun ng xut khi ti khon ny khng?",confirmNoCommit$1="Bn c cc thay i cha lu. Bn c chc mun thot khng?",confirmHangUp$1="Bn c chc chn mun tt video khng?",currentMatchTip$1="Hin ti c {para}+ c gi ang c kt i",refreshPullDown$1="Ko xung  lm mi",refreshing$1="ang lm mi",refreshLoadMore$1="ti thm",refreshLoading$1="ang ti",refreshLoadFail$1="Ti tht bi",refreshNoMore$1="Khng cn d liu",forbidRegion$1="Khu vc ca bn khng c h tr",sensiveContent$1="Bn sp truy cp ni dung nhy cm, vui lng xc nhn rng bn   18 tui v ng  truy cp ni dung nh vy.",ageForbid$1="Do hn ch  tui, bn khng th s dng {para}",netError$1="Mng bt thng, vui lng th li sau",serverError$1="Li my ch, vui lng th li sau",vi={language:language$2,confirm:confirm$1,cancel:cancel$1,deny:deny$1,save:save$1,operateFail:operateFail$1,operateSuccess:operateSuccess$1,randomMatch:randomMatch$1,free:free$1,unit:unit$1,game:game$1,pwa_tip:pwa_tip$1,add:add$1,pwa_iphone_tip:pwa_iphone_tip$1,pwa_iphone_tip_2:pwa_iphone_tip_2$1,pwa_iphone_tip_3:pwa_iphone_tip_3$1,pwa_iphone_tip_4:pwa_iphone_tip_4$1,billDetails:billDetails$1,consume:consume$1,income:income$1,all:all$1,month1:month1$1,month2:month2$1,month3:month3$1,month4:month4$1,month5:month5$1,month6:month6$1,month7:month7$1,month8:month8$1,month9:month9$1,month10:month10$1,month11:month11$1,month12:month12$1,aboutUs:aboutUs$1,intro1:intro1$1,intro2:intro2$1,goApp:goApp$1,googlePlay:googlePlay$1,officialDownload:officialDownload$1,downloadTaskTip:downloadTaskTip$1,customerService:customerService$1,onlineService:onlineService$1,myPackage:myPackage$1,useRule:useRule$1,appuse:appuse$1,send:send$1,videoCard:videoCard$1,videoCardDes:videoCardDes$1,chatCard:chatCard$1,chatCardDes:chatCardDes$1,matchCard:matchCard$1,matchCardDes:matchCardDes$1,diamond:diamond$1,recharge:recharge$1,diamondShop:diamondShop$1,rechargeSuccess:rechargeSuccess$1,advicePwaAndApp:advicePwaAndApp$1,accountSetting:accountSetting$1,systemSetting:systemSetting$1,deleteAccount:deleteAccount$1,deleteAccountTip:deleteAccountTip$1,logOut:logOut$1,notification:notification$1,firstRegisterTip:firstRegisterTip$1,downloadAppRewardTip:downloadAppRewardTip$1,downloadAppRewardTip2:downloadAppRewardTip2$1,downloadAppToChatTip:downloadAppToChatTip$1,downloadAppToChatTip2:downloadAppToChatTip2$1,dailyRewards:dailyRewards$1,claimed:claimed$1,hi:hi$1,notLoginYet:notLoginYet$1,quickLogin:quickLogin$1,accountLogin:accountLogin$1,googleLogin:googleLogin$1,appleLogin:appleLogin$1,loginAgree:loginAgree$1,service:service$1,and:and$1,privacy:privacy$1,loginAgreeTail:loginAgreeTail$1,avatar:avatar$1,nickName:nickName$1,userId:userId$1,birthDay:birthDay$1,enterNickName:enterNickName$1,notDisturb:notDisturb$1,setPassword:setPassword$1,changePassword:changePassword$1,account:account$1,password:password$1,enterAccount:enterAccount$1,enterPassword:enterPassword$1,enterOriginalPassword:enterOriginalPassword$1,enterNewPassword:enterNewPassword$1,reEnterNewPassword:reEnterNewPassword$1,reEnterPasswordDifferent:reEnterPasswordDifferent$1,setSamePassword:setSamePassword$1,pleaseEnter:pleaseEnter$1,callHistory:callHistory$1,message:message$1,officialMessage:officialMessage$1,notConnected:notConnected$1,clearRecords:clearRecords$1,allRead:allRead$1,noChatTip:noChatTip$1,noChatTip2:noChatTip2$1,unlockChatTip:unlockChatTip$1,unlockChatByCard:unlockChatByCard$1,unlockChatByDiamond:unlockChatByDiamond$1,toOpen:toOpen$1,continueVideoCall:continueVideoCall$1,continueMatch:continueMatch$1,matchAgain:matchAgain$1,startMatch:startMatch$1,connecting:connecting$1,videoCall:videoCall$1,videoCalling:videoCalling$1,videoCallWarning:videoCallWarning$1,videoCallMutedTip:videoCallMutedTip$1,videoCallMutedUnlock:videoCallMutedUnlock$1,videoCardUsedTip:videoCardUsedTip$1,videoCallCostTip:videoCallCostTip$1,videoCallHangUpBusy:videoCallHangUpBusy$1,videoCallConnectFail:videoCallConnectFail$1,mediaDiveceDisable:mediaDiveceDisable$1,mediaDiveceUnknown:mediaDiveceUnknown$1,notSupportGuide:notSupportGuide$1,mediaDiveceUnavailable:mediaDiveceUnavailable$1,online:online$1,offline:offline$1,busy:busy$1,off:off$1,album:album$1,matchFail:matchFail$1,matching:matching$1,videoConsumption:videoConsumption$1,giftConsumption:giftConsumption$1,allGift:allGift$1,sendGfit:sendGfit$1,callDuration:callDuration$1,recommendedHosts:recommendedHosts$1,saveAccount:saveAccount$1,saveAccountTip:saveAccountTip$1,confirmLogout:confirmLogout$1,confirmNoCommit:confirmNoCommit$1,confirmHangUp:confirmHangUp$1,currentMatchTip:currentMatchTip$1,refreshPullDown:refreshPullDown$1,refreshing:refreshing$1,refreshLoadMore:refreshLoadMore$1,refreshLoading:refreshLoading$1,refreshLoadFail:refreshLoadFail$1,refreshNoMore:refreshNoMore$1,forbidRegion:forbidRegion$1,sensiveContent:sensiveContent$1,ageForbid:ageForbid$1,netError:netError$1,serverError:serverError$1},language$1="",confirm="kumperma",cancel="kanasela",deny="deny",save="I-save",operateFail="Nabigo ang operasyon, pakisubukang muli.",operateSuccess="Successfully executed",randomMatch="Random na Pagtutugma",free="libre",unit="/minuto",game="Laro",pwa_tip="Idagdag si {para} sa iyong home screen para sa mabilisang pag-access",add="Ekle",pwa_iphone_tip="Idagdag si {para} sa home screen",pwa_iphone_tip_2="1. Pindutin ang 'I-share' button sa ibaba",pwa_iphone_tip_3="2. Piliin ang 'Idagdag sa home screen",pwa_iphone_tip_4="I-add sa pangunahing screen",billDetails="Mga detalye ng bayarin",consume="Pagkonsumo",income="mga kita",all="All",month1="Enero",month2="Pebrero",month3="Marso",month4="Abril",month5="Mayo",month6="Hunyo",month7="Hulyo",month8="Agusto",month9="Septyembre",month10="Oktobre",month11="Nobyembre",month12="Desyembre",aboutUs="Tungkol sa Amin",intro1="Maligayang pagdating sa {para}! Kami ang iyong natatanging 1v1 na kaibigang panlipunan. Nakatuon kami sa pagbibigay sa iyo ng isang ligtas, masaya, at masiglang kapaligiran upang madali kang makakilala ng mga bagong kaibigan at tamasahin ang isang tunay at kasiya-siyang karanasan sa pakikipag-ugnayan. \n Upang mas mapadali at mas mapanlikha ang iyong karanasan sa lipunan, inilunsad namin ang mobile app ng {para}. Kahit nasaan ka mansa bahay, sa opisina, o naglalakbaysa isang simpleng pag-tap, maaari mong agad na makipag-ugnayan sa mga bagong kaibigan at tamasahin ang walang putol na video chat. \n I-download ang {para} ngayon at simulan ang iyong bagong paglalakbay sa lipunan!",intro2="Inaasahan naming makasama ka sa app at lumikha ng mas marami pang magagandang alaala nang magkasama!",goApp=" {para} ",googlePlay="Google Play",officialDownload="Opisyal na pag-download",downloadTaskTip="Awtomatikong magsisimula ang iyong pag-download. Mangyaring maghintay...",customerService="Serbisyo sa customer",onlineService="Online na serbisyo",myPackage="Ang pakete ko",useRule="Panuntunan ng paggamit",appuse="Eksklusibo sa app",send="send",videoCard="Video card",videoCardDes="Puwede kang gumamit ng 1 video card para sa isang 1-min na video chat",chatCard="Chat card",chatCardDes="Puwede kang gumamit ng 1 chat card upang makipag-chat sa iba nang libre, ang bawat chat card ay mag-e-expire sa loob ng {para} araw",matchCard="Match card",matchCardDes="Gamitin ang match card para tumugma nang libre",diamond="diyamante",recharge="Recharge",diamondShop="Diamond shop",rechargeSuccess="pagkarga na tagumpay",advicePwaAndApp="Para sa madaling pag-access at kumpletong karanasan, inirerekumenda naming idagdag si {para} sa iyong home screen o i-download ang app na {para}.",accountSetting="Mga setting ng account",systemSetting="Mga setting ng systema",deleteAccount="Tanggalin ang account",deleteAccountTip="Pakikumpirma ang iyong aksyon. Mawawasak kaagad ang iyong account pagkatapos matanggal!",logOut="Log out",notification="Bildirim",firstRegisterTip="Pagkakataong makatanggap ng mga sumusunod na regalo sa unang rehistro",downloadAppRewardTip="I-download ang opisyal na app ng {para} at makatanggap ng mga gantimpala kaagad",downloadAppRewardTip2="Tumanggap ng maraming pang-araw-araw na gantimpala!",downloadAppToChatTip="I-download ang {para} at makipag-chat sa mga babae nang libre",downloadAppToChatTip2="Pumunta na sa {para} para sa mas maraming mga tampok!",dailyRewards="Pang-araw-araw na gantimpala",claimed="inangkin",hi="Kamusta, {para}",notLoginYet="Hindi ka pa naka-log in",quickLogin="Simula",accountLogin="Mag-log in gamit ang account",googleLogin="Mag-log in gamit ang google",appleLogin="Mag-log in gamit ang Apple",loginAgree="Ang pag-log in ay nangangahulugan na sumasang-ayon ka sa aming ",service="Mga Tuntunin ng Serbisyo",and=" at ",privacy="Patakaran sa Privacy",loginAgreeTail=".",avatar="Profile picture ko",nickName="palayaw ko",userId="User id",birthDay="araw nang kapanganakan",enterNickName="Ilagay ang palayaw",notDisturb="Huwag abalahin",setPassword="Itakda ang password",changePassword="Palitan ANG password",account="Account",password="Password",enterAccount="Ilagay ang account",enterPassword="Ilagay ang password",enterOriginalPassword="Pakilagay ang orihinal na password",enterNewPassword="Pakilagay ang bagong password",reEnterNewPassword="Ipasok muli ang password",reEnterPasswordDifferent="Hindi pare-pareho ang password, pakipasok muli",setSamePassword="Ang mga password ay pareho, ilagay ito muli",pleaseEnter="paki pasuk",callHistory="nakaraan tawag",message="mensahe",officialMessage="Mensahe ng sistema",notConnected="hindi nagkonekta",clearRecords="I-clear ang mga tala",allRead="Markahan ang lahat bilang nabasa na",noChatTip="Wala pang chat!",noChatTip2="Kapag nakipag-chat ka sa mga bagong kaibigan sa {para}, lilitaw sila dito.",unlockChatTip="Gumastos ng {para} na diamante para i-unlock ang pribadong chat sa kanya",unlockChatByCard="Na-unlock mo ang {para} araw na libreng mensahe sa gumagamit na ito sa pamamagitan ng paggamit ng chat card, maging kaibigan para makipag-chat nang libre",unlockChatByDiamond="Na-unlock mo ang {para} araw na libreng mensahe sa user na ito sa pamamagitan ng paggamit ng mga diamante",toOpen="buksan",continueVideoCall="Ituloy ang video call",continueMatch="Patuloy na tumutugma",matchAgain="tugma ulit",startMatch="simula ng pareha",connecting="Kumokonekta",videoCall="bidyo tawag",videoCalling="Tumatawag, mangyaring maghintay nang matiyaga",videoCallWarning="Ang anumang nilalamang kinasasangkutan ng pornograpiya, kahalayan, pulitika, pagsusugal, karahasan, atbp. na lumalabag sa mga pambansang batas at regulasyon ay mahigpit na ipinagbabawal sa panahon ng proseso ng video (boses). Kapag natuklasan, agad naming sususpindihin ang account!",videoCallMutedTip="Ang tawag ay naka-mute, mag-recharge para i-unlock ang boses",videoCallMutedUnlock="buksan",videoCardUsedTip="Ang video card ay awtomatikong ginamit, ang kasalukuyang {para}s ay libre",videoCallCostTip="Pagkatapos ng {para}s Sisingilin ka ng {para1} diamante/min ",videoCallHangUpBusy="Abala ang kabilang partido, pakisubukang muli sa ibang pagkakataon",videoCallConnectFail="Pagkabigo ng koneksyon, ang babae mo ay inagaw",mediaDiveceDisable="Mangyaring payagan ang browser na ma-access ang camera at mikropono para sa mas mahusay na karanasan sa video chat sa mga babae.",mediaDiveceUnknown="May isang babae na nag-iimbita sa iyo na i-on ang camera at mikropono para sa mas masaya at mas nakaka-engganyong komunikasyon",notSupportGuide="Maaaring may problema sa iyong kasalukuyang browser o koneksyon sa internet. I-download ang aming app na nakalista sa Play Store para sa pinakamagandang karanasan sa video call.",mediaDiveceUnavailable="mediaDiveceUnavailable",online="Online",offline="Offline",busy="Busy",off="Off",album="Album",matchFail="Madaming nakikipagtugma, pakisubukang muli sa ibang pagkakataon",matching="pakikipagpareha",videoConsumption="Pagkonsumo ng video",giftConsumption="Pagkonsumo ng regalo",allGift="lahat ng regalo",sendGfit="Nagpadala ako sa mga host",callDuration="Katagalan ng pagtawag",recommendedHosts="Hot Girls for You",saveAccount="Screenshot at i-save",saveAccountTip="Mangyaring i-screenshot ang account mo at password kung sakaling mawala ang account",confirmLogout="Sigurado ka bang mag-log out sa account?",confirmNoCommit="Mayroon kang mga hindi pa nai-save na pagbabago. Sigurado ka bang gusto mong lumabas?",confirmHangUp="Yung babae gusto ka pang makipag chat sayo, sigurado ka bang ibababa ang tawag?",currentMatchTip="{para}+ mga batang babae ay nasa laban sa kasalukuyan",refreshPullDown="Hilahin pababa ang nakakapreskong",refreshing="Nire-refresh",refreshLoadMore="Mag-load pa",refreshLoading="Nagkakarga",refreshLoadFail="Nabigo ang pagkarga",refreshNoMore="Wala nang data",forbidRegion="Ang iyong rehiyon ay hindi suportado",sensiveContent="Ikaw ay malapit nang mag-access sa sensitibong nilalaman, mangyaring kumpirmahin na ikaw ay higit sa 18 taong gulang at sumasang-ayon na ma-access ang ganitong uri ng nilalaman.",ageForbid="Dahil sa mga limitasyon sa edad, hindi mo magagamit ang {para}",netError="Error sa network, pakisubukang ulit sa ibang pagkakataon",serverError="Error sa mga server, pakisubukang muli sa ibang pagkakataon",fil={language:language$1,confirm:confirm,cancel:cancel,deny:deny,save:save,operateFail:operateFail,operateSuccess:operateSuccess,randomMatch:randomMatch,free:free,unit:unit,game:game,pwa_tip:pwa_tip,add:add,pwa_iphone_tip:pwa_iphone_tip,pwa_iphone_tip_2:pwa_iphone_tip_2,pwa_iphone_tip_3:pwa_iphone_tip_3,pwa_iphone_tip_4:pwa_iphone_tip_4,billDetails:billDetails,consume:consume,income:income,all:all,month1:month1,month2:month2,month3:month3,month4:month4,month5:month5,month6:month6,month7:month7,month8:month8,month9:month9,month10:month10,month11:month11,month12:month12,aboutUs:aboutUs,intro1:intro1,intro2:intro2,goApp:goApp,googlePlay:googlePlay,officialDownload:officialDownload,downloadTaskTip:downloadTaskTip,customerService:customerService,onlineService:onlineService,myPackage:myPackage,useRule:useRule,appuse:appuse,send:send,videoCard:videoCard,videoCardDes:videoCardDes,chatCard:chatCard,chatCardDes:chatCardDes,matchCard:matchCard,matchCardDes:matchCardDes,diamond:diamond,recharge:recharge,diamondShop:diamondShop,rechargeSuccess:rechargeSuccess,advicePwaAndApp:advicePwaAndApp,accountSetting:accountSetting,systemSetting:systemSetting,deleteAccount:deleteAccount,deleteAccountTip:deleteAccountTip,logOut:logOut,notification:notification,firstRegisterTip:firstRegisterTip,downloadAppRewardTip:downloadAppRewardTip,downloadAppRewardTip2:downloadAppRewardTip2,downloadAppToChatTip:downloadAppToChatTip,downloadAppToChatTip2:downloadAppToChatTip2,dailyRewards:dailyRewards,claimed:claimed,hi:hi,notLoginYet:notLoginYet,quickLogin:quickLogin,accountLogin:accountLogin,googleLogin:googleLogin,appleLogin:appleLogin,loginAgree:loginAgree,service:service,and:and,privacy:privacy,loginAgreeTail:loginAgreeTail,avatar:avatar,nickName:nickName,userId:userId,birthDay:birthDay,enterNickName:enterNickName,notDisturb:notDisturb,setPassword:setPassword,changePassword:changePassword,account:account,password:password,enterAccount:enterAccount,enterPassword:enterPassword,enterOriginalPassword:enterOriginalPassword,enterNewPassword:enterNewPassword,reEnterNewPassword:reEnterNewPassword,reEnterPasswordDifferent:reEnterPasswordDifferent,setSamePassword:setSamePassword,pleaseEnter:pleaseEnter,callHistory:callHistory,message:message,officialMessage:officialMessage,notConnected:notConnected,clearRecords:clearRecords,allRead:allRead,noChatTip:noChatTip,noChatTip2:noChatTip2,unlockChatTip:unlockChatTip,unlockChatByCard:unlockChatByCard,unlockChatByDiamond:unlockChatByDiamond,toOpen:toOpen,continueVideoCall:continueVideoCall,continueMatch:continueMatch,matchAgain:matchAgain,startMatch:startMatch,connecting:connecting,videoCall:videoCall,videoCalling:videoCalling,videoCallWarning:videoCallWarning,videoCallMutedTip:videoCallMutedTip,videoCallMutedUnlock:videoCallMutedUnlock,videoCardUsedTip:videoCardUsedTip,videoCallCostTip:videoCallCostTip,videoCallHangUpBusy:videoCallHangUpBusy,videoCallConnectFail:videoCallConnectFail,mediaDiveceDisable:mediaDiveceDisable,mediaDiveceUnknown:mediaDiveceUnknown,notSupportGuide:notSupportGuide,mediaDiveceUnavailable:mediaDiveceUnavailable,online:online,offline:offline,busy:busy,off:off,album:album,matchFail:matchFail,matching:matching,videoConsumption:videoConsumption,giftConsumption:giftConsumption,allGift:allGift,sendGfit:sendGfit,callDuration:callDuration,recommendedHosts:recommendedHosts,saveAccount:saveAccount,saveAccountTip:saveAccountTip,confirmLogout:confirmLogout,confirmNoCommit:confirmNoCommit,confirmHangUp:confirmHangUp,currentMatchTip:currentMatchTip,refreshPullDown:refreshPullDown,refreshing:refreshing,refreshLoadMore:refreshLoadMore,refreshLoading:refreshLoading,refreshLoadFail:refreshLoadFail,refreshNoMore:refreshNoMore,forbidRegion:forbidRegion,sensiveContent:sensiveContent,ageForbid:ageForbid,netError:netError,serverError:serverError},messages={ar:ar,en:en,es:es,hi:hi$7,id:id,ind:id,pt:pt,th:th,tr:tr,vi:vi,fil:fil},language=createI18n({legacy:!1,locale:systemLanguage.toLowerCase().startsWith("ar")?"ar":systemLanguage,fallbackLocale:"en",messages:messages,missingWarn:showDebug.value,fallbackWarn:showDebug.value});systemLanguage.toLowerCase().startsWith("ar")?(console.log(" LTR"),document.documentElement.setAttribute("dir","rtl")):(console.log(" RTL"),document.documentElement.setAttribute("dir","ltr"));const{t:t}=language.global;let peaceAndLoveTimer,checkPeaceAndLovePageTimer;function openPeaceAndLoveTimer(){disposePeaceAndLoveTimer(),peaceAndLoveTimer=setInterval((()=>{checkPeaceAndLove()}),5e3)}function disposePeaceAndLoveTimer(){console.log(" "),peaceAndLoveTimer=clearInterval(peaceAndLoveTimer)}function checkCurrentPeaceAndLovePage(){checkPeaceAndLovePageTimer=clearInterval(checkPeaceAndLovePageTimer),checkPeaceAndLovePageTimer=setInterval((()=>{var e;const t=getCurrentPages$1();if(t.length>0){const n=t[t.length-1],r=null==(e=null==n?void 0:n.$page)?void 0:e.path;"/pages/peace-and-love/peace-and-love/peace-and-love"!=r&&(console.log(`  ${r}`),reLaunch({url:"/pages/peace-and-love/peace-and-love/peace-and-love"}))}}),500)}function testCloseCheck(){checkPeaceAndLovePageTimer=clearInterval(checkPeaceAndLovePageTimer)}Object.defineProperty(String.prototype,"tr",{get(){return t(this)}}),Object.defineProperty(String.prototype,"trArg",{value:function(e){return t(this,{para:e})}}),Object.defineProperty(String.prototype,"trArgs",{value:function(e){return t(this,e)}}),console.log(" window-listener.js"),window.addEventListener("beforeinstallprompt",(e=>{console.log(`PWA ${e.type}`),e.preventDefault(),window.deferredPrompt=e;try{useAppDataStore().pwaStatusChanged()}catch(t){}})),window.addEventListener("beforeunload",(function(e){e.returnValue=igAlert})),window.addEventListener("popstate",(function(e){var t;e.preventDefault();const n=getCurrentPages$1();if(n.length>0){const e=n[n.length-1];"/pages/video-chat/video-chat"==(null==(t=null==e?void 0:e.$page)?void 0:t.path)&&(console.log(""),setTimeout((()=>{navigateTo({url:"/pages/video-chat/video-chat-end"})}),10))}}));const _storePeaceAndLove="PeaceAndLove";let _peaceAndLove=storeRead(_storePeaceAndLove);const _storeAgeChoose="AgeChoose";let _chooseAge=storeRead(_storeAgeChoose);function checkAgeChoose(){saveChooseAge(!0),disposePeaceAndLoveTimer()}function checkPeaceAndLove(){console.log(""),!0===_peaceAndLove?(console.log(" "),goPeaceAndLove()):!1===_peaceAndLove?(console.log("  18"),checkAgeChoose()):(console.log("  "),netPeaceAndLove({success:e=>{0==e?(console.log(" "),savePeaceAndLove(!0),goPeaceAndLove(),appTrackPeaceAndLove()):(savePeaceAndLove(!1),console.log("  18"),checkAgeChoose())}}))}function goPeaceAndLove(e){console.log(" "),checkCurrentPeaceAndLovePage(),disposePeaceAndLoveTimer(),reLaunch({url:"/pages/peace-and-love/peace-and-love/peace-and-love"})}function savePeaceAndLove(e){_peaceAndLove=e,storeSave({key:_storePeaceAndLove,value:_peaceAndLove})}function saveChooseAge(e){_chooseAge=e,storeSave({key:_storeAgeChoose,value:_chooseAge})}""===_peaceAndLove&&""===_chooseAge&&(console.log("  "),openPeaceAndLoveTimer()),console.log(" "),checkPeaceAndLove(),console.log(" App.vue");const _sfc_main={onLaunch:()=>{console.log("App.vue Launch"),initAdjust(),initLocalForage(),initOrderLocalForage(),firebaseApp(),globalTimer(),setTimeout((()=>{useAppDataStore().loadAllConversations({success:()=>{console.log("App"),useAppDataStore().updateConversationBadge()}})}),500),trackRtcSupport(),cacheSensitiveWords({forceRefresh:!0}),setTimeout((()=>{guestLogin()}),1500),appTrackAppReady()},onShow:()=>{console.log("App.vue Show"),changeUserIsBusy({leaveBusy:!0,action:!1}),changeAppShow(!0),hideValidDialogs(),cacheAppConfig({forceRefresh:!0}),cacheSensitiveWords({}),netUserDetail({}),netUserAdvance({}),targetFirstTravelTimestamp(!1)},onHide:()=>{console.log("App.vue Hide"),changeUserIsBusy({leaveBusy:!0,action:!0}),changeAppShow(!1)}};function createApp(){const e=createApp$1(_sfc_main);initSentry(e);const t=createPinia();return e.use(t),e.config.globalProperties.$lanKey=lanKey,e.use(language),{app:e}}setupApp(_sfc_main),console.log(" main.js"),createApp().app.use(index$e).mount("#app");export{showFirstRechargeModal as $,targetFirstTravelTimestamp as A,adjustUploadAttribution as B,configFirebaseMessage as C,netUserAdvance as D,storageLoadAllOrderUpload as E,onMounted as F,changeHomeDayCount as G,resolveDynamicComponent as H,setNoShowShouldTryPermission as I,showMediaUnavaliableModal as J,isFlutterWebApp as K,createElementBlock as L,ModalLoginVue as M,renderList as N,Fragment as O,withDirectives as P,vShow as Q,createTextVNode as R,toDisplayString$1 as S,unref as T,showRechargeModal as U,brcPath as V,createCommentVNode as W,netAnchor as X,anime as Y,appTrackFloatRechargeClick as Z,_export_sfc as _,_peaceAndLove as a,levelChannel as a$,showLoginModal as a0,Swiper as a1,index$i as a2,normalizeStyle as a3,normalizeClass as a4,showRtcLocalInvitationModal as a5,navigateTo as a6,SwiperItem as a7,netGameRoomList as a8,showSettingModal as a9,getLocale$1 as aA,deviceId as aB,netUserDetail as aC,netRewardsFloat as aD,showAppDownloadChatModal as aE,f$1 as aF,openGooglePlay as aG,showDebugModal as aH,showBagModal as aI,isiPhoneAndNotPwa as aJ,appTrackSupportPwa as aK,showiPhonePwaGuideModal as aL,appTrackPwaInstallClick as aM,appTrackPwaAcceptInstall as aN,resolveComponent as aO,ModalRecharge as aP,checkSensitiveWords as aQ,netSendMsgText as aR,nextTick as aS,Input as aT,timestampToYearMothDayTime as aU,setNavigationBarTitle as aV,createBaseVNode as aW,initRtc as aX,getAgoraAppId as aY,netJoinCall as aZ,appTrackCamMic as a_,onUnmounted as aa,getRandomInt as ab,refAuth as ac,appTrackMatchClick as ad,storeSave as ae,redirectTo as af,matchStop as ag,cancelLocalInvitation as ah,matchPlay as ai,getCurrentPages$1 as aj,navigateBack as ak,netGetAivAnchor as al,netMatchAnchor as am,showNotificationError$1 as an,netCreateCall as ao,sendLocalInvitation as ap,netCancelCall as aq,changeUserIsBusy as ar,watch as as,gAppName as at,$o as au,netAnchorDetail as av,netCallHistory as aw,timestampToShortDateTime as ax,showDebug as ay,systemLanguage as az,_chooseAge as b,netGameRoomDetail as b$,pushLocal as b0,clearGAnchorJoinTimeout as b1,joinChannel as b2,combineGAnchorJoinTimeout as b3,clearGVideoTimer as b4,ModalConfirm as b5,Lo as b6,netSendMsgInCallText as b7,netRefreshCall as b8,netVirtualVideoCost as b9,createSelectorQuery as bA,getApp$1 as bB,initVueI18n as bC,hideKeyboard as bD,showLoading$1 as bE,hideLoading$1 as bF,stopPullDownRefresh as bG,pageScrollTo as bH,$on as bI,$off as bJ,renderSlot as bK,computed as bL,linkJump as bM,netFaq as bN,netAiHelp as bO,netDeleteAccount as bP,clearLoginAuth as bQ,storeClear as bR,netChangePassword as bS,showGuestPwdTipModal as bT,showAccountLoginModal as bU,netSetPassword as bV,disposeGlobalTimer as bW,testCloseCheck as bX,savePeaceAndLove as bY,saveChooseAge as bZ,globalTimer as b_,index$d as ba,renewToken as bb,combineGVideoTimer as bc,netEndCall as bd,anchorVisiteTriggerAi as be,anchorLastestPauseDelay as bf,anchorStayTriggerAi as bg,anchorTrigger as bh,netGiftList as bi,netSendGift as bj,timestampToYearMothDay as bk,chooseImage as bl,showLoading as bm,netGetUpload as bn,netUpdateUserDetail as bo,showConfirmModal as bp,index$7 as bq,netPutUploadFile as br,hideLoading as bs,netBillHistory as bt,ScrollView as bu,withModifiers as bv,setStorageSync as bw,getStorageSync as bx,upx2px as by,getSystemInfoSync as bz,cacheAppConfig as c,isInSSRComponentSetup as c0,injectHook as c1,getCurrentInstance as c2,ON_SHOW as c3,ON_HIDE as c4,ON_LOAD as c5,ON_READY as c6,ON_UNLOAD as c7,createBlock as d,createVNode as e,index$q as f,getAppConfig as g,storeToRefs as h,index$g as i,ref as j,storeRead as k,appShowShouldTryPermission as l,checkCamAndMicPermission as m,lanKey as n,openBlock as o,localAuthAvailable as p,firstLoginTimestamp as q,reLaunch as r,switchTab as s,firstTravelTimestamp as t,useAppDataStore as u,netRechargeCenter as v,withCtx as w,timestampDifferent as x,targetFirstLoginTimestamp as y,getLoginUserId as z};
