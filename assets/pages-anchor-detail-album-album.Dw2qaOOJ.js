import{_ as a,u as l,j as e,av as s,o,d as n,w as t,i as u,e as r,R as c,S as i,L as d,N as v,O as b,W as p,aj as f,ak as h,a2 as m,a1 as g,ba as _,f as y,a7 as k}from"./index-SUU5mfSv.js";import{b as C,c as w}from"./uni-app.es.BFzw-cPf.js";const x=a({__name:"album",setup(a){const x=l().$onAction((({name:a})=>{"remoteInvitationReceived"==a&&(console.log("收到了通话请求 关闭正在播放的媒体"),$.value=!1,L.value="")})),I=()=>{1==f().length?history.back():h()},j=e({}),U=e(1),$=e(!1),L=e(""),R=a=>{$.value=!$.value,L.value=a};return C((a=>{console.log(`主播详情 id=${a.anchorUserId} index=${a.index}`),U.value=null!=a.index?parseInt(a.index):1,s({anchorUserId:a.anchorUserId,success:a=>{j.value=a}})})),w((()=>{console.log("相册页面销毁 监听取消"),x()})),(a,l)=>{const e=u,s=m,f=y,h=k,C=g,w=_;return o(),n(e,{class:"anchor-content"},{default:t((()=>[r(e,{class:"b-safe-top",style:{position:"fixed",left:"0",top:"0",right:"0","z-index":"100"}},{default:t((()=>[r(e,{class:"b-status-bar"}),r(e,{class:"b-navbar"},{default:t((()=>[r(e,{class:"nav-back album-nav"},{default:t((()=>[r(e,{onClick:I,class:"arrow-right transX"}),r(s,{class:"album-title"},{default:t((()=>[c(i(`${U.value+1}/${j.value.albumUrlList.length}`),1)])),_:1})])),_:1})])),_:1})])),_:1}),r(C,{class:"scroll",current:U.value,onChange:l[0]||(l[0]=a=>{return l=a,void(U.value=l.detail.current);var l})},{default:t((()=>{var a;return[(o(!0),d(b,null,v(null==(a=j.value)?void 0:a.albumUrlList,((a,l)=>(o(),n(h,null,{default:t((()=>[r(e,{class:"album-item"},{default:t((()=>[r(f,{class:"place-holder-gradient",src:null!=(null==a?void 0:a.videoCover)?null==a?void 0:a.videoCover:null==a?void 0:a.value,mode:"aspectFill"},null,8,["src"]),null!=(null==a?void 0:a.videoCover)?(o(),n(e,{key:0,onClick:l=>R(null==a?void 0:a.value,null==a||a.videoCover),class:"video-play-icon"},null,8,["onClick"])):p("",!0)])),_:2},1024)])),_:2},1024)))),256))]})),_:1},8,["current"]),$.value?(o(),n(w,{key:0,class:"video-play-area","page-gesture":!0,src:L.value,autoplay:!0,loop:!1,muted:!1,"enable-play-gesture":!1,"enable-progress-gesture":!0,controls:!0,"show-center-play-btn":!0,"show-fullscreen-btn":!0,"show-loading":!0,"show-mute-btn":!0,"show-play-btn":!0,"show-progress":!0,"object-fit":"cover"},null,8,["src"])):p("",!0),$.value?(o(),n(e,{key:1,onClick:R,class:"close-out close-btn"},{default:t((()=>[r(e,{class:"close"})])),_:1})):p("",!0)])),_:1})}}},[["__scopeId","data-v-d243762f"]]);export{x as default};
