import{_ as a,j as l,h as e,u as s,be as u,av as t,bf as n,bg as o,o as r,d as c,w as i,V as d,bh as v,i as f,e as m,R as g,S as p,a3 as _,P as b,Q as h,L as I,N as y,O as k,T as C,W as $,ac as U,a5 as A,au as w,aP as x,p as N,a0 as L,an as j,aj as K,ak as B,a6 as G,a2 as P,f as R}from"./index-SUU5mfSv.js";import{b as D,c as E,o as F,a as H}from"./uni-app.es.BFzw-cPf.js";import{M,G as S}from"./gift-effect.7ERhjfhJ.js";const T=a({__name:"anchor-detail",setup(a){const T=l(d.anchorDetailGift),X=l(),q=a=>{X.value.throwGiftEffect(a)},z=l(!1),O=a=>{0==Q.value&&(j({content:a}),V(!0))},Q=l(!1),V=a=>{Q.value=a},W=()=>{1==K().length?history.back():B()},{userHaveCallCard:J,userHaveChatCard:Y}=e(s()),Z=l({}),aa=l(null),la=l(null),ea=a=>{var l;(null==(l=Z.value)?void 0:l.albumUrlList.length)>0&&G({url:`/pages/anchor-detail/album/album?anchorUserId=${aa.value}&index=${a}`})};let sa,ua=!1;D((a=>{console.log(`主播详情 id=${a.anchorUserId}`),aa.value=a.anchorUserId,u(a.anchorUserId,(()=>{ua=!0}))})),E((()=>{console.log("主播详情 销毁"),sa=clearInterval(sa)}));let ta=0;return F((()=>{t({anchorUserId:aa.value,foreRequest:!0,backLocal:a=>{Z.value=a},success:a=>{Z.value=a,la.value=null==a?void 0:a.sendMsgFlag}}),console.log("AII 主播详情页 出现"),n>0?console.log(`AII 主播详情 触发间隔内 不做触发统计 ${n}`):1==ua?console.log("AII 主播详情页 本次访问直接触发了ai 停留定时器跳过"):1==v?console.log("AII 主播详情页 准备初始化停留计时器 但是本次访问直接触发了ai 停留定时器跳过"):(sa=clearInterval(sa),sa=setInterval((()=>{ta++,console.log(`AII 主播详情页 计数增加 ${ta}`),o(ta,(()=>{console.log("AII 主播详情页 停留时长触发了ai 停止计时器和清空计数"),ta=0,sa=clearInterval(sa)}))}),1e3))})),H((()=>{console.log("AII 主播详情页 消失 计数停止"),ta=0,sa=clearInterval(sa)})),(a,l)=>{const e=f,s=P,u=R;return r(),c(e,{class:"anchor-content"},{default:i((()=>{var t,n;return[m(e,{class:"b-safe-top",style:{position:"fixed",left:"0",top:"0",right:"0","z-index":"100"}},{default:i((()=>[m(e,{class:"b-status-bar"}),m(e,{class:"b-navbar"},{default:i((()=>[m(e,{class:"nav-back",style:{background:"linear-gradient(180deg, #000000B0 20%, #00000000 100%)"}},{default:i((()=>[m(e,{onClick:W,class:"arrow-right transX"})])),_:1})])),_:1})])),_:1}),m(e,{class:"anchor-portrait",style:_({backgroundImage:`url(${null==(t=Z.value)?void 0:t.portrait})`})},{default:i((()=>[m(e,{class:"anchor-detail"},{default:i((()=>{var a,l,u;return[m(s,{class:"nick-name"},{default:i((()=>{var a;return[g(p(null==(a=Z.value)?void 0:a.nickname),1)]})),_:1}),m(e,{class:"country-area"},{default:i((()=>{var a,l,u;return[m(e,{class:"country"},{default:i((()=>{var a;return[m(e,{class:"countryIcon",style:_({backgroundImage:`url(${null==(a=Z.value)?void 0:a.countryPath})`})},null,8,["style"]),m(s,{class:"country-title"},{default:i((()=>{var a;return[g(p(null==(a=Z.value)?void 0:a.countryTitle),1)]})),_:1})]})),_:1}),b(m(e,{class:"country"},{default:i((()=>[m(s,{class:"country-title"},{default:i((()=>[g("ID:")])),_:1}),m(s,{selectable:"true",class:"country-title"},{default:i((()=>{var a;return[g(p(null==(a=Z.value)?void 0:a.username),1)]})),_:1})])),_:1},512),[[h,null!=(null==(a=Z.value)?void 0:a.username)]]),b(m(e,{class:"country"},{default:i((()=>[m(s,{class:"country-title"},{default:i((()=>{var a;return[g(p(null==(a=Z.value)?void 0:a.languageName),1)]})),_:1})])),_:1},512),[[h,null!=(null==(l=Z.value)?void 0:l.languageName)]]),b(m(e,{class:"country"},{default:i((()=>[m(s,{class:"country-title"},{default:i((()=>{var a;return[g(p(null==(a=Z.value)?void 0:a.manyLanguageName),1)]})),_:1})])),_:1},512),[[h,null!=(null==(u=Z.value)?void 0:u.manyLanguageName)]])]})),_:1}),b(m(s,{class:"intro"},{default:i((()=>{var a;return[g(p(null==(a=Z.value)?void 0:a.signature),1)]})),_:1},512),[[h,null!=(null==(a=Z.value)?void 0:a.signature)&&null!=(null==(l=Z.value)?void 0:l.signature)&&""!=(null==(u=Z.value)?void 0:u.signature)]])]})),_:1})])),_:1},8,["style"]),m(e,{class:"anchor-album"},{default:i((()=>[m(e,{class:"album-title-area"},{default:i((()=>[m(s,{class:"album-title"},{default:i((()=>[g(p(a.$lanKey.album.tr),1)])),_:1}),m(e,{onClick:l[0]||(l[0]=a=>ea(0)),class:"arrow-right transX"})])),_:1}),m(e,{class:"display-album"},{default:i((()=>{var a;return[(r(!0),I(k,null,y(null==(a=Z.value)?void 0:a.albumUrlList,((a,l)=>(r(),c(e,{onClick:a=>ea(l),class:"album-item"},{default:i((()=>[m(u,{class:"place-holder-gradient",src:null!=(null==a?void 0:a.videoCover)?null==a?void 0:a.videoCover:null==a?void 0:a.value,mode:"aspectFill"},null,8,["src"]),null!=(null==a?void 0:a.videoCover)?(r(),c(e,{key:0,class:"video-play-icon"})):$("",!0)])),_:2},1032,["onClick"])))),256))]})),_:1})])),_:1}),m(e,{class:"bottom-safe"}),null!=aa.value&&""!=aa.value?(r(),c(e,{key:0,class:"action-area"},{default:i((()=>[m(e,{onClick:l[1]||(l[1]=a=>(aa.value,void(N()?G({url:`/pages/tab_bar/conversation/msg/msg?anchorId=${aa.value}`}):L()))),class:"msg-icon"},{default:i((()=>[0==la.value&&C(Y)?(r(),c(e,{key:0,class:"float-tip"},{default:i((()=>[m(e,{class:"tip"},{default:i((()=>[m(e,{class:"props props-chat"}),m(s,{class:"txt"},{default:i((()=>[g(p(a.$lanKey.free.tr),1)])),_:1})])),_:1}),m(e,{class:"down-arrow"})])),_:1})):$("",!0)])),_:1}),m(e,{onClick:l[2]||(l[2]=a=>C(A)({anchorId:aa.value,combineAnchor:!0})),class:"call-content"},{default:i((()=>[m(e,{class:"icon"}),m(s,{class:"tip-call"},{default:i((()=>[g(p(a.$lanKey.videoCall.tr),1)])),_:1}),null==C(U)||null==C(U)||""==C(U)||C(J)?(r(),c(e,{key:0,class:"tip"},{default:i((()=>[m(e,{class:"props props-video"}),m(s,null,{default:i((()=>[g(p(a.$lanKey.free.tr),1)])),_:1})])),_:1})):(r(),c(e,{key:1,class:"tip tip-price"},{default:i((()=>[m(e,{class:"diamond-image"}),m(s,null,{default:i((()=>{var a,l;return[g(p(null==(l=null==(a=Z.value)?void 0:a.callPrice)?void 0:l.toBin),1)]})),_:1}),m(s,{class:"unit"},{default:i((()=>[g(p(a.$lanKey.unit.tr),1)])),_:1})])),_:1}))])),_:1})])),_:1})):$("",!0),m(C(w),{visible:z.value,"onUpdate:visible":l[4]||(l[4]=a=>z.value=a),backdropClose:!0,header:!1,closeButton:!1,placement:"bottom",customClass:"modal-custom",onClose:l[5]||(l[5]=a=>{return l=!1,void(N()?z.value=l:L());var l})},{default:i((()=>[m(M,{userId:aa.value,onClose:l[3]||(l[3]=a=>z.value=!1),onChoosedGift:q,onShowRecharge:O},null,8,["userId"])])),_:1},8,["visible"]),m(S,{ref_key:"giftEffectRef",ref:X,userId:aa.value,userNickname:null==(n=Z.value)?void 0:n.nickname,style:{position:"absolute",bottom:"700rpx",left:"0",right:"0"}},null,8,["userId","userNickname"]),m(C(w),{visible:Q.value,"onUpdate:visible":l[7]||(l[7]=a=>Q.value=a),backdropClose:!0,header:!1,closeButton:!1,placement:"bottom",customClass:"modal-custom",onClose:l[8]||(l[8]=a=>V(!1))},{default:i((()=>[m(x,{anchorId:aa.value,path:T.value,onClose:l[6]||(l[6]=a=>Q.value=!1)},null,8,["anchorId","path"])])),_:1},8,["visible"])]})),_:1})}}},[["__scopeId","data-v-de37f88e"]]);export{T as default};
