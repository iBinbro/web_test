import{_ as e,h as a,u as l,j as s,as as t,o as n,d as r,w as u,i as o,e as d,R as c,S as i,W as v,T as w,n as p,an as f,bS as m,bT as _,bU as P,bQ as y,s as b,bV as g,aj as h,ak as V,a2 as $,aT as k}from"./index-SUU5mfSv.js";const x=e({__name:"edit-password",setup(e){var x;const{userDetail:K}=a(l()),N=s(null==(x=K.value)?void 0:x.hasPassword),U=s(""),j=s(""),E=s("");null==N.value&&t(K,(async(e,a)=>{var l;N.value=null==(l=K.value)?void 0:l.hasPassword}),{once:!0});const O=()=>{if(j.value==E.value)if(""==U.value||U.value!=E.value)if(""!=E.value)if(1==N.value){if(console.log("修改密码"),""==U.value)return void f({content:p.enterOriginalPassword.tr});m({oriPassword:U.value,newPassword:j.value,success:()=>{console.log("密码修改成功"),_({username:K.value.username,pwd:j.value,callback:()=>{P({resetPwd:!0})}}),y(),b({url:"/pages/tab_bar/mine/mine"})}})}else console.log("设置密码"),g({newPassword:j.value,success:()=>{console.log("密码设置成功"),_({username:K.value.username,pwd:j.value,callback:()=>{P({})}}),y(),b({url:"/pages/tab_bar/mine/mine"})}});else f({content:p.enterPassword.tr});else f({content:p.setSamePassword.tr});else f({content:p.reEnterPasswordDifferent.tr})},S=()=>{1==h().length?history.back():V()};return(e,a)=>{const l=o,s=$,t=k;return n(),r(l,{class:"bg"},{default:u((()=>[d(l,{class:"nav-area"},{default:u((()=>[d(l,{onClick:S,class:"close"}),d(s,null,{default:u((()=>[c(i(1==N.value?e.$lanKey.changePassword.tr:e.$lanKey.setPassword.tr),1)])),_:1})])),_:1}),d(l,{class:"content"},{default:u((()=>[d(l,{class:"input-area"},{default:u((()=>[1==N.value?(n(),r(l,{key:0,style:{display:"flex"}},{default:u((()=>[d(s,null,{default:u((()=>[c(i(e.$lanKey.enterOriginalPassword.tr),1)])),_:1})])),_:1})):v("",!0),1==N.value?(n(),r(l,{key:1,class:"input-content"},{default:u((()=>[d(t,{type:"text",name:"oldPassword",placeholder:`${w(p).enterOriginalPassword.tr}`,modelValue:U.value,"onUpdate:modelValue":a[0]||(a[0]=e=>U.value=e)},null,8,["placeholder","modelValue"])])),_:1})):v("",!0),d(l,{style:{display:"flex"}},{default:u((()=>[d(s,null,{default:u((()=>[c(i(e.$lanKey.enterNewPassword.tr),1)])),_:1})])),_:1}),d(l,{class:"input-content"},{default:u((()=>[d(t,{type:"text",name:"newPassword",placeholder:`${w(p).enterNewPassword.tr}`,modelValue:j.value,"onUpdate:modelValue":a[1]||(a[1]=e=>j.value=e)},null,8,["placeholder","modelValue"])])),_:1}),d(l,{style:{display:"flex"}},{default:u((()=>[d(s,null,{default:u((()=>[c(i(e.$lanKey.reEnterNewPassword.tr),1)])),_:1})])),_:1}),d(l,{class:"input-content"},{default:u((()=>[d(t,{type:"text",name:"confirmPassword",placeholder:`${w(p).reEnterNewPassword.tr}`,modelValue:E.value,"onUpdate:modelValue":a[2]||(a[2]=e=>E.value=e)},null,8,["placeholder","modelValue"])])),_:1})])),_:1}),d(l,{class:"complete-btn-place"}),d(l,{onClick:O,class:"complete-btn"},{default:u((()=>[d(s,null,{default:u((()=>[c(i(e.$lanKey.confirm.tr),1)])),_:1})])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-31ec20c5"]]);export{x as default};
